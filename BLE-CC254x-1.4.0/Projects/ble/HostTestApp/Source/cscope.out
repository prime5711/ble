cscope 15 /cygdrive/c/Work.git/ble/BLE-CC254x-1.4.0/Projects/ble/HostTestApp/Source               0001293075
	@../../../../Components/ble/controller/include/ll.h

45 #i‚de‡
LL_H


46 
	#LL_H


	)

48 #ifde‡
__˝lu•lus


56 
	~"bcomdef.h
"

63 
	#LL_INVALID_CONN_TIME_PARAM
–
ciMö
, 
ciMax
, 
¶
, 
l°o
 ) \

64 (((
ciMö
Ë< 
LL_CONN_INTERVAL_MIN
) || \

65 ((
ciMö
Ë> 
LL_CONN_INTERVAL_MAX
) || \

66 ((
ciMax
Ë< 
LL_CONN_INTERVAL_MIN
) || \

67 ((
ciMax
Ë> 
LL_CONN_INTERVAL_MAX
) || \

68 ((
ciMax
Ë< (
ciMö
)) || \

69 ((
¶
Ë> 
LL_SLAVE_LATENCY_MAX
) || \

70 ((
l°o
Ë< 
LL_CONN_TIMEOUT_MIN
) || \

71 ((
l°o
Ë> 
LL_CONN_TIMEOUT_MAX
))

	)

77 
	#LL_INVALID_CONN_TIME_PARAM_COMBO
–
ci
, 
¶
, 
l°o
 ) \

78 ((
uöt32
)((
l°o
)*8Ë<((uöt32)(1+(
¶
)Ë* (uöt32)((
ci
)*2)))

	)

90 
	#LL_STATUS_SUCCESS
 0x00

91 
	#LL_STATUS_ERROR_UNKNOWN_CONN_HANDLE
 0x02

92 
	#LL_STATUS_ERROR_INACTIVE_CONNECTION
 0x02

93 
	#LL_STATUS_ERROR_AUTH_FAILURE
 0x05

94 
	#LL_STATUS_ERROR_PIN_OR_KEY_MISSING
 0x06

95 
	#LL_STATUS_ERROR_OUT_OF_CONN_RESOURCES
 0x07

96 
	#LL_STATUS_ERROR_OUT_OF_TX_MEM
 0x07

97 
	#LL_STATUS_ERROR_OUT_OF_RX_MEM
 0x07

98 
	#LL_STATUS_ERROR_OUT_OF_HEAP
 0x07

99 
	#LL_STATUS_ERROR_WL_TABLE_FULL
 0x07

100 
	#LL_STATUS_ERROR_TX_DATA_QUEUE_FULL
 0x07

101 
	#LL_STATUS_ERROR_TX_DATA_QUEUE_EMPTY
 0x07

102 
	#LL_STATUS_ERROR_CONNECTION_TIMEOUT
 0x08

103 
	#LL_STATUS_ERROR_CONNECTION_LIMIT_EXCEEDED
 0x09

104 
	#LL_STATUS_ERROR_COMMAND_DISALLOWED
 0x0C

105 
	#LL_STATUS_ERROR_DUE_TO_LIMITED_RESOURCES
 0x0D

106 
	#LL_STATUS_ERROR_DUE_TO_DELAYED_RESOURCES
 0x0D

107 
	#LL_STATUS_ERROR_FEATURE_NOT_SUPPORTED
 0x11

108 
	#LL_STATUS_ERROR_UNEXPECTED_PARAMETER
 0x12

109 
	#LL_STATUS_ERROR_ILLEGAL_PARAM_COMBINATION
 0x12

110 
	#LL_STATUS_ERROR_BAD_PARAMETER
 0x12

111 
	#LL_STATUS_ERROR_UNKNOWN_ADV_EVT_TYPE
 0x12

112 
	#LL_STATUS_ERROR_PEER_TERM
 0x13

113 
	#LL_STATUS_ERROR_PEER_DEVICE_TERM_LOW_RESOURCES
 0x14

114 
	#LL_STATUS_ERROR_PEER_DEVICE_TERM_POWER_OFF
 0x15

115 
	#LL_STATUS_ERROR_HOST_TERM
 0x16

116 
	#LL_STATUS_ERROR_UNSUPPORTED_REMOTE_FEATURE
 0x1A

117 
	#LL_STATUS_ERROR_WL_ENTRY_NOT_FOUND
 0x1F

118 
	#LL_STATUS_ERROR_WL_TABLE_EMPTY
 0x1F

119 
	#LL_STATUS_ERROR_RNG_FAILURE
 0x1F

120 
	#LL_STATUS_ERROR_DISCONNECT_IMMEDIATE
 0x1F

121 
	#LL_STATUS_ERROR_DATA_PACKET_QUEUED
 0x1F

122 
	#LL_STATUS_ERROR_UNEXPECTED_STATE_ROLE
 0x21

123 
	#LL_STATUS_ERROR_LL_TIMEOUT
 0x22

124 
	#LL_STATUS_ERROR_LL_TIMEOUT_HOST
 0x22

125 
	#LL_STATUS_ERROR_LL_TIMEOUT_PEER
 0x22

126 
	#LL_STATUS_ERROR_INSTANT_PASSED
 0x28

127 
	#LL_STATUS_ERROR_INSTANT_PASSED_HOST
 0x28

128 
	#LL_STATUS_ERROR_INSTANT_PASSED_PEER
 0x28

129 
	#LL_STATUS_ERROR_KEY_PAIRING_NOT_SUPPORTED
 0x29

130 
	#LL_STATUS_ERROR_NO_ADV_CHAN_FOUND
 0x30

131 
	#LL_STATUS_ERROR_PARAM_OUT_OF_RANGE
 0x30

132 
	#LL_STATUS_ERROR_UPDATE_CTRL_PROC_PENDING
 0x3A

133 
	#LL_STATUS_ERROR_CTRL_PROC_ALREADY_ACTIVE
 0x3A

134 
	#LL_STATUS_ERROR_VER_INFO_REQ_ALREADY_PENDING
 0x3A

135 
	#LL_STATUS_ERROR_UNACCEPTABLE_CONN_INTERVAL
 0x3B

136 
	#LL_STATUS_ERROR_DIRECTED_ADV_TIMEOUT
 0x3C

137 
	#LL_STATUS_ERROR_CONN_TERM_DUE_TO_MIC_FAILURE
 0x3D

138 
	#LL_STATUS_ERROR_CONN_FAILED_TO_BE_ESTABLISHED
 0x3E

139 
	#LL_STATUS_ERROR_CONN_TIMING_FAILURE
 0x3F

141 
	#LL_STATUS_WARNING_TX_DISABLED
 0xFF

142 
	#LL_STATUS_WARNING_FLAG_UNCHANGED
 0xFF

143 

	)

145 
	#LL_ENC_KEY_REQ_ACCEPTED
 
LL_STATUS_SUCCESS


	)

146 
	#LL_ENC_KEY_REQ_REJECTED
 
LL_STATUS_ERROR_PIN_OR_KEY_MISSING


	)

147 
	#LL_ENC_KEY_REQ_UNSUPPORTED_FEATURE
 
LL_STATUS_ERROR_UNSUPPORTED_REMOTE_FEATURE


	)

150 
	#LL_SUPERVISION_TIMEOUT_TERM
 
LL_STATUS_ERROR_CONNECTION_TIMEOUT


	)

151 
	#LL_PEER_REQUESTED_TERM
 
LL_STATUS_ERROR_PEER_TERM


	)

152 
	#LL_PEER_REQUESTED_LOW_RESOURCES_TERM
 
LL_STATUS_ERROR_PEER_DEVICE_TERM_LOW_RESOURCES


	)

153 
	#LL_PEER_REQUESTED_POWER_OFF_TERM
 
LL_STATUS_ERROR_PEER_DEVICE_TERM_POWER_OFF


	)

154 
	#LL_HOST_REQUESTED_TERM
 
LL_STATUS_ERROR_HOST_TERM


	)

155 
	#LL_CTRL_PKT_TIMEOUT_TERM
 
LL_STATUS_ERROR_LL_TIMEOUT


	)

156 
	#LL_CTRL_PKT_TIMEOUT_HOST_TERM
 
LL_STATUS_ERROR_LL_TIMEOUT_HOST


	)

157 
	#LL_CTRL_PKT_TIMEOUT_PEER_TERM
 
LL_STATUS_ERROR_LL_TIMEOUT_PEER


	)

158 
	#LL_CTRL_PKT_INSTANT_PASSED_TERM
 
LL_STATUS_ERROR_INSTANT_PASSED


	)

159 
	#LL_CTRL_PKT_INSTANT_PASSED_HOST_TERM
 
LL_STATUS_ERROR_INSTANT_PASSED_HOST


	)

160 
	#LL_CTRL_PKT_INSTANT_PASSED_PEER_TERM
 
LL_STATUS_ERROR_INSTANT_PASSED_PEER


	)

161 
	#LL_UNACCEPTABLE_CONN_INTERVAL_TERM
 
LL_STATUS_ERROR_UNACCEPTABLE_CONN_INTERVAL


	)

162 
	#LL_MIC_FAILURE_TERM
 
LL_STATUS_ERROR_CONN_TERM_DUE_TO_MIC_FAILURE


	)

163 
	#LL_CONN_ESTABLISHMENT_FAILED_TERM
 
LL_STATUS_ERROR_CONN_FAILED_TO_BE_ESTABLISHED


	)

166 
	#LL_DISCONNECT_AUTH_FAILURE
 
LL_STATUS_ERROR_AUTH_FAILURE


	)

167 
	#LL_DISCONNECT_REMOTE_USER_TERM
 
LL_STATUS_ERROR_PEER_TERM


	)

168 
	#LL_DISCONNECT_REMOTE_DEV_LOW_RESOURCES
 
LL_STATUS_ERROR_PEER_DEVICE_TERM_LOW_RESOURCES


	)

169 
	#LL_DISCONNECT_REMOTE_DEV_POWER_OFF
 
LL_STATUS_ERROR_PEER_DEVICE_TERM_POWER_OFF


	)

170 
	#LL_DISCONNECT_UNSUPPORTED_REMOTE_FEATURE
 
LL_STATUS_ERROR_UNSUPPORTED_REMOTE_FEATURE


	)

171 
	#LL_DISCONNECT_KEY_PAIRING_NOT_SUPPORTED
 
LL_STATUS_ERROR_KEY_PAIRING_NOT_SUPPORTED


	)

172 
	#LL_DISCONNECT_UNACCEPTABLE_CONN_INTERVAL
 
LL_STATUS_ERROR_UNACCEPTABLE_CONN_INTERVAL


	)

177 
	#LL_MAX_NUM_DATA_BUFFERS
 12

	)

178 
	#LL_MAX_NUM_CMD_BUFFERS
 1

	)

185 
	#LL_ADV_CONN_INTERVAL_MIN
 32

186 
	#LL_ADV_CONN_INTERVAL_MAX
 16384

187 
	#LL_ADV_NONCONN_INTERVAL_MIN
 160

188 
	#LL_ADV_NONCONN_INTERVAL_MAX
 16384

189 
	#LL_ADV_DELAY_MIN
 0

190 
	#LL_ADV_DELAY_MAX
 10

191 
	#LL_SCAN_INTERVAL_MIN
 4

192 
	#LL_SCAN_INTERVAL_MAX
 16384

193 
	#LL_SCAN_WINDOW_MIN
 4

194 
	#LL_SCAN_WINDOW_MAX
 16384

195 
	#LL_CONN_INTERVAL_MIN
 6

196 
	#LL_CONN_INTERVAL_MAX
 3200

197 
	#LL_CONN_TIMEOUT_MIN
 10

198 
	#LL_CONN_TIMEOUT_MAX
 3200

199 
	#LL_SLAVE_LATENCY_MIN
 0

	)

200 
	#LL_SLAVE_LATENCY_MAX
 499

	)

201 
	#LL_HOP_LENGTH_MIN
 5

	)

202 
	#LL_HOP_LENGTH_MAX
 16

	)

203 
	#LL_INSTANT_NUMBER_MIN
 6

	)

206 
	#LL_ADV_CHAN_37
 1

	)

207 
	#LL_ADV_CHAN_38
 2

	)

208 
	#LL_ADV_CHAN_39
 4

	)

209 
	#LL_ADV_CHAN_ALL
 (
LL_ADV_CHAN_37
 | 
LL_ADV_CHAN_38
 | 
LL_ADV_CHAN_39
)

	)

212 
	#LL_ADV_CONNECTABLE_UNDIRECTED_EVT
 0

	)

213 
	#LL_ADV_CONNECTABLE_HDC_DIRECTED_EVT
 1

214 
	#LL_ADV_SCANNABLE_UNDIRECTED_EVT
 2

	)

215 
	#LL_ADV_NONCONNECTABLE_UNDIRECTED_EVT
 3

	)

216 
	#LL_ADV_CONNECTABLE_LDC_DIRECTED_EVT
 4

217 

	)

219 
	#LL_DEV_ADDR_TYPE_PUBLIC
 0

	)

220 
	#LL_DEV_ADDR_TYPE_RANDOM
 1

	)

223 
	#LL_ADV_WL_POLICY_ANY_REQ
 0

224 
	#LL_ADV_WL_POLICY_WL_SCAN_REQ
 1

225 
	#LL_ADV_WL_POLICY_WL_CONNECT_REQ
 2

226 
	#LL_ADV_WL_POLICY_WL_ALL_REQ
 3

227 

	)

229 
	#LL_SCAN_WL_POLICY_ANY_ADV_PKTS
 0

	)

230 
	#LL_SCAN_WL_POLICY_USE_WHITE_LIST
 1

	)

233 
	#LL_INIT_WL_POLICY_USE_PEER_ADDR
 0

	)

234 
	#LL_INIT_WL_POLICY_USE_WHITE_LIST
 1

	)

237 
	#LL_SET_BLACKLIST_DISABLE
 0

	)

238 
	#LL_SET_BLACKLIST_ENABLE
 1

	)

241 
	#LL_ADV_MODE_OFF
 0

	)

242 
	#LL_ADV_MODE_ON
 1

	)

243 
	#LL_ADV_MODE_RESERVED
 2

	)

246 
	#LL_SCAN_STOP
 0

	)

247 
	#LL_SCAN_START
 1

	)

250 
	#LL_FILTER_REPORTS_DISABLE
 0

	)

251 
	#LL_FILTER_REPORTS_ENABLE
 1

	)

254 
	#LL_SCAN_PASSIVE
 0

	)

255 
	#LL_SCAN_ACTIVE
 1

	)

258 
	#LL_READ_CURRENT_TX_POWER_LEVEL
 0

	)

259 
	#LL_READ_MAX_TX_POWER_LEVEL
 1

	)

262 
	#LL_DATA_FIRST_PKT_HOST_TO_CTRL
 0

	)

263 
	#LL_DATA_CONTINUATION_PKT
 1

	)

264 
	#LL_DATA_FIRST_PKT_CTRL_TO_HOST
 2

	)

267 
	#LL_LINK_CONNECT_COMPLETE_MASTER
 0

	)

268 
	#LL_LINK_CONNECT_COMPLETE_SLAVE
 1

	)

271 
	#LL_ENCRYPTION_OFF
 0

	)

272 
	#LL_ENCRYPTION_ON
 1

	)

275 
	#LL_MAX_FEATURE_SET_SIZE
 8

277 
	#LL_FEATURE_RFU
 0

278 
	#LL_FEATURE_ENCRYPTION
 1

279 

	)

281 
	#LL_DISABLE_RX_FLOW_CONTROL
 0

	)

282 
	#LL_ENABLE_RX_FLOW_CONTROL
 1

	)

285 
	#LL_DIRECT_TEST_NUM_RF_CHANS
 40

286 
	#LL_DIRECT_TEST_MAX_PAYLOAD_LEN
 37

	)

288 
	#LL_DIRECT_TEST_PAYLOAD_PRBS9
 0

	)

289 
	#LL_DIRECT_TEST_PAYLOAD_0x0F
 1

	)

290 
	#LL_DIRECT_TEST_PAYLOAD_0x55
 2

	)

291 
	#LL_DIRECT_TEST_PAYLOAD_PRBS15
 3

	)

292 
	#LL_DIRECT_TEST_PAYLOAD_0xFF
 4

	)

293 
	#LL_DIRECT_TEST_PAYLOAD_0x00
 5

	)

294 
	#LL_DIRECT_TEST_PAYLOAD_0xF0
 6

	)

295 
	#LL_DIRECT_TEST_PAYLOAD_0xAA
 7

	)

296 
	#LL_DIRECT_TEST_PAYLOAD_UNDEFINED
 0xFF

	)

298 
	#LL_DIRECT_TEST_MODE_TX
 0

	)

299 
	#LL_DIRECT_TEST_MODE_RX
 1

	)

301 
	#LL_RF_RSSI_UNDEFINED
 
PHY_RSSI_VALUE_INVALID


	)

304 
	#LL_EXT_RX_GAIN_STD
 0

	)

305 
	#LL_EXT_RX_GAIN_HIGH
 1

	)

307 
	#LL_EXT_TX_POWER_MINUS_23_DBM
 0

	)

308 
	#LL_EXT_TX_POWER_MINUS_6_DBM
 1

	)

309 
	#LL_EXT_TX_POWER_0_DBM
 2

	)

310 
	#LL_EXT_TX_POWER_4_DBM
 3

	)

312 #i‡
deföed
–
CC2541
Ë|| deföed–
CC2541S
 )

314 
	#LL_EXT_MAX_TX_POWER
 
LL_EXT_TX_POWER_0_DBM


	)

318 
	#LL_EXT_MAX_TX_POWER
 
LL_EXT_TX_POWER_4_DBM


	)

323 
	#LL_EXT_DISABLE_ONE_PKT_PER_EVT
 0

	)

324 
	#LL_EXT_ENABLE_ONE_PKT_PER_EVT
 1

	)

326 
	#LL_EXT_DISABLE_CLK_DIVIDE_ON_HALT
 0

	)

327 
	#LL_EXT_ENABLE_CLK_DIVIDE_ON_HALT
 1

	)

329 
	#LL_EXT_NV_NOT_IN_USE
 0

	)

330 
	#LL_EXT_NV_IN_USE
 1

	)

332 
	#LL_EXT_DISABLE_FAST_TX_RESP_TIME
 0

	)

333 
	#LL_EXT_ENABLE_FAST_TX_RESP_TIME
 1

	)

335 
	#LL_EXT_DISABLE_SL_OVERRIDE
 0

	)

336 
	#LL_EXT_ENABLE_SL_OVERRIDE
 1

	)

338 
	#LL_EXT_TX_MODULATED_CARRIER
 0

	)

339 
	#LL_EXT_TX_UNMODULATED_CARRIER
 1

	)

341 
	#LL_EXT_SET_FREQ_TUNE_DOWN
 0

	)

342 
	#LL_EXT_SET_FREQ_TUNE_UP
 1

	)

344 
	#LL_EXT_PM_IO_PORT_P0
 0

	)

345 
	#LL_EXT_PM_IO_PORT_P1
 1

	)

346 
	#LL_EXT_PM_IO_PORT_P2
 2

	)

347 
	#LL_EXT_PM_IO_PORT_NONE
 0xFF

	)

348 
	#LL_EXT_PM_IO_DISABLE
 
LL_EXT_PM_IO_PORT_NONE


	)

350 
	#LL_EXT_PM_IO_PORT_PIN0
 0

	)

351 
	#LL_EXT_PM_IO_PORT_PIN1
 1

	)

352 
	#LL_EXT_PM_IO_PORT_PIN2
 2

	)

353 
	#LL_EXT_PM_IO_PORT_PIN3
 3

	)

354 
	#LL_EXT_PM_IO_PORT_PIN4
 4

	)

355 
	#LL_EXT_PM_IO_PORT_PIN5
 5

	)

356 
	#LL_EXT_PM_IO_PORT_PIN6
 6

	)

357 
	#LL_EXT_PM_IO_PORT_PIN7
 7

	)

359 
	#LL_EXT_PER_RESET
 0

	)

360 
	#LL_EXT_PER_READ
 1

	)

362 
	#LL_EXT_HALT_DURING_RF_DISABLE
 0

	)

363 
	#LL_EXT_HALT_DURING_RF_ENABLE
 1

	)

365 
	#LL_EXT_SET_USER_REVISION
 0

	)

366 
	#LL_EXT_READ_BUILD_REVISION
 1

	)

368 
	#LL_EXT_RESET_SYSTEM_DELAY
 100

369 
	#LL_EXT_RESET_SYSTEM_HARD
 0

	)

370 
	#LL_EXT_RESET_SYSTEM_SOFT
 1

	)

372 
	#LL_EXT_DISABLE_OVERLAPPED_PROCESSING
 0

	)

373 
	#LL_EXT_ENABLE_OVERLAPPED_PROCESSING
 1

	)

375 
	#LL_EXT_DISABLE_NUM_COMPL_PKTS_ON_EVENT
 0

	)

376 
	#LL_EXT_ENABLE_NUM_COMPL_PKTS_ON_EVENT
 1

	)

379 
	#LL_DEVICE_ADDR_LEN
 6

	)

380 
	#LL_MAX_ADV_DATA_LEN
 31

	)

381 
	#LL_MAX_ADV_PAYLOAD_LEN
 (
LL_DEVICE_ADDR_LEN
 + 
LL_MAX_ADV_DATA_LEN
)

	)

382 
	#LL_MAX_SCAN_DATA_LEN
 31

	)

383 
	#LL_MAX_SCAN_PAYLOAD_LEN
 (
LL_DEVICE_ADDR_LEN
 + 
LL_MAX_SCAN_DATA_LEN
)

	)

384 
	#LL_MAX_LINK_DATA_LEN
 27

	)

391 
	#LL_ADV_RPT_ADV_IND
 
LL_ADV_CONNECTABLE_UNDIRECTED_EVT


	)

392 
	#LL_ADV_RPT_ADV_DIRECT_IND
 
LL_ADV_CONNECTABLE_HDC_DIRECTED_EVT


	)

393 
	#LL_ADV_RPT_ADV_SCANNABLE_IND
 
LL_ADV_SCANNABLE_UNDIRECTED_EVT


	)

394 
	#LL_ADV_RPT_ADV_NONCONN_IND
 
LL_ADV_NONCONNECTABLE_UNDIRECTED_EVT


	)

395 
	#LL_ADV_RPT_SCAN_RSP
 (
LL_ADV_NONCONNECTABLE_UNDIRECTED_EVT
 + 1)

	)

396 
	#LL_ADV_RPT_INVALID
 0xFF

	)

398 
	#LL_RSSI_NOT_AVAILABLE
 127

	)

401 
	#LL_SCA_500_PPM
 0

	)

402 
	#LL_SCA_250_PPM
 1

	)

403 
	#LL_SCA_150_PPM
 2

	)

404 
	#LL_SCA_100_PPM
 3

	)

405 
	#LL_SCA_75_PPM
 4

	)

406 
	#LL_SCA_50_PPM
 5

	)

407 
	#LL_SCA_30_PPM
 6

	)

408 
	#LL_SCA_20_PPM
 7

	)

414 
	#LL_MAX_NUM_DATA_CHAN
 37

415 

	)

420 
uöt8
 
	tŒSètus_t
;

425 
uöt16
 
numPkts
[ 
LL_MAX_NUM_DATA_CHAN
 ];

426 
uöt16
 
numCrcEº
[ 
LL_MAX_NUM_DATA_CHAN
 ];

427 } 
	t≥rByCh™_t
;

458 
LL_Inô
–
uöt8
 
èskId
 );

477 
uöt16
 
LL_Pro˚ssEvít
–
uöt8
 
èsk_id
, uöt16 
evíts
 );

502 *
LL_TX_bm_Æloc
–
uöt16
 
size
 );

523 *
LL_RX_bm_Æloc
–
uöt16
 
size
 );

542 
ŒSètus_t
 
LL_Re£t
( );

563 
ŒSètus_t
 
LL_RódBDADDR
–
uöt8
 *
bdAddr
 );

585 
ŒSètus_t
 
LL_SëR™domAddªss
–
uöt8
 *
devAddr
 );

607 
ŒSètus_t
 
LL_CÀ¨WhôeLi°
( );

628 
ŒSètus_t
 
LL_AddWhôeLi°Devi˚
–
uöt8
 *
devAddr
,

629 
uöt8
 
addrTy≥
 );

650 
ŒSètus_t
 
LL_RemoveWhôeLi°Devi˚
–
uöt8
 *
devAddr
,

651 
uöt8
 
addrTy≥
 );

670 
ŒSètus_t
 
LL_RódWlSize
–
uöt8
 *
numE¡rõs
 );

689 
ŒSètus_t
 
LL_NumEm±yWlE¡rõs
–
uöt8
 *
numEm±yE¡rõs
 );

714 
ŒSètus_t
 
LL_En¸y±
–
uöt8
 *
key
,

715 
uöt8
 *
∂aöãxtD©a
,

716 
uöt8
 *
í¸y±edD©a
 );

742 
ŒSètus_t
 
LL_R™d
–
uöt8
 *
øndD©a
,

743 
uöt8
 
d©aLí
 );

762 
ŒSètus_t
 
LL_RódSuµ‹ãdSèãs
–
uöt8
 *
°©es
 );

784 
ŒSètus_t
 
LL_RódLoˇlSuµ‹ãdFótuªs
–
uöt8
 *
„©uªSë
 );

807 
ŒSètus_t
 
LL_RódLoˇlVîsi⁄Info
–
uöt8
 *
vîNum
,

808 
uöt16
 *
comId
,

809 
uöt16
 *
subvîNum
 );

812 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

830 
ŒSètus_t
 
LL_CålToHo°FlowC⁄åﬁ
–
uöt8
 
mode
 );

834 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

859 
ŒSètus_t
 
LL_RódRemŸeVîsi⁄Info
–
uöt16
 
c⁄nId
 );

863 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

885 
ŒSètus_t
 
LL_RódTxPowîLevñ
–
uöt8
 
c⁄nId
,

886 
uöt8
 
ty≥
,

887 
öt8
 *
txPowî
 );

891 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

911 
ŒSètus_t
 
LL_RódCh™M≠
–
uöt8
 
c⁄nId
,

912 
uöt8
 *
ch™M≠
 );

938 
ŒSètus_t
 
LL_RódRssi
–
uöt16
 
c⁄nId
,

939 
öt8
 *
œ°Rssi
 );

942 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

961 
ŒSètus_t
 
LL_Disc⁄√˘
–
uöt16
 
c⁄nId
,

962 
uöt8
 
ªas⁄
 );

966 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

1021 
ŒSètus_t
 
LL_TxD©a
–
uöt16
 
c⁄nId
,

1022 
uöt8
 *
pBuf
,

1023 
uöt8
 
pktLí
,

1024 
uöt8
 
‰agFœg
 );

1052 
ŒSètus_t
 
LL_Dúe˘Te°TxTe°
–
uöt8
 
txFªq
,

1053 
uöt8
 
∑ylﬂdLí
,

1054 
uöt8
 
∑ylﬂdTy≥
 );

1079 
ŒSètus_t
 
LL_Dúe˘Te°RxTe°
–
uöt8
 
rxFªq
 );

1103 
ŒSètus_t
 
LL_Dúe˘Te°End
( );

1106 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_NCONN_CFG
Ë|| (CTRL_CONFIG & 
ADV_CONN_CFG
))

1134 
ŒSètus_t
 
LL_SëAdvP¨am
–
uöt16
 
advI¡îvÆMö
,

1135 
uöt16
 
advI¡îvÆMax
,

1136 
uöt8
 
advEvtTy≥
,

1137 
uöt8
 
ownAddrTy≥
,

1138 
uöt8
 
dúe˘AddrTy≥
,

1139 
uöt8
 *
dúe˘Addr
,

1140 
uöt8
 
advCh™M≠
,

1141 
uöt8
 
advWlPﬁicy
 );

1145 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_NCONN_CFG
Ë|| (CTRL_CONFIG & 
ADV_CONN_CFG
))

1169 
ŒSètus_t
 
LL_SëAdvD©a
–
uöt8
 
advD©aLí
,

1170 
uöt8
 *
advD©a
 );

1174 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_NCONN_CFG
Ë|| (CTRL_CONFIG & 
ADV_CONN_CFG
))

1196 
ŒSètus_t
 
LL_SëSˇnR•D©a
–
uöt8
 
sˇnR•Lí
,

1197 
uöt8
 *
sˇnR•D©a
 );

1201 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_NCONN_CFG
Ë|| (CTRL_CONFIG & 
ADV_CONN_CFG
))

1221 
ŒSètus_t
 
LL_SëAdvC⁄åﬁ
–
uöt8
 
advMode
 );

1225 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_NCONN_CFG
Ë|| (CTRL_CONFIG & 
ADV_CONN_CFG
))

1244 
ŒSètus_t
 
LL_RódAdvCh™TxPowî
–
öt8
 *
txPowî
 );

1248 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
SCAN_CFG
)

1271 
ŒSètus_t
 
LL_SëSˇnP¨am
–
uöt8
 
sˇnTy≥
,

1272 
uöt16
 
sˇnI¡îvÆ
,

1273 
uöt16
 
sˇnWödow
,

1274 
uöt8
 
ownAddrTy≥
,

1275 
uöt8
 
advWlPﬁicy
 );

1279 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
SCAN_CFG
)

1303 
ŒSètus_t
 
LL_SëSˇnC⁄åﬁ
–
uöt8
 
sˇnMode
,

1304 
uöt8
 
fûãrRï‹ts
 );

1308 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
ADV_CONN_CFG
)

1331 
ŒSètus_t
 
LL_EncLtkRïly
–
uöt16
 
c⁄nId
,

1332 
uöt8
 *
key
 );

1336 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
ADV_CONN_CFG
)

1361 
ŒSètus_t
 
LL_EncLtkNegRïly
–
uöt16
 
c⁄nId
 );

1365 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
INIT_CFG
)

1394 
ŒSètus_t
 
LL_Cª©eC⁄n
–
uöt16
 
sˇnI¡îvÆ
,

1395 
uöt16
 
sˇnWödow
,

1396 
uöt8
 
öôWlPﬁicy
,

1397 
uöt8
 
≥îAddrTy≥
,

1398 
uöt8
 *
≥îAddr
,

1399 
uöt8
 
ownAddrTy≥
,

1400 
uöt16
 
c⁄nI¡îvÆMö
,

1401 
uöt16
 
c⁄nI¡îvÆMax
,

1402 
uöt16
 
c⁄nL©ícy
,

1403 
uöt16
 
c⁄nTimeout
,

1404 
uöt16
 
möLígth
,

1405 
uöt16
 
maxLígth
 );

1409 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
INIT_CFG
)

1428 
ŒSètus_t
 
LL_Cª©eC⁄nC™˚l
( );

1432 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

1450 
ŒSètus_t
 
LL_C⁄nA˘ive
–
uöt16
 
c⁄nId
 );

1454 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
INIT_CFG
)

1480 
ŒSètus_t
 
LL_C⁄nUpd©e
–
uöt16
 
c⁄nId
,

1481 
uöt16
 
c⁄nI¡îvÆMö
,

1482 
uöt16
 
c⁄nI¡îvÆMax
,

1483 
uöt16
 
c⁄nL©ícy
,

1484 
uöt16
 
c⁄nTimeout
,

1485 
uöt16
 
möLígth
,

1486 
uöt16
 
maxLígth
 );

1490 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
INIT_CFG
)

1514 
ŒSètus_t
 
LL_Ch™M≠Upd©e
–
uöt8
 *
ch™M≠
 );

1518 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
INIT_CFG
)

1543 
ŒSètus_t
 
LL_SèπEn¸y±
–
uöt16
 
c⁄nId
,

1544 
uöt8
 *
ønd
,

1545 
uöt8
 *
eDiv
,

1546 
uöt8
 *
…k
 );

1550 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
INIT_CFG
)

1567 
ŒSètus_t
 
LL_RódRemŸeU£dFótuªs
–
uöt16
 
c⁄nId
 );

1590 
ŒSètus_t
 
LL_EXT_SëRxGaö
–
uöt8
 
rxGaö
,

1591 
uöt8
 *
cmdCom∂ëe
 );

1609 
ŒSètus_t
 
LL_EXT_SëTxPowî
–
uöt8
 
txPowî
,

1610 
uöt8
 *
cmdCom∂ëe
 );

1613 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

1631 
ŒSètus_t
 
LL_EXT_O√PackëPîEvít
–
uöt8
 
c⁄åﬁ
 );

1654 
ŒSètus_t
 
LL_EXT_ClkDivOnHÆt
–
uöt8
 
c⁄åﬁ
 );

1675 
ŒSètus_t
 
LL_EXT_De˛¨eNvUßge
–
uöt8
 
mode
 );

1700 
ŒSètus_t
 
LL_EXT_De¸y±
–
uöt8
 *
key
,

1701 
uöt8
 *
í¸y±edD©a
,

1702 
uöt8
 *
∂aöãxtD©a
 );

1726 
ŒSètus_t
 
LL_EXT_SëLoˇlSuµ‹ãdFótuªs
–
uöt8
 *
„©uªSë
 );

1729 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
ADV_CONN_CFG
)

1753 
ŒSètus_t
 
LL_EXT_SëFa°TxRe•⁄£Time
–
uöt8
 
c⁄åﬁ
 );

1757 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
ADV_CONN_CFG
)

1778 
ŒSètus_t
 
LL_EXT_SëSœveL©ícyOvîride
–
uöt8
 
c⁄åﬁ
 );

1808 
ŒSètus_t
 
LL_EXT_ModemTe°Tx
–
uöt8
 
cwMode
,

1809 
uöt8
 
txFªq
 );

1837 
ŒSètus_t
 
LL_EXT_ModemH›Te°Tx
( );

1865 
ŒSètus_t
 
LL_EXT_ModemTe°Rx
–
uöt8
 
rxFªq
 );

1884 
ŒSètus_t
 
LL_EXT_EndModemTe°
( );

1908 
ŒSètus_t
 
LL_EXT_SëBDADDR
–
uöt8
 *
bdAddr
 );

1911 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

1939 
ŒSètus_t
 
LL_EXT_SëSCA
–
uöt16
 
sˇInPPM
 );

1962 
ŒSètus_t
 
LL_EXT_SëFªqTu√
–
uöt8
 
°ï
 );

1983 
ŒSètus_t
 
LL_EXT_SaveFªqTu√
( );

2005 
ŒSètus_t
 
LL_EXT_SëMaxDtmTxPowî
–
uöt8
 
txPowî
 );

2060 
ŒSètus_t
 
LL_EXT_M≠PmIoP‹t
–
uöt8
 
ioP‹t
, uöt8 
ioPö
 );

2063 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

2083 
ŒSètus_t
 
LL_EXT_Disc⁄√˘Immed
–
uöt16
 
c⁄nId
 );

2087 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

2111 
ŒSètus_t
 
LL_EXT_PackëEº‹R©e
–
uöt16
 
c⁄nId
, 
uöt8
 
comm™d
 );

2115 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

2143 
ŒSètus_t
 
LL_EXT_PERbyCh™
–
uöt16
 
c⁄nId
, 
≥rByCh™_t
 *
≥rByCh™
 );

2163 
ŒSètus_t
 
LL_EXT_ExãndRfR™ge
–
uöt8
 *
cmdCom∂ëe
 );

2184 
ŒSètus_t
 
LL_EXT_HÆtDurögRf
–
uöt8
 
mode
 );

2187 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_NCONN_CFG
Ë|| (CTRL_CONFIG & 
ADV_CONN_CFG
))

2207 
ŒSètus_t
 
LL_EXT_AdvEvítNŸi˚
–
uöt8
 
èskID
, 
uöt16
 
èskEvít
 );

2211 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
ADV_CONN_CFG
)

2235 
ŒSètus_t
 
LL_EXT_C⁄nEvítNŸi˚
–
uöt8
 
èskID
, 
uöt16
 
èskEvít
 );

2258 
ŒSètus_t
 
LL_EXT_BuûdRevisi⁄
–
uöt8
 
mode
, 
uöt16
 
u£rRevNum
, uöt8 *
buûdRev
 );

2276 
ŒSètus_t
 
LL_EXT_DñaySÀï
–
uöt16
 
dñay
 );

2294 
ŒSètus_t
 
LL_EXT_Re£tSy°em
–
uöt8
 
mode
 );

2297 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

2314 
ŒSètus_t
 
LL_EXT_OvîœµedPro˚ssög
–
uöt8
 
mode
 );

2318 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

2341 
ŒSètus_t
 
LL_EXT_NumCom∂PktsLimô
–
uöt8
 
limô
,

2342 
uöt8
 
ÊushOnEvt
 );

2350 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

2380 
LL_C⁄√˘i⁄Com∂ëeCback
–
uöt8
 
ªas⁄Code
,

2381 
uöt16
 
c⁄nId
,

2382 
uöt8
 
rﬁe
,

2383 
uöt8
 
≥îAddrTy≥
,

2384 
uöt8
 *
≥îAddr
,

2385 
uöt16
 
c⁄nI¡îvÆ
,

2386 
uöt16
 
¶aveL©ícy
,

2387 
uöt16
 
c⁄nTimeout
,

2388 
uöt8
 
˛ockAccuøcy
 );

2392 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

2411 
LL_Disc⁄√˘Cback
–
uöt16
 
c⁄nId
,

2412 
uöt8
 
ªas⁄
 );

2416 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

2440 
LL_C⁄nP¨amUpd©eCback
–
uöt16
 
c⁄nId
,

2441 
uöt16
 
c⁄nI¡îvÆ
,

2442 
uöt16
 
c⁄nL©ícy
,

2443 
uöt16
 
c⁄nTimeout
 );

2447 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

2470 
LL_RódRemŸeVîsi⁄InfoCback
–
uöt8
 
°©us
,

2471 
uöt16
 
c⁄nId
,

2472 
uöt8
 
vîNum
,

2473 
uöt16
 
comId
,

2474 
uöt16
 
subvîNum
 );

2478 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

2502 
LL_EncCh™geCback
–
uöt16
 
c⁄nId
,

2503 
uöt8
 
ªas⁄
,

2504 
uöt8
 
ícE«b
 );

2508 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

2528 
LL_EncKeyRe‰eshCback
–
uöt16
 
c⁄nId
,

2529 
uöt8
 
ªas⁄
 );

2533 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
SCAN_CFG
)

2556 
LL_AdvRï‹tCback
–
uöt8
 
evítTy≥
,

2557 
uöt8
 
advAddrTy≥
,

2558 
uöt8
 *
advAddr
,

2559 
uöt8
 
d©aLí
,

2560 
uöt8
 *
d©a
,

2561 
öt8
 
rssi
 );

2565 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
INIT_CFG
)

2584 
LL_RódRemŸeU£dFótuªsCom∂ëeCback
–
uöt8
 
°©us
,

2585 
uöt16
 
c⁄nId
,

2586 
uöt8
 *
„©uªSë
 );

2590 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
ADV_CONN_CFG
)

2610 
LL_EncLtkReqCback
–
uöt16
 
c⁄nId
,

2611 
uöt8
 *
øndNum
,

2612 
uöt8
 *
ícDiv
 );

2634 
LL_Dúe˘Te°EndD⁄eCback
–
uöt16
 
numPackës
,

2635 
uöt8
 
mode
 );

2638 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

2656 
LL_TxD©aCom∂ëeCback
–
uöt16
 
c⁄nId
,

2657 
uöt8
 *
pBuf
 );

2661 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

2689 
LL_RxD©aCom∂ëeCback
–
uöt16
 
c⁄nId
,

2690 
uöt8
 *
µBuf
,

2691 
uöt8
 
Àn
,

2692 
uöt8
 
‰agFœg
,

2693 
öt8
 
rssi
 );

2715 
LL_R™dCback
–
uöt8
 *
øndD©a
 );

2734 
LL_EXT_SëRxGaöCback
( );

2753 
LL_EXT_SëTxPowîCback
( );

2778 
LL_EXT_PackëEº‹R©eCback
–
uöt16
 
numPkts
,

2779 
uöt16
 
numCrcEº
,

2780 
uöt16
 
numEvíts
,

2781 
uöt16
 
numMis£dEvts
 );

2800 
LL_EXT_ExãndRfR™geCback
( );

2803 #ifde‡
__˝lu•lus


	@../../../../Components/ble/controller/include/ll_math.h

40 #i‚de‡
LL_MATH_H


41 
	#LL_MATH_H


	)

43 #ifde‡
__˝lu•lus


76 
NEAR_FUNC
 
uöt32
 
ŒDivide31By16To16
–uöt32 
dividíd
,

77 
uöt16
 
divis‹
 );

80 #ifde‡
__˝lu•lus


	@../../../../Components/ble/controller/include/ll_sleep.h

41 #i‚de‡
LL_SLEEP_H


42 
	#LL_SLEEP_H


	)

44 #ifde‡
__˝lu•lus


52 
	~"bcomdef.h
"

63 
	#LL_NR_STATE_IDLE
 0

	)

64 
	#LL_NR_STATE_RUNNING
 1

	)

67 
	#LL_SLEEP_REQUEST_ALLOWED
 0

	)

68 
	#LL_SLEEP_REQUEST_DENIED
 1

	)

82 vﬁ©ûê
DATA
 
phySèã
;

83 vﬁ©ûê
DATA
 
˛kSèã
;

89 
NEAR_FUNC
 
HÆtMcuUsögPhyFœg
();

91 
NEAR_FUNC
 
LL_TimeToNextRfEvít
–
uöt32
 *
¶ìpTimî
, uöt32 *
timeout
 );

92 
NEAR_FUNC
 
uöt8
 
LL_PowîOffReq
–uöt8 
mode
 );

93 
NEAR_FUNC
 
LL_PowîOnReq
–
uöt8
 
wakeFromPM3
, uöt8 
wakeF‹RF
 );

95 #ifde‡
__˝lu•lus


	@../../../../Components/ble/controller/include/ll_timer2.h

40 #i‚de‡
LL_TIMER2_H


41 
	#LL_TIMER2_H


	)

43 #ifde‡
__˝lu•lus


56 
	#ŒDißbÀT2Evít1
(Ë(
T2CSPCFG
 |
LL_T2_DISABLE_EVENT1
;)

	)

57 
	#ŒDißbÀT2Evít2
(Ë(
T2CSPCFG
 |
LL_T2_DISABLE_EVENT2
;)

	)

58 
	#ŒAddTime
–
time
, 
vÆ
 ) ((—imeË+ (vÆ)Ë& 
LL_T2OVF_PERIOD_VALUE
)

	)

59 
	#ŒSubTime
–
time
, 
vÆ
 ) ((—imeË- (vÆ)Ë& 
LL_T2OVF_PERIOD_VALUE
)

	)

66 
	#LL_T2_CTRL_INIT_NO_SYNCH
 0x08

	)

67 
	#LL_T2_CTRL_INIT_SYNCH
 0x0A

	)

72 
	#LL_T2_TIMER_SEL
 0x00

	)

73 
	#LL_T2_CAPTURE_SEL
 0x01

	)

74 
	#LL_T2_PERIOD_SEL
 0x02

	)

75 
	#LL_T2_COMPARE1_SEL
 0x03

	)

76 
	#LL_T2_COMPARE2_SEL
 0x04

	)

78 
	#LL_T2OVF_TIMER_SEL
 0x00

	)

79 
	#LL_T2OVF_CAPTURE_SEL
 0x10

	)

80 
	#LL_T2OVF_PERIOD_SEL
 0x20

	)

81 
	#LL_T2OVF_COMPARE1_SEL
 0x30

	)

82 
	#LL_T2OVF_COMPARE2_SEL
 0x40

	)

87 
	#LL_T2_PERIOD_FLAG
 0x01

	)

88 
	#LL_T2_COMPARE1_FLAG
 0x02

	)

89 
	#LL_T2_COMPARE2_FLAG
 0x04

	)

91 
	#LL_T2OVF_PERIOD_FLAG
 0x08

	)

92 
	#LL_T2OVF_COMPARE1_FLAG
 0x10

	)

93 
	#LL_T2OVF_COMPARE2_FLAG
 0x20

	)

95 #i‡
deföed
–
CC2541
Ë|| deföed–
CC2541S
 )

96 
	#LL_T2_LONG_COMPARE1_FLAG
 0x40

	)

97 
	#LL_T2_LONG_COMPARE2_FLAG
 0x80

	)

103 
	#LL_T2_PERIOD_MASK
 0x01

	)

104 
	#LL_T2_COMPARE1_MASK
 0x02

	)

105 
	#LL_T2_COMPARE2_MASK
 0x04

	)

107 
	#LL_T2OVF_PERIOD_MASK
 0x08

	)

108 
	#LL_T2OVF_COMPARE1_MASK
 0x10

	)

109 
	#LL_T2OVF_COMPARE2_MASK
 0x20

	)

111 #i‡
deföed
–
CC2541
Ë|| deföed–
CC2541S
 )

112 
	#LL_T2_LONG_COMPARE1_MASK
 0x40

	)

113 
	#LL_T2_LONG_COMPARE2_MASK
 0x80

	)

119 
	#LL_T2_PERIOD_EVENT1
 0x00

	)

120 
	#LL_T2_COMPARE1_EVENT1
 0x01

	)

121 
	#LL_T2_COMPARE2_EVENT1
 0x02

	)

123 
	#LL_T2OVF_PERIOD_EVENT1
 0x03

	)

124 
	#LL_T2OVF_COMPARE1_EVENT1
 0x04

	)

125 
	#LL_T2OVF_COMPARE2_EVENT1
 0x05

	)

127 #i‡
deföed
–
CC2541
Ë|| deföed–
CC2541S
 )

128 
	#LL_T2OVF_LONG_CMP1_EVENT1
 0x08

	)

129 
	#LL_T2OVF_LONG_CMP2_EVENT1
 0x09

	)

130 
	#LL_T2_DISABLE_EVENT1
 0x0F

	)

132 
	#LL_T2_DISABLE_EVENT1
 0x07

	)

135 
	#LL_T2_PERIOD_EVENT2
 0x00

	)

136 
	#LL_T2_COMPARE1_EVENT2
 0x10

	)

137 
	#LL_T2_COMPARE2_EVENT2
 0x20

	)

139 
	#LL_T2OVF_PERIOD_EVENT2
 0x30

	)

140 
	#LL_T2OVF_COMPARE1_EVENT2
 0x40

	)

141 
	#LL_T2OVF_COMPARE2_EVENT2
 0x50

	)

143 #i‡
deföed
–
CC2541
Ë|| deföed–
CC2541S
 )

144 
	#LL_T2OVF_LONG_CMP1_EVENT2
 0x80

	)

145 
	#LL_T2OVF_LONG_CMP2_EVENT2
 0x90

	)

146 
	#LL_T2_DISABLE_EVENT2
 0xF0

	)

148 
	#LL_T2_DISABLE_EVENT2
 0x70

	)

155 
	#LL_T2_RUN_BIT
 0x01

156 
	#LL_T2_SYNCH_BIT
 0x02

157 
	#LL_T2_STATE_BIT
 0x04

	)

158 
	#LL_T2_PERIOD_VALUE
 0x4E20

159 
	#LL_T2_PERIOD_1US_VALUE
 0x20

160 
	#LL_T2OVF_PERIOD_VALUE
 0x00FFFFFF

161 
	#LL_T2_MAX_VALUE
 0x01000000

162 

	)

172 
uöt32
 
cﬂr£
;

173 
uöt16
 
föe
;

174 } 
	tsysTime_t
;

188 
ŒInôTimî2
( );

189 
ŒSt›Timî2
( );

190 
ŒSèπTimî2
( );

191 
ŒSëT2C1Timeout
–
uöt16
 
timeout
 );

192 
ŒSëT2C2Timeout
–
uöt16
 
timeout
 );

193 
ŒSëT2OVFC1Timeout
–
uöt32
 
timeout
 );

194 
ŒSëT2OVFC2Timeout
–
uöt32
 
timeout
 );

195 
ŒSëT2L⁄gC1Timeout
–
uöt32
 
timeout1
, 
uöt16
 
timeout2
 );

196 
ŒSëT2L⁄gC2Timeout
–
uöt32
 
timeout1
, 
uöt16
 
timeout2
 );

197 
ŒSëT2C1Evít1
–
uöt16
 
timeout
 );

198 
ŒSëT2OVFC1Evít1
–
uöt32
 
timeout
 );

199 
ŒSëT2L⁄gC1Evít1
–
uöt32
 
timeout1
, 
uöt16
 
timeout2
 );

200 
ŒSëT2OVFC2Evít2
–
uöt32
 
timeout
 );

201 
ŒSëT2Dñè
–
uöt16
 
cou¡
 );

202 
ŒDißbÀT2I¡s
( );

203 
ŒDißbÀT2I¡sEvts
( );

204 
ŒDißbÀT2E1
( );

205 
ŒGëTimî2C≠tuª
–
uöt32
 *
cﬂr£Time
, 
uöt16
 *
föeTime
 );

206 
uöt32
 
ŒGëCuºítTime
( );

207 
uöt16
 
ŒGëCuºítFöeTime
( );

208 
ŒGëFuŒCuºítTime
–
uöt32
 *
cﬂr£
, 
uöt16
 *
föe
 );

210 
ŒGëFuŒCT™dST
–
sysTime_t
 *
curTime
, 
uöt32
 *
¶ìpTime
 );

211 
uöt32
 
ŒGëT2OVFC1
( );

212 
uöt32
 
ŒGëT2OVFC2
( );

213 
uöt16
 
Œ_McuPªcisi⁄Cou¡
( );

215 
NEAR_FUNC
 
uöt8
 
Œ24BôTimeCom∑ª
–
uöt32
 
time1
, uöt32 
time2
 );

216 
NEAR_FUNC
 
uöt32
 
Œ24BôTimeDñè
–uöt32 
time1
, uöt32 
time2
 );

217 
NEAR_FUNC
 
uöt32
 
Œ24BôAbsTimeDñè
–uöt32 
time1
, uöt32 
time2
 );

218 
NEAR_FUNC
 
ŒAdju°TimeF‹w¨d
–
sysTime_t
 *
curTime
, sysTime_à*
adjTime
 );

219 
NEAR_FUNC
 
ŒAdju°TimeBackw¨d
–
sysTime_t
 *
curTime
, sysTime_à*
adjTime
 );

221 #ifde‡
__˝lu•lus


	@../../../../Components/ble/controller/include/phy.h

39 #i‚de‡
PHY_H


40 
	#PHY_H


	)

42 #ifde‡
__˝lu•lus


50 
	~"bcomdef.h
"

51 
	~"hÆ_ty≥s.h
"

52 
	~"hÆ_defs.h
"

53 
	~"hÆ_mcu.h
"

55 #i‡
deföed
–
CC2541
Ë|| deföed–
CC2541S
 )

56 
	~"ioCC2541_exåa.h
"

58 
	~"ioCC2540_exåa.h
"

65 #i‡!
deföed
(
USE_PHY_FUNCS
)

69 
	#PHY_GET_CHIP_ID
(Ë(*(
P_INFOPAGE
+3))

	)

70 
	#PHY_GET_CHIP_VER
(Ë(
CHVER
)

	)

72 
	#PHY_WRITE_BYTE
–
d©a
, 
Àn
 ) \

74 
uöt8
 
z
; \

75 
z
=0; z<(
Àn
); z++Ë{ 
RFD
 = (
d©a
)[z]; } \

76 }

	)

78 
	#PHY_WRITE_BYTE_VAL
–
vÆue
 ) (
RFD
 = (vÆue))

	)

80 
	#PHY_READ_BYTE
–
±r
, 
Àn
 ) \

81 
	`°
–
uöt8
 
z
; \

82 i‡–(
±r
Ë=
NULL
 ) \

84 
z
=0; z<(
Àn
); z++) \

85 { 
RFD
; } \

89 
z
=0; z<(
Àn
); z++) \

90 { (
±r
)[
z
] = 
RFD
; } \

92 )

	)

94 
	#PHY_READ_BYTE_VAL
(Ë(
RFD
)

	)

96 
	#PHY_RESET_TX_FIFO
(Ë(
RFST
 = 
PHY_FIFO_TX_RESET
)

	)

98 
	#PHY_RESET_RX_FIFO
(Ë(
RFST
 = 
PHY_FIFO_RX_RESET
)

	)

100 
	#PHY_RESET_TXRX_FIFO
(Ë(
RFST
 = 
PHY_FIFO_RESET
)

	)

102 
	#PHY_COMMAND
–
cmd
 ) \

103 
	`°
– 
RFST
 != 0 ); \

104 i‡–(
cmd
Ë!
PHY_CMD_INVALID
 ) \

106 
RFST
 = (
cmd
); \

108 )

	)

110 
	#PHY_CLEAR_COUNTERS
() \

111 
	`°
–
BLE_NTXDONE
 = 0; \

112 
BLE_NTXACK
 = 0; \

113 
BLE_NTXCTRLACK
 = 0; \

114 
BLE_NTXCTRL
 = 0; \

115 
BLE_NTXRETRANS
 = 0; \

116 
BLE_NTX
 = 0; \

117 
BLE_NRXOK
 = 0; \

118 
BLE_NRXCTRL
 = 0; \

119 
BLE_NRXNOK
 = 0; \

120 
BLE_NRXIGNORED
 = 0; \

121 
BLE_NRXEMPTY
 = 0; \

122 
BLE_NRXFIFOFULL
 = 0; \

123 )

	)

125 
	#PHY_READ_COUNTERS
–
±r
 ) \

126 
	`°
–(*((
±r
)+0)Ë
BLE_NTXDONE
; \

127 (*((
±r
)+1)Ë
BLE_NTXACK
; \

128 (*((
±r
)+2)Ë
BLE_NTXCTRLACK
; \

129 (*((
±r
)+3)Ë
BLE_NTXCTRL
; \

130 (*((
±r
)+4)Ë
BLE_NTXRETRANS
; \

131 (*((
±r
)+5)Ë
BLE_NTX
; \

132 (*((
±r
)+6)Ë
BLE_NRXOK
; \

133 (*((
±r
)+7)Ë
BLE_NRXCTRL
; \

134 (*((
±r
)+8)Ë
BLE_NRXNOK
; \

135 (*((
±r
)+9)Ë
BLE_NRXIGNORED
; \

136 (*((
±r
)+10)Ë
BLE_NRXEMPTY
; \

137 (*((
±r
)+11)Ë
BLE_NRXFIFOFULL
; \

138 )

	)

140 
	#PHY_TX_FIFO_LEN
(Ë(
RFTXFLEN
)

	)

142 
	#PHY_RX_FIFO_LEN
(Ë(
RFRXFLEN
)

	)

144 
	#PHY_INIT_LAST_RSSI
(Ë(
BLE_LAST_RSSI
 = 
PHY_RSSI_VALUE_INVALID
)

	)

146 
	#PHY_GET_LAST_RSSI
(Ë(
BLE_LAST_RSSI
)

	)

148 
	#PHY_GET_RSSI
(Ë(
RSSI
)

	)

150 
	#PHY_CLR_WINCONF
(Ë(
BLE_WINCONF
 = 0);

	)

152 
	#PHY_SET_DYN_WINOFFSET
–
wöOff£t
, 
c⁄nI¡îvÆ
 ) \

153 
	`°
–
BLE_WINOFFSET_0
 = (
wöOff£t
) & 0xFF; \

154 
BLE_WINOFFSET_1
 = (
wöOff£t
) >> 8; \

155 
BLE_WINMOD_0
 = (
c⁄nI¡îvÆ
) & 0xFF; \

156 
BLE_WINMOD_1
 = (
c⁄nI¡îvÆ
) >> 8; \

157 
BLE_WINCONF
 = 0xC1; \

158 )

	)

160 
	#PHY_TX_FIFO_BYTES_FREE
(Ë(
PHY_FIFO_SIZE
 - 
RFTXFLEN
)

	)

162 
	#PHY_COMMIT_TX_FIFO
(Ë(
RFST
 = 
PHY_FIFO_TX_COMMIT
)

	)

164 
	#PHY_ANCHOR_VALID
(Ë(
BLE_ANCHOR_VALID
)

	)

166 
	#PHY_GET_DATA_CHAN
(Ë(
BLE_CHAN
)

	)

171 
	#PHY_GET_CHIP_ID
(Ë
	`PHY_GëChùID
()

	)

172 
	#PHY_GET_CHIP_VER
(Ë
	`PHY_GëChùVî
()

	)

173 
	#PHY_WRITE_BYTE
–
d©a
, 
Àn
 ) 
	`PHY_WrôeByã
–(d©a), (ÀnË)

	)

174 
	#PHY_WRITE_BYTE_VAL
–
vÆue
 ) 
	`PHY_WrôeByãVÆ
–(vÆueË)

	)

175 
	#PHY_READ_BYTE
–
±r
, 
Àn
 ) 
	`PHY_RódByã
–’å), (ÀnË)

	)

176 
	#PHY_READ_BYTE_VAL
(Ë
	`PHY_RódByãVÆ
()

	)

177 
	#PHY_RESET_TX_FIFO
(Ë
	`PHY_Re£tTxFifo
()

	)

178 
	#PHY_RESET_RX_FIFO
(Ë
	`PHY_Re£tRxFifo
()

	)

179 
	#PHY_RESET_TXRX_FIFO
(Ë
	`PHY_Re£tTxRxFifo
()

	)

180 
	#PHY_COMMAND
–
cmd
 ) 
	`PHY_Comm™d
–(cmdË)

	)

181 
	#PHY_CLEAR_COUNTERS
(Ë
	`PHY_CÀ¨Cou¡îs
()

	)

182 
	#PHY_READ_COUNTERS
–
±r
 ) 
	`PHY_RódCou¡îs
–’åË)

	)

183 
	#PHY_TX_FIFO_LEN
(Ë
	`PHY_TxFifoLí
()

	)

184 
	#PHY_RX_FIFO_LEN
(Ë
	`PHY_RxFifoLí
()

	)

185 
	#PHY_INIT_LAST_RSSI
(Ë
	`PHY_InôLa°Rssi
()

	)

186 
	#PHY_GET_LAST_RSSI
(Ë
	`PHY_GëLa°Rssi
()

	)

187 
	#PHY_GET_RSSI
(Ë
	`PHY_GëRssi
()

	)

188 
	#PHY_CLR_WINCONF
(Ë
	`PHY_CÀ¨WödowC⁄fig
()

	)

189 
	#PHY_SET_DYN_WINOFFSET
–
wöOff
, 
ci
 ) 
	`PHY_SëDy«micWöOff£t
–(wöOff), (ciË)

	)

190 
	#PHY_TX_FIFO_BYTES_FREE
(Ë
	`PHY_TxFifoByãsFªe
()

	)

191 
	#PHY_COMMIT_TX_FIFO
(Ë
	`PHY_CommôTxFifo
()

	)

192 
	#PHY_GET_DATA_CHAN
(Ë
	`PHY_GëD©aCh™
()

	)

201 
	#PHY_CHIP_ID_CC2540
 0x8D

	)

202 
	#PHY_CHIP_ID_CC2541
 0x41

	)

203 
	#PHY_CHIP_ID_CC2541S
 0x42

	)

206 
	#PHY_CHIP_VER_C
 0x12

	)

207 
	#PHY_CHIP_VER_D
 0x13

	)

210 
	#PHY_DATA_BANK_PTR
 
RFCORE_RAM


	)

211 
	#PHY_RX_FIFO_PTR
 
RXFIFO


	)

212 
	#PHY_TX_FIFO_PTR
 
TXFIFO


	)

215 
	#BLE_REG_BASE_ADDR
 (0x6000)

	)

216 
	#BLE_RX_FIFO_BASE_ADDR
 (0x6080)

	)

217 
	#BLE_TX_FIFO_BASE_ADDR
 (0x6100)

	)

218 
	#BLE_BANK_SIZE
 128

	)

219 
	#BLE_MAX_TX_FIFO_SIZE
 128

	)

220 
	#BLE_MAX_RX_FIFO_SIZE
 128

	)

222 
	#BLE_CHAN
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 0))

223 
	#BLE_CHANMAP
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 1))

224 
	#BLE_FIFO_CONF
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 2))

225 
	#BLE_CONF
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 3))

226 
	#BLE_MAXNACK
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 4))

227 

	)

228 
	#BLE_CRCINIT_0
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 5))

229 
	#BLE_CRCINIT_1
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 6))

230 
	#BLE_CRCINIT_2
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 7))

231 

	)

232 
	#BLE_SEQSTAT
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 8))

233 

	)

234 
	#BLE_BLACKLIST
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 9))

235 

	)

236 
	#BLE_BACKOFFCNT_0
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 10))

237 
	#BLE_BACKOFFCNT_1
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 11))

238 

	)

239 
	#BLE_SCANCONF
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 12))

240 

	)

241 
	#BLE_WINCONF
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 13))

242 

	)

243 
	#BLE_WINOFFSET_0
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 14))

244 
	#BLE_WINOFFSET_1
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 15))

245 

	)

246 
	#BLE_WINMOD_0
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 16))

247 
	#BLE_WINMOD_1
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 17))

248 

	)

249 
	#BLE_MAX_LEN
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 18))

250 
	#BLE_LEN_BIT_MASK
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 19))

251 

	)

252 
	#BLE_WLPOLICY
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 20))

253 
	#BLE_ADDRTYPE
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 21))

254 

	)

255 
	#BLE_OWNADDR_0
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 22))

256 
	#BLE_OWNADDR_1
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 23))

257 
	#BLE_OWNADDR_2
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 24))

258 
	#BLE_OWNADDR_3
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 25))

259 
	#BLE_OWNADDR_4
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 26))

260 
	#BLE_OWNADDR_5
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 27))

261 

	)

262 
	#BLE_PEERADDR_0
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 28))

263 
	#BLE_PEERADDR_1
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 29))

264 
	#BLE_PEERADDR_2
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 30))

265 
	#BLE_PEERADDR_3
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 31))

266 
	#BLE_PEERADDR_4
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 32))

267 
	#BLE_PEERADDR_5
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 33))

268 

	)

269 
	#BLE_WLVALID
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 34))

270 
	#BLE_WLADDRTYPE
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 35))

271 
	#BLE_WL_PTR
 
	`PXREG
((
BLE_REG_BASE_ADDR
 + 36))

272 

	)

273 
	#BLE_NTXDONE
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 84))

274 
	#BLE_NTXACK
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 85))

275 
	#BLE_NTXCTRLACK
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 86))

276 
	#BLE_NTXCTRL
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 87))

277 
	#BLE_NTXRETRANS
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 88))

278 
	#BLE_NTX
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 89))

279 
	#BLE_NRXOK
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 90))

280 
	#BLE_NRXCTRL
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 91))

281 
	#BLE_NRXNOK
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 92))

282 
	#BLE_NRXIGNORED
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 93))

283 
	#BLE_NRXEMPTY
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 94))

284 
	#BLE_NRXFIFOFULL
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 95))

285 

	)

292 
	#BLE_RAW_CONF
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 81))

293 
	#BLE_RAW_FIFOCMD
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 82))

294 
	#BLE_RAW_WINIT
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 83))

295 
	#BLE_RAW_CRCINIT0
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 84))

296 
	#BLE_RAW_CRCINIT1
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 85))

297 
	#BLE_RAW_CRCINIT2
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 86))

298 
	#BLE_RAW_CRCINIT3
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 87))

300 
	#BLE_RAW_NTX0
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 88))

301 
	#BLE_RAW_NTX1
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 89))

302 
	#BLE_RAW_NRXOK0
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 90))

303 
	#BLE_RAW_NRXOK1
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 91))

304 
	#BLE_RAW_NRXNOK0
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 92))

305 
	#BLE_RAW_NRXNOK1
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 93))

307 
	#BLE_RAW_TX_CRC_LEN
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 94))

308 
	#BLE_RAW_RX_LEN
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 95))

311 

	)

312 
	#BLE_LAST_RSSI
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 96))

313 
	#BLE_ENDCAUSE
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 97))

314 
	#BLE_ANCHOR_VALID
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 98))

315 
	#BLE_DF_BYTES
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 99))

316 
	#BLE_RX_TIMEOUT0
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 100))

317 
	#BLE_RX_TIMEOUT1
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 101))

318 
	#BLE_RFSYNTHCAL
 
	`XREG
((
BLE_REG_BASE_ADDR
 + 102))

319 

	)

321 
	#PHY_SCAN_WL
 0

	)

322 
	#PHY_HOST_WL
 1

	)

325 
	#PHY_FIFO_SIZE
 0x80

	)

326 
	#PHY_RSSI_VALUE_INVALID
 0x80

	)

327 
	#PHY_NUM_RF_CHANS
 40

	)

328 
	#PHY_FIRST_RF_CHAN
 0

	)

329 
	#PHY_LAST_RF_CHAN
 (
PHY_NUM_RF_CHANS
-1)

	)

332 
	#PHY_FIFO_RX_RESET
 0x81

	)

333 
	#PHY_FIFO_RX_DEALLOC
 0x82

	)

334 
	#PHY_FIFO_RX_RETRY
 0x83

	)

335 
	#PHY_FIFO_RX_DISCARD
 0x84

	)

336 
	#PHY_FIFO_RX_COMMIT
 0x85

	)

338 
	#PHY_FIFO_TX_RESET
 0x91

	)

339 
	#PHY_FIFO_TX_DEALLOC
 0x92

	)

340 
	#PHY_FIFO_TX_RETRY
 0x93

	)

341 
	#PHY_FIFO_TX_DISCARD
 0x94

	)

342 
	#PHY_FIFO_TX_COMMIT
 0x95

	)

344 
	#PHY_FIFO_RESET
 0xF1

	)

345 
	#PHY_FIFO_DEALLOC
 0xF2

	)

346 
	#PHY_FIFO_RETRY
 0xF3

	)

347 
	#PHY_FIFO_DISCARD
 0xF4

	)

348 
	#PHY_FIFO_COMMIT
 0xF5

	)

351 
	#PHY_PN7_WHITENER_BIT
 
	`BV
(0)

	)

352 
	#PHY_PN9_WHITENER_BIT
 
	`BV
(1)

	)

354 
	#PHY_MOD_NO_TONE
 0x04

	)

355 
	#PHY_MOD_GFSK_250KHZ_1MBPS_TONE
 0x24

	)

356 
	#PHY_MOD_GFSK_156KHZ_250KBPS_TONE
 0x28

	)

357 
	#PHY_MOD_GFSK_156KHZ_1MBPS_TONE
 0x2C

	)

358 
	#PHY_MOD_MSK_250KBPS_TONE
 0x30

	)

359 
	#PHY_MOD_MSK_500KBPS_TONE
 0x32

	)

360 
	#PHY_MOD_MSK_1MBPS_TONE
 0x34

	)

362 
	#PHY_CORRELATION_THRESHOLD
 0x48

	)

363 
	#PHY_FREQ_OFFSET
 0x40

	)

365 #i‡
deföed
–
CC2541
Ë|| deföed–
CC2541S
 )

366 
	#PHY_TX_FILTER_CONFIG
 0x03

	)

367 
	#PHY_TX_CTRL_DAC_CURRENT
 0x19

	)

368 
	#PHY_TX_IV_CTRL
 0x1B

	)

369 
	#PHY_PREAMBLE_SYNC
 0x02

	)

370 
	#PHY_RX_CHARGE_PUMP_REV_C
 0x0D

	)

371 
	#PHY_RX_CHARGE_PUMP_REV_D
 0x09

	)

373 
	#PHY_TX_FILTER_CONFIG
 0x07

	)

374 
	#PHY_TX_CTRL_DAC_CURRENT
 0x69

	)

375 
	#PHY_TX_IV_CTRL
 0xFF

376 
	#PHY_PREAMBLE_SYNC
 0x00

	)

377 
	#PHY_COMP_QUAD_SKEW
 0x16

	)

381 
	#PHY_FREQ_TUNE_NO_CAP_LOAD
 0x0F

	)

384 
	#PHY_RX_LNA_GAIN_STD
 0x3A

	)

385 
	#PHY_RX_LNA_GAIN_HIGH
 0x7F

	)

386 
	#PHY_RX_CTRL_STD
 0x33

	)

387 
	#PHY_RX_CTRL_HIGH
 0x3F

	)

388 
	#PHY_RX_FSCTRL_STD
 0x55

	)

389 
	#PHY_RX_FSCTRL_HIGH
 0x5A

	)

391 
	#PHY_CC2590_HGM_LOW
 0x00

	)

392 
	#PHY_CC2590_HGM_HIGH
 0x01

	)

395 
	#PHY_RSSI_DB2DBM_STD_GAIN
 0x61

	)

396 
	#PHY_RSSI_DB2DBM_HIGH_GAIN
 0x6A

	)

399 
	#PHY_RSSI_DB2DBM_STD_GAIN_CC2590
 0x67

	)

400 
	#PHY_RSSI_DB2DBM_HIGH_GAIN_CC2590
 0x71

	)

403 #i‡
deföed
–
CC2541
Ë|| deföed–
CC2541S
 )

404 
	#PHY_TX_POWER_REG_MINUS_23_DBM
 0x31

	)

405 
	#PHY_TX_POWER_REG_MINUS_6_DBM
 0xB1

	)

406 
	#PHY_TX_POWER_REG_0_DBM
 0xE1

	)

407 
	#PHY_TX_POWER_REG_4_DBM
 0xFF

408 #ñ£ // CC2540

	)

409 
	#PHY_TX_POWER_REG_MINUS_23_DBM
 0x05

	)

410 
	#PHY_TX_POWER_REG_MINUS_6_DBM
 0x95

	)

411 
	#PHY_TX_POWER_REG_0_DBM
 0xD5

	)

412 
	#PHY_TX_POWER_REG_4_DBM
 0xF5

	)

416 
	#PHY_RFIRQ0_TXTHSHDN_BIT
 
	`BV
(0)

	)

417 
	#PHY_RFIRQ0_RXTHSHDN_BIT
 
	`BV
(1)

	)

418 
	#PHY_RFIRQ0_TXTHSHUP_BIT
 
	`BV
(2)

	)

419 
	#PHY_RFIRQ0_RXTHSHUP_BIT
 
	`BV
(3)

	)

421 
	#PHY_RFIRQ1_RXOK_BIT
 
	`BV
(0)

	)

422 
	#PHY_RFIRQ1_RXCTRL_BIT
 
	`BV
(1)

	)

423 
	#PHY_RFIRQ1_RXNOK_BIT
 
	`BV
(2)

	)

424 
	#PHY_RFIRQ1_RXIGNORED_BIT
 
	`BV
(3)

	)

425 
	#PHY_RFIRQ1_RXEMPTY_BIT
 
	`BV
(4)

	)

426 
	#PHY_RFIRQ1_TXDONE_BIT
 
	`BV
(5)

	)

427 
	#PHY_RFIRQ1_TASKDONE_BIT
 
	`BV
(6)

	)

428 
	#PHY_RFIRQ1_PINGRSP_BIT
 
	`BV
(7)

	)

431 
	#PHY_RFERR_TXUNDERF_BIT
 
	`BV
(0)

	)

432 
	#PHY_RFERR_RXUNDERF_BIT
 
	`BV
(1)

	)

433 
	#PHY_RFERR_TXOVERF_BIT
 
	`BV
(2)

	)

434 
	#PHY_RFERR_RXOVERF_BIT
 
	`BV
(3)

	)

435 
	#PHY_RFERR_RXTXABO_BIT
 
	`BV
(4)

	)

436 
	#PHY_RFERR_NRERR_BIT
 
	`BV
(5)

	)

437 
	#PHY_RFERR_RXFIFOFULL_BIT
 
	`BV
(6)

	)

443 vﬁ©ûê
	t__xd©a
 * 
	tphyXRegPå_t
;

444 vﬁ©ûê
	t__xd©a
 * 
	tphyXD©aPå_t
;

448 
PHY_STATUS_SUCCESS
,

449 
PHY_STATUS_FAILURE
,

450 
PHY_STATUS_ERROR_BL_CKSUM_FAILURE
,

451 
PHY_STATUS_WL_FULL
,

452 
PHY_STATUS_WL_EMPTY
,

453 
PHY_STATUS_WL_ENTRY_NOT_FOUND
,

454 
PHY_STATUS_WL_ENTRY_FOUND


456 
uöt8
 
	tphySètus_t
;

460 
PHY_SEM_0
,

461 
PHY_SEM_1
,

462 
PHY_SEM_2


464 
uöt8
 
	tphySemId_t
;

469 
PHY_ADDR_TYPE_PUBLIC
,

470 
PHY_ADDR_TYPE_RANDOM


472 
uöt8
 
	tphyAddrTy≥_t
;

477 
PHY_ADV_CHANNEL_37
 = 
BV
(0),

478 
PHY_ADV_CHANNEL_38
 = 
BV
(1),

479 
PHY_ADV_CHANNEL_39
 = 
BV
(2)

481 
uöt8
 
	tphyCh™M≠_t
;

486 
PHY_SCAN_MODE_PASSIVE
,

487 
PHY_SCAN_MODE_ACTIVE


489 
uöt8
 
	tphySˇnMode_t
;

493 
PHY_SCAN_END_ON_ADV_REPORT_DISABLED
,

494 
PHY_SCAN_END_ON_ADV_REPORT_ENABLED


496 
uöt8
 
	tphySˇnEnd_t
;

500 
PHY_END_CONN_CONTINUE
,

501 
PHY_END_CONN_AFTER_NEXT_PKT


503 
uöt8
 
	tphyEndC⁄n_t
;

507 
PHY_MD_BIT_FROM_FIFO_ENTRY
 = (0 << 1),

508 
PHY_MD_BIT_BASED_ON_FIFO_CONTENTS
 = (1 << 1),

509 
PHY_MD_BIT_ALWAYS_ZERO
 = (2 << 1),

510 
PHY_MD_BIT_ALWAYS_ONE
 = (3 << 1)

512 
uöt8
 
	tphyC⁄fMD_t
;

516 
PHY_FIFO_DATA_DIABLE_ALL
 = 0,

517 
PHY_FIFO_DATA_AUTO_FLUSH_IGNORED
 = 
BV
(0),

518 
PHY_FIFO_DATA_AUTO_FLUSH_CRC_ERROR
 = 
BV
(1),

519 
PHY_FIFO_DATA_AUTO_FLUSH_EMPTY_PKT
 = 
BV
(2),

520 
PHY_FIFO_DATA_APPEND_RX_STATUS
 = 
BV
(3)

522 
uöt8
 
	tphyFifoD©a_t
;

526 
PHY_FIFO_CONFIG_DISABLE_ALL
 = 0,

527 
PHY_FIFO_CONFIG_AUTO_DEALLOC_RX
 = 
BV
(0),

528 
PHY_FIFO_CONFIG_AUTO_COMMIT_RX
 = 
BV
(1),

529 
PHY_FIFO_CONFIG_AUTO_DEALLOC_TX
 = 
BV
(4),

530 
PHY_FIFO_CONFIG_AUTO_COMMIT_TX
 = 
BV
(5)

532 
uöt8
 
	tphyFifoC⁄fig_t
;

536 
PHY_ADVERTISER_WHITE_LIST_NONE
,

537 
PHY_ADVERTISER_WHITE_LIST_SCAN_REQ
,

538 
PHY_ADVERTISER_WHITE_LIST_CONNECT_REQ
,

539 
PHY_ADVERTISER_WHITE_LIST_ALL


541 
uöt8
 
	tphyAdvWlPﬁicy_t
;

545 
PHY_SCANNER_ALLOW_ALL_ADV_PKTS
,

546 
PHY_SCANNER_USE_WHITE_LIST


548 
uöt8
 
	tphySˇnWlPﬁicy_t
;

552 
PHY_INITIATOR_USE_PEER_ADDR
,

553 
PHY_INITIATOR_USE_WL


555 
uöt8
 
	tphyInôWlPﬁicy_t
;

559 
PHY_SET_BLACKLIST_DISABLE
,

560 
PHY_SET_BLACKLIST_ENABLE


562 
uöt8
 
	tphyBœckli°_t
;

566 
PHY_DISABLE_ALL_WHITENER
,

567 
PHY_ENABLE_BLE_WHITENER
,

568 
PHY_DISABLE_BLE_WHITENER
,

569 
PHY_ENABLE_PN9_WHITENER
,

570 
PHY_DISABLE_PN9_WHITENER
,

571 
PHY_ENABLE_ONLY_BLE_WHITENER
,

572 
PHY_ENABLE_ONLY_PN9_WHITENER
,

573 
PHY_ENABLE_ALL_WHITENER


575 
uöt8
 
	tphyWhôíî_t
;

579 
PHY_ENABLE_APPEND_RF_STATUS
,

580 
PHY_DISABLE_APPEND_RF_STATUS


582 
uöt8
 
	tphyAµídRfSètus_t
;

586 
PHY_RF_RAM_BANK_0
,

587 
PHY_RF_RAM_BANK_1
,

588 
PHY_RF_RAM_BANK_2
,

589 
PHY_RF_RAM_BANK_3
,

590 
PHY_RF_RAM_BANK_4
,

591 
PHY_RF_RAM_BANK_5
,

592 
PHY_RF_RAM_RX_FIFO
,

593 
PHY_RF_RAM_TX_FIFO


595 
uöt8
 
	tphyRfRamB™k_t
;

599 
PHY_CMD_SHUTDOWN
 = 1,

600 
PHY_CMD_DEMOD_TEST
 = 2,

601 
PHY_CMD_RX_TEST
 = 3,

602 
PHY_CMD_TX_TEST
 = 4,

603 
PHY_CMD_TX_CAL_TEST
 = 5,

604 
PHY_CMD_PING
 = 6,

606 
PHY_CMD_BLE_SLAVE
 = 16,

607 
PHY_CMD_BLE_MASTER
 = 17,

609 
PHY_CMD_BLE_ADV
 = 18,

610 
PHY_CMD_BLE_ADV_DIR
 = 19,

611 
PHY_CMD_BLE_ADV_NC
 = 20,

612 
PHY_CMD_BLE_ADV_DISC
 = 21,

614 
PHY_CMD_BLE_SCAN
 = 22,

615 
PHY_CMD_BLE_INITIATOR
 = 23,

617 
PHY_CMD_BLE_RX_RAW
 = 24,

618 
PHY_CMD_BLE_TX_RAW
 = 25,

620 
PHY_CMD_SEND_EVENT1
 = 33,

621 
PHY_CMD_SEND_EVENT2
 = 34,

623 
PHY_CMD_INVALID
 = 0xFF

625 
uöt8
 
	tphyCmd_t
;

629 
PHY_TASK_ENDOK
 = 0,

630 
PHY_TASK_RXTIMEOUT
 = 1,

631 
PHY_TASK_NOSYNC
 = 2,

632 
PHY_TASK_RXERR
 = 3,

633 
PHY_TASK_CONNECT
 = 4,

634 
PHY_TASK_MAXNACK
 = 5,

635 
PHY_TASK_ABORT
 = 6,

641 
PHY_TASKERR_RXFIFO
 = 250,

642 
PHY_TASKERR_TXFIFO
 = 251,

643 
PHY_TASKERR_PAR
 = 252,

644 
PHY_TASKERR_SEM
 = 253,

645 
PHY_TASKERR_CMD
 = 254,

646 
PHY_TASKERR_INTERNAL
 = 255

651 
PHY_FREQ_MODE_MODULATED_CW
,

652 
PHY_FREQ_MODE_UNMODULATED_CW


654 
uöt8
 
	tphyFªqMode_t
;

658 
PHY_RAW_RUN_ONCE
,

659 
PHY_RAW_RUN_REPEAT


661 
uöt8
 
	tphyRawRunMode_t
;

665 
PHY_RAW_START_IMMEDIATE
,

666 
PHY_RAW_START_ON_TIMER_EVENT


668 
uöt8
 
	tphyRawSèπMode_t
;

699 
PHY_Inô
( );

719 
PHY_Re£t
( );

740 
PHY_LﬂdNR
( );

760 
phySètus_t
 
PHY_VîifyNR
( );

778 
PHY_CÀ¨AŒRegsAndFifos
( );

797 
phySètus_t
 
PHY_GëSem
–
phySemId_t
 
£mId
 );

816 
phySètus_t
 
PHY_Rñó£Sem
–
phySemId_t
 
£mId
 );

835 
PHY_SëOwnAddr
–
uöt8
 *
addr
,

836 
phyAddrTy≥_t
 
addrTy≥
);

855 
PHY_SëPìrAddr
–
uöt8
 *
addr
,

856 
phyAddrTy≥_t
 
addrTy≥
);

874 
PHY_SëCRCInô
–
uöt32
 
¸cInô
 );

893 
phyCh™M≠_t
 
PHY_GëAdvCh™s
( );

913 
PHY_SëAdvCh™s
–
uöt8
 
advCh™M≠
 );

933 
NEAR_FUNC
 
PHY_SëD©aCh™
–
uöt8
 
d©aCh™
 );

952 
NEAR_FUNC
 
uöt8
 
PHY_GëD©aCh™
( );

971 
PHY_SëEndC⁄√˘i⁄
–
phyEndC⁄n_t
 
ídC⁄n
 );

993 
PHY_C⁄figuªMD
–
phyC⁄fMD_t
 
m‹eD©a
 );

1011 
PHY_SëBackoffC¡
–
uöt16
 
cou¡
 );

1029 
PHY_SëSˇnMode
–
phySˇnMode_t
 
sˇnMode
 );

1049 
PHY_SëSˇnEnd
–
phySˇnEnd_t
 
sˇnEnd
 );

1067 
uöt8
 
PHY_GëEndCau£
( );

1086 
uöt8
 
PHY_Anch‹VÆid
( );

1105 
PHY_InôSeqSèt
( );

1127 
uöt8
 
PHY_Fú°PktRe˚ived
( );

1147 
uöt8
 
PHY_CålAckPídög
( );

1167 
PHY_SëSyncW‹d
–
uöt32
 
syncW‹d
 );

1186 
PHY_SëMaxNack
–
uöt8
 
maxNackCou¡
 );

1204 
PHY_CÀ¨Whôñi°
( );

1222 
PHY_CÀ¨WlE¡ry
–
uöt8
 
wlE¡ryIndex
 );

1241 
PHY_CÀ¨WlBa£dOnBl
( );

1259 
uöt8
 
PHY_GëNumFªeWlE¡rõs
( );

1277 
uöt8
 
PHY_GëWlSize
( );

1299 
phySètus_t
 
PHY_AddWlE¡ry
–
uöt8
 *
addr
,

1300 
phyAddrTy≥_t
 
addrTy≥
,

1301 
phyBœckli°_t
 
£tBœckli°
 );

1324 
phySètus_t
 
PHY_RemoveWlE¡ry
–
uöt8
 *
addr
,

1325 
phyAddrTy≥_t
 
addrTy≥
 );

1346 
PHY_SëAdvWlPﬁicy
–
phyAdvWlPﬁicy_t
 
wlPﬁicy
 );

1365 
PHY_SëSˇnWlPﬁicy
–
phySˇnWlPﬁicy_t
 
wlPﬁicy
 );

1384 
PHY_SëInôWlPﬁicy
–
phyInôWlPﬁicy_t
 
wlPﬁicy
 );

1406 
PHY_SëBœckli°Index
–
uöt8
 
bœckLi°Index
 );

1428 
phySètus_t
 
PHY_SëBœckli°E¡ry
–
uöt8
 *
addr
,

1429 
phyAddrTy≥_t
 
addrTy≥
 );

1447 
PHY_CÀ¨Bœckli°Index
–
uöt8
 
bœckLi°Index
 );

1468 
PHY_CÀ¨Bœckli°
( );

1488 
PHY_SaveWhôeLi°
–
uöt8
 
wlOw√r
 );

1508 
PHY_Re°‹eWhôeLi°
–
uöt8
 
wlOw√r
 );

1528 
PHY_CÀ¨SavedWhôeLi°
–
uöt8
 
wlOw√r
 );

1546 
PHY_Comm™d
–
phyCmd_t
 
cmd
 );

1564 
PHY_CÀ¨Cou¡îs
( );

1582 
PHY_RódCou¡îs
–
uöt8
 *
˙tPå
 );

1609 
PHY_C⁄figuªFifoD©aPro˚ssög
–
phyFifoD©a_t
 
fifoD©aC⁄f
 );

1629 
PHY_C⁄figuªAµídRfSètus
–
phyAµídRfSètus_t
 
≠≥ndRfSètus
 );

1655 
PHY_SëFifoC⁄fig
–
phyFifoC⁄fig_t
 
fifoC⁄fig
 );

1673 
PHY_InôLa°Rssi
( );

1695 
uöt8
 
PHY_GëLa°Rssi
( );

1718 
uöt8
 
PHY_GëRssi
( );

1737 
PHY_CÀ¨WöC⁄fig
( );

1764 
PHY_SëDy«micWöOff£t
–
uöt16
 
wöOff£t
,

1765 
uöt16
 
c⁄nI¡îvÆ
 );

1791 
PHY_C⁄figWhôíî
–
phyWhôíî_t
 
whôíî
 );

1809 
PHY_Re£tTxFifo
( );

1827 
PHY_Re£tRxFifo
( );

1845 
PHY_Re£tTxRxFifo
( );

1863 
uöt8
 
PHY_TxFifoByãsFªe
( );

1881 
uöt8
 
PHY_TxFifoLí
( );

1899 
uöt8
 
PHY_RxFifoLí
( );

1921 
PHY_RëryTxFifo
( );

1939 
PHY_RëryRxFifo
( );

1957 
PHY_CommôTxFifo
( );

1975 
PHY_CommôRxFifo
( );

1993 
PHY_DisˇrdTxFifo
( );

2011 
PHY_DóŒoˇãRxFifo
( );

2029 
PHY_SëRxFifoThªshﬁd
–
uöt8
 
thªsLí
 );

2047 
uöt8
 *
PHY_GëTxSWP
( );

2065 
uöt8
 *
PHY_GëRxSRP
( );

2087 
PHY_WrôeByã
–
uöt8
 *
d©a
,

2088 
uöt8
 
Àn
 );

2109 
PHY_WrôeByãVÆ
–
uöt8
 
vÆue
 );

2133 
PHY_RódByã
–
uöt8
 *
±r
,

2134 
uöt8
 
Àn
 );

2155 
uöt8
 
PHY_RódByãVÆ
( );

2181 
PHY_M≠D©aB™k
–
phyRfRamB™k_t
 
b™kNum
 );

2205 
PHY_SaveRe°‹eC⁄n
–
uöt8
 
ßveC⁄nId
,

2206 
uöt8
 
ª°‹eC⁄nId
 );

2226 
PHY_Re°‹eC⁄n
–
uöt8
 
c⁄nId
 );

2248 
PHY_RawTxInô
–
phyRawSèπMode_t
 
°¨tMode
,

2249 
phyRawRunMode_t
 
runMode
 );

2271 
PHY_RawRxInô
–
phyRawSèπMode_t
 
°¨tMode
,

2272 
phyRawRunMode_t
 
runMode
 );

2290 
PHY_RawGëNumTxPkts
–
uöt16
 *
numTxPkts
 );

2308 
PHY_RawGëNumRxPkts
–
uöt16
 *
numRxPkts
 );

2330 
PHY_RawGëRxD©a
–
uöt16
 *
numRxPkts
,

2331 
uöt16
 *
numRxEºPkts
,

2332 
uöt8
 *
rxRSSI
 );

2355 
PHY_SëRfFªq
–
uöt8
 
rfCh™
,

2356 
phyFªqMode_t
 
‰eqMode
 );

2359 #ifde‡
__˝lu•lus


	@../../../../Components/ble/controller/include/phy_image.h

53 #i‚de‡
PHY_IMAGE_H


54 
	#PHY_IMAGE_H


	)

56 #ifde‡
__˝lu•lus


73 
	#NR_IMAGE_SIZE
 3582

	)

79 c⁄° 
	tƒImage_t
;

89 
ƒImage_t
 
N™oRiscImage
[];

91 #ifde‡
__˝lu•lus


	@../../../../Components/ble/hci/hci_data.h

39 #i‚de‡
HCI_C_DATA_H


40 
	#HCI_C_DATA_H


	)

42 #ifde‡
__˝lu•lus


97 
HCI_Revî£Byãs
–
uöt8
 *
buf
,

98 
uöt8
 
Àn
 );

101 #ifde‡
__˝lu•lus


	@../../../../Components/ble/hci/hci_event.h

40 #i‚de‡
HCI_C_EVENT_H


41 
	#HCI_C_EVENT_H


	)

43 #ifde‡
__˝lu•lus


51 
	~"hci_é.h
"

53 
uöt8
 
bÀEvtMask
;

54 
uöt8
 
pHciEvtMask
[];

65 
	#BT_EVT_MASK_BYTE0
 0xFF

	)

66 
	#BT_EVT_MASK_BYTE1
 0xFF

	)

67 
	#BT_EVT_MASK_BYTE2
 0xFF

	)

68 
	#BT_EVT_MASK_BYTE3
 0xFF

	)

69 
	#BT_EVT_MASK_BYTE4
 0xFF

	)

70 
	#BT_EVT_MASK_BYTE5
 0x9F

	)

71 
	#BT_EVT_MASK_BYTE6
 0x00

	)

72 
	#BT_EVT_MASK_BYTE7
 0x20

	)

74 
	#LE_EVT_MASK_DEFAULT
 0x1F

	)

92 
hciInôEvítMasks
( );

114 
HCI_D©aBuf„rOvîÊowEvít
–
uöt8
 
lökTy≥
 );

138 
HCI_NumOfCom∂ëedPackësEvít
–
uöt8
 
numH™dÀs
,

139 
uöt16
 *
h™dÀrs
,

140 
uöt16
 *
numCom∂ëedPackës
 );

160 
HCI_Comm™dCom∂ëeEvít
–
uöt16
 
›code
,

161 
uöt8
 
numP¨am
,

162 
uöt8
 *
∑øm
 );

183 
HCI_Víd‹S≥cifcComm™dCom∂ëeEvít
–
uöt16
 
›code
,

184 
uöt8
 
Àn
,

185 
uöt8
 *
∑øm
 );

204 
HCI_Comm™dSètusEvít
–
uöt8
 
°©us
,

205 
uöt16
 
›code
 );

223 
HCI_H¨dw¨eEº‹Evít
–
uöt8
 
hwEº‹Code
 );

244 
HCI_SídComm™dSètusEvít
 ( 
uöt8
 
evítCode
,

245 
uöt16
 
°©us
,

246 
uöt16
 
›code
 );

268 
HCI_SídComm™dCom∂ëeEvít
 ( 
uöt8
 
evítCode
,

269 
uöt16
 
›code
,

270 
uöt8
 
numP¨am
,

271 
uöt8
 *
∑øm
 );

291 
HCI_SídC⁄åﬁÀrToHo°Evít
–
uöt8
 
evítCode
,

292 
uöt8
 
d©aLí
,

293 
uöt8
 *
pD©a
 );

295 #ifde‡
__˝lu•lus


	@../../../../Components/ble/hci/hci_tl.h

40 #i‚de‡
HCI_TL_H


41 
	#HCI_TL_H


	)

43 #ifde‡
__˝lu•lus


52 
	~"hci.h
"

53 
	~"OSAL.h
"

54 
	~"hÆ_u¨t.h
"

55 
	~"hci_d©a.h
"

56 
	~"hci_evít.h
"

58 
uöt8
 
hciTaskID
;

60 
uöt8
 
hciTe°TaskID
;

61 
uöt8
 
hciG≠TaskID
;

62 
uöt8
 
hciL2ˇpTaskID
;

63 
uöt8
 
hciSmpTaskID
;

69 
	#HCI_ASSERT
(
c⁄dôi⁄
Ë
	`HAL_ASSERT
(c⁄dôi⁄)

	)

76 
	#HCI_TX_PROCESS_EVENT
 0x0001

	)

77 
	#HCI_TEST_UART_SEND_EVENT
 0x0002

	)

78 
	#HCI_BDADDR_UPDATED_EVENT
 0x4000

	)

79 
	#HCI_OSAL_MSG_EVENT
 
SYS_EVENT_MSG


	)

82 
	#HCI_CTRL_TO_HOST_EVENT
 0x01

	)

83 
	#HCI_HOST_TO_CTRL_CMD_EVENT
 0x02

	)

84 
	#HCI_HOST_TO_CTRL_DATA_EVENT
 0x03

	)

86 
	#HCI_BDADDR_LEN
 6

	)

89 
	#HCI_MAX_CMD_PKT_SIZE
 0xFF

	)

90 
	#HCI_MAX_DATA_PKT_SIZE
 0xFFFF

	)

93 
	#HCI_DATA_MAX_DATA_LENGTH
 27

	)

99 
	#HCI_CMD_MIN_LENGTH
 4

	)

105 
	#HCI_EVENT_MIN_LENGTH
 3

	)

111 
	#HCI_DATA_MIN_LENGTH
 5

	)

114 
	#HCI_MAX_NUM_CONNECTIONS
 0x03

	)

116 
	#HCI_TX_DATA_ANY_CONNECTION
 0xFF

	)

119 
	#HCI_CMD_PACKET
 0x01

	)

120 
	#HCI_ACL_DATA_PACKET
 0x02

	)

121 
	#HCI_SCO_DATA_PACKET
 0x03

	)

122 
	#HCI_EVENT_PACKET
 0x04

	)

129 
	#HCI_DISCONNECT
 0x0406

	)

130 
	#HCI_READ_REMOTE_VERSION_INFO
 0x041D

	)

133 
	#HCI_SET_EVENT_MASK
 0x0C01

	)

134 
	#HCI_RESET
 0x0C03

	)

135 
	#HCI_READ_TRANSMIT_POWER
 0x0C2D

	)

136 
	#HCI_SET_CONTROLLER_TO_HOST_FLOW_CONTROL
 0x0C31

	)

137 
	#HCI_HOST_BUFFER_SIZE
 0x0C33

	)

138 
	#HCI_HOST_NUM_COMPLETED_PACKETS
 0x0C35

	)

141 
	#HCI_READ_LOCAL_VERSION_INFO
 0x1001

	)

142 
	#HCI_READ_LOCAL_SUPPORTED_COMMANDS
 0x1002

	)

143 
	#HCI_READ_LOCAL_SUPPORTED_FEATURES
 0x1003

	)

144 
	#HCI_READ_BDADDR
 0x1009

	)

147 
	#HCI_READ_RSSI
 0x1405

	)

150 
	#HCI_LE_SET_EVENT_MASK
 0x2001

	)

151 
	#HCI_LE_READ_BUFFER_SIZE
 0x2002

	)

152 
	#HCI_LE_READ_LOCAL_SUPPORTED_FEATURES
 0x2003

	)

153 
	#HCI_LE_SET_RANDOM_ADDR
 0x2005

	)

154 
	#HCI_LE_SET_ADV_PARAM
 0x2006

	)

155 
	#HCI_LE_READ_ADV_CHANNEL_TX_POWER
 0x2007

	)

156 
	#HCI_LE_SET_ADV_DATA
 0x2008

	)

157 
	#HCI_LE_SET_SCAN_RSP_DATA
 0x2009

	)

158 
	#HCI_LE_SET_ADV_ENABLE
 0x200A

	)

159 
	#HCI_LE_SET_SCAN_PARAM
 0x200B

	)

160 
	#HCI_LE_SET_SCAN_ENABLE
 0x200C

	)

161 
	#HCI_LE_CREATE_CONNECTION
 0x200D

	)

162 
	#HCI_LE_CREATE_CONNECTION_CANCEL
 0x200E

	)

163 
	#HCI_LE_READ_WHITE_LIST_SIZE
 0x200F

	)

164 
	#HCI_LE_CLEAR_WHITE_LIST
 0x2010

	)

165 
	#HCI_LE_ADD_WHITE_LIST
 0x2011

	)

166 
	#HCI_LE_REMOVE_WHITE_LIST
 0x2012

	)

167 
	#HCI_LE_CONNECTION_UPDATE
 0x2013

	)

168 
	#HCI_LE_SET_HOST_CHANNEL_CLASSIFICATION
 0x2014

	)

169 
	#HCI_LE_READ_CHANNEL_MAP
 0x2015

	)

170 
	#HCI_LE_READ_REMOTE_USED_FEATURES
 0x2016

	)

171 
	#HCI_LE_ENCRYPT
 0x2017

	)

172 
	#HCI_LE_RAND
 0x2018

	)

173 
	#HCI_LE_START_ENCRYPTION
 0x2019

	)

174 
	#HCI_LE_LTK_REQ_REPLY
 0x201A

	)

175 
	#HCI_LE_LTK_REQ_NEG_REPLY
 0x201B

	)

176 
	#HCI_LE_READ_SUPPORTED_STATES
 0x201C

	)

177 
	#HCI_LE_RECEIVER_TEST
 0x201D

	)

178 
	#HCI_LE_TRANSMITTER_TEST
 0x201E

	)

179 
	#HCI_LE_TEST_END
 0x201F

	)

182 
	#HCI_EXT_SET_RX_GAIN
 0xFC00

	)

183 
	#HCI_EXT_SET_TX_POWER
 0xFC01

	)

184 
	#HCI_EXT_ONE_PKT_PER_EVT
 0xFC02

	)

185 
	#HCI_EXT_CLK_DIVIDE_ON_HALT
 0xFC03

	)

186 
	#HCI_EXT_DECLARE_NV_USAGE
 0xFC04

	)

187 
	#HCI_EXT_DECRYPT
 0xFC05

	)

188 
	#HCI_EXT_SET_LOCAL_SUPPORTED_FEATURES
 0xFC06

	)

189 
	#HCI_EXT_SET_FAST_TX_RESP_TIME
 0xFC07

	)

190 
	#HCI_EXT_MODEM_TEST_TX
 0xFC08

	)

191 
	#HCI_EXT_MODEM_HOP_TEST_TX
 0xFC09

	)

192 
	#HCI_EXT_MODEM_TEST_RX
 0xFC0A

	)

193 
	#HCI_EXT_END_MODEM_TEST
 0xFC0B

	)

194 
	#HCI_EXT_SET_BDADDR
 0xFC0C

	)

195 
	#HCI_EXT_SET_SCA
 0xFC0D

	)

196 
	#HCI_EXT_ENABLE_PTM
 0xFC0E

197 
	#HCI_EXT_SET_FREQ_TUNE
 0xFC0F

	)

198 
	#HCI_EXT_SAVE_FREQ_TUNE
 0xFC10

	)

199 
	#HCI_EXT_SET_MAX_DTM_TX_POWER
 0xFC11

	)

200 
	#HCI_EXT_MAP_PM_IO_PORT
 0xFC12

	)

201 
	#HCI_EXT_DISCONNECT_IMMED
 0xFC13

	)

202 
	#HCI_EXT_PER
 0xFC14

	)

203 
	#HCI_EXT_PER_BY_CHAN
 0xFC15

204 
	#HCI_EXT_EXTEND_RF_RANGE
 0xFC16

	)

205 
	#HCI_EXT_ADV_EVENT_NOTICE
 0xFC17

206 
	#HCI_EXT_CONN_EVENT_NOTICE
 0xFC18

207 
	#HCI_EXT_HALT_DURING_RF
 0xFC19

	)

208 
	#HCI_EXT_OVERRIDE_SL
 0xFC1A

	)

209 
	#HCI_EXT_BUILD_REVISION
 0xFC1B

	)

210 
	#HCI_EXT_DELAY_SLEEP
 0xFC1C

	)

211 
	#HCI_EXT_RESET_SYSTEM
 0xFC1D

	)

212 
	#HCI_EXT_OVERLAPPED_PROCESSING
 0xFC1E

	)

213 
	#HCI_EXT_NUM_COMPLETED_PKTS_LIMIT
 0xFC1F

	)

220 
	#HCI_DISCONNECTION_COMPLETE_EVENT_CODE
 0x05

	)

221 
	#HCI_ENCRYPTION_CHANGE_EVENT_CODE
 0x08

	)

222 
	#HCI_READ_REMOTE_INFO_COMPLETE_EVENT_CODE
 0x0C

	)

223 
	#HCI_COMMAND_COMPLETE_EVENT_CODE
 0x0E

	)

224 
	#HCI_COMMAND_STATUS_EVENT_CODE
 0x0F

	)

225 
	#HCI_BLE_HARDWARE_ERROR_EVENT_CODE
 0x10

	)

226 
	#HCI_NUM_OF_COMPLETED_PACKETS_EVENT_CODE
 0x13

	)

227 
	#HCI_DATA_BUFFER_OVERFLOW_EVENT
 0x1A

	)

228 
	#HCI_KEY_REFRESH_COMPLETE_EVENT_CODE
 0x30

	)

231 
	#HCI_LE_EVENT_CODE
 0x3E

	)

234 
	#HCI_BLE_CONNECTION_COMPLETE_EVENT
 0x01

	)

235 
	#HCI_BLE_ADV_REPORT_EVENT
 0x02

	)

236 
	#HCI_BLE_CONN_UPDATE_COMPLETE_EVENT
 0x03

	)

237 
	#HCI_BLE_READ_REMOTE_FEATURE_COMPLETE_EVENT
 0x04

	)

238 
	#HCI_BLE_LTK_REQUESTED_EVENT
 0x05

	)

241 
	#HCI_VE_EVENT_CODE
 0xFF

	)

244 
	#HCI_EXT_SET_RX_GAIN_EVENT
 0x0400

	)

245 
	#HCI_EXT_SET_TX_POWER_EVENT
 0x0401

	)

246 
	#HCI_EXT_ONE_PKT_PER_EVT_EVENT
 0x0402

	)

247 
	#HCI_EXT_CLK_DIVIDE_ON_HALT_EVENT
 0x0403

	)

248 
	#HCI_EXT_DECLARE_NV_USAGE_EVENT
 0x0404

	)

249 
	#HCI_EXT_DECRYPT_EVENT
 0x0405

	)

250 
	#HCI_EXT_SET_LOCAL_SUPPORTED_FEATURES_EVENT
 0x0406

	)

251 
	#HCI_EXT_SET_FAST_TX_RESP_TIME_EVENT
 0x0407

	)

252 
	#HCI_EXT_MODEM_TEST_TX_EVENT
 0x0408

	)

253 
	#HCI_EXT_MODEM_HOP_TEST_TX_EVENT
 0x0409

	)

254 
	#HCI_EXT_MODEM_TEST_RX_EVENT
 0x040A

	)

255 
	#HCI_EXT_END_MODEM_TEST_EVENT
 0x040B

	)

256 
	#HCI_EXT_SET_BDADDR_EVENT
 0x040C

	)

257 
	#HCI_EXT_SET_SCA_EVENT
 0x040D

	)

258 
	#HCI_EXT_ENABLE_PTM_EVENT
 0x040E

259 
	#HCI_EXT_SET_FREQ_TUNE_EVENT
 0x040F

	)

260 
	#HCI_EXT_SAVE_FREQ_TUNE_EVENT
 0x0410

	)

261 
	#HCI_EXT_SET_MAX_DTM_TX_POWER_EVENT
 0x0411

	)

262 
	#HCI_EXT_MAP_PM_IO_PORT_EVENT
 0x0412

	)

263 
	#HCI_EXT_DISCONNECT_IMMED_EVENT
 0x0413

	)

264 
	#HCI_EXT_PER_EVENT
 0x0414

	)

265 
	#HCI_EXT_PER_BY_CHAN_EVENT
 0x0415

266 
	#HCI_EXT_EXTEND_RF_RANGE_EVENT
 0x0416

	)

267 
	#HCI_EXT_ADV_EVENT_NOTICE_EVENT
 0x0417

268 
	#HCI_EXT_CONN_EVENT_NOTICE_EVENT
 0x0418

269 
	#HCI_EXT_HALT_DURING_RF_EVENT
 0x0419

	)

270 
	#HCI_EXT_OVERRIDE_SL_EVENT
 0x041A

	)

271 
	#HCI_EXT_BUILD_REVISION_EVENT
 0x041B

	)

272 
	#HCI_EXT_DELAY_SLEEP_EVENT
 0x041C

	)

273 
	#HCI_EXT_RESET_SYSTEM_EVENT
 0x041D

	)

274 
	#HCI_EXT_OVERLAPPED_PROCESSING_EVENT
 0x041E

	)

275 
	#HCI_EXT_NUM_COMPLETED_PKTS_LIMIT_EVENT
 0x041F

	)

308 
HCI_Inô
–
uöt8
 
èskID
 );

327 
uöt16
 
HCI_Pro˚ssEvít
–
uöt8
 
èsk_id
,

328 
uöt16
 
evíts
 );

331 #ifde‡
__˝lu•lus


	@../../../../Components/ble/host/gatt_uuid.c

45 
	~"comdef.h
"

46 
	~"OSAL.h
"

48 
	~"g©t.h
"

49 
	~"g©t_uuid.h
"

71 
CONST
 
uöt8
 
	gg≠Sîvi˚UUID
[
ATT_BT_UUID_SIZE
] =

73 
LO_UINT16
–
GAP_SERVICE_UUID
 ), 
HI_UINT16
( GAP_SERVICE_UUID )

77 
CONST
 
uöt8
 
	gg©tSîvi˚UUID
[
ATT_BT_UUID_SIZE
] =

79 
LO_UINT16
–
GATT_SERVICE_UUID
 ), 
HI_UINT16
( GATT_SERVICE_UUID )

86 
CONST
 
uöt8
 
	g¥im¨ySîvi˚UUID
[
ATT_BT_UUID_SIZE
] =

88 
LO_UINT16
–
GATT_PRIMARY_SERVICE_UUID
 ), 
HI_UINT16
( GATT_PRIMARY_SERVICE_UUID )

92 
CONST
 
uöt8
 
	g£c⁄d¨ySîvi˚UUID
[
ATT_BT_UUID_SIZE
] =

94 
LO_UINT16
–
GATT_SECONDARY_SERVICE_UUID
 ), 
HI_UINT16
( GATT_SECONDARY_SERVICE_UUID )

98 
CONST
 
uöt8
 
	gö˛udeUUID
[
ATT_BT_UUID_SIZE
] =

100 
LO_UINT16
–
GATT_INCLUDE_UUID
 ), 
HI_UINT16
( GATT_INCLUDE_UUID )

104 
CONST
 
uöt8
 
	gch¨a˘îUUID
[
ATT_BT_UUID_SIZE
] =

106 
LO_UINT16
–
GATT_CHARACTER_UUID
 ), 
HI_UINT16
( GATT_CHARACTER_UUID )

113 
CONST
 
uöt8
 
	gch¨ExtPr›sUUID
[
ATT_BT_UUID_SIZE
] =

115 
LO_UINT16
–
GATT_CHAR_EXT_PROPS_UUID
 ), 
HI_UINT16
( GATT_CHAR_EXT_PROPS_UUID )

119 
CONST
 
uöt8
 
	gch¨U£rDescUUID
[
ATT_BT_UUID_SIZE
] =

121 
LO_UINT16
–
GATT_CHAR_USER_DESC_UUID
 ), 
HI_UINT16
( GATT_CHAR_USER_DESC_UUID )

125 
CONST
 
uöt8
 
	g˛õ¡Ch¨CfgUUID
[
ATT_BT_UUID_SIZE
] =

127 
LO_UINT16
–
GATT_CLIENT_CHAR_CFG_UUID
 ), 
HI_UINT16
( GATT_CLIENT_CHAR_CFG_UUID )

131 
CONST
 
uöt8
 
	g£rvCh¨CfgUUID
[
ATT_BT_UUID_SIZE
] =

133 
LO_UINT16
–
GATT_SERV_CHAR_CFG_UUID
 ), 
HI_UINT16
( GATT_SERV_CHAR_CFG_UUID )

137 
CONST
 
uöt8
 
	gch¨F‹m©UUID
[
ATT_BT_UUID_SIZE
] =

139 
LO_UINT16
–
GATT_CHAR_FORMAT_UUID
 ), 
HI_UINT16
( GATT_CHAR_FORMAT_UUID )

143 
CONST
 
uöt8
 
	gch¨AggF‹m©UUID
[
ATT_BT_UUID_SIZE
] =

145 
LO_UINT16
–
GATT_CHAR_AGG_FORMAT_UUID
 ), 
HI_UINT16
( GATT_CHAR_AGG_FORMAT_UUID )

152 
CONST
 
uöt8
 
	gdevi˚NameUUID
[
ATT_BT_UUID_SIZE
] =

154 
LO_UINT16
–
DEVICE_NAME_UUID
 ), 
HI_UINT16
( DEVICE_NAME_UUID )

158 
CONST
 
uöt8
 
	g≠≥¨™˚UUID
[
ATT_BT_UUID_SIZE
] =

160 
LO_UINT16
–
APPEARANCE_UUID
 ), 
HI_UINT16
( APPEARANCE_UUID )

164 
CONST
 
uöt8
 
	g≥riPrivacyFœgUUID
[
ATT_BT_UUID_SIZE
] =

166 
LO_UINT16
–
PERI_PRIVACY_FLAG_UUID
 ), 
HI_UINT16
( PERI_PRIVACY_FLAG_UUID )

170 
CONST
 
uöt8
 
	gªc⁄√˘AddrUUID
[
ATT_BT_UUID_SIZE
] =

172 
LO_UINT16
–
RECONNECT_ADDR_UUID
 ), 
HI_UINT16
( RECONNECT_ADDR_UUID )

176 
CONST
 
uöt8
 
	g≥riC⁄nP¨amUUID
[
ATT_BT_UUID_SIZE
] =

178 
LO_UINT16
–
PERI_CONN_PARAM_UUID
 ), 
HI_UINT16
( PERI_CONN_PARAM_UUID )

182 
CONST
 
uöt8
 
	g£rvi˚Ch™gedUUID
[
ATT_BT_UUID_SIZE
] =

184 
LO_UINT16
–
SERVICE_CHANGED_UUID
 ), 
HI_UINT16
( SERVICE_CHANGED_UUID )

188 
CONST
 
uöt8
 
	gvÆidR™geUUID
[
ATT_BT_UUID_SIZE
] =

190 
LO_UINT16
–
GATT_VALID_RANGE_UUID
 ), 
HI_UINT16
( GATT_VALID_RANGE_UUID )

194 
CONST
 
uöt8
 
	gextRï‹tRefUUID
[
ATT_BT_UUID_SIZE
] =

196 
LO_UINT16
–
GATT_EXT_REPORT_REF_UUID
 ), 
HI_UINT16
( GATT_EXT_REPORT_REF_UUID )

200 
CONST
 
uöt8
 
	gªp‹tRefUUID
[
ATT_BT_UUID_SIZE
] =

202 
LO_UINT16
–
GATT_REPORT_REF_UUID
 ), 
HI_UINT16
( GATT_REPORT_REF_UUID )

231 c⁄° 
uöt8
 *
	$GATT_FödUUIDRec
–c⁄° 
uöt8
 *
pUUID
, uöt8 
Àn
 )

233 c⁄° 
uöt8
 *
pRec
 = 
NULL
;

235 i‡–
Àn
 =
ATT_BT_UUID_SIZE
 )

238 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pUUID
[0],ÖUUID[1] );

239  
uuid
 )

243 
GAP_SERVICE_UUID
:

244 
pRec
 = 
g≠Sîvi˚UUID
;

247 
GATT_SERVICE_UUID
:

248 
pRec
 = 
g©tSîvi˚UUID
;

253 
GATT_PRIMARY_SERVICE_UUID
:

254 
pRec
 = 
¥im¨ySîvi˚UUID
;

257 
GATT_SECONDARY_SERVICE_UUID
:

258 
pRec
 = 
£c⁄d¨ySîvi˚UUID
;

261 
GATT_INCLUDE_UUID
:

262 
pRec
 = 
ö˛udeUUID
;

265 
GATT_CHARACTER_UUID
:

266 
pRec
 = 
ch¨a˘îUUID
;

271 
GATT_CHAR_EXT_PROPS_UUID
:

272 
pRec
 = 
ch¨ExtPr›sUUID
;

275 
GATT_CHAR_USER_DESC_UUID
:

276 
pRec
 = 
ch¨U£rDescUUID
;

279 
GATT_CLIENT_CHAR_CFG_UUID
:

280 
pRec
 = 
˛õ¡Ch¨CfgUUID
;

283 
GATT_SERV_CHAR_CFG_UUID
:

284 
pRec
 = 
£rvCh¨CfgUUID
;

287 
GATT_CHAR_FORMAT_UUID
:

288 
pRec
 = 
ch¨F‹m©UUID
;

291 
GATT_CHAR_AGG_FORMAT_UUID
:

292 
pRec
 = 
ch¨AggF‹m©UUID
;

295 
GATT_VALID_RANGE_UUID
:

296 
pRec
 = 
vÆidR™geUUID
;

299 
GATT_EXT_REPORT_REF_UUID
:

300 
pRec
 = 
extRï‹tRefUUID
;

303 
GATT_REPORT_REF_UUID
:

304 
pRec
 = 
ªp‹tRefUUID
;

309 
DEVICE_NAME_UUID
:

310 
pRec
 = 
devi˚NameUUID
;

313 
APPEARANCE_UUID
:

314 
pRec
 = 
≠≥¨™˚UUID
;

317 
RECONNECT_ADDR_UUID
:

318 
pRec
 = 
ªc⁄√˘AddrUUID
;

321 
PERI_PRIVACY_FLAG_UUID
:

322 
pRec
 = 
≥riPrivacyFœgUUID
;

325 
PERI_CONN_PARAM_UUID
:

326 
pRec
 = 
≥riC⁄nP¨amUUID
;

329 
SERVICE_CHANGED_UUID
:

330 
pRec
 = 
£rvi˚Ch™gedUUID
;

339 i‡–
Àn
 =
ATT_UUID_SIZE
 )

344  ( 
pRec
 );

345 
	}
}

	@../../../../Components/ble/host/linkdb.h

39 #i‚de‡
LINKDB_H


40 
	#LINKDB_H


	)

42 #ifde‡
__˝lu•lus


60 
	#INVALID_CONNHANDLE
 0xFFFF

61 
	#LOOPBACK_CONNHANDLE
 0xFFFE

62 

	)

64 
	#LINK_NOT_CONNECTED
 0x00

65 
	#LINK_CONNECTED
 0x01

66 
	#LINK_AUTHENTICATED
 0x02

67 
	#LINK_BOUND
 0x04

68 
	#LINK_ENCRYPTED
 0x10

69 

	)

71 
	#LINKDB_STATUS_UPDATE_NEW
 0

72 
	#LINKDB_STATUS_UPDATE_REMOVED
 1

73 
	#LINKDB_STATUS_UPDATE_STATEFLAGS
 2

74 

	)

76 
	#LINKDB_ERR_INSUFFICIENT_AUTHEN
 0x05

77 
	#LINBDB_ERR_INSUFFICIENT_KEYSIZE
 0x0c

78 
	#LINKDB_ERR_INSUFFICIENT_ENCRYPTION
 0x0f

79 

	)

86 
uöt8
 
§k
[
KEYLEN
];

87 
uöt32
 
signCou¡î
;

88 } 
	tlökSec_t
;

92 
uöt8
 
…k
[
KEYLEN
];

93 
uöt16
 
div
;

94 
uöt8
 
ønd
[
B_RANDOM_NUM_SIZE
];

95 
uöt8
 
keySize
;

96 } 
	tícP¨ams_t
;

100 
uöt8
 
èskID
;

101 
uöt16
 
c⁄√˘i⁄H™dÀ
;

102 
uöt8
 
°©eFœgs
;

103 
uöt8
 
addrTy≥
;

104 
uöt8
 
addr
[
B_ADDR_LEN
];

105 
uöt16
 
c⁄nI¡îvÆ
;

106 
lökSec_t
 
£c
;

107 
ícP¨ams_t
 *
pEncP¨ams
;

108 } 
	tlökDBIãm_t
;

111 (*
p‚LökDBCB_t
)–
	tuöt16
 
	tc⁄√˘i⁄H™dÀ
, 
	tuöt8
 
	tch™geTy≥
 );

114 (*
p‚Pîf‹mFuncCB_t
)–
	tlökDBIãm_t
 *
	tpLökIãm
 );

126 
lökDB_Inô
( );

132 
uöt8
 
lökDB_Regi°î
–
p‚LökDBCB_t
 
pFunc
 );

137 
uöt8
 
lökDB_Add
–uöt8 
èskID
, 
uöt16
 
c⁄√˘i⁄H™dÀ
, uöt8 
°©eFœgs
,

138 
uöt8
 
addrTy≥
, uöt8 *
pAddr
, 
uöt16
 
c⁄nI¡îvÆ
 );

143 
uöt8
 
lökDB_Remove
–
uöt16
 
c⁄√˘i⁄H™dÀ
 );

149 
uöt8
 
lökDB_Upd©e
–
uöt16
 
c⁄√˘i⁄H™dÀ
, uöt8 
√wSèã
 );

154 
uöt8
 
lökDB_NumA˘ive
( );

161 
lökDBIãm_t
 *
lökDB_Föd
–
uöt16
 
c⁄√˘i⁄H™dÀ
 );

168 
lökDBIãm_t
 *
lökDB_FödFú°
–
uöt8
 
èskID
 );

175 
uöt8
 
lökDB_Sèã
–
uöt16
 
c⁄√˘i⁄H™dÀ
, uöt8 
°©e
 );

185 
uöt8
 
lökDB_Authí
–
uöt16
 
c⁄√˘i⁄H™dÀ
, uöt8 
keySize
, uöt8 
mômRequúed
 );

190 
lökDB_Pîf‹mFunc
–
p‚Pîf‹mFuncCB_t
 
cb
 );

198 
	#lökDB_Up
–
c⁄√˘i⁄H™dÀ
 ) 
	`lökDB_Sèã
–(c⁄√˘i⁄H™dÀ), 
LINK_CONNECTED
 )

	)

206 
	#lökDB_En¸y±ed
–
c⁄√˘i⁄H™dÀ
 ) 
	`lökDB_Sèã
–(c⁄√˘i⁄H™dÀ), 
LINK_ENCRYPTED
 )

	)

214 
	#lökDB_Authítiˇãd
–
c⁄√˘i⁄H™dÀ
 ) 
	`lökDB_Sèã
–(c⁄√˘i⁄H™dÀ), 
LINK_AUTHENTICATED
 )

	)

222 
	#lökDB_B⁄ded
–
c⁄√˘i⁄H™dÀ
 ) 
	`lökDB_Sèã
–(c⁄√˘i⁄H™dÀ), 
LINK_BOUND
 )

	)

227 #ifde‡
__˝lu•lus


	@../../../../Components/ble/include/att.h

44 #i‚de‡
ATT_H


45 
	#ATT_H


	)

47 #ifde‡
__˝lu•lus


55 
	~"bcomdef.h
"

56 
	~"OSAL.h
"

58 
	~"l2ˇp.h
"

68 
	#ATT_MTU_SIZE
 
L2CAP_MTU_SIZE


69 
	#ATT_MAX_MTU_SIZE
 517

70 

	)

75 
	#ATT_ERROR_RSP
 0x01

76 
	#ATT_EXCHANGE_MTU_REQ
 0x02

77 
	#ATT_EXCHANGE_MTU_RSP
 0x03

78 
	#ATT_FIND_INFO_REQ
 0x04

79 
	#ATT_FIND_INFO_RSP
 0x05

80 
	#ATT_FIND_BY_TYPE_VALUE_REQ
 0x06

81 
	#ATT_FIND_BY_TYPE_VALUE_RSP
 0x07

82 
	#ATT_READ_BY_TYPE_REQ
 0x08

83 
	#ATT_READ_BY_TYPE_RSP
 0x09

84 
	#ATT_READ_REQ
 0x0a

85 
	#ATT_READ_RSP
 0x0b

86 
	#ATT_READ_BLOB_REQ
 0x0c

87 
	#ATT_READ_BLOB_RSP
 0x0d

88 
	#ATT_READ_MULTI_REQ
 0x0e

89 
	#ATT_READ_MULTI_RSP
 0x0f

90 
	#ATT_READ_BY_GRP_TYPE_REQ
 0x10

91 
	#ATT_READ_BY_GRP_TYPE_RSP
 0x11

92 
	#ATT_WRITE_REQ
 0x12

93 
	#ATT_WRITE_RSP
 0x13

94 
	#ATT_PREPARE_WRITE_REQ
 0x16

95 
	#ATT_PREPARE_WRITE_RSP
 0x17

96 
	#ATT_EXECUTE_WRITE_REQ
 0x18

97 
	#ATT_EXECUTE_WRITE_RSP
 0x19

98 
	#ATT_HANDLE_VALUE_NOTI
 0x1b

99 
	#ATT_HANDLE_VALUE_IND
 0x1d

100 
	#ATT_HANDLE_VALUE_CFM
 0x1e

101 

	)

102 
	#ATT_WRITE_CMD
 0x52

103 
	#ATT_SIGNED_WRITE_CMD
 0xD2

104 

	)

109 
	#ATT_METHOD_BITS
 0x3f

	)

112 
	#ATT_CMD_FLAG_BIT
 0x40

	)

115 
	#ATT_AUTHEN_SIG_FLAG_BIT
 0x80

	)

118 
	#ATT_BT_UUID_SIZE
 2

	)

121 
	#ATT_UUID_SIZE
 16

	)

124 
	#ATT_MSG_TIMEOUT
 30

	)

127 
	#ATT_SIG_NOT_INCLUDED
 0x00

128 
	#ATT_SIG_VALID
 0x01

129 
	#ATT_SIG_INVALID
 0x02

130 

	)

139 
	#ATT_ERR_INVALID_HANDLE
 0x01

140 
	#ATT_ERR_READ_NOT_PERMITTED
 0x02

141 
	#ATT_ERR_WRITE_NOT_PERMITTED
 0x03

142 
	#ATT_ERR_INVALID_PDU
 0x04

143 
	#ATT_ERR_INSUFFICIENT_AUTHEN
 0x05

144 
	#ATT_ERR_UNSUPPORTED_REQ
 0x06

145 
	#ATT_ERR_INVALID_OFFSET
 0x07

146 
	#ATT_ERR_INSUFFICIENT_AUTHOR
 0x08

147 
	#ATT_ERR_PREPARE_QUEUE_FULL
 0x09

148 
	#ATT_ERR_ATTR_NOT_FOUND
 0x0a

149 
	#ATT_ERR_ATTR_NOT_LONG
 0x0b

150 
	#ATT_ERR_INSUFFICIENT_KEY_SIZE
 0x0c

151 
	#ATT_ERR_INVALID_VALUE_SIZE
 0x0d

152 
	#ATT_ERR_UNLIKELY
 0x0e

153 
	#ATT_ERR_INSUFFICIENT_ENCRYPT
 0x0f

154 
	#ATT_ERR_UNSUPPORTED_GRP_TYPE
 0x10

155 
	#ATT_ERR_INSUFFICIENT_RESOURCES
 0x11

156 

	)

161 
	#ATT_ERR_INVALID_VALUE
 0x80

162 

	)

169 
	#ATT_HANDLE_BT_UUID_TYPE
 0x01

	)

172 
	#ATT_HANDLE_UUID_TYPE
 0x02

	)

175 
	#ATT_MAX_NUM_HANDLE_BT_UUID
 ( ( 
ATT_MTU_SIZE
 - 2 ) / ( 2 + 
ATT_BT_UUID_SIZE
 ) )

	)

178 
	#ATT_MAX_NUM_HANDLE_UUID
 ( ( 
ATT_MTU_SIZE
 - 2 ) / ( 2 + 
ATT_UUID_SIZE
 ) )

	)

184 
	#ATT_MAX_NUM_HANDLES_INFO
 ( ( 
ATT_MTU_SIZE
 - 1 ) / 4 )

	)

190 
	#ATT_MAX_NUM_HANDLES
 ( ( 
ATT_MTU_SIZE
 - 1 ) / 2 )

	)

193 
	#ATT_MIN_NUM_HANDLES
 2

	)

199 
	#ATT_CANCEL_PREPARED_WRITES
 0x00

	)

202 
	#ATT_WRITE_PREPARED_VALUES
 0x01

	)

204 #i‡
deföed
 ( 
TESTMODES
 )

206 
	#ATT_TESTMODE_OFF
 0

207 
	#ATT_TESTMODE_UNAUTHEN_SIG
 1

209 

	)

214 
	#READ_BY_TYPE_REQ_FIXED_SIZE
 4

	)

217 
	#PREPARE_WRITE_REQ_FIXED_SIZE
 4

	)

222 
CONST
 
uöt8
 
btBa£UUID
[
ATT_UUID_SIZE
];

237 
uöt8
 
	gsig
;

238 
uöt8
 
	gcmd
;

239 
uöt8
 
	gmëhod
;

240 
uöt16
 
	gÀn
;

241 
uöt8
 *
	gpP¨ams
;

242 } 
	t©tPackë_t
;

249 
uöt8
 
	gÀn
;

250 
uöt8
 
	guuid
[
ATT_UUID_SIZE
];

251 } 
	t©tAârTy≥_t
;

258 
uöt8
 
	gÀn
;

259 
uöt8
 
	guuid
[
ATT_BT_UUID_SIZE
];

260 } 
	t©tAârBtTy≥_t
;

267 
uöt8
 
	gªqOpcode
;

268 
uöt16
 
	gh™dÀ
;

269 
uöt8
 
	gîrCode
;

270 } 
	t©tEº‹R•_t
;

277 
uöt16
 
	g˛õ¡RxMTU
;

278 } 
	t©tExch™geMTUReq_t
;

285 
uöt16
 
	g£rvîRxMTU
;

286 } 
	t©tExch™geMTUR•_t
;

293 
uöt16
 
	g°¨tH™dÀ
;

294 
uöt16
 
	gídH™dÀ
;

295 } 
	t©tFödInfoReq_t
;

302 
uöt16
 
	gh™dÀ
;

303 
uöt8
 
	guuid
[
ATT_BT_UUID_SIZE
];

304 } 
	t©tH™dÀBtUUID_t
;

311 
uöt16
 
	gh™dÀ
;

312 
uöt8
 
	guuid
[
ATT_UUID_SIZE
];

313 } 
	t©tH™dÀUUID_t
;

320 
©tH™dÀBtUUID_t
 
	gbtPaú
[
ATT_MAX_NUM_HANDLE_BT_UUID
];

321 
©tH™dÀUUID_t
 
	g∑ú
[
ATT_MAX_NUM_HANDLE_UUID
];

322 } 
	t©tFödInfo_t
;

329 
uöt8
 
	gnumInfo
;

330 
uöt8
 
	gf‹m©
;

331 
©tFödInfo_t
 
	göfo
;

332 } 
	t©tFödInfoR•_t
;

339 
uöt16
 
	g°¨tH™dÀ
;

340 
uöt16
 
	gídH™dÀ
;

341 
©tAârBtTy≥_t
 
	gty≥
;

342 
uöt8
 
	gÀn
;

343 
uöt8
 
	gvÆue
[
ATT_MTU_SIZE
-7];

344 } 
	t©tFödByTy≥VÆueReq_t
;

351 
uöt16
 
	gh™dÀ
;

352 
uöt16
 
	ggΩEndH™dÀ
;

353 } 
	t©tH™dÀsInfo_t
;

360 
uöt8
 
	gnumInfo
;

361 
©tH™dÀsInfo_t
 
	gh™dÀsInfo
[
ATT_MAX_NUM_HANDLES_INFO
];

362 } 
	t©tFödByTy≥VÆueR•_t
;

369 
uöt16
 
	g°¨tH™dÀ
;

370 
uöt16
 
	gídH™dÀ
;

371 
©tAârTy≥_t
 
	gty≥
;

372 } 
	t©tRódByTy≥Req_t
;

379 
uöt8
 
	gnumPaús
;

380 
uöt8
 
	gÀn
;

381 
uöt8
 
	gd©aLi°
[
ATT_MTU_SIZE
-2];

382 } 
	t©tRódByTy≥R•_t
;

389 
uöt16
 
	gh™dÀ
;

390 } 
	t©tRódReq_t
;

397 
uöt8
 
	gÀn
;

398 
uöt8
 
	gvÆue
[
ATT_MTU_SIZE
-1];

399 } 
	t©tRódR•_t
;

406 
uöt16
 
	gh™dÀ
;

407 
uöt16
 
	goff£t
;

408 } 
	t©tRódBlobReq_t
;

415 
uöt8
 
	gÀn
;

416 
uöt8
 
	gvÆue
[
ATT_MTU_SIZE
-1];

417 } 
	t©tRódBlobR•_t
;

424 
uöt16
 
	gh™dÀ
[
ATT_MAX_NUM_HANDLES
];

425 
uöt8
 
	gnumH™dÀs
;

426 } 
	t©tRódMu…iReq_t
;

433 
uöt8
 
	gÀn
;

434 
uöt8
 
	gvÆues
[
ATT_MTU_SIZE
-1];

435 } 
	t©tRódMu…iR•_t
;

442 
uöt16
 
	g°¨tH™dÀ
;

443 
uöt16
 
	gídH™dÀ
;

444 
©tAârTy≥_t
 
	gty≥
;

445 } 
	t©tRódByGΩTy≥Req_t
;

452 
uöt8
 
	gnumGΩs
;

453 
uöt8
 
	gÀn
;

454 
uöt8
 
	gd©aLi°
[
ATT_MTU_SIZE
-2];

455 } 
	t©tRódByGΩTy≥R•_t
;

462 
uöt16
 
	gh™dÀ
;

463 
uöt8
 
	gÀn
;

464 
uöt8
 
	gvÆue
[
ATT_MTU_SIZE
-3];

465 
uöt8
 
	gsig
;

466 
uöt8
 
	gcmd
;

467 } 
	t©tWrôeReq_t
;

474 
uöt16
 
	gh™dÀ
;

475 
uöt16
 
	goff£t
;

476 
uöt8
 
	gÀn
;

477 
uöt8
 
	gvÆue
[
ATT_MTU_SIZE
-5];

478 } 
	t©tPª∑ªWrôeReq_t
;

485 
uöt16
 
	gh™dÀ
;

486 
uöt16
 
	goff£t
;

487 
uöt8
 
	gÀn
;

488 
uöt8
 
	gvÆue
[
ATT_MTU_SIZE
-5];

489 } 
	t©tPª∑ªWrôeR•_t
;

496 
uöt8
 
	gÊags
;

498 } 
	t©tExecuãWrôeReq_t
;

505 
uöt16
 
	gh™dÀ
;

506 
uöt8
 
	gÀn
;

507 
uöt8
 
	gvÆue
[
ATT_MTU_SIZE
-3];

508 } 
	t©tH™dÀVÆueNŸi_t
;

515 
uöt16
 
	gh™dÀ
;

516 
uöt8
 
	gÀn
;

517 
uöt8
 
	gvÆue
[
ATT_MTU_SIZE
-3];

518 } 
	t©tH™dÀVÆueInd_t
;

527 
©tExch™geMTUReq_t
 
	gexch™geMTUReq
;

528 
©tFödInfoReq_t
 
	gfödInfoReq
;

529 
©tFödByTy≥VÆueReq_t
 
	gfödByTy≥VÆueReq
;

530 
©tRódByTy≥Req_t
 
	gªadByTy≥Req
;

531 
©tRódReq_t
 
	gªadReq
;

532 
©tRódBlobReq_t
 
	gªadBlobReq
;

533 
©tRódMu…iReq_t
 
	gªadMu…iReq
;

534 
©tRódByGΩTy≥Req_t
 
	gªadByGΩTy≥Req
;

535 
©tWrôeReq_t
 
	gwrôeReq
;

536 
©tPª∑ªWrôeReq_t
 
	g¥ï¨eWrôeReq
;

537 
©tExecuãWrôeReq_t
 
	gexecuãWrôeReq
;

540 
©tEº‹R•_t
 
	gîr‹R•
;

541 
©tExch™geMTUR•_t
 
	gexch™geMTUR•
;

542 
©tFödInfoR•_t
 
	gfödInfoR•
;

543 
©tFödByTy≥VÆueR•_t
 
	gfödByTy≥VÆueR•
;

544 
©tRódByTy≥R•_t
 
	gªadByTy≥R•
;

545 
©tRódR•_t
 
	gªadR•
;

546 
©tRódBlobR•_t
 
	gªadBlobR•
;

547 
©tRódMu…iR•_t
 
	gªadMu…iR•
;

548 
©tRódByGΩTy≥R•_t
 
	gªadByGΩTy≥R•
;

549 
©tPª∑ªWrôeR•_t
 
	g¥ï¨eWrôeR•
;

552 
©tH™dÀVÆueNŸi_t
 
	gh™dÀVÆueNŸi
;

553 
©tH™dÀVÆueInd_t
 
	gh™dÀVÆueInd
;

554 } 
	t©tMsg_t
;

571 
uöt8
 
ATT_P¨£Packë
–
l2ˇpD©aEvít_t
 *
pL2ˇpMsg
, 
©tPackë_t
 *
pPkt
 );

576 
uöt8
 
ATT_Com∑ªUUID
–c⁄° uöt8 *
pUUID1
, 
uöt16
 
Àn1
,

577 c⁄° 
uöt8
 *
pUUID2
, 
uöt16
 
Àn2
 );

581 
uöt8
 
ATT_C⁄vîtUUIDto128
–c⁄° uöt8 *
pUUID16
, uöt8 *
pUUID128
 );

586 
uöt8
 
ATT_C⁄vîtUUIDto16
–c⁄° uöt8 *
pUUID128
, uöt8 *
pUUID16
 );

596 
uöt16
 
ATT_BuûdEº‹R•
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

601 
bSètus_t
 
ATT_P¨£Eº‹R•
–
uöt8
 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

606 
uöt16
 
ATT_BuûdExch™geMTUReq
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

611 
uöt16
 
ATT_BuûdExch™geMTUR•
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

616 
bSètus_t
 
ATT_P¨£Exch™geMTUR•
–
uöt8
 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

621 
uöt16
 
ATT_BuûdFödInfoReq
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

626 
bSètus_t
 
ATT_P¨£FödInfoR•
–
uöt8
 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

631 
uöt16
 
ATT_BuûdFödInfoR•
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

636 
uöt16
 
ATT_BuûdFödByTy≥VÆueReq
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

641 
uöt16
 
ATT_BuûdFödByTy≥VÆueR•
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

646 
bSètus_t
 
ATT_P¨£FödByTy≥VÆueR•
–
uöt8
 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

651 
uöt16
 
ATT_BuûdRódByTy≥Req
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

656 
uöt16
 
ATT_BuûdRódByTy≥R•
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

661 
bSètus_t
 
ATT_P¨£RódByTy≥R•
–
uöt8
 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

666 
uöt16
 
ATT_BuûdRódReq
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

671 
uöt16
 
ATT_BuûdRódR•
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

676 
bSètus_t
 
ATT_P¨£RódR•
–
uöt8
 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

681 
uöt16
 
ATT_BuûdRódBlobReq
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

686 
uöt16
 
ATT_BuûdRódBlobR•
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

691 
bSètus_t
 
ATT_P¨£RódBlobR•
–
uöt8
 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

696 
uöt16
 
ATT_BuûdRódMu…iReq
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

701 
uöt16
 
ATT_BuûdRódMu…iR•
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

706 
bSètus_t
 
ATT_P¨£RódMu…iR•
–
uöt8
 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

711 
uöt16
 
ATT_BuûdRódByGΩTy≥R•
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

716 
bSètus_t
 
ATT_P¨£RódByGΩTy≥R•
–
uöt8
 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

721 
uöt16
 
ATT_BuûdWrôeReq
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

726 
bSètus_t
 
ATT_P¨£WrôeR•
–
uöt8
 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

731 
uöt16
 
ATT_BuûdPª∑ªWrôeReq
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

736 
uöt16
 
ATT_BuûdPª∑ªWrôeR•
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

741 
bSètus_t
 
ATT_P¨£Pª∑ªWrôeR•
–
uöt8
 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

746 
uöt16
 
ATT_BuûdExecuãWrôeReq
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

751 
bSètus_t
 
ATT_P¨£ExecuãWrôeR•
–
uöt8
 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

756 
uöt16
 
ATT_BuûdH™dÀVÆueInd
–
uöt8
 *
pBuf
, uöt8 *
pMsg
 );

761 
bSètus_t
 
ATT_P¨£H™dÀVÆueInd
–
uöt8
 
sig
, uöt8 
cmd
, uöt8 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

771 
bSètus_t
 
ATT_P¨£Exch™geMTUReq
–
uöt8
 
sig
, uöt8 
cmd
, uöt8 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

776 
bSètus_t
 
ATT_P¨£FödInfoReq
–
uöt8
 
sig
, uöt8 
cmd
, uöt8 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

781 
bSètus_t
 
ATT_P¨£FödByTy≥VÆueReq
–
uöt8
 
sig
, uöt8 
cmd
, uöt8 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

786 
bSètus_t
 
ATT_P¨£RódByTy≥Req
–
uöt8
 
sig
, uöt8 
cmd
, uöt8 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

791 
bSètus_t
 
ATT_P¨£RódReq
–
uöt8
 
sig
, uöt8 
cmd
, uöt8 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

796 
bSètus_t
 
ATT_P¨£RódBlobReq
–
uöt8
 
sig
, uöt8 
cmd
, uöt8 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

801 
bSètus_t
 
ATT_P¨£RódMu…iReq
–
uöt8
 
sig
, uöt8 
cmd
, uöt8 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

806 
bSètus_t
 
ATT_P¨£WrôeReq
–
uöt8
 
sig
, uöt8 
cmd
, uöt8 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

811 
bSètus_t
 
ATT_P¨£ExecuãWrôeReq
–
uöt8
 
sig
, uöt8 
cmd
, uöt8 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

816 
bSètus_t
 
ATT_P¨£Pª∑ªWrôeReq
–
uöt8
 
sig
, uöt8 
cmd
, uöt8 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

821 
bSètus_t
 
ATT_P¨£H™dÀVÆueCfm
–
uöt8
 *
pP¨ams
, 
uöt16
 
Àn
, 
©tMsg_t
 *
pMsg
 );

846 
bSètus_t
 
ATT_Exch™geMTUReq
–
uöt16
 
c⁄nH™dÀ
, 
©tExch™geMTUReq_t
 *
pReq
 );

860 
bSètus_t
 
ATT_FödInfoReq
–
uöt16
 
c⁄nH™dÀ
, 
©tFödInfoReq_t
 *
pReq
 );

874 
bSètus_t
 
ATT_FödByTy≥VÆueReq
–
uöt16
 
c⁄nH™dÀ
, 
©tFödByTy≥VÆueReq_t
 *
pReq
 );

888 
bSètus_t
 
ATT_RódByTy≥Req
–
uöt16
 
c⁄nH™dÀ
, 
©tRódByTy≥Req_t
 *
pReq
 );

902 
bSètus_t
 
ATT_RódReq
–
uöt16
 
c⁄nH™dÀ
, 
©tRódReq_t
 *
pReq
 );

916 
bSètus_t
 
ATT_RódBlobReq
–
uöt16
 
c⁄nH™dÀ
, 
©tRódBlobReq_t
 *
pReq
 );

930 
bSètus_t
 
ATT_RódMu…iReq
–
uöt16
 
c⁄nH™dÀ
, 
©tRódMu…iReq_t
 *
pReq
 );

944 
bSètus_t
 
ATT_RódByGΩTy≥Req
–
uöt16
 
c⁄nH™dÀ
, 
©tRódByGΩTy≥Req_t
 *
pReq
 );

959 
bSètus_t
 
ATT_WrôeReq
–
uöt16
 
c⁄nH™dÀ
, 
©tWrôeReq_t
 *
pReq
 );

973 
bSètus_t
 
ATT_Pª∑ªWrôeReq
–
uöt16
 
c⁄nH™dÀ
, 
©tPª∑ªWrôeReq_t
 *
pReq
 );

987 
bSètus_t
 
ATT_ExecuãWrôeReq
–
uöt16
 
c⁄nH™dÀ
, 
©tExecuãWrôeReq_t
 *
pReq
 );

1000 
bSètus_t
 
ATT_H™dÀVÆueCfm
–
uöt16
 
c⁄nH™dÀ
 );

1028 
bSètus_t
 
ATT_Eº‹R•
–
uöt16
 
c⁄nH™dÀ
, 
©tEº‹R•_t
 *
pR•
 );

1042 
bSètus_t
 
ATT_Exch™geMTUR•
–
uöt16
 
c⁄nH™dÀ
, 
©tExch™geMTUR•_t
 *
pR•
 );

1056 
bSètus_t
 
ATT_FödInfoR•
–
uöt16
 
c⁄nH™dÀ
, 
©tFödInfoR•_t
 *
pR•
 );

1070 
bSètus_t
 
ATT_FödByTy≥VÆueR•
–
uöt16
 
c⁄nH™dÀ
, 
©tFödByTy≥VÆueR•_t
 *
pR•
 );

1084 
bSètus_t
 
ATT_RódByTy≥R•
–
uöt16
 
c⁄nH™dÀ
, 
©tRódByTy≥R•_t
 *
pR•
 );

1098 
bSètus_t
 
ATT_RódR•
–
uöt16
 
c⁄nH™dÀ
, 
©tRódR•_t
 *
pR•
 );

1112 
bSètus_t
 
ATT_RódBlobR•
–
uöt16
 
c⁄nH™dÀ
, 
©tRódBlobR•_t
 *
pR•
 );

1126 
bSètus_t
 
ATT_RódMu…iR•
–
uöt16
 
c⁄nH™dÀ
, 
©tRódMu…iR•_t
 *
pR•
 ) ;

1140 
bSètus_t
 
ATT_RódByGΩTy≥R•
–
uöt16
 
c⁄nH™dÀ
, 
©tRódByGΩTy≥R•_t
 *
pR•
 );

1153 
bSètus_t
 
ATT_WrôeR•
–
uöt16
 
c⁄nH™dÀ
 );

1167 
bSètus_t
 
ATT_Pª∑ªWrôeR•
–
uöt16
 
c⁄nH™dÀ
, 
©tPª∑ªWrôeR•_t
 *
pR•
 );

1180 
bSètus_t
 
ATT_ExecuãWrôeR•
–
uöt16
 
c⁄nH™dÀ
 );

1194 
bSètus_t
 
ATT_H™dÀVÆueNŸi
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueNŸi_t
 *
pNŸi
 );

1208 
bSètus_t
 
ATT_H™dÀVÆueInd
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueInd_t
 *
pInd
 );

1222 
ATT_SëP¨amVÆue
–
uöt16
 
vÆue
 );

1231 
uöt16
 
ATT_GëP¨amVÆue
( );

1237 #ifde‡
__˝lu•lus


	@../../../../Components/ble/include/bcomdef.h

43 #i‚de‡
BCOMDEF_H


44 
	#BCOMDEF_H


	)

46 #ifde‡
__˝lu•lus


56 
	~"comdef.h
"

62 #i‡
deföed
 ( 
HOST_CONFIG
 )

64 #i‡–
HOST_CONFIG
 =–
CENTRAL_CFG
 | 
PERIPHERAL_CFG
 ) )

65 
	#CTRL_CONFIG
 ( 
ADV_NCONN_CFG
 | 
ADV_CONN_CFG
 | 
SCAN_CFG
 | 
INIT_CFG
 )

	)

66 #ñi‡–
HOST_CONFIG
 =–
CENTRAL_CFG
 | 
BROADCASTER_CFG
 ) )

67 
	#CTRL_CONFIG
 ( 
ADV_NCONN_CFG
 | 
SCAN_CFG
 | 
INIT_CFG
 )

	)

68 #ñi‡–
HOST_CONFIG
 =–
PERIPHERAL_CFG
 | 
OBSERVER_CFG
 ) )

69 
	#CTRL_CONFIG
 ( 
ADV_NCONN_CFG
 | 
ADV_CONN_CFG
 | 
SCAN_CFG
 )

	)

70 #ñi‡–
HOST_CONFIG
 =–
BROADCASTER_CFG
 | 
OBSERVER_CFG
 ) )

71 
	#CTRL_CONFIG
 ( 
ADV_NCONN_CFG
 | 
SCAN_CFG
 )

	)

72 #ñi‡–
HOST_CONFIG
 =
CENTRAL_CFG
 )

73 
	#CTRL_CONFIG
 ( 
SCAN_CFG
 | 
INIT_CFG
 )

	)

74 #ñi‡–
HOST_CONFIG
 =
PERIPHERAL_CFG
 )

75 
	#CTRL_CONFIG
 ( 
ADV_NCONN_CFG
 | 
ADV_CONN_CFG
 )

	)

76 #ñi‡–
HOST_CONFIG
 =
OBSERVER_CFG
 )

77 
	#CTRL_CONFIG
 
SCAN_CFG


	)

78 #ñi‡–
HOST_CONFIG
 =
BROADCASTER_CFG
 )

79 
	#CTRL_CONFIG
 
ADV_NCONN_CFG


	)

85 #i‡!
deföed
–
CTRL_CONFIG
 ) || !–CTRL_CONFIG & ( 
ADV_NCONN_CFG
 | \

86 
ADV_CONN_CFG
 | \

87 
SCAN_CFG
 | \

88 
INIT_CFG
 ) )

93 #i‡!
deföed
 ( 
MAX_NUM_LL_CONN
 )

94 #i‡–
CTRL_CONFIG
 & 
INIT_CFG
 )

95 
	#MAX_NUM_LL_CONN
 3

	)

96 #ñi‡–!–
CTRL_CONFIG
 & 
INIT_CFG
 ) && ( CTRL_CONFIG & 
ADV_CONN_CFG
 ) )

97 
	#MAX_NUM_LL_CONN
 1

	)

99 
	#MAX_NUM_LL_CONN
 0

	)

107 
	#B_ADDR_LEN
 6

	)

110 
	#KEYLEN
 16

	)

113 
	#B_CHANNEL_MAP_LEN
 5

	)

116 
	#B_EVENT_MASK_LEN
 8

	)

119 
	#B_LOCAL_NAME_LEN
 248

	)

122 
	#B_MAX_ADV_LEN
 31

	)

125 
	#B_RANDOM_NUM_SIZE
 8

	)

128 
	#B_FEATURE_SUPPORT_LENGTH
 8

	)

134 
	#bÀInvÆidTaskID
 
INVALID_TASK


135 
	#bÀNŸRódy
 0x10

136 
	#bÀAÃódyInReque°edMode
 0x11

137 
	#bÀInc‹ª˘Mode
 0x12

138 
	#bÀMemAŒocEº‹
 0x13

139 
	#bÀNŸC⁄√˘ed
 0x14

140 
	#bÀNoResour˚s
 0x15

141 
	#bÀPídög
 0x16

142 
	#bÀTimeout
 0x17

143 
	#bÀInvÆidR™ge
 0x18

144 
	#bÀLökEn¸y±ed
 0x19

145 
	#bÀPro˚duªCom∂ëe
 0x1A

146 

	)

148 
	#bÀGAPU£rC™˚Àd
 0x30

149 
	#bÀGAPC⁄nNŸAc˚±abÀ
 0x31

150 
	#bÀGAPB⁄dReje˘ed
 0x32

151 

	)

153 
	#bÀInvÆidPDU
 0x40

154 
	#bÀInsufficõ¡Authí
 0x41

155 
	#bÀInsufficõ¡En¸y±
 0x42

156 
	#bÀInsufficõ¡KeySize
 0x43

157 

	)

160 
	#INVALID_TASK_ID
 0xFF

161 

	)

167 
	#BLE_NVID_IRK
 0x02

168 
	#BLE_NVID_CSRK
 0x03

169 
	#BLE_NVID_SIGNCOUNTER
 0x04

170 

	)

172 
	#BLE_NVID_GAP_BOND_START
 0x20

173 
	#BLE_NVID_GAP_BOND_END
 0x5f

174 

	)

176 
	#BLE_NVID_GATT_CFG_START
 0x70

177 
	#BLE_NVID_GATT_CFG_END
 0x79

178 

	)

183 
	#GAP_EVENT_SIGN_COUNTER_CHANGED
 0x4000

184 

	)

193 
	#GAP_MSG_EVENT
 0xD0

194 

	)

196 
	#SM_NEW_RAND_KEY_EVENT
 0xC1

197 

	)

199 
	#GATT_MSG_EVENT
 0xB0

200 
	#GATT_SERV_MSG_EVENT
 0xB1

201 

	)

203 
	#L2CAP_DATA_EVENT
 0xA0

204 
	#L2CAP_SIGNAL_EVENT
 0xA2

205 

	)

207 
	#HCI_DATA_EVENT
 0x90

208 
	#HCI_GAP_EVENT_EVENT
 0x91

209 
	#HCI_SMP_EVENT_EVENT
 0x92

210 
	#HCI_EXT_CMD_EVENT
 0x93

211 

	)

218 
Sètus_t
 
	tbSètus_t
;

236 
	#TI_BASE_UUID_128
–
uuid
 ) 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xB0, \

237 0x00, 0x40, 0x51, 0x04, 
	`LO_UINT16
–
uuid
 ), 
	`HI_UINT16
–uuid ), 0x00, 0xF0

	)

250 #ifde‡
__˝lu•lus


	@../../../../Components/ble/include/gap.h

70 #i‚de‡
GAP_H


71 
	#GAP_H


	)

73 #ifde‡
__˝lu•lus


81 
	~"bcomdef.h
"

82 
	~"OSAL.h
"

83 
	~"sm.h
"

100 
	#GAP_DEVICE_INIT_DONE_EVENT
 0x00

101 
	#GAP_DEVICE_DISCOVERY_EVENT
 0x01

102 
	#GAP_ADV_DATA_UPDATE_DONE_EVENT
 0x02

103 
	#GAP_MAKE_DISCOVERABLE_DONE_EVENT
 0x03

104 
	#GAP_END_DISCOVERABLE_DONE_EVENT
 0x04

105 
	#GAP_LINK_ESTABLISHED_EVENT
 0x05

106 
	#GAP_LINK_TERMINATED_EVENT
 0x06

107 
	#GAP_LINK_PARAM_UPDATE_EVENT
 0x07

108 
	#GAP_RANDOM_ADDR_CHANGED_EVENT
 0x08

109 
	#GAP_SIGNATURE_UPDATED_EVENT
 0x09

110 
	#GAP_AUTHENTICATION_COMPLETE_EVENT
 0x0A

111 
	#GAP_PASSKEY_NEEDED_EVENT
 0x0B

112 
	#GAP_SLAVE_REQUESTED_SECURITY_EVENT
 0x0C

113 
	#GAP_DEVICE_INFO_EVENT
 0x0D

114 
	#GAP_BOND_COMPLETE_EVENT
 0x0E

115 
	#GAP_PAIRING_REQ_EVENT
 0x0F

116 

	)

122 
	#GAP_CONNHANDLE_INIT
 0xFFFE

123 
	#GAP_CONNHANDLE_ALL
 0xFFFF

124 

	)

130 
	#GAP_PROFILE_BROADCASTER
 0x01

131 
	#GAP_PROFILE_OBSERVER
 0x02

132 
	#GAP_PROFILE_PERIPHERAL
 0x04

133 
	#GAP_PROFILE_CENTRAL
 0x08

134 

	)

142 
	#TGAP_GEN_DISC_ADV_MIN
 0

143 
	#TGAP_LIM_ADV_TIMEOUT
 1

144 
	#TGAP_GEN_DISC_SCAN
 2

145 
	#TGAP_LIM_DISC_SCAN
 3

146 
	#TGAP_CONN_EST_ADV_TIMEOUT
 4

147 
	#TGAP_CONN_PARAM_TIMEOUT
 5

148 

	)

150 
	#TGAP_LIM_DISC_ADV_INT_MIN
 6

151 
	#TGAP_LIM_DISC_ADV_INT_MAX
 7

152 
	#TGAP_GEN_DISC_ADV_INT_MIN
 8

153 
	#TGAP_GEN_DISC_ADV_INT_MAX
 9

154 
	#TGAP_CONN_ADV_INT_MIN
 10

155 
	#TGAP_CONN_ADV_INT_MAX
 11

156 
	#TGAP_CONN_SCAN_INT
 12

157 
	#TGAP_CONN_SCAN_WIND
 13

158 
	#TGAP_CONN_HIGH_SCAN_INT
 14

159 
	#TGAP_CONN_HIGH_SCAN_WIND
 15

160 
	#TGAP_GEN_DISC_SCAN_INT
 16

161 
	#TGAP_GEN_DISC_SCAN_WIND
 17

162 
	#TGAP_LIM_DISC_SCAN_INT
 18

163 
	#TGAP_LIM_DISC_SCAN_WIND
 19

164 
	#TGAP_CONN_EST_ADV
 20

165 
	#TGAP_CONN_EST_INT_MIN
 21

166 
	#TGAP_CONN_EST_INT_MAX
 22

167 
	#TGAP_CONN_EST_SCAN_INT
 23

168 
	#TGAP_CONN_EST_SCAN_WIND
 24

169 
	#TGAP_CONN_EST_SUPERV_TIMEOUT
 25

170 
	#TGAP_CONN_EST_LATENCY
 26

171 
	#TGAP_CONN_EST_MIN_CE_LEN
 27

172 
	#TGAP_CONN_EST_MAX_CE_LEN
 28

173 
	#TGAP_PRIVATE_ADDR_INT
 29

174 
	#TGAP_CONN_PAUSE_CENTRAL
 30

175 
	#TGAP_CONN_PAUSE_PERIPHERAL
 31

176 

	)

178 
	#TGAP_SM_TIMEOUT
 32

179 
	#TGAP_SM_MIN_KEY_LEN
 33

180 
	#TGAP_SM_MAX_KEY_LEN
 34

181 
	#TGAP_FILTER_ADV_REPORTS
 35

182 
	#TGAP_SCAN_RSP_RSSI_MIN
 36

183 
	#TGAP_REJECT_CONN_PARAMS
 37

184 

	)

185 #i‡!
deföed
 ( 
TESTMODES
 )

186 
	#TGAP_AUTH_TASK_ID
 38

187 
	#TGAP_PARAMID_MAX
 39

188 #ñ£

	)

189 
	#TGAP_GAP_TESTCODE
 38

190 
	#TGAP_SM_TESTCODE
 39

191 
	#TGAP_AUTH_TASK_ID
 40

192 
	#TGAP_PARAMID_MAX
 41

193 

	)

194 
	#TGAP_GATT_TESTCODE
 100

195 
	#TGAP_ATT_TESTCODE
 101

196 
	#TGAP_GGS_TESTCODE
 102

198 

	)

204 
	#DEVDISC_MODE_NONDISCOVERABLE
 0x00

205 
	#DEVDISC_MODE_GENERAL
 0x01

206 
	#DEVDISC_MODE_LIMITED
 0x02

207 
	#DEVDISC_MODE_ALL
 0x03

208 

	)

213 
	#ADDRTYPE_PUBLIC
 0x00

214 
	#ADDRTYPE_STATIC
 0x01

215 
	#ADDRTYPE_PRIVATE_NONRESOLVE
 0x02

216 
	#ADDRTYPE_PRIVATE_RESOLVE
 0x03

217 

	)

223 
	#GAP_ADTYPE_ADV_IND
 0x00

224 
	#GAP_ADTYPE_ADV_HDC_DIRECT_IND
 0x01

225 
	#GAP_ADTYPE_ADV_SCAN_IND
 0x02

226 
	#GAP_ADTYPE_ADV_NONCONN_IND
 0x03

227 
	#GAP_ADTYPE_ADV_LDC_DIRECT_IND
 0x04

228 

	)

234 
	#GAP_ADRPT_ADV_IND
 0x00

235 
	#GAP_ADRPT_ADV_DIRECT_IND
 0x01

236 
	#GAP_ADRPT_ADV_SCAN_IND
 0x02

237 
	#GAP_ADRPT_ADV_NONCONN_IND
 0x03

238 
	#GAP_ADRPT_SCAN_RSP
 0x04

239 

	)

244 
	#GAP_FILTER_POLICY_ALL
 0x00

245 
	#GAP_FILTER_POLICY_WHITE_SCAN
 0x01

246 
	#GAP_FILTER_POLICY_WHITE_CON
 0x02

247 
	#GAP_FILTER_POLICY_WHITE
 0x03

248 

	)

251 
	#ADV_CHANMAP_SIZE
 5

	)

254 
	#GAP_PASSCODE_MAX
 999999

	)

259 
	#GAP_INIT_SIGN_COUNTER
 0xFFFFFFFF

	)

264 
	#GAP_ADVCHAN_37
 0x01

265 
	#GAP_ADVCHAN_38
 0x02

266 
	#GAP_ADVCHAN_39
 0x04

267 
	#GAP_ADVCHAN_ALL
 (
GAP_ADVCHAN_37
 | 
GAP_ADVCHAN_38
 | 
GAP_ADVCHAN_39
)

268 

	)

273 
	#WL_NOTUSED
 0x00

274 
	#WL_USED
 0x01

275 

	)

281 
	#GAP_ADTYPE_FLAGS
 0x01

282 
	#GAP_ADTYPE_16BIT_MORE
 0x02

283 
	#GAP_ADTYPE_16BIT_COMPLETE
 0x03

284 
	#GAP_ADTYPE_32BIT_MORE
 0x04

285 
	#GAP_ADTYPE_32BIT_COMPLETE
 0x05

286 
	#GAP_ADTYPE_128BIT_MORE
 0x06

287 
	#GAP_ADTYPE_128BIT_COMPLETE
 0x07

288 
	#GAP_ADTYPE_LOCAL_NAME_SHORT
 0x08

289 
	#GAP_ADTYPE_LOCAL_NAME_COMPLETE
 0x09

290 
	#GAP_ADTYPE_POWER_LEVEL
 0x0A

291 
	#GAP_ADTYPE_OOB_CLASS_OF_DEVICE
 0x0D

292 
	#GAP_ADTYPE_OOB_SIMPLE_PAIRING_HASHC
 0x0E

293 
	#GAP_ADTYPE_OOB_SIMPLE_PAIRING_RANDR
 0x0F

294 
	#GAP_ADTYPE_SM_TK
 0x10

295 
	#GAP_ADTYPE_SM_OOB_FLAG
 0x11

296 
	#GAP_ADTYPE_SLAVE_CONN_INTERVAL_RANGE
 0x12

297 
	#GAP_ADTYPE_SIGNED_DATA
 0x13

298 
	#GAP_ADTYPE_SERVICES_LIST_16BIT
 0x14

299 
	#GAP_ADTYPE_SERVICES_LIST_128BIT
 0x15

300 
	#GAP_ADTYPE_SERVICE_DATA
 0x16

301 
	#GAP_ADTYPE_APPEARANCE
 0x19

302 
	#GAP_ADTYPE_MANUFACTURER_SPECIFIC
 0xFF

303 

	)

308 
	#GAP_ADTYPE_FLAGS_LIMITED
 0x01

309 
	#GAP_ADTYPE_FLAGS_GENERAL
 0x02

310 
	#GAP_ADTYPE_FLAGS_BREDR_NOT_SUPPORTED
 0x04

311 

	)

316 
	#GAP_APPEARE_UNKNOWN
 0x0000

317 
	#GAP_APPEARE_GENERIC_PHONE
 0x0040

318 
	#GAP_APPEARE_GENERIC_COMPUTER
 0x0080

319 
	#GAP_APPEARE_GENERIC_WATCH
 0x00C0

320 
	#GAP_APPEARE_WATCH_SPORTS
 0x00C1

321 
	#GAP_APPEARE_GENERIC_CLOCK
 0x0100

322 
	#GAP_APPEARE_GENERIC_DISPLAY
 0x0140

323 
	#GAP_APPEARE_GENERIC_RC
 0x0180

324 
	#GAP_APPEARE_GENERIC_EYE_GALSSES
 0x01C0

325 
	#GAP_APPEARE_GENERIC_TAG
 0x0200

326 
	#GAP_APPEARE_GENERIC_KEYRING
 0x0240

327 
	#GAP_APPEARE_GENERIC_MEDIA_PLAYER
 0x0280

328 
	#GAP_APPEARE_GENERIC_BARCODE_SCANNER
 0x02C0

329 
	#GAP_APPEARE_GENERIC_THERMOMETER
 0x0300

330 
	#GAP_APPEARE_GENERIC_THERMO_EAR
 0x0301

331 
	#GAP_APPEARE_GENERIC_HR_SENSOR
 0x0340

332 
	#GAP_APPEARE_GENERIC_HRS_BELT
 0x0341

333 
	#GAP_APPEARE_GENERIC_BLOOD_PRESSURE
 0x0380

334 
	#GAP_APPEARE_GENERIC_BP_ARM
 0x0381

335 
	#GAP_APPEARE_GENERIC_BP_WRIST
 0x0382

336 
	#GAP_APPEARE_GENERIC_HID
 0x03C0

337 
	#GAP_APPEARE_HID_KEYBOARD
 0x03C1

338 
	#GAP_APPEARE_HID_MOUSE
 0x03C2

339 
	#GAP_APPEARE_HID_JOYSTIC
 0x03C3

340 
	#GAP_APPEARE_HID_GAMEPAD
 0x03C4

341 
	#GAP_APPEARE_HID_DIGITIZER_TYABLET
 0x03C5

342 
	#GAP_APPEARE_HID_DIGITAL_CARDREADER
 0x03C6

343 
	#GAP_APPEARE_HID_DIGITAL_PEN
 0x03C7

344 
	#GAP_APPEARE_HID_BARCODE_SCANNER
 0x03C8

345 

	)

354 
uöt16
 
	tg≠P¨amIDs_t
;

361 
oßl_evít_hdr_t
 
hdr
;

362 
uöt8
 
›code
;

363 } 
	tg≠EvítHdr_t
;

371 
oßl_evít_hdr_t
 
hdr
;

372 
uöt8
 
›code
;

373 
uöt8
 
addrTy≥
;

374 
uöt8
 
√wR™domAddr
[
B_ADDR_LEN
];

375 } 
	tg≠R™domAddrEvít_t
;

385 
uöt16
 
öãrvÆMö
;

387 
uöt16
 
öãrvÆMax
;

389 
uöt16
 
œãncy
;

391 
uöt16
 
timeout
;

392 } 
	tg≠PîiC⁄√˘P¨ams_t
;

401 
oßl_evít_hdr_t
 
hdr
;

402 
uöt8
 
›code
;

403 
uöt8
 
devAddr
[
B_ADDR_LEN
];

404 
uöt16
 
d©aPktLí
;

405 
uöt8
 
numD©aPkts
;

406 } 
	tg≠Devi˚InôD⁄eEvít_t
;

418 
oßl_evít_hdr_t
 
hdr
;

419 
uöt8
 
›code
;

420 
uöt8
 
addrTy≥
;

421 
uöt8
 
devAddr
[
B_ADDR_LEN
];

422 
uöt32
 
signCou¡î
;

423 } 
	tg≠SignUpd©eEvít_t
;

432 
oßl_evít_hdr_t
 
hdr
;

433 
uöt8
 
›code
;

434 
uöt8
 
evítTy≥
;

435 
uöt8
 
addrTy≥
;

436 
uöt8
 
addr
[
B_ADDR_LEN
];

437 
öt8
 
rssi
;

438 
uöt8
 
d©aLí
;

439 
uöt8
 *
pEvtD©a
;

440 } 
	tg≠Devi˚InfoEvít_t
;

451 
uöt8
 
èskID
;

452 
uöt8
 
mode
;

453 
uöt8
 
a˘iveSˇn
;

454 
uöt8
 
whôeLi°
;

455 } 
	tg≠DevDiscReq_t
;

462 
uöt8
 
evítTy≥
;

463 
uöt8
 
addrTy≥
;

464 
uöt8
 
addr
[
B_ADDR_LEN
];

465 } 
	tg≠DevRec_t
;

473 
oßl_evít_hdr_t
 
hdr
;

474 
uöt8
 
›code
;

475 
uöt8
 
numDevs
;

476 
g≠DevRec_t
 *
pDevLi°
;

477 } 
	tg≠DevDiscEvít_t
;

484 
uöt8
 
evítTy≥
;

485 
uöt8
 
öôüt‹AddrTy≥
;

486 
uöt8
 
öôüt‹Addr
[
B_ADDR_LEN
];

487 
uöt8
 
ch™√lM≠
;

488 
uöt8
 
fûãrPﬁicy
;

489 } 
	tg≠AdvîtisögP¨ams_t
;

497 
oßl_evít_hdr_t
 
hdr
;

498 
uöt8
 
›code
;

499 
uöt16
 
öãrvÆ
;

500 } 
	tg≠MakeDiscovîabÀR•Evít_t
;

508 
oßl_evít_hdr_t
 
hdr
;

509 
uöt8
 
›code
;

510 } 
	tg≠EndDiscovîabÀR•Evít_t
;

518 
oßl_evít_hdr_t
 
hdr
;

519 
uöt8
 
›code
;

520 
uöt8
 
adTy≥
;

521 } 
	tg≠AdvD©aUpd©eEvít_t
;

532 
uöt8
 
èskID
;

533 
uöt8
 
highDutyCy˛e
;

534 
uöt8
 
whôeLi°
;

535 
uöt8
 
addrTy≥Pìr
;

536 
uöt8
 
≥îAddr
[
B_ADDR_LEN
];

537 } 
	tg≠E°LökReq_t
;

544 
uöt16
 
c⁄√˘i⁄H™dÀ
;

545 
uöt16
 
öãrvÆMö
;

546 
uöt16
 
öãrvÆMax
;

547 
uöt16
 
c⁄nL©ícy
;

548 
uöt16
 
c⁄nTimeout
;

549 } 
	tg≠Upd©eLökP¨amReq_t
;

560 
oßl_evít_hdr_t
 
hdr
;

561 
uöt8
 
›code
;

562 
uöt8
 
devAddrTy≥
;

563 
uöt8
 
devAddr
[
B_ADDR_LEN
];

564 
uöt16
 
c⁄√˘i⁄H™dÀ
;

565 
uöt16
 
c⁄nI¡îvÆ
;

566 
uöt16
 
c⁄nL©ícy
;

567 
uöt16
 
c⁄nTimeout
;

568 
uöt8
 
˛ockAccuøcy
;

569 } 
	tg≠E°LökReqEvít_t
;

577 
oßl_evít_hdr_t
 
hdr
;

578 
uöt8
 
›code
;

579 
uöt8
 
°©us
;

580 
uöt16
 
c⁄√˘i⁄H™dÀ
;

581 
uöt16
 
c⁄nI¡îvÆ
;

582 
uöt16
 
c⁄nL©ícy
;

583 
uöt16
 
c⁄nTimeout
;

584 } 
	tg≠LökUpd©eEvít_t
;

592 
oßl_evít_hdr_t
 
hdr
;

593 
uöt8
 
›code
;

594 
uöt16
 
c⁄√˘i⁄H™dÀ
;

595 
uöt8
 
ªas⁄
;

596 } 
	tg≠Tîmö©eLökEvít_t
;

608 
oßl_evít_hdr_t
 
hdr
;

609 
uöt8
 
›code
;

610 
uöt8
 
devi˚Addr
[
B_ADDR_LEN
];

611 
uöt16
 
c⁄√˘i⁄H™dÀ
;

612 
uöt8
 
uiI≈uts
;

613 
uöt8
 
uiOuçuts
;

614 } 
	tg≠PasskeyNìdedEvít_t
;

622 
oßl_evít_hdr_t
 
hdr
;

623 
uöt8
 
›code
;

624 
uöt16
 
c⁄√˘i⁄H™dÀ
;

625 
uöt8
 
authSèã
;

626 
smSecurôyInfo_t
 *
pSecurôyInfo
;

627 
smSignögInfo_t
 *
pSignögInfo
;

628 
smSecurôyInfo_t
 *
pDevSecInfo
;

629 
smIdítôyInfo_t
 *
pIdítôyInfo
;

630 } 
	tg≠AuthCom∂ëeEvít_t
;

638 
uöt16
 
c⁄√˘i⁄H™dÀ
;

639 
smLökSecurôyReq_t
 
£cReqs
;

640 } 
	tg≠AuthP¨ams_t
;

648 
oßl_evít_hdr_t
 
hdr
;

649 
uöt8
 
›code
;

650 
uöt16
 
c⁄√˘i⁄H™dÀ
;

651 
uöt8
 
devi˚Addr
[
B_ADDR_LEN
];

652 
uöt8
 
authReq
;

654 } 
	tg≠SœveSecurôyReqEvít_t
;

662 
oßl_evít_hdr_t
 
hdr
;

663 
uöt8
 
›code
;

664 
uöt16
 
c⁄√˘i⁄H™dÀ
;

665 } 
	tg≠B⁄dCom∂ëeEvít_t
;

672 
uöt8
 
ioC≠
;

673 
uöt8
 
oobD©aFœg
;

674 
uöt8
 
authReq
;

675 
uöt8
 
maxEncKeySize
;

676 
keyDi°_t
 
keyDi°
;

677 } 
	tg≠PaúögReq_t
;

692 
oßl_evít_hdr_t
 
hdr
;

693 
uöt8
 
›code
;

694 
uöt16
 
c⁄√˘i⁄H™dÀ
;

695 
g≠PaúögReq_t
 
∑úReq
;

696 } 
	tg≠PaúögReqEvít_t
;

705 
uöt8
 
adTy≥
;

706 
uöt8
 
©åLí
;

707 
uöt8
 *
pAârD©a
;

708 } 
	tg≠AdvD©aTokí_t
;

749 
bSètus_t
 
GAP_Devi˚Inô
–
uöt8
 
èskID
,

750 
uöt8
 
¥ofûeRﬁe
,

751 
uöt8
 
maxSˇnRe•⁄£s
,

752 
uöt8
 *
pIRK
,

753 
uöt8
 *
pSRK
,

754 
uöt32
 *
pSignCou¡î
 );

772 
bSètus_t
 
GAP_SëAdvTokí
–
g≠AdvD©aTokí_t
 *
pTokí
 );

781 
g≠AdvD©aTokí_t
 *
GAP_GëAdvTokí
–
uöt8
 
adTy≥
 );

791 
g≠AdvD©aTokí_t
 *
GAP_RemoveAdvTokí
–
uöt8
 
adTy≥
 );

799 
bSètus_t
 
GAP_Upd©eAdvTokís
( );

810 
bSètus_t
 
GAP_SëP¨amVÆue
–
g≠P¨amIDs_t
 
∑ømID
, 
uöt16
 
∑ømVÆue
 );

819 
uöt16
 
GAP_GëP¨amVÆue
–
g≠P¨amIDs_t
 
∑ømID
 );

840 
bSètus_t
 
GAP_C⁄figDevi˚Addr
–
uöt8
 
addrTy≥
, uöt8 *
pSèticAddr
 );

850 
GAP_Regi°îF‹HCIMsgs
–
uöt8
 
èskID
 );

865 
bSètus_t
 
GAP_Devi˚DiscovîyReque°
–
g≠DevDiscReq_t
 *
pP¨ams
 );

876 
bSètus_t
 
GAP_Devi˚DiscovîyC™˚l
–
uöt8
 
èskID
 );

889 
bSètus_t
 
GAP_MakeDiscovîabÀ
–
uöt8
 
èskID
, 
g≠AdvîtisögP¨ams_t
 *
pP¨ams
 );

906 
bSètus_t
 
GAP_Upd©eAdvîtisögD©a
–
uöt8
 
èskID
, uöt8 
adTy≥
,

907 
uöt8
 
d©aLí
, uöt8 *
pAdvîtD©a
 );

918 
bSètus_t
 
GAP_EndDiscovîabÀ
–
uöt8
 
èskID
 );

930 
bSètus_t
 
GAP_ResﬁvePriv©eAddr
–
uöt8
 *
pIRK
, uöt8 *
pAddr
 );

947 
bSètus_t
 
GAP_E°ablishLökReq
–
g≠E°LökReq_t
 *
pP¨ams
 );

961 
bSètus_t
 
GAP_Tîmö©eLökReq
–
uöt8
 
èskID
, 
uöt16
 
c⁄√˘i⁄H™dÀ
, uöt8 
ªas⁄
 );

973 
bSètus_t
 
GAP_Upd©eLökP¨amReq
–
g≠Upd©eLökP¨amReq_t
 *
pP¨ams
 );

980 
uöt8
 
GAP_NumA˘iveC⁄√˘i⁄s
( );

1004 
bSètus_t
 
GAP_Authítiˇã
–
g≠AuthP¨ams_t
 *
pP¨ams
, 
g≠PaúögReq_t
 *
pPaúReq
 );

1018 
bSètus_t
 
GAP_Tîmö©eAuth
–
uöt16
 
c⁄√˘i⁄H™dÀ
, 
uöt8
 
ªas⁄
 );

1036 
bSètus_t
 
GAP_PasskeyUpd©e
–
uöt8
 *
pPasskey
, 
uöt16
 
c⁄√˘i⁄H™dÀ
 );

1053 
bSètus_t
 
GAP_PasscodeUpd©e
–
uöt32
 
∑sscode
, 
uöt16
 
c⁄√˘i⁄H™dÀ
 );

1065 
bSètus_t
 
GAP_SídSœveSecurôyReque°
–
uöt16
 
c⁄√˘i⁄H™dÀ
, 
uöt8
 
authReq
 );

1082 
bSètus_t
 
GAP_Sig«bÀ
–
uöt16
 
c⁄√˘i⁄H™dÀ
, 
uöt8
 
authítiˇãd
, 
smSignögInfo_t
 *
pP¨ams
 );

1100 
bSètus_t
 
GAP_B⁄d
–
uöt16
 
c⁄√˘i⁄H™dÀ
, 
uöt8
 
authítiˇãd
,

1101 
smSecurôyInfo_t
 *
pP¨ams
, 
uöt8
 
°¨tEn¸y±i⁄
 );

1121 
bSètus_t
 
GAP_P¨amsInô
–
uöt8
 
èskID
, uöt8 
¥ofûeRﬁe
 );

1139 
GAP_SecP¨amsInô
–
uöt8
 *
pIRK
, uöt8 *
pSRK
, 
uöt32
 *
pSignCou¡î
 );

1150 
bSètus_t
 
GAP_PîiDevMgrInô
( );

1162 
bSètus_t
 
GAP_CítDevMgrInô
–
uöt8
 
maxSˇnRe•⁄£s
 );

1173 
GAP_CítC⁄nRegi°î
( );

1189 
GAP_Inô
–
uöt8
 
èsk_id
 );

1201 
uöt16
 
GAP_Pro˚ssEvít
–
uöt8
 
èsk_id
, uöt16 
evíts
 );

1207 #ifde‡
__˝lu•lus


	@../../../../Components/ble/include/gatt.h

46 #i‚de‡
GATT_H


47 
	#GATT_H


	)

49 #ifde‡
__˝lu•lus


57 
	~"bcomdef.h
"

58 
	~"OSAL.h
"

60 
	~"©t.h
"

70 
	#GATT_PERMIT_READ
 0x01

71 
	#GATT_PERMIT_WRITE
 0x02

72 
	#GATT_PERMIT_AUTHEN_READ
 0x04

73 
	#GATT_PERMIT_AUTHEN_WRITE
 0x08

74 
	#GATT_PERMIT_AUTHOR_READ
 0x10

75 
	#GATT_PERMIT_AUTHOR_WRITE
 0x20

76 
	#GATT_PERMIT_ENCRYPT_READ
 0x40

77 
	#GATT_PERMIT_ENCRYPT_WRITE
 0x80

78 

	)

86 #i‡!
deföed
–
GATT_MAX_NUM_PREPARE_WRITES
 )

87 
	#GATT_MAX_NUM_PREPARE_WRITES
 5

89 

	)

97 
	#GATT_ENCRYPT_KEY_SIZE
 16

98 

	)

106 
	#GATT_MAX_ATTR_SIZE
 512

107 

	)

111 
	#GATT_MAX_NUM_CONN
 ( 
MAX_NUM_LL_CONN
 + 1 )

	)

114 
	#GATT_BASE_METHOD
 0x40

	)

117 
	#GATT_INVALID_HANDLE
 0x0000

118 
	#GATT_MIN_HANDLE
 0x0001

119 
	#GATT_MAX_HANDLE
 0xFFFF

120 

	)

130 
	#g©tPîmôRód
–
a
 ) ( (aË& 
GATT_PERMIT_READ
 )

	)

131 
	#g©tPîmôWrôe
–
a
 ) ( (aË& 
GATT_PERMIT_WRITE
 )

	)

132 
	#g©tPîmôAuthíRód
–
a
 ) ( (aË& 
GATT_PERMIT_AUTHEN_READ
 )

	)

133 
	#g©tPîmôAuthíWrôe
–
a
 ) ( (aË& 
GATT_PERMIT_AUTHEN_WRITE
 )

	)

134 
	#g©tPîmôAuth‹Ród
–
a
 ) ( (aË& 
GATT_PERMIT_AUTHOR_READ
 )

	)

135 
	#g©tPîmôAuth‹Wrôe
–
a
 ) ( (aË& 
GATT_PERMIT_AUTHOR_WRITE
 )

	)

136 
	#g©tPîmôEn¸y±Ród
–
a
 ) ( (aË& 
GATT_PERMIT_ENCRYPT_READ
 )

	)

137 
	#g©tPîmôEn¸y±Wrôe
–
a
 ) ( (aË& 
GATT_PERMIT_ENCRYPT_WRITE
 )

	)

140 
	#g©tPrim¨ySîvi˚Ty≥
–
t
 ) ( 
	`ATT_Com∑ªUUID
–
¥im¨ySîvi˚UUID
, 
ATT_BT_UUID_SIZE
, \

141 (
t
).
uuid
, (t).
Àn
 ) )

	)

142 
	#g©tSec⁄d¨ySîvi˚Ty≥
–
t
 ) ( 
	`ATT_Com∑ªUUID
–
£c⁄d¨ySîvi˚UUID
, 
ATT_BT_UUID_SIZE
, \

143 (
t
).
uuid
, (t).
Àn
 ) )

	)

144 
	#g©tCh¨a˘îTy≥
–
t
 ) ( 
	`ATT_Com∑ªUUID
–
ch¨a˘îUUID
, 
ATT_BT_UUID_SIZE
, \

145 (
t
).
uuid
, (t).
Àn
 ) )

	)

146 
	#g©tIn˛udeTy≥
–
t
 ) ( 
	`ATT_Com∑ªUUID
–
ö˛udeUUID
, 
ATT_BT_UUID_SIZE
, \

147 (
t
).
uuid
, (t).
Àn
 ) )

	)

148 
	#g©tSîvi˚Ty≥
–
t
 ) ( 
	`g©tPrim¨ySîvi˚Ty≥
( (t) ) || \

149 
	`g©tSec⁄d¨ySîvi˚Ty≥
–(
t
ËË)

	)

160 
uöt8
 
discCh¨sByUUID
;

161 
©tRódByTy≥Req_t
 
ªq
;

162 } 
	tg©tRódByTy≥Req_t
;

169 
uöt16
 
h™dÀ
;

170 
uöt16
 
off£t
;

171 
uöt8
 
Àn
;

172 
uöt8
 *
pVÆue
;

173 } 
	tg©tPª∑ªWrôeReq_t
;

180 
uöt8
 
ªlübÀ
;

181 
g©tPª∑ªWrôeReq_t
 
ªq
;

182 
uöt16
 
œ°Off£t
;

183 } 
	tg©tWrôeL⁄gReq_t
;

190 
uöt8
 
ªlübÀ
;

191 
©tPª∑ªWrôeReq_t
 *
pReqs
;

192 
uöt8
 
numReqs
;

193 
uöt8
 
ödex
;

194 
uöt8
 
Êags
;

196 } 
	tg©tRñübÀWrôesReq_t
;

205 
©tExch™geMTUReq_t
 
exch™geMTUReq
;

206 
©tFödInfoReq_t
 
födInfoReq
;

207 
©tFödByTy≥VÆueReq_t
 
födByTy≥VÆueReq
;

208 
©tRódByTy≥Req_t
 
ªadByTy≥Req
;

209 
©tRódReq_t
 
ªadReq
;

210 
©tRódBlobReq_t
 
ªadBlobReq
;

211 
©tRódMu…iReq_t
 
ªadMu…iReq
;

212 
©tRódByGΩTy≥Req_t
 
ªadByGΩTy≥Req
;

213 
©tWrôeReq_t
 
wrôeReq
;

214 
©tPª∑ªWrôeReq_t
 
¥ï¨eWrôeReq
;

215 
©tExecuãWrôeReq_t
 
execuãWrôeReq
;

216 
g©tRódByTy≥Req_t
 
g©tRódByTy≥Req
;

217 
g©tWrôeL⁄gReq_t
 
g©tWrôeL⁄gReq
;

218 
g©tRñübÀWrôesReq_t
 
g©tRñübÀWrôesReq
;

221 
©tEº‹R•_t
 
îr‹R•
;

222 
©tExch™geMTUR•_t
 
exch™geMTUR•
;

223 
©tFödInfoR•_t
 
födInfoR•
;

224 
©tFödByTy≥VÆueR•_t
 
födByTy≥VÆueR•
;

225 
©tRódByTy≥R•_t
 
ªadByTy≥R•
;

226 
©tRódR•_t
 
ªadR•
;

227 
©tRódBlobR•_t
 
ªadBlobR•
;

228 
©tRódMu…iR•_t
 
ªadMu…iR•
;

229 
©tRódByGΩTy≥R•_t
 
ªadByGΩTy≥R•
;

230 
©tPª∑ªWrôeR•_t
 
¥ï¨eWrôeR•
;

233 
©tH™dÀVÆueNŸi_t
 
h™dÀVÆueNŸi
;

234 
©tH™dÀVÆueInd_t
 
h™dÀVÆueInd
;

235 } 
	tg©tMsg_t
;

243 
oßl_evít_hdr_t
 
hdr
;

244 
uöt16
 
c⁄nH™dÀ
;

245 
uöt8
 
mëhod
;

246 
g©tMsg_t
 
msg
;

247 } 
	tg©tMsgEvít_t
;

254 
uöt8
 
Àn
;

255 c⁄° 
uöt8
 *
uuid
;

256 } 
	tg©tAârTy≥_t
;

261 
	s©tAâribuã_t


263 
g©tAârTy≥_t
 
ty≥
;

264 
uöt8
 
≥rmissi⁄s
;

265 
uöt16
 
h™dÀ
;

266 
uöt8
* c⁄° 
pVÆue
;

269 } 
	tg©tAâribuã_t
;

276 
uöt16
 
numAârs
;

282 
g©tAâribuã_t
 *
©ås
;

283 } 
	tg©tSîvi˚_t
;

308 
bSètus_t
 
GATT_InôClõ¡
( );

318 
GATT_Regi°îF‹Ind
–
uöt8
 
èskId
 );

338 
bSètus_t
 
GATT_Pª∑ªWrôeReq
–
uöt16
 
c⁄nH™dÀ
, 
©tPª∑ªWrôeReq_t
 *
pReq
, 
uöt8
 
èskId
 );

359 
bSètus_t
 
GATT_ExecuãWrôeReq
–
uöt16
 
c⁄nH™dÀ
, 
©tExecuãWrôeReq_t
 *
pReq
, 
uöt8
 
èskId
 );

380 
bSètus_t
 
GATT_InôSîvî
( );

407 
bSètus_t
 
GATT_Regi°îSîvi˚
–
g©tSîvi˚_t
 *
pSîvi˚
 );

421 
bSètus_t
 
GATT_Dîegi°îSîvi˚
–
uöt16
 
h™dÀ
, 
g©tSîvi˚_t
 *
pSîvi˚
 );

430 
GATT_Regi°îF‹Req
–
uöt8
 
èskId
 );

444 
bSètus_t
 
GATT_VîifyRódPîmissi⁄s
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
≥rmissi⁄s
 );

459 
bSètus_t
 
GATT_VîifyWrôePîmissi⁄s
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
≥rmissi⁄s
, 
©tWrôeReq_t
 *
pReq
 );

474 
uöt8
 
GATT_Sîvi˚Ch™gedInd
–
uöt16
 
c⁄nH™dÀ
, uöt8 
èskId
 );

487 
g©tAâribuã_t
 *
GATT_FödH™dÀUUID
–
uöt16
 
°¨tH™dÀ
, uöt16 
ídH™dÀ
, c⁄° 
uöt8
 *
pUUID
,

488 
uöt16
 
Àn
, uöt16 *
pH™dÀ
 );

497 
g©tAâribuã_t
 *
GATT_FödH™dÀ
–
uöt16
 
h™dÀ
, uöt16 *
pH™dÀ
 );

509 
g©tAâribuã_t
 *
GATT_FödNextAâr
–g©tAâribuã_à*
pAâr
, 
uöt16
 
ídH™dÀ
,

510 
uöt16
 
£rvi˚
, uöt16 *
pLa°H™dÀ
 );

518 
uöt16
 
GATT_Sîvi˚NumAârs
–uöt16 
h™dÀ
 );

563 
bSètus_t
 
GATT_Indiˇti⁄
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueInd_t
 *
pInd
,

564 
uöt8
 
authítiˇãd
, uöt8 
èskId
 );

590 
bSètus_t
 
GATT_NŸifiˇti⁄
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueNŸi_t
 *
pNŸi
,

591 
uöt8
 
authítiˇãd
 );

636 
bSètus_t
 
GATT_Exch™geMTU
–
uöt16
 
c⁄nH™dÀ
, 
©tExch™geMTUReq_t
 *
pReq
, 
uöt8
 
èskId
 );

668 
bSètus_t
 
GATT_DiscAŒPrim¨ySîvi˚s
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
èskId
 );

705 
bSètus_t
 
GATT_DiscPrim¨ySîvi˚ByUUID
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 *
pVÆue
,

706 
uöt8
 
Àn
, uöt8 
èskId
 );

741 
bSètus_t
 
GATT_FödIn˛udedSîvi˚s
–
uöt16
 
c⁄nH™dÀ
, uöt16 
°¨tH™dÀ
,

742 
uöt16
 
ídH™dÀ
, 
uöt8
 
èskId
 );

777 
bSètus_t
 
GATT_DiscAŒCh¨s
–
uöt16
 
c⁄nH™dÀ
, uöt16 
°¨tH™dÀ
,

778 
uöt16
 
ídH™dÀ
, 
uöt8
 
èskId
 );

813 
bSètus_t
 
GATT_DiscCh¨sByUUID
–
uöt16
 
c⁄nH™dÀ
, 
©tRódByTy≥Req_t
 *
pReq
, 
uöt8
 
èskId
 );

849 
bSètus_t
 
GATT_DiscAŒCh¨Descs
–
uöt16
 
c⁄nH™dÀ
, uöt16 
°¨tH™dÀ
,

850 
uöt16
 
ídH™dÀ
, 
uöt8
 
èskId
 );

886 
bSètus_t
 
GATT_RódCh¨VÆue
–
uöt16
 
c⁄nH™dÀ
, 
©tRódReq_t
 *
pReq
, 
uöt8
 
èskId
 );

921 
bSètus_t
 
GATT_RódUsögCh¨UUID
–
uöt16
 
c⁄nH™dÀ
, 
©tRódByTy≥Req_t
 *
pReq
, 
uöt8
 
èskId
 );

951 
bSètus_t
 
GATT_RódL⁄gCh¨VÆue
–
uöt16
 
c⁄nH™dÀ
, 
©tRódBlobReq_t
 *
pReq
, 
uöt8
 
èskId
 );

984 
bSètus_t
 
GATT_RódMu…iCh¨VÆues
–
uöt16
 
c⁄nH™dÀ
, 
©tRódMu…iReq_t
 *
pReq
, 
uöt8
 
èskId
 );

1017 
bSètus_t
 
GATT_WrôeNoR•
–
uöt16
 
c⁄nH™dÀ
, 
©tWrôeReq_t
 *
pReq
 );

1055 
bSètus_t
 
GATT_Sig√dWrôeNoR•
–
uöt16
 
c⁄nH™dÀ
, 
©tWrôeReq_t
 *
pReq
 );

1091 
bSètus_t
 
GATT_WrôeCh¨VÆue
–
uöt16
 
c⁄nH™dÀ
, 
©tWrôeReq_t
 *
pReq
, 
uöt8
 
èskId
 );

1128 
bSètus_t
 
GATT_WrôeL⁄gCh¨VÆue
–
uöt16
 
c⁄nH™dÀ
, 
g©tPª∑ªWrôeReq_t
 *
pReq
, 
uöt8
 
èskId
 );

1176 
bSètus_t
 
GATT_RñübÀWrôes
–
uöt16
 
c⁄nH™dÀ
, 
©tPª∑ªWrôeReq_t
 *
pReqs
,

1177 
uöt8
 
numReqs
, uöt8 
Êags
, uöt8 
èskId
 );

1209 
bSètus_t
 
GATT_RódCh¨Desc
–
uöt16
 
c⁄nH™dÀ
, 
©tRódReq_t
 *
pReq
, 
uöt8
 
èskId
 );

1244 
bSètus_t
 
GATT_RódL⁄gCh¨Desc
–
uöt16
 
c⁄nH™dÀ
, 
©tRódBlobReq_t
 *
pReq
, 
uöt8
 
èskId
 );

1277 
bSètus_t
 
GATT_WrôeCh¨Desc
–
uöt16
 
c⁄nH™dÀ
, 
©tWrôeReq_t
 *
pReq
, 
uöt8
 
èskId
 );

1314 
bSètus_t
 
GATT_WrôeL⁄gCh¨Desc
–
uöt16
 
c⁄nH™dÀ
, 
g©tPª∑ªWrôeReq_t
 *
pReq
, 
uöt8
 
èskId
 );

1342 
GATT_SëHo°ToAµFlowCål
–
uöt8
 
ÊowCålMode
 );

1352 
GATT_AµCom∂ëedMsg
–
g©tMsgEvít_t
 *
pMsg
 );

1371 
GATT_SëNextH™dÀ
–
uöt16
 
h™dÀ
 );

1386 
GATT_Inô
–
uöt8
 
èskId
 );

1398 
uöt16
 
GATT_Pro˚ssEvít
–
uöt8
 
èskId
, uöt16 
evíts
 );

1403 #ifde‡
__˝lu•lus


	@../../../../Components/ble/include/gatt_uuid.h

41 #i‚de‡
GATT_UUID_H


42 
	#GATT_UUID_H


	)

44 #ifde‡
__˝lu•lus


66 
	#GAP_SERVICE_UUID
 0x1800

67 
	#GATT_SERVICE_UUID
 0x1801

68 

	)

72 
	#GATT_PRIMARY_SERVICE_UUID
 0x2800

73 
	#GATT_SECONDARY_SERVICE_UUID
 0x2801

74 
	#GATT_INCLUDE_UUID
 0x2802

75 
	#GATT_CHARACTER_UUID
 0x2803

76 

	)

80 
	#GATT_CHAR_EXT_PROPS_UUID
 0x2900

81 
	#GATT_CHAR_USER_DESC_UUID
 0x2901

82 
	#GATT_CLIENT_CHAR_CFG_UUID
 0x2902

83 
	#GATT_SERV_CHAR_CFG_UUID
 0x2903

84 
	#GATT_CHAR_FORMAT_UUID
 0x2904

85 
	#GATT_CHAR_AGG_FORMAT_UUID
 0x2905

86 
	#GATT_VALID_RANGE_UUID
 0x2906

87 
	#GATT_EXT_REPORT_REF_UUID
 0x2907

88 
	#GATT_REPORT_REF_UUID
 0x2908

89 

	)

93 
	#DEVICE_NAME_UUID
 0x2A00

94 
	#APPEARANCE_UUID
 0x2A01

95 
	#PERI_PRIVACY_FLAG_UUID
 0x2A02

96 
	#RECONNECT_ADDR_UUID
 0x2A03

97 
	#PERI_CONN_PARAM_UUID
 0x2A04

98 
	#SERVICE_CHANGED_UUID
 0x2A05

99 

	)

115 
CONST
 
uöt8
 
g≠Sîvi˚UUID
[];

116 
CONST
 
uöt8
 
g©tSîvi˚UUID
[];

121 
CONST
 
uöt8
 
¥im¨ySîvi˚UUID
[];

122 
CONST
 
uöt8
 
£c⁄d¨ySîvi˚UUID
[];

123 
CONST
 
uöt8
 
ö˛udeUUID
[];

124 
CONST
 
uöt8
 
ch¨a˘îUUID
[];

129 
CONST
 
uöt8
 
ch¨ExtPr›sUUID
[];

130 
CONST
 
uöt8
 
ch¨U£rDescUUID
[];

131 
CONST
 
uöt8
 
˛õ¡Ch¨CfgUUID
[];

132 
CONST
 
uöt8
 
£rvCh¨CfgUUID
[];

133 
CONST
 
uöt8
 
ch¨F‹m©UUID
[];

134 
CONST
 
uöt8
 
ch¨AggF‹m©UUID
[];

135 
CONST
 
uöt8
 
vÆidR™geUUID
[];

136 
CONST
 
uöt8
 
extRï‹tRefUUID
[];

137 
CONST
 
uöt8
 
ªp‹tRefUUID
[];

142 
CONST
 
uöt8
 
devi˚NameUUID
[];

143 
CONST
 
uöt8
 
≠≥¨™˚UUID
[];

144 
CONST
 
uöt8
 
≥riPrivacyFœgUUID
[];

145 
CONST
 
uöt8
 
ªc⁄√˘AddrUUID
[];

146 
CONST
 
uöt8
 
≥riC⁄nP¨amUUID
[];

147 
CONST
 
uöt8
 
£rvi˚Ch™gedUUID
[];

148 
CONST
 
uöt8
 
m™uNameUUID
[];

149 
CONST
 
uöt8
 
£rülNumUUID
[];

150 
CONST
 
uöt8
 
m™uAddrUUID
[];

155 c⁄° 
uöt8
 *
GATT_FödUUIDRec
–c⁄° uöt8 *
pUUID
, uöt8 
Àn
 );

160 #ifde‡
__˝lu•lus


	@../../../../Components/ble/include/hci.h

44 #i‚de‡
HCI_H


45 
	#HCI_H


	)

47 #ifde‡
__˝lu•lus


55 
	~"bcomdef.h
"

56 
	~"OSAL.h
"

57 
	~"Œ.h
"

58 
	~"hÆ_as£π.h
"

73 
	#HCI_SUCCESS
 0x00

	)

74 
	#HCI_ERROR_CODE_UNKNOWN_HCI_CMD
 0x01

	)

75 
	#HCI_ERROR_CODE_UNKNOWN_CONN_ID
 0x02

	)

76 
	#HCI_ERROR_CODE_HW_FAILURE
 0x03

	)

77 
	#HCI_ERROR_CODE_PAGE_TIMEOUT
 0x04

	)

78 
	#HCI_ERROR_CODE_AUTH_FAILURE
 0x05

	)

79 
	#HCI_ERROR_CODE_PIN_KEY_MISSING
 0x06

	)

80 
	#HCI_ERROR_CODE_MEM_CAP_EXCEEDED
 0x07

	)

81 
	#HCI_ERROR_CODE_CONN_TIMEOUT
 0x08

	)

82 
	#HCI_ERROR_CODE_CONN_LIMIT_EXCEEDED
 0x09

	)

83 
	#HCI_ERROR_CODE_SYNCH_CONN_LIMIT_EXCEEDED
 0x0A

	)

84 
	#HCI_ERROR_CODE_ACL_CONN_ALREADY_EXISTS
 0x0B

	)

85 
	#HCI_ERROR_CODE_CMD_DISALLOWED
 0x0C

	)

86 
	#HCI_ERROR_CODE_CONN_REJ_LIMITED_RESOURCES
 0x0D

	)

87 
	#HCI_ERROR_CODE_CONN_REJECTED_SECURITY_REASONS
 0x0E

	)

88 
	#HCI_ERROR_CODE_CONN_REJECTED_UNACCEPTABLE_BDADDR
 0x0F

	)

89 
	#HCI_ERROR_CODE_CONN_ACCEPT_TIMEOUT_EXCEEDED
 0x10

	)

90 
	#HCI_ERROR_CODE_UNSUPPORTED_FEATURE_PARAM_VALUE
 0x11

	)

91 
	#HCI_ERROR_CODE_INVALID_HCI_CMD_PARAMS
 0x12

	)

92 
	#HCI_ERROR_CODE_REMOTE_USER_TERM_CONN
 0x13

	)

93 
	#HCI_ERROR_CODE_REMOTE_DEVICE_TERM_CONN_LOW_RESOURCES
 0x14

	)

94 
	#HCI_ERROR_CODE_REMOTE_DEVICE_TERM_CONN_POWER_OFF
 0x15

	)

95 
	#HCI_ERROR_CODE_CONN_TERM_BY_LOCAL_HOST
 0x16

	)

96 
	#HCI_ERROR_CODE_REPEATED_ATTEMPTS
 0x17

	)

97 
	#HCI_ERROR_CODE_PAIRING_NOT_ALLOWED
 0x18

	)

98 
	#HCI_ERROR_CODE_UNKNOWN_LMP_PDU
 0x19

	)

99 
	#HCI_ERROR_CODE_UNSUPPORTED_REMOTE_FEATURE
 0x1A

	)

100 
	#HCI_ERROR_CODE_SCO_OFFSET_REJ
 0x1B

	)

101 
	#HCI_ERROR_CODE_SCO_INTERVAL_REJ
 0x1C

	)

102 
	#HCI_ERROR_CODE_SCO_AIR_MODE_REJ
 0x1D

	)

103 
	#HCI_ERROR_CODE_INVALID_LMP_PARAMS
 0x1E

	)

104 
	#HCI_ERROR_CODE_UNSPECIFIED_ERROR
 0x1F

	)

105 
	#HCI_ERROR_CODE_UNSUPPORTED_LMP_PARAM_VAL
 0x20

	)

106 
	#HCI_ERROR_CODE_ROLE_CHANGE_NOT_ALLOWED
 0x21

	)

107 
	#HCI_ERROR_CODE_LMP_LL_RESP_TIMEOUT
 0x22

	)

108 
	#HCI_ERROR_CODE_LMP_ERR_TRANSACTION_COLLISION
 0x23

	)

109 
	#HCI_ERROR_CODE_LMP_PDU_NOT_ALLOWED
 0x24

	)

110 
	#HCI_ERROR_CODE_ENCRYPT_MODE_NOT_ACCEPTABLE
 0x25

	)

111 
	#HCI_ERROR_CODE_LINK_KEY_CAN_NOT_BE_CHANGED
 0x26

	)

112 
	#HCI_ERROR_CODE_REQ_QOS_NOT_SUPPORTED
 0x27

	)

113 
	#HCI_ERROR_CODE_INSTANT_PASSED
 0x28

	)

114 
	#HCI_ERROR_CODE_PAIRING_WITH_UNIT_KEY_NOT_SUPPORTED
 0x29

	)

115 
	#HCI_ERROR_CODE_DIFFERENT_TRANSACTION_COLLISION
 0x2A

	)

116 
	#HCI_ERROR_CODE_RESERVED1
 0x2B

	)

117 
	#HCI_ERROR_CODE_QOS_UNACCEPTABLE_PARAM
 0x2C

	)

118 
	#HCI_ERROR_CODE_QOS_REJ
 0x2D

	)

119 
	#HCI_ERROR_CODE_CHAN_ASSESSMENT_NOT_SUPPORTED
 0x2E

	)

120 
	#HCI_ERROR_CODE_INSUFFICIENT_SECURITY
 0x2F

	)

121 
	#HCI_ERROR_CODE_PARAM_OUT_OF_MANDATORY_RANGE
 0x30

	)

122 
	#HCI_ERROR_CODE_RESERVED2
 0x31

	)

123 
	#HCI_ERROR_CODE_ROLE_SWITCH_PENDING
 0x32

	)

124 
	#HCI_ERROR_CODE_RESERVED3
 0x33

	)

125 
	#HCI_ERROR_CODE_RESERVED_SLOT_VIOLATION
 0x34

	)

126 
	#HCI_ERROR_CODE_ROLE_SWITCH_FAILED
 0x35

	)

127 
	#HCI_ERROR_CODE_EXTENDED_INQUIRY_RESP_TOO_LARGE
 0x36

	)

128 
	#HCI_ERROR_CODE_SIMPLE_PAIRING_NOT_SUPPORTED_BY_HOST
 0x37

	)

129 
	#HCI_ERROR_CODE_HOST_BUSY_PAIRING
 0x38

	)

130 
	#HCI_ERROR_CODE_CONN_REJ_NO_SUITABLE_CHAN_FOUND
 0x39

	)

131 
	#HCI_ERROR_CODE_CONTROLLER_BUSY
 0x3A

	)

132 
	#HCI_ERROR_CODE_UNACCEPTABLE_CONN_INTERVAL
 0x3B

	)

133 
	#HCI_ERROR_CODE_DIRECTED_ADV_TIMEOUT
 0x3C

	)

134 
	#HCI_ERROR_CODE_CONN_TERM_MIC_FAILURE
 0x3D

	)

135 
	#HCI_ERROR_CODE_CONN_FAILED_TO_ESTABLISH
 0x3E

	)

136 
	#HCI_ERROR_CODE_MAC_CONN_FAILED
 0x3F

	)

141 
	#HCI_MAX_NUM_DATA_BUFFERS
 
LL_MAX_NUM_DATA_BUFFERS


	)

142 
	#HCI_MAX_NUM_CMD_BUFFERS
 
LL_MAX_NUM_CMD_BUFFERS


	)

149 
	#FIRST_PKT_HOST_TO_CTRL
 
LL_DATA_FIRST_PKT_HOST_TO_CTRL


	)

150 
	#CONTINUING_PKT
 
LL_DATA_CONTINUATION_PKT


	)

151 
	#FIRST_PKT_CTRL_TO_HOST
 
LL_DATA_FIRST_PKT_CTRL_TO_HOST


	)

154 
	#HCI_RSSI_NOT_AVAILABLE
 
LL_RSSI_NOT_AVAILABLE


	)

157 
	#HCI_DISCONNECT_AUTH_FAILURE
 
HCI_ERROR_CODE_AUTH_FAILURE


	)

158 
	#HCI_DISCONNECT_REMOTE_USER_TERM
 
HCI_ERROR_CODE_REMOTE_USER_TERM_CONN


	)

159 
	#HCI_DISCONNECT_REMOTE_DEV_LOW_RESOURCES
 
HCI_ERROR_CODE_REMOTE_DEVICE_TERM_CONN_LOW_RESOURCES


	)

160 
	#HCI_DISCONNECT_REMOTE_DEV_POWER_OFF
 
HCI_ERROR_CODE_REMOTE_DEVICE_TERM_CONN_POWER_OFF


	)

161 
	#HCI_DISCONNECT_UNSUPPORTED_REMOTE_FEATURE
 
HCI_ERROR_CODE_UNSUPPORTED_REMOTE_FEATURE


	)

162 
	#HCI_DISCONNECT_KEY_PAIRING_NOT_SUPPORTED
 
HCI_ERROR_CODE_PAIRING_WITH_UNIT_KEY_NOT_SUPPORTED


	)

163 
	#HCI_DISCONNECT_UNACCEPTABLE_CONN_INTERVAL
 
HCI_ERROR_CODE_UNACCEPTABLE_CONN_INTERVAL


	)

166 
	#HCI_READ_CURRENT_TX_POWER_LEVEL
 
LL_READ_CURRENT_TX_POWER_LEVEL


	)

167 
	#HCI_READ_MAX_TX_POWER_LEVEL
 
LL_READ_MAX_TX_POWER_LEVEL


	)

170 
	#HCI_CTRL_TO_HOST_FLOW_CTRL_OFF
 0

	)

171 
	#HCI_CTRL_TO_HOST_FLOW_CTRL_ACL_ON_SYNCH_OFF
 1

	)

172 
	#HCI_CTRL_TO_HOST_FLOW_CTRL_ACL_OFF_SYNCH_ON
 2

	)

173 
	#HCI_CTRL_TO_HOST_FLOW_CTRL_ACL_ON_SYNCH_ON
 3

	)

176 
	#HCI_PUBLIC_DEVICE_ADDRESS
 
LL_DEV_ADDR_TYPE_PUBLIC


	)

177 
	#HCI_RANDOM_DEVICE_ADDRESS
 
LL_DEV_ADDR_TYPE_RANDOM


	)

180 
	#HCI_CONNECTABLE_UNDIRECTED_ADV
 
LL_ADV_CONNECTABLE_UNDIRECTED_EVT


	)

181 
	#HCI_CONNECTABLE_DIRECTED_HDC_ADV
 
LL_ADV_CONNECTABLE_DIRECTED_HDC_EVT


	)

182 
	#HCI_SCANNABLE_UNDIRECTED
 
LL_ADV_SCANNABLE_UNDIRECTED_EVT


	)

183 
	#HCI_NONCONNECTABLE_UNDIRECTED_ADV
 
LL_ADV_NONCONNECTABLE_UNDIRECTED_EVT


	)

184 
	#HCI_CONNECTABLE_DIRECTED_LDC_ADV
 
LL_ADV_CONNECTABLE_DIRECTED_LDC_EVT


	)

187 
	#HCI_ADV_CHAN_37
 
LL_ADV_CHAN_37


	)

188 
	#HCI_ADV_CHAN_38
 
LL_ADV_CHAN_38


	)

189 
	#HCI_ADV_CHAN_39
 
LL_ADV_CHAN_39


	)

190 
	#HCI_ADV_CHAN_ALL
 (
LL_ADV_CHAN_37
 | 
LL_ADV_CHAN_38
 | 
LL_ADV_CHAN_39
)

	)

193 
	#HCI_ADV_WL_POLICY_ANY_REQ
 
LL_ADV_WL_POLICY_ANY_REQ


	)

194 
	#HCI_ADV_WL_POLICY_WL_SCAN_REQ
 
LL_ADV_WL_POLICY_WL_SCAN_REQ


	)

195 
	#HCI_ADV_WL_POLICY_WL_CONNECT_REQ
 
LL_ADV_WL_POLICY_WL_CONNECT_REQ


	)

196 
	#HCI_ADV_WL_POLICY_WL_ALL_REQ
 
LL_ADV_WL_POLICY_WL_ALL_REQ


	)

199 
	#HCI_ENABLE_ADV
 
LL_ADV_MODE_ON


	)

200 
	#HCI_DISABLE_ADV
 
LL_ADV_MODE_OFF


	)

203 
	#HCI_SCAN_PASSIVE
 
LL_SCAN_PASSIVE


	)

204 
	#HCI_SCAN_ACTIVE
 
LL_SCAN_ACTIVE


	)

207 
	#HCI_SCAN_WL_POLICY_ANY_ADV_PKTS
 
LL_SCAN_WL_POLICY_ANY_ADV_PKTS


	)

208 
	#HCI_SCAN_WL_POLICY_USE_WHITE_LIST
 
LL_SCAN_WL_POLICY_USE_WHITE_LIST


	)

211 
	#HCI_FILTER_REPORTS_DISABLE
 
LL_FILTER_REPORTS_DISABLE


	)

212 
	#HCI_FILTER_REPORTS_ENABLE
 
LL_FILTER_REPORTS_ENABLE


	)

215 
	#HCI_SCAN_STOP
 
LL_SCAN_STOP


	)

216 
	#HCI_SCAN_START
 
LL_SCAN_START


	)

219 
	#HCI_INIT_WL_POLICY_USE_PEER_ADDR
 
LL_INIT_WL_POLICY_USE_PEER_ADDR


	)

220 
	#HCI_INIT_WL_POLICY_USE_WHITE_LIST
 
LL_INIT_WL_POLICY_USE_WHITE_LIST


	)

223 
	#HCI_ENCRYPTION_OFF
 
LL_ENCRYPTION_OFF


	)

224 
	#HCI_ENCRYPTION_ON
 
LL_ENCRYPTION_ON


	)

227 
	#HCI_DTM_NUMBER_RF_CHANS
 
LL_DIRECT_TEST_NUM_RF_CHANS


	)

228 
	#HCI_DIRECT_TEST_MAX_PAYLOAD_LEN
 
LL_DIRECT_TEST_MAX_PAYLOAD_LEN


	)

230 
	#HCI_DIRECT_TEST_PAYLOAD_PRBS9
 
LL_DIRECT_TEST_PAYLOAD_PRBS9


	)

231 
	#HCI_DIRECT_TEST_PAYLOAD_0x0F
 
LL_DIRECT_TEST_PAYLOAD_0x0F


	)

232 
	#HCI_DIRECT_TEST_PAYLOAD_0x55
 
LL_DIRECT_TEST_PAYLOAD_0x55


	)

233 
	#HCI_DIRECT_TEST_PAYLOAD_PRBS15
 
LL_DIRECT_TEST_PAYLOAD_PRBS15


	)

234 
	#HCI_DIRECT_TEST_PAYLOAD_0xFF
 
LL_DIRECT_TEST_PAYLOAD_0xFF


	)

235 
	#HCI_DIRECT_TEST_PAYLOAD_0x00
 
LL_DIRECT_TEST_PAYLOAD_0x00


	)

236 
	#HCI_DIRECT_TEST_PAYLOAD_0xF0
 
LL_DIRECT_TEST_PAYLOAD_0xF0


	)

237 
	#HCI_DIRECT_TEST_PAYLOAD_0xAA
 
LL_DIRECT_TEST_PAYLOAD_0xAA


	)

240 
	#HCI_EXT_RX_GAIN_STD
 
LL_EXT_RX_GAIN_STD


	)

241 
	#HCI_EXT_RX_GAIN_HIGH
 
LL_EXT_RX_GAIN_HIGH


	)

243 
	#HCI_EXT_TX_POWER_MINUS_23_DBM
 
LL_EXT_TX_POWER_MINUS_23_DBM


	)

244 
	#HCI_EXT_TX_POWER_MINUS_6_DBM
 
LL_EXT_TX_POWER_MINUS_6_DBM


	)

245 
	#HCI_EXT_TX_POWER_0_DBM
 
LL_EXT_TX_POWER_0_DBM


	)

246 
	#HCI_EXT_TX_POWER_4_DBM
 
LL_EXT_TX_POWER_4_DBM


	)

248 
	#HCI_EXT_ENABLE_ONE_PKT_PER_EVT
 
LL_EXT_ENABLE_ONE_PKT_PER_EVT


	)

249 
	#HCI_EXT_DISABLE_ONE_PKT_PER_EVT
 
LL_EXT_DISABLE_ONE_PKT_PER_EVT


	)

251 
	#HCI_EXT_ENABLE_CLK_DIVIDE_ON_HALT
 
LL_EXT_ENABLE_CLK_DIVIDE_ON_HALT


	)

252 
	#HCI_EXT_DISABLE_CLK_DIVIDE_ON_HALT
 
LL_EXT_DISABLE_CLK_DIVIDE_ON_HALT


	)

254 
	#HCI_EXT_NV_IN_USE
 
LL_EXT_NV_IN_USE


	)

255 
	#HCI_EXT_NV_NOT_IN_USE
 
LL_EXT_NV_NOT_IN_USE


	)

257 
	#HCI_EXT_ENABLE_FAST_TX_RESP_TIME
 
LL_EXT_ENABLE_FAST_TX_RESP_TIME


	)

258 
	#HCI_EXT_DISABLE_FAST_TX_RESP_TIME
 
LL_EXT_DISABLE_FAST_TX_RESP_TIME


	)

260 
	#HCI_EXT_ENABLE_SL_OVERRIDE
 
LL_EXT_ENABLE_SL_OVERRIDE


	)

261 
	#HCI_EXT_DISABLE_SL_OVERRIDE
 
LL_EXT_DISABLE_SL_OVERRIDE


	)

263 
	#HCI_EXT_TX_MODULATED_CARRIER
 
LL_EXT_TX_MODULATED_CARRIER


	)

264 
	#HCI_EXT_TX_UNMODULATED_CARRIER
 
LL_EXT_TX_UNMODULATED_CARRIER


	)

266 
	#HCI_PTM_SET_FREQ_TUNE_DOWN
 
LL_EXT_SET_FREQ_TUNE_DOWN


	)

267 
	#HCI_PTM_SET_FREQ_TUNE_UP
 
LL_EXT_SET_FREQ_TUNE_UP


	)

269 
	#HCI_EXT_PM_IO_PORT_P0
 
LL_EXT_PM_IO_PORT_P0


	)

270 
	#HCI_EXT_PM_IO_PORT_P1
 
LL_EXT_PM_IO_PORT_P1


	)

271 
	#HCI_EXT_PM_IO_PORT_P2
 
LL_EXT_PM_IO_PORT_P2


	)

272 
	#HCI_EXT_PM_IO_PORT_NONE
 
LL_EXT_PM_IO_PORT_NONE


	)

274 
	#HCI_EXT_PM_IO_PORT_PIN0
 
LL_EXT_PM_IO_PORT_PIN0


	)

275 
	#HCI_EXT_PM_IO_PORT_PIN1
 
LL_EXT_PM_IO_PORT_PIN1


	)

276 
	#HCI_EXT_PM_IO_PORT_PIN2
 
LL_EXT_PM_IO_PORT_PIN2


	)

277 
	#HCI_EXT_PM_IO_PORT_PIN3
 
LL_EXT_PM_IO_PORT_PIN3


	)

278 
	#HCI_EXT_PM_IO_PORT_PIN4
 
LL_EXT_PM_IO_PORT_PIN4


	)

279 
	#HCI_EXT_PM_IO_PORT_PIN5
 
LL_EXT_PM_IO_PORT_PIN5


	)

280 
	#HCI_EXT_PM_IO_PORT_PIN6
 
LL_EXT_PM_IO_PORT_PIN6


	)

281 
	#HCI_EXT_PM_IO_PORT_PIN7
 
LL_EXT_PM_IO_PORT_PIN7


	)

283 
	#HCI_EXT_PER_RESET
 
LL_EXT_PER_RESET


	)

284 
	#HCI_EXT_PER_READ
 
LL_EXT_PER_READ


	)

286 
	#HCI_EXT_HALT_DURING_RF_DISABLE
 
LL_EXT_HALT_DURING_RF_DISABLE


	)

287 
	#HCI_EXT_HALT_DURING_RF_ENABLE
 
LL_EXT_HALT_DURING_RF_ENABLE


	)

289 
	#HCI_EXT_SET_USER_REVISION
 
LL_EXT_SET_USER_REVISION


	)

290 
	#HCI_EXT_READ_BUILD_REVISION
 
LL_EXT_READ_BUILD_REVISION


	)

292 
	#HCI_EXT_RESET_SYSTEM_HARD
 
LL_EXT_RESET_SYSTEM_HARD


	)

293 
	#HCI_EXT_RESET_SYSTEM_SOFT
 
LL_EXT_RESET_SYSTEM_SOFT


	)

295 
	#HCI_EXT_DISABLE_OVERLAPPED_PROCESSING
 
LL_EXT_DISABLE_OVERLAPPED_PROCESSING


	)

296 
	#HCI_EXT_ENABLE_OVERLAPPED_PROCESSING
 
LL_EXT_ENABLE_OVERLAPPED_PROCESSING


	)

298 
	#HCI_EXT_DISABLE_NUM_COMPL_PKTS_ON_EVENT
 
LL_EXT_DISABLE_NUM_COMPL_PKTS_ON_EVENT


	)

299 
	#HCI_EXT_ENABLE_NUM_COMPL_PKTS_ON_EVENT
 
LL_EXT_ENABLE_NUM_COMPL_PKTS_ON_EVENT


	)

306 
	#HCI_LINK_TYPE_SCO_BUFFER_OVERFLOW
 0

	)

307 
	#HCI_LINK_TYPE_ACL_BUFFER_OVERFLOW
 1

	)

313 
uöt8
 
	thciSètus_t
;

322 
oßl_evít_hdr_t
 
hdr
;

323 
uöt8
 
BLEEvítCode
;

324 
uöt8
 
°©us
;

325 
uöt16
 
c⁄√˘i⁄H™dÀ
;

326 
uöt8
 
rﬁe
;

327 
uöt8
 
≥îAddrTy≥
;

328 
uöt8
 
≥îAddr
[
B_ADDR_LEN
];

329 
uöt16
 
c⁄nI¡îvÆ
;

330 
uöt16
 
c⁄nL©ícy
;

331 
uöt16
 
c⁄nTimeout
;

332 
uöt8
 
˛ockAccuøcy
;

333 } 
	thciEvt_BLEC⁄nCom∂ëe_t
;

338 
uöt8
 
evítTy≥
;

339 
uöt8
 
addrTy≥
;

340 
uöt8
 
addr
[
B_ADDR_LEN
];

341 
uöt8
 
d©aLí
;

342 
uöt8
 
r•D©a
[
B_MAX_ADV_LEN
];

343 
öt8
 
rssi
;

344 } 
	thciEvt_DevInfo_t
;

348 
oßl_evít_hdr_t
 
hdr
;

349 
uöt8
 
BLEEvítCode
;

350 
uöt8
 
numDevi˚s
;

351 
hciEvt_DevInfo_t
* 
devInfo
;

352 } 
	thciEvt_BLEAdvPktRï‹t_t
;

357 
oßl_evít_hdr_t
 
hdr
;

358 
uöt8
 
BLEEvítCode
;

359 
uöt8
 
°©us
;

360 
uöt16
 
c⁄√˘i⁄H™dÀ
;

361 
uöt16
 
c⁄nI¡îvÆ
;

362 
uöt16
 
c⁄nL©ícy
;

363 
uöt16
 
c⁄nTimeout
;

364 } 
	thciEvt_BLEC⁄nUpd©eCom∂ëe_t
;

369 
oßl_evít_hdr_t
 
hdr
;

370 
uöt8
 
BLEEvítCode
;

371 
uöt8
 
°©us
;

372 
uöt16
 
c⁄√˘i⁄H™dÀ
;

373 
uöt8
 
„©uªs
[8];

374 } 
	thciEvt_BLERódRemŸeFótuªCom∂ëe_t
;

379 
oßl_evít_hdr_t
 
hdr
;

380 
uöt8
 
BLEEvítCode
;

381 
uöt16
 
c⁄nH™dÀ
;

382 
uöt8
 
ªas⁄
;

383 
uöt8
 
ícE«bÀ
;

384 } 
	thciEvt_En¸y±Ch™ge_t
;

389 
oßl_evít_hdr_t
 
hdr
;

390 
uöt8
 
BLEEvítCode
;

391 
uöt16
 
c⁄nH™dÀ
;

392 
uöt8
 
øndom
[
B_RANDOM_NUM_SIZE
];

393 
uöt16
 
í¸y±edDivîsifõr
;

394 } 
	thciEvt_BLELTKReq_t
;

399 
oßl_evít_hdr_t
 
hdr
;

400 
uöt8
 
numH™dÀs
;

401 
uöt16
 *
pC⁄√˘i⁄H™dÀ
;

402 
uöt16
 *
pNumCom∂ëedPackës
;

403 } 
	thciEvt_NumCom∂ëedPkt_t
;

408 
oßl_evít_hdr_t
 
hdr
;

409 
uöt8
 
numHciCmdPkt
;

410 
uöt16
 
cmdOpcode
;

411 
uöt8
 *
pRëu∫P¨am
;

412 } 
	thciEvt_CmdCom∂ëe_t
;

417 
oßl_evít_hdr_t
 
hdr
;

418 
uöt8
 
cmdSètus
;

419 
uöt8
 
numHciCmdPkt
;

420 
uöt16
 
cmdOpcode
;

421 } 
	thciEvt_Comm™dSètus_t
;

426 
oßl_evít_hdr_t
 
hdr
;

427 
uöt8
 
h¨dw¨eCode
;

428 } 
	thciEvt_H¨dw¨eEº‹_t
;

433 
oßl_evít_hdr_t
 
hdr
;

434 
uöt8
 
°©us
;

435 
uöt16
 
c⁄nH™dÀ
;

436 
uöt8
 
ªas⁄
;

437 } 
	thciEvt_Disc⁄nCom∂ëe_t
;

442 
oßl_evít_hdr_t
 
hdr
;

443 
uöt8
 
lökTy≥
;

444 } 
	thciEvt_Buf„rOvîÊow_t
;

449 
uöt8
 
°©us
;

450 
uöt16
 
d©aPktLí
;

451 
uöt8
 
numD©aPkts
;

452 } 
	thciRëP¨am_LeRódBufSize_t
;

456 
oßl_evít_hdr_t
 
hdr
;

457 
uöt8
 *
pD©a
;

458 } 
	thciPackë_t
;

462 
oßl_evít_hdr_t
 
hdr
;

463 
uöt8
 
pktTy≥
;

464 
uöt16
 
c⁄nH™dÀ
;

465 
uöt8
 
pbFœg
;

466 
uöt16
 
pktLí
;

467 
uöt8
 *
pD©a
;

468 } 
	thciD©aPackë_t
;

474 
oßl_evít_hdr_t
 
hdr
;

475 
uöt16
 
c⁄nH™dÀ
;

476 
uöt8
 
pbFœg
;

477 
uöt16
 
Àn
;

478 
uöt8
 *
pD©a
;

479 } 
	thciD©aEvít_t
;

511 *
HCI_bm_Æloc
–
uöt16
 
size
 );

538 
uöt8
 
HCI_VÆidC⁄nTimeP¨ams
–
uöt16
 
c⁄nI¡îvÆMö
,

539 
uöt16
 
c⁄nI¡îvÆMax
,

540 
uöt16
 
c⁄nL©ícy
,

541 
uöt16
 
c⁄nTimeout
 );

559 
HCI_Te°AµTaskRegi°î
–
uöt8
 
èskID
 );

577 
HCI_GAPTaskRegi°î
–
uöt8
 
èskID
 );

597 
HCI_L2CAPTaskRegi°î
–
uöt8
 
èskID
 );

615 
HCI_SMPTaskRegi°î
–
uöt8
 
èskID
 );

633 
HCI_ExtTaskRegi°î
–
uöt8
 
èskID
 );

636 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

659 
hciSètus_t
 
HCI_SídD©aPkt
–
uöt16
 
c⁄nH™dÀ
,

660 
uöt8
 
pbFœg
,

661 
uöt16
 
pktLí
,

662 
uöt8
 *
pD©a
 );

670 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

696 
hciSètus_t
 
HCI_Disc⁄√˘Cmd
–
uöt16
 
c⁄nH™dÀ
,

697 
uöt8
 
ªas⁄
 );

701 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

721 
hciSètus_t
 
HCI_RódRemŸeVîsi⁄InfoCmd
–
uöt16
 
c⁄nH™dÀ
 );

743 
hciSètus_t
 
HCI_SëEvítMaskCmd
–
uöt8
 *
pMask
 );

763 
hciSètus_t
 
HCI_Re£tCmd
( );

766 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

786 
hciSètus_t
 
HCI_RódTønsmôPowîLevñCmd
–
uöt16
 
c⁄nH™dÀ
,

787 
uöt8
 
txPwrTy≥
 );

791 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

815 
hciSètus_t
 
HCI_SëC⁄åﬁÀrToHo°FlowCålCmd
–
uöt8
 
ÊowC⁄åﬁE«bÀ
 );

819 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

846 
hciSètus_t
 
HCI_Ho°Buf„rSizeCmd
–
uöt16
 
ho°A˛PktLí
,

847 
uöt8
 
ho°SyncPktLí
,

848 
uöt16
 
ho°TŸÆNumA˛Pkts
,

849 
uöt16
 
ho°TŸÆNumSyncPkts
 );

853 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

888 
hciSètus_t
 
HCI_Ho°NumCom∂ëedPktCmd
–
uöt8
 
numH™dÀs
,

889 
uöt16
 *
c⁄nH™dÀs
,

890 
uöt16
 *
numCom∂ëedPkts
 );

911 
hciSètus_t
 
HCI_RódLoˇlVîsi⁄InfoCmd
( );

931 
hciSètus_t
 
HCI_RódLoˇlSuµ‹ãdComm™dsCmd
( );

951 
hciSètus_t
 
HCI_RódLoˇlSuµ‹ãdFótuªsCmd
( );

971 
hciSètus_t
 
HCI_RódBDADDRCmd
( );

996 
hciSètus_t
 
HCI_RódRssiCmd
–
uöt16
 
c⁄nH™dÀ
 );

1021 
hciSètus_t
 
HCI_LE_SëEvítMaskCmd
–
uöt8
 *
pEvítMask
 );

1042 
hciSètus_t
 
HCI_LE_RódBufSizeCmd
( );

1062 
hciSètus_t
 
HCI_LE_RódLoˇlSuµ‹ãdFótuªsCmd
( );

1082 
hciSètus_t
 
HCI_LE_SëR™domAddªssCmd
–
uöt8
 *
pR™dAddr
 );

1085 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_NCONN_CFG
Ë|| (CTRL_CONFIG & 
ADV_CONN_CFG
))

1126 
hciSètus_t
 
HCI_LE_SëAdvP¨amCmd
–
uöt16
 
advI¡îvÆMö
,

1127 
uöt16
 
advI¡îvÆMax
,

1128 
uöt8
 
advTy≥
,

1129 
uöt8
 
ownAddrTy≥
,

1130 
uöt8
 
dúe˘AddrTy≥
,

1131 
uöt8
 *
dúe˘Addr
,

1132 
uöt8
 
advCh™√lM≠
,

1133 
uöt8
 
advFûãrPﬁicy
 );

1137 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_NCONN_CFG
Ë|| (CTRL_CONFIG & 
ADV_CONN_CFG
))

1156 
hciSètus_t
 
HCI_LE_SëAdvD©aCmd
–
uöt8
 
d©aLí
,

1157 
uöt8
 *
pD©a
 );

1161 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_NCONN_CFG
Ë|| (CTRL_CONFIG & 
ADV_CONN_CFG
))

1180 
hciSètus_t
 
HCI_LE_SëSˇnR•D©aCmd
–
uöt8
 
d©aLí
,

1181 
uöt8
 *
pD©a
 );

1185 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_NCONN_CFG
Ë|| (CTRL_CONFIG & 
ADV_CONN_CFG
))

1203 
hciSètus_t
 
HCI_LE_SëAdvE«bÀCmd
–
uöt8
 
advE«bÀ
 );

1207 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_NCONN_CFG
Ë|| (CTRL_CONFIG & 
ADV_CONN_CFG
))

1225 
hciSètus_t
 
HCI_LE_RódAdvCh™TxPowîCmd
( );

1229 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
SCAN_CFG
)

1253 
hciSètus_t
 
HCI_LE_SëSˇnP¨amCmd
–
uöt8
 
sˇnTy≥
,

1254 
uöt16
 
sˇnI¡îvÆ
,

1255 
uöt16
 
sˇnWödow
,

1256 
uöt8
 
ownAddrTy≥
,

1257 
uöt8
 
fûãrPﬁicy
 );

1261 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
SCAN_CFG
)

1282 
hciSètus_t
 
HCI_LE_SëSˇnE«bÀCmd
–
uöt8
 
sˇnE«bÀ
,

1283 
uöt8
 
fûãrDu∂iˇãs
 );

1287 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
INIT_CFG
)

1323 
hciSètus_t
 
HCI_LE_Cª©eC⁄nCmd
–
uöt16
 
sˇnI¡îvÆ
,

1324 
uöt16
 
sˇnWödow
,

1325 
uöt8
 
öôFûãrPﬁicy
,

1326 
uöt8
 
addrTy≥Pìr
,

1327 
uöt8
 *
≥îAddr
,

1328 
uöt8
 
ownAddrTy≥
,

1329 
uöt16
 
c⁄nI¡îvÆMö
,

1330 
uöt16
 
c⁄nI¡îvÆMax
,

1331 
uöt16
 
c⁄nL©ícy
,

1332 
uöt16
 
c⁄nTimeout
,

1333 
uöt16
 
möLí
,

1334 
uöt16
 
maxLí
 );

1338 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
INIT_CFG
)

1356 
hciSètus_t
 
HCI_LE_Cª©eC⁄nC™˚lCmd
( );

1377 
hciSètus_t
 
HCI_LE_RódWhôeLi°SizeCmd
( );

1397 
hciSètus_t
 
HCI_LE_CÀ¨WhôeLi°Cmd
( );

1418 
hciSètus_t
 
HCI_LE_AddWhôeLi°Cmd
–
uöt8
 
addrTy≥
,

1419 
uöt8
 *
devAddr
 );

1441 
hciSètus_t
 
HCI_LE_RemoveWhôeLi°Cmd
–
uöt8
 
addrTy≥
,

1442 
uöt8
 *
devAddr
 );

1445 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
INIT_CFG
)

1470 
hciSètus_t
 
HCI_LE_C⁄nUpd©eCmd
–
uöt16
 
c⁄nH™dÀ
,

1471 
uöt16
 
c⁄nI¡îvÆMö
,

1472 
uöt16
 
c⁄nI¡îvÆMax
,

1473 
uöt16
 
c⁄nL©ícy
,

1474 
uöt16
 
c⁄nTimeout
,

1475 
uöt16
 
möLí
,

1476 
uöt16
 
maxLí
 );

1480 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
INIT_CFG
)

1498 
hciSètus_t
 
HCI_LE_SëHo°Ch™Cœssifiˇti⁄Cmd
–
uöt8
 *
ch™M≠
 );

1502 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

1520 
hciSètus_t
 
HCI_LE_RódCh™√lM≠Cmd
–
uöt16
 
c⁄nH™dÀ
 );

1524 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
INIT_CFG
)

1543 
hciSètus_t
 
HCI_LE_RódRemŸeU£dFótuªsCmd
–
uöt16
 
c⁄nH™dÀ
 );

1567 
hciSètus_t
 
HCI_LE_En¸y±Cmd
–
uöt8
 *
key
,

1568 
uöt8
 *
∂aöText
 );

1588 
hciSètus_t
 
HCI_LE_R™dCmd
( );

1591 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
INIT_CFG
)

1614 
hciSètus_t
 
HCI_LE_SèπEncy±Cmd
–
uöt16
 
c⁄nH™dÀ
,

1615 
uöt8
 *
øndom
,

1616 
uöt8
 *
ícDiv
,

1617 
uöt8
 *
…k
 );

1621 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
ADV_CONN_CFG
)

1641 
hciSètus_t
 
HCI_LE_LtkReqRïlyCmd
–
uöt16
 
c⁄nH™dÀ
,

1642 
uöt8
 *
…k
 );

1646 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
ADV_CONN_CFG
)

1665 
hciSètus_t
 
HCI_LE_LtkReqNegRïlyCmd
–
uöt16
 
c⁄nH™dÀ
 );

1686 
hciSètus_t
 
HCI_LE_RódSuµ‹ãdSèãsCmd
( );

1709 
hciSètus_t
 
HCI_LE_Re˚ivîTe°Cmd
–
uöt8
 
rxFªq
 );

1744 
hciSètus_t
 
HCI_LE_TønsmôãrTe°Cmd
–
uöt8
 
txFªq
,

1745 
uöt8
 
d©aLí
,

1746 
uöt8
 
pktPaylﬂd
 );

1768 
hciSètus_t
 
HCI_LE_Te°EndCmd
( );

1791 
hciSètus_t
 
HCI_EXT_SëRxGaöCmd
–
uöt8
 
rxGaö
 );

1814 
hciSètus_t
 
HCI_EXT_SëTxPowîCmd
–
uöt8
 
txPowî
 );

1817 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

1837 
hciSètus_t
 
HCI_EXT_O√PktPîEvtCmd
–
uöt8
 
c⁄åﬁ
 );

1860 
hciSètus_t
 
HCI_EXT_ClkDivOnHÆtCmd
–
uöt8
 
c⁄åﬁ
 );

1882 
hciSètus_t
 
HCI_EXT_De˛¨eNvUßgeCmd
–
uöt8
 
mode
 );

1904 
hciSètus_t
 
HCI_EXT_De¸y±Cmd
–
uöt8
 *
key
,

1905 
uöt8
 *
ícText
 );

1926 
hciSètus_t
 
HCI_EXT_SëLoˇlSuµ‹ãdFótuªsCmd
–
uöt8
 *
loˇlFótuªs
 );

1929 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
ADV_CONN_CFG
)

1949 
hciSètus_t
 
HCI_EXT_SëFa°TxRe•⁄£TimeCmd
–
uöt8
 
c⁄åﬁ
 );

1953 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
ADV_CONN_CFG
)

1973 
hciSètus_t
 
HCI_EXT_SëSœveL©ícyOvîrideCmd
–
uöt8
 
c⁄åﬁ
 );

2004 
hciSètus_t
 
HCI_EXT_ModemTe°TxCmd
–
uöt8
 
cwMode
,

2005 
uöt8
 
txFªq
 );

2033 
hciSètus_t
 
HCI_EXT_ModemH›Te°TxCmd
( );

2060 
hciSètus_t
 
HCI_EXT_ModemTe°RxCmd
–
uöt8
 
rxFªq
 );

2079 
hciSètus_t
 
HCI_EXT_EndModemTe°Cmd
( );

2104 
hciSètus_t
 
HCI_EXT_SëBDADDRCmd
–
uöt8
 *
bdAddr
 );

2107 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

2134 
hciSètus_t
 
HCI_EXT_SëSCACmd
–
uöt16
 
sˇInPPM
 );

2157 
hciSètus_t
 
HCI_EXT_E«bÀPTMCmd
( );

2179 
hciSètus_t
 
HCI_EXT_SëFªqTu√Cmd
–
uöt8
 
°ï
 );

2200 
hciSètus_t
 
HCI_EXT_SaveFªqTu√Cmd
( );

2224 
hciSètus_t
 
HCI_EXT_SëMaxDtmTxPowîCmd
–
uöt8
 
txPowî
 );

2278 
ŒSètus_t
 
HCI_EXT_M≠PmIoP‹tCmd
–
uöt8
 
ioP‹t
, uöt8 
ioPö
 );

2281 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

2302 
hciSètus_t
 
HCI_EXT_Disc⁄√˘ImmedCmd
–
uöt16
 
c⁄nH™dÀ
 );

2306 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

2327 
hciSètus_t
 
HCI_EXT_PackëEº‹R©eCmd
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
comm™d
 );

2331 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

2359 
hciSètus_t
 
HCI_EXT_PERbyCh™Cmd
–
uöt16
 
c⁄nH™dÀ
, 
≥rByCh™_t
 *
≥rByCh™
 );

2381 
hciSètus_t
 
HCI_EXT_ExãndRfR™geCmd
( );

2403 
hciSètus_t
 
HCI_EXT_HÆtDurögRfCmd
–
uöt8
 
mode
 );

2406 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_NCONN_CFG
Ë|| (CTRL_CONFIG & 
ADV_CONN_CFG
))

2427 
hciSètus_t
 
HCI_EXT_AdvEvítNŸi˚Cmd
–
uöt8
 
èskID
, 
uöt16
 
èskEvít
 );

2431 #i‡
deföed
(
CTRL_CONFIG
Ë&& (CTRL_CONFIG & 
ADV_CONN_CFG
)

2454 
hciSètus_t
 
HCI_EXT_C⁄nEvítNŸi˚Cmd
–
uöt8
 
èskID
, 
uöt16
 
èskEvít
 );

2474 
hciSètus_t
 
HCI_EXT_BuûdRevisi⁄Cmd
–
uöt8
 
mode
, 
uöt16
 
u£rRevNum
 );

2492 
hciSètus_t
 
HCI_EXT_DñaySÀïCmd
–
uöt16
 
dñay
 );

2511 
hciSètus_t
 
HCI_EXT_Re£tSy°emCmd
–
uöt8
 
mode
 );

2514 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

2532 
hciSètus_t
 
HCI_EXT_OvîœµedPro˚ssögCmd
–
uöt8
 
mode
 );

2536 #i‡
deföed
(
CTRL_CONFIG
Ë&& ((CTRL_CONFIG & 
ADV_CONN_CFG
Ë|| (CTRL_CONFIG & 
INIT_CFG
))

2559 
hciSètus_t
 
HCI_EXT_NumCom∂PktsLimôCmd
–
uöt8
 
limô
,

2560 
uöt8
 
ÊushOnEvt
 );

2564 #ifde‡
__˝lu•lus


	@../../../../Components/ble/include/l2cap.h

40 #i‚de‡
L2CAP_H


41 
	#L2CAP_H


	)

43 #ifde‡
__˝lu•lus


51 
	~"bcomdef.h
"

52 
	~"OSAL.h
"

59 
	#L2CAP_MTU_SIZE
 23

	)

62 
	#L2CAP_SIG_MTU_SIZE
 23

	)

65 
	#L2CAP_HDR_SIZE
 4

	)

69 
	#L2CAP_PDU_SIZE
 ( 
L2CAP_HDR_SIZE
 + 
L2CAP_MTU_SIZE
 )

	)

74 
	#L2CAP_CID_NULL
 0x0000

75 
	#L2CAP_CID_ATT
 0x0004

76 
	#L2CAP_CID_SIG
 0x0005

77 
	#L2CAP_CID_SMP
 0x0006

78 
	#L2CAP_CID_GENERIC
 0x0007

79 

	)

81 
	#L2CAP_BASE_DYNAMIC_CID
 0x0040

	)

82 
	#L2CAP_LAST_DYNAMIC_CID
 ( 
BASE_DYNAMIC_CID
 + 
L2CAP_NUM_CHANNELS
 - 1 )

	)

85 
	#L2CAP_NUM_FIXED_CHANNELS
 4

	)

88 
	#L2CAP_NUM_PROTOCOLS
 0

	)

92 
	#L2CAP_NUM_AUX_CHANNELS
 3

	)

95 
	#L2CAP_NUM_DYNAMIC_CHANNELS
 ( 
L2CAP_NUM_PROTOCOLS
 * 
MAX_NUM_LL_CONN
 )

	)

98 
	#L2CAP_NUM_CHANNELS
 ( 
L2CAP_NUM_DYNAMIC_CHANNELS
 + 
L2CAP_NUM_AUX_CHANNELS
 )

	)

104 
	#L2CAP_RTX_TIMEOUT
 30

	)

107 
	#L2CAP_CMD_REJECT
 0x01

	)

108 
	#L2CAP_ECHO_REQ
 0x08

109 
	#L2CAP_ECHO_RSP
 0x09

110 
	#L2CAP_INFO_REQ
 0x0a

111 
	#L2CAP_INFO_RSP
 0x0b

112 
	#L2CAP_PARAM_UPDATE_REQ
 0x12

	)

113 
	#L2CAP_PARAM_UPDATE_RSP
 0x13

	)

119 
	#L2CAP_REJECT_CMD_NOT_UNDERSTOOD
 0x0000

	)

122 
	#L2CAP_REJECT_SIGNAL_MTU_EXCEED
 0x0001

	)

125 
	#L2CAP_REJECT_INVALID_CID
 0x0002

	)

131 
	#L2CAP_INFO_CONNLESS_MTU
 0x0001

	)

134 
	#L2CAP_INFO_EXTENDED_FEATURES
 0x0002

	)

137 
	#L2CAP_INFO_FIXED_CHANNELS
 0x0003

	)

143 
	#L2CAP_FIXED_CHANNELS
 0x00000080

	)

146 
	#L2CAP_EXTENDED_FEATURES_SIZE
 4

	)

152 
	#L2CAP_FIXED_CHANNELS_ATT
 0x10

	)

155 
	#L2CAP_FIXED_CHANNELS_SIG
 0x20

	)

158 
	#L2CAP_FIXED_CHANNELS_SMP
 0x40

	)

161 
	#L2CAP_FIXED_CHANNELS_SIZE
 8

	)

167 
	#L2CAP_INFO_SUCCESS
 0x0000

	)

170 
	#L2CAP_INFO_NOT_SUPPORTED
 0x0001

	)

176 
	#L2CAP_CONN_PARAMS_ACCEPTED
 0x0000

	)

179 
	#L2CAP_CONN_PARAMS_REJECTED
 0x0001

	)

197 
uöt16
 
loˇlCID
;

198 
uöt16
 
ªmŸeCID
;

199 } 
	tl2ˇpInvÆidCID_t
;

204 
uöt16
 
sig«lMTU
;

205 
l2ˇpInvÆidCID_t
 
övÆidCID
;

206 } 
	tl2ˇpRós⁄D©a_t
;

211 
uöt16
 
ªas⁄
;

212 
l2ˇpRós⁄D©a_t
 
ªas⁄D©a
;

215 
	#maxSig«lMTU
 
ªas⁄D©a
.
sig«lMTU


	)

216 
	#övÆidLoˇlCID
 
ªas⁄D©a
.
övÆidCID
.
loˇlCID


	)

217 
	#övÆidRemŸeCID
 
ªas⁄D©a
.
övÆidCID
.
ªmŸeCID


	)

218 } 
	tl2ˇpCmdReje˘_t
;

223 
uöt8
 *
pD©a
;

224 
uöt16
 
Àn
;

225 } 
	tl2ˇpEchoReq_t
;

230 
uöt8
 *
pD©a
;

231 
uöt16
 
Àn
;

232 } 
	tl2ˇpEchoR•_t
;

237 
uöt16
 
öfoTy≥
;

238 } 
	tl2ˇpInfoReq_t
;

243 
uöt16
 
c⁄√˘i⁄ÀssMTU
;

244 
uöt32
 
exãndedFótuªs
;

245 
uöt8
 
fixedCh™√ls
[
L2CAP_FIXED_CHANNELS_SIZE
];

246 } 
	tl2ˇpInfo_t
;

251 
uöt16
 
ªsu…
;

252 
uöt16
 
öfoTy≥
;

253 
l2ˇpInfo_t
 
öfo
;

254 } 
	tl2ˇpInfoR•_t
;

259 
uöt16
 
öãrvÆMö
;

260 
uöt16
 
öãrvÆMax
;

261 
uöt16
 
¶aveL©ícy
;

262 
uöt16
 
timeoutMu…ùlõr
;

263 } 
	tl2ˇpP¨amUpd©eReq_t
;

268 
uöt16
 
ªsu…
;

269 } 
	tl2ˇpP¨amUpd©eR•_t
;

275 
l2ˇpEchoReq_t
 
echoReq
;

276 
l2ˇpInfoReq_t
 
öfoReq
;

277 
l2ˇpP¨amUpd©eReq_t
 
upd©eReq
;

280 
l2ˇpCmdReje˘_t
 
cmdReje˘
;

281 
l2ˇpEchoR•_t
 
echoR•
;

282 
l2ˇpInfoR•_t
 
öfoR•
;

283 
l2ˇpP¨amUpd©eR•_t
 
upd©eR•
;

284 } 
	tl2ˇpSig«lCmd_t
;

290 
oßl_evít_hdr_t
 
hdr
;

291 
uöt16
 
c⁄nH™dÀ
;

292 
uöt8
 
id
;

293 
uöt8
 
›code
;

294 
l2ˇpSig«lCmd_t
 
cmd
;

295 } 
	tl2ˇpSig«lEvít_t
;

300 
uöt16
 
CID
;

301 
uöt8
 *
pPaylﬂd
;

304 
uöt16
 
Àn
;

305 } 
	tl2ˇpPackë_t
;

311 
oßl_evít_hdr_t
 
hdr
;

312 
uöt16
 
c⁄nH™dÀ
;

313 
l2ˇpPackë_t
 
pkt
;

314 } 
	tl2ˇpD©aEvít_t
;

327 
L2CAP_Inô
–
uöt8
 
èskId
 );

332 
uöt16
 
L2CAP_Pro˚ssEvít
–
uöt8
 
èskId
, uöt16 
evíts
 );

337 
bSètus_t
 
L2CAP_Regi°îAµ
–
uöt8
 
èskId
, 
uöt16
 
CID
 );

342 
bSètus_t
 
L2CAP_SídD©a
–
uöt16
 
c⁄nH™dÀ
, 
l2ˇpPackë_t
 *
pPkt
 );

347 
bSètus_t
 
L2CAP_CmdReje˘
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
id
, 
l2ˇpCmdReje˘_t
 *
pCmdReje˘
 );

352 
uöt16
 
L2CAP_BuûdCmdReje˘
–
uöt8
 *
pBuf
, uöt8 *
pCmd
 );

357 
bSètus_t
 
L2CAP_EchoReq
–
uöt16
 
c⁄nH™dÀ
, 
l2ˇpEchoReq_t
 *
pEchoReq
, 
uöt8
 
èskId
 );

362 
bSètus_t
 
L2CAP_InfoReq
–
uöt16
 
c⁄nH™dÀ
, 
l2ˇpInfoReq_t
 *
pInfoReq
, 
uöt8
 
èskId
 );

367 
uöt16
 
L2CAP_BuûdInfoR•
–
uöt8
 *
pBuf
, uöt8 *
pCmd
 );

372 
bSètus_t
 
L2CAP_P¨£InfoReq
–
l2ˇpSig«lCmd_t
 *
pCmd
, 
uöt8
 *
pD©a
, 
uöt16
 
Àn
 );

377 
bSètus_t
 
L2CAP_C⁄nP¨amUpd©eReq
–
uöt16
 
c⁄nH™dÀ
, 
l2ˇpP¨amUpd©eReq_t
 *
pUpd©eReq
, 
uöt8
 
èskId
 );

382 
bSètus_t
 
L2CAP_P¨£P¨amUpd©eReq
–
l2ˇpSig«lCmd_t
 *
pCmd
, 
uöt8
 *
pD©a
, 
uöt16
 
Àn
 );

387 
bSètus_t
 
L2CAP_C⁄nP¨amUpd©eR•
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
id
, 
l2ˇpP¨amUpd©eR•_t
 *
pUpd©eR•
 );

392 
uöt16
 
L2CAP_BuûdP¨amUpd©eR•
–
uöt8
 *
pBuf
, uöt8 *
pD©a
 );

397 *
L2CAP_bm_Æloc
–
uöt16
 
size
 );

403 
L2CAP_SëC⁄åﬁÀrToHo°FlowCål
–
uöt16
 
ho°BuffSize
, 
uöt8
 
ÊowCålMode
 );

410 
L2CAP_Ho°NumCom∂ëedPkts
–
uöt16
 
c⁄nH™dÀ
, uöt16 
numCom∂ëedPkts
 );

415 #ifde‡
__˝lu•lus


	@../../../../Components/ble/include/sm.h

42 #i‚de‡
SM_H


43 
	#SM_H


	)

45 #ifde‡
__˝lu•lus


53 
	~"bcomdef.h
"

54 
	~"OSAL.h
"

66 
	#DISPLAY_ONLY
 0x00

67 
	#DISPLAY_YES_NO
 0x01

68 
	#KEYBOARD_ONLY
 0x02

69 
	#NO_INPUT_NO_OUTPUT
 0x03

70 
	#KEYBOARD_DISPLAY
 0x04

71 

	)

73 
	#SM_AUTH_MITM_MASK
(
a
Ë((◊Ë& 0x04Ë>> 2)

	)

78 
	#SM_PASSKEY_TYPE_INPUT
 0x01

79 
	#SM_PASSKEY_TYPE_DISPLAY
 0x02

80 

	)

86 
	#SM_AUTH_REQ_NO_BONDING
 0x00

87 
	#SM_AUTH_REQ_BONDING
 0x01

88 

	)

90 
	#PASSKEY_LEN
 6

91 

	)

92 
	#SM_AUTH_STATE_AUTHENTICATED
 0x04

93 
	#SM_AUTH_STATE_BONDING
 0x01

94 

	)

105 
oßl_evít_hdr_t
 
hdr
;

106 
uöt8
 
√wKey
[
KEYLEN
];

107 } 
	tsmNewR™dKeyEvít_t
;

114 
sEncKey
:1;

115 
sIdKey
:1;

116 
sSign
:1;

117 
mEncKey
:1;

118 
mIdKey
:1;

119 
mSign
:1;

120 
ª£rved
:2;

121 } 
	tkeyDi°_t
;

128 
uöt8
 
ioC≠s
;

129 
uöt8
 
oobAvaûabÀ
;

130 
uöt8
 
oob
[
KEYLEN
];

131 
uöt8
 
authReq
;

132 
keyDi°_t
 
keyDi°
;

133 
uöt8
 
maxEncKeySize
;

134 } 
	tsmLökSecurôyReq_t
;

141 
uöt8
 
…k
[
KEYLEN
];

142 
uöt16
 
div
;

143 
uöt8
 
ønd
[
B_RANDOM_NUM_SIZE
];

144 
uöt8
 
keySize
;

145 } 
	tsmSecurôyInfo_t
;

152 
uöt8
 
úk
[
KEYLEN
];

153 
uöt8
 
bd_addr
[
B_ADDR_LEN
];

154 } 
	tsmIdítôyInfo_t
;

161 
uöt8
 
§k
[
KEYLEN
];

162 
uöt32
 
signCou¡î
;

163 } 
	tsmSignögInfo_t
;

170 
b⁄dög
:2;

171 
môm
:1;

172 
ª£rved
:5;

173 } 
	tauthReq_t
;

194 
bSètus_t
 
SM_Inôüt‹Inô
( );

211 
bSètus_t
 
SM_SèπPaúög
–
uöt8
 
öôüt‹
,

212 
uöt8
 
èskID
,

213 
uöt16
 
c⁄√˘i⁄H™dÀ
,

214 
smLökSecurôyReq_t
 *
pSecReqs
 );

229 
bSètus_t
 
SM_SèπEn¸y±i⁄
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 *
pLTK
,

230 
uöt16
 
div
, 
uöt8
 *
pR™dNum
, uöt8 
keyLí
 );

242 
bSètus_t
 
SM_Re•⁄dîInô
( );

258 
bSètus_t
 
SM_NewR™dKey
–
uöt8
 
èskID
 );

269 
bSètus_t
 
SM_CÆcR™domAddr
–
uöt8
 *
pIRK
, uöt8 *
pNewAddr
 );

281 
bSètus_t
 
SM_ResﬁveR™domAddrs
–
uöt8
 *
pIRK
, uöt8 *
pAddr
 );

295 
bSètus_t
 
SM_En¸y±
–
uöt8
 *
pKey
, uöt8 *
pPœöText
, uöt8 *
pResu…
 );

308 
bSètus_t
 
SM_Gíî©eAuthíSig
–
uöt8
 *
pD©a
, uöt8 
Àn
, uöt8 *
pAuthíSig
 );

325 
bSètus_t
 
SM_VîifyAuthíSig
–
uöt16
 
c⁄nH™dÀ
,

326 
uöt8
 
authítiˇti⁄
,

327 
uöt8
 *
pD©a
,

328 
uöt8
 
Àn
,

329 
uöt8
 *
pAuthíSig
 );

341 
bSètus_t
 
SM_PasskeyUpd©e
–
uöt8
 *
pPasskey
, 
uöt16
 
c⁄√˘i⁄H™dÀ
 );

360 
SM_Inô
–
uöt8
 
èsk_id
 );

372 
uöt16
 
SM_Pro˚ssEvít
–
uöt8
 
èsk_id
, uöt16 
evíts
 );

377 #ifde‡
__˝lu•lus


	@../../../../Components/hal/common/hal_assert.c

45 
	~"hÆ_as£π.h
"

46 
	~"hÆ_ty≥s.h
"

47 
	~"hÆ_bﬂrd.h
"

48 
	~"hÆ_defs.h
"

49 
	~"hÆ_mcu.h
"

51 #i‡(
deföed
 
HAL_MCU_AVR
Ë|| (deföed 
HAL_MCU_CC2430
Ë|| (deföed 
HAL_MCU_CC2530
) || \

52 (
deföed
 
	gHAL_MCU_CC2533
Ë|| (deföed 
	gHAL_MCU_MSP430
)

54 
	~"mac_rx.h
"

55 
	~"mac_tx.h
"

62 
hÆAs£πHaz¨dLights
();

75 
	$hÆAs£πH™dÀr
()

78 #ifde‡
ASSERT_RESET


79 
	`HAL_SYSTEM_RESET
();

80 #ñi‡!
deföed
 
ASSERT_WHILE


81 
	`hÆAs£πHaz¨dLights
();

85 
	}
}

87 #i‡!
deföed
 
ASSERT_WHILE


98 
	$hÆAs£πHaz¨dLights
()

102 
DEBUG_DATA_RSTACK_HIGH_OFS
,

103 
DEBUG_DATA_RSTACK_LOW_OFS
,

104 
DEBUG_DATA_TX_ACTIVE_OFS
,

105 
DEBUG_DATA_RX_ACTIVE_OFS
,

107 #i‡(
deföed
 
HAL_MCU_AVR
Ë|| (deföed 
HAL_MCU_CC2430
)

108 
DEBUG_DATA_INT_MASK_OFS
,

109 #ñi‡(
deföed
 
HAL_MCU_CC2530
Ë|| (deföed 
HAL_MCU_CC2533
)

110 
DEBUG_DATA_INT_MASK0_OFS
,

111 
DEBUG_DATA_INT_MASK1_OFS
,

114 
DEBUG_DATA_SIZE


117 
uöt8
 
buâ⁄Hñd
;

118 
uöt8
 
debugD©a
[
DEBUG_DATA_SIZE
];

121 
	`HAL_DISABLE_INTERRUPTS
();

126 
	`HAL_BOARD_INIT
();

128 
	`HAL_TURN_OFF_LED1
();

129 
	`HAL_TURN_OFF_LED2
();

130 
	`HAL_TURN_OFF_LED3
();

131 
	`HAL_TURN_OFF_LED4
();

138 
buâ⁄Hñd
 = 0;

145 
	`HAL_LED_BLINK_DELAY
();

148 #i‡(
HAL_NUM_LEDS
 >= 1)

149 
	`HAL_TOGGLE_LED1
();

150 #i‡(
HAL_NUM_LEDS
 >= 2)

151 
	`HAL_TOGGLE_LED2
();

152 #i‡(
HAL_NUM_LEDS
 >= 3)

153 
	`HAL_TOGGLE_LED3
();

154 #i‡(
HAL_NUM_LEDS
 >= 4)

155 
	`HAL_TOGGLE_LED4
();

163 
uöt8
 
esˇ≥
 = 0;

164 i‡(
esˇ≥
)

166 
esˇ≥
 = 0;

172 i‡(
	`HAL_PUSH_BUTTON1
())

174 
buâ⁄Hñd
++;

178 
buâ⁄Hñd
 = 0;

181 
buâ⁄Hñd
 != 10);

188 
	`HAL_TURN_OFF_LED1
();

189 
	`HAL_TURN_OFF_LED2
();

190 
	`HAL_TURN_OFF_LED3
();

191 
	`HAL_TURN_OFF_LED4
();

194 
	`HAL_DEBOUNCE
(!
	`HAL_PUSH_BUTTON1
());

199 #ifde‡
HAL_MCU_AVR


201 
uöt8
 * 
pSèck
;

202 
pSèck
 = (
uöt8
 *Ë
SP
;

203 
pSèck
++;

204 
debugD©a
[
DEBUG_DATA_RSTACK_HIGH_OFS
] = *
pSèck
;

205 
pSèck
++;

206 
debugD©a
[
DEBUG_DATA_RSTACK_LOW_OFS
] = *
pSèck
;

208 
debugD©a
[
DEBUG_DATA_INT_MASK_OFS
] = 
EIMSK
;

211 #i‡(
deföed
 
HAL_MCU_CC2430
)

212 
debugD©a
[
DEBUG_DATA_INT_MASK_OFS
] = 
RFIM
;

213 #ñi‡(
deföed
 
HAL_MCU_CC2530
Ë|| (deföed 
HAL_MCU_CC2533
)

214 
debugD©a
[
DEBUG_DATA_INT_MASK0_OFS
] = 
RFIRQM0
;

215 
debugD©a
[
DEBUG_DATA_INT_MASK1_OFS
] = 
RFIRQM1
;

219 #i‡(
deföed
 
HAL_MCU_AVR
Ë|| (deföed 
HAL_MCU_CC2430
Ë|| (deföed 
HAL_MCU_CC2530
) || \

220 (
deföed
 
HAL_MCU_CC2533
Ë|| (deföed 
HAL_MCU_MSP430
)

221 
debugD©a
[
DEBUG_DATA_TX_ACTIVE_OFS
] = 
macTxA˘ive
;

222 
debugD©a
[
DEBUG_DATA_RX_ACTIVE_OFS
] = 
macRxA˘ive
;

227 
uöt8
 
iBô
;

228 
uöt8
 
iByã
;

230 
iBô
 = 0;

231 
iByã
 = 0;

236 
iByã
 < 
DEBUG_DATA_SIZE
)

239 !
	`HAL_PUSH_BUTTON1
());

242 
	`HAL_TURN_ON_LED1
();

243 
	`HAL_TURN_ON_LED2
();

244 
	`HAL_TURN_ON_LED3
();

245 i‡(
iBô
 == 0)

247 
	`HAL_TURN_ON_LED4
();

251 
	`HAL_TURN_OFF_LED4
();

255 
	`HAL_DEBOUNCE
(!
	`HAL_PUSH_BUTTON1
());

258 
	`HAL_TURN_OFF_LED1
();

259 
	`HAL_TURN_OFF_LED2
();

260 
	`HAL_TURN_OFF_LED3
();

261 
	`HAL_TURN_OFF_LED4
();

264 i‡(
debugD©a
[
iByã
] & (1 << (7 - 
iBô
)))

266 
	`HAL_TURN_ON_LED1
();

270 
	`HAL_TURN_OFF_LED1
();

274 
iBô
++;

275 i‡(
iBô
 == 8)

277 
iBô
 = 0;

278 
iByã
++;

288 
	`HAL_TURN_OFF_LED1
();

290 
	}
}

299 
HAL_ASSERT_SIZE
–
öt8
, 1);

300 
HAL_ASSERT_SIZE
–
uöt8
, 1);

301 
HAL_ASSERT_SIZE
–
öt16
, 2);

302 
HAL_ASSERT_SIZE
(
uöt16
, 2);

303 
HAL_ASSERT_SIZE
–
öt32
, 4);

304 
HAL_ASSERT_SIZE
(
uöt32
, 4);

	@../../../../Components/hal/common/hal_drivers.c

44 
	~"hÆ_adc.h
"

45 #i‡(
deföed
 
HAL_AES
Ë&& (HAL_AES =
TRUE
)

46 
	~"hÆ_´s.h
"

48 #i‡(
deföed
 
HAL_BUZZER
Ë&& (HAL_BUZZER =
TRUE
)

49 
	~"hÆ_buzzî.h
"

51 #i‡(
deföed
 
HAL_DMA
Ë&& (HAL_DMA =
TRUE
)

52 
	~"hÆ_dma.h
"

54 
	~"hÆ_drivîs.h
"

55 
	~"hÆ_key.h
"

56 
	~"hÆ_lcd.h
"

57 
	~"hÆ_Àd.h
"

58 
	~"hÆ_¶ìp.h
"

59 
	~"hÆ_timî.h
"

60 
	~"hÆ_ty≥s.h
"

61 
	~"hÆ_u¨t.h
"

62 #ifde‡
CC2591_COMPRESSION_WORKAROUND


63 
	~"mac_rx.h
"

65 
	~"OSAL.h
"

66 #i‡
deföed
 
POWER_SAVING


67 
	~"OSAL_PwrMgr.h
"

69 #i‡(
deföed
 
HAL_HID
Ë&& (HAL_HID =
TRUE
)

70 
	~"usb_hid.h
"

72 #i‡(
deföed
 
HAL_SPI
Ë&& (HAL_SPI =
TRUE
)

73 
	~"hÆ_•i.h
"

79 
uöt8
 
	gHÆ_TaskID
;

81 
HÆLedUpd©e
( );

92 
	$HÆ_Inô
–
uöt8
 
èsk_id
 )

95 
HÆ_TaskID
 = 
èsk_id
;

97 #ifde‡
CC2591_COMPRESSION_WORKAROUND


98 
	`oßl_°¨t_ªlﬂd_timî
–
HÆ_TaskID
, 
PERIOD_RSSI_RESET_EVT
, 
PERIOD_RSSI_RESET_TIMEOUT
 );

100 
	}
}

111 
	$HÆDrivîInô
 ()

115 #i‡(
deföed
 
HAL_TIMER
Ë&& (HAL_TIMER =
TRUE
)

119 #i‡(
deföed
 
HAL_ADC
Ë&& (HAL_ADC =
TRUE
)

120 
	`HÆAdcInô
();

124 #i‡(
deföed
 
HAL_DMA
Ë&& (HAL_DMA =
TRUE
)

126 
	`HÆDmaInô
();

130 #i‡(
deföed
 
HAL_AES
Ë&& (HAL_AES =
TRUE
)

131 
	`HÆAesInô
();

135 #i‡(
deföed
 
HAL_LCD
Ë&& (HAL_LCD =
TRUE
)

136 
	`HÆLcdInô
();

140 #i‡(
deföed
 
HAL_LED
Ë&& (HAL_LED =
TRUE
)

141 
	`HÆLedInô
();

145 #i‡(
deföed
 
HAL_UART
Ë&& (HAL_UART =
TRUE
)

146 
	`HÆUARTInô
();

150 #i‡(
deföed
 
HAL_KEY
Ë&& (HAL_KEY =
TRUE
)

151 
	`HÆKeyInô
();

155 #i‡(
deföed
 
HAL_SPI
Ë&& (HAL_SPI =
TRUE
)

156 
sdÁsdÁs


157 
	`HÆSpiInô
();

161 #i‡(
deföed
 
HAL_HID
Ë&& (HAL_HID =
TRUE
)

162 
	`usbHidInô
();

164 
	}
}

176 
uöt16
 
	$HÆ_Pro˚ssEvít
–
uöt8
 
èsk_id
, 
uöt16
 
evíts
 )

178 
uöt8
 *
msgPå
;

180 ()
èsk_id
;

182 i‡–
evíts
 & 
SYS_EVENT_MSG
 )

184 
msgPå
 = 
	`oßl_msg_ª˚ive
(
HÆ_TaskID
);

186 
msgPå
)

191 
	`oßl_msg_dóŒoˇã
–
msgPå
 );

193 
msgPå
 = 
	`oßl_msg_ª˚ive
–
HÆ_TaskID
 );

195  
evíts
 ^ 
SYS_EVENT_MSG
;

198 #i‡(
deföed
 
HAL_BUZZER
Ë&& (HAL_BUZZER =
TRUE
)

199 i‡(
evíts
 & 
HAL_BUZZER_EVENT
)

201 
	`HÆBuzzîSt›
();

202  
evíts
 ^ 
HAL_BUZZER_EVENT
;

206 #ifde‡
CC2591_COMPRESSION_WORKAROUND


207 i‡–
evíts
 & 
PERIOD_RSSI_RESET_EVT
 )

209 
	`macRxRe£tRssi
();

210  (
evíts
 ^ 
PERIOD_RSSI_RESET_EVT
);

214 i‡–
evíts
 & 
HAL_LED_BLINK_EVENT
 )

216 #i‡(
	`deföed
 (
BLINK_LEDS
)Ë&& (
HAL_LED
 =
TRUE
)

217 
	`HÆLedUpd©e
();

219  
evíts
 ^ 
HAL_LED_BLINK_EVENT
;

222 i‡(
evíts
 & 
HAL_KEY_EVENT
)

224 #i‡(
deföed
 
HAL_KEY
Ë&& (HAL_KEY =
TRUE
)

226 
	`HÆKeyPﬁl
();

229 i‡(!
HÆ_KeyI¡E«bÀ
)

231 
	`oßl_°¨t_timîEx
–
HÆ_TaskID
, 
HAL_KEY_EVENT
, 100);

234  
evíts
 ^ 
HAL_KEY_EVENT
;

237 #i‡
deföed
 
POWER_SAVING


238 i‡–
evíts
 & 
HAL_SLEEP_TIMER_EVENT
 )

240 
	`hÆRe°‹eSÀïLevñ
();

241  
evíts
 ^ 
HAL_SLEEP_TIMER_EVENT
;

244 i‡–
evíts
 & 
HAL_PWRMGR_HOLD_EVENT
 )

246 ()
	`oßl_pwrmgr_èsk_°©e
(
HÆ_TaskID
, 
PWRMGR_HOLD
);

248 ()
	`oßl_°›_timîEx
(
HÆ_TaskID
, 
HAL_PWRMGR_CONSERVE_EVENT
);

249 ()
	`oßl_˛ór_evít
(
HÆ_TaskID
, 
HAL_PWRMGR_CONSERVE_EVENT
);

251  (
evíts
 & ~(
HAL_PWRMGR_HOLD_EVENT
 | 
HAL_PWRMGR_CONSERVE_EVENT
));

254 i‡–
evíts
 & 
HAL_PWRMGR_CONSERVE_EVENT
 )

256 ()
	`oßl_pwrmgr_èsk_°©e
(
HÆ_TaskID
, 
PWRMGR_CONSERVE
);

257  
evíts
 ^ 
HAL_PWRMGR_CONSERVE_EVENT
;

262 
	}
}

273 
	$HÆ_Pro˚ssPﬁl
 ()

275 #i‡
	`deföed
–
POWER_SAVING
 )

278 
	`ALLOW_SLEEP_MODE
();

282 #i‡(
deföed
 
HAL_UART
Ë&& (HAL_UART =
TRUE
)

283 
	`HÆUARTPﬁl
();

287 #i‡(
deföed
 
HAL_SPI
Ë&& (HAL_SPI =
TRUE
)

288 
	`HÆSpiPﬁl
();

292 #i‡(
deföed
 
HAL_HID
Ë&& (HAL_HID =
TRUE
)

293 
	`usbHidPro˚ssEvíts
();

296 
	}
}

	@../../../../Components/hal/include/hal_adc.h

40 #i‚de‡
HAL_ADC_H


41 
	#HAL_ADC_H


	)

43 #ifde‡
__˝lu•lus


52 
	~"hÆ_ty≥s.h
"

53 
	~"hÆ_bﬂrd.h
"

60 
	#HAL_ADC_RESOLUTION_8
 0x01

	)

61 
	#HAL_ADC_RESOLUTION_10
 0x02

	)

62 
	#HAL_ADC_RESOLUTION_12
 0x03

	)

63 
	#HAL_ADC_RESOLUTION_14
 0x04

	)

66 
	#HAL_ADC_CHANNEL_0
 0x00

	)

67 
	#HAL_ADC_CHANNEL_1
 0x01

	)

68 
	#HAL_ADC_CHANNEL_2
 0x02

	)

69 
	#HAL_ADC_CHANNEL_3
 0x03

	)

70 
	#HAL_ADC_CHANNEL_4
 0x04

	)

71 
	#HAL_ADC_CHANNEL_5
 0x05

	)

72 
	#HAL_ADC_CHANNEL_6
 0x06

	)

73 
	#HAL_ADC_CHANNEL_7
 0x07

	)

75 
	#HAL_ADC_CHN_AIN0
 0x00

	)

76 
	#HAL_ADC_CHN_AIN1
 0x01

	)

77 
	#HAL_ADC_CHN_AIN2
 0x02

	)

78 
	#HAL_ADC_CHN_AIN3
 0x03

	)

79 
	#HAL_ADC_CHN_AIN4
 0x04

	)

80 
	#HAL_ADC_CHN_AIN5
 0x05

	)

81 
	#HAL_ADC_CHN_AIN6
 0x06

	)

82 
	#HAL_ADC_CHN_AIN7
 0x07

	)

83 
	#HAL_ADC_CHN_A0A1
 0x08

	)

84 
	#HAL_ADC_CHN_A2A3
 0x09

	)

85 
	#HAL_ADC_CHN_A4A5
 0x0®

	)

86 
	#HAL_ADC_CHN_A6A7
 0x0b

	)

87 
	#HAL_ADC_CHN_GND
 0x0¯

	)

88 
	#HAL_ADC_CHN_VREF
 0x0d

	)

89 
	#HAL_ADC_CHN_TEMP
 0x0ê

	)

90 
	#HAL_ADC_CHN_VDD3
 0x0‡

	)

91 
	#HAL_ADC_CHN_BITS
 0x0‡

	)

93 
	#HAL_ADC_CHANNEL_TEMP
 
HAL_ADC_CHN_TEMP


	)

94 
	#HAL_ADC_CHANNEL_VDD
 
HAL_ADC_CHN_VDD3


	)

97 
	#HAL_ADC_VDD_LIMIT_0
 0x00

	)

98 
	#HAL_ADC_VDD_LIMIT_1
 0x01

	)

99 
	#HAL_ADC_VDD_LIMIT_2
 0x02

	)

100 
	#HAL_ADC_VDD_LIMIT_3
 0x03

	)

101 
	#HAL_ADC_VDD_LIMIT_4
 0x04

	)

102 
	#HAL_ADC_VDD_LIMIT_5
 0x05

	)

103 
	#HAL_ADC_VDD_LIMIT_6
 0x06

	)

104 
	#HAL_ADC_VDD_LIMIT_7
 0x07

	)

107 
	#HAL_ADC_REF_125V
 0x00

	)

108 
	#HAL_ADC_REF_AIN7
 0x40

	)

109 
	#HAL_ADC_REF_AVDD
 0x80

	)

110 
	#HAL_ADC_REF_DIFF
 0xc0

	)

111 
	#HAL_ADC_REF_BITS
 0xc0

	)

120 
HÆAdcInô
 ( );

125 
uöt16
 
HÆAdcRód
 ( 
uöt8
 
ch™√l
, uöt8 
ªsﬁuti⁄
 );

130 
HÆAdcSëRe„ªn˚
 ( 
uöt8
 
ª„ªn˚
 );

135 
boﬁ
 
HÆAdcCheckVdd
(
uöt8
 
vdd
);

140 #ifde‡
__˝lu•lus


	@../../../../Components/hal/include/hal_assert.h

40 #i‚de‡
HAL_ASSERT_H


41 
	#HAL_ASSERT_H


	)

67 #ifde‡
HALNODEBUG


68 
	#HAL_ASSERT
(
ex¥
)

	)

69 
	#HAL_ASSERT_FORCED
()

	)

70 
	#HAL_ASSERT_STATEMENT
(
°©emít
)

	)

71 
	#HAL_ASSERT_DECLARATION
(
de˛¨©i⁄
)

	)

73 
	#HAL_ASSERT
(
ex¥
Ë
	`°
–i‡(!–ex¥ )Ë
	`hÆAs£πH™dÀr
(); )

	)

74 
	#HAL_ASSERT_FORCED
(Ë
	`hÆAs£πH™dÀr
()

	)

75 
	#HAL_ASSERT_STATEMENT
(
°©emít
Ë
	`°
–°©emíà)

	)

76 
	#HAL_ASSERT_DECLARATION
(
de˛¨©i⁄
Ë
	)
declaration

91 
	#HAL_ASSERT_SIZE
(
x
,
y
Ë
	tx
 ## 
	t_as£π_size_t
[-1+10*((xË=(y))]

	)

98 
	thÆAs£πH™dÀr
();

109 
hÆAs£πHaz¨dLights
();

	@../../../../Components/hal/include/hal_board.h

1 
	~"hÆ_bﬂrd_cfg.h
"

	@../../../../Components/hal/include/hal_defs.h

40 #i‚de‡
HAL_DEFS_H


41 
	#HAL_DEFS_H


	)

49 #i‚de‡
BV


50 
	#BV
(
n
Ë(1 << (n))

	)

53 #i‚de‡
BF


54 
	#BF
(
x
,
b
,
s
Ë(((xË& (b)Ë>> (s))

	)

57 #i‚de‡
MIN


58 
	#MIN
(
n
,
m
Ë((“Ë< (m)Ë? (nË: (m))

	)

61 #i‚de‡
MAX


62 
	#MAX
(
n
,
m
Ë((“Ë< (m)Ë? (mË: (n))

	)

65 #i‚de‡
ABS


66 
	#ABS
(
n
Ë((“Ë< 0Ë? -“Ë: (n))

	)

71 
	#BREAK_UINT32
–
v¨
, 
ByãNum
 ) \

72 (
uöt8
)((
uöt32
)(((
v¨
Ë>>((
ByãNum
Ë* 8)Ë& 0x00FF))

	)

74 
	#BUILD_UINT32
(
Byã0
, 
Byã1
, 
Byã2
, 
Byã3
) \

75 ((
uöt32
)((uöt32)((
Byã0
) & 0x00FF) \

76 + ((
uöt32
)((
Byã1
) & 0x00FF) << 8) \

77 + ((
uöt32
)((
Byã2
) & 0x00FF) << 16) \

78 + ((
uöt32
)((
Byã3
Ë& 0x00FFË<< 24)))

	)

80 
	#BUILD_UINT16
(
loByã
, 
hiByã
) \

81 ((
uöt16
)(((
loByã
Ë& 0x00FFË+ (((
hiByã
Ë& 0x00FFË<< 8)))

	)

83 
	#HI_UINT16
(
a
Ë((◊Ë>> 8Ë& 0xFF)

	)

84 
	#LO_UINT16
(
a
Ë(◊Ë& 0xFF)

	)

86 
	#BUILD_UINT8
(
hiByã
, 
loByã
) \

87 ((
uöt8
)(((
loByã
Ë& 0x0FË+ (((
hiByã
Ë& 0x0FË<< 4)))

	)

89 
	#HI_UINT8
(
a
Ë((◊Ë>> 4Ë& 0x0F)

	)

90 
	#LO_UINT8
(
a
Ë(◊Ë& 0x0F)

	)

94 
	#UINT32_TO_BUF_LITTLE_ENDIAN
(
pBuf
,
vÆ
) \

96 *(
pBuf
)++ = (((
vÆ
) >> 0) & 0xFF); \

97 *(
pBuf
)++ = (((
vÆ
) >> 8) & 0xFF); \

98 *(
pBuf
)++ = (((
vÆ
) >> 16) & 0xFF); \

99 *(
pBuf
)++ = (((
vÆ
) >> 24) & 0xFF); \

100 } 0)

	)

103 
	#BUF_TO_UINT32_LITTLE_ENDIAN
(
pBuf
Ë((’BufË+4), 
	`BUILD_UINT32
(’Buf)[-4], (pBuf)[-3], (pBuf)[-2], (pBuf)[-1]))

	)

105 #i‚de‡
GET_BIT


106 
	#GET_BIT
(
DISCS
, 
IDX
Ë(((DISCS)[((IDXË/ 8)] & 
	`BV
((IDXË% 8)Ë? 
TRUE
 : 
FALSE
)

	)

108 #i‚de‡
SET_BIT


109 
	#SET_BIT
(
DISCS
, 
IDX
Ë(((DISCS)[((IDXË/ 8)] |
	`BV
((IDXË% 8)))

	)

111 #i‚de‡
CLR_BIT


112 
	#CLR_BIT
(
DISCS
, 
IDX
Ë(((DISCS)[((IDXË/ 8)] &(
	`BV
((IDXË% 8Ë^ 0xFF)))

	)

138 
	#°
(
x
Ëdÿ{ x } 
__LINE__
 =-1)

	)

	@../../../../Components/hal/include/hal_drivers.h

39 #i‚de‡
HAL_DRIVER_H


40 
	#HAL_DRIVER_H


	)

42 #ifde‡
__˝lu•lus


51 
	~"hÆ_ty≥s.h
"

57 
	#HAL_BUZZER_EVENT
 0x0080

	)

58 
	#PERIOD_RSSI_RESET_EVT
 0x0040

	)

59 
	#HAL_LED_BLINK_EVENT
 0x0020

	)

60 
	#HAL_KEY_EVENT
 0x0010

	)

62 #i‡
deföed
 
POWER_SAVING


63 
	#HAL_SLEEP_TIMER_EVENT
 0x0004

	)

64 
	#HAL_PWRMGR_HOLD_EVENT
 0x0002

	)

65 
	#HAL_PWRMGR_CONSERVE_EVENT
 0x0001

	)

68 
	#HAL_PWRMGR_CONSERVE_DELAY
 10

	)

69 
	#PERIOD_RSSI_RESET_TIMEOUT
 10

	)

75 
uöt8
 
HÆ_TaskID
;

81 
HÆ_Inô
 ( 
uöt8
 
èsk_id
 );

86 
uöt16
 
HÆ_Pro˚ssEvít
 ( 
uöt8
 
èsk_id
, uöt16 
evíts
 );

91 
HÆ_Pro˚ssPﬁl
 ();

96 
HÆDrivîInô
 ();

98 #ifde‡
__˝lu•lus


	@../../../../Components/hal/include/hal_flash.h

40 #i‚de‡
HAL_FLASH_H


41 
	#HAL_FLASH_H


	)

43 #ifde‡
__˝lu•lus


53 
	~"hÆ_bﬂrd.h
"

54 
	~"hÆ_ty≥s.h
"

75 
HÆFœshRód
(
uöt8
 
pg
, 
uöt16
 
off£t
, uöt8 *
buf
, uöt16 
˙t
);

95 
HÆFœshWrôe
(
uöt16
 
addr
, 
uöt8
 *
buf
, uöt16 
˙t
);

113 
HÆFœshEø£
(
uöt8
 
pg
);

115 #ifde‡
__˝lu•lus


	@../../../../Components/hal/include/hal_key.h

40 #i‚de‡
HAL_KEY_H


41 
	#HAL_KEY_H


	)

43 #ifde‡
__˝lu•lus


51 
	~"hÆ_bﬂrd.h
"

62 
	#HAL_KEY_INTERRUPT_DISABLE
 0x00

	)

63 
	#HAL_KEY_INTERRUPT_ENABLE
 0x01

	)

66 
	#HAL_KEY_STATE_NORMAL
 0x00

	)

67 
	#HAL_KEY_STATE_SHIFT
 0x01

	)

69 
	#HAL_KEY_SW_1
 0x01

70 
	#HAL_KEY_SW_2
 0x02

71 
	#HAL_KEY_SW_5
 0x04

72 
	#HAL_KEY_SW_4
 0x08

73 
	#HAL_KEY_SW_3
 0x10

74 

	)

75 
	#HAL_KEY_SW_6
 0x20

76 
	#HAL_KEY_SW_7
 0x40

77 

	)

79 
	#HAL_KEY_UP
 0x01

80 
	#HAL_KEY_RIGHT
 0x02

81 
	#HAL_KEY_CENTER
 0x04

82 
	#HAL_KEY_LEFT
 0x08

83 
	#HAL_KEY_DOWN
 0x10

84 

	)

86 
	#HAL_PUSH_BUTTON_RIGHT
 0x01

87 
	#HAL_PUSH_BUTTON_LEFT
 0x02

88 
	#HAL_PUSH_BUTTON_SELECT
 0x04

89 
	#HAL_KEY_BUTTON_UP
 0x40

90 
	#HAL_KEY_BUTTON_DOWN
 0x80

91 

	)

95 (*
hÆKeyCBack_t
Ë(
	tuöt8
 
	tkeys
, uöt8 
	t°©e
);

100 
boﬁ
 
HÆ_KeyI¡E«bÀ
;

109 
HÆKeyInô
( );

114 
HÆKeyC⁄fig
–
boﬁ
 
öãºu±E«bÀ
, c⁄° 
hÆKeyCBack_t
 
cback
);

119 
uöt8
 
HÆKeyRód
( );

124 
HÆKeyE¡îSÀï
 ( );

129 
uöt8
 
HÆKeyExôSÀï
 ( );

134 
HÆKeyPﬁl
 ( );

139 
boﬁ
 
HÆKeyPªs£d
( );

141 
uöt8
 
hÆ_key_keys
();

143 
uöt8
 
hÆ_key_öt_keys
();

148 #ifde‡
__˝lu•lus


	@../../../../Components/hal/include/hal_lcd.h

40 #i‚de‡
HAL_LCD_H


41 
	#HAL_LCD_H


	)

43 #ifde‡
__˝lu•lus


51 
	~"hÆ_bﬂrd.h
"

52 #i‡(
deföed
 
HAL_LCD
Ë&& (HAL_LCD =
TRUE
)

60 
	#HAL_LCD_LINE_1
 0x01

	)

61 
	#HAL_LCD_LINE_2
 0x02

	)

66 
	#HAL_LCD_LINE_3
 0x03

	)

67 
	#HAL_LCD_LINE_4
 0x04

	)

68 
	#HAL_LCD_LINE_5
 0x05

	)

69 
	#HAL_LCD_LINE_6
 0x06

	)

70 
	#HAL_LCD_LINE_7
 0x07

	)

71 
	#HAL_LCD_LINE_8
 0x08

	)

95 
HÆLcdInô
();

100 
HÆLcdWrôeSåög
 ( *
°r
, 
uöt8
 
›ti⁄
);

105 
HÆLcdWrôeVÆue
 ( 
uöt32
 
vÆue
, c⁄° 
uöt8
 
ødix
, uöt8 
›ti⁄
);

110 
HÆLcdWrôeS¸ìn
–*
löe1
, *
löe2
 );

115 
HÆLcdWrôeSåögVÆue
–*
tôÀ
, 
uöt16
 
vÆue
, 
uöt8
 
f‹m©
, uöt8 
löe
 );

120 
HÆLcdWrôeSåögVÆueVÆue
–*
tôÀ
, 
uöt16
 
vÆue1
, 
uöt8
 
f‹m©1
, uöt16 
vÆue2
, uöt8 
f‹m©2
, uöt8 
löe
 );

125 
HÆLcdDi•œyPî˚¡B¨
–*
tôÀ
, 
uöt8
 
vÆue
 );

131 #ifde‡
__˝lu•lus


	@../../../../Components/hal/include/hal_led.h

40 #i‚de‡
HAL_LED_H


41 
	#HAL_LED_H


	)

43 #ifde‡
__˝lu•lus


51 
	~"hÆ_bﬂrd.h
"

62 
	#HAL_LED_1
 0x01

	)

63 
	#HAL_LED_2
 0x02

	)

64 
	#HAL_LED_3
 0x04

	)

65 
	#HAL_LED_4
 0x08

	)

66 
	#HAL_LED_ALL
 (
HAL_LED_1
 | 
HAL_LED_2
 | 
HAL_LED_3
 | 
HAL_LED_4
)

	)

69 
	#HAL_LED_MODE_OFF
 0x00

	)

70 
	#HAL_LED_MODE_ON
 0x01

	)

71 
	#HAL_LED_MODE_BLINK
 0x02

	)

72 
	#HAL_LED_MODE_FLASH
 0x04

	)

73 
	#HAL_LED_MODE_TOGGLE
 0x08

	)

76 
	#HAL_LED_DEFAULT_MAX_LEDS
 4

	)

77 
	#HAL_LED_DEFAULT_DUTY_CYCLE
 5

	)

78 
	#HAL_LED_DEFAULT_FLASH_COUNT
 50

	)

79 
	#HAL_LED_DEFAULT_FLASH_TIME
 1000

	)

93 
HÆLedInô
( );

98 
uöt8
 
HÆLedSë
–uöt8 
Àd
, uöt8 
mode
 );

103 
HÆLedBlök
–
uöt8
 
Àds
, uöt8 
˙t
, uöt8 
duty
, 
uöt16
 
time
 );

108 
HÆLedE¡îSÀï
( );

113 
HÆLedExôSÀï
( );

118 
uöt8
 
HÆLedGëSèã
 ( );

123 #ifde‡
__˝lu•lus


	@../../../../Components/hal/include/hal_rpc.h

40 #i‚de‡
HAL_RPC_H


41 
	#HAL_RPC_H


	)

43 #ifde‡
__˝lu•lus


62 
	#RPC_CMD_POLL
 0x00

	)

63 
	#RPC_CMD_SREQ
 0x20

	)

64 
	#RPC_CMD_AREQ
 0x40

	)

65 
	#RPC_CMD_SRSP
 0x60

	)

66 
	#RPC_CMD_RES4
 0x80

	)

67 
	#RPC_CMD_RES5
 0xA0

	)

68 
	#RPC_CMD_RES6
 0xC0

	)

69 
	#RPC_CMD_RES7
 0xE0

	)

72 
	#RPC_SYS_RES0
 0

	)

73 
	#RPC_SYS_SYS
 1

	)

74 
	#RPC_SYS_MAC
 2

	)

75 
	#RPC_SYS_NWK
 3

	)

76 
	#RPC_SYS_AF
 4

	)

77 
	#RPC_SYS_ZDO
 5

	)

78 
	#RPC_SYS_SAPI
 6

79 
	#RPC_SYS_UTIL
 7

	)

80 
	#RPC_SYS_DBG
 8

	)

81 
	#RPC_SYS_APP
 9

	)

82 
	#RPC_SYS_RCAF
 10

83 
	#RPC_SYS_RCN
 11

84 
	#RPC_SYS_RCN_CLIENT
 12

85 
	#RPC_SYS_BOOT
 13

86 
	#RPC_SYS_MAX
 14

87 

	)

89 
	#RPC_FRAME_HDR_SZ
 3

	)

92 
	#RPC_CMD_TYPE_MASK
 0xE0

	)

95 
	#RPC_SUBSYSTEM_MASK
 0x1F

	)

98 
	#RPC_POS_LEN
 0

	)

99 
	#RPC_POS_CMD0
 1

	)

100 
	#RPC_POS_CMD1
 2

	)

101 
	#RPC_POS_DAT0
 3

	)

104 
	#RPC_SUCCESS
 0

	)

105 
	#RPC_ERR_SUBSYSTEM
 1

	)

106 
	#RPC_ERR_COMMAND_ID
 2

	)

107 
	#RPC_ERR_PARAMETER
 3

	)

108 
	#RPC_ERR_LENGTH
 4

	)

114 
	#RPC_UART_FRAME_OVHD
 2

	)

117 
	#RPC_UART_SOF
 0xFE

	)

132 #ifde‡
__˝lu•lus


	@../../../../Components/hal/include/hal_sleep.h

40 #i‚de‡
HAL_SLEEP_H


41 
	#HAL_SLEEP_H


	)

43 #ifde‡
__˝lu•lus


55 
hÆSÀï
–
uöt32
 
oßl_timî
 );

60 
hÆSÀïWaô
(
uöt16
 
duøti⁄
);

65 
hÆRe°‹eSÀïLevñ
( );

70 
hÆSÀïExô
();

75 
hÆSëMaxSÀïLo›Time
(
uöt32
 
rﬁlovîTime
);

80 #ifde‡
__˝lu•lus


	@../../../../Components/hal/include/hal_timer.h

40 #i‚de‡
HAL_TIMER_H


41 
	#HAL_TIMER_H


	)

43 #ifde‡
__˝lu•lus


51 
	~"hÆ_bﬂrd.h
"

63 
	#HAL_TIMER_0
 0x00

64 
	#HAL_TIMER_1
 0x01

65 
	#HAL_TIMER_2
 0x02

66 
	#HAL_TIMER_3
 0x03

67 
	#HAL_TIMER_MAX
 4

68 

	)

70 
	#HAL_TIMER_MODE_NORMAL
 0x01

71 
	#HAL_TIMER_MODE_CTC
 0x02

72 
	#HAL_TIMER_MODE_MASK
 (
HAL_TIMER_MODE_NORMAL
 | 
HAL_TIMER_MODE_CTC
)

	)

75 
	#HAL_T1_CH0
 0

	)

76 
	#HAL_T1_CH1
 1

	)

77 
	#HAL_T1_CH2
 2

	)

78 
	#HAL_T1_CH3
 3

	)

79 
	#HAL_T1_CH4
 4

	)

82 
	#HAL_TIMER_CHANNEL_SINGLE
 0x01

83 
	#HAL_TIMER_CHANNEL_A
 0x02

84 
	#HAL_TIMER_CHANNEL_B
 0x04

85 
	#HAL_TIMER_CHANNEL_C
 0x08

86 
	#HAL_TIMER_CHANNEL_D
 0x10

87 
	#HAL_TIMER_CHANNEL_E
 0x20

88 
	#HAL_TIMER_CHANNEL_MASK
 (
HAL_TIMER_CHANNEL_SINGLE
 | \

89 
HAL_TIMER_CHANNEL_A
 | \

90 
HAL_TIMER_CHANNEL_B
 | \

91 
HAL_TIMER_CHANNEL_C
 | \

92 
HAL_TIMER_CHANNEL_D
 | \

93 
HAL_TIMER_CHANNEL_E
)

	)

94 
	#HAL_TIMER_CH_MAX
 0x06

	)

97 
	#HAL_TIMER1_CH0_CMP_MODE_SET_ON_COMP
 0x00

98 
	#HAL_TIMER1_CH0_CMP_MODE_CLR_ON_COMP
 0x01

99 
	#HAL_TIMER1_CH0_CMP_MODE_TOG_ON_COMP
 0x02

100 
	#HAL_TIMER1_CH0_CMP_MODE_SET_ON_COMP_CLR_ON_0
 0x03

101 
	#HAL_TIMER1_CH0_CMP_MODE_CLR_ON_COMP_SET_ON_0
 0x04

102 
	#HAL_TIMER1_CH0_CMP_MODE_INIT
 0x07

103 

	)

105 
	#HAL_TIMER1_CHn_CMP_MODE_SET_ON_COMP
 0x00

106 
	#HAL_TIMER1_CHn_CMP_MODE_CLR_ON_COMP
 0x01

107 
	#HAL_TIMER1_CHn_CMP_MODE_TOG_ON_COMP
 0x02

108 
	#HAL_TIMER1_CHn_CMP_MODE_SET_ON_COMP_CLR_ON_0
 0x03

110 
	#HAL_TIMER1_CHn_CMP_MODE_CLR_ON_COMP_SET_ON_0
 0x04

112 
	#HAL_TIMER1_CHn_CMP_MODE_CLR_ON_CH0_SET_ON_CHn
 0x05

113 
	#HAL_TIMER1_CHn_CMP_MODE_SET_ON_CH0_CLR_ON_CHn
 0x06

114 
	#HAL_TIMER1_CHn_CMP_MODE_INIT
 0x07

115 
	#HAL_TIMER1_CH_CMP_MODE_BITS
 0x38

116 

	)

118 
	#HAL_TIMER1_CH_CAP_MODE_NO
 0x00

119 
	#HAL_TIMER1_CH_CAP_MODE_RISING
 0x01

120 
	#HAL_TIMER1_CH_CAP_MODE_FALLING
 0x02

121 
	#HAL_TIMER1_CH_CAP_MODE_ALL
 0x03

122 
	#HAL_TIMER1_CH_CAP_BITS
 0x03

123 

	)

125 
	#HAL_TIMER_CH_MODE_INPUT_CAPTURE
 0x01

126 
	#HAL_TIMER_CH_MODE_OUTPUT_COMPARE
 0x02

127 
	#HAL_TIMER_CH_MODE_OVERFLOW
 0x04

128 
	#HAL_TIMER_CH_MODE_MASK
 (
HAL_TIMER_CH_MODE_INPUT_CAPTURE
 | \

129 
HAL_TIMER_CH_MODE_OUTPUT_COMPARE
 | \

130 
HAL_TIMER_CH_MODE_OVERFLOW
)

	)

133 
	#HAL_TIMER_OK
 0x00

	)

134 
	#HAL_TIMER_NOT_OK
 0x01

	)

135 
	#HAL_TIMER_PARAMS_ERROR
 0x02

	)

136 
	#HAL_TIMER_NOT_CONFIGURED
 0x03

	)

137 
	#HAL_TIMER_INVALID_ID
 0x04

	)

138 
	#HAL_TIMER_INVALID_CH_MODE
 0x05

	)

139 
	#HAL_TIMER_INVALID_OP_MODE
 0x06

	)

142 
	#HAL_TIMER3_16_TC_STOP
 0x00

143 
	#HAL_TIMER3_16_TC_DIV1
 0x01

144 
	#HAL_TIMER3_16_TC_DIV8
 0x02

145 
	#HAL_TIMER3_16_TC_DIV64
 0x03

146 
	#HAL_TIMER3_16_TC_DIV256
 0x04

147 
	#HAL_TIMER3_16_TC_DIV1024
 0x05

148 
	#HAL_TIMER3_16_TC_EXTFE
 0x06

149 
	#HAL_TIMER3_16_TC_EXTRE
 0x07

150 

	)

152 
	#HAL_TIMER0_8_TC_STOP
 0x00

153 
	#HAL_TIMER0_8_TC_DIV1
 0x01

154 
	#HAL_TIMER0_8_TC_DIV8
 0x02

155 
	#HAL_TIMER0_8_TC_DIV32
 0x03

156 
	#HAL_TIMER0_8_TC_DIV64
 0x04

157 
	#HAL_TIMER0_8_TC_DIV128
 0x05

158 
	#HAL_TIMER0_8_TC_DIV256
 0x06

159 
	#HAL_TIMER0_8_TC_DIV1024
 0x07

160 

	)

162 
	#HAL_TIMER2_8_TC_STOP
 0x00

163 
	#HAL_TIMER2_8_TC_DIV1
 0x01

164 
	#HAL_TIMER2_8_TC_DIV8
 0x02

165 
	#HAL_TIMER2_8_TC_DIV64
 0x03

166 
	#HAL_TIMER2_8_TC_DIV256
 0x04

167 
	#HAL_TIMER2_8_TC_DIV1024
 0x05

168 
	#HAL_TIMER2_8_TC_EXTFE
 0x06

169 
	#HAL_TIMER2_8_TC_EXTRE
 0x07

170 

	)

175 (*
hÆTimîCBack_t
Ë(
	tuöt8
 
	ttimîId
, uöt8 
	tch™√l
, uöt8 
	tch™√lMode
);

189 
HÆTimîInô
 ( );

194 
uöt8
 
HÆTimîC⁄fig
 ( uöt8 
timîId
,

195 
uöt8
 
›Mode
,

196 
uöt8
 
ch™√l
,

197 
uöt8
 
ch™√lMode
,

198 
boﬁ
 
ötE«bÀ
,

199 
hÆTimîCBack_t
 
cback
 );

204 
uöt8
 
HÆTimîSèπ
 ( uöt8 
timîId
, 
uöt32
 
timePîTick
 );

209 
uöt8
 
HÆTimîSt›
 ( uöt8 
timîId
 );

215 
HÆTimîTick
 ( );

220 
uöt8
 
HÆTimîI¡îru±E«bÀ
 (uöt8 
timîId
, uöt8 
ch™√lMode
, 
boﬁ
 
íabÀ
);

225 
HÆTimî1Inô
 (
hÆTimîCBack_t
 
cBack
);

231 
hÆTimî1SëCh™√lDuty
 (
uöt8
 
ch™√l
, 
uöt16
 
¥omûl
);

236 #ifde‡
__˝lu•lus


	@../../../../Components/hal/include/hal_uart.h

40 #i‚de‡
HAL_UART_H


41 
	#HAL_UART_H


	)

43 #ifde‡
__˝lu•lus


51 
	~"hÆ_bﬂrd.h
"

68 
	#HAL_UART_BR_9600
 0x00

	)

69 
	#HAL_UART_BR_19200
 0x01

	)

70 
	#HAL_UART_BR_38400
 0x02

	)

71 
	#HAL_UART_BR_57600
 0x03

	)

72 
	#HAL_UART_BR_115200
 0x04

	)

77 
	#HAL_UART_ONE_STOP_BIT
 0x00

	)

78 
	#HAL_UART_TWO_STOP_BITS
 0x01

	)

81 
	#HAL_UART_NO_PARITY
 0x00

	)

82 
	#HAL_UART_EVEN_PARITY
 0x01

	)

83 
	#HAL_UART_ODD_PARITY
 0x02

	)

86 
	#HAL_UART_8_BITS_PER_CHAR
 0x00

	)

87 
	#HAL_UART_9_BITS_PER_CHAR
 0x01

	)

90 
	#HAL_UART_FLOW_OFF
 0x00

	)

91 
	#HAL_UART_FLOW_ON
 0x01

	)

94 
	#HAL_UART_PORT_0
 0x00

	)

95 
	#HAL_UART_PORT_1
 0x01

	)

96 
	#HAL_UART_PORT_MAX
 0x02

	)

99 
	#HAL_UART_SUCCESS
 0x00

	)

100 
	#HAL_UART_UNCONFIGURED
 0x01

	)

101 
	#HAL_UART_NOT_SUPPORTED
 0x02

	)

102 
	#HAL_UART_MEM_FAIL
 0x03

	)

103 
	#HAL_UART_BAUDRATE_ERROR
 0x04

	)

106 
	#HAL_UART_RX_FULL
 0x01

	)

107 
	#HAL_UART_RX_ABOUT_FULL
 0x02

	)

108 
	#HAL_UART_RX_TIMEOUT
 0x04

	)

109 
	#HAL_UART_TX_FULL
 0x08

	)

110 
	#HAL_UART_TX_EMPTY
 0x10

	)

116 (*
hÆUARTCBack_t
Ë(
	tuöt8
 
	tp‹t
, uöt8 
	tevít
);

121 vﬁ©ûê
uöt16
 
buf„rHód
;

122 vﬁ©ûê
uöt16
 
buf„rTaû
;

123 
uöt16
 
maxBufSize
;

124 
uöt8
 *
pBuf„r
;

125 } 
	thÆUARTBufC⁄åﬁ_t
;

129 
boﬁ
 
c⁄figuªd
;

130 
uöt8
 
baudR©e
;

131 
boﬁ
 
ÊowC⁄åﬁ
;

132 
uöt16
 
ÊowC⁄åﬁThªshﬁd
;

133 
uöt8
 
idÀTimeout
;

134 
hÆUARTBufC⁄åﬁ_t
 
rx
;

135 
hÆUARTBufC⁄åﬁ_t
 
tx
;

136 
boﬁ
 
ötE«bÀ
;

137 
uöt32
 
rxChRvdTime
;

138 
hÆUARTCBack_t
 
ˇŒBackFunc
;

139 }
	thÆUARTCfg_t
;

143 
boﬁ
 
∑ømCTS
;

144 
boﬁ
 
∑ømRTS
;

145 
boﬁ
 
∑ømDSR
;

146 
boﬁ
 
∑ømDTR
;

147 
boﬁ
 
∑ømCD
;

148 
boﬁ
 
∑ømRI
;

149 
uöt16
 
baudR©e
;

150 
boﬁ
 
ÊowC⁄åﬁ
;

151 
boﬁ
 
ÊushC⁄åﬁ
;

152 }
	thÆUARTIo˘l_t
;

166 
HÆUARTInô
 ( );

171 
uöt8
 
HÆUARTO≥n
 ( uöt8 
p‹t
, 
hÆUARTCfg_t
 *
c⁄fig
 );

176 
HÆUARTClo£
 ( 
uöt8
 
p‹t
 );

181 
uöt16
 
HÆUARTRód
 ( 
uöt8
 
p‹t
, uöt8 *
pBuf„r
, uöt16 
Àngth
 );

186 
uöt16
 
HÆUARTWrôe
 ( 
uöt8
 
p‹t
, uöt8 *
pBuf„r
, uöt16 
Àngth
 );

191 
uöt8
 
HÆUARTIo˘l
 ( uöt8 
p‹t
, uöt8 
cmd
, 
hÆUARTIo˘l_t
 *
pIo˘l
 );

196 
HÆUARTPﬁl
( );

201 
uöt16
 
HÆ_UART_RxBufLí
 ( 
uöt8
 
p‹t
 );

206 
uöt16
 
HÆ_UART_TxBufLí
 ( 
uöt8
 
p‹t
 );

211 
HÆ_UART_FlowC⁄åﬁSë
 ( 
uöt8
 
p‹t
, 
boﬁ
 
°©us
 );

216 
uöt8
 
HÆUART_HW_Inô
(uöt8 
p‹t
);

221 
HÆUARTSu•íd
();

226 
HÆUARTResume
();

231 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2540EB/_hal_uart_dma.c

50 
	~<°rög.h
>

52 
	~"hÆ_as£π.h
"

53 
	~"hÆ_bﬂrd.h
"

54 
	~"hÆ_defs.h
"

55 
	~"hÆ_dma.h
"

56 
	~"hÆ_mcu.h
"

57 
	~"hÆ_ty≥s.h
"

58 
	~"hÆ_u¨t.h
"

66 
	#CSR_MODE
 0x80

	)

67 
	#CSR_RE
 0x40

	)

68 
	#CSR_SLAVE
 0x20

	)

69 
	#CSR_FE
 0x10

	)

70 
	#CSR_ERR
 0x08

	)

71 
	#CSR_RX_BYTE
 0x04

	)

72 
	#CSR_TX_BYTE
 0x02

	)

73 
	#CSR_ACTIVE
 0x01

	)

76 
	#UCR_FLUSH
 0x80

	)

77 
	#UCR_FLOW
 0x40

	)

78 
	#UCR_D9
 0x20

	)

79 
	#UCR_BIT9
 0x10

	)

80 
	#UCR_PARITY
 0x08

	)

81 
	#UCR_SPB
 0x04

	)

82 
	#UCR_STOP
 0x02

	)

83 
	#UCR_START
 0x01

	)

85 
	#UTX0IE
 0x04

	)

86 
	#UTX1IE
 0x08

	)

88 
	#P2DIR_PRIPO
 0xC0

	)

90 
	#HAL_DMA_U0DBUF
 0x70C1

	)

91 
	#HAL_DMA_U1DBUF
 0x70F9

	)

93 #unde‡
UxCSR


94 #unde‡
UxUCR


95 #unde‡
UxDBUF


96 #unde‡
UxBAUD


97 #unde‡
UxGCR


98 #unde‡
UTXxIE


99 #unde‡
UTXxIF


100 #i‡ (
HAL_UART_DMA
 == 1)

101 
	#UxCSR
 
U0CSR


	)

102 
	#UxUCR
 
U0UCR


	)

103 
	#UxDBUF
 
U0DBUF


	)

104 
	#UxBAUD
 
U0BAUD


	)

105 
	#UxGCR
 
U0GCR


	)

106 
	#UTXxIE
 
UTX0IE


	)

107 
	#UTXxIF
 
UTX0IF


	)

108 #ñi‡ (
HAL_UART_DMA
 == 2)

109 
	#UxCSR
 
U1CSR


	)

110 
	#UxUCR
 
U1UCR


	)

111 
	#UxDBUF
 
U1DBUF


	)

112 
	#UxBAUD
 
U1BAUD


	)

113 
	#UxGCR
 
U1GCR


	)

114 
	#UTXxIE
 
UTX1IE


	)

115 
	#UTXxIF
 
UTX1IF


	)

118 #unde‡
PxSEL


119 #unde‡
HAL_UART_PERCFG_BIT


120 #unde‡
HAL_UART_PRIPO


121 #unde‡
HAL_UART_Px_CTS


122 #unde‡
HAL_UART_Px_RTS


123 #unde‡
HAL_UART_Px_SEL


125 #i‡ (
HAL_UART_DMA
 == 1)

127 
	#PxSEL
 
P0SEL


	)

128 
	#HAL_UART_PERCFG_BIT
 0x01

129 
	#HAL_UART_PRIPO
 0x00

130 
	#HAL_UART_Px_CTS
 0x10

131 
	#HAL_UART_Px_RTS
 0x20

132 
	#HAL_UART_Px_SEL
 0x0C

133 #ñi‡ (
HAL_UART_DMA
 =2)

	)

134 
	#PxSEL
 
P1SEL


	)

135 
	#HAL_UART_PERCFG_BIT
 0x02

136 
	#HAL_UART_PRIPO
 0x40

137 
	#HAL_UART_Px_CTS
 0x10

138 
	#HAL_UART_Px_RTS
 0x20

139 
	#HAL_UART_Px_SEL
 0xC0

141 

	)

142 #unde‡
DMA_PAD


143 #unde‡
DMA_UxDBUF


144 #unde‡
DMATRIG_RX


145 #unde‡
DMATRIG_TX


146 #i‡ (
HAL_UART_DMA
 == 1)

147 
	#DMA_PAD
 
U0BAUD


	)

148 
	#DMA_UxDBUF
 
HAL_DMA_U0DBUF


	)

149 
	#DMATRIG_RX
 
HAL_DMA_TRIG_URX0


	)

150 
	#DMATRIG_TX
 
HAL_DMA_TRIG_UTX0


	)

151 #ñi‡ (
HAL_UART_DMA
 == 2)

152 
	#DMA_PAD
 
U1BAUD


	)

153 
	#DMA_UxDBUF
 
HAL_DMA_U1DBUF


	)

154 
	#DMATRIG_RX
 
HAL_DMA_TRIG_URX1


	)

155 
	#DMATRIG_TX
 
HAL_DMA_TRIG_UTX1


	)

158 #unde‡
PxDIR


159 #unde‡
PxIEN


160 #unde‡
PxIFG


161 #unde‡
PxIF


162 #unde‡
PICTL_BIT


163 #unde‡
IENx


164 #unde‡
IEN_BIT


165 #i‡ (
HAL_UART_DMA
 == 1)

166 
	#PxDIR
 
P0DIR


	)

167 
	#PxIEN
 
P0IEN


	)

168 
	#PxIFG
 
P0IFG


	)

169 
	#PxIF
 
P0IF


	)

170 
	#DMA_RDYIn
 
P0_4


	)

171 
	#DMA_RDYOut
 
P0_5


	)

172 
	#DMA_RDYIn_BIT
 
	`BV
(4)

173 
	#DMA_RDYOut_BIT
 
	`BV
(5)

175 
	#PICTL_BIT
 
	`BV
(0)

	)

176 
	#IENx
 
IEN1


	)

177 
	#IEN_BIT
 
	`BV
(5)

	)

178 #ñi‡ (
HAL_UART_DMA
 == 2)

179 
	#PxDIR
 
P1DIR


	)

180 
	#PxIEN
 
P1IEN


	)

181 
	#PxIFG
 
P1IFG


	)

182 
	#PxIF
 
P1IF


	)

183 
	#DMA_RDYIn
 
P1_4


	)

184 
	#DMA_RDYOut
 
P1_5


	)

185 
	#DMA_RDYIn_BIT
 
	`BV
(4)

186 
	#DMA_RDYOut_BIT
 
	`BV
(5)

188 
	#PICTL_BIT
 
	`BV
(2)

	)

189 
	#IENx
 
IEN2


	)

190 
	#IEN_BIT
 
	`BV
(4)

	)

193 #i‡!
deföed
–
DMA_PM
 )

194 #i‡
deföed
 
POWER_SAVING


195 
	#DMA_PM
 1

	)

197 
	#DMA_PM
 0

	)

203 #i‡!
deföed
 
HAL_UART_TX_BY_ISR


204 
	#HAL_UART_TX_BY_ISR
 1

	)

215 
	#DMA_PM_DLY
 0

	)

218 
	#HAL_UART_MSECS_TO_TICKS
 33

	)

220 #i‡!
deföed
 
HAL_UART_DMA_RX_MAX


221 
	#HAL_UART_DMA_RX_MAX
 128

	)

223 #i‡!
deföed
 
HAL_UART_DMA_TX_MAX


224 
	#HAL_UART_DMA_TX_MAX
 
HAL_UART_DMA_RX_MAX


	)

226 #i‡!
deföed
 
HAL_UART_DMA_HIGH


227 
	#HAL_UART_DMA_HIGH
 (
HAL_UART_DMA_RX_MAX
 - 1)

	)

229 #i‡!
deföed
 
HAL_UART_DMA_IDLE


230 
	#HAL_UART_DMA_IDLE
 (0 * 
HAL_UART_MSECS_TO_TICKS
)

	)

232 #i‡!
deföed
 
HAL_UART_DMA_FULL


233 
	#HAL_UART_DMA_FULL
 (
HAL_UART_DMA_RX_MAX
 - 16)

	)

237 
	#HAL_UART_TX_TICK_MIN
 11

	)

244 #i‡
HAL_UART_DMA_RX_MAX
 <= 256

245 
uöt8
 
	trxIdx_t
;

247 
uöt16
 
	trxIdx_t
;

250 #i‡
HAL_UART_DMA_TX_MAX
 <= 256

251 
uöt8
 
	ttxIdx_t
;

253 
uöt16
 
	ttxIdx_t
;

258 
uöt16
 
	mrxBuf
[
HAL_UART_DMA_RX_MAX
];

259 
rxIdx_t
 
	mrxHód
;

260 
rxIdx_t
 
	mrxTaû
;

261 #i‡
HAL_UART_DMA_IDLE


262 
uöt8
 
	mrxTick
;

265 #i‡
HAL_UART_TX_BY_ISR


266 
uöt8
 
	mtxBuf
[
HAL_UART_DMA_TX_MAX
];

267 vﬁ©ûê
txIdx_t
 
	mtxHód
;

268 
txIdx_t
 
	mtxTaû
;

269 
uöt8
 
	mtxMT
;

271 
uöt8
 
	mtxBuf
[2][
HAL_UART_DMA_TX_MAX
];

272 
txIdx_t
 
	mtxIdx
[2];

273 
uöt8
 
	mtxMT
;

274 
uöt8
 
	mtxTick
;

275 
uöt8
 
	mtxTrig
;

279 vﬁ©ûê
uöt8
 
	mtxSñ
;

282 
hÆUARTCBack_t
 
	mu¨tCB
;

283 } 
	tu¨tDMACfg_t
;

290 
	#HAL_UART_DMA_NEW_RX_BYTE
(
IDX
Ë((
uöt8
)
DMA_PAD
 =
	`HI_UINT16
(
dmaCfg
.
rxBuf
[(IDX)]))

	)

291 
	#HAL_UART_DMA_GET_RX_BYTE
(
IDX
Ë(*(vﬁ©ûê
uöt8
 *)(
dmaCfg
.
rxBuf
+(IDX)))

	)

292 
	#HAL_UART_DMA_CLR_RX_BYTE
(
IDX
Ë(
dmaCfg
.
rxBuf
[(IDX)] = 
	`BUILD_UINT16
(0, (
DMA_PAD
 ^ 0xFF)))

	)

294 
	#HAL_UART_DMA_CLR_RDY_OUT
(Ë(
DMA_RDYOut
 = 1)

	)

295 
	#HAL_UART_DMA_SET_RDY_OUT
(Ë(
DMA_RDYOut
 = 0)

	)

297 
	#HAL_UART_DMA_RDY_IN
(Ë(
DMA_RDYIn
 =0)

	)

298 
	#HAL_UART_DMA_RDY_OUT
(Ë(
DMA_RDYOut
 =0)

	)

300 #i‡
HAL_UART_DMA_RX_MAX
 == 256

301 
	#HAL_UART_RX_IDX_T_DECR
(
IDX
Ë(IDX)--

	)

303 
	#HAL_UART_RX_IDX_T_DECR
(
IDX
Ë
	`°
 ( \

304 i‡((
IDX
)-- == 0) \

306 (
IDX
Ë
HAL_UART_DMA_RX_MAX
-1; \

308 )

	)

311 #i‡
HAL_UART_DMA_RX_MAX
 == 256

312 
	#HAL_UART_RX_IDX_T_INCR
(
IDX
Ë(IDX)++

	)

314 
	#HAL_UART_RX_IDX_T_INCR
(
IDX
Ë
	`°
 ( \

315 i‡(++(
IDX
Ë>
HAL_UART_DMA_RX_MAX
) \

317 (
IDX
) = 0; \

319 )

	)

322 
	#HAL_UART_DMA_TX_AVAIL
() \

323 ((
dmaCfg
.
txHód
 > dmaCfg.
txTaû
) ? \

324 (
dmaCfg
.
txHód
 - dmaCfg.
txTaû
 - 1) : \

325 (
HAL_UART_DMA_TX_MAX
 - 
dmaCfg
.
txTaû
 + dmaCfg.
txHód
 - 1))

	)

333 vﬁ©ûê
uöt8
 
	gdmaRdyI§
;

334 
uöt8
 
	gdmaRdyDly
;

336 
u¨tDMACfg_t
 
	gdmaCfg
;

343 
HÆUART_DMAI§DMA
();

351 
HÆUARTInôDMA
();

352 
HÆUARTO≥nDMA
(
hÆUARTCfg_t
 *
c⁄fig
);

353 
uöt16
 
HÆUARTRódDMA
(
uöt8
 *
buf
, uöt16 
Àn
);

354 
uöt16
 
HÆUARTWrôeDMA
(
uöt8
 *
buf
, uöt16 
Àn
);

355 
HÆUARTPﬁlDMA
();

356 
uöt16
 
HÆUARTRxAvaûDMA
();

357 
uöt8
 
HÆUARTBusyDMA
();

358 #i‡!
HAL_UART_TX_BY_ISR


359 
HÆUARTPﬁlTxTrigDMA
();

360 
HÆUARTArmTxDMA
();

372 
	$HÆUARTInôDMA
()

375 
hÆDMADesc_t
 *
ch
;

376 #i‡(
HAL_UART_DMA
 == 1)

378 
PERCFG
 &~
HAL_UART_PERCFG_BIT
;

380 
PERCFG
 |
HAL_UART_PERCFG_BIT
;

383 
PxSEL
 |
HAL_UART_Px_SEL
;

384 
UxCSR
 = 
CSR_MODE
;

385 
UxUCR
 = 
UCR_FLUSH
;

387 
P2DIR
 &~
P2DIR_PRIPO
;

388 
P2DIR
 |
HAL_UART_PRIPO
;

390 i‡(
DMA_PM
)

393 
PxIEN
 |
DMA_RDYIn_BIT
;

394 
PICTL
 |
PICTL_BIT
;

396 
	`HAL_UART_DMA_CLR_RDY_OUT
();

397 
PxDIR
 |
DMA_RDYOut_BIT
;

400 #i‡!
HAL_UART_TX_BY_ISR


402 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_CH_TX
 );

405 
	`HAL_DMA_ABORT_CH
–
HAL_DMA_CH_TX
 );

408 
	`HAL_DMA_SET_DEST
–
ch
, 
DMA_UxDBUF
 );

411 
	`HAL_DMA_SET_VLEN
–
ch
, 
HAL_DMA_VLEN_USE_LEN
 );

414 
	`HAL_DMA_SET_WORD_SIZE
–
ch
, 
HAL_DMA_WORDSIZE_BYTE
 );

417 
	`HAL_DMA_SET_TRIG_MODE
–
ch
, 
HAL_DMA_TMODE_SINGLE
 );

418 
	`HAL_DMA_SET_TRIG_SRC
–
ch
, 
DMATRIG_TX
 );

421 
	`HAL_DMA_SET_SRC_INC
–
ch
, 
HAL_DMA_SRCINC_1
 );

424 
	`HAL_DMA_SET_DST_INC
–
ch
, 
HAL_DMA_DSTINC_0
 );

427 
	`HAL_DMA_SET_IRQ
–
ch
, 
HAL_DMA_IRQMASK_ENABLE
 );

430 
	`HAL_DMA_SET_M8
–
ch
, 
HAL_DMA_M8_USE_8_BITS
 );

433 
	`HAL_DMA_SET_PRIORITY
–
ch
, 
HAL_DMA_PRI_HIGH
);

437 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_CH_RX
 );

440 
	`HAL_DMA_ABORT_CH
–
HAL_DMA_CH_RX
 );

443 
	`HAL_DMA_SET_SOURCE
–
ch
, 
DMA_UxDBUF
 );

446 
	`HAL_DMA_SET_VLEN
–
ch
, 
HAL_DMA_VLEN_USE_LEN
 );

455 
	`HAL_DMA_SET_WORD_SIZE
–
ch
, 
HAL_DMA_WORDSIZE_WORD
 );

458 
	`HAL_DMA_SET_TRIG_MODE
–
ch
, 
HAL_DMA_TMODE_SINGLE_REPEATED
 );

459 
	`HAL_DMA_SET_TRIG_SRC
–
ch
, 
DMATRIG_RX
 );

462 
	`HAL_DMA_SET_SRC_INC
–
ch
, 
HAL_DMA_SRCINC_0
 );

465 
	`HAL_DMA_SET_DST_INC
–
ch
, 
HAL_DMA_DSTINC_1
 );

466 
	`HAL_DMA_SET_DEST
–
ch
, 
dmaCfg
.
rxBuf
 );

467 
	`HAL_DMA_SET_LEN
–
ch
, 
HAL_UART_DMA_RX_MAX
 );

470 
	`HAL_DMA_SET_IRQ
–
ch
, 
HAL_DMA_IRQMASK_DISABLE
 );

473 
	`HAL_DMA_SET_M8
–
ch
, 
HAL_DMA_M8_USE_8_BITS
 );

476 
	`HAL_DMA_SET_PRIORITY
–
ch
, 
HAL_DMA_PRI_HIGH
);

478 vﬁ©ûê
uöt8
 
dummy
 = *(vﬁ©ûêuöt8 *)
DMA_UxDBUF
;

479 
	`HAL_DMA_CLEAR_IRQ
(
HAL_DMA_CH_RX
);

480 
	`HAL_DMA_ARM_CH
(
HAL_DMA_CH_RX
);

481 ()
	`mem£t
(
dmaCfg
.
rxBuf
, (
DMA_PAD
 ^ 0xFF), 
HAL_UART_DMA_RX_MAX
 * (
uöt16
));

482 
	}
}

493 
	$HÆUARTO≥nDMA
(
hÆUARTCfg_t
 *
c⁄fig
)

495 
dmaCfg
.
u¨tCB
 = 
c⁄fig
->
ˇŒBackFunc
;

498 
	`HAL_ASSERT
((
c⁄fig
->
baudR©e
 =
HAL_UART_BR_9600
) ||

499 (
c⁄fig
->
baudR©e
 =
HAL_UART_BR_19200
) ||

500 (
c⁄fig
->
baudR©e
 =
HAL_UART_BR_38400
) ||

501 (
c⁄fig
->
baudR©e
 =
HAL_UART_BR_57600
) ||

502 (
c⁄fig
->
baudR©e
 =
HAL_UART_BR_115200
));

504 i‡(
c⁄fig
->
baudR©e
 =
HAL_UART_BR_57600
 ||

505 
c⁄fig
->
baudR©e
 =
HAL_UART_BR_115200
)

507 
UxBAUD
 = 216;

511 
UxBAUD
 = 59;

514 
c⁄fig
->
baudR©e
)

516 
HAL_UART_BR_9600
:

517 
UxGCR
 = 8;

519 
HAL_UART_BR_19200
:

520 
UxGCR
 = 9;

522 
HAL_UART_BR_38400
:

523 
HAL_UART_BR_57600
:

524 
UxGCR
 = 10;

528 
UxGCR
 = 11;

532 i‡(
DMA_PM
 || 
c⁄fig
->
ÊowC⁄åﬁ
)

534 
UxUCR
 = 
UCR_FLOW
 | 
UCR_STOP
;

535 
PxSEL
 |
HAL_UART_Px_CTS
;

539 
UxUCR
 = 
UCR_STOP
;

542 
UxCSR
 = (
CSR_MODE
 | 
CSR_RE
);

544 i‡(
DMA_PM
)

546 
PxIFG
 = 0;

547 
PxIF
 = 0;

548 
IENx
 |
IEN_BIT
;

550 i‡(
UxUCR
 & 
UCR_FLOW
)

554 
	`HAL_UART_DMA_SET_RDY_OUT
();

555 
PxDIR
 |
HAL_UART_Px_RTS
;

558 #i‡
HAL_UART_TX_BY_ISR


559 
UTXxIF
 = 1;

561 
	}
}

573 
uöt16
 
	$HÆUARTRódDMA
(
uöt8
 *
buf
, 
uöt16
 
Àn
)

575 
uöt16
 
˙t
;

577 
˙t
 = 0; c¡ < 
Àn
; cnt++)

579 i‡(!
	`HAL_UART_DMA_NEW_RX_BYTE
(
dmaCfg
.
rxHód
))

583 *
buf
++ = 
	`HAL_UART_DMA_GET_RX_BYTE
(
dmaCfg
.
rxHód
);

584 
	`HAL_UART_DMA_CLR_RX_BYTE
(
dmaCfg
.
rxHód
);

585 
	`HAL_UART_RX_IDX_T_INCR
(
dmaCfg
.
rxHód
);

589 
dmaCfg
.
rxTaû
 = dmaCfg.
rxHód
;

591 i‡(!
DMA_PM
 && (
UxUCR
 & 
UCR_FLOW
))

593 
	`HAL_UART_DMA_SET_RDY_OUT
();

596  
˙t
;

597 
	}
}

610 
uöt16
 
	$HÆUARTWrôeDMA
(
uöt8
 *
buf
, 
uöt16
 
Àn
)

612 #i‡
HAL_UART_TX_BY_ISR


614 i‡(
	`HAL_UART_DMA_TX_AVAIL
(Ë< 
Àn
)

619 
uöt16
 
˙t
 = 0; c¡ < 
Àn
; cnt++)

621 
dmaCfg
.
txBuf
[dmaCfg.
txTaû
] = *
buf
++;

622 
dmaCfg
.
txMT
 = 0;

624 i‡(
dmaCfg
.
txTaû
 >
HAL_UART_DMA_TX_MAX
-1)

626 
dmaCfg
.
txTaû
 = 0;

630 
dmaCfg
.
txTaû
++;

634 
IEN2
 |
UTXxIE
;

637 
txIdx_t
 
txIdx
;

638 
uöt8
 
txSñ
;

639 
hÆI¡Sèã_t
 
his
;

641 
	`HAL_ENTER_CRITICAL_SECTION
(
his
);

642 
txSñ
 = 
dmaCfg
.txSel;

643 
txIdx
 = 
dmaCfg
.txIdx[
txSñ
];

644 
	`HAL_EXIT_CRITICAL_SECTION
(
his
);

647 i‡((
Àn
 + 
txIdx
Ë> 
HAL_UART_DMA_TX_MAX
)

652 ()
	`mem˝y
(&(
dmaCfg
.
txBuf
[
txSñ
][
txIdx
]), 
buf
, 
Àn
);

654 
	`HAL_ENTER_CRITICAL_SECTION
(
his
);

659 i‡(
txSñ
 !
dmaCfg
.txSel)

661 
	`HAL_EXIT_CRITICAL_SECTION
(
his
);

662 
txSñ
 ^= 1;

664 ()
	`mem˝y
(&(
dmaCfg
.
txBuf
[
txSñ
][0]), 
buf
, 
Àn
);

665 
	`HAL_ENTER_CRITICAL_SECTION
(
his
);

666 
dmaCfg
.
txIdx
[
txSñ
] = 
Àn
;

670 
dmaCfg
.
txIdx
[
txSñ
] =ÅxIdx + 
Àn
;

674 i‡(
dmaCfg
.
txIdx
[(
txSñ
 ^ 1)] == 0)

676 
	`HAL_EXIT_CRITICAL_SECTION
(
his
);

677 
	`HÆUARTArmTxDMA
();

681 
dmaCfg
.
txMT
 = 
FALSE
;

682 
	`HAL_EXIT_CRITICAL_SECTION
(
his
);

686  
Àn
;

687 
	}
}

699 
	$HÆUARTPﬁlDMA
()

701 
uöt8
 
evt
 = 0;

702 
uöt16
 
˙t
;

704 #i‡
DMA_PM


705 
PxIEN
 &~
DMA_RDYIn_BIT
;

707 i‡(
dmaRdyI§
 || 
	`HAL_UART_DMA_RDY_IN
(Ë|| 
	`HÆUARTBusyDMA
())

710 #i‡
HAL_UART_TX_BY_ISR


711 i‡(!
	`HAL_UART_DMA_RDY_IN
(Ë&& (
dmaCfg
.
txHód
 !dmaCfg.
txTaû
))

713 i‡(!
	`HAL_UART_DMA_RDY_IN
(Ë&& ((
dmaCfg
.
txIdx
[0] != 0) || (dmaCfg.txIdx[1] != 0)))

716 
	`HAL_UART_DMA_CLR_RDY_OUT
();

718 
dmaRdyI§
 = 0;

720 i‡(
dmaRdyDly
 == 0)

722 ()
	`oßl_£t_evít
(
HÆ_TaskID
, 
HAL_PWRMGR_HOLD_EVENT
);

725 i‡((
dmaRdyDly
 = 
ST0
) == 0)

727 
dmaRdyDly
 = 0xFF;

729 
	`HAL_UART_DMA_SET_RDY_OUT
();

731 i‡((
dmaRdyDly
 !0Ë&& (!
DMA_PM_DLY
 || ((
uöt8
)(
ST0
 - dmaRdyDly) > DMA_PM_DLY)))

733 
dmaRdyDly
 = 0;

734 ()
	`oßl_£t_evít
(
HÆ_TaskID
, 
HAL_PWRMGR_CONSERVE_EVENT
);

737 
PxIEN
 |
DMA_RDYIn_BIT
;

740 #i‡!
HAL_UART_TX_BY_ISR


741 
	`HÆUARTPﬁlTxTrigDMA
();

745 
˙t
 = 
	`HÆUARTRxAvaûDMA
();

747 #i‡
HAL_UART_DMA_IDLE


748 i‡(
dmaCfg
.
rxTick
)

751 i‡((
ST0
 - 
dmaCfg
.
rxTick
Ë> 
HAL_UART_DMA_IDLE
)

753 
dmaCfg
.
rxTick
 = 0;

754 
evt
 = 
HAL_UART_RX_TIMEOUT
;

757 i‡(
˙t
 != 0)

759 i‡((
dmaCfg
.
rxTick
 = 
ST0
) == 0)

761 
dmaCfg
.
rxTick
 = 0xFF;

765 i‡(
˙t
 != 0)

767 
evt
 = 
HAL_UART_RX_TIMEOUT
;

771 i‡(
˙t
 >
HAL_UART_DMA_FULL
)

773 
evt
 |
HAL_UART_RX_FULL
;

775 i‡(
˙t
 >
HAL_UART_DMA_HIGH
)

777 
evt
 |
HAL_UART_RX_ABOUT_FULL
;

779 i‡(!
DMA_PM
 && (
UxUCR
 & 
UCR_FLOW
))

781 
	`HAL_UART_DMA_CLR_RDY_OUT
();

785 i‡(
dmaCfg
.
txMT
)

787 
dmaCfg
.
txMT
 = 
FALSE
;

788 
evt
 |
HAL_UART_TX_EMPTY
;

791 i‡((
evt
 !0Ë&& (
dmaCfg
.
u¨tCB
 !
NULL
))

793 
dmaCfg
.
	`u¨tCB
(
HAL_UART_DMA
-1, 
evt
);

796 i‡(
DMA_PM
 && (
dmaRdyDly
 =0Ë&& !
	`HÆUARTBusyDMA
())

798 
	`HAL_UART_DMA_CLR_RDY_OUT
();

800 
	}
}

811 
rxIdx_t
 
	gswìpIdx
 = 0;

813 
uöt16
 
	$HÆUARTRxAvaûDMA
()

815 
uöt16
 
˙t
 = 0;

816 #i‚de‡
POWER_SAVING


817 
boﬁ
 
dëe˘OvîÊow
 = 
FALSE
;

820 
rxIdx_t
 
èû
 = 
dmaCfg
.
rxTaû
;

822 #i‚de‡
POWER_SAVING


823 i‡(!
DMA_PM
 && (
UxUCR
 & 
UCR_FLOW
))

825 
	`HAL_UART_DMA_CLR_RDY_OUT
();

831 i‡(!
	`HAL_UART_DMA_NEW_RX_BYTE
(
èû
))

837 
˙t
++;

840 
	`HAL_UART_RX_IDX_T_INCR
(
èû
);

841 } 
˙t
 < 
HAL_UART_DMA_RX_MAX
);

843 if(!
˙t
)

845 
swìpIdx
 < 
HAL_UART_DMA_RX_MAX
)

847 i‡(
	`HAL_UART_DMA_NEW_RX_BYTE
(
swìpIdx
))

849 
dmaCfg
.
rxTaû
 = 
swìpIdx
;

850 
dmaCfg
.
rxHód
 = 
swìpIdx
;

851 
˙t
 = 0;

852 #i‚de‡
POWER_SAVING


853 
dëe˘OvîÊow
 = 
TRUE
;

858 
swìpIdx
++;

861 i‡–
swìpIdx
 =
HAL_UART_DMA_RX_MAX
 )

863 
swìpIdx
 = 0;

867 #i‚de‡
POWER_SAVING


868 i‡–(!
DMA_PM
 && (
UxUCR
 & 
UCR_FLOW
)Ë&& (!
dëe˘OvîÊow
 ) )

870 
	`HAL_UART_DMA_SET_RDY_OUT
();

873  
˙t
;

874 
	}
}

885 
uöt8
 
	$HÆUARTBusyDMA
( )

887 #i‡
HAL_UART_TX_BY_ISR


888  !((!(
UxCSR
 & (
CSR_ACTIVE
 | 
CSR_RX_BYTE
))Ë&& (
	`HÆUARTRxAvaûDMA
() == 0) &&

889 (
dmaCfg
.
txHód
 =dmaCfg.
txTaû
));

891  !((!(
UxCSR
 & (
CSR_ACTIVE
 | 
CSR_RX_BYTE
))Ë&& (
	`HÆUARTRxAvaûDMA
() == 0) &&

892 (
dmaCfg
.
txIdx
[0] == 0) && (dmaCfg.txIdx[1] == 0));

894 
	}
}

896 #i‡!
HAL_UART_TX_BY_ISR


906 
	$HÆUARTPﬁlTxTrigDMA
()

908 i‡((
UxCSR
 & 
CSR_TX_BYTE
) == 0)

910 i‡((
dmaCfg
.
txTick
 =0Ë|| ((
uöt8
)(
ST0
 - dmaCfg.txTickË> 
HAL_UART_TX_TICK_MIN
))

912 
dmaCfg
.
txTick
 = 0;

914 i‡(
dmaCfg
.
txTrig
 && 
	`HAL_DMA_CH_ARMED
(
HAL_DMA_CH_TX
))

916 
	`HAL_DMA_MAN_TRIGGER
(
HAL_DMA_CH_TX
);

918 
dmaCfg
.
txTrig
 = 0;

923 
UxCSR
 = (
CSR_MODE
 | 
CSR_RE
);

924 
dmaCfg
.
txTick
 = 
ST0
;

926 i‡(
dmaCfg
.
txTick
 == 0)

928 
dmaCfg
.
txTick
 = 0xFF;

931 
	}
}

942 
	$HÆUARTArmTxDMA
()

944 
hÆDMADesc_t
 *
ch
 = 
	`HAL_DMA_GET_DESC1234
(
HAL_DMA_CH_TX
);

945 
	`HAL_DMA_SET_SOURCE
(
ch
, 
dmaCfg
.
txBuf
[dmaCfg.
txSñ
]);

946 
	`HAL_DMA_SET_LEN
(
ch
, 
dmaCfg
.
txIdx
[dmaCfg.
txSñ
]);

948 
dmaCfg
.
txSñ
 ^= 1;

949 
dmaCfg
.
txTrig
 = 1;

950 
	`HAL_DMA_ARM_CH
(
HAL_DMA_CH_TX
);

953 
	`asm
("nop");ásm("nop");ásm("nop");ásm("nop");ásm("nop");

954 
	`asm
("nop");ásm("nop");ásm("nop");ásm("nop");

956 
	`HÆUARTPﬁlTxTrigDMA
();

958 i‡(
DMA_PM
)

960 
	`HAL_UART_DMA_SET_RDY_OUT
();

962 
	}
}

974 
	$HÆUART_DMAI§DMA
()

976 #i‡!
HAL_UART_TX_BY_ISR


977 i‡(
dmaCfg
.
txIdx
[dmaCfg.
txSñ
])

980 
	`HÆUARTArmTxDMA
();

983 
dmaCfg
.
txIdx
[dmaCfg.
txSñ
] = 0;

987 
dmaCfg
.
txIdx
[(dmaCfg.
txSñ
 ^ 1)] = 0;

991 
	`HÆUARTPﬁlTxTrigDMA
();

994 
dmaCfg
.
txMT
 = 
TRUE
;

996 
	}
}

998 #i‡
DMA_PM


1008 #i‡(
HAL_UART_DMA
 == 1)

1009 
	$HAL_ISR_FUNCTION
(
p‹t0I§
, 
P0INT_VECTOR
)

1011 
	$HAL_ISR_FUNCTION
(
p‹t1I§
, 
P1INT_VECTOR
)

1014 
	`HAL_ENTER_ISR
();

1016 
PxIFG
 = 0;

1017 
PxIF
 = 0;

1019 
dmaRdyI§
 = 1;

1021 #ifde‡
POWER_SAVING


1022 
	`CLEAR_SLEEP_MODE
();

1023 ()
	`oßl_pwrmgr_èsk_°©e
(
HÆ_TaskID
, 
PWRMGR_HOLD
);

1025 #i‡
HAL_UART_TX_BY_ISR


1026 i‡–
dmaCfg
.
txHód
 =dmaCfg.
txTaû
 )

1028 
	`HAL_UART_DMA_CLR_RDY_OUT
();

1032 
	`HAL_EXIT_ISR
();

1033 
	}
}

1036 #i‡
HAL_UART_TX_BY_ISR


1046 #i‡(
HAL_UART_DMA
 == 1)

1047 
	$HAL_ISR_FUNCTION
–
hÆU¨t0TxI§
, 
UTX0_VECTOR
 )

1049 
	$HAL_ISR_FUNCTION
–
hÆU¨t1TxI§
, 
UTX1_VECTOR
 )

1052 
	`HAL_ENTER_ISR
();

1054 i‡(
dmaCfg
.
txHód
 =dmaCfg.
txTaû
)

1056 
IEN2
 &~
UTXxIE
;

1057 
dmaCfg
.
txMT
 = 1;

1061 
UTXxIF
 = 0;

1062 
UxDBUF
 = 
dmaCfg
.
txBuf
[dmaCfg.
txHód
++];

1064 i‡((
HAL_UART_DMA_TX_MAX
 !256Ë&& (
dmaCfg
.
txHód
 >= HAL_UART_DMA_TX_MAX))

1066 
dmaCfg
.
txHód
 = 0;

1070 
	`HAL_EXIT_ISR
();

1071 
	}
}

	@../../../../Components/hal/target/CC2540EB/_hal_uart_isr.c

47 
	~"hÆ_ty≥s.h
"

48 
	~"hÆ_as£π.h
"

49 
	~"hÆ_bﬂrd.h
"

50 
	~"hÆ_defs.h
"

51 
	~"hÆ_mcu.h
"

52 
	~"hÆ_u¨t.h
"

59 
	#HAL_UART_ASSERT
(
ex¥
)

	)

61 
	#HAL_UART_ISR_RX_AVAIL
() \

62 ((
i§Cfg
.
rxTaû
 >i§Cfg.
rxHód
) ? \

63 (
i§Cfg
.
rxTaû
 - i§Cfg.
rxHód
) : \

64 (
HAL_UART_ISR_RX_MAX
 - 
i§Cfg
.
rxHód
 + i§Cfg.
rxTaû
))

	)

66 
	#HAL_UART_ISR_TX_AVAIL
() \

67 ((
i§Cfg
.
txHód
 > i§Cfg.
txTaû
) ? \

68 (
i§Cfg
.
txHód
 - i§Cfg.
txTaû
 - 1) : \

69 (
HAL_UART_ISR_TX_MAX
 - 
i§Cfg
.
txTaû
 + i§Cfg.
txHód
 - 1))

	)

76 
	#CSR_MODE
 0x80

	)

77 
	#CSR_RE
 0x40

	)

78 
	#CSR_SLAVE
 0x20

	)

79 
	#CSR_FE
 0x10

	)

80 
	#CSR_ERR
 0x08

	)

81 
	#CSR_RX_BYTE
 0x04

	)

82 
	#CSR_TX_BYTE
 0x02

	)

83 
	#CSR_ACTIVE
 0x01

	)

86 
	#UCR_FLUSH
 0x80

	)

87 
	#UCR_FLOW
 0x40

	)

88 
	#UCR_D9
 0x20

	)

89 
	#UCR_BIT9
 0x10

	)

90 
	#UCR_PARITY
 0x08

	)

91 
	#UCR_SPB
 0x04

	)

92 
	#UCR_STOP
 0x02

	)

93 
	#UCR_START
 0x01

	)

95 
	#UTX0IE
 0x04

	)

96 
	#UTX1IE
 0x08

	)

98 
	#P2DIR_PRIPO
 0xC0

	)

101 #unde‡
PxOUT


102 #unde‡
PxDIR


103 #unde‡
PxSEL


104 #unde‡
UxCSR


105 #unde‡
UxUCR


106 #unde‡
UxDBUF


107 #unde‡
UxBAUD


108 #unde‡
UxGCR


109 #unde‡
URXxIE


110 #unde‡
URXxIF


111 #unde‡
UTXxIE


112 #unde‡
UTXxIF


113 #unde‡
HAL_UART_PERCFG_BIT


114 #unde‡
HAL_UART_Px_RTS


115 #unde‡
HAL_UART_Px_CTS


116 #unde‡
HAL_UART_Px_RX_TX


117 #unde‡
HAL_UART_Px_RX


118 #unde‡
PxIFG


119 #unde‡
PxIF


120 #unde‡
PxIEN


121 #unde‡
PICTL_BIT


122 #unde‡
IENx


123 #unde‡
IEN_BIT


124 #i‡(
HAL_UART_ISR
 == 1)

125 
	#PxOUT
 
P0


	)

126 
	#PxIN
 
P0


	)

127 
	#PxDIR
 
P0DIR


	)

128 
	#PxSEL
 
P0SEL


	)

129 
	#UxCSR
 
U0CSR


	)

130 
	#UxUCR
 
U0UCR


	)

131 
	#UxDBUF
 
U0DBUF


	)

132 
	#UxBAUD
 
U0BAUD


	)

133 
	#UxGCR
 
U0GCR


	)

134 
	#URXxIE
 
URX0IE


	)

135 
	#URXxIF
 
URX0IF


	)

136 
	#UTXxIE
 
UTX0IE


	)

137 
	#UTXxIF
 
UTX0IF


	)

139 
	#PxIFG
 
P0IFG


	)

140 
	#PxIF
 
P0IF


	)

141 
	#PxIEN
 
P0IEN


	)

142 
	#PICTL_BIT
 0x01

	)

143 
	#IENx
 
IEN1


	)

144 
	#IEN_BIT
 0x20

	)

147 
	#PxOUT
 
P1


	)

148 
	#PxIN
 
P1


	)

149 
	#PxDIR
 
P1DIR


	)

150 
	#PxSEL
 
P1SEL


	)

151 
	#UxCSR
 
U1CSR


	)

152 
	#UxUCR
 
U1UCR


	)

153 
	#UxDBUF
 
U1DBUF


	)

154 
	#UxBAUD
 
U1BAUD


	)

155 
	#UxGCR
 
U1GCR


	)

156 
	#URXxIE
 
URX1IE


	)

157 
	#URXxIF
 
URX1IF


	)

158 
	#UTXxIE
 
UTX1IE


	)

159 
	#UTXxIF
 
UTX1IF


	)

161 
	#PxIFG
 
P1IFG


	)

162 
	#PxIF
 
P1IF


	)

163 
	#PxIEN
 
P1IEN


	)

164 
	#PICTL_BIT
 0x04

	)

165 
	#IENx
 
IEN2


	)

166 
	#IEN_BIT
 0x10

	)

169 #i‡(
HAL_UART_ISR
 == 1)

170 
	#HAL_UART_PERCFG_BIT
 0x01

171 
	#HAL_UART_Px_RX_TX
 0x0C

172 
	#HAL_UART_Px_RX
 0x04

173 
	#HAL_UART_Px_RTS
 0x20

174 
	#HAL_UART_Px_CTS
 0x10

175 #ñ£

	)

176 
	#HAL_UART_PERCFG_BIT
 0x02

177 
	#HAL_UART_Px_RTS
 0x20

178 
	#HAL_UART_Px_CTS
 0x10

179 
	#HAL_UART_Px_RX_TX
 0xC0

180 
	#HAL_UART_Px_RX
 0x80

182 

	)

184 
	#HAL_UART_MSECS_TO_TICKS
 33

	)

186 #i‡!
deföed
 
HAL_UART_ISR_RX_MAX


187 
	#HAL_UART_ISR_RX_MAX
 128

	)

189 #i‡!
deföed
 
HAL_UART_ISR_TX_MAX


190 
	#HAL_UART_ISR_TX_MAX
 
HAL_UART_ISR_RX_MAX


	)

192 #i‡!
deföed
 
HAL_UART_ISR_HIGH


193 
	#HAL_UART_ISR_HIGH
 (
HAL_UART_ISR_RX_MAX
 / 2 - 16)

	)

195 #i‡!
deföed
 
HAL_UART_ISR_IDLE


196 
	#HAL_UART_ISR_IDLE
 (0 * 
HAL_UART_MSECS_TO_TICKS
)

	)

203 #i‡
HAL_UART_ISR_RX_MAX
 <= 256

204 
uöt8
 
	trxIdx_t
;

206 
uöt16
 
	trxIdx_t
;

209 #i‡
HAL_UART_ISR_TX_MAX
 <= 256

210 
uöt8
 
	ttxIdx_t
;

212 
uöt16
 
	ttxIdx_t
;

217 
uöt8
 
	mrxBuf
[
HAL_UART_ISR_RX_MAX
];

218 
rxIdx_t
 
	mrxHód
;

219 vﬁ©ûê
rxIdx_t
 
	mrxTaû
;

220 
uöt8
 
	mrxTick
;

221 
uöt8
 
	mrxShdw
;

223 
uöt8
 
	mtxBuf
[
HAL_UART_ISR_TX_MAX
];

224 vﬁ©ûê
txIdx_t
 
	mtxHód
;

225 
txIdx_t
 
	mtxTaû
;

226 
uöt8
 
	mtxMT
;

228 
hÆUARTCBack_t
 
	mu¨tCB
;

229 } 
	tu¨tISRCfg_t
;

235 
u¨tISRCfg_t
 
	gi§Cfg
;

241 
HÆUARTInôISR
();

242 
HÆUARTO≥nISR
(
hÆUARTCfg_t
 *
c⁄fig
);

243 
uöt16
 
HÆUARTRódISR
(
uöt8
 *
buf
, uöt16 
Àn
);

244 
uöt16
 
HÆUARTWrôeISR
(
uöt8
 *
buf
, uöt16 
Àn
);

245 
HÆUARTPﬁlISR
();

246 
uöt16
 
HÆUARTRxAvaûISR
();

247 
uöt8
 
HÆUARTBusyISR
();

248 
HÆUARTSu•ídISR
();

249 
HÆUARTResumeISR
();

260 
	$HÆUARTInôISR
()

263 
P2DIR
 &~
P2DIR_PRIPO
;

264 
P2DIR
 |
HAL_UART_PRIPO
;

266 #i‡(
HAL_UART_ISR
 == 1)

267 
PERCFG
 &~
HAL_UART_PERCFG_BIT
;

269 
PERCFG
 |
HAL_UART_PERCFG_BIT
;

271 
PxSEL
 |
HAL_UART_Px_RX_TX
;

272 
ADCCFG
 &~
HAL_UART_Px_RX_TX
;

273 
UxCSR
 = 
CSR_MODE
;

274 
UxUCR
 = 
UCR_FLUSH
;

275 
	}
}

286 
	$HÆUARTO≥nISR
(
hÆUARTCfg_t
 *
c⁄fig
)

288 
i§Cfg
.
u¨tCB
 = 
c⁄fig
->
ˇŒBackFunc
;

290 
	`HAL_UART_ASSERT
((
c⁄fig
->
baudR©e
 =
HAL_UART_BR_9600
) ||

291 (
c⁄fig
->
baudR©e
 =
HAL_UART_BR_19200
) ||

292 (
c⁄fig
->
baudR©e
 =
HAL_UART_BR_38400
) ||

293 (
c⁄fig
->
baudR©e
 =
HAL_UART_BR_57600
) ||

294 (
c⁄fig
->
baudR©e
 =
HAL_UART_BR_115200
));

296 i‡(
c⁄fig
->
baudR©e
 =
HAL_UART_BR_57600
 ||

297 
c⁄fig
->
baudR©e
 =
HAL_UART_BR_115200
)

299 
UxBAUD
 = 216;

303 
UxBAUD
 = 59;

306 
c⁄fig
->
baudR©e
)

308 
HAL_UART_BR_9600
:

309 
UxGCR
 = 8;

311 
HAL_UART_BR_19200
:

312 
UxGCR
 = 9;

314 
HAL_UART_BR_38400
:

315 
HAL_UART_BR_57600
:

316 
UxGCR
 = 10;

320 
UxGCR
 = 11;

325 i‡(
c⁄fig
->
ÊowC⁄åﬁ
)

327 
UxUCR
 = 
UCR_FLOW
 | 
UCR_STOP
;

328 
PxSEL
 |
HAL_UART_Px_RTS
 | 
HAL_UART_Px_CTS
;

329 
PxOUT
 &~
HAL_UART_Px_RTS
;

330 
PxDIR
 |
HAL_UART_Px_RTS
;

334 
UxUCR
 = 
UCR_STOP
;

337 
URXxIE
 = 1;

338 
UTXxIF
 = 1;

339 
UxCSR
 = (
CSR_MODE
 | 
CSR_RE
);

340 
	}
}

352 
uöt16
 
	$HÆUARTRódISR
(
uöt8
 *
buf
, 
uöt16
 
Àn
)

354 
uöt16
 
˙t
 = 0;

356 (
i§Cfg
.
rxHód
 !i§Cfg.
rxTaû
Ë&& (
˙t
 < 
Àn
))

358 *
buf
++ = 
i§Cfg
.
rxBuf
[i§Cfg.
rxHód
++];

359 i‡(
i§Cfg
.
rxHód
 >
HAL_UART_ISR_RX_MAX
)

361 
i§Cfg
.
rxHód
 = 0;

363 
˙t
++;

366  
˙t
;

367 
	}
}

379 
uöt16
 
	$HÆUARTWrôeISR
(
uöt8
 *
buf
, 
uöt16
 
Àn
)

381 
uöt16
 
˙t
;

384 i‡(
	`HAL_UART_ISR_TX_AVAIL
(Ë< 
Àn
)

389 
˙t
 = 0; c¡ < 
Àn
; cnt++)

391 
i§Cfg
.
txBuf
[i§Cfg.
txTaû
] = *
buf
++;

392 
i§Cfg
.
txMT
 = 0;

394 i‡(
i§Cfg
.
txTaû
 >
HAL_UART_ISR_TX_MAX
-1)

396 
i§Cfg
.
txTaû
 = 0;

400 
i§Cfg
.
txTaû
++;

404 
IEN2
 |
UTXxIE
;

407  
˙t
;

408 
	}
}

419 
	$HÆUARTPﬁlISR
()

421 
uöt16
 
˙t
 = 
	`HAL_UART_ISR_RX_AVAIL
();

422 
uöt8
 
evt
 = 0;

424 i‡(
i§Cfg
.
rxTick
)

427 
uöt8
 
de¸
 = 
ST0
 - 
i§Cfg
.
rxShdw
;

429 i‡(
i§Cfg
.
rxTick
 > 
de¸
)

431 
i§Cfg
.
rxTick
 -
de¸
;

435 
i§Cfg
.
rxTick
 = 0;

438 
i§Cfg
.
rxShdw
 = 
ST0
;

440 i‡(
˙t
 >
HAL_UART_ISR_RX_MAX
-1)

442 
evt
 = 
HAL_UART_RX_FULL
;

444 i‡(
˙t
 >
HAL_UART_ISR_HIGH
)

446 
evt
 = 
HAL_UART_RX_ABOUT_FULL
;

448 i‡(
˙t
 && !
i§Cfg
.
rxTick
)

450 
evt
 = 
HAL_UART_RX_TIMEOUT
;

453 i‡(
i§Cfg
.
txMT
)

455 
i§Cfg
.
txMT
 = 0;

456 
evt
 |
HAL_UART_TX_EMPTY
;

459 i‡(
evt
 && (
i§Cfg
.
u¨tCB
 !
NULL
))

461 
i§Cfg
.
	`u¨tCB
(
HAL_UART_ISR
-1, 
evt
);

463 
	}
}

474 
uöt16
 
	$HÆUARTRxAvaûISR
()

476  
	`HAL_UART_ISR_RX_AVAIL
();

477 
	}
}

488 
uöt8
 
	$HÆUARTBusyISR
( )

490  ((!(
UxCSR
 & (
CSR_ACTIVE
 | 
CSR_RX_BYTE
))) &&

491 (
i§Cfg
.
rxHód
 =i§Cfg.
rxTaû
Ë&& (i§Cfg.
txHód
 =i§Cfg.
txTaû
));

492 
	}
}

503 
	$HÆUARTSu•ídISR
( )

505 #i‡
deföed
 
POWER_SAVING


506 
UxCSR
 = 
CSR_MODE
;

508 i‡(
UxUCR
 & 
UCR_FLOW
)

510 
PxOUT
 |
HAL_UART_Px_RTS
;

511 
PxIFG
 = (
HAL_UART_Px_CTS
 ^ 0xFF);

512 
PxIEN
 |
HAL_UART_Px_CTS
;

516 
PxIFG
 = (
HAL_UART_Px_RX
 ^ 0xFF);

517 
PxIEN
 |
HAL_UART_Px_RX
;

520 #i‡
deföed
 
HAL_UART_GPIO_ISR


521 
PxIF
 = 0;

522 
PICTL
 |
PICTL_BIT
;

523 
IENx
 |
IEN_BIT
;

526 
	}
}

537 
	$HÆUARTResumeISR
( )

539 #i‡
deföed
 
POWER_SAVING


540 #i‡
deföed
 
HAL_UART_GPIO_ISR


541 
IENx
 &(
IEN_BIT
 ^ 0xFF);

544 i‡(
UxUCR
 & 
UCR_FLOW
)

546 
PxIEN
 &(
HAL_UART_Px_CTS
 ^ 0xFF);

547 
PxOUT
 &(
HAL_UART_Px_RTS
 ^ 0xFF);

551 
PxIEN
 &(
HAL_UART_Px_RX
 ^ 0xFF);

554 
UxUCR
 |
UCR_FLUSH
;

555 
UxCSR
 = (
CSR_MODE
 | 
CSR_RE
);

557 
	}
}

568 #i‡(
HAL_UART_ISR
 == 1)

569 
	$HAL_ISR_FUNCTION
–
hÆU¨t0RxI§
, 
URX0_VECTOR
 )

571 
	$HAL_ISR_FUNCTION
–
hÆU¨t1RxI§
, 
URX1_VECTOR
 )

574 
	`HAL_ENTER_ISR
();

576 
uöt8
 
tmp
 = 
UxDBUF
;

577 
i§Cfg
.
rxBuf
[i§Cfg.
rxTaû
] = 
tmp
;

580 i‡(
i§Cfg
.
rxHód
 =i§Cfg.
rxTaû
)

582 
i§Cfg
.
rxShdw
 = 
ST0
;

585 i‡(++
i§Cfg
.
rxTaû
 >
HAL_UART_ISR_RX_MAX
)

587 
i§Cfg
.
rxTaû
 = 0;

590 
i§Cfg
.
rxTick
 = 
HAL_UART_ISR_IDLE
;

592 
	`HAL_EXIT_ISR
();

593 
	}
}

604 #i‡(
HAL_UART_ISR
 == 1)

605 
	$HAL_ISR_FUNCTION
–
hÆU¨t0TxI§
, 
UTX0_VECTOR
 )

607 
	$HAL_ISR_FUNCTION
–
hÆU¨t1TxI§
, 
UTX1_VECTOR
 )

610 
	`HAL_ENTER_ISR
();

612 i‡(
i§Cfg
.
txHód
 =i§Cfg.
txTaû
)

614 
IEN2
 &~
UTXxIE
;

615 
i§Cfg
.
txMT
 = 1;

619 
UTXxIF
 = 0;

620 
UxDBUF
 = 
i§Cfg
.
txBuf
[i§Cfg.
txHód
++];

622 i‡(
i§Cfg
.
txHód
 >
HAL_UART_ISR_TX_MAX
)

624 
i§Cfg
.
txHód
 = 0;

628 
	`HAL_EXIT_ISR
();

629 
	}
}

631 #i‡(
deföed
 
POWER_SAVING
 && deföed 
HAL_UART_GPIO_ISR
)

641 #i‡(
HAL_UART_ISR
 == 1)

642 
	$HAL_ISR_FUNCTION
(
p‹t0I§
, 
P0INT_VECTOR
)

644 
	$HAL_ISR_FUNCTION
(
p‹t1I§
, 
P1INT_VECTOR
)

647 
	`HAL_ENTER_ISR
();

649 
	`HÆUARTResume
();

650 i‡(
dmaCfg
.
u¨tCB
 !
NULL
)

652 
dmaCfg
.
	`u¨tCB
(
HAL_UART_DMA
-1, 
HAL_UART_RX_WAKEUP
);

654 
PxIFG
 = 0;

655 
PxIF
 = 0;

657 
	`HAL_EXIT_ISR
();

658 
	}
}

	@../../../../Components/hal/target/CC2540EB/_hal_uart_spi.c

68 
	~<°rög.h
>

70 
	~"hÆ_as£π.h
"

71 
	~"hÆ_bﬂrd.h
"

72 
	~"hÆ_defs.h
"

73 
	~"hÆ_drivîs.h
"

74 
	~"hÆ_dma.h
"

75 
	~"hÆ_mcu.h
"

76 
	~"hÆ_ty≥s.h
"

77 
	~"hÆ_u¨t.h
"

78 #i‡
deföed
 
POWER_SAVING


79 
	~"OSAL.h
"

80 
	~"OSAL_PwrMgr.h
"

91 #i‡!
deföed
 
HAL_SPI_CH_RX


92 
	#HAL_SPI_CH_RX
 
HAL_DMA_CH_RX


	)

94 #i‡!
deföed
 
HAL_SPI_CH_TX


95 
	#HAL_SPI_CH_TX
 
HAL_DMA_CH_TX


	)

101 #i‡!
deföed
 
HAL_SPI_ON_UART_BUFS


102 
	#HAL_SPI_ON_UART_BUFS
 
FALSE


	)

105 
	#SPI_MAX_PKT_LEN
 256

	)

106 
	#SPI_MAX_DAT_LEN
 (
SPI_MAX_PKT_LEN
 - 
SPI_FRM_LEN
)

	)

108 
	#SPI_SOF
 0xFE

	)

111 
	#SPI_HDR_LEN
 1

	)

113 
	#SPI_FRM_LEN
 (2 + 
SPI_HDR_LEN
)

	)

115 
	#SPI_SOF_IDX
 0

	)

116 
	#SPI_HDR_IDX
 1

	)

117 
	#SPI_LEN_IDX
 1

	)

118 
	#SPI_DAT_IDX
 2

	)

121 
	#CSR_MODE
 0x80

	)

122 
	#CSR_RE
 0x40

	)

123 
	#CSR_SLAVE
 0x20

	)

124 
	#CSR_FE
 0x10

	)

125 
	#CSR_ERR
 0x08

	)

126 
	#CSR_RX_BYTE
 0x04

	)

127 
	#CSR_TX_BYTE
 0x02

	)

128 
	#CSR_ACTIVE
 0x01

	)

131 
	#UCR_FLUSH
 0x80

	)

132 
	#UCR_FLOW
 0x40

	)

133 
	#UCR_D9
 0x20

	)

134 
	#UCR_BIT9
 0x10

	)

135 
	#UCR_PARITY
 0x08

	)

136 
	#UCR_SPB
 0x04

	)

137 
	#UCR_STOP
 0x02

	)

138 
	#UCR_START
 0x01

	)

140 
	#P2DIR_PRIPO
 0xC0

	)

142 
	#HAL_DMA_U0DBUF
 0x70C1

	)

143 
	#HAL_DMA_U1DBUF
 0x70F9

	)

145 #unde‡
UxCSR


146 #unde‡
UxUCR


147 #unde‡
UxDBUF


148 #unde‡
UxBAUD


149 #unde‡
UxGCR


150 #i‡ (
HAL_UART_SPI
 == 1)

151 
	#UxCSR
 
U0CSR


	)

152 
	#UxUCR
 
U0UCR


	)

153 
	#UxDBUF
 
U0DBUF


	)

154 
	#UxBAUD
 
U0BAUD


	)

155 
	#UxGCR
 
U0GCR


	)

156 #ñi‡ (
HAL_UART_SPI
 == 2)

157 
	#UxCSR
 
U1CSR


	)

158 
	#UxUCR
 
U1UCR


	)

159 
	#UxDBUF
 
U1DBUF


	)

160 
	#UxBAUD
 
U1BAUD


	)

161 
	#UxGCR
 
U1GCR


	)

164 #unde‡
PxSEL


165 #unde‡
HAL_UART_PERCFG_BIT


166 #unde‡
HAL_UART_PRIPO


167 #unde‡
HAL_UART_Px_SEL_S


168 #unde‡
HAL_UART_Px_SEL_M


169 #i‡ (
HAL_UART_SPI
 == 1)

170 
	#PxSEL
 
P0SEL


	)

171 
	#HAL_UART_PERCFG_BIT
 0x01

	)

172 
	#HAL_UART_PRIPO
 0x00

	)

173 
	#HAL_UART_Px_SEL_S
 0x3C

	)

174 
	#HAL_UART_Px_SEL_M
 0x2C

	)

175 #ñi‡ (
HAL_UART_SPI
 == 2)

176 
	#PxSEL
 
P1SEL


	)

177 
	#HAL_UART_PERCFG_BIT
 0x02

	)

178 
	#HAL_UART_PRIPO
 0x40

	)

179 
	#HAL_UART_Px_SEL_S
 0xF0

	)

180 
	#HAL_UART_Px_SEL_M
 0xE0

	)

183 #unde‡
DMA_PAD


184 #unde‡
DMA_UxDBUF


185 #unde‡
DMATRIG_RX


186 #unde‡
DMATRIG_TX


187 #i‡ (
HAL_UART_SPI
 == 1)

188 
	#DMA_PAD
 
U0BAUD


	)

189 
	#DMA_UxDBUF
 
HAL_DMA_U0DBUF


	)

190 
	#DMATRIG_RX
 
HAL_DMA_TRIG_URX0


	)

191 
	#DMATRIG_TX
 
HAL_DMA_TRIG_UTX0


	)

192 #ñi‡ (
HAL_UART_SPI
 == 2)

193 
	#DMA_PAD
 
U1BAUD


	)

194 
	#DMA_UxDBUF
 
HAL_DMA_U1DBUF


	)

195 
	#DMATRIG_RX
 
HAL_DMA_TRIG_URX1


	)

196 
	#DMATRIG_TX
 
HAL_DMA_TRIG_UTX1


	)

199 #unde‡
PxIEN


200 #unde‡
PxIFG


201 #unde‡
PxIF


202 #unde‡
PICTL_BIT


203 #unde‡
IENx


204 #unde‡
IEN_BIT


208 #i‡
deföed
 
HAL_SPI_MASTER


211 
	#PxIEN
 
P0IEN


	)

212 
	#PxIFG
 
P0IFG


	)

213 
	#PxIF
 
P0IF


	)

214 
	#SPI_RDYIn
 
P0_1


	)

215 
	#SPI_RDYIn_BIT
 
	`BV
(1)

	)

217 
	#PICTL_BIT
 
	`BV
(0)

	)

218 
	#IENx
 
IEN1


	)

219 
	#IEN_BIT
 
	`BV
(5)

	)

221 #ñi‡ (
HAL_UART_SPI
 == 2)

222 
	#PxIEN
 
P1IEN


	)

223 
	#PxIFG
 
P1IFG


	)

224 
	#PxIF
 
P1IF


	)

225 
	#SPI_RDYIn
 
P1_4


	)

226 
	#SPI_RDYIn_BIT
 
	`BV
(4)

	)

228 
	#PICTL_BIT
 
	`BV
(2)

	)

229 
	#IENx
 
IEN2


	)

230 
	#IEN_BIT
 
	`BV
(4)

	)

232 #ñi‡ (
HAL_UART_SPI
 == 1)

233 
	#PxIEN
 
P0IEN


	)

234 
	#PxIFG
 
P0IFG


	)

235 
	#PxIF
 
P0IF


	)

236 
	#SPI_RDYIn
 
P0_4


	)

237 
	#SPI_RDYIn_BIT
 
	`BV
(4)

	)

239 
	#PICTL_BIT
 
	`BV
(0)

	)

240 
	#IENx
 
IEN1


	)

241 
	#IEN_BIT
 
	`BV
(5)

	)

244 #unde‡
PxDIR


245 #i‡
deföed
 
HAL_SPI_MASTER


246 #i‡(
HAL_UART_SPI
 == 2)

248 
	#PxDIR
 
P1DIR


	)

249 
	#SPI_RDYOut
 
P1_4


	)

250 
	#SPI_RDYOut_BIT
 
	`BV
(4)

	)

251 #ñi‡–
HAL_UART_SPI
 == 1)

253 
	#PxDIR
 
P0DIR


	)

254 
	#SPI_RDYOut
 
P0_4


	)

255 
	#SPI_RDYOut_BIT
 
	`BV
(4)

	)

258 #ñi‡ (
HAL_UART_SPI
 == 2)

259 
	#PxDIR
 
P0DIR


	)

260 
	#SPI_RDYOut
 
P0_5


	)

261 
	#SPI_RDYOut_BIT
 
	`BV
(5)

	)

262 #ñi‡ (
HAL_UART_SPI
 == 1)

263 
	#PxDIR
 
P1DIR


	)

264 
	#SPI_RDYOut
 
P1_1


	)

265 
	#SPI_RDYOut_BIT
 
	`BV
(1)

	)

273 #i‡(
SPI_MAX_PKT_LEN
 <= 256)

274 
uöt8
 
	t•iLí_t
;

276 
uöt16
 
	t•iLí_t
;

281 
	mSPIRX_STATE_SOF
,

282 
	mSPIRX_STATE_LEN
,

283 
	mSPIRX_STATE_DATA
,

284 
	mSPIRX_STATE_FCS


285 } 
	t•iRxSã_t
;

292 #i‡
SPI_MAX_PKT_LEN
 == 256

293 
	#SPI_LEN_T_INCR
(
LEN
Ë(LEN)++

	)

295 
	#SPI_LEN_T_INCR
(
LEN
Ë
	`°
 ( \

296 i‡(++(
LEN
Ë>
SPI_MAX_PKT_LEN
) \

298 (
LEN
) = 0; \

300 )

	)

303 
	#SPI_CLR_RX_BYTE
(
IDX
Ë(
•iRxBuf
[(IDX)] = 
	`BUILD_UINT16
(0, (
DMA_PAD
 ^ 0xFF)))

	)

304 
	#SPI_GET_RX_BYTE
(
IDX
Ë(*(vﬁ©ûê
uöt8
 *)(
•iRxBuf
+(IDX)))

	)

305 
	#SPI_NEW_RX_BYTE
(
IDX
Ë((
uöt8
)
DMA_PAD
 =
	`HI_UINT16
(
•iRxBuf
[(IDX)]))

	)

307 
	#SPI_DAT_LEN
(
PBUF
Ë((PBUF)[
SPI_LEN_IDX
])

	)

308 
	#SPI_PKT_LEN
(
PBUF
Ë(
	`SPI_DAT_LEN
((PBUF)Ë+ 
SPI_FRM_LEN
)

	)

310 
	#SPI_RDY_IN
(Ë(
SPI_RDYIn
 =0)

	)

311 
	#SPI_RDY_OUT
(Ë(
SPI_RDYOut
 =0)

	)

313 #i‡
deföed
 
HAL_SPI_MASTER


314 
	#SPI_CLR_CSn_OUT
(Ë(
SPI_RDYOut
 = 1)

	)

315 
	#SPI_SET_CSn_OUT
(Ë(
SPI_RDYOut
 = 0)

	)

317 
	#SPI_CLOCK_RX
(
CNT
Ë
	`°
 ( \

318 
	`SPI_SET_CSn_OUT
(); \

320 
•iLí_t
 
˙t
 = 0; c¡ < (
CNT
); cnt++) \

322 
UxDBUF
 = 0; \

323 
UxCSR
 & 
CSR_ACTIVE
); \

326 
	`SPI_CLR_CSn_OUT
(); \

327 )

	)

328 
	#SPI_CLR_RDY_OUT
(Ë
	`SPI_CLR_CSn_OUT
()

	)

330 #ñi‡!
deföed
 
HAL_SPI_MASTER


331 
	#SPI_CLR_RDY_OUT
(Ë(
SPI_RDYOut
 = 1)

	)

332 
	#SPI_SET_RDY_OUT
(Ë(
SPI_RDYOut
 = 0)

	)

335 
	#SPI_RX_RDY
(Ë(
•iRxHód
 !
•iRxTaû
)

	)

344 
__no_öô
 
uöt16
 
	g•iRxBuf
[
SPI_MAX_PKT_LEN
];

345 
__no_öô
 
uöt8
 
	g•iRxD©
[
SPI_MAX_PKT_LEN
];

346 
__no_öô
 
uöt8
 
	g•iTxPkt
[
SPI_MAX_PKT_LEN
];

348 
•iRxSã_t
 
	g•iRxPktSèã
;

349 
•iLí_t
 
	g•iRxIdx
;

350 
•iLí_t
 
	g•iRxC¡
;

351 
•iLí_t
 
	g•iRxLí
;

352 
•iLí_t
 
	g•iRxFcs
;

353 
•iLí_t
 
	g•iRxHód
;

354 
•iLí_t
 
	g•iRxTaû
;

355 
•iLí_t
 
	g•iRxTemp
;

356 vﬁ©ûê
•iLí_t
 
	g•iTxLí
;

358 
hÆUARTCBack_t
 
	g•iCB
;

360 vﬁ©ûê
uöt8
 
	g•iRdyI§
;

361 #ifde‡
POWER_SAVING


362 
boﬁ
 
	gpktFound
;

365 
•iLí_t
 
	gdbgFcsByã
;

366 #ifde‡
RBA_UART_TO_SPI


367 
uöt16
 
	gbadFcsPktCou¡
 = 0;

375 
HÆUART_DMAI§SPI
();

381 
HÆUARTPﬁlSPI
();

382 
uöt8
 
•iCÆcFcs
(uöt8 *
pBuf
);

383 
•iP¨£Rx
();

399 
	$HÆUARTInôSPI
()

401 #i‡(
HAL_UART_SPI
 == 1)

402 
PERCFG
 &~
HAL_UART_PERCFG_BIT
;

404 
PERCFG
 |
HAL_UART_PERCFG_BIT
;

406 #i‡
deföed
 
HAL_SPI_MASTER


407 
PxSEL
 |
HAL_UART_Px_SEL_M
;

408 
UxCSR
 = 0;

409 
UxGCR
 = 15;

410 
UxBAUD
 = 255;

411 #ñi‡!
deföed
 
HAL_SPI_MASTER


412 
PxSEL
 |
HAL_UART_Px_SEL_S
;

413 
UxCSR
 = 
CSR_SLAVE
;

415 
UxUCR
 = 
UCR_FLUSH
;

416 
UxGCR
 |
	`BV
(5);

418 
P2DIR
 &~
P2DIR_PRIPO
;

419 
P2DIR
 |
HAL_UART_PRIPO
;

422 
PxIEN
 |
SPI_RDYIn_BIT
;

423 
PICTL
 |
PICTL_BIT
;

425 
	`SPI_CLR_RDY_OUT
();

426 
PxDIR
 |
SPI_RDYOut_BIT
;

429 
hÆDMADesc_t
 *
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_SPI_CH_TX
 );

432 
	`HAL_DMA_ABORT_CH
–
HAL_SPI_CH_TX
 );

435 
	`HAL_DMA_SET_DEST
–
ch
, 
DMA_UxDBUF
 );

438 
	`HAL_DMA_SET_VLEN
–
ch
, 
HAL_DMA_VLEN_USE_LEN
 );

441 
	`HAL_DMA_SET_WORD_SIZE
–
ch
, 
HAL_DMA_WORDSIZE_BYTE
 );

444 
	`HAL_DMA_SET_TRIG_MODE
–
ch
, 
HAL_DMA_TMODE_SINGLE
 );

445 
	`HAL_DMA_SET_TRIG_SRC
–
ch
, 
DMATRIG_TX
 );

448 
	`HAL_DMA_SET_SRC_INC
–
ch
, 
HAL_DMA_SRCINC_1
 );

449 
	`HAL_DMA_SET_SOURCE
–
ch
, 
•iTxPkt
 );

452 
	`HAL_DMA_SET_DST_INC
–
ch
, 
HAL_DMA_DSTINC_0
 );

455 
	`HAL_DMA_SET_IRQ
–
ch
, 
HAL_DMA_IRQMASK_ENABLE
 );

458 
	`HAL_DMA_SET_M8
–
ch
, 
HAL_DMA_M8_USE_8_BITS
 );

461 
	`HAL_DMA_SET_PRIORITY
–
ch
, 
HAL_DMA_PRI_HIGH
 );

464 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_SPI_CH_RX
 );

467 
	`HAL_DMA_ABORT_CH
–
HAL_SPI_CH_RX
 );

470 
	`HAL_DMA_SET_SOURCE
–
ch
, 
DMA_UxDBUF
 );

473 
	`HAL_DMA_SET_VLEN
–
ch
, 
HAL_DMA_VLEN_USE_LEN
 );

482 
	`HAL_DMA_SET_WORD_SIZE
–
ch
, 
HAL_DMA_WORDSIZE_WORD
 );

485 
	`HAL_DMA_SET_TRIG_MODE
–
ch
, 
HAL_DMA_TMODE_SINGLE_REPEATED
 );

486 
	`HAL_DMA_SET_TRIG_SRC
–
ch
, 
DMATRIG_RX
 );

489 
	`HAL_DMA_SET_SRC_INC
–
ch
, 
HAL_DMA_SRCINC_0
 );

492 
	`HAL_DMA_SET_DST_INC
–
ch
, 
HAL_DMA_DSTINC_1
 );

493 
	`HAL_DMA_SET_DEST
–
ch
, 
•iRxBuf
 );

494 
	`HAL_DMA_SET_LEN
–
ch
, 
SPI_MAX_PKT_LEN
 );

497 
	`HAL_DMA_SET_IRQ
–
ch
, 
HAL_DMA_IRQMASK_DISABLE
 );

500 
	`HAL_DMA_SET_M8
–
ch
, 
HAL_DMA_M8_USE_8_BITS
 );

503 
	`HAL_DMA_SET_PRIORITY
–
ch
, 
HAL_DMA_PRI_HIGH
 );

505 vﬁ©ûê
uöt8
 
dummy
 = *(vﬁ©ûêuöt8 *)
DMA_UxDBUF
;

506 
	`HAL_DMA_CLEAR_IRQ
(
HAL_SPI_CH_RX
);

507 
	`HAL_DMA_ARM_CH
(
HAL_SPI_CH_RX
);

508 ()
	`mem£t
(
•iRxBuf
, (
DMA_PAD
 ^ 0xFF), 
SPI_MAX_PKT_LEN
 * (
uöt16
));

509 
	}
}

526 
	$HÆUARTO≥nSPI
(
hÆUARTCfg_t
 *
c⁄fig
)

528 
•iCB
 = 
c⁄fig
->
ˇŒBackFunc
;

530 
UxCSR
 |
CSR_RE
;

532 
PxIFG
 = 0;

533 
PxIF
 = 0;

534 
IENx
 |
IEN_BIT
;

536 ()
dbgFcsByã
;

537 
	}
}

555 
•iLí_t
 
	$HÆUARTRódSPI
(
uöt8
 *
buf
, 
•iLí_t
 
Àn
)

557 
•iLí_t
 
˙t
 = 0; c¡ < 
Àn
; cnt++)

559 i‡(
•iRxHód
 =
•iRxTaû
)

561 
Àn
 = 
˙t
;

565 *
buf
++ = 
•iRxD©
[
•iRxHód
];

566 
	`SPI_LEN_T_INCR
(
•iRxHód
);

569  
Àn
;

570 
	}
}

588 
•iLí_t
 
	$HÆUARTWrôeSPI
(
uöt8
 *
buf
, 
•iLí_t
 
Àn
)

590 i‡(
•iTxLí
 != 0)

595 i‡(
Àn
 > 
SPI_MAX_DAT_LEN
)

597 
Àn
 = 
SPI_MAX_DAT_LEN
;

600 
•iTxLí
 = 
Àn
;

602 #i‡
deföed
 
HAL_SPI_MASTER


604 
•iRdyI§
 = 0;

605 
•iTxPkt
[
SPI_LEN_IDX
] = 
Àn
;

606 ()
	`mem˝y
(
•iTxPkt
 + 
SPI_DAT_IDX
, 
buf
, 
Àn
);

608 
	`•iCÆcFcs
(
•iTxPkt
);

609 
•iTxPkt
[
SPI_SOF_IDX
] = 
SPI_SOF
;

611 
hÆDMADesc_t
 *
ch
 = 
	`HAL_DMA_GET_DESC1234
(
HAL_SPI_CH_TX
);

612 
	`HAL_DMA_SET_LEN
(
ch
, 
	`SPI_PKT_LEN
(
•iTxPkt
));

615 
	`HAL_DMA_ABORT_CH
–
HAL_SPI_CH_RX
 );

616 
•iRxIdx
 = 0;

617 ()
	`mem£t
(
•iRxBuf
, (
DMA_PAD
 ^ 0xFF), 
SPI_MAX_PKT_LEN
 * (
uöt16
));

619 
	`HAL_DMA_ARM_CH
(
HAL_SPI_CH_RX
);

621 
	`asm
("NOP");ásm("NOP");ásm("NOP");ásm("NOP");ásm("NOP");

622 
	`asm
("NOP");ásm("NOP");ásm("NOP");ásm("NOP");

625 
	`HAL_DMA_ABORT_CH
–
HAL_SPI_CH_TX
 );

626 
	`HAL_DMA_ARM_CH
(
HAL_SPI_CH_TX
);

628 
	`asm
("NOP");ásm("NOP");ásm("NOP");ásm("NOP");ásm("NOP");

629 
	`asm
("NOP");ásm("NOP");ásm("NOP");ásm("NOP");

631 
	`SPI_SET_CSn_OUT
();

633 (!
	`SPI_RDY_IN
()Ë&& (!
•iRdyI§
) );

635 
	`HAL_DMA_MAN_TRIGGER
(
HAL_SPI_CH_TX
);

637 #ñi‡!
deföed
 
HAL_SPI_MASTER


639 #ifde‡
POWER_SAVING


641 
	`CLEAR_SLEEP_MODE
();

644 
	`SPI_CLR_RDY_OUT
();

646 
	`HAL_DMA_ARM_CH
(
HAL_SPI_CH_RX
);

648 
	`asm
("NOP");ásm("NOP");ásm("NOP");ásm("NOP");ásm("NOP");

649 
	`asm
("NOP");ásm("NOP");ásm("NOP");ásm("NOP");

651 i‡–
	`SPI_RDY_IN
() )

653 
	`SPI_SET_RDY_OUT
();

656 
•iTxPkt
[
SPI_LEN_IDX
] = 
Àn
;

657 ()
	`mem˝y
(
•iTxPkt
 + 
SPI_DAT_IDX
, 
buf
, 
Àn
);

659 
	`•iCÆcFcs
(
•iTxPkt
);

660 
•iTxPkt
[
SPI_SOF_IDX
] = 
SPI_SOF
;

662 
hÆDMADesc_t
 *
ch
 = 
	`HAL_DMA_GET_DESC1234
(
HAL_SPI_CH_TX
);

663 
	`HAL_DMA_SET_LEN
(
ch
, 
	`SPI_PKT_LEN
(
•iTxPkt
) + 1);

664 
	`HAL_DMA_ARM_CH
(
HAL_SPI_CH_TX
);

666 
	`asm
("NOP");ásm("NOP");ásm("NOP");ásm("NOP");ásm("NOP");

667 
	`asm
("NOP");ásm("NOP");ásm("NOP");ásm("NOP");

669 
	`SPI_SET_RDY_OUT
();

672  
Àn
;

673 
	}
}

690 
	$HÆUARTPﬁlSPI
()

692 #ifde‡
HAL_SPI_MASTER


694 #i‡
deföed
 
POWER_SAVING


695 
pktFound
 = 
FALSE
;

697 i‡––
•iRdyI§
 ) || (
	`SPI_RDY_IN
()) )

699 
	`CLEAR_SLEEP_MODE
();

701 #i‡
deföed
 
HAL_SBL_BOOT_CODE


702 if(!
•iTxLí
)

704 
UxDBUF
 = 0x00;

706 
	`HAL_DMA_ARM_CH
(
HAL_SPI_CH_RX
);

708 
	`asm
("NOP");ásm("NOP");ásm("NOP");ásm("NOP");

709 
	`asm
("NOP");ásm("NOP");ásm("NOP");ásm("NOP");

710 
	`asm
("NOP");

712 
hÆI¡Sèã_t
 
ötSèã
;

713 
	`HAL_ENTER_CRITICAL_SECTION
(
ötSèã
);

715 
	`SPI_SET_RDY_OUT
();

716 
	`SPI_CLR_RDY_OUT
();

718 
	`HAL_EXIT_CRITICAL_SECTION
(
ötSèã
);

721 #i‡
deföed
 
POWER_SAVING


722 
pktFound
 = 
TRUE
;

727 #i‡
deföed
 
HAL_SPI_MASTER


728 i‡(!
•iTxLí
)

730 i‡((!
•iTxLí
Ë&& (!
	`SPI_RDY_IN
()))

733 
	`SPI_CLR_RDY_OUT
();

734 
	`•iP¨£Rx
();

737 #i‡
deföed
 
HAL_SPI_MASTER


738 if–
	`SPI_RX_RDY
())

740 i‡(
	`SPI_RX_RDY
(Ë&& !
•iTxLí
)

743 i‡(
•iCB
 !
NULL
)

745 
	`•iCB
((
HAL_UART_SPI
 - 1), 
HAL_UART_RX_TIMEOUT
);

749 i‡(!
•iTxLí
)

751 i‡–
	`SPI_RDY_OUT
 () )

753 
	`SPI_CLR_RDY_OUT
();

757 #i‡
deföed
 
POWER_SAVING


758 i‡–
	`SPI_RDY_IN
()|| 
	`SPI_RX_RDY
(Ë|| 
•iRxLí
 || 
•iTxLí
 || 
•iRdyI§
 || 
pktFound
 || 
	`SPI_RDY_OUT
() )

760 
	`CLEAR_SLEEP_MODE
();

762 i‡–(!
pktFound
Ë&& (!
	`SPI_NEW_RX_BYTE
(
•iRxIdx
)) )

764 
PxIEN
 |
SPI_RDYIn_BIT
;

765 
	`SPI_CLR_RDY_OUT
();

768 
•iRdyI§
 = 0;

770 
	}
}

787 
•iLí_t
 
	$HÆUARTRxAvaûSPI
()

789  (
•iRxTaû
 > 
•iRxHód
Ë? (•iRxTaû-•iRxHódË: (•iRxTaû+(
SPI_MAX_PKT_LEN
-spiRxHead));

790 
	}
}

807 
uöt8
 
	$•iCÆcFcs
(
uöt8
 *
pBuf
)

809 
•iLí_t
 
Àn
 = 
	`SPI_DAT_LEN
(
pBuf
Ë+ 
SPI_HDR_LEN
 + 
SPI_HDR_IDX
;

810 
•iLí_t
 
idx
 = 
SPI_HDR_IDX
;

811 
uöt8
 
fcs
 = 0;

813 
idx
 < 
Àn
)

815 
fcs
 ^
pBuf
[
idx
++];

817 
pBuf
[
idx
] = 
fcs
;

819  
fcs
;

820 
	}
}

837 
	$•iP¨£Rx
()

841 i‡(!
	`SPI_NEW_RX_BYTE
(
•iRxIdx
))

843 #i‡
deföed
 
HAL_SPI_MASTER


844 i‡(
	`SPI_RDY_IN
(Ë&& (
•iTxLí
 == 0))

846 
	`SPI_CLOCK_RX
(1);

853 
uöt8
 
ch
 = 
	`SPI_GET_RX_BYTE
(
•iRxIdx
);

854 
	`SPI_CLR_RX_BYTE
(
•iRxIdx
);

855 
	`SPI_LEN_T_INCR
(
•iRxIdx
);

857 
•iRxPktSèã
)

859 
SPIRX_STATE_SOF
:

860 i‡(
ch
 =
SPI_SOF
)

862 
•iRxPktSèã
 = 
SPIRX_STATE_LEN
;

869 
•iRxLí
 = 1;

873 
SPIRX_STATE_LEN
:

874 i‡((
ch
 =0Ë|| (ch > 
SPI_MAX_DAT_LEN
))

876 
•iRxPktSèã
 = 
SPIRX_STATE_SOF
;

877 
•iRxLí
 = 0;

881 
•iRxFcs
 = 
•iRxLí
 = 
ch
;

882 
•iRxTemp
 = 
•iRxTaû
;

883 
•iRxC¡
 = 0;

884 
•iRxPktSèã
 = 
SPIRX_STATE_DATA
;

885 #i‡
deföed
 
HAL_SPI_MASTER


886 i‡(!
	`SPI_NEW_RX_BYTE
(
•iRxIdx
))

888 
hÆI¡Sèã_t
 
ötSèã
;

889 
	`HAL_ENTER_CRITICAL_SECTION
(
ötSèã
);

890 
	`SPI_CLOCK_RX
(
ch
 + 1);

891 
	`HAL_EXIT_CRITICAL_SECTION
(
ötSèã
);

897 
SPIRX_STATE_DATA
:

898 
•iRxFcs
 ^
ch
;

899 
•iRxD©
[
•iRxTemp
] = 
ch
;

901 
	`SPI_LEN_T_INCR
(
•iRxTemp
);

903 i‡(++
•iRxC¡
 =
•iRxLí
)

905 
•iRxPktSèã
 = 
SPIRX_STATE_FCS
;

909 
SPIRX_STATE_FCS
:

910 
•iRxPktSèã
 = 
SPIRX_STATE_SOF
;

911 #ifde‡
POWER_SAVING


912 
pktFound
 = 
TRUE
;

914 
	`SPI_CLR_RDY_OUT
();

916 i‡(
ch
 =
•iRxFcs
)

918 
•iRxTaû
 = 
•iRxTemp
;

922 
dbgFcsByã
 = 
ch
;

923 #ifde‡
RBA_UART_TO_SPI


924 
badFcsPktCou¡
++;

927 
•iRxC¡
 = 
•iRxLí
 = 0;

931 
	`HAL_ASSERT
(0);

935 
	}
}

952 
	$HÆUART_DMAI§SPI
()

954 #i‡
deföed
 
HAL_SPI_MASTER


956 
UxCSR
 & 
CSR_ACTIVE
);

958 
	`SPI_RDY_IN
())

960 
	`SPI_CLOCK_RX
(1);

963 
•iRdyI§
 = 0;

965 
UxDBUF
 = 0x00;

966 
	`SPI_CLR_RDY_OUT
();

967 
•iTxLí
 = 0;

968 
	}
}

979 #i‡
deföed
 
HAL_SBL_BOOT_CODE


980 
	$•iRdyIn
()

983 #i‡ ((
HAL_UART_SPI
 =1Ë|| 
deföed
 
HAL_SPI_MASTER
)

984 
	$HAL_ISR_FUNCTION
(
p‹t0I§
, 
P0INT_VECTOR
)

985 #ñi‡(
HAL_UART_SPI
 == 2)

986 
	$HAL_ISR_FUNCTION
(
p‹t1I§
, 
P1INT_VECTOR
)

989 
	`HAL_ENTER_ISR
();

991 
PxIFG
 = 0;

992 
PxIF
 = 0;

994 
•iRdyI§
 = 1;

996 #i‡!
deföed
 
HAL_SPI_MASTER


998 i‡(
•iTxLí
 == 0)

1000 #i‡!
deföed
 
HAL_SBL_BOOT_CODE


1001 
	`CLEAR_SLEEP_MODE
();

1002 
UxDBUF
 = 0x00;

1003 
	`SPI_SET_RDY_OUT
();

1005 
	`SPI_CLR_RDY_OUT
();

1009 #i‡!
deföed
 
HAL_SBL_BOOT_CODE


1010 
	`CLEAR_SLEEP_MODE
();

1011 
	`HAL_EXIT_ISR
();

1014 
	`HAL_ENABLE_INTERRUPTS
();

1015 
	}
}

	@../../../../Components/hal/target/CC2540EB/hal_adc.c

44 
	~"hÆ_adc.h
"

45 
	~"hÆ_defs.h
"

46 
	~"hÆ_mcu.h
"

47 
	~"hÆ_ty≥s.h
"

52 
	#HAL_ADC_EOC
 0x80

	)

53 
	#HAL_ADC_START
 0x40

	)

55 
	#HAL_ADC_STSEL_EXT
 0x00

	)

56 
	#HAL_ADC_STSEL_FULL
 0x10

	)

57 
	#HAL_ADC_STSEL_T1C0
 0x20

	)

58 
	#HAL_ADC_STSEL_ST
 0x30

	)

60 
	#HAL_ADC_RAND_NORM
 0x00

	)

61 
	#HAL_ADC_RAND_LFSR
 0x04

	)

62 
	#HAL_ADC_RAND_SEED
 0x08

	)

63 
	#HAL_ADC_RAND_STOP
 0x0¯

	)

64 
	#HAL_ADC_RAND_BITS
 0x0¯

	)

66 
	#HAL_ADC_DEC_064
 0x00

	)

67 
	#HAL_ADC_DEC_128
 0x10

	)

68 
	#HAL_ADC_DEC_256
 0x20

	)

69 
	#HAL_ADC_DEC_512
 0x30

	)

70 
	#HAL_ADC_DEC_BITS
 0x30

	)

72 
	#HAL_ADC_STSEL
 
HAL_ADC_STSEL_ST


	)

73 
	#HAL_ADC_RAND_GEN
 
HAL_ADC_RAND_STOP


	)

74 
	#HAL_ADC_REF_VOLT
 
HAL_ADC_REF_AVDD


	)

75 
	#HAL_ADC_DEC_RATE
 
HAL_ADC_DEC_064


	)

76 
	#HAL_ADC_SCHN
 
HAL_ADC_CHN_VDD3


	)

77 
	#HAL_ADC_ECHN
 
HAL_ADC_CHN_GND


	)

84 #i‡(
HAL_ADC
 =
TRUE
)

85 
uöt8
 
	gadcRef
;

97 
	$HÆAdcInô
 ()

99 #i‡(
HAL_ADC
 =
TRUE
)

100 
adcRef
 = 
HAL_ADC_REF_VOLT
;

102 
	}
}

117 
uöt16
 
	$HÆAdcRód
 (
uöt8
 
ch™√l
, uöt8 
ªsﬁuti⁄
)

119 
öt16
 
ªadög
 = 0;

121 #i‡(
HAL_ADC
 =
TRUE
)

122 
uöt8
 
i
, 
ªsbôs
;

123 
uöt8
 
adcCh™√l
 = 1;

133 i‡(
ch™√l
 <
HAL_ADC_CHANNEL_7
)

135 
i
=0; i < 
ch™√l
; i++)

137 
adcCh™√l
 <<= 1;

141 
ADCCFG
 |
adcCh™√l
;

145 
ªsﬁuti⁄
)

147 
HAL_ADC_RESOLUTION_8
:

148 
ªsbôs
 = 
HAL_ADC_DEC_064
;

150 
HAL_ADC_RESOLUTION_10
:

151 
ªsbôs
 = 
HAL_ADC_DEC_128
;

153 
HAL_ADC_RESOLUTION_12
:

154 
ªsbôs
 = 
HAL_ADC_DEC_256
;

156 
HAL_ADC_RESOLUTION_14
:

158 
ªsbôs
 = 
HAL_ADC_DEC_512
;

163 
ADCCON3
 = 
ch™√l
 | 
ªsbôs
 | 
adcRef
;

166 !(
ADCCON1
 & 
HAL_ADC_EOC
));

169 i‡(
ch™√l
 <
HAL_ADC_CHANNEL_7
)

170 
ADCCFG
 &(
adcCh™√l
 ^ 0xFF);

173 
ªadög
 = (
öt16
Ë(
ADCL
);

174 
ªadög
 |(
öt16
Ë(
ADCH
 << 8);

177 i‡(
ªadög
 < 0)

178 
ªadög
 = 0;

180 
ªsﬁuti⁄
)

182 
HAL_ADC_RESOLUTION_8
:

183 
ªadög
 >>= 8;

185 
HAL_ADC_RESOLUTION_10
:

186 
ªadög
 >>= 6;

188 
HAL_ADC_RESOLUTION_12
:

189 
ªadög
 >>= 4;

191 
HAL_ADC_RESOLUTION_14
:

193 
ªadög
 >>= 2;

198 (Ë
ch™√l
;

199 (Ë
ªsﬁuti⁄
;

202  ((
uöt16
)
ªadög
);

203 
	}
}

215 
	$HÆAdcSëRe„ªn˚
 ( 
uöt8
 
ª„ªn˚
 )

217 #i‡(
HAL_ADC
 =
TRUE
)

218 
adcRef
 = 
ª„ªn˚
;

220 
	}
}

233 
boﬁ
 
	$HÆAdcCheckVdd
(
uöt8
 
vdd
)

235 
ADCCON3
 = 0x0F;

236 !(
ADCCON1
 & 0x80));

237  (
ADCH
 > 
vdd
);

238 
	}
}

	@../../../../Components/hal/target/CC2540EB/hal_aes.c

42 
	~"oßl.h
"

43 
	~"hÆ_´s.h
"

44 
	~"hÆ_dma.h
"

66 (*
pS•AesEn¸y±
)–
uöt8
 *, uöt8 * ) = (*)
NULL
;

71 
	`´sDmaInô
( );

73 #i‡((
deföed
 
HAL_DMA
Ë&& (HAL_DMA =
TRUE
))

85 
	$´sDmaInô
( )

87 
hÆDMADesc_t
 *
ch
;

90 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_IN
 );

91 
	`HAL_DMA_SET_DEST
–
ch
, 
HAL_AES_IN_ADDR
 );

92 
	`HAL_DMA_SET_VLEN
–
ch
, 
HAL_DMA_VLEN_USE_LEN
 );

93 
	`HAL_DMA_SET_WORD_SIZE
–
ch
, 
HAL_DMA_WORDSIZE_BYTE
 );

94 
	`HAL_DMA_SET_TRIG_MODE
–
ch
, 
HAL_DMA_TMODE_SINGLE
 );

95 
	`HAL_DMA_SET_TRIG_SRC
–
ch
, 
HAL_DMA_TRIG_ENC_DW
 );

96 
	`HAL_DMA_SET_SRC_INC
–
ch
, 
HAL_DMA_SRCINC_1
 );

97 
	`HAL_DMA_SET_DST_INC
–
ch
, 
HAL_DMA_DSTINC_0
 );

98 
	`HAL_DMA_SET_IRQ
–
ch
, 
HAL_DMA_IRQMASK_DISABLE
 );

99 
	`HAL_DMA_SET_M8
–
ch
, 
HAL_DMA_M8_USE_8_BITS
 );

100 
	`HAL_DMA_SET_PRIORITY
–
ch
, 
HAL_DMA_PRI_HIGH
 );

103 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_OUT
 );

104 
	`HAL_DMA_SET_SOURCE
–
ch
, 
HAL_AES_OUT_ADDR
 );

105 
	`HAL_DMA_SET_VLEN
–
ch
, 
HAL_DMA_VLEN_USE_LEN
 );

106 
	`HAL_DMA_SET_WORD_SIZE
–
ch
, 
HAL_DMA_WORDSIZE_BYTE
 );

107 
	`HAL_DMA_SET_TRIG_MODE
–
ch
, 
HAL_DMA_TMODE_SINGLE
 );

108 
	`HAL_DMA_SET_TRIG_SRC
–
ch
, 
HAL_DMA_TRIG_ENC_UP
 );

109 
	`HAL_DMA_SET_SRC_INC
–
ch
, 
HAL_DMA_SRCINC_0
 );

110 
	`HAL_DMA_SET_DST_INC
–
ch
, 
HAL_DMA_DSTINC_1
 );

111 
	`HAL_DMA_SET_IRQ
–
ch
, 
HAL_DMA_IRQMASK_DISABLE
 );

112 
	`HAL_DMA_SET_M8
–
ch
, 
HAL_DMA_M8_USE_8_BITS
 );

113 
	`HAL_DMA_SET_PRIORITY
–
ch
, 
HAL_DMA_PRI_HIGH
 );

114 
	}
}

117 #i‡(!
deföed
 
HAL_AES_DMA
Ë|| (HAL_AES_DMA =
FALSE
)

129 
	$AesLﬂdBlock
–
uöt8
 *
±r
 )

131 
uöt8
 
i
;

134 
	`AES_START
();

137 
i
 = 0; i < 
STATE_BLENGTH
; i++)

139 
ENCDI
 = *
±r
++;

141 
	}
}

155 
	$AesSèπBlock
–
uöt8
 *
out
, uöt8 *
ö
 )

157 
uöt8
 
i
;

160 
	`AES_START
();

163 
i
 = 0; i < 
STATE_BLENGTH
; i++)

165 
ENCDI
 = *
ö
++;

169 
	`HAL_AES_DELAY
();

172 
i
 = 0; i < 
STATE_BLENGTH
; i++)

174 *
out
++ = 
ENCDO
;

176 
	}
}

192 
	$AesSèπSh‹tBlock
–
uöt8
 *
out
, uöt8 *
ö
 )

194 
uöt8
 
i
, 
j
;

196 
	`AES_START
();

197 
i
 = 0; i < 4; i++)

200 
j
 = 0; j < 4; j++)

202 
ENCDI
 = *
ö
++;

206 
	`HAL_AES_DELAY
();

209 
j
 = 0; j < 4; j++)

211 *
out
++ = 
ENCDO
;

214 
	}
}

228 
	$AesLﬂdIV
–
uöt8
 *
IV
 )

230 #i‡(
deföed
 
HAL_AES_DMA
Ë&& (HAL_AES_DMA =
TRUE
)

231 
hÆDMADesc_t
 *
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_IN
 );

234 
	`HAL_DMA_SET_SOURCE
–
ch
, 
IV
 );

235 
	`HAL_DMA_SET_LEN
–
ch
, 
STATE_BLENGTH
 );

238 
	`HAL_DMA_CLEAR_IRQ
–
HAL_DMA_AES_IN
 );

239 
	`HAL_DMA_ARM_CH
–
HAL_DMA_AES_IN
 );

241 
	`asm
("NOP");

242 } !
	`HAL_DMA_CH_ARMED
(
HAL_DMA_AES_IN
));

245 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_LOAD_IV
 );

248 
	`AES_START
();

249  !(
ENCCS
 & 0x08) );

252 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_LOAD_IV
 );

255 
	`AesLﬂdBlock
–
IV
 );

257 
	}
}

270 
	$AesLﬂdKey
–
uöt8
 *
AesKey
 )

272 #i‡(
deföed
 
HAL_AES_DMA
Ë&& (HAL_AES_DMA =
TRUE
)

273 
hÆDMADesc_t
 *
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_IN
 );

276 
	`HAL_DMA_SET_SOURCE
–
ch
, 
AesKey
 );

277 
	`HAL_DMA_SET_LEN
–
ch
, 
KEY_BLENGTH
 );

280 
	`HAL_DMA_CLEAR_IRQ
–
HAL_DMA_AES_IN
 );

281 
	`HAL_DMA_ARM_CH
–
HAL_DMA_AES_IN
 );

283 
	`asm
("NOP");

284 } !
	`HAL_DMA_CH_ARMED
(
HAL_DMA_AES_IN
));

287 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_LOAD_KEY
 );

290 
	`AES_START
();

291  !(
ENCCS
 & 0x08) );

294 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_LOAD_KEY
 );

297 
	`AesLﬂdBlock
–
AesKey
 );

299 
	}
}

301 #i‡(
deföed
 
HAL_AES_DMA
Ë&& (HAL_AES_DMA =
TRUE
)

321 
	$AesDmaSëup
–
uöt8
 *
C°©e
, 
uöt16
 
msg_out_Àn
, uöt8 *
msg_ö
, uöt16 
msg_ö_Àn
 )

323 
hÆDMADesc_t
 *
ch
;

326 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_IN
 );

327 
	`HAL_DMA_SET_SOURCE
–
ch
, 
msg_ö
 );

328 
	`HAL_DMA_SET_LEN
–
ch
, 
msg_ö_Àn
 );

331 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_OUT
 );

332 
	`HAL_DMA_SET_DEST
–
ch
, 
C°©e
 );

333 
	`HAL_DMA_SET_LEN
–
ch
, 
msg_out_Àn
 );

336 
	`HAL_DMA_CLEAR_IRQ
–
HAL_DMA_AES_IN
 );

337 
	`HAL_DMA_ARM_CH
–
HAL_DMA_AES_IN
 );

339 
	`asm
("NOP");

340 } !
	`HAL_DMA_CH_ARMED
(
HAL_DMA_AES_IN
));

341 
	`HAL_DMA_CLEAR_IRQ
–
HAL_DMA_AES_OUT
 );

342 
	`HAL_DMA_ARM_CH
–
HAL_DMA_AES_OUT
 );

344 
	`asm
("NOP");

345 } !
	`HAL_DMA_CH_ARMED
(
HAL_DMA_AES_OUT
));

346 
	}
}

360 
	$HÆAesInô
( )

362 #i‡(
deföed
 
HAL_AES_DMA
Ë&& (HAL_AES_DMA =
TRUE
)

364 
	`´sDmaInô
();

366 
	}
}

379 
	$s•_HW_KeyInô
–
uöt8
 *
AesKey
 )

381 
	`AES_SETMODE
(
ECB
);

382 
	`AesLﬂdKey
–
AesKey
 );

383 
	}
}

402 
	$s•AesEn¸y±HW
–
uöt8
 *
AesKey
, uöt8 *
C°©e
 )

404 ()
AesKey
;

406 #i‡(
deföed
 
HAL_AES_DMA
Ë&& (HAL_AES_DMA =
TRUE
)

408 
	`AesDmaSëup
–
C°©e
, 
STATE_BLENGTH
, Cstate, STATE_BLENGTH );

409 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_ENCRYPT
 );

412 
	`AES_START
();

413  !
	`HAL_DMA_CHECK_IRQ
–
HAL_DMA_AES_OUT
 ) );

416 
	`AES_SETMODE
(
ECB
);

417 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_ENCRYPT
 );

420 
	`AesSèπBlock
–
C°©e
, Cstate );

422 
	}
}

	@../../../../Components/hal/target/CC2540EB/hal_aes.h

39 #i‚de‡
HAL_AES_H_


40 
	#HAL_AES_H_


	)

42 
	~"hÆ_ty≥s.h
"

44 
	#STATE_BLENGTH
 16

45 
	#KEY_BLENGTH
 16

46 
	#KEY_EXP_LENGTH
 176

47 

	)

52 #i‡((
deföed
 
SOFTWARE_AES
Ë&& (SOFTWARE_AES =
TRUE
)Ë&& ((deföed 
SW_AES_AND_KEY_EXP
) && (SW_AES_AND_KEY_EXP == TRUE))

56 
HÆAesInô
( );

57 
AesLﬂdBlock
–
uöt8
 * );

58 
AesSèπBlock
–
uöt8
 *, uint8 * );

59 
AesSèπSh‹tBlock
–
uöt8
 *, uint8 * );

60 
AesLﬂdIV
(
uöt8
 *);

61 
AesDmaSëup
–
uöt8
 *, 
uöt16
, uint8 *, uint16 );

62 
AesLﬂdKey
–
uöt8
 * );

64 (*
pS•AesEn¸y±
)–
uöt8
 *, uint8 * );

65 
	`s•_HW_KeyInô
 (
uöt8
 *);

66 
	`s•KeyEx∑nsi⁄
 (
uöt8
 *, uint8 *);

68 
	`s•AesEn¸y±HW
 (
uöt8
 *, uint8 *);

69 
	`s•AesEn¸y±KeyExp
 (
uöt8
 *, uint8 *);

70 
	`s•AesEn¸y±Basic
 (
uöt8
 *, uint8 *);

72 
	`s•AesDe¸y±HW
–
uöt8
 *, uint8 * );

73 
	`s•AesDe¸y±
–
uöt8
 *
key
, uöt8 *
buf
 );

76 
	#AES_BUSY
 0x08

	)

77 
	#ENCRYPT
 0x00

	)

78 
	#DECRYPT
 0x01

	)

81 
	#AES_SETMODE
(
mode
) \

83 
ENCCS
 = (ENCCS & ~0x70Ë| (
mode
); \

84 
	}
} 0)

	)

87 
	#CBC
 0x00

	)

88 
	#CFB
 0x10

	)

89 
	#OFB
 0x20

	)

90 
	#CTR
 0x30

	)

91 
	#ECB
 0x40

	)

92 
	#CBC_MAC
 0x50

	)

95 
	#AES_SET_ENCR_DECR_KEY_IV
(
cmd
) \

97 
ENCCS
 = (ENCCS & ~0x07Ë| (
cmd
); \

98 } 0)

	)

101 
	#AES_ENCRYPT
 0x00

	)

102 
	#AES_DECRYPT
 0x02

	)

103 
	#AES_LOAD_KEY
 0x04

	)

104 
	#AES_LOAD_IV
 0x06

	)

108 
	#AES_START
(Ë
ENCCS
 |0x01

	)

111 
	#HAL_DMA_AES_IN
 1

	)

112 
	#HAL_DMA_AES_OUT
 2

	)

115 
	#HAL_AES_IN_ADDR
 0x70B1

	)

116 
	#HAL_AES_OUT_ADDR
 0x70B2

	)

118 #i‡!
deföed
 (
HAL_AES_DMA
Ë|| (HAL_AES_DMA =
FALSE
)

119 
	#HAL_AES_DELAY
() \

121 vﬁ©ûê
uöt8
 
dñay
 = 15; \

122 
dñay
--); \

123 } 0)

	)

	@../../../../Components/hal/target/CC2540EB/hal_board_cfg.h

42 #i‚de‡
HAL_BOARD_CFG_H


43 
	#HAL_BOARD_CFG_H


	)

45 #ifde‡
__˝lu•lus


55 
	~"hÆ_mcu.h
"

56 
	~"hÆ_defs.h
"

57 
	~"hÆ_ty≥s.h
"

65 #i‡!
deföed
 (
HAL_BOARD_CC2530EB_REV17
Ë&& !deföed (
HAL_BOARD_CC2530EB_REV13
)

66 
	#HAL_BOARD_CC2530EB_REV17


	)

71 
	#HAL_CPU_CLOCK_MHZ
 32

	)

75 
	#EXTERNAL_CRYSTAL_OSC
 0x00

76 
	#INTERNAL_RC_OSC
 0x80

77 

	)

79 #i‡!
deföed
 (
XOSC32K_INSTALLED
Ë|| (deföed (XOSC32K_INSTALLEDË&& (XOSC32K_INSTALLED =
TRUE
))

80 
	#OSC_32KHZ
 
EXTERNAL_CRYSTAL_OSC


	)

82 
	#OSC_32KHZ
 
INTERNAL_RC_OSC


	)

86 
	#MIN_TIME_TO_STABLE_32KHZ_XOSC
 400

	)

89 
	#HAL_LCD_MAX_CHARS
 16

	)

90 
	#HAL_LCD_MAX_BUFF
 25

	)

94 #i‡
deföed
 (
HAL_BOARD_CC2530EB_REV17
Ë&& !deföed (
HAL_PA_LNA
Ë&& !deföed (
HAL_PA_LNA_CC2590
)

95 
	#HAL_NUM_LEDS
 3

	)

96 #ñi‡
deföed
 (
HAL_BOARD_CC2530EB_REV13
Ë|| deföed (
HAL_PA_LNA
Ë|| deföed (
HAL_PA_LNA_CC2590
)

97 
	#HAL_NUM_LEDS
 1

	)

99 #îr‹ 
Unknown
 
Bﬂrd
 
Indítifõr


102 
	#HAL_LED_BLINK_DELAY
(Ë
	`°
–{ vﬁ©ûê
uöt32
 
i
; i=0; i<0x5800; i++Ë{ }; } )

	)

105 
	#LED1_BV
 
	`BV
(0)

	)

106 
	#LED1_SBIT
 
P1_0


	)

107 
	#LED1_DDR
 
P1DIR


	)

108 
	#LED1_POLARITY
 
ACTIVE_HIGH


	)

110 #ifde‡
HAL_BOARD_CC2530EB_REV17


112 
	#LED2_BV
 
	`BV
(1)

	)

113 
	#LED2_SBIT
 
P1_1


	)

114 
	#LED2_DDR
 
P1DIR


	)

115 
	#LED2_POLARITY
 
ACTIVE_HIGH


	)

118 
	#LED3_BV
 
	`BV
(4)

	)

119 
	#LED3_SBIT
 
P1_4


	)

120 
	#LED3_DDR
 
P1DIR


	)

121 
	#LED3_POLARITY
 
ACTIVE_HIGH


	)

126 
	#ACTIVE_LOW
 !

	)

127 
	#ACTIVE_HIGH
 !!

	)

130 
	#PUSH1_BV
 
	`BV
(1)

	)

131 
	#PUSH1_SBIT
 
P0_1


	)

133 #ifde‡
HAL_BOARD_CC2530EB_REV17


134 
	#PUSH1_POLARITY
 
ACTIVE_HIGH


	)

135 #ñi‡
deföed
 (
HAL_BOARD_CC2530EB_REV13
)

136 
	#PUSH1_POLARITY
 
ACTIVE_LOW


	)

138 #îr‹ 
Unknown
 
Bﬂrd
 
Indítifõr


142 
	#PUSH2_BV
 
	`BV
(0)

	)

143 
	#PUSH2_SBIT
 
P2_0


	)

144 
	#PUSH2_POLARITY
 
ACTIVE_HIGH


	)

149 
	#HAL_FLASH_PAGE_PER_BANK
 16

	)

152 
	#HAL_FLASH_PAGE_PHYS
 2048

	)

155 
	#HAL_FLASH_PAGE_SIZE
 
HAL_FLASH_PAGE_PHYS


	)

156 
	#HAL_FLASH_WORD_SIZE
 4

	)

159 
	#HAL_FLASH_PAGE_MAP
 0x8000

	)

162 
	#HAL_FLASH_LOCK_BITS
 16

	)

165 #i‡
deföed
 
NON_BANKED


166 
	#HAL_NV_PAGE_END
 30

	)

167 #ñi‡
deföed
 
HAL_BOARD_CC2541S


168 
	#HAL_NV_PAGE_END
 125

	)

169 #ñi‡
deföed
 
HAL_BOARD_F128


170 
	#HAL_NV_PAGE_END
 62

	)

172 
	#HAL_NV_PAGE_END
 126

	)

176 
	#HAL_FLASH_IEEE_SIZE
 8

	)

177 
	#HAL_FLASH_IEEE_PAGE
 (
HAL_NV_PAGE_END
+1)

	)

178 
	#HAL_FLASH_IEEE_OSET
 (
HAL_FLASH_PAGE_SIZE
 - 
HAL_FLASH_LOCK_BITS
 - 
HAL_FLASH_IEEE_SIZE
)

	)

179 
	#HAL_INFOP_IEEE_OSET
 0xC

	)

181 
	#HAL_NV_PAGE_CNT
 2

	)

182 
	#HAL_NV_PAGE_BEG
 (
HAL_NV_PAGE_END
-
HAL_NV_PAGE_CNT
+1)

	)

185 
	#HAL_NV_DMA_CH
 0

	)

186 
	#HAL_DMA_CH_RX
 3

	)

187 
	#HAL_DMA_CH_TX
 4

	)

189 
	#HAL_NV_DMA_GET_DESC
(Ë
	`HAL_DMA_GET_DESC0
()

	)

190 
	#HAL_NV_DMA_SET_ADDR
(
a
Ë
	`HAL_DMA_SET_ADDR_DESC0
(◊))

	)

195 
	#VDD_2_0
 74

196 
	#VDD_2_7
 100

197 

	)

198 
	#VDD_MIN_RUN
 
VDD_2_0


	)

199 
	#VDD_MIN_NV
 (
VDD_2_0
+4)

200 
	#VDD_MIN_XNV
 (
VDD_2_7
+5)

201 

	)

208 
	#PREFETCH_ENABLE
(Ë
	`°
–
FCTL
 = 0x08; )

	)

209 
	#PREFETCH_DISABLE
(Ë
	`°
–
FCTL
 = 0x04; )

	)

214 
	#SET_OSC_TO_HSOSC
() \

216 
CLKCONCMD
 = (CLKCONCMD & 0x80Ë| 
CLKCONCMD_16MHZ
; \

217  (
CLKCONSTA
 & ~0x80Ë!
CLKCONCMD_16MHZ
 ); \

218 }

	)

221 
	#SET_OSC_TO_XOSC
() \

223 
CLKCONCMD
 = (CLKCONCMD & 0x80Ë| 
CLKCONCMD_32MHZ
; \

224  (
CLKCONSTA
 & ~0x80Ë!
CLKCONCMD_32MHZ
 ); \

225 }

	)

228 
	#SET_32KHZ_OSC
() \

230 
CLKCONCMD
 = (CLKCONCMD & ~0x80Ë| 
OSC_32KHZ
; \

231  (
CLKCONSTA
 & 0x80Ë!
OSC_32KHZ
 ); \

232 }

	)

234 
	#START_HSOSC_XOSC
() \

236 
SLEEPCMD
 &~
OSC_PD
; \

237 !(
SLEEPSTA
 & 
XOSC_STB
)); \

238 }

	)

240 
	#STOP_HSOSC
() \

242 
SLEEPCMD
 |
OSC_PD
; \

243 }

	)

247 
	#HAL_BOARD_INIT
() \

250 
	`START_HSOSC_XOSC
(); \

251 
	`SET_OSC_TO_HSOSC
(); \

252 
	`SET_32KHZ_OSC
(); \

253 
	`SET_OSC_TO_XOSC
(); \

254 
	`STOP_HSOSC
(); \

257 
	`PREFETCH_ENABLE
(); \

258 }

	)

261 
	#HAL_DEBOUNCE
(
ex¥
Ë{ 
i
; i=0; i<500; i++Ë{ i‡(!”x¥)Ëò0; } }

	)

264 
	#HAL_PUSH_BUTTON1
(Ë(
	`PUSH1_POLARITY
 (
PUSH1_SBIT
))

	)

265 
	#HAL_PUSH_BUTTON2
(Ë(
	`PUSH2_POLARITY
 (
PUSH2_SBIT
))

	)

266 
	#HAL_PUSH_BUTTON3
(Ë(0)

	)

267 
	#HAL_PUSH_BUTTON4
(Ë(0)

	)

268 
	#HAL_PUSH_BUTTON5
(Ë(0)

	)

269 
	#HAL_PUSH_BUTTON6
(Ë(0)

	)

273 #i‡
deföed
 (
HAL_BOARD_CC2530EB_REV17
Ë&& !deföed (
HAL_PA_LNA
Ë&& !deföed (
HAL_PA_LNA_CC2590
)

275 
	#HAL_TURN_OFF_LED1
(Ë
	`°
–
LED1_SBIT
 = 
	`LED1_POLARITY
 (0); )

	)

276 
	#HAL_TURN_OFF_LED2
(Ë
	`°
–
LED2_SBIT
 = 
	`LED2_POLARITY
 (0); )

	)

277 
	#HAL_TURN_OFF_LED3
(Ë
	`°
–
LED3_SBIT
 = 
	`LED3_POLARITY
 (0); )

	)

278 
	#HAL_TURN_OFF_LED4
(Ë
	`HAL_TURN_OFF_LED1
()

	)

280 
	#HAL_TURN_ON_LED1
(Ë
	`°
–
LED1_SBIT
 = 
	`LED1_POLARITY
 (1); )

	)

281 
	#HAL_TURN_ON_LED2
(Ë
	`°
–
LED2_SBIT
 = 
	`LED2_POLARITY
 (1); )

	)

282 
	#HAL_TURN_ON_LED3
(Ë
	`°
–
LED3_SBIT
 = 
	`LED3_POLARITY
 (1); )

	)

283 
	#HAL_TURN_ON_LED4
(Ë
	`HAL_TURN_ON_LED1
()

	)

285 
	#HAL_TOGGLE_LED1
(Ë
	`°
–i‡(
LED1_SBIT
Ë{ LED1_SBIT = 0; } { LED1_SBIT = 1;} )

	)

286 
	#HAL_TOGGLE_LED2
(Ë
	`°
–i‡(
LED2_SBIT
Ë{ LED2_SBIT = 0; } { LED2_SBIT = 1;} )

	)

287 
	#HAL_TOGGLE_LED3
(Ë
	`°
–i‡(
LED3_SBIT
Ë{ LED3_SBIT = 0; } { LED3_SBIT = 1;} )

	)

288 
	#HAL_TOGGLE_LED4
(Ë
	`HAL_TOGGLE_LED1
()

	)

290 
	#HAL_STATE_LED1
(Ë(
	`LED1_POLARITY
 (
LED1_SBIT
))

	)

291 
	#HAL_STATE_LED2
(Ë(
	`LED2_POLARITY
 (
LED2_SBIT
))

	)

292 
	#HAL_STATE_LED3
(Ë(
	`LED3_POLARITY
 (
LED3_SBIT
))

	)

293 
	#HAL_STATE_LED4
(Ë
	`HAL_STATE_LED1
()

	)

295 #ñi‡
deföed
 (
HAL_BOARD_CC2530EB_REV13
Ë|| deföed (
HAL_PA_LNA
Ë|| deföed (
HAL_PA_LNA_CC2590
)

297 
	#HAL_TURN_OFF_LED1
(Ë
	`°
–
LED1_SBIT
 = 
	`LED1_POLARITY
 (0); )

	)

298 
	#HAL_TURN_OFF_LED2
(Ë
	`HAL_TURN_OFF_LED1
()

	)

299 
	#HAL_TURN_OFF_LED3
(Ë
	`HAL_TURN_OFF_LED1
()

	)

300 
	#HAL_TURN_OFF_LED4
(Ë
	`HAL_TURN_OFF_LED1
()

	)

302 
	#HAL_TURN_ON_LED1
(Ë
	`°
–
LED1_SBIT
 = 
	`LED1_POLARITY
 (1); )

	)

303 
	#HAL_TURN_ON_LED2
(Ë
	`HAL_TURN_ON_LED1
()

	)

304 
	#HAL_TURN_ON_LED3
(Ë
	`HAL_TURN_ON_LED1
()

	)

305 
	#HAL_TURN_ON_LED4
(Ë
	`HAL_TURN_ON_LED1
()

	)

307 
	#HAL_TOGGLE_LED1
(Ë
	`°
–i‡(
LED1_SBIT
Ë{ LED1_SBIT = 0; } { LED1_SBIT = 1;} )

	)

308 
	#HAL_TOGGLE_LED2
(Ë
	`HAL_TOGGLE_LED1
()

	)

309 
	#HAL_TOGGLE_LED3
(Ë
	`HAL_TOGGLE_LED1
()

	)

310 
	#HAL_TOGGLE_LED4
(Ë
	`HAL_TOGGLE_LED1
()

	)

312 
	#HAL_STATE_LED1
(Ë(
	`LED1_POLARITY
 (
LED1_SBIT
))

	)

313 
	#HAL_STATE_LED2
(Ë
	`HAL_STATE_LED1
()

	)

314 
	#HAL_STATE_LED3
(Ë
	`HAL_STATE_LED1
()

	)

315 
	#HAL_STATE_LED4
(Ë
	`HAL_STATE_LED1
()

	)

321 
	#XNV_SPI_BEGIN
(Ë
	`°
(
P1_3
 = 0;)

	)

322 
	#XNV_SPI_TX
(
x
Ë
	`°
(
U1CSR
 &~0x02; 
U1DBUF
 = (x);)

	)

323 
	#XNV_SPI_RX
(Ë
U1DBUF


	)

324 
	#XNV_SPI_WAIT_RXRDY
(Ë
	`°
(!(
U1CSR
 & 0x02));)

	)

325 
	#XNV_SPI_END
(Ë
	`°
(
P1_3
 = 1;)

	)

328 
	#XNV_SPI_INIT
() \

329 
	`°
( \

331 
U1CSR
 = 0; \

334 
U1GCR
 = 11; \

335 
U1BAUD
 = 216; \

338 
U1GCR
 |
	`BV
(5); \

341 
PERCFG
 |= 0x02; \

344 
P1SEL
 |= 0xE0; \

346 
P1SEL
 &= ~0x0E; \

347 
P1
 |= 0x0E; \

348 
P1_1
 = 0; \

349 
P1DIR
 |= 0x0E; \

352 
P2SEL
 &= ~0x20; \

355 
U1CSR
 |= 0x40; \

357 
P1_1
 = 1; \

358 )

	)

363 #i‚de‡
HAL_TIMER


364 
	#HAL_TIMER
 
FALSE


	)

368 #i‚de‡
HAL_ADC


373 #i‚de‡
HAL_DMA


374 
	#HAL_DMA
 
TRUE


	)

378 #i‚de‡
HAL_FLASH


379 
	#HAL_FLASH
 
TRUE


	)

383 #i‚de‡
HAL_AES


384 
	#HAL_AES
 
TRUE


	)

387 #i‚de‡
HAL_AES_DMA


388 
	#HAL_AES_DMA
 
TRUE


	)

392 #i‚de‡
HAL_LCD


397 #i‚de‡
HAL_LED


398 
	#HAL_LED
 
TRUE


	)

400 #i‡(!
deföed
 
BLINK_LEDS
Ë&& (
HAL_LED
 =
TRUE
)

401 
	#BLINK_LEDS


	)

405 #i‚de‡
HAL_KEY


410 #i‚de‡
HAL_UART


411 #i‡(
deföed
 
ZAPP_P1
Ë|| (deföed 
ZAPP_P2
Ë|| (deföed 
ZTOOL_P1
Ë|| (deföed 
ZTOOL_P2
)

412 
	#HAL_UART
 
TRUE


	)

414 
	#HAL_UART
 
FALSE


	)

418 #i‡
HAL_UART


420 #i‡
HAL_DMA


421 #i‚de‡
HAL_UART_DMA


422 #i‡(
deföed
 
ZAPP_P1
Ë|| (deföed 
ZTOOL_P1
)

423 
	#HAL_UART_DMA
 1

	)

424 #ñi‡(
deföed
 
ZAPP_P2
Ë|| (deföed 
ZTOOL_P2
)

425 
	#HAL_UART_DMA
 2

	)

427 
	#HAL_UART_DMA
 1

	)

430 #i‚de‡
HAL_UART_ISR


431 
	#HAL_UART_ISR
 0

	)

434 #i‚de‡
HAL_UART_ISR


435 #i‡(
deföed
 
ZAPP_P1
Ë|| (deföed 
ZTOOL_P1
)

436 
	#HAL_UART_ISR
 1

	)

437 #ñi‡(
deföed
 
ZAPP_P2
Ë|| (deföed 
ZTOOL_P2
)

438 
	#HAL_UART_ISR
 2

	)

440 
	#HAL_UART_ISR
 1

	)

443 #i‚de‡
HAL_UART_DMA


444 
	#HAL_UART_DMA
 0

	)

449 #i‡((
HAL_UART_DMA
 =1Ë|| (
HAL_UART_ISR
 == 1))

450 
	#HAL_UART_PRIPO
 0x00

	)

452 
	#HAL_UART_PRIPO
 0x40

	)

456 
	#HAL_UART_DMA
 0

	)

457 
	#HAL_UART_ISR
 0

	)

460 #i‡!
deföed
 
HAL_UART_SPI


461 
	#HAL_UART_SPI
 0

	)

464 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2540EB/hal_ccm.h

40 #i‚de‡ 
HAL_CCM_H_


41 
	#HAL_CCM_H_


	)

43 
Sètus_t
 
SSP_CCM_Auth
 (
uöt8
, uöt8 *, uöt8 *, 
uöt16
, uint8 *, uint16, uint8 *, uint8 *, uint8);

44 
Sètus_t
 
SSP_CCM_En¸y±
 (
uöt8
, uöt8 *, uöt8 *, 
uöt16
, uint8 *, uint8 *, uint8);

45 
Sètus_t
 
SSP_CCM_De¸y±
 (
uöt8
, uöt8 *, uöt8 *, 
uöt16
, uint8 *, uint8 *, uint8);

46 
Sètus_t
 
SSP_CCM_InvAuth
 (
uöt8
, uöt8 *, uöt8 *, 
uöt16
, uint8 *, uint16, uint8 *, uint8 *, uint8);

47 
Sètus_t
 
SSP_CCM_Auth_En¸y±
 (
boﬁ
, 
uöt8
, uöt8 *, uöt8 *, 
uöt16
, uint8 *, uint16, uint8 *, uint8 *, uint8);

48 
Sètus_t
 
SSP_CCM_InvAuth_De¸y±
 (
boﬁ
, 
uöt8
, uöt8 *, uöt8 *, 
uöt16
, uint8 *, uint16, uint8 *, uint8 *, uint8);

	@../../../../Components/hal/target/CC2540EB/hal_crc.c

45 
	~"hÆ_bﬂrd.h
"

46 
	~"hÆ_¸c.h
"

47 
	~"hÆ_ty≥s.h
"

64 
uöt16
 
	$HÆCRCCÆc
()

66 
uöt16
 
¸c
 = 
RNDH
;

67 
¸c
 = (¸¯<< 8Ë| 
RNDL
;

69  
¸c
;

70 
	}
}

87 
	$HÆCRCExec
(
uöt8
 
ch
)

89 
RNDH
 = 
ch
;

90 
	}
}

107 
	$HÆCRCInô
(
uöt16
 
£ed
)

109 
ADCCON1
 &= 0xF3;

111 
RNDL
 = 
	`HI_UINT16
(
£ed
);

112 
RNDL
 = 
	`LO_UINT16
(
£ed
);

113 
	}
}

	@../../../../Components/hal/target/CC2540EB/hal_crc.h

39 #i‚de‡
HAL_CRC_H


40 
	#HAL_CRC_H


	)

47 
	~"hÆ_ty≥s.h
"

64 
uöt16
 
HÆCRCCÆc
();

81 
HÆCRCExec
(
uöt8
 
ch
);

98 
HÆCRCInô
(
uöt16
 
£ed
);

	@../../../../Components/hal/target/CC2540EB/hal_dma.c

44 
	~"hÆ_dma.h
"

45 
	~"hÆ_mcu.h
"

46 
	~"hÆ_ty≥s.h
"

47 
	~"hÆ_u¨t.h
"

49 #i‡(
deföed
 
HAL_IRGEN
Ë&& (HAL_IRGEN =
TRUE
)

50 
	~"hÆ_úgí.h
"

53 #i‡((
deföed
 
HAL_DMA
Ë&& (HAL_DMA =
TRUE
))

59 
hÆDMADesc_t
 
	gdmaCh0
;

60 
hÆDMADesc_t
 
	gdmaCh1234
[4];

71 
	$HÆDmaInô
( )

73 
	`HAL_DMA_SET_ADDR_DESC0
–&
dmaCh0
 );

74 
	`HAL_DMA_SET_ADDR_DESC1234
–
dmaCh1234
 );

75 #i‡(
HAL_UART_DMA
 || \

76 ((
deföed
 
HAL_UART_SPI
) && (HAL_UART_SPI != 0)) || \

77 ((
deföed
 
HAL_IRGEN
Ë&& (HAL_IRGEN =
TRUE
)))

78 
DMAIE
 = 1;

80 
	}
}

82 #i‡(
HAL_UART_DMA
 || \

83 ((
deföed
 
	gHAL_UART_SPI
) && (HAL_UART_SPI != 0)) || \

84 ((
deföed
 
HAL_IRGEN
Ë&& (HAL_IRGEN =
TRUE
)))

94 
	$HAL_ISR_FUNCTION
–
hÆDmaI§
, 
DMA_VECTOR
 )

96 
	`HAL_ENTER_ISR
();

98 
DMAIF
 = 0;

100 #i‡(((
deföed
 
HAL_UART_DMA
) && (HAL_UART_DMA != 0)) || \

101 ((
deföed
 
HAL_UART_SPI
) && (HAL_UART_SPI != 0)))

102 i‡(
	`HAL_DMA_CHECK_IRQ
(
HAL_DMA_CH_TX
))

104 
	`HAL_DMA_CLEAR_IRQ
(
HAL_DMA_CH_TX
);

105 
	`HÆUARTI§DMA
();

106 
	`HÆUARTI§DMA
();

110 #i‡(
deföed
 
HAL_IRGEN
Ë&& (HAL_IRGEN =
TRUE
)

111 i‡–
HAL_IRGEN
 =
TRUE
 && 
	`HAL_DMA_CHECK_IRQ
–
HAL_IRGEN_DMA_CH
 ) )

113 
	`HAL_DMA_CLEAR_IRQ
–
HAL_IRGEN_DMA_CH
 );

114 
	`HÆIrGíDmaI§
();

118 
	`CLEAR_SLEEP_MODE
();

119 
	`HAL_EXIT_ISR
();

122 
	}
}

	@../../../../Components/hal/target/CC2540EB/hal_dma.h

40 #i‚de‡
HAL_DMA_H


41 
	#HAL_DMA_H


	)

43 #ifde‡
__˝lu•lus


52 
	~"hÆ_bﬂrd.h
"

53 
	~"hÆ_ty≥s.h
"

55 #i‡((
deföed
 
HAL_DMA
Ë&& (HAL_DMA =
TRUE
))

61 
	#HAL_DMA_SET_ADDR_DESC0
–
a
 ) \

62 
	`°
( \

63 
DMA0CFGH
 = (
uöt8
)–(
uöt16
)(
a
) >> 8 ); \

64 
DMA0CFGL
 = (
uöt8
)–(
uöt16
)(
a
) & 0xFF ); \

65 )

	)

67 
	#HAL_DMA_SET_ADDR_DESC1234
–
a
 ) \

68 
	`°
( \

69 
DMA1CFGH
 = (
uöt8
)–(
uöt16
)(
a
) >> 8 ); \

70 
DMA1CFGL
 = (
uöt8
)–(
uöt16
)(
a
) & 0xFF); \

71 )

	)

73 
	#HAL_DMA_GET_DESC0
(Ë&
dmaCh0


	)

75 
	#HAL_DMA_GET_DESC1234
–
a
 ) (
dmaCh1234
+(◊)-1))

	)

77 
	#HAL_DMA_ARM_CH
–
ch
 ) 
DMAARM
 = (0x01 << (ch))

	)

79 
	#HAL_DMA_CH_ARMED
–
ch
 ) (
DMAARM
 & (0x01 << (ch)))

	)

81 
	#HAL_DMA_ABORT_CH
–
ch
 ) 
DMAARM
 = (0x80 | (0x01 << (ch)))

	)

82 
	#HAL_DMA_MAN_TRIGGER
–
ch
 ) 
DMAREQ
 = (0x01 << (ch))

	)

83 
	#HAL_DMA_START_CH
–
ch
 ) 
	`HAL_DMA_MAN_TRIGGER
–(chË)

	)

85 
	#HAL_DMA_CLEAR_IRQ
–
ch
 ) 
DMAIRQ
 &~–1 << (chË)

	)

87 
	#HAL_DMA_CHECK_IRQ
–
ch
 ) (
DMAIRQ
 & ( 1 << (chË))

	)

90 
	#HAL_DMA_SET_SOURCE
–
pDesc
, 
§c
 ) \

91 
	`°
( \

92 
pDesc
->
§cAddrH
 = (
uöt8
)((
uöt16
)(
§c
) >> 8); \

93 
pDesc
->
§cAddrL
 = (
uöt8
)((
uöt16
)(
§c
) & 0xFF); \

94 )

	)

97 
	#HAL_DMA_SET_DEST
–
pDesc
, 
d°
 ) \

98 
	`°
( \

99 
pDesc
->
d°AddrH
 = (
uöt8
)((
uöt16
)(
d°
) >> 8); \

100 
pDesc
->
d°AddrL
 = (
uöt8
)((
uöt16
)(
d°
) & 0xFF); \

101 )

	)

105 
	#HAL_DMA_SET_LEN
–
pDesc
, 
Àn
 ) \

106 
	`°
( \

107 
pDesc
->
x„rLíL
 = (
uöt8
)(
uöt16
)(
Àn
); \

108 
pDesc
->
x„rLíV
 &~
HAL_DMA_LEN_H
; \

109 
pDesc
->
x„rLíV
 |(
uöt8
)((
uöt16
)(
Àn
) >> 8); \

110 )

	)

112 
	#HAL_DMA_GET_LEN
–
pDesc
 ) \

113 (((
uöt16
)(
pDesc
->
x„rLíV
 & 
HAL_DMA_LEN_H
Ë<< 8Ë|ÖDesc->
x„rLíL
)

	)

115 
	#HAL_DMA_SET_VLEN
–
pDesc
, 
vMode
 ) \

116 
	`°
( \

117 
pDesc
->
x„rLíV
 &~
HAL_DMA_LEN_V
; \

118 
pDesc
->
x„rLíV
 |(
vMode
 << 5); \

119 )

	)

121 
	#HAL_DMA_SET_WORD_SIZE
–
pDesc
, 
xSz
 ) \

122 
	`°
( \

123 
pDesc
->
˘æA
 &~
HAL_DMA_WORD_SIZE
; \

124 
pDesc
->
˘æA
 |(
xSz
 << 7); \

125 )

	)

127 
	#HAL_DMA_SET_TRIG_MODE
–
pDesc
, 
tMode
 ) \

128 
	`°
( \

129 
pDesc
->
˘æA
 &~
HAL_DMA_TRIG_MODE
; \

130 
pDesc
->
˘æA
 |(
tMode
 << 5); \

131 )

	)

133 
	#HAL_DMA_GET_TRIG_MODE
–
pDesc
 ) (’Desc->
˘æA
 >> 5Ë& 0x3)

	)

135 
	#HAL_DMA_SET_TRIG_SRC
–
pDesc
, 
tSrc
 ) \

136 
	`°
( \

137 
pDesc
->
˘æA
 &~
HAL_DMA_TRIG_SRC
; \

138 
pDesc
->
˘æA
 |
tSrc
; \

139 )

	)

141 
	#HAL_DMA_SET_SRC_INC
–
pDesc
, 
§cInc
 ) \

142 
	`°
( \

143 
pDesc
->
˘æB
 &~
HAL_DMA_SRC_INC
; \

144 
pDesc
->
˘æB
 |(
§cInc
 << 6); \

145 )

	)

147 
	#HAL_DMA_SET_DST_INC
–
pDesc
, 
d°Inc
 ) \

148 
	`°
( \

149 
pDesc
->
˘æB
 &~
HAL_DMA_DST_INC
; \

150 
pDesc
->
˘æB
 |(
d°Inc
 << 4); \

151 )

	)

153 
	#HAL_DMA_SET_IRQ
–
pDesc
, 
íabÀ
 ) \

154 
	`°
( \

155 
pDesc
->
˘æB
 &~
HAL_DMA_IRQ_MASK
; \

156 
pDesc
->
˘æB
 |(
íabÀ
 << 3); \

157 )

	)

159 
	#HAL_DMA_SET_M8
–
pDesc
, 
m8
 ) \

160 
	`°
( \

161 
pDesc
->
˘æB
 &~
HAL_DMA_M8
; \

162 
pDesc
->
˘æB
 |(
m8
 << 2); \

163 )

	)

165 
	#HAL_DMA_SET_PRIORITY
–
pDesc
, 
¥i
 ) \

166 
	`°
( \

167 
pDesc
->
˘æB
 &~
HAL_DMA_PRIORITY
; \

168 
pDesc
->
˘æB
 |
¥i
; \

169 )

	)

176 
	#HAL_DMA_VLEN_USE_LEN
 0x00

	)

178 
	#HAL_DMA_VLEN_1_P_VALOFFIRST
 0x01

	)

180 
	#HAL_DMA_VLEN_VALOFFIRST
 0x02

	)

182 
	#HAL_DMA_VLEN_1_P_VALOFFIRST_P_1
 0x03

	)

184 
	#HAL_DMA_VLEN_1_P_VALOFFIRST_P_2
 0x04

	)

186 
	#HAL_DMA_WORDSIZE_BYTE
 0x00

	)

187 
	#HAL_DMA_WORDSIZE_WORD
 0x01

	)

189 
	#HAL_DMA_TMODE_SINGLE
 0x00

	)

190 
	#HAL_DMA_TMODE_BLOCK
 0x01

	)

191 
	#HAL_DMA_TMODE_SINGLE_REPEATED
 0x02

	)

192 
	#HAL_DMA_TMODE_BLOCK_REPEATED
 0x03

	)

194 
	#HAL_DMA_TRIG_NONE
 0

	)

195 
	#HAL_DMA_TRIG_PREV
 1

	)

196 
	#HAL_DMA_TRIG_T1_CH0
 2

	)

197 
	#HAL_DMA_TRIG_T1_CH1
 3

	)

198 
	#HAL_DMA_TRIG_T1_CH2
 4

	)

199 
	#HAL_DMA_TRIG_T2_COMP
 5

	)

200 
	#HAL_DMA_TRIG_T2_OVFL
 6

	)

201 
	#HAL_DMA_TRIG_T3_CH0
 7

	)

202 
	#HAL_DMA_TRIG_T3_CH1
 8

	)

203 
	#HAL_DMA_TRIG_T4_CH0
 9

	)

204 
	#HAL_DMA_TRIG_T4_CH1
 10

	)

205 
	#HAL_DMA_TRIG_ST
 11

	)

206 
	#HAL_DMA_TRIG_IOC_0
 12

	)

207 
	#HAL_DMA_TRIG_IOC_1
 13

	)

208 
	#HAL_DMA_TRIG_URX0
 14

	)

209 
	#HAL_DMA_TRIG_UTX0
 15

	)

210 
	#HAL_DMA_TRIG_URX1
 16

	)

211 
	#HAL_DMA_TRIG_UTX1
 17

	)

212 
	#HAL_DMA_TRIG_FLASH
 18

	)

213 
	#HAL_DMA_TRIG_RADIO
 19

	)

214 
	#HAL_DMA_TRIG_ADC_CHALL
 20

	)

215 
	#HAL_DMA_TRIG_ADC_CH0
 21

	)

216 
	#HAL_DMA_TRIG_ADC_CH1
 22

	)

217 
	#HAL_DMA_TRIG_ADC_CH2
 23

	)

218 
	#HAL_DMA_TRIG_ADC_CH3
 24

	)

219 
	#HAL_DMA_TRIG_ADC_CH4
 25

	)

220 
	#HAL_DMA_TRIG_ADC_CH5
 26

	)

221 
	#HAL_DMA_TRIG_ADC_CH6
 27

	)

222 
	#HAL_DMA_TRIG_ADC_CH7
 28

	)

223 
	#HAL_DMA_TRIG_ENC_DW
 29

	)

224 
	#HAL_DMA_TRIG_ENC_UP
 30

	)

226 
	#HAL_DMA_SRCINC_0
 0x00

	)

227 
	#HAL_DMA_SRCINC_1
 0x01

	)

228 
	#HAL_DMA_SRCINC_2
 0x02

	)

229 
	#HAL_DMA_SRCINC_M1
 0x03

	)

231 
	#HAL_DMA_DSTINC_0
 0x00

	)

232 
	#HAL_DMA_DSTINC_1
 0x01

	)

233 
	#HAL_DMA_DSTINC_2
 0x02

	)

234 
	#HAL_DMA_DSTINC_M1
 0x03

	)

236 
	#HAL_DMA_IRQMASK_DISABLE
 0x00

	)

237 
	#HAL_DMA_IRQMASK_ENABLE
 0x01

	)

239 
	#HAL_DMA_M8_USE_8_BITS
 0x00

	)

240 
	#HAL_DMA_M8_USE_7_BITS
 0x01

	)

242 
	#HAL_DMA_PRI_LOW
 0x00

	)

243 
	#HAL_DMA_PRI_GUARANTEED
 0x01

	)

244 
	#HAL_DMA_PRI_HIGH
 0x02

	)

245 
	#HAL_DMA_PRI_ABSOLUTE
 0x03

	)

247 
	#HAL_DMA_MAX_ARM_CLOCKS
 45

248 

	)

254 
	#HAL_DMA_LEN_V
 0xE0

	)

255 
	#HAL_DMA_LEN_H
 0x1F

	)

258 
	#HAL_DMA_WORD_SIZE
 0x80

	)

259 
	#HAL_DMA_TRIG_MODE
 0x60

	)

260 
	#HAL_DMA_TRIG_SRC
 0x1F

	)

263 
	#HAL_DMA_SRC_INC
 0xC0

	)

264 
	#HAL_DMA_DST_INC
 0x30

	)

265 
	#HAL_DMA_IRQ_MASK
 0x08

	)

266 
	#HAL_DMA_M8
 0x04

	)

267 
	#HAL_DMA_PRIORITY
 0x03

	)

270 
uöt8
 
§cAddrH
;

271 
uöt8
 
§cAddrL
;

272 
uöt8
 
d°AddrH
;

273 
uöt8
 
d°AddrL
;

274 
uöt8
 
x„rLíV
;

275 
uöt8
 
x„rLíL
;

276 
uöt8
 
˘æA
;

277 
uöt8
 
˘æB
;

278 } 
	thÆDMADesc_t
;

284 
hÆDMADesc_t
 
dmaCh0
;

285 
hÆDMADesc_t
 
dmaCh1234
[4];

291 
HÆDmaInô
( );

295 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2540EB/hal_flash.c

45 
	~"hÆ_bﬂrd_cfg.h
"

46 
	~"hÆ_dma.h
"

47 
	~"hÆ_Êash.h
"

48 
	~"hÆ_ty≥s.h
"

69 
	$HÆFœshRód
(
uöt8
 
pg
, 
uöt16
 
off£t
, uöt8 *
buf
, uöt16 
˙t
)

72 
uöt8
 *
±r
 = (uöt8 *)(
off£t
 + 
HAL_FLASH_PAGE_MAP
) +

73 ((
pg
 % 
HAL_FLASH_PAGE_PER_BANK
Ë* 
HAL_FLASH_PAGE_SIZE
);

74 
uöt8
 
mem˘r
 = 
MEMCTR
;

76 #i‡!
deföed
 
HAL_OAD_BOOT_CODE


77 
hÆI¡Sèã_t
 
is
;

80 
pg
 /
HAL_FLASH_PAGE_PER_BANK
;

82 #i‡!
deföed
 
HAL_OAD_BOOT_CODE


83 
	`HAL_ENTER_CRITICAL_SECTION
(
is
);

87 
MEMCTR
 = (MEMCTR & 0xF8Ë| 
pg
;

89 
˙t
--)

91 *
buf
++ = *
±r
++;

94 
MEMCTR
 = 
mem˘r
;

96 #i‡!
deföed
 
HAL_OAD_BOOT_CODE


97 
	`HAL_EXIT_CRITICAL_SECTION
(
is
);

99 
	}
}

119 
	$HÆFœshWrôe
(
uöt16
 
addr
, 
uöt8
 *
buf
, uöt16 
˙t
)

121 #i‡(
deföed
 
HAL_DMA
Ë&& (HAL_DMA =
TRUE
)

122 
hÆDMADesc_t
 *
ch
 = 
	`HAL_NV_DMA_GET_DESC
();

124 
	`HAL_DMA_SET_SOURCE
(
ch
, 
buf
);

125 
	`HAL_DMA_SET_DEST
(
ch
, &
FWDATA
);

126 
	`HAL_DMA_SET_VLEN
(
ch
, 
HAL_DMA_VLEN_USE_LEN
);

127 
	`HAL_DMA_SET_LEN
(
ch
, (
˙t
 * 
HAL_FLASH_WORD_SIZE
));

128 
	`HAL_DMA_SET_WORD_SIZE
(
ch
, 
HAL_DMA_WORDSIZE_BYTE
);

129 
	`HAL_DMA_SET_TRIG_MODE
(
ch
, 
HAL_DMA_TMODE_SINGLE
);

130 
	`HAL_DMA_SET_TRIG_SRC
(
ch
, 
HAL_DMA_TRIG_FLASH
);

131 
	`HAL_DMA_SET_SRC_INC
(
ch
, 
HAL_DMA_SRCINC_1
);

132 
	`HAL_DMA_SET_DST_INC
(
ch
, 
HAL_DMA_DSTINC_0
);

134 
	`HAL_DMA_SET_IRQ
(
ch
, 
HAL_DMA_IRQMASK_DISABLE
);

135 
	`HAL_DMA_SET_M8
–
ch
, 
HAL_DMA_M8_USE_8_BITS
);

136 
	`HAL_DMA_SET_PRIORITY
(
ch
, 
HAL_DMA_PRI_HIGH
);

137 
	`HAL_DMA_CLEAR_IRQ
(
HAL_NV_DMA_CH
);

138 
	`HAL_DMA_ARM_CH
(
HAL_NV_DMA_CH
);

140 
FADDRL
 = (
uöt8
)
addr
;

141 
FADDRH
 = (
uöt8
)(
addr
 >> 8);

142 
FCTL
 |= 0x02;

143 
FCTL
 & 0x80);

145 
	}
}

163 
	$HÆFœshEø£
(
uöt8
 
pg
)

165 
FADDRH
 = 
pg
 * (
HAL_FLASH_PAGE_SIZE
 / 
HAL_FLASH_WORD_SIZE
 / 256);

166 
FCTL
 |= 0x01;

167 
	}
}

	@../../../../Components/hal/target/CC2540EB/hal_key.c

83 
	~"hÆ_mcu.h
"

84 
	~"hÆ_defs.h
"

85 
	~"hÆ_ty≥s.h
"

86 
	~"hÆ_drivîs.h
"

87 
	~"hÆ_adc.h
"

88 
	~"hÆ_key.h
"

89 
	~"oßl.h
"

91 #i‡(
deföed
 
HAL_KEY
Ë&& (HAL_KEY =
TRUE
)

96 
	#HAL_KEY_RISING_EDGE
 0

	)

97 
	#HAL_KEY_FALLING_EDGE
 1

	)

99 
	#HAL_KEY_DEBOUNCE_VALUE
 25

	)

102 
	#HAL_KEY_CPU_PORT_0_IF
 
P0IF


	)

103 
	#HAL_KEY_CPU_PORT_2_IF
 
P2IF


	)

105 #i‡
deföed
 ( 
CC2540_MINIDK
 )

107 
	#HAL_KEY_SW_1_PORT
 
P0


	)

108 
	#HAL_KEY_SW_1_BIT
 
	`BV
(0)

	)

109 
	#HAL_KEY_SW_1_SEL
 
P0SEL


	)

110 
	#HAL_KEY_SW_1_DIR
 
P0DIR


	)

113 
	#HAL_KEY_SW_2_PORT
 
P0


	)

114 
	#HAL_KEY_SW_2_BIT
 
	`BV
(1)

	)

115 
	#HAL_KEY_SW_2_SEL
 
P0SEL


	)

116 
	#HAL_KEY_SW_2_DIR
 
P0DIR


	)

118 
	#HAL_KEY_SW_1_IEN
 
IEN1


	)

119 
	#HAL_KEY_SW_1_ICTL
 
P0IEN


	)

120 
	#HAL_KEY_SW_1_ICTLBIT
 
	`BV
(0Ë

	)

121 
	#HAL_KEY_SW_1_IENBIT
 
	`BV
(5Ë

	)

123 
	#HAL_KEY_SW_1_PXIFG
 
P0IFG


	)

124 
	#HAL_KEY_SW_2_IEN
 
IEN1


	)

125 
	#HAL_KEY_SW_2_ICTL
 
P0IEN


	)

126 
	#HAL_KEY_SW_2_ICTLBIT
 
	`BV
(1Ë

	)

127 
	#HAL_KEY_SW_2_IENBIT
 
	`BV
(5Ë

	)

128 
	#HAL_KEY_SW_2_PXIFG
 
P0IFG


	)

130 
	#HAL_KEY_SW_1_EDGEBIT
 
	`BV
(0)

	)

135 
	#HAL_KEY_SW_6_PORT
 
P0


	)

136 
	#HAL_KEY_SW_6_BIT
 
	`BV
(1)

	)

137 
	#HAL_KEY_SW_6_SEL
 
P0SEL


	)

138 
	#HAL_KEY_SW_6_DIR
 
P0DIR


	)

141 
	#HAL_KEY_SW_6_EDGEBIT
 
	`BV
(0)

	)

142 
	#HAL_KEY_SW_6_EDGE
 
HAL_KEY_FALLING_EDGE


	)

145 
	#HAL_KEY_SW_6_IEN
 
IEN1


	)

146 
	#HAL_KEY_SW_6_IENBIT
 
	`BV
(5Ë

	)

147 
	#HAL_KEY_SW_6_ICTL
 
P0IEN


	)

148 
	#HAL_KEY_SW_6_ICTLBIT
 
	`BV
(1Ë

	)

149 
	#HAL_KEY_SW_6_PXIFG
 
P0IFG


	)

152 
	#HAL_KEY_JOY_MOVE_PORT
 
P2


	)

153 
	#HAL_KEY_JOY_MOVE_BIT
 
	`BV
(0)

	)

154 
	#HAL_KEY_JOY_MOVE_SEL
 
P2SEL


	)

155 
	#HAL_KEY_JOY_MOVE_DIR
 
P2DIR


	)

158 
	#HAL_KEY_JOY_MOVE_EDGEBIT
 
	`BV
(3)

	)

159 
	#HAL_KEY_JOY_MOVE_EDGE
 
HAL_KEY_FALLING_EDGE


	)

162 
	#HAL_KEY_JOY_MOVE_IEN
 
IEN2


	)

163 
	#HAL_KEY_JOY_MOVE_IENBIT
 
	`BV
(1Ë

	)

164 
	#HAL_KEY_JOY_MOVE_ICTL
 
P2IEN


	)

165 
	#HAL_KEY_JOY_MOVE_ICTLBIT
 
	`BV
(0Ë

	)

166 
	#HAL_KEY_JOY_MOVE_PXIFG
 
P2IFG


	)

168 
	#HAL_KEY_JOY_CHN
 
HAL_ADC_CHANNEL_6


	)

180 
uöt8
 
	ghÆKeySavedKeys
;

181 
hÆKeyCBack_t
 
	gpHÆKeyPro˚ssFun˘i⁄
;

182 
uöt8
 
	gHÆKeyC⁄figuªd
;

183 
boﬁ
 
	gHÆ_KeyI¡E«bÀ
;

188 
hÆPro˚ssKeyI¡îru±
();

189 
uöt8
 
hÆGëJoyKeyI≈ut
();

207 
	$HÆKeyInô
( )

209 
hÆKeySavedKeys
 = 0;

211 #i‡
	`deföed
 ( 
CC2540_MINIDK
 )

212 
HAL_KEY_SW_1_SEL
 &~(
HAL_KEY_SW_1_BIT
);

213 
HAL_KEY_SW_1_DIR
 &~(
HAL_KEY_SW_1_BIT
);

214 
HAL_KEY_SW_2_SEL
 &~(
HAL_KEY_SW_2_BIT
);

215 
HAL_KEY_SW_2_DIR
 &~(
HAL_KEY_SW_2_BIT
);

217 
HAL_KEY_SW_6_SEL
 &~(
HAL_KEY_SW_6_BIT
);

218 
HAL_KEY_SW_6_DIR
 &~(
HAL_KEY_SW_6_BIT
);

219 
HAL_KEY_JOY_MOVE_SEL
 &~(
HAL_KEY_JOY_MOVE_BIT
);

220 
HAL_KEY_JOY_MOVE_DIR
 &~(
HAL_KEY_JOY_MOVE_BIT
);

222 
P2INP
 |
PUSH2_BV
;

226 
pHÆKeyPro˚ssFun˘i⁄
 = 
NULL
;

229 
HÆKeyC⁄figuªd
 = 
FALSE
;

231 #i‡
	`deföed
 ( 
CC2540_MINIDK
 )

233 
PICTL
 |
HAL_KEY_SW_1_EDGEBIT
;

234 
HAL_KEY_SW_1_IEN
 |–
HAL_KEY_SW_1_IENBIT
 | 
HAL_KEY_SW_2_IENBIT
 );

236 
	}
}

249 
	$HÆKeyC⁄fig
 (
boﬁ
 
öãºu±E«bÀ
, 
hÆKeyCBack_t
 
cback
)

252 
HÆ_KeyI¡E«bÀ
 = 
öãºu±E«bÀ
;

255 
pHÆKeyPro˚ssFun˘i⁄
 = 
cback
;

258 i‡(
HÆ_KeyI¡E«bÀ
)

260 #i‡
	`deföed
 ( 
CC2540_MINIDK
 )

261 
HAL_KEY_SW_1_ICTL
 |
HAL_KEY_SW_1_ICTLBIT
;

262 
HAL_KEY_SW_1_PXIFG
 = ~(
HAL_KEY_SW_1_BIT
);

263 
HAL_KEY_SW_2_ICTL
 |
HAL_KEY_SW_2_ICTLBIT
;

264 
HAL_KEY_SW_2_PXIFG
 = ~(
HAL_KEY_SW_2_BIT
);

268 
PICTL
 &~(
HAL_KEY_SW_6_EDGEBIT
);

270 #i‡(
HAL_KEY_SW_6_EDGE
 =
HAL_KEY_FALLING_EDGE
)

271 
PICTL
 |
HAL_KEY_SW_6_EDGEBIT
;

280 
HAL_KEY_SW_6_ICTL
 |
HAL_KEY_SW_6_ICTLBIT
;

281 
HAL_KEY_SW_6_IEN
 |
HAL_KEY_SW_6_IENBIT
;

282 
HAL_KEY_SW_6_PXIFG
 = ~(
HAL_KEY_SW_6_BIT
);

285 
HAL_KEY_JOY_MOVE_ICTL
 &~(
HAL_KEY_JOY_MOVE_EDGEBIT
);

287 #i‡(
HAL_KEY_JOY_MOVE_EDGE
 =
HAL_KEY_FALLING_EDGE
)

288 
HAL_KEY_JOY_MOVE_ICTL
 |
HAL_KEY_JOY_MOVE_EDGEBIT
;

297 
HAL_KEY_JOY_MOVE_ICTL
 |
HAL_KEY_JOY_MOVE_ICTLBIT
;

298 
HAL_KEY_JOY_MOVE_IEN
 |
HAL_KEY_JOY_MOVE_IENBIT
;

299 
HAL_KEY_JOY_MOVE_PXIFG
 = ~(
HAL_KEY_JOY_MOVE_BIT
);

303 i‡(
HÆKeyC⁄figuªd
 =
TRUE
)

305 
	`oßl_°›_timîEx
(
HÆ_TaskID
, 
HAL_KEY_EVENT
);

310 #i‡
	`deföed
 ( 
CC2540_MINIDK
 )

311 
HAL_KEY_SW_1_ICTL
 &~(
HAL_KEY_SW_1_ICTLBIT
);

312 
HAL_KEY_SW_2_ICTL
 &~(
HAL_KEY_SW_2_ICTLBIT
);

314 
HAL_KEY_SW_6_ICTL
 &~(
HAL_KEY_SW_6_ICTLBIT
);

315 
HAL_KEY_SW_6_IEN
 &~(
HAL_KEY_SW_6_IENBIT
);

318 
	`oßl_£t_evít
(
HÆ_TaskID
, 
HAL_KEY_EVENT
);

322 
HÆKeyC⁄figuªd
 = 
TRUE
;

323 
	}
}

335 
uöt8
 
	$HÆKeyRód
 ( )

337 
uöt8
 
keys
 = 0;

339 #i‡
	`deföed
 (
CC2540_MINIDK
)

340 i‡(!(
HAL_KEY_SW_1_PORT
 & 
HAL_KEY_SW_1_BIT
))

342 
keys
 |
HAL_KEY_SW_1
;

344 i‡(!(
HAL_KEY_SW_2_PORT
 & 
HAL_KEY_SW_2_BIT
))

346 
keys
 |
HAL_KEY_SW_2
;

349 #ifde‡
HAL_BOARD_CC2530EB_REV17


350 i‡–(
HAL_KEY_SW_6_PORT
 & 
HAL_KEY_SW_6_BIT
))

351 #ñi‡
	`deföed
 (
HAL_BOARD_CC2530EB_REV13
)

352 i‡(!(
HAL_KEY_SW_6_PORT
 & 
HAL_KEY_SW_6_BIT
))

355 
keys
 |
HAL_KEY_SW_6
;

358 i‡((
HAL_KEY_JOY_MOVE_PORT
 & 
HAL_KEY_JOY_MOVE_BIT
))

360 
keys
 |
	`hÆGëJoyKeyI≈ut
();

363  
keys
;

364 
	}
}

376 
	$HÆKeyPﬁl
 ()

378 
uöt8
 
keys
 = 0;

379 
uöt8
 
nŸify
 = 0;

380 #i‡
	`deföed
 (
CC2540_MINIDK
)

381 i‡(!(
HAL_KEY_SW_1_PORT
 & 
HAL_KEY_SW_1_BIT
))

383 
keys
 |
HAL_KEY_SW_1
;

385 i‡(!(
HAL_KEY_SW_2_PORT
 & 
HAL_KEY_SW_2_BIT
))

387 
keys
 |
HAL_KEY_SW_2
;

390 i‡(!(
HAL_KEY_SW_6_PORT
 & 
HAL_KEY_SW_6_BIT
))

392 
keys
 |
HAL_KEY_SW_6
;

395 i‡((
HAL_KEY_JOY_MOVE_PORT
 & 
HAL_KEY_JOY_MOVE_BIT
))

397 
keys
 = 
	`hÆGëJoyKeyI≈ut
();

404 i‡(!
HÆ_KeyI¡E«bÀ
)

406 i‡(
keys
 =
hÆKeySavedKeys
)

413 
nŸify
 = 1;

419 i‡(
keys
)

421 
nŸify
 = 1;

426 
hÆKeySavedKeys
 = 
keys
;

429 i‡(
nŸify
 && (
pHÆKeyPro˚ssFun˘i⁄
))

431 (
pHÆKeyPro˚ssFun˘i⁄
Ë(
keys
, 
HAL_KEY_STATE_NORMAL
);

434 
	}
}

436 #i‡!
deföed
 ( 
CC2540_MINIDK
 )

446 
uöt8
 
	$hÆGëJoyKeyI≈ut
()

451 
uöt8
 
adc
;

452 
uöt8
 
kßve0
 = 0;

453 
uöt8
 
kßve1
;

458 
kßve1
 = 
kßve0
;

460 
adc
 = 
	`HÆAdcRód
 (
HAL_KEY_JOY_CHN
, 
HAL_ADC_RESOLUTION_8
);

462 i‡((
adc
 >= 2) && (adc <= 38))

464 
kßve0
 |
HAL_KEY_UP
;

466 i‡((
adc
 >= 74) && (adc <= 88))

468 
kßve0
 |
HAL_KEY_RIGHT
;

470 i‡((
adc
 >= 60) && (adc <= 73))

472 
kßve0
 |
HAL_KEY_LEFT
;

474 i‡((
adc
 >= 39) && (adc <= 59))

476 
kßve0
 |
HAL_KEY_DOWN
;

478 i‡((
adc
 >= 89) && (adc <= 100))

480 
kßve0
 |
HAL_KEY_CENTER
;

482 } 
kßve0
 !
kßve1
);

484  
kßve0
;

485 
	}
}

498 
	$hÆPro˚ssKeyI¡îru±
 ()

500 
boﬁ
 
vÆid
=
FALSE
;

502 #i‡
	`deföed
 ( 
CC2540_MINIDK
 )

503 if–
HAL_KEY_SW_1_PXIFG
 & 
HAL_KEY_SW_1_BIT
)

505 
HAL_KEY_SW_1_PXIFG
 = ~(
HAL_KEY_SW_1_BIT
);

506 
vÆid
 = 
TRUE
;

509 i‡(
HAL_KEY_SW_2_PXIFG
 & 
HAL_KEY_SW_2_BIT
)

511 
HAL_KEY_SW_2_PXIFG
 = ~(
HAL_KEY_SW_2_BIT
);

512 
vÆid
 = 
TRUE
;

515 i‡(
HAL_KEY_SW_6_PXIFG
 & 
HAL_KEY_SW_6_BIT
)

517 
HAL_KEY_SW_6_PXIFG
 = ~(
HAL_KEY_SW_6_BIT
);

518 
vÆid
 = 
TRUE
;

521 i‡(
HAL_KEY_JOY_MOVE_PXIFG
 & 
HAL_KEY_JOY_MOVE_BIT
)

523 
HAL_KEY_JOY_MOVE_PXIFG
 = ~(
HAL_KEY_JOY_MOVE_BIT
);

524 
vÆid
 = 
TRUE
;

527 i‡(
vÆid
)

529 
	`oßl_°¨t_timîEx
 (
HÆ_TaskID
, 
HAL_KEY_EVENT
, 
HAL_KEY_DEBOUNCE_VALUE
);

531 
	}
}

542 
	$HÆKeyE¡îSÀï
 ( )

544 
	}
}

555 
uöt8
 
	$HÆKeyExôSÀï
 ( )

558  ( 
	`HÆKeyRód
 () );

559 
	}
}

574 
	$HAL_ISR_FUNCTION
–
hÆKeyP‹t0I§
, 
P0INT_VECTOR
 )

576 
	`HAL_ENTER_ISR
();

578 #i‡
	`deföed
 ( 
CC2540_MINIDK
 )

579 i‡((
HAL_KEY_SW_1_PXIFG
 & 
HAL_KEY_SW_1_BIT
Ë|| (
HAL_KEY_SW_2_PXIFG
 & 
HAL_KEY_SW_2_BIT
))

581 i‡(
HAL_KEY_SW_6_PXIFG
 & 
HAL_KEY_SW_6_BIT
)

584 
	`hÆPro˚ssKeyI¡îru±
();

591 #i‡
	`deföed
 ( 
CC2540_MINIDK
 )

592 
HAL_KEY_SW_1_PXIFG
 = 0;

593 
HAL_KEY_SW_2_PXIFG
 = 0;

595 
HAL_KEY_SW_6_PXIFG
 = 0;

597 
HAL_KEY_CPU_PORT_0_IF
 = 0;

599 
	`CLEAR_SLEEP_MODE
();

601 
	`HAL_EXIT_ISR
();

604 
	}
}

606 #i‡!
deföed
 ( 
CC2540_MINIDK
 )

616 
	$HAL_ISR_FUNCTION
–
hÆKeyP‹t2I§
, 
P2INT_VECTOR
 )

618 
	`HAL_ENTER_ISR
();

620 i‡(
HAL_KEY_JOY_MOVE_PXIFG
 & 
HAL_KEY_JOY_MOVE_BIT
)

622 
	`hÆPro˚ssKeyI¡îru±
();

630 
HAL_KEY_JOY_MOVE_PXIFG
 = 0;

631 
HAL_KEY_CPU_PORT_2_IF
 = 0;

633 
	`CLEAR_SLEEP_MODE
();

635 
	`HAL_EXIT_ISR
();

638 
	}
}

642 
	$HÆKeyInô
(){
	}
}

643 
	$HÆKeyC⁄fig
(
boﬁ
 
öãºu±E«bÀ
, 
hÆKeyCBack_t
 
cback
){
	}
}

644 
uöt8
 
	$HÆKeyRód
(){  0;
	}
}

645 
	$HÆKeyPﬁl
(){
	}
}

	@../../../../Components/hal/target/CC2540EB/hal_lcd.c

43 
	~"hÆ_ty≥s.h
"

44 
	~"hÆ_lcd.h
"

45 
	~"OSAL.h
"

46 
	~"OnBﬂrd.h
"

47 
	~"hÆ_as£π.h
"

49 #i‡
deföed
 (
ZTOOL_P1
Ë|| deföed (
ZTOOL_P2
)

50 
	~"DebugTø˚.h
"

71 
	#HAL_LCD_MAX_CHARS
 16

	)

72 
	#HAL_LCD_MAX_BUFF
 25

	)

75 
	#HAL_LCD_MODE_PORT
 0

	)

76 
	#HAL_LCD_MODE_PIN
 0

	)

78 
	#HAL_LCD_RESET_PORT
 1

	)

79 
	#HAL_LCD_RESET_PIN
 1

	)

81 
	#HAL_LCD_CS_PORT
 1

	)

82 
	#HAL_LCD_CS_PIN
 2

	)

85 
	#HAL_LCD_CLK_PORT
 1

	)

86 
	#HAL_LCD_CLK_PIN
 5

	)

88 
	#HAL_LCD_MOSI_PORT
 1

	)

89 
	#HAL_LCD_MOSI_PIN
 6

	)

91 
	#HAL_LCD_MISO_PORT
 1

	)

92 
	#HAL_LCD_MISO_PIN
 7

	)

95 
	#HAL_SPI_CLOCK_POL_LO
 0x00

	)

96 
	#HAL_SPI_CLOCK_PHA_0
 0x00

	)

97 
	#HAL_SPI_TRANSFER_MSB_FIRST
 0x20

	)

100 
	#LCD_MAX_LINE_COUNT
 3

	)

105 
	#OSC_OFF
 0x00

	)

106 
	#OSC_ON
 0x01

	)

107 
	#POWER_SAVE_OFF
 0x00

	)

108 
	#POWER_SAVE_ON
 0x02

	)

109 
	#SET_POWER_SAVE_MODE
(
›ti⁄s
Ë
	`HÆLcd_HW_C⁄åﬁ
(0x0C | (›ti⁄s))

	)

112 
	#CGROM
 0x00

	)

113 
	#CGRAM
 0x01

	)

114 
	#COM_FORWARD
 0x00

	)

115 
	#COM_BACKWARD
 0x02

	)

116 
	#TWO_LINE
 0x00

	)

117 
	#THREE_LINE
 0x04

	)

118 
	#FUNCTION_SET
(
›ti⁄s
Ë
	`HÆLcd_HW_C⁄åﬁ
(0x10 | (›ti⁄s))

	)

121 
	#LINE1
 0x00

	)

122 
	#LINE2
 0x01

	)

123 
	#LINE3
 0x02

	)

124 
	#LINE4
 0x03

	)

125 
	#SET_DISPLAY_START_LINE
(
löe
Ë
	`HÆLcd_HW_C⁄åﬁ
(0x18 | (löe))

	)

128 
	#BIAS_1_5
 0x00

	)

129 
	#BIAS_1_4
 0x01

	)

130 
	#SET_BIAS_CTRL
(
büs
Ë
	`HÆLcd_HW_C⁄åﬁ
(0x1C | (büs))

	)

133 
	#VOLTAGE_DIVIDER_OFF
 0x00

	)

134 
	#VOLTAGE_DIVIDER_ON
 0x01

	)

135 
	#CONVERTER_AND_REG_OFF
 0x00

	)

136 
	#CONVERTER_AND_REG_ON
 0x04

	)

137 
	#SET_POWER_CTRL
(
›ti⁄s
Ë
	`HÆLcd_HW_C⁄åﬁ
(0x20 | (›ti⁄s))

	)

140 
	#DISPLAY_CTRL_ON
 0x01

	)

141 
	#DISPLAY_CTRL_OFF
 0x00

	)

142 
	#DISPLAY_CTRL_BLINK_ON
 0x02

	)

143 
	#DISPLAY_CTRL_BLINK_OFF
 0x00

	)

144 
	#DISPLAY_CTRL_CURSOR_ON
 0x04

	)

145 
	#DISPLAY_CTRL_CURSOR_OFF
 0x00

	)

146 
	#SET_DISPLAY_CTRL
(
›ti⁄s
Ë
	`HÆLcd_HW_C⁄åﬁ
(0x28 | (›ti⁄s))

	)

149 
	#SET_DDRAM_ADDR
(
ch¨Index
Ë
	`HÆLcd_HW_C⁄åﬁ
(0x80 | (ch¨Index))

	)

150 
	#SET_GCRAM_CHAR
(
•ecIndex
Ë
	`HÆLcd_HW_C⁄åﬁ
(0xC0 | (•ecIndex))

	)

153 
	#CONTRAST_CTRL_REGISTER
 0x10

	)

154 
	#SET_ICONRAM_ADDR
(
addr
Ë
	`HÆLcd_HW_C⁄åﬁ
(0x40 | (addr))

	)

157 
	#LINE_1_AND_2
 0x01

	)

158 
	#LINE_2_AND_3
 0x02

	)

159 
	#NORMAL_DISPLAY
 0x00

	)

160 
	#SET_DOUBLE_HEIGHT
(
›ti⁄s
Ë
	`HÆLcd_HW_C⁄åﬁ
(0x08 | (›ti⁄s))

	)

166 
	#HAL_IO_SET
(
p‹t
, 
pö
, 
vÆ
Ë
	`HAL_IO_SET_PREP
’‹t,Öö, vÆ)

	)

167 
	#HAL_IO_SET_PREP
(
p‹t
, 
pö
, 
vÆ
Ë
	`°
–
P
##p‹t##
_
##pö## = vÆ; )

	)

169 
	#HAL_CONFIG_IO_OUTPUT
(
p‹t
, 
pö
, 
vÆ
Ë
	`HAL_CONFIG_IO_OUTPUT_PREP
’‹t,Öö, vÆ)

	)

170 
	#HAL_CONFIG_IO_OUTPUT_PREP
(
p‹t
, 
pö
, 
vÆ
Ë
	`°
–
P
##p‹t##
SEL
 &~
	`BV
(pin); \

171 
P
##
p‹t
##
_
##
pö
## = 
vÆ
; \

172 
P
##
p‹t
##
DIR
 |
	`BV
(
pö
); )

	)

174 
	#HAL_CONFIG_IO_PERIPHERAL
(
p‹t
, 
pö
Ë
	`HAL_CONFIG_IO_PERIPHERAL_PREP
’‹t,Öö)

	)

175 
	#HAL_CONFIG_IO_PERIPHERAL_PREP
(
p‹t
, 
pö
Ë
	`°
–
P
##p‹t##
SEL
 |
	`BV
’ö); )

	)

180 
	#LCD_SPI_BEGIN
(Ë
	`HAL_IO_SET
(
HAL_LCD_CS_PORT
, 
HAL_LCD_CS_PIN
, 0);

	)

181 
	#LCD_SPI_END
() \

183 
	`asm
("NOP"); \

184 
	`asm
("NOP"); \

185 
	`asm
("NOP"); \

186 
	`asm
("NOP"); \

187 
	`HAL_IO_SET
(
HAL_LCD_CS_PORT
, 
HAL_LCD_CS_PIN
, 1); \

188 }

	)

190 
	#LCD_SPI_TX
(
x
Ë{ 
U1CSR
 &~(
	`BV
(2Ë| BV(1)); 
U1DBUF
 = x;  !(U1CSR & BV(1)Ë); }

	)

191 
	#LCD_SPI_WAIT_RXRDY
(Ë{ !(
U1CSR
 & 
	`BV
(1))); }

	)

195 
	#LCD_DO_WRITE
(Ë
	`HAL_IO_SET
(
HAL_LCD_MODE_PORT
, 
HAL_LCD_MODE_PIN
, 1);

	)

196 
	#LCD_DO_CONTROL
(Ë
	`HAL_IO_SET
(
HAL_LCD_MODE_PORT
, 
HAL_LCD_MODE_PIN
, 0);

	)

198 
	#LCD_ACTIVATE_RESET
(Ë
	`HAL_IO_SET
(
HAL_LCD_RESET_PORT
, 
HAL_LCD_RESET_PIN
, 0);

	)

199 
	#LCD_RELEASE_RESET
(Ë
	`HAL_IO_SET
(
HAL_LCD_RESET_PORT
, 
HAL_LCD_RESET_PIN
, 1);

	)

205 #i‡(
HAL_LCD
 =
TRUE
)

206 
uöt8
 *
	gLcd_Löe1
;

212 #i‡(
HAL_LCD
 =
TRUE
)

213 
HÆLcd_HW_Inô
();

214 
HÆLcd_HW_WaôUs
(
uöt16
 
i
);

215 
HÆLcd_HW_CÀ¨
();

216 
HÆLcd_HW_CÀ¨AŒS≥cCh¨s
();

217 
HÆLcd_HW_C⁄åﬁ
(
uöt8
 
cmd
);

218 
HÆLcd_HW_Wrôe
(
uöt8
 
d©a
);

219 
HÆLcd_HW_SëC⁄åa°
(
uöt8
 
vÆue
);

220 
HÆLcd_HW_WrôeCh¨
(
uöt8
 
löe
, uöt8 
cﬁ
, 
ãxt
);

221 
HÆLcd_HW_WrôeLöe
(
uöt8
 
löe
, c⁄° *
pText
);

233 
	$HÆLcdInô
()

235 #i‡(
HAL_LCD
 =
TRUE
)

236 
Lcd_Löe1
 = 
NULL
;

237 
	`HÆLcd_HW_Inô
();

239 
	}
}

269 
	$HÆLcdWrôeSåög
 ( *
°r
, 
uöt8
 
›ti⁄
)

271 #i‡(
HAL_LCD
 =
TRUE
)

273 
uöt8
 
°rLí
 = 0;

274 
uöt8
 
tŸÆLí
 = 0;

275 
uöt8
 *
buf
;

276 
uöt8
 
tmpLí
;

278 i‡–
Lcd_Löe1
 =
NULL
 )

280 
Lcd_Löe1
 = 
	`oßl_mem_Æloc
–
HAL_LCD_MAX_CHARS
+1 );

281 
	`HÆLcdWrôeSåög
( "Texas Instruments", 1 );

284 
°rLí
 = (
uöt8
)
	`oßl_°æí
–(*)
°r
 );

287 i‡–
°rLí
 > 
HAL_LCD_MAX_CHARS
 )

288 
°rLí
 = 
HAL_LCD_MAX_CHARS
;

290 i‡–
›ti⁄
 =
HAL_LCD_LINE_1
 )

293 
	`oßl_mem˝y
–
Lcd_Löe1
, 
°r
, 
°rLí
 );

294 
Lcd_Löe1
[
°rLí
] = '\0';

299 
tmpLí
 = (
uöt8
)
	`oßl_°æí
–(*)
Lcd_Löe1
 );

300 
tŸÆLí
 = 
tmpLí
 + 1 + 
°rLí
 + 1;

301 
buf
 = 
	`oßl_mem_Æloc
–
tŸÆLí
 );

302 i‡–
buf
 !
NULL
 )

305 
	`oßl_mem˝y
–
buf
, 
Lcd_Löe1
, 
tmpLí
 );

306 
buf
[
tmpLí
++] = ' ';

307 
	`oßl_mem˝y
–&
buf
[
tmpLí
], 
°r
, 
°rLí
 );

308 
buf
[
tmpLí
+
°rLí
] = '\0';

311 #i‡
	`deföed
 (
ZTOOL_P1
Ë|| deföed (
ZTOOL_P2
)

313 #i‡
	`deföed
(
SERIAL_DEBUG_SUPPORTED
)

314 
	`debug_°r
–(
uöt8
*)
buf
 );

320 
	`oßl_mem_‰ì
–
buf
 );

325 
	`HÆLcd_HW_WrôeLöe
 (
›ti⁄
, 
°r
);

329 
	}
}

342 
	$HÆLcdWrôeVÆue
 ( 
uöt32
 
vÆue
, c⁄° 
uöt8
 
ødix
, uöt8 
›ti⁄
)

344 #i‡(
HAL_LCD
 =
TRUE
)

345 
uöt8
 
buf
[
HAL_LCD_MAX_BUFF
];

347 
	`_…ﬂ
–
vÆue
, &
buf
[0], 
ødix
 );

348 
	`HÆLcdWrôeSåög
–(*)
buf
, 
›ti⁄
 );

350 
	}
}

362 
	$HÆLcdWrôeS¸ìn
–*
löe1
, *
löe2
 )

364 #i‡(
HAL_LCD
 =
TRUE
)

365 
	`HÆLcdWrôeSåög
–
löe1
, 1 );

366 
	`HÆLcdWrôeSåög
–
löe2
, 2 );

368 
	}
}

382 
	$HÆLcdWrôeSåögVÆue
–*
tôÀ
, 
uöt16
 
vÆue
, 
uöt8
 
f‹m©
, uöt8 
löe
 )

384 #i‡(
HAL_LCD
 =
TRUE
)

385 
uöt8
 
tmpLí
;

386 
uöt8
 
buf
[
HAL_LCD_MAX_BUFF
];

387 
uöt32
 
îr
;

389 
tmpLí
 = (
uöt8
)
	`oßl_°æí
–(*)
tôÀ
 );

390 
	`oßl_mem˝y
–
buf
, 
tôÀ
, 
tmpLí
 );

391 
buf
[
tmpLí
] = ' ';

392 
îr
 = (
uöt32
)(
vÆue
);

393 
	`_…ﬂ
–
îr
, &
buf
[
tmpLí
+1], 
f‹m©
 );

394 
	`HÆLcdWrôeSåög
–(*)
buf
, 
löe
 );

396 
	}
}

412 
	$HÆLcdWrôeSåögVÆueVÆue
–*
tôÀ
, 
uöt16
 
vÆue1
, 
uöt8
 
f‹m©1
,

413 
uöt16
 
vÆue2
, 
uöt8
 
f‹m©2
, uöt8 
löe
 )

416 #i‡(
HAL_LCD
 =
TRUE
)

418 
uöt8
 
tmpLí
;

419 
uöt8
 
buf
[
HAL_LCD_MAX_BUFF
];

420 
uöt32
 
îr
;

422 
tmpLí
 = (
uöt8
)
	`oßl_°æí
–(*)
tôÀ
 );

423 i‡–
tmpLí
 )

425 
	`oßl_mem˝y
–
buf
, 
tôÀ
, 
tmpLí
 );

426 
buf
[
tmpLí
++] = ' ';

429 
îr
 = (
uöt32
)(
vÆue1
);

430 
	`_…ﬂ
–
îr
, &
buf
[
tmpLí
], 
f‹m©1
 );

431 
tmpLí
 = (
uöt8
)
	`oßl_°æí
–(*)
buf
 );

433 
buf
[
tmpLí
++] = ',';

434 
buf
[
tmpLí
++] = ' ';

435 
îr
 = (
uöt32
)(
vÆue2
);

436 
	`_…ﬂ
–
îr
, &
buf
[
tmpLí
], 
f‹m©2
 );

438 
	`HÆLcdWrôeSåög
–(*)
buf
, 
löe
 );

441 
	}
}

453 
	$HÆLcdDi•œyPî˚¡B¨
–*
tôÀ
, 
uöt8
 
vÆue
 )

455 #i‡(
HAL_LCD
 =
TRUE
)

457 
uöt8
 
≥r˚¡
;

458 
uöt8
 
À·Ovî
;

459 
uöt8
 
buf
[17];

460 
uöt32
 
îr
;

461 
uöt8
 
x
;

464 
	`HÆLcdWrôeSåög
–
tôÀ
, 
HAL_LCD_LINE_1
 );

466 i‡–
vÆue
 > 100 )

467 
vÆue
 = 100;

470 
≥r˚¡
 = (
uöt8
)(
vÆue
 / 10);

471 
À·Ovî
 = (
uöt8
)(
vÆue
 % 10);

474 
	`oßl_mem˝y
–
buf
, "[ ] ", 15 );

476  
x
 = 0; x < 
≥r˚¡
; x ++ )

478 
buf
[1+
x
] = '>';

481 i‡–
À·Ovî
 >= 5 )

482 
buf
[1+
x
] = '+';

484 
îr
 = (
uöt32
)
vÆue
;

485 
	`_…ﬂ
–
îr
, (
uöt8
*)&
buf
[13], 10 );

487 
	`HÆLcdWrôeSåög
–(*)
buf
, 
HAL_LCD_LINE_2
 );

491 
	}
}

494 #i‡(
HAL_LCD
 =
TRUE
)

508 
	$hÆLcd_C⁄figIO
()

511 
	`HAL_CONFIG_IO_OUTPUT
(
HAL_LCD_MODE_PORT
, 
HAL_LCD_MODE_PIN
, 1);

512 
	`HAL_CONFIG_IO_OUTPUT
(
HAL_LCD_RESET_PORT
, 
HAL_LCD_RESET_PIN
, 1);

513 
	`HAL_CONFIG_IO_OUTPUT
(
HAL_LCD_CS_PORT
, 
HAL_LCD_CS_PIN
, 1);

514 
	}
}

525 
	$hÆLcd_C⁄figSPI
()

529 
uöt8
 
baud_exp⁄ít
;

530 
uöt8
 
baud_m™tisß
;

533 
PERCFG
 |= 0x02;

536 
	`HAL_CONFIG_IO_PERIPHERAL
(
HAL_LCD_CLK_PORT
, 
HAL_LCD_CLK_PIN
);

537 
	`HAL_CONFIG_IO_PERIPHERAL
(
HAL_LCD_MOSI_PORT
, 
HAL_LCD_MOSI_PIN
);

538 
	`HAL_CONFIG_IO_PERIPHERAL
(
HAL_LCD_MISO_PORT
, 
HAL_LCD_MISO_PIN
);

544 
baud_exp⁄ít
 = 15;

545 
baud_m™tisß
 = 0;

548 
U1UCR
 = 0x80;

549 
U1CSR
 = 0x00;

550 
U1GCR
 = 
HAL_SPI_TRANSFER_MSB_FIRST
 | 
HAL_SPI_CLOCK_PHA_0
 | 
HAL_SPI_CLOCK_POL_LO
 | 
baud_exp⁄ít
;

551 
U1BAUD
 = 
baud_m™tisß
;

552 
	}
}

563 
	$HÆLcd_HW_Inô
()

566 
	`hÆLcd_C⁄figIO
();

569 
	`hÆLcd_C⁄figSPI
();

572 
	`LCD_ACTIVATE_RESET
();

573 
	`HÆLcd_HW_WaôUs
(15000);

574 
	`LCD_RELEASE_RESET
();

575 
	`HÆLcd_HW_WaôUs
(15);

578 
	`FUNCTION_SET
(
CGRAM
 | 
COM_FORWARD
 | 
THREE_LINE
);

581 
	`HÆLcd_HW_SëC⁄åa°
(15);

584 
	`SET_POWER_SAVE_MODE
(
OSC_OFF
 | 
POWER_SAVE_ON
);

585 
	`SET_POWER_CTRL
(
VOLTAGE_DIVIDER_ON
 | 
CONVERTER_AND_REG_ON
);

586 
	`SET_BIAS_CTRL
(
BIAS_1_5
);

587 
	`HÆLcd_HW_WaôUs
(21000);

590 
	`HÆLcd_HW_CÀ¨
();

591 
	`HÆLcd_HW_CÀ¨AŒS≥cCh¨s
();

592 
	`SET_DISPLAY_CTRL
(
DISPLAY_CTRL_ON
 | 
DISPLAY_CTRL_BLINK_OFF
 | 
DISPLAY_CTRL_CURSOR_OFF
);

593 
	}
}

604 
	$HÆLcd_HW_C⁄åﬁ
(
uöt8
 
cmd
)

606 
	`LCD_SPI_BEGIN
();

607 
	`LCD_DO_CONTROL
();

608 
	`LCD_SPI_TX
(
cmd
);

609 
	`LCD_SPI_WAIT_RXRDY
();

610 
	`LCD_SPI_END
();

611 
	}
}

622 
	$HÆLcd_HW_Wrôe
(
uöt8
 
d©a
)

624 
	`LCD_SPI_BEGIN
();

625 
	`LCD_DO_WRITE
();

626 
	`LCD_SPI_TX
(
d©a
);

627 
	`LCD_SPI_WAIT_RXRDY
();

628 
	`LCD_SPI_END
();

629 
	}
}

640 
	$HÆLcd_HW_SëC⁄åa°
(
uöt8
 
vÆue
)

642 
	`SET_ICONRAM_ADDR
(
CONTRAST_CTRL_REGISTER
);

643 
	`HÆLcd_HW_Wrôe
(
vÆue
);

644 
	}
}

655 
	$HÆLcd_HW_CÀ¨
()

657 
uöt8
 
n
;

659 
	`SET_DDRAM_ADDR
(0x00);

660 
n
 = 0;Ç < (
LCD_MAX_LINE_COUNT
 * 
HAL_LCD_MAX_CHARS
);Ç++)

662 
	`HÆLcd_HW_Wrôe
(' ');

664 
	}
}

675 
	$HÆLcd_HW_CÀ¨AŒS≥cCh¨s
()

677 
uöt8
 
n
 = 0;

679 
	`SET_GCRAM_CHAR
(0);

680 
n
 = 0;Ç < (8 * 8);Ç++)

682 
	`HÆLcd_HW_Wrôe
(0x00);

684 
	}
}

696 
	$HÆLcd_HW_WrôeCh¨
(
uöt8
 
löe
, uöt8 
cﬁ
, 
ãxt
)

698 i‡(
cﬁ
 < 
HAL_LCD_MAX_CHARS
)

700 
	`SET_DDRAM_ADDR
((
löe
 - 1Ë* 
HAL_LCD_MAX_CHARS
 + 
cﬁ
);

701 
	`HÆLcd_HW_Wrôe
(
ãxt
);

707 
	}
}

719 
	$HÆLcd_HW_WrôeLöe
(
uöt8
 
löe
, c⁄° *
pText
)

721 
uöt8
 
cou¡
;

722 
uöt8
 
tŸÆLígth
 = (uöt8)
	`oßl_°æí
–(*)
pText
 );

725 
cou¡
=0; cou¡<
tŸÆLígth
; count++)

727 
	`HÆLcd_HW_WrôeCh¨
(
löe
, 
cou¡
, (*(
pText
++)));

731 
cou¡
=
tŸÆLígth
; cou¡<
HAL_LCD_MAX_CHARS
;count++)

733 
	`HÆLcd_HW_WrôeCh¨
(
löe
, 
cou¡
, ' ');

735 
	}
}

746 
	$HÆLcd_HW_WaôUs
(
uöt16
 
mi¸oSecs
)

748 
mi¸oSecs
--)

751 
	`asm
("nop");ásm("nop");ásm("nop");ásm("nop");ásm("nop");

752 
	`asm
("nop");ásm("nop");ásm("nop");ásm("nop");ásm("nop");

753 
	`asm
("nop");ásm("nop");ásm("nop");ásm("nop");ásm("nop");

754 
	`asm
("nop");ásm("nop");ásm("nop");ásm("nop");ásm("nop");

755 
	`asm
("nop");ásm("nop");ásm("nop");ásm("nop");ásm("nop");

756 
	`asm
("nop");ásm("nop");ásm("nop");ásm("nop");ásm("nop");

757 
	`asm
("nop");ásm("nop");

759 
	}
}

	@../../../../Components/hal/target/CC2540EB/hal_led.c

44 
	~"hÆ_mcu.h
"

45 
	~"hÆ_defs.h
"

46 
	~"hÆ_ty≥s.h
"

47 
	~"hÆ_drivîs.h
"

48 
	~"hÆ_Àd.h
"

49 
	~"oßl.h
"

50 
	~"hÆ_bﬂrd.h
"

58 
uöt8
 
	mmode
;

59 
uöt8
 
	mÀ·
;

60 
uöt8
 
	m⁄P˘
;

61 
uöt16
 
	mtime
;

62 
uöt32
 
	m√xt
;

63 } 
	tHÆLedC⁄åﬁ_t
;

67 
HÆLedC⁄åﬁ_t
 
	mHÆLedC⁄åﬁTabÀ
[
HAL_LED_DEFAULT_MAX_LEDS
];

68 
uöt8
 
	m¶ìpA˘ive
;

69 } 
	tHÆLedSètus_t
;

75 
uöt8
 
	gHÆLedSèã
;

77 #i‡
HAL_LED
 =
TRUE


78 
uöt8
 
	gHÆSÀïLedSèã
;

79 
uöt8
 
	g¥eBlökSèã
;

83 #ifde‡
BLINK_LEDS


84 
HÆLedSètus_t
 
	gHÆLedSètusC⁄åﬁ
;

91 #i‡(
HAL_LED
 =
TRUE
)

92 
HÆLedUpd©e
 ();

93 
HÆLedOnOff
 (
uöt8
 
Àds
, uöt8 
mode
);

109 
	$HÆLedInô
 ()

111 #i‡(
HAL_LED
 =
TRUE
)

112 
	`HÆLedSë
(
HAL_LED_ALL
, 
HAL_LED_MODE_OFF
);

115 
LED1_DDR
 |
LED1_BV
;

116 #i‡(!
deföed
 
HAL_PA_LNA
 && !deföed 
HAL_PA_LNA_CC2590
)

117 
LED2_DDR
 |
LED2_BV
;

118 #i‡(!
deföed
 
CC2540_MINIDK
 && !deföed 
HAL_BOARD_CC2540USB
)

119 
LED3_DDR
 |
LED3_BV
;

122 #i‡
deföed
 
BLINK_LEDS


123 
HÆLedSètusC⁄åﬁ
.
¶ìpA˘ive
 = 
FALSE
;

126 
	}
}

137 
uöt8
 
	$HÆLedSë
 (
uöt8
 
Àds
, uöt8 
mode
)

140 #i‡(
	`deföed
 (
BLINK_LEDS
)Ë&& (
HAL_LED
 =
TRUE
)

141 
uöt8
 
Àd
;

142 
HÆLedC⁄åﬁ_t
 *
°s
;

144 
mode
)

146 
HAL_LED_MODE_BLINK
:

148 
	`HÆLedBlök
 (
Àds
, 1, 
HAL_LED_DEFAULT_DUTY_CYCLE
, 
HAL_LED_DEFAULT_FLASH_TIME
);

151 
HAL_LED_MODE_FLASH
:

153 
	`HÆLedBlök
 (
Àds
, 
HAL_LED_DEFAULT_FLASH_COUNT
, 
HAL_LED_DEFAULT_DUTY_CYCLE
, 
HAL_LED_DEFAULT_FLASH_TIME
);

156 
HAL_LED_MODE_ON
:

157 
HAL_LED_MODE_OFF
:

158 
HAL_LED_MODE_TOGGLE
:

160 
Àd
 = 
HAL_LED_1
;

161 
Àds
 &
HAL_LED_ALL
;

162 
°s
 = 
HÆLedSètusC⁄åﬁ
.
HÆLedC⁄åﬁTabÀ
;

164 
Àds
)

166 i‡(
Àds
 & 
Àd
)

168 i‡(
mode
 !
HAL_LED_MODE_TOGGLE
)

170 
°s
->
mode
 = mode;

174 
°s
->
mode
 ^
HAL_LED_MODE_ON
;

176 
	`HÆLedOnOff
 (
Àd
, 
°s
->
mode
);

177 
Àds
 ^
Àd
;

179 
Àd
 <<= 1;

180 
°s
++;

188 #ñi‡(
HAL_LED
 =
TRUE
)

189 
	`LedOnOff
(
Àds
, 
mode
);

192 (Ë
Àds
;

193 (Ë
mode
;

196  ( 
HÆLedSèã
 );

197 
	}
}

212 
	$HÆLedBlök
 (
uöt8
 
Àds
, uöt8 
numBlöks
, uöt8 
≥r˚¡
, 
uöt16
 
≥riod
)

214 #i‡(
	`deföed
 (
BLINK_LEDS
)Ë&& (
HAL_LED
 =
TRUE
)

215 
uöt8
 
Àd
;

216 
HÆLedC⁄åﬁ_t
 *
°s
;

218 i‡(
Àds
 && 
≥r˚¡
 && 
≥riod
)

220 i‡(
≥r˚¡
 < 100)

222 
Àd
 = 
HAL_LED_1
;

223 
Àds
 &
HAL_LED_ALL
;

224 
°s
 = 
HÆLedSètusC⁄åﬁ
.
HÆLedC⁄åﬁTabÀ
;

226 
Àds
)

228 i‡(
Àds
 & 
Àd
)

231 if(
°s
->
mode
 < 
HAL_LED_MODE_BLINK
 )

232 
¥eBlökSèã
 |(
Àd
 & 
HÆLedSèã
);

234 
°s
->
mode
 = 
HAL_LED_MODE_OFF
;

235 
°s
->
time
 = 
≥riod
;

236 
°s
->
⁄P˘
 = 
≥r˚¡
;

237 
°s
->
À·
 = 
numBlöks
;

238 i‡(!
numBlöks
Ë
°s
->
mode
 |
HAL_LED_MODE_FLASH
;

239 
°s
->
√xt
 = 
	`oßl_GëSy°emClock
();

240 
°s
->
mode
 |
HAL_LED_MODE_BLINK
;

241 
Àds
 ^
Àd
;

243 
Àd
 <<= 1;

244 
°s
++;

247 
	`oßl_°›_timîEx
(
HÆ_TaskID
, 
HAL_LED_BLINK_EVENT
);

248 
	`oßl_£t_evít
 (
HÆ_TaskID
, 
HAL_LED_BLINK_EVENT
);

252 
	`HÆLedSë
 (
Àds
, 
HAL_LED_MODE_ON
);

257 
	`HÆLedSë
 (
Àds
, 
HAL_LED_MODE_OFF
);

259 #ñi‡(
HAL_LED
 =
TRUE
)

260 
≥r˚¡
 = (
Àds
 & 
HÆLedSèã
Ë? 
HAL_LED_MODE_OFF
 : 
HAL_LED_MODE_ON
;

261 
	`HÆLedOnOff
 (
Àds
, 
≥r˚¡
);

264 (Ë
Àds
;

265 (Ë
numBlöks
;

266 (Ë
≥r˚¡
;

267 (Ë
≥riod
;

269 
	}
}

271 #i‡(
HAL_LED
 =
TRUE
)

281 
	$HÆLedUpd©e
 ()

283 
uöt8
 
Àd
;

284 
uöt8
 
p˘
;

285 
uöt8
 
Àds
;

286 
HÆLedC⁄åﬁ_t
 *
°s
;

287 
uöt32
 
time
;

288 
uöt16
 
√xt
;

289 
uöt16
 
waô
;

291 
√xt
 = 0;

292 
Àd
 = 
HAL_LED_1
;

293 
Àds
 = 
HAL_LED_ALL
;

294 
°s
 = 
HÆLedSètusC⁄åﬁ
.
HÆLedC⁄åﬁTabÀ
;

297 i‡(!
HÆLedSètusC⁄åﬁ
.
¶ìpA˘ive
)

299 
Àds
)

301 i‡(
Àds
 & 
Àd
)

303 i‡(
°s
->
mode
 & 
HAL_LED_MODE_BLINK
)

305 
time
 = 
	`oßl_GëSy°emClock
();

306 i‡(
time
 >
°s
->
√xt
)

308 i‡(
°s
->
mode
 & 
HAL_LED_MODE_ON
)

310 
p˘
 = 100 - 
°s
->
⁄P˘
;

311 
°s
->
mode
 &~
HAL_LED_MODE_ON
;

312 
	`HÆLedOnOff
 (
Àd
, 
HAL_LED_MODE_OFF
);

314 i‡–!(
°s
->
mode
 & 
HAL_LED_MODE_FLASH
) )

316 
°s
->
À·
--;

319 i‡–!(
°s
->
À·
Ë&& !(°s->
mode
 & 
HAL_LED_MODE_FLASH
) )

321 
°s
->
mode
 ^
HAL_LED_MODE_BLINK
;

325 
p˘
 = 
°s
->
⁄P˘
;

326 
°s
->
mode
 |
HAL_LED_MODE_ON
;

327 
	`HÆLedOnOff
–
Àd
, 
HAL_LED_MODE_ON
 );

329 i‡(
°s
->
mode
 & 
HAL_LED_MODE_BLINK
)

331 
waô
 = (((
uöt32
)
p˘
 * (uöt32)
°s
->
time
) / 100);

332 
°s
->
√xt
 = 
time
 + 
waô
;

337 
waô
 = 0;

339 
	`HÆLedSë
 (
Àd
, ((
¥eBlökSèã
 &Üed)!=0)?
HAL_LED_MODE_ON
:
HAL_LED_MODE_OFF
);

341 
¥eBlökSèã
 &(
Àd
 ^ 0xFF);

346 
waô
 = 
°s
->
√xt
 - 
time
;

349 i‡(!
√xt
 || ( 
waô
 && (wait <Çext) ))

351 
√xt
 = 
waô
;

354 
Àds
 ^
Àd
;

356 
Àd
 <<= 1;

357 
°s
++;

360 i‡(
√xt
)

362 
	`oßl_°¨t_timîEx
(
HÆ_TaskID
, 
HAL_LED_BLINK_EVENT
, 
√xt
);

365 
	}
}

377 
	$HÆLedOnOff
 (
uöt8
 
Àds
, uöt8 
mode
)

379 i‡(
Àds
 & 
HAL_LED_1
)

381 i‡(
mode
 =
HAL_LED_MODE_ON
)

383 
	`HAL_TURN_ON_LED1
();

387 
	`HAL_TURN_OFF_LED1
();

391 i‡(
Àds
 & 
HAL_LED_2
)

393 i‡(
mode
 =
HAL_LED_MODE_ON
)

395 
	`HAL_TURN_ON_LED2
();

399 
	`HAL_TURN_OFF_LED2
();

403 i‡(
Àds
 & 
HAL_LED_3
)

405 i‡(
mode
 =
HAL_LED_MODE_ON
)

407 
	`HAL_TURN_ON_LED3
();

411 
	`HAL_TURN_OFF_LED3
();

415 i‡(
Àds
 & 
HAL_LED_4
)

417 i‡(
mode
 =
HAL_LED_MODE_ON
)

419 
	`HAL_TURN_ON_LED4
();

423 
	`HAL_TURN_OFF_LED4
();

428 i‡(
mode
)

430 
HÆLedSèã
 |
Àds
;

434 
HÆLedSèã
 &(
Àds
 ^ 0xFF);

436 
	}
}

448 
uöt8
 
	$HÆLedGëSèã
 ()

450 #i‡(
HAL_LED
 =
TRUE
)

451  
HÆLedSèã
;

455 
	}
}

466 
	$HÆLedE¡îSÀï
( )

468 #ifde‡
BLINK_LEDS


470 
HÆLedSètusC⁄åﬁ
.
¶ìpA˘ive
 = 
TRUE
;

473 #i‡(
HAL_LED
 =
TRUE
)

475 
HÆSÀïLedSèã
 = 0;

476 
HÆSÀïLedSèã
 |
	`HAL_STATE_LED1
();

477 
HÆSÀïLedSèã
 |
	`HAL_STATE_LED2
() << 1;

478 
HÆSÀïLedSèã
 |
	`HAL_STATE_LED3
() << 2;

479 
HÆSÀïLedSèã
 |
	`HAL_STATE_LED4
() << 3;

482 
	`HÆLedOnOff
 (
HAL_LED_ALL
, 
HAL_LED_MODE_OFF
);

485 
	}
}

496 
	$HÆLedExôSÀï
( )

498 #i‡(
HAL_LED
 =
TRUE
)

500 
	`HÆLedOnOff
(
HÆSÀïLedSèã
, 
HAL_LED_MODE_ON
);

503 
	`HÆLedUpd©e
();

506 #ifde‡
BLINK_LEDS


508 
HÆLedSètusC⁄åﬁ
.
¶ìpA˘ive
 = 
FALSE
;

510 
	}
}

	@../../../../Components/hal/target/CC2540EB/hal_mcu.h

40 #i‚de‡
_HAL_MCU_H


41 
	#_HAL_MCU_H


	)

53 
	~"hÆ_defs.h
"

54 
	~"hÆ_ty≥s.h
"

61 
	#HAL_MCU_CC2540


	)

70 #ifde‡
__IAR_SYSTEMS_ICC__


72 #i‡
deföed
–
CC2541
Ë|| deföed–
CC2541S
 )

73 
	~<ioCC2541.h
>

75 
	~<ioCC2540.h
>

78 
	#HAL_COMPILER_IAR


	)

79 
	#HAL_MCU_LITTLE_ENDIAN
(Ë
__LITTLE_ENDIAN__


	)

80 
	#_PRAGMA
(
x
Ë
	`_Pøgma
(#x)

	)

81 
	#HAL_ISR_FUNC_DECLARATION
(
f
,
v
Ë
	`_PRAGMA
(
ve˘‹
=vË
__√¨_func
 
__öãºu±
 
	`f
()

	)

82 
	#HAL_ISR_FUNC_PROTOTYPE
(
f
,
v
Ë
	`_PRAGMA
(
ve˘‹
=vË
__√¨_func
 
__öãºu±
 
	`f
()

	)

83 
	#HAL_ISR_FUNCTION
(
f
,
v
Ë
	`HAL_ISR_FUNC_PROTOTYPE
(f,v); 
	`HAL_ISR_FUNC_DECLARATION
(f,v)

	)

86 #ñi‡
deföed
 
__KEIL__


88 #i‡
deföed
–
CC2541
Ë|| deföed–
CC2541S
 )

89 
	~<CC2541.h
>

91 
	~<CC2540.h
>

94 
	#HAL_COMPILER_KEIL


	)

95 
	#HAL_MCU_LITTLE_ENDIAN
(Ë0

	)

96 
	#HAL_ISR_FUNC_DECLARATION
(
f
,
v
Ë
	`f
(Ë
öãºu±
 
	)
v

97 
	#HAL_ISR_FUNC_PROTOTYPE
(
f
,
v
Ë
	`f
()

	)

98 
	#HAL_ISR_FUNCTION
(
f
,
v
Ë
	`HAL_ISR_FUNC_PROTOTYPE
(f,v); 
	`HAL_ISR_FUNC_DECLARATION
(f,v)

	)

110 
	#HAL_ENABLE_INTERRUPTS
(Ë
	`°
–
EA
 = 1; )

	)

111 
	#HAL_DISABLE_INTERRUPTS
(Ë
	`°
–
EA
 = 0; )

	)

112 
	#HAL_INTERRUPTS_ARE_ENABLED
(Ë(
EA
)

	)

114 
	thÆI¡Sèã_t
;

115 
	#HAL_ENTER_CRITICAL_SECTION
(
x
Ë
	`°
–x = 
EA
; 
	`HAL_DISABLE_INTERRUPTS
(); )

	)

116 
	#HAL_EXIT_CRITICAL_SECTION
(
x
Ë
	`°
–
EA
 = x; )

	)

117 
	#HAL_CRITICAL_STATEMENT
(
x
Ë
	`°
–
hÆI¡Sèã_t
 
_s
; 
	`HAL_ENTER_CRITICAL_SECTION
(_s); x; 
	`HAL_EXIT_CRITICAL_SECTION
(_s); )

	)

119 #ifde‡
__IAR_SYSTEMS_ICC__


125 
	#HAL_ENTER_ISR
(Ë{ 
hÆI¡Sèã_t
 
_i§I¡Sèã
 = 
EA
; 
	`HAL_ENABLE_INTERRUPTS
();

	)

126 
	#HAL_EXIT_ISR
(Ë
EA
 = 
_i§I¡Sèã
; }

	)

128 
	#HAL_ENTER_ISR
()

	)

129 
	#HAL_EXIT_ISR
()

	)

136 
	#WD_EN
 
	`BV
(3)

	)

137 
	#WD_MODE
 
	`BV
(2)

	)

138 
	#WD_INT_1900_USEC
 (
	`BV
(0Ë| BV(1))

	)

139 
	#WD_RESET1
 (0xA0 | 
WD_EN
 | 
WD_INT_1900_USEC
)

	)

140 
	#WD_RESET2
 (0x50 | 
WD_EN
 | 
WD_INT_1900_USEC
)

	)

141 
	#WD_KICK
(Ë
	`°
–
WDCTL
 = (0xA0 | WDCTL & 0x0F); WDCTL = (0x50 | WDCTL & 0x0F); )

	)

144 
	#HAL_SYSTEM_RESET
(Ë
	`°
–
	`HAL_DISABLE_INTERRUPTS
(); 
WDCTL
 = 
WD_RESET1
; WDCTL = 
WD_RESET2
; ;;); )

	)

150 
	#REV_A
 0x00

	)

151 
	#REV_B
 0x11

	)

152 
	#REV_C
 0x20

	)

153 
	#REV_D
 0x21

	)

161 
	#PCON_IDLE
 
	`BV
(0Ë

	)

164 
	#OSC_PD
 
	`BV
(2Ë

	)

165 
	#PMODE
 (
	`BV
(1Ë| BV(0)Ë

	)

168 
	#XOSC_STB
 
	`BV
(6Ë

	)

169 
	#HFRC_STB
 
	`BV
(5Ë

	)

172 
	#OSC_PD
 
	`BV
(2Ë

	)

176 
	#OSC
 
	`BV
(6)

	)

177 
	#TICKSPD
(
x
Ë(x << 3)

	)

178 
	#CLKSPD
(
x
Ë(x << 0)

	)

179 
	#CLKCONCMD_32MHZ
 (0)

	)

180 
	#CLKCONCMD_16MHZ
 (
	`CLKSPD
(1Ë| 
	`TICKSPD
(1Ë| 
OSC
)

	)

183 
	#LDRDY
 
	`BV
(0Ë

	)

187 #ifde‡
POWER_SAVING


188 vﬁ©ûê
__d©a
 
uöt8
 
hÆSÀïPc⁄VÆue
;

193 
	#CLEAR_SLEEP_MODE
(Ë
	`°
–
hÆSÀïPc⁄VÆue
 = 0; )

	)

194 
	#ALLOW_SLEEP_MODE
(Ë
	`°
–
hÆSÀïPc⁄VÆue
 = 
PCON_IDLE
; )

	)

196 
	#CLEAR_SLEEP_MODE
()

	)

197 
	#ALLOW_SLEEP_MODE
()

	)

	@../../../../Components/hal/target/CC2540EB/hal_sleep.c

43 
	~"hÆ_ty≥s.h
"

44 
	~"hÆ_mcu.h
"

45 
	~"hÆ_bﬂrd.h
"

46 
	~"hÆ_¶ìp.h
"

47 
	~"hÆ_Àd.h
"

48 
	~"hÆ_key.h
"

49 
	~"OSAL.h
"

50 
	~"OSAL_Timîs.h
"

51 
	~"OSAL_Tasks.h
"

52 
	~"OSAL_PwrMgr.h
"

53 
	~"hÆ_drivîs.h
"

54 
	~"hÆ_as£π.h
"

55 
	~"Œ_¶ìp.h
"

56 
	~"Œ_timî2.h
"

57 
	~"Œ_m©h.h
"

63 #i‚de‡
HAL_SLEEP_DEBUG_POWER_MODE


65 
	#HAL_SLEEP_PREP_POWER_MODE
(
mode
) \

66 
	`°
–
SLEEPCMD
 &~
PMODE
; \

67 
SLEEPCMD
 |
mode
; \

68 !(
STLOAD
 & 
LDRDY
)); \

69 
hÆSÀïPc⁄VÆue
 = 
PCON_IDLE
; \

70 )

	)

71 
	#HAL_SLEEP_SET_POWER_MODE
() \

72 
	`hÆSëSÀïMode
()

	)

77 
	#HAL_SLEEP_PREP_POWER_MODE
(
mode
Ë

	)

78 
	#HAL_SLEEP_SET_POWER_MODE
() \

79 
	`°
–
hÆSÀïI¡
 =
FALSE
); \

80 
hÆSÀïI¡
 = 
FALSE
; \

81 
	`HAL_DISABLE_INTERRUPTS
(); \

82 )

	)

86 
	#HAL_SLEEP_TIMER_ENABLE_INT
(Ë
	`°
(
IEN0
 |
STIE_BV
;)

87 
	#HAL_SLEEP_TIMER_DISABLE_INT
(Ë
	`°
(
IEN0
 &~
STIE_BV
;)

88 
	#HAL_SLEEP_TIMER_CLEAR_INT
(Ë
	`°
(
IRCON
 &= ~0x80;)

89 

	)

91 
	#HAL_SLEEP_IE_BACKUP_AND_DISABLE
–
õn0
, 
õn1
, 
õn2
 ) \

92 
	`°
–(
õn0
Ë
IEN0
; \

93 (
õn1
Ë
IEN1
; \

94 (
õn2
Ë
IEN2
; \

95 
IEN0
 &
STIE_BV
; \

96 
IEN1
 &
P0IE_BV
; \

97 
IEN2
 &(
P1IE_BV
|
P2IE_BV
); \

98 )

	)

101 
	#HAL_SLEEP_IE_RESTORE
–
õn0
, 
õn1
, 
õn2
 ) \

102 
	`°
–
IEN0
 = (
õn0
); \

103 
IEN1
 = (
õn1
); \

104 
IEN2
 = (
õn2
); \

105 )

	)

108 
	#HAL_SLEEP_MS_TO_625US
–
ms
 ) (((((
uöt32
Ë(ms)Ë* 8Ë+ 4Ë/ 5)

	)

112 
	#HAL_SLEEP_MS_TO_32KHZ
–
ms
 ) ((((
uöt32
Ë(ms)Ë* 4096Ë/ 125)

	)

128 
	#MAX_SLEEP_TIMEOUT
 40000

	)

136 
	#CC2540_PM0
 0

137 
	#CC2540_PM1
 1

138 
	#CC2540_PM2
 2

139 
	#CC2540_PM3
 3

140 

	)

147 
	#HAL_SLEEP_OFF
 
CC2540_PM0


	)

148 
	#HAL_SLEEP_TIMER
 
CC2540_PM2


	)

149 
	#HAL_SLEEP_DEEP
 
CC2540_PM3


	)

154 
	#MAX_SLEEP_TIME
 16711680

155 

	)

159 #i‡!
deföed
 (
PM_MIN_SLEEP_TIME
)

160 
	#PM_MIN_SLEEP_TIME
 66

162 

	)

169 #i‡
deföed
–
CC2541
Ë|| deföed–
CC2541S
 )

170 
	#HAL_SLEEP_ADJ_TICKS
 25

171 #ñ£ // CC2540

	)

172 
	#HAL_SLEEP_ADJ_TICKS
 35

174 

	)

176 
	#STIE_BV
 
	`BV
(5)

	)

177 
	#P0IE_BV
 
	`BV
(5)

	)

178 
	#P1IE_BV
 
	`BV
(4)

	)

179 
	#P2IE_BV
 
	`BV
(1)

	)

182 #i‡
HAL_MCU_LITTLE_ENDIAN
()

183 
	#UINT32_NDX0
 0

	)

184 
	#UINT32_NDX1
 1

	)

185 
	#UINT32_NDX2
 2

	)

186 
	#UINT32_NDX3
 3

	)

188 
	#UINT32_NDX0
 3

	)

189 
	#UINT32_NDX1
 2

	)

190 
	#UINT32_NDX2
 1

	)

191 
	#UINT32_NDX3
 0

	)

203 
uöt8
 
	ghÆPwrMgtMode
 = 
HAL_SLEEP_OFF
;

206 
uöt8
 
	gwakeF‹RF
;

208 #ifde‡
HAL_SLEEP_DEBUG_POWER_MODE


209 
boﬁ
 
	ghÆSÀïI¡
 = 
FALSE
;

217 vﬁ©ûê
__d©a
 
uöt8
 
	ghÆSÀïPc⁄VÆue
 = 
PCON_IDLE
;

226 #¥agm®
loˇti⁄
 = "SLEEP_CODE"

227 
hÆSëSÀïMode
();

229 
hÆSÀïSëTimî
–
uöt32
 
¶ìpTime
, uöt32 
timeout
 );

230 
uöt32
 
hÆSÀïRódTimî
( );

231 
uöt32
 
TimîEœp£d
( );

251 #¥agm®
›timize
=
n⁄e


252 
	$hÆSëSÀïMode
()

255 
PCON
 = 
hÆSÀïPc⁄VÆue
;

257 
	`HAL_DISABLE_INTERRUPTS
();

258 
	}
}

277 
	$hÆSÀï
–
uöt32
 
oßl_timeout
 )

279 
uöt32
 
timeout
;

280 
uöt32
 
ŒTimeout
;

281 
uöt32
 
¶ìpTimî
;

283 #ifde‡
DEBUG_GPIO


285 
P1_0
 = 1;

289 i‡(
oßl_timeout
 > 
MAX_SLEEP_TIMEOUT
)

291 
oßl_timeout
 = 
MAX_SLEEP_TIMEOUT
;

295 
	`LL_TimeToNextRfEvít
–&
¶ìpTimî
, &
ŒTimeout
 );

301 i‡(
oßl_timeout
 == 0)

304 
timeout
 = 
ŒTimeout
;

309 
wakeF‹RF
 = (
timeout
 !0Ë? 
TRUE
 : 
FALSE
;

315 
timeout
 = 
	`HAL_SLEEP_MS_TO_32KHZ
–
oßl_timeout
 );

318 i‡((
ŒTimeout
 !0Ë&& (ŒTimeouà< 
timeout
))

321 
timeout
 = 
ŒTimeout
;

324 
wakeF‹RF
 = 
TRUE
;

329 
¶ìpTimî
 = 
	`hÆSÀïRódTimî
();

332 
wakeF‹RF
 = 
FALSE
;

337 
hÆPwrMgtMode
 = (
timeout
 =0Ë? 
HAL_SLEEP_DEEP
 : 
HAL_SLEEP_TIMER
;

339 #ifde‡
DEBUG_GPIO


341 
P1_0
 = 0;

345 i‡–(
timeout
 > 
PM_MIN_SLEEP_TIME
) || (timeout == 0) )

347 
hÆI¡Sèã_t
 
õn0
, 
õn1
, 
õn2
;

349 #ifde‡
DEBUG_GPIO


351 
P1_0
 = 1;

354 
	`HAL_ASSERT
–
	`HAL_INTERRUPTS_ARE_ENABLED
() );

355 
	`HAL_DISABLE_INTERRUPTS
();

358 i‡–
hÆSÀïPc⁄VÆue
 && ( 
	`LL_PowîOffReq
(
hÆPwrMgtMode
Ë=
LL_SLEEP_REQUEST_ALLOWED
 ) )

360 #i‡((
deföed
 
HAL_KEY
Ë&& (HAL_KEY =
TRUE
))

362 
	`HÆKeyE¡îSÀï
();

365 #ifde‡
HAL_SLEEP_DEBUG_LED


366 
	`HAL_TURN_OFF_LED3
();

369 
	`HÆLedE¡îSÀï
();

373 i‡(
timeout
 != 0)

376 i‡(
timeout
 > 
MAX_SLEEP_TIME
 )

379 
	`hÆSÀïSëTimî
–
¶ìpTimî
, 
MAX_SLEEP_TIME
 );

384 
	`hÆSÀïSëTimî
–
¶ìpTimî
, 
timeout
 );

389 
	`HAL_SLEEP_PREP_POWER_MODE
(
hÆPwrMgtMode
);

392 
	`HAL_SLEEP_IE_BACKUP_AND_DISABLE
(
õn0
, 
õn1
, 
õn2
);

393 
	`HAL_ENABLE_INTERRUPTS
();

395 #ifde‡
DEBUG_GPIO


397 
P1_0
 = 0;

405 
	`HAL_SLEEP_SET_POWER_MODE
();

407 #ifde‡
DEBUG_GPIO


409 
P1_0
 = 1;

422 i‡–(
wakeF‹RF
 =
TRUE
Ë&& !(
IRCON
 & 0x80) )

424 
wakeF‹RF
 = 
FALSE
;

428 
	`HAL_SLEEP_IE_RESTORE
(
õn0
, 
õn1
, 
õn2
);

433 
	`LL_PowîOnReq
–(
hÆPwrMgtMode
 =
CC2540_PM3
), 
wakeF‹RF
 );

435 #ifde‡
HAL_SLEEP_DEBUG_LED


436 
	`HAL_TURN_ON_LED3
();

439 
	`HÆLedExôSÀï
();

442 #i‡((
deföed
 
HAL_KEY
Ë&& (HAL_KEY =
TRUE
))

444 ()
	`HÆKeyExôSÀï
();

448 
	`HAL_ENABLE_INTERRUPTS
();

451 #ifde‡
DEBUG_GPIO


453 
P1_0
 = 0;

457 
	}
}

485 
	$hÆSÀïSëTimî
–
uöt32
 
¶ìpTimî
, uöt32 
timeout
 )

487 
	`HAL_SLEEP_TIMER_DISABLE_INT
();

490 
¶ìpTimî
 +
timeout
;

493 
¶ìpTimî
 -
HAL_SLEEP_ADJ_TICKS
;

496 
ST2
 = ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX2
];

497 
ST1
 = ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX1
];

498 
ST0
 = ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX0
];

500 
	`HAL_SLEEP_TIMER_CLEAR_INT
();

501 
	`HAL_SLEEP_TIMER_ENABLE_INT
();

504 
	}
}

522 
uöt32
 
	$hÆSÀïRódTimî
( )

524 
uöt32
 
¶ìpTimî
;

528 ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX0
] = 
ST0
;

529 ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX1
] = 
ST1
;

530 ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX2
] = 
ST2
;

531 ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX3
] = 0;

533 –
¶ìpTimî
 );

534 
	}
}

552 
uöt32
 
	$TimîEœp£d
( )

555 
	}
}

573 
	$hÆRe°‹eSÀïLevñ
( )

576 #ifde‡
PM_TEST


577 
	`oßl_°¨t_timîEx
 (
HÆ_TaskID
, 
HAL_SLEEP_TIMER_EVENT
, 1000);

579 
	}
}

597 
	$HAL_ISR_FUNCTION
(
hÆSÀïTimîI§
, 
ST_VECTOR
)

599 
	`HAL_ENTER_ISR
();

601 
	`HAL_SLEEP_TIMER_CLEAR_INT
();

603 #ifde‡
HAL_SLEEP_DEBUG_POWER_MODE


604 
hÆSÀïI¡
 = 
TRUE
;

607 
	`CLEAR_SLEEP_MODE
();

609 
	`HAL_EXIT_ISR
();

612 
	}
}

	@../../../../Components/hal/target/CC2540EB/hal_startup.c

42 
	~"hÆ_bﬂrd.h
"

43 
	~"hÆ_ty≥s.h
"

45 #ifde‡
__˝lu•lus


49 #¥agm®
œnguage
=
exãnded


54 #¥agm®
loˇti⁄
="CSTART"

59 #i‡(
__CODE_MODEL__
 == 2)

60 
__√¨_func
 
__roŸ
 

62 
__roŸ
 

64 
__low_Àvñ_öô
();

77 #i‡(
__CODE_MODEL__
 == 2)

78 
__√¨_func
 
__roŸ
 

80 
__roŸ
 

82 
__low_Àvñ_öô
()

88 #i‡
deföed
 
HAL_IMAGE_A


89 
MEMCTR
 = (MEMCTR & 0xF8) | 0x05;

90 #ñi‡
deföed
 
HAL_IMAGE_B


91 
MEMCTR
 = (MEMCTR & 0xF8) | 0x04;

93 
MEMCTR
 = (MEMCTR & 0xF8) | 0x01;

105 #¥agm®
œnguage
=

107 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2540EB/hal_timer.c

	@../../../../Components/hal/target/CC2540EB/hal_types.h

44 #i‚de‡
_HAL_TYPES_H


45 
	#_HAL_TYPES_H


	)

56 sig√d 
	töt8
;

57 
	tuöt8
;

59 sig√d 
	töt16
;

60 
	tuöt16
;

62 sig√d 
	töt32
;

63 
	tuöt32
;

65 
	tboﬁ
;

67 
uöt8
 
	thÆD©aAlign_t
;

76 #ifde‡
__IAR_SYSTEMS_ICC__


77 
	#CODE
 
__code


	)

78 
	#XDATA
 
__xd©a


	)

79 
	#DATA
 
__d©a


	)

80 
	#NEAR_FUNC
 
__√¨_func


	)

81 
	#ASM_NOP
 
	`asm
("NOP")

	)

84 #ñi‡
deföed
 
__KEIL__


85 
	#CODE
 
code


	)

86 
	#XDATA
 
xd©a


	)

87 
	#ASM_NOP
 
	`__n›
()

	)

90 #ñi‡
deföed
 
__GNUC__


91 
	#ASM_NOP
 
__asm__
 
	`__vﬁ©ûe__
 ("n›")

	)

94 #ñi‡
_MSC_VER


95 
	#ASM_NOP
 
__asm
 
NOP


	)

98 #ñi‡
deföed
 
__TI_COMPILER_VERSION


99 
	#ASM_NOP
 
	`asm
(" NOP")

	)

111 #i‚de‡
TRUE


112 
	#TRUE
 1

	)

115 #i‚de‡
FALSE


116 
	#FALSE
 0

	)

119 #i‚de‡
NULL


120 
	#NULL
 0

	)

	@../../../../Components/hal/target/CC2540EB/hal_uart.c

44 
	~"hÆ_bﬂrd_cfg.h
"

45 
	~"hÆ_defs.h
"

46 
	~"hÆ_drivîs.h
"

47 
	~"hÆ_ty≥s.h
"

48 
	~"hÆ_u¨t.h
"

49 #i‡
deföed
 
POWER_SAVING


50 
	~"OSAL.h
"

51 
	~"OSAL_PwrMgr.h
"

58 
HÆUARTI§DMA
();

64 #i‡
HAL_UART_DMA


65 
	~"_hÆ_u¨t_dma.c
"

67 #i‡
HAL_UART_ISR


68 
	~"_hÆ_u¨t_i§.c
"

70 #i‡
HAL_UART_SPI


71 
	~"_hÆ_u¨t_•i.c
"

73 #i‡
HAL_UART_USB


74 
	~"_hÆ_u¨t_usb.c
"

86 
	$HÆUARTInô
()

89 #i‡(
HAL_UART_DMA
 && 
HAL_UART_SPI
)

90 i‡(
HAL_UART_PORT
)

92 
asÁsdÁsdf


93 
	`HÆUARTInôSPI
();

97 
	`HÆUARTInôDMA
();

100 #i‡
HAL_UART_DMA


102 
	`HÆUARTInôDMA
();

104 #i‡
HAL_UART_ISR


106 
	`HÆUARTInôISR
();

108 #i‡
HAL_UART_SPI


109 
	`HÆUARTInôSPI
();

111 #i‡
HAL_UART_USB


112 
	`HÆUARTInôUSB
();

115 
	}
}

127 
uöt8
 
	$HÆUARTO≥n
(
uöt8
 
p‹t
, 
hÆUARTCfg_t
 *
c⁄fig
)

129 #i‡(
HAL_UART_DMA
 == 1)

130 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë
	`HÆUARTO≥nDMA
(
c⁄fig
);

132 #i‡(
HAL_UART_DMA
 == 2)

133 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë
	`HÆUARTO≥nDMA
(
c⁄fig
);

135 #i‡(
HAL_UART_ISR
 == 1)

136 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë
	`HÆUARTO≥nISR
(
c⁄fig
);

138 #i‡(
HAL_UART_ISR
 == 2)

139 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë
	`HÆUARTO≥nISR
(
c⁄fig
);

141 #i‡(
HAL_UART_SPI
 == 1)

142 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë
	`HÆUARTO≥nSPI
(
c⁄fig
);

144 #i‡(
HAL_UART_SPI
 == 2)

145 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë
	`HÆUARTO≥nSPI
(
c⁄fig
);

147 #i‡(
HAL_UART_USB
)

148 
	`HÆUARTO≥nUSB
(
c⁄fig
);

150 #i‡(
HAL_UART_DMA
 =0Ë&& (
HAL_UART_ISR
 =0Ë&& (
HAL_UART_SPI
 == 0)

152 (Ë
p‹t
;

153 (Ë
c⁄fig
;

156  
HAL_UART_SUCCESS
;

157 
	}
}

170 
uöt16
 
	$HÆUARTRód
(
uöt8
 
p‹t
, uöt8 *
buf
, 
uöt16
 
Àn
)

172 #i‡(
HAL_UART_DMA
 == 1)

174 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë 
	`HÆUARTRódDMA
(
buf
, 
Àn
);

176 #i‡(
HAL_UART_DMA
 == 2)

177 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë 
	`HÆUARTRódDMA
(
buf
, 
Àn
);

179 #i‡(
HAL_UART_ISR
 == 1)

180 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë 
	`HÆUARTRódISR
(
buf
, 
Àn
);

182 #i‡(
HAL_UART_ISR
 == 2)

183 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë 
	`HÆUARTRódISR
(
buf
, 
Àn
);

185 #i‡(
HAL_UART_SPI
 == 1)

186 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë 
	`HÆUARTRódSPI
(
buf
, 
Àn
);

188 #i‡(
HAL_UART_SPI
 == 2)

189 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë 
	`HÆUARTRódSPI
(
buf
, 
Àn
);

192 #i‡
HAL_UART_USB


193  
	`HÆUARTRx
(
buf
, 
Àn
);

195 #i‡(
HAL_UART_DMA
 =0Ë&& (
HAL_UART_ISR
 =0Ë&& (
HAL_UART_SPI
 == 0)

197 (Ë
p‹t
;

198 (Ë
buf
;

199 (Ë
Àn
;

203 
	}
}

216 
uöt16
 
	$HÆUARTWrôe
(
uöt8
 
p‹t
, uöt8 *
buf
, 
uöt16
 
Àn
)

218 #i‡(
HAL_UART_DMA
 == 1)

219 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë 
	`HÆUARTWrôeDMA
(
buf
, 
Àn
);

221 #i‡(
HAL_UART_DMA
 == 2)

222 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë 
	`HÆUARTWrôeDMA
(
buf
, 
Àn
);

224 #i‡(
HAL_UART_ISR
 == 1)

225 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë 
	`HÆUARTWrôeISR
(
buf
, 
Àn
);

227 #i‡(
HAL_UART_ISR
 == 2)

228 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë 
	`HÆUARTWrôeISR
(
buf
, 
Àn
);

230 #i‡(
HAL_UART_SPI
 == 1)

231 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë 
	`HÆUARTWrôeSPI
(
buf
, 
Àn
);

233 #i‡(
HAL_UART_SPI
 == 2)

234 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë 
	`HÆUARTWrôeSPI
(
buf
, 
Àn
);

237 #i‡
HAL_UART_USB


238 
	`HÆUARTTx
(
buf
, 
Àn
);

239  
Àn
;

241 #i‡(
HAL_UART_DMA
 =0Ë&& (
HAL_UART_ISR
 =0Ë&& (
HAL_UART_SPI
 == 0)

243 (Ë
p‹t
;

244 (Ë
buf
;

245 (Ë
Àn
;

249 
	}
}

260 
	$HÆUARTSu•íd
( )

262 #i‡
HAL_UART_ISR


263 
	`HÆUARTSu•ídISR
();

265 
	}
}

276 
	$HÆUARTResume
( )

278 #i‡
HAL_UART_ISR


279 
	`HÆUARTResumeISR
();

281 
	}
}

292 
	$HÆUARTPﬁl
()

294 #i‡(
HAL_UART_DMA
 && 
HAL_UART_SPI
)

295 i‡(
HAL_UART_PORT
)

297 
	`HÆUARTPﬁlSPI
();

301 
	`HÆUARTPﬁlDMA
();

304 #i‡
HAL_UART_DMA


305 
	`HÆUARTPﬁlDMA
();

307 #i‡
HAL_UART_ISR


308 
	`HÆUARTPﬁlISR
();

310 #i‡
HAL_UART_SPI


311 
	`HÆUARTPﬁlSPI
();

313 #i‡
HAL_UART_USB


314 
	`HÆUARTPﬁlUSB
();

317 
	}
}

328 
uöt16
 
	$HÆ_UART_RxBufLí
–
uöt8
 
p‹t
 )

330 #i‡(
HAL_UART_DMA
 == 1)

331 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë 
	`HÆUARTRxAvaûDMA
();

333 #i‡(
HAL_UART_DMA
 == 2)

334 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë 
	`HÆUARTRxAvaûDMA
();

336 #i‡(
HAL_UART_ISR
 == 1)

337 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë 
	`HÆUARTRxAvaûISR
();

339 #i‡(
HAL_UART_ISR
 == 2)

340 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë 
	`HÆUARTRxAvaûISR
();

342 #i‡(
HAL_UART_SPI
 == 1)

343 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë 
	`HÆUARTRxAvaûSPI
();

345 #i‡(
HAL_UART_SPI
 == 2)

346 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë 
	`HÆUARTRxAvaûSPI
();

349 #i‡
HAL_UART_USB


350  
	`HÆUARTRxAvaûUSB
();

352 #i‡(
HAL_UART_DMA
 =0Ë&& (
HAL_UART_ISR
 =0Ë&& (
HAL_UART_SPI
 == 0)

354 (Ë
p‹t
;

358 
	}
}

360 
	$HÆUARTI§DMA
()

362 #i‡(
HAL_UART_DMA
 && 
HAL_UART_SPI
)

363 i‡(
HAL_UART_PORT
)

365 
	`HÆUART_DMAI§SPI
();

369 
	`HÆUART_DMAI§DMA
();

371 #ñi‡
HAL_UART_DMA


372 
	`HÆUART_DMAI§DMA
();

373 #ñi‡
HAL_UART_SPI


374 
	`HÆUART_DMAI§SPI
();

376 
	}
}

	@../../../../Components/hal/target/CC2540USB/_hal_uart_dma.c

50 
	~<°rög.h
>

52 
	~"hÆ_as£π.h
"

53 
	~"hÆ_bﬂrd.h
"

54 
	~"hÆ_defs.h
"

55 
	~"hÆ_dma.h
"

56 
	~"hÆ_mcu.h
"

57 
	~"hÆ_ty≥s.h
"

58 
	~"hÆ_u¨t.h
"

66 
	#CSR_MODE
 0x80

	)

67 
	#CSR_RE
 0x40

	)

68 
	#CSR_SLAVE
 0x20

	)

69 
	#CSR_FE
 0x10

	)

70 
	#CSR_ERR
 0x08

	)

71 
	#CSR_RX_BYTE
 0x04

	)

72 
	#CSR_TX_BYTE
 0x02

	)

73 
	#CSR_ACTIVE
 0x01

	)

76 
	#UCR_FLUSH
 0x80

	)

77 
	#UCR_FLOW
 0x40

	)

78 
	#UCR_D9
 0x20

	)

79 
	#UCR_BIT9
 0x10

	)

80 
	#UCR_PARITY
 0x08

	)

81 
	#UCR_SPB
 0x04

	)

82 
	#UCR_STOP
 0x02

	)

83 
	#UCR_START
 0x01

	)

85 
	#UTX0IE
 0x04

	)

86 
	#UTX1IE
 0x08

	)

88 
	#P2DIR_PRIPO
 0xC0

	)

90 
	#HAL_DMA_U0DBUF
 0x70C1

	)

91 
	#HAL_DMA_U1DBUF
 0x70F9

	)

93 #unde‡
UxCSR


94 #unde‡
UxUCR


95 #unde‡
UxDBUF


96 #unde‡
UxBAUD


97 #unde‡
UxGCR


98 #unde‡
UTXxIE


99 #unde‡
UTXxIF


100 #i‡ (
HAL_UART_DMA
 == 1)

101 
	#UxCSR
 
U0CSR


	)

102 
	#UxUCR
 
U0UCR


	)

103 
	#UxDBUF
 
U0DBUF


	)

104 
	#UxBAUD
 
U0BAUD


	)

105 
	#UxGCR
 
U0GCR


	)

106 
	#UTXxIE
 
UTX0IE


	)

107 
	#UTXxIF
 
UTX0IF


	)

108 #ñi‡ (
HAL_UART_DMA
 == 2)

109 
	#UxCSR
 
U1CSR


	)

110 
	#UxUCR
 
U1UCR


	)

111 
	#UxDBUF
 
U1DBUF


	)

112 
	#UxBAUD
 
U1BAUD


	)

113 
	#UxGCR
 
U1GCR


	)

114 
	#UTXxIE
 
UTX1IE


	)

115 
	#UTXxIF
 
UTX1IF


	)

118 #unde‡
PxSEL


119 #unde‡
HAL_UART_PERCFG_BIT


120 #unde‡
HAL_UART_PRIPO


121 #unde‡
HAL_UART_Px_CTS


122 #unde‡
HAL_UART_Px_RTS


123 #unde‡
HAL_UART_Px_SEL


124 #i‡ (
HAL_UART_DMA
 == 1)

125 
	#PxSEL
 
P0SEL


	)

126 
	#HAL_UART_PERCFG_BIT
 0x01

127 
	#HAL_UART_PRIPO
 0x00

128 
	#HAL_UART_Px_CTS
 0x10

129 
	#HAL_UART_Px_RTS
 0x20

130 
	#HAL_UART_Px_SEL
 0x0C

131 #ñi‡ (
HAL_UART_DMA
 =2)

	)

132 
	#PxSEL
 
P1SEL


	)

133 
	#HAL_UART_PERCFG_BIT
 0x02

134 
	#HAL_UART_PRIPO
 0x40

135 
	#HAL_UART_Px_CTS
 0x10

136 
	#HAL_UART_Px_RTS
 0x20

137 
	#HAL_UART_Px_SEL
 0xC0

139 

	)

140 #unde‡
DMA_PAD


141 #unde‡
DMA_UxDBUF


142 #unde‡
DMATRIG_RX


143 #unde‡
DMATRIG_TX


144 #i‡ (
HAL_UART_DMA
 == 1)

145 
	#DMA_PAD
 
U0BAUD


	)

146 
	#DMA_UxDBUF
 
HAL_DMA_U0DBUF


	)

147 
	#DMATRIG_RX
 
HAL_DMA_TRIG_URX0


	)

148 
	#DMATRIG_TX
 
HAL_DMA_TRIG_UTX0


	)

149 #ñi‡ (
HAL_UART_DMA
 == 2)

150 
	#DMA_PAD
 
U1BAUD


	)

151 
	#DMA_UxDBUF
 
HAL_DMA_U1DBUF


	)

152 
	#DMATRIG_RX
 
HAL_DMA_TRIG_URX1


	)

153 
	#DMATRIG_TX
 
HAL_DMA_TRIG_UTX1


	)

156 #unde‡
PxDIR


157 #unde‡
PxIEN


158 #unde‡
PxIFG


159 #unde‡
PxIF


160 #unde‡
PICTL_BIT


161 #unde‡
IENx


162 #unde‡
IEN_BIT


163 #i‡ (
HAL_UART_DMA
 == 1)

164 
	#PxDIR
 
P0DIR


	)

165 
	#PxIEN
 
P0IEN


	)

166 
	#PxIFG
 
P0IFG


	)

167 
	#PxIF
 
P0IF


	)

168 
	#DMA_RDYIn
 
P0_4


	)

169 
	#DMA_RDYOut
 
P0_5


	)

170 
	#DMA_RDYIn_BIT
 
	`BV
(4)

171 
	#DMA_RDYOut_BIT
 
	`BV
(5)

173 
	#PICTL_BIT
 
	`BV
(0)

	)

174 
	#IENx
 
IEN1


	)

175 
	#IEN_BIT
 
	`BV
(5)

	)

176 #ñi‡ (
HAL_UART_DMA
 == 2)

177 
	#PxDIR
 
P1DIR


	)

178 
	#PxIEN
 
P1IEN


	)

179 
	#PxIFG
 
P1IFG


	)

180 
	#PxIF
 
P1IF


	)

181 
	#DMA_RDYIn
 
P1_4


	)

182 
	#DMA_RDYOut
 
P1_5


	)

183 
	#DMA_RDYIn_BIT
 
	`BV
(4)

184 
	#DMA_RDYOut_BIT
 
	`BV
(5)

186 
	#PICTL_BIT
 
	`BV
(2)

	)

187 
	#IENx
 
IEN2


	)

188 
	#IEN_BIT
 
	`BV
(4)

	)

191 #i‡!
deföed
–
DMA_PM
 )

192 #i‡
deföed
 
POWER_SAVING


193 
	#DMA_PM
 1

	)

195 
	#DMA_PM
 0

	)

201 #i‡!
deföed
 
HAL_UART_TX_BY_ISR


202 
	#HAL_UART_TX_BY_ISR
 1

	)

213 
	#DMA_PM_DLY
 0

	)

216 
	#HAL_UART_MSECS_TO_TICKS
 33

	)

218 #i‡!
deföed
 
HAL_UART_DMA_RX_MAX


219 
	#HAL_UART_DMA_RX_MAX
 128

	)

221 #i‡!
deföed
 
HAL_UART_DMA_TX_MAX


222 
	#HAL_UART_DMA_TX_MAX
 
HAL_UART_DMA_RX_MAX


	)

224 #i‡!
deföed
 
HAL_UART_DMA_HIGH


225 
	#HAL_UART_DMA_HIGH
 (
HAL_UART_DMA_RX_MAX
 - 1)

	)

227 #i‡!
deföed
 
HAL_UART_DMA_IDLE


228 
	#HAL_UART_DMA_IDLE
 (0 * 
HAL_UART_MSECS_TO_TICKS
)

	)

230 #i‡!
deföed
 
HAL_UART_DMA_FULL


231 
	#HAL_UART_DMA_FULL
 (
HAL_UART_DMA_RX_MAX
 - 16)

	)

235 
	#HAL_UART_TX_TICK_MIN
 11

	)

242 #i‡
HAL_UART_DMA_RX_MAX
 <= 256

243 
uöt8
 
	trxIdx_t
;

245 
uöt16
 
	trxIdx_t
;

248 #i‡
HAL_UART_DMA_TX_MAX
 <= 256

249 
uöt8
 
	ttxIdx_t
;

251 
uöt16
 
	ttxIdx_t
;

256 
uöt16
 
	mrxBuf
[
HAL_UART_DMA_RX_MAX
];

257 
rxIdx_t
 
	mrxHód
;

258 
rxIdx_t
 
	mrxTaû
;

259 #i‡
HAL_UART_DMA_IDLE


260 
uöt8
 
	mrxTick
;

263 #i‡
HAL_UART_TX_BY_ISR


264 
uöt8
 
	mtxBuf
[
HAL_UART_DMA_TX_MAX
];

265 vﬁ©ûê
txIdx_t
 
	mtxHód
;

266 
txIdx_t
 
	mtxTaû
;

267 
uöt8
 
	mtxMT
;

269 
uöt8
 
	mtxBuf
[2][
HAL_UART_DMA_TX_MAX
];

270 
txIdx_t
 
	mtxIdx
[2];

271 
uöt8
 
	mtxMT
;

272 
uöt8
 
	mtxTick
;

273 
uöt8
 
	mtxTrig
;

277 vﬁ©ûê
uöt8
 
	mtxSñ
;

280 
hÆUARTCBack_t
 
	mu¨tCB
;

281 } 
	tu¨tDMACfg_t
;

288 
	#HAL_UART_DMA_NEW_RX_BYTE
(
IDX
Ë((
uöt8
)
DMA_PAD
 =
	`HI_UINT16
(
dmaCfg
.
rxBuf
[(IDX)]))

	)

289 
	#HAL_UART_DMA_GET_RX_BYTE
(
IDX
Ë(*(vﬁ©ûê
uöt8
 *)(
dmaCfg
.
rxBuf
+(IDX)))

	)

290 
	#HAL_UART_DMA_CLR_RX_BYTE
(
IDX
Ë(
dmaCfg
.
rxBuf
[(IDX)] = 
	`BUILD_UINT16
(0, (
DMA_PAD
 ^ 0xFF)))

	)

292 
	#HAL_UART_DMA_CLR_RDY_OUT
(Ë(
DMA_RDYOut
 = 1)

	)

293 
	#HAL_UART_DMA_SET_RDY_OUT
(Ë(
DMA_RDYOut
 = 0)

	)

295 
	#HAL_UART_DMA_RDY_IN
(Ë(
DMA_RDYIn
 =0)

	)

296 
	#HAL_UART_DMA_RDY_OUT
(Ë(
DMA_RDYOut
 =0)

	)

298 #i‡
HAL_UART_DMA_RX_MAX
 == 256

299 
	#HAL_UART_RX_IDX_T_DECR
(
IDX
Ë(IDX)--

	)

301 
	#HAL_UART_RX_IDX_T_DECR
(
IDX
Ë
	`°
 ( \

302 i‡((
IDX
)-- == 0) \

304 (
IDX
Ë
HAL_UART_DMA_RX_MAX
-1; \

306 )

	)

309 #i‡
HAL_UART_DMA_RX_MAX
 == 256

310 
	#HAL_UART_RX_IDX_T_INCR
(
IDX
Ë(IDX)++

	)

312 
	#HAL_UART_RX_IDX_T_INCR
(
IDX
Ë
	`°
 ( \

313 i‡(++(
IDX
Ë>
HAL_UART_DMA_RX_MAX
) \

315 (
IDX
) = 0; \

317 )

	)

320 
	#HAL_UART_DMA_TX_AVAIL
() \

321 ((
dmaCfg
.
txHód
 > dmaCfg.
txTaû
) ? \

322 (
dmaCfg
.
txHód
 - dmaCfg.
txTaû
 - 1) : \

323 (
HAL_UART_DMA_TX_MAX
 - 
dmaCfg
.
txTaû
 + dmaCfg.
txHód
 - 1))

	)

331 vﬁ©ûê
uöt8
 
	gdmaRdyI§
;

332 
uöt8
 
	gdmaRdyDly
;

334 
u¨tDMACfg_t
 
	gdmaCfg
;

341 
HÆUART_DMAI§DMA
();

349 
HÆUARTInôDMA
();

350 
HÆUARTO≥nDMA
(
hÆUARTCfg_t
 *
c⁄fig
);

351 
uöt16
 
HÆUARTRódDMA
(
uöt8
 *
buf
, uöt16 
Àn
);

352 
uöt16
 
HÆUARTWrôeDMA
(
uöt8
 *
buf
, uöt16 
Àn
);

353 
HÆUARTPﬁlDMA
();

354 
uöt16
 
HÆUARTRxAvaûDMA
();

355 
uöt8
 
HÆUARTBusyDMA
();

356 #i‡!
HAL_UART_TX_BY_ISR


357 
HÆUARTPﬁlTxTrigDMA
();

358 
HÆUARTArmTxDMA
();

370 
	$HÆUARTInôDMA
()

372 
hÆDMADesc_t
 *
ch
;

373 #i‡(
HAL_UART_DMA
 == 1)

374 
PERCFG
 &~
HAL_UART_PERCFG_BIT
;

376 
PERCFG
 |
HAL_UART_PERCFG_BIT
;

378 
PxSEL
 |
HAL_UART_Px_SEL
;

379 
UxCSR
 = 
CSR_MODE
;

380 
UxUCR
 = 
UCR_FLUSH
;

382 
P2DIR
 &~
P2DIR_PRIPO
;

383 
P2DIR
 |
HAL_UART_PRIPO
;

385 i‡(
DMA_PM
)

388 
PxIEN
 |
DMA_RDYIn_BIT
;

389 
PICTL
 |
PICTL_BIT
;

391 
	`HAL_UART_DMA_CLR_RDY_OUT
();

392 
PxDIR
 |
DMA_RDYOut_BIT
;

395 #i‡!
HAL_UART_TX_BY_ISR


397 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_CH_TX
 );

400 
	`HAL_DMA_ABORT_CH
–
HAL_DMA_CH_TX
 );

403 
	`HAL_DMA_SET_DEST
–
ch
, 
DMA_UxDBUF
 );

406 
	`HAL_DMA_SET_VLEN
–
ch
, 
HAL_DMA_VLEN_USE_LEN
 );

409 
	`HAL_DMA_SET_WORD_SIZE
–
ch
, 
HAL_DMA_WORDSIZE_BYTE
 );

412 
	`HAL_DMA_SET_TRIG_MODE
–
ch
, 
HAL_DMA_TMODE_SINGLE
 );

413 
	`HAL_DMA_SET_TRIG_SRC
–
ch
, 
DMATRIG_TX
 );

416 
	`HAL_DMA_SET_SRC_INC
–
ch
, 
HAL_DMA_SRCINC_1
 );

419 
	`HAL_DMA_SET_DST_INC
–
ch
, 
HAL_DMA_DSTINC_0
 );

422 
	`HAL_DMA_SET_IRQ
–
ch
, 
HAL_DMA_IRQMASK_ENABLE
 );

425 
	`HAL_DMA_SET_M8
–
ch
, 
HAL_DMA_M8_USE_8_BITS
 );

428 
	`HAL_DMA_SET_PRIORITY
–
ch
, 
HAL_DMA_PRI_HIGH
);

432 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_CH_RX
 );

435 
	`HAL_DMA_ABORT_CH
–
HAL_DMA_CH_RX
 );

438 
	`HAL_DMA_SET_SOURCE
–
ch
, 
DMA_UxDBUF
 );

441 
	`HAL_DMA_SET_VLEN
–
ch
, 
HAL_DMA_VLEN_USE_LEN
 );

450 
	`HAL_DMA_SET_WORD_SIZE
–
ch
, 
HAL_DMA_WORDSIZE_WORD
 );

453 
	`HAL_DMA_SET_TRIG_MODE
–
ch
, 
HAL_DMA_TMODE_SINGLE_REPEATED
 );

454 
	`HAL_DMA_SET_TRIG_SRC
–
ch
, 
DMATRIG_RX
 );

457 
	`HAL_DMA_SET_SRC_INC
–
ch
, 
HAL_DMA_SRCINC_0
 );

460 
	`HAL_DMA_SET_DST_INC
–
ch
, 
HAL_DMA_DSTINC_1
 );

461 
	`HAL_DMA_SET_DEST
–
ch
, 
dmaCfg
.
rxBuf
 );

462 
	`HAL_DMA_SET_LEN
–
ch
, 
HAL_UART_DMA_RX_MAX
 );

465 
	`HAL_DMA_SET_IRQ
–
ch
, 
HAL_DMA_IRQMASK_DISABLE
 );

468 
	`HAL_DMA_SET_M8
–
ch
, 
HAL_DMA_M8_USE_8_BITS
 );

471 
	`HAL_DMA_SET_PRIORITY
–
ch
, 
HAL_DMA_PRI_HIGH
);

473 vﬁ©ûê
uöt8
 
dummy
 = *(vﬁ©ûêuöt8 *)
DMA_UxDBUF
;

474 
	`HAL_DMA_CLEAR_IRQ
(
HAL_DMA_CH_RX
);

475 
	`HAL_DMA_ARM_CH
(
HAL_DMA_CH_RX
);

476 ()
	`mem£t
(
dmaCfg
.
rxBuf
, (
DMA_PAD
 ^ 0xFF), 
HAL_UART_DMA_RX_MAX
 * (
uöt16
));

477 
	}
}

488 
	$HÆUARTO≥nDMA
(
hÆUARTCfg_t
 *
c⁄fig
)

490 
dmaCfg
.
u¨tCB
 = 
c⁄fig
->
ˇŒBackFunc
;

493 
	`HAL_ASSERT
((
c⁄fig
->
baudR©e
 =
HAL_UART_BR_9600
) ||

494 (
c⁄fig
->
baudR©e
 =
HAL_UART_BR_19200
) ||

495 (
c⁄fig
->
baudR©e
 =
HAL_UART_BR_38400
) ||

496 (
c⁄fig
->
baudR©e
 =
HAL_UART_BR_57600
) ||

497 (
c⁄fig
->
baudR©e
 =
HAL_UART_BR_115200
));

499 i‡(
c⁄fig
->
baudR©e
 =
HAL_UART_BR_57600
 ||

500 
c⁄fig
->
baudR©e
 =
HAL_UART_BR_115200
)

502 
UxBAUD
 = 216;

506 
UxBAUD
 = 59;

509 
c⁄fig
->
baudR©e
)

511 
HAL_UART_BR_9600
:

512 
UxGCR
 = 8;

514 
HAL_UART_BR_19200
:

515 
UxGCR
 = 9;

517 
HAL_UART_BR_38400
:

518 
HAL_UART_BR_57600
:

519 
UxGCR
 = 10;

523 
UxGCR
 = 11;

527 i‡(
DMA_PM
 || 
c⁄fig
->
ÊowC⁄åﬁ
)

529 
UxUCR
 = 
UCR_FLOW
 | 
UCR_STOP
;

530 
PxSEL
 |
HAL_UART_Px_CTS
;

534 
UxUCR
 = 
UCR_STOP
;

537 
UxCSR
 = (
CSR_MODE
 | 
CSR_RE
);

539 i‡(
DMA_PM
)

541 
PxIFG
 = 0;

542 
PxIF
 = 0;

543 
IENx
 |
IEN_BIT
;

545 i‡(
UxUCR
 & 
UCR_FLOW
)

549 
	`HAL_UART_DMA_SET_RDY_OUT
();

550 
PxDIR
 |
HAL_UART_Px_RTS
;

553 #i‡
HAL_UART_TX_BY_ISR


554 
UTXxIF
 = 1;

556 
	}
}

568 
uöt16
 
	$HÆUARTRódDMA
(
uöt8
 *
buf
, 
uöt16
 
Àn
)

570 
uöt16
 
˙t
;

572 
˙t
 = 0; c¡ < 
Àn
; cnt++)

574 i‡(!
	`HAL_UART_DMA_NEW_RX_BYTE
(
dmaCfg
.
rxHód
))

578 *
buf
++ = 
	`HAL_UART_DMA_GET_RX_BYTE
(
dmaCfg
.
rxHód
);

579 
	`HAL_UART_DMA_CLR_RX_BYTE
(
dmaCfg
.
rxHód
);

580 
	`HAL_UART_RX_IDX_T_INCR
(
dmaCfg
.
rxHód
);

584 
dmaCfg
.
rxTaû
 = dmaCfg.
rxHód
;

586 i‡(!
DMA_PM
 && (
UxUCR
 & 
UCR_FLOW
))

588 
	`HAL_UART_DMA_SET_RDY_OUT
();

591  
˙t
;

592 
	}
}

605 
uöt16
 
	$HÆUARTWrôeDMA
(
uöt8
 *
buf
, 
uöt16
 
Àn
)

607 #i‡
HAL_UART_TX_BY_ISR


609 i‡(
	`HAL_UART_DMA_TX_AVAIL
(Ë< 
Àn
)

614 
uöt16
 
˙t
 = 0; c¡ < 
Àn
; cnt++)

616 
dmaCfg
.
txBuf
[dmaCfg.
txTaû
] = *
buf
++;

617 
dmaCfg
.
txMT
 = 0;

619 i‡(
dmaCfg
.
txTaû
 >
HAL_UART_DMA_TX_MAX
-1)

621 
dmaCfg
.
txTaû
 = 0;

625 
dmaCfg
.
txTaû
++;

629 
IEN2
 |
UTXxIE
;

632 
txIdx_t
 
txIdx
;

633 
uöt8
 
txSñ
;

634 
hÆI¡Sèã_t
 
his
;

636 
	`HAL_ENTER_CRITICAL_SECTION
(
his
);

637 
txSñ
 = 
dmaCfg
.txSel;

638 
txIdx
 = 
dmaCfg
.txIdx[
txSñ
];

639 
	`HAL_EXIT_CRITICAL_SECTION
(
his
);

642 i‡((
Àn
 + 
txIdx
Ë> 
HAL_UART_DMA_TX_MAX
)

647 ()
	`mem˝y
(&(
dmaCfg
.
txBuf
[
txSñ
][
txIdx
]), 
buf
, 
Àn
);

649 
	`HAL_ENTER_CRITICAL_SECTION
(
his
);

654 i‡(
txSñ
 !
dmaCfg
.txSel)

656 
	`HAL_EXIT_CRITICAL_SECTION
(
his
);

657 
txSñ
 ^= 1;

659 ()
	`mem˝y
(&(
dmaCfg
.
txBuf
[
txSñ
][0]), 
buf
, 
Àn
);

660 
	`HAL_ENTER_CRITICAL_SECTION
(
his
);

661 
dmaCfg
.
txIdx
[
txSñ
] = 
Àn
;

665 
dmaCfg
.
txIdx
[
txSñ
] =ÅxIdx + 
Àn
;

669 i‡(
dmaCfg
.
txIdx
[(
txSñ
 ^ 1)] == 0)

671 
	`HAL_EXIT_CRITICAL_SECTION
(
his
);

672 
	`HÆUARTArmTxDMA
();

676 
dmaCfg
.
txMT
 = 
FALSE
;

677 
	`HAL_EXIT_CRITICAL_SECTION
(
his
);

681  
Àn
;

682 
	}
}

694 
	$HÆUARTPﬁlDMA
()

696 
uöt8
 
evt
 = 0;

697 
uöt16
 
˙t
;

699 #i‡
DMA_PM


700 
PxIEN
 &~
DMA_RDYIn_BIT
;

702 i‡(
dmaRdyI§
 || 
	`HAL_UART_DMA_RDY_IN
(Ë|| 
	`HÆUARTBusyDMA
())

705 #i‡
HAL_UART_TX_BY_ISR


706 i‡(!
	`HAL_UART_DMA_RDY_IN
(Ë&& (
dmaCfg
.
txHód
 !dmaCfg.
txTaû
))

708 i‡(!
	`HAL_UART_DMA_RDY_IN
(Ë&& ((
dmaCfg
.
txIdx
[0] != 0) || (dmaCfg.txIdx[1] != 0)))

711 
	`HAL_UART_DMA_CLR_RDY_OUT
();

713 
dmaRdyI§
 = 0;

715 i‡(
dmaRdyDly
 == 0)

717 ()
	`oßl_£t_evít
(
HÆ_TaskID
, 
HAL_PWRMGR_HOLD_EVENT
);

720 i‡((
dmaRdyDly
 = 
ST0
) == 0)

722 
dmaRdyDly
 = 0xFF;

724 
	`HAL_UART_DMA_SET_RDY_OUT
();

726 i‡((
dmaRdyDly
 !0Ë&& (!
DMA_PM_DLY
 || ((
uöt8
)(
ST0
 - dmaRdyDly) > DMA_PM_DLY)))

728 
dmaRdyDly
 = 0;

729 ()
	`oßl_£t_evít
(
HÆ_TaskID
, 
HAL_PWRMGR_CONSERVE_EVENT
);

732 
PxIEN
 |
DMA_RDYIn_BIT
;

735 #i‡!
HAL_UART_TX_BY_ISR


736 
	`HÆUARTPﬁlTxTrigDMA
();

740 
˙t
 = 
	`HÆUARTRxAvaûDMA
();

742 #i‡
HAL_UART_DMA_IDLE


743 i‡(
dmaCfg
.
rxTick
)

746 i‡((
ST0
 - 
dmaCfg
.
rxTick
Ë> 
HAL_UART_DMA_IDLE
)

748 
dmaCfg
.
rxTick
 = 0;

749 
evt
 = 
HAL_UART_RX_TIMEOUT
;

752 i‡(
˙t
 != 0)

754 i‡((
dmaCfg
.
rxTick
 = 
ST0
) == 0)

756 
dmaCfg
.
rxTick
 = 0xFF;

760 i‡(
˙t
 != 0)

762 
evt
 = 
HAL_UART_RX_TIMEOUT
;

766 i‡(
˙t
 >
HAL_UART_DMA_FULL
)

768 
evt
 |
HAL_UART_RX_FULL
;

770 i‡(
˙t
 >
HAL_UART_DMA_HIGH
)

772 
evt
 |
HAL_UART_RX_ABOUT_FULL
;

774 i‡(!
DMA_PM
 && (
UxUCR
 & 
UCR_FLOW
))

776 
	`HAL_UART_DMA_CLR_RDY_OUT
();

780 i‡(
dmaCfg
.
txMT
)

782 
dmaCfg
.
txMT
 = 
FALSE
;

783 
evt
 |
HAL_UART_TX_EMPTY
;

786 i‡((
evt
 !0Ë&& (
dmaCfg
.
u¨tCB
 !
NULL
))

788 
dmaCfg
.
	`u¨tCB
(
HAL_UART_DMA
-1, 
evt
);

791 i‡(
DMA_PM
 && (
dmaRdyDly
 =0Ë&& !
	`HÆUARTBusyDMA
())

793 
	`HAL_UART_DMA_CLR_RDY_OUT
();

795 
	}
}

806 
rxIdx_t
 
	gswìpIdx
 = 0;

808 
uöt16
 
	$HÆUARTRxAvaûDMA
()

810 
uöt16
 
˙t
 = 0;

811 #i‚de‡
POWER_SAVING


812 
boﬁ
 
dëe˘OvîÊow
 = 
FALSE
;

815 
rxIdx_t
 
èû
 = 
dmaCfg
.
rxTaû
;

817 #i‚de‡
POWER_SAVING


818 i‡(!
DMA_PM
 && (
UxUCR
 & 
UCR_FLOW
))

820 
	`HAL_UART_DMA_CLR_RDY_OUT
();

826 i‡(!
	`HAL_UART_DMA_NEW_RX_BYTE
(
èû
))

832 
˙t
++;

835 
	`HAL_UART_RX_IDX_T_INCR
(
èû
);

836 } 
˙t
 < 
HAL_UART_DMA_RX_MAX
);

838 if(!
˙t
)

840 
swìpIdx
 < 
HAL_UART_DMA_RX_MAX
)

842 i‡(
	`HAL_UART_DMA_NEW_RX_BYTE
(
swìpIdx
))

844 
dmaCfg
.
rxTaû
 = 
swìpIdx
;

845 
dmaCfg
.
rxHód
 = 
swìpIdx
;

846 
˙t
 = 0;

847 #i‚de‡
POWER_SAVING


848 
dëe˘OvîÊow
 = 
TRUE
;

853 
swìpIdx
++;

856 i‡–
swìpIdx
 =
HAL_UART_DMA_RX_MAX
 )

858 
swìpIdx
 = 0;

862 #i‚de‡
POWER_SAVING


863 i‡–(!
DMA_PM
 && (
UxUCR
 & 
UCR_FLOW
)Ë&& (!
dëe˘OvîÊow
 ) )

865 
	`HAL_UART_DMA_SET_RDY_OUT
();

868  
˙t
;

869 
	}
}

880 
uöt8
 
	$HÆUARTBusyDMA
( )

882 #i‡
HAL_UART_TX_BY_ISR


883  !((!(
UxCSR
 & (
CSR_ACTIVE
 | 
CSR_RX_BYTE
))Ë&& (
	`HÆUARTRxAvaûDMA
() == 0) &&

884 (
dmaCfg
.
txHód
 =dmaCfg.
txTaû
));

886  !((!(
UxCSR
 & (
CSR_ACTIVE
 | 
CSR_RX_BYTE
))Ë&& (
	`HÆUARTRxAvaûDMA
() == 0) &&

887 (
dmaCfg
.
txIdx
[0] == 0) && (dmaCfg.txIdx[1] == 0));

889 
	}
}

891 #i‡!
HAL_UART_TX_BY_ISR


901 
	$HÆUARTPﬁlTxTrigDMA
()

903 i‡((
UxCSR
 & 
CSR_TX_BYTE
) == 0)

905 i‡((
dmaCfg
.
txTick
 =0Ë|| ((
uöt8
)(
ST0
 - dmaCfg.txTickË> 
HAL_UART_TX_TICK_MIN
))

907 
dmaCfg
.
txTick
 = 0;

909 i‡(
dmaCfg
.
txTrig
 && 
	`HAL_DMA_CH_ARMED
(
HAL_DMA_CH_TX
))

911 
	`HAL_DMA_MAN_TRIGGER
(
HAL_DMA_CH_TX
);

913 
dmaCfg
.
txTrig
 = 0;

918 
UxCSR
 = (
CSR_MODE
 | 
CSR_RE
);

919 
dmaCfg
.
txTick
 = 
ST0
;

921 i‡(
dmaCfg
.
txTick
 == 0)

923 
dmaCfg
.
txTick
 = 0xFF;

926 
	}
}

937 
	$HÆUARTArmTxDMA
()

939 
hÆDMADesc_t
 *
ch
 = 
	`HAL_DMA_GET_DESC1234
(
HAL_DMA_CH_TX
);

940 
	`HAL_DMA_SET_SOURCE
(
ch
, 
dmaCfg
.
txBuf
[dmaCfg.
txSñ
]);

941 
	`HAL_DMA_SET_LEN
(
ch
, 
dmaCfg
.
txIdx
[dmaCfg.
txSñ
]);

943 
dmaCfg
.
txSñ
 ^= 1;

944 
dmaCfg
.
txTrig
 = 1;

945 
	`HAL_DMA_ARM_CH
(
HAL_DMA_CH_TX
);

948 
	`asm
("nop");ásm("nop");ásm("nop");ásm("nop");ásm("nop");

949 
	`asm
("nop");ásm("nop");ásm("nop");ásm("nop");

951 
	`HÆUARTPﬁlTxTrigDMA
();

953 i‡(
DMA_PM
)

955 
	`HAL_UART_DMA_SET_RDY_OUT
();

957 
	}
}

969 
	$HÆUART_DMAI§DMA
()

971 #i‡!
HAL_UART_TX_BY_ISR


972 i‡(
dmaCfg
.
txIdx
[dmaCfg.
txSñ
])

975 
	`HÆUARTArmTxDMA
();

978 
dmaCfg
.
txIdx
[dmaCfg.
txSñ
] = 0;

982 
dmaCfg
.
txIdx
[(dmaCfg.
txSñ
 ^ 1)] = 0;

986 
	`HÆUARTPﬁlTxTrigDMA
();

989 
dmaCfg
.
txMT
 = 
TRUE
;

991 
	}
}

993 #i‡
DMA_PM


1003 #i‡(
HAL_UART_DMA
 == 1)

1004 
	$HAL_ISR_FUNCTION
(
p‹t0I§
, 
P0INT_VECTOR
)

1006 
	$HAL_ISR_FUNCTION
(
p‹t1I§
, 
P1INT_VECTOR
)

1009 
	`HAL_ENTER_ISR
();

1011 
PxIFG
 = 0;

1012 
PxIF
 = 0;

1014 
dmaRdyI§
 = 1;

1016 #ifde‡
POWER_SAVING


1017 
	`CLEAR_SLEEP_MODE
();

1018 ()
	`oßl_pwrmgr_èsk_°©e
(
HÆ_TaskID
, 
PWRMGR_HOLD
);

1020 #i‡
HAL_UART_TX_BY_ISR


1021 i‡–
dmaCfg
.
txHód
 =dmaCfg.
txTaû
 )

1023 
	`HAL_UART_DMA_CLR_RDY_OUT
();

1027 
	`HAL_EXIT_ISR
();

1028 
	}
}

1031 #i‡
HAL_UART_TX_BY_ISR


1041 #i‡(
HAL_UART_DMA
 == 1)

1042 
	$HAL_ISR_FUNCTION
–
hÆU¨t0TxI§
, 
UTX0_VECTOR
 )

1044 
	$HAL_ISR_FUNCTION
–
hÆU¨t1TxI§
, 
UTX1_VECTOR
 )

1047 
	`HAL_ENTER_ISR
();

1049 i‡(
dmaCfg
.
txHód
 =dmaCfg.
txTaû
)

1051 
IEN2
 &~
UTXxIE
;

1052 
dmaCfg
.
txMT
 = 1;

1056 
UTXxIF
 = 0;

1057 
UxDBUF
 = 
dmaCfg
.
txBuf
[dmaCfg.
txHód
++];

1059 i‡((
HAL_UART_DMA_TX_MAX
 !256Ë&& (
dmaCfg
.
txHód
 >= HAL_UART_DMA_TX_MAX))

1061 
dmaCfg
.
txHód
 = 0;

1065 
	`HAL_EXIT_ISR
();

1066 
	}
}

	@../../../../Components/hal/target/CC2540USB/_hal_uart_isr.c

47 
	~"hÆ_ty≥s.h
"

48 
	~"hÆ_as£π.h
"

49 
	~"hÆ_bﬂrd.h
"

50 
	~"hÆ_defs.h
"

51 
	~"hÆ_mcu.h
"

52 
	~"hÆ_u¨t.h
"

59 
	#HAL_UART_ASSERT
(
ex¥
)

	)

61 
	#HAL_UART_ISR_RX_AVAIL
() \

62 ((
i§Cfg
.
rxTaû
 >i§Cfg.
rxHód
) ? \

63 (
i§Cfg
.
rxTaû
 - i§Cfg.
rxHód
) : \

64 (
HAL_UART_ISR_RX_MAX
 - 
i§Cfg
.
rxHód
 + i§Cfg.
rxTaû
))

	)

66 
	#HAL_UART_ISR_TX_AVAIL
() \

67 ((
i§Cfg
.
txHód
 > i§Cfg.
txTaû
) ? \

68 (
i§Cfg
.
txHód
 - i§Cfg.
txTaû
 - 1) : \

69 (
HAL_UART_ISR_TX_MAX
 - 
i§Cfg
.
txTaû
 + i§Cfg.
txHód
 - 1))

	)

76 
	#CSR_MODE
 0x80

	)

77 
	#CSR_RE
 0x40

	)

78 
	#CSR_SLAVE
 0x20

	)

79 
	#CSR_FE
 0x10

	)

80 
	#CSR_ERR
 0x08

	)

81 
	#CSR_RX_BYTE
 0x04

	)

82 
	#CSR_TX_BYTE
 0x02

	)

83 
	#CSR_ACTIVE
 0x01

	)

86 
	#UCR_FLUSH
 0x80

	)

87 
	#UCR_FLOW
 0x40

	)

88 
	#UCR_D9
 0x20

	)

89 
	#UCR_BIT9
 0x10

	)

90 
	#UCR_PARITY
 0x08

	)

91 
	#UCR_SPB
 0x04

	)

92 
	#UCR_STOP
 0x02

	)

93 
	#UCR_START
 0x01

	)

95 
	#UTX0IE
 0x04

	)

96 
	#UTX1IE
 0x08

	)

98 
	#P2DIR_PRIPO
 0xC0

	)

101 #unde‡
PxOUT


102 #unde‡
PxDIR


103 #unde‡
PxSEL


104 #unde‡
UxCSR


105 #unde‡
UxUCR


106 #unde‡
UxDBUF


107 #unde‡
UxBAUD


108 #unde‡
UxGCR


109 #unde‡
URXxIE


110 #unde‡
URXxIF


111 #unde‡
UTXxIE


112 #unde‡
UTXxIF


113 #unde‡
HAL_UART_PERCFG_BIT


114 #unde‡
HAL_UART_Px_RTS


115 #unde‡
HAL_UART_Px_CTS


116 #unde‡
HAL_UART_Px_RX_TX


117 #unde‡
HAL_UART_Px_RX


118 #unde‡
PxIFG


119 #unde‡
PxIF


120 #unde‡
PxIEN


121 #unde‡
PICTL_BIT


122 #unde‡
IENx


123 #unde‡
IEN_BIT


124 #i‡(
HAL_UART_ISR
 == 1)

125 
	#PxOUT
 
P0


	)

126 
	#PxIN
 
P0


	)

127 
	#PxDIR
 
P0DIR


	)

128 
	#PxSEL
 
P0SEL


	)

129 
	#UxCSR
 
U0CSR


	)

130 
	#UxUCR
 
U0UCR


	)

131 
	#UxDBUF
 
U0DBUF


	)

132 
	#UxBAUD
 
U0BAUD


	)

133 
	#UxGCR
 
U0GCR


	)

134 
	#URXxIE
 
URX0IE


	)

135 
	#URXxIF
 
URX0IF


	)

136 
	#UTXxIE
 
UTX0IE


	)

137 
	#UTXxIF
 
UTX0IF


	)

139 
	#PxIFG
 
P0IFG


	)

140 
	#PxIF
 
P0IF


	)

141 
	#PxIEN
 
P0IEN


	)

142 
	#PICTL_BIT
 0x01

	)

143 
	#IENx
 
IEN1


	)

144 
	#IEN_BIT
 0x20

	)

147 
	#PxOUT
 
P1


	)

148 
	#PxIN
 
P1


	)

149 
	#PxDIR
 
P1DIR


	)

150 
	#PxSEL
 
P1SEL


	)

151 
	#UxCSR
 
U1CSR


	)

152 
	#UxUCR
 
U1UCR


	)

153 
	#UxDBUF
 
U1DBUF


	)

154 
	#UxBAUD
 
U1BAUD


	)

155 
	#UxGCR
 
U1GCR


	)

156 
	#URXxIE
 
URX1IE


	)

157 
	#URXxIF
 
URX1IF


	)

158 
	#UTXxIE
 
UTX1IE


	)

159 
	#UTXxIF
 
UTX1IF


	)

161 
	#PxIFG
 
P1IFG


	)

162 
	#PxIF
 
P1IF


	)

163 
	#PxIEN
 
P1IEN


	)

164 
	#PICTL_BIT
 0x04

	)

165 
	#IENx
 
IEN2


	)

166 
	#IEN_BIT
 0x10

	)

169 #i‡(
HAL_UART_ISR
 == 1)

170 
	#HAL_UART_PERCFG_BIT
 0x01

171 
	#HAL_UART_Px_RX_TX
 0x0C

172 
	#HAL_UART_Px_RX
 0x04

173 
	#HAL_UART_Px_RTS
 0x20

174 
	#HAL_UART_Px_CTS
 0x10

175 #ñ£

	)

176 
	#HAL_UART_PERCFG_BIT
 0x02

177 
	#HAL_UART_Px_RTS
 0x20

178 
	#HAL_UART_Px_CTS
 0x10

179 
	#HAL_UART_Px_RX_TX
 0xC0

180 
	#HAL_UART_Px_RX
 0x80

182 

	)

184 
	#HAL_UART_MSECS_TO_TICKS
 33

	)

186 #i‡!
deföed
 
HAL_UART_ISR_RX_MAX


187 
	#HAL_UART_ISR_RX_MAX
 128

	)

189 #i‡!
deföed
 
HAL_UART_ISR_TX_MAX


190 
	#HAL_UART_ISR_TX_MAX
 
HAL_UART_ISR_RX_MAX


	)

192 #i‡!
deföed
 
HAL_UART_ISR_HIGH


193 
	#HAL_UART_ISR_HIGH
 (
HAL_UART_ISR_RX_MAX
 / 2 - 16)

	)

195 #i‡!
deföed
 
HAL_UART_ISR_IDLE


196 
	#HAL_UART_ISR_IDLE
 (0 * 
HAL_UART_MSECS_TO_TICKS
)

	)

203 #i‡
HAL_UART_ISR_RX_MAX
 <= 256

204 
uöt8
 
	trxIdx_t
;

206 
uöt16
 
	trxIdx_t
;

209 #i‡
HAL_UART_ISR_TX_MAX
 <= 256

210 
uöt8
 
	ttxIdx_t
;

212 
uöt16
 
	ttxIdx_t
;

217 
uöt8
 
	mrxBuf
[
HAL_UART_ISR_RX_MAX
];

218 
rxIdx_t
 
	mrxHód
;

219 vﬁ©ûê
rxIdx_t
 
	mrxTaû
;

220 
uöt8
 
	mrxTick
;

221 
uöt8
 
	mrxShdw
;

223 
uöt8
 
	mtxBuf
[
HAL_UART_ISR_TX_MAX
];

224 vﬁ©ûê
txIdx_t
 
	mtxHód
;

225 
txIdx_t
 
	mtxTaû
;

226 
uöt8
 
	mtxMT
;

228 
hÆUARTCBack_t
 
	mu¨tCB
;

229 } 
	tu¨tISRCfg_t
;

235 
u¨tISRCfg_t
 
	gi§Cfg
;

241 
HÆUARTInôISR
();

242 
HÆUARTO≥nISR
(
hÆUARTCfg_t
 *
c⁄fig
);

243 
uöt16
 
HÆUARTRódISR
(
uöt8
 *
buf
, uöt16 
Àn
);

244 
uöt16
 
HÆUARTWrôeISR
(
uöt8
 *
buf
, uöt16 
Àn
);

245 
HÆUARTPﬁlISR
();

246 
uöt16
 
HÆUARTRxAvaûISR
();

247 
uöt8
 
HÆUARTBusyISR
();

248 
HÆUARTSu•ídISR
();

249 
HÆUARTResumeISR
();

260 
	$HÆUARTInôISR
()

263 
P2DIR
 &~
P2DIR_PRIPO
;

264 
P2DIR
 |
HAL_UART_PRIPO
;

266 #i‡(
HAL_UART_ISR
 == 1)

267 
PERCFG
 &~
HAL_UART_PERCFG_BIT
;

269 
PERCFG
 |
HAL_UART_PERCFG_BIT
;

271 
PxSEL
 |
HAL_UART_Px_RX_TX
;

272 
ADCCFG
 &~
HAL_UART_Px_RX_TX
;

273 
UxCSR
 = 
CSR_MODE
;

274 
UxUCR
 = 
UCR_FLUSH
;

275 
	}
}

286 
	$HÆUARTO≥nISR
(
hÆUARTCfg_t
 *
c⁄fig
)

288 
i§Cfg
.
u¨tCB
 = 
c⁄fig
->
ˇŒBackFunc
;

290 
	`HAL_UART_ASSERT
((
c⁄fig
->
baudR©e
 =
HAL_UART_BR_9600
) ||

291 (
c⁄fig
->
baudR©e
 =
HAL_UART_BR_19200
) ||

292 (
c⁄fig
->
baudR©e
 =
HAL_UART_BR_38400
) ||

293 (
c⁄fig
->
baudR©e
 =
HAL_UART_BR_57600
) ||

294 (
c⁄fig
->
baudR©e
 =
HAL_UART_BR_115200
));

296 i‡(
c⁄fig
->
baudR©e
 =
HAL_UART_BR_57600
 ||

297 
c⁄fig
->
baudR©e
 =
HAL_UART_BR_115200
)

299 
UxBAUD
 = 216;

303 
UxBAUD
 = 59;

306 
c⁄fig
->
baudR©e
)

308 
HAL_UART_BR_9600
:

309 
UxGCR
 = 8;

311 
HAL_UART_BR_19200
:

312 
UxGCR
 = 9;

314 
HAL_UART_BR_38400
:

315 
HAL_UART_BR_57600
:

316 
UxGCR
 = 10;

320 
UxGCR
 = 11;

325 i‡(
c⁄fig
->
ÊowC⁄åﬁ
)

327 
UxUCR
 = 
UCR_FLOW
 | 
UCR_STOP
;

328 
PxSEL
 |
HAL_UART_Px_RTS
 | 
HAL_UART_Px_CTS
;

329 
PxOUT
 &~
HAL_UART_Px_RTS
;

330 
PxDIR
 |
HAL_UART_Px_RTS
;

334 
UxUCR
 = 
UCR_STOP
;

337 
URXxIE
 = 1;

338 
UTXxIF
 = 1;

339 
UxCSR
 = (
CSR_MODE
 | 
CSR_RE
);

340 
	}
}

352 
uöt16
 
	$HÆUARTRódISR
(
uöt8
 *
buf
, 
uöt16
 
Àn
)

354 
uöt16
 
˙t
 = 0;

356 (
i§Cfg
.
rxHód
 !i§Cfg.
rxTaû
Ë&& (
˙t
 < 
Àn
))

358 *
buf
++ = 
i§Cfg
.
rxBuf
[i§Cfg.
rxHód
++];

359 i‡(
i§Cfg
.
rxHód
 >
HAL_UART_ISR_RX_MAX
)

361 
i§Cfg
.
rxHód
 = 0;

363 
˙t
++;

366  
˙t
;

367 
	}
}

379 
uöt16
 
	$HÆUARTWrôeISR
(
uöt8
 *
buf
, 
uöt16
 
Àn
)

381 
uöt16
 
˙t
;

384 i‡(
	`HAL_UART_ISR_TX_AVAIL
(Ë< 
Àn
)

389 
˙t
 = 0; c¡ < 
Àn
; cnt++)

391 
i§Cfg
.
txBuf
[i§Cfg.
txTaû
] = *
buf
++;

392 
i§Cfg
.
txMT
 = 0;

394 i‡(
i§Cfg
.
txTaû
 >
HAL_UART_ISR_TX_MAX
-1)

396 
i§Cfg
.
txTaû
 = 0;

400 
i§Cfg
.
txTaû
++;

404 
IEN2
 |
UTXxIE
;

407  
˙t
;

408 
	}
}

419 
	$HÆUARTPﬁlISR
()

421 
uöt16
 
˙t
 = 
	`HAL_UART_ISR_RX_AVAIL
();

422 
uöt8
 
evt
 = 0;

424 i‡(
i§Cfg
.
rxTick
)

427 
uöt8
 
de¸
 = 
ST0
 - 
i§Cfg
.
rxShdw
;

429 i‡(
i§Cfg
.
rxTick
 > 
de¸
)

431 
i§Cfg
.
rxTick
 -
de¸
;

435 
i§Cfg
.
rxTick
 = 0;

438 
i§Cfg
.
rxShdw
 = 
ST0
;

440 i‡(
˙t
 >
HAL_UART_ISR_RX_MAX
-1)

442 
evt
 = 
HAL_UART_RX_FULL
;

444 i‡(
˙t
 >
HAL_UART_ISR_HIGH
)

446 
evt
 = 
HAL_UART_RX_ABOUT_FULL
;

448 i‡(
˙t
 && !
i§Cfg
.
rxTick
)

450 
evt
 = 
HAL_UART_RX_TIMEOUT
;

453 i‡(
i§Cfg
.
txMT
)

455 
i§Cfg
.
txMT
 = 0;

456 
evt
 |
HAL_UART_TX_EMPTY
;

459 i‡(
evt
 && (
i§Cfg
.
u¨tCB
 !
NULL
))

461 
i§Cfg
.
	`u¨tCB
(
HAL_UART_ISR
-1, 
evt
);

463 
	}
}

474 
uöt16
 
	$HÆUARTRxAvaûISR
()

476  
	`HAL_UART_ISR_RX_AVAIL
();

477 
	}
}

488 
uöt8
 
	$HÆUARTBusyISR
( )

490  ((!(
UxCSR
 & (
CSR_ACTIVE
 | 
CSR_RX_BYTE
))) &&

491 (
i§Cfg
.
rxHód
 =i§Cfg.
rxTaû
Ë&& (i§Cfg.
txHód
 =i§Cfg.
txTaû
));

492 
	}
}

503 
	$HÆUARTSu•ídISR
( )

505 #i‡
deföed
 
POWER_SAVING


506 
UxCSR
 = 
CSR_MODE
;

508 i‡(
UxUCR
 & 
UCR_FLOW
)

510 
PxOUT
 |
HAL_UART_Px_RTS
;

511 
PxIFG
 = (
HAL_UART_Px_CTS
 ^ 0xFF);

512 
PxIEN
 |
HAL_UART_Px_CTS
;

516 
PxIFG
 = (
HAL_UART_Px_RX
 ^ 0xFF);

517 
PxIEN
 |
HAL_UART_Px_RX
;

520 #i‡
deföed
 
HAL_UART_GPIO_ISR


521 
PxIF
 = 0;

522 
PICTL
 |
PICTL_BIT
;

523 
IENx
 |
IEN_BIT
;

526 
	}
}

537 
	$HÆUARTResumeISR
( )

539 #i‡
deföed
 
POWER_SAVING


540 #i‡
deföed
 
HAL_UART_GPIO_ISR


541 
IENx
 &(
IEN_BIT
 ^ 0xFF);

544 i‡(
UxUCR
 & 
UCR_FLOW
)

546 
PxIEN
 &(
HAL_UART_Px_CTS
 ^ 0xFF);

547 
PxOUT
 &(
HAL_UART_Px_RTS
 ^ 0xFF);

551 
PxIEN
 &(
HAL_UART_Px_RX
 ^ 0xFF);

554 
UxUCR
 |
UCR_FLUSH
;

555 
UxCSR
 = (
CSR_MODE
 | 
CSR_RE
);

557 
	}
}

568 #i‡(
HAL_UART_ISR
 == 1)

569 
	$HAL_ISR_FUNCTION
–
hÆU¨t0RxI§
, 
URX0_VECTOR
 )

571 
	$HAL_ISR_FUNCTION
–
hÆU¨t1RxI§
, 
URX1_VECTOR
 )

574 
	`HAL_ENTER_ISR
();

576 
uöt8
 
tmp
 = 
UxDBUF
;

577 
i§Cfg
.
rxBuf
[i§Cfg.
rxTaû
] = 
tmp
;

580 i‡(
i§Cfg
.
rxHód
 =i§Cfg.
rxTaû
)

582 
i§Cfg
.
rxShdw
 = 
ST0
;

585 i‡(++
i§Cfg
.
rxTaû
 >
HAL_UART_ISR_RX_MAX
)

587 
i§Cfg
.
rxTaû
 = 0;

590 
i§Cfg
.
rxTick
 = 
HAL_UART_ISR_IDLE
;

592 
	`HAL_EXIT_ISR
();

593 
	}
}

604 #i‡(
HAL_UART_ISR
 == 1)

605 
	$HAL_ISR_FUNCTION
–
hÆU¨t0TxI§
, 
UTX0_VECTOR
 )

607 
	$HAL_ISR_FUNCTION
–
hÆU¨t1TxI§
, 
UTX1_VECTOR
 )

610 
	`HAL_ENTER_ISR
();

612 i‡(
i§Cfg
.
txHód
 =i§Cfg.
txTaû
)

614 
IEN2
 &~
UTXxIE
;

615 
i§Cfg
.
txMT
 = 1;

619 
UTXxIF
 = 0;

620 
UxDBUF
 = 
i§Cfg
.
txBuf
[i§Cfg.
txHód
++];

622 i‡(
i§Cfg
.
txHód
 >
HAL_UART_ISR_TX_MAX
)

624 
i§Cfg
.
txHód
 = 0;

628 
	`HAL_EXIT_ISR
();

629 
	}
}

631 #i‡(
deföed
 
POWER_SAVING
 && deföed 
HAL_UART_GPIO_ISR
)

641 #i‡(
HAL_UART_ISR
 == 1)

642 
	$HAL_ISR_FUNCTION
(
p‹t0I§
, 
P0INT_VECTOR
)

644 
	$HAL_ISR_FUNCTION
(
p‹t1I§
, 
P1INT_VECTOR
)

647 
	`HAL_ENTER_ISR
();

649 
	`HÆUARTResume
();

650 i‡(
dmaCfg
.
u¨tCB
 !
NULL
)

652 
dmaCfg
.
	`u¨tCB
(
HAL_UART_DMA
-1, 
HAL_UART_RX_WAKEUP
);

654 
PxIFG
 = 0;

655 
PxIF
 = 0;

657 
	`HAL_EXIT_ISR
();

658 
	}
}

	@../../../../Components/hal/target/CC2540USB/_hal_uart_spi.c

68 
	~<°rög.h
>

70 
	~"hÆ_as£π.h
"

71 
	~"hÆ_bﬂrd.h
"

72 
	~"hÆ_defs.h
"

73 
	~"hÆ_drivîs.h
"

74 
	~"hÆ_dma.h
"

75 
	~"hÆ_mcu.h
"

76 
	~"hÆ_ty≥s.h
"

77 
	~"hÆ_u¨t.h
"

78 #i‡
deföed
 
POWER_SAVING


79 
	~"OSAL.h
"

80 
	~"OSAL_PwrMgr.h
"

91 #i‡!
deföed
 
HAL_SPI_CH_RX


92 
	#HAL_SPI_CH_RX
 
HAL_DMA_CH_RX


	)

94 #i‡!
deföed
 
HAL_SPI_CH_TX


95 
	#HAL_SPI_CH_TX
 
HAL_DMA_CH_TX


	)

101 #i‡!
deföed
 
HAL_SPI_ON_UART_BUFS


102 
	#HAL_SPI_ON_UART_BUFS
 
FALSE


	)

105 
	#SPI_MAX_PKT_LEN
 256

	)

106 
	#SPI_MAX_DAT_LEN
 (
SPI_MAX_PKT_LEN
 - 
SPI_FRM_LEN
)

	)

108 
	#SPI_SOF
 0xFE

	)

111 
	#SPI_HDR_LEN
 1

	)

113 
	#SPI_FRM_LEN
 (2 + 
SPI_HDR_LEN
)

	)

115 
	#SPI_SOF_IDX
 0

	)

116 
	#SPI_HDR_IDX
 1

	)

117 
	#SPI_LEN_IDX
 1

	)

118 
	#SPI_DAT_IDX
 2

	)

121 
	#CSR_MODE
 0x80

	)

122 
	#CSR_RE
 0x40

	)

123 
	#CSR_SLAVE
 0x20

	)

124 
	#CSR_FE
 0x10

	)

125 
	#CSR_ERR
 0x08

	)

126 
	#CSR_RX_BYTE
 0x04

	)

127 
	#CSR_TX_BYTE
 0x02

	)

128 
	#CSR_ACTIVE
 0x01

	)

131 
	#UCR_FLUSH
 0x80

	)

132 
	#UCR_FLOW
 0x40

	)

133 
	#UCR_D9
 0x20

	)

134 
	#UCR_BIT9
 0x10

	)

135 
	#UCR_PARITY
 0x08

	)

136 
	#UCR_SPB
 0x04

	)

137 
	#UCR_STOP
 0x02

	)

138 
	#UCR_START
 0x01

	)

140 
	#P2DIR_PRIPO
 0xC0

	)

142 
	#HAL_DMA_U0DBUF
 0x70C1

	)

143 
	#HAL_DMA_U1DBUF
 0x70F9

	)

145 #unde‡
UxCSR


146 #unde‡
UxUCR


147 #unde‡
UxDBUF


148 #unde‡
UxBAUD


149 #unde‡
UxGCR


150 #i‡ (
HAL_UART_SPI
 == 1)

151 
	#UxCSR
 
U0CSR


	)

152 
	#UxUCR
 
U0UCR


	)

153 
	#UxDBUF
 
U0DBUF


	)

154 
	#UxBAUD
 
U0BAUD


	)

155 
	#UxGCR
 
U0GCR


	)

156 #ñi‡ (
HAL_UART_SPI
 == 2)

157 
	#UxCSR
 
U1CSR


	)

158 
	#UxUCR
 
U1UCR


	)

159 
	#UxDBUF
 
U1DBUF


	)

160 
	#UxBAUD
 
U1BAUD


	)

161 
	#UxGCR
 
U1GCR


	)

164 #unde‡
PxSEL


165 #unde‡
HAL_UART_PERCFG_BIT


166 #unde‡
HAL_UART_PRIPO


167 #unde‡
HAL_UART_Px_SEL_S


168 #unde‡
HAL_UART_Px_SEL_M


169 #i‡ (
HAL_UART_SPI
 == 1)

170 
	#PxSEL
 
P0SEL


	)

171 
	#HAL_UART_PERCFG_BIT
 0x01

	)

172 
	#HAL_UART_PRIPO
 0x00

	)

173 
	#HAL_UART_Px_SEL_S
 0x3C

	)

174 
	#HAL_UART_Px_SEL_M
 0x2C

	)

175 #ñi‡ (
HAL_UART_SPI
 == 2)

176 
	#PxSEL
 
P1SEL


	)

177 
	#HAL_UART_PERCFG_BIT
 0x02

	)

178 
	#HAL_UART_PRIPO
 0x40

	)

179 
	#HAL_UART_Px_SEL_S
 0xF0

	)

180 
	#HAL_UART_Px_SEL_M
 0xE0

	)

183 #unde‡
DMA_PAD


184 #unde‡
DMA_UxDBUF


185 #unde‡
DMATRIG_RX


186 #unde‡
DMATRIG_TX


187 #i‡ (
HAL_UART_SPI
 == 1)

188 
	#DMA_PAD
 
U0BAUD


	)

189 
	#DMA_UxDBUF
 
HAL_DMA_U0DBUF


	)

190 
	#DMATRIG_RX
 
HAL_DMA_TRIG_URX0


	)

191 
	#DMATRIG_TX
 
HAL_DMA_TRIG_UTX0


	)

192 #ñi‡ (
HAL_UART_SPI
 == 2)

193 
	#DMA_PAD
 
U1BAUD


	)

194 
	#DMA_UxDBUF
 
HAL_DMA_U1DBUF


	)

195 
	#DMATRIG_RX
 
HAL_DMA_TRIG_URX1


	)

196 
	#DMATRIG_TX
 
HAL_DMA_TRIG_UTX1


	)

199 #unde‡
PxIEN


200 #unde‡
PxIFG


201 #unde‡
PxIF


202 #unde‡
PICTL_BIT


203 #unde‡
IENx


204 #unde‡
IEN_BIT


208 #i‡
deföed
 
HAL_SPI_MASTER


211 
	#PxIEN
 
P0IEN


	)

212 
	#PxIFG
 
P0IFG


	)

213 
	#PxIF
 
P0IF


	)

214 
	#SPI_RDYIn
 
P0_1


	)

215 
	#SPI_RDYIn_BIT
 
	`BV
(1)

	)

217 
	#PICTL_BIT
 
	`BV
(0)

	)

218 
	#IENx
 
IEN1


	)

219 
	#IEN_BIT
 
	`BV
(5)

	)

221 #ñi‡ (
HAL_UART_SPI
 == 2)

222 
	#PxIEN
 
P1IEN


	)

223 
	#PxIFG
 
P1IFG


	)

224 
	#PxIF
 
P1IF


	)

225 
	#SPI_RDYIn
 
P1_4


	)

226 
	#SPI_RDYIn_BIT
 
	`BV
(4)

	)

228 
	#PICTL_BIT
 
	`BV
(2)

	)

229 
	#IENx
 
IEN2


	)

230 
	#IEN_BIT
 
	`BV
(4)

	)

232 #ñi‡ (
HAL_UART_SPI
 == 1)

233 
	#PxIEN
 
P0IEN


	)

234 
	#PxIFG
 
P0IFG


	)

235 
	#PxIF
 
P0IF


	)

236 
	#SPI_RDYIn
 
P0_4


	)

237 
	#SPI_RDYIn_BIT
 
	`BV
(4)

	)

239 
	#PICTL_BIT
 
	`BV
(0)

	)

240 
	#IENx
 
IEN1


	)

241 
	#IEN_BIT
 
	`BV
(5)

	)

244 #unde‡
PxDIR


245 #i‡
deföed
 
HAL_SPI_MASTER


246 #i‡(
HAL_UART_SPI
 == 2)

248 
	#PxDIR
 
P1DIR


	)

249 
	#SPI_RDYOut
 
P1_4


	)

250 
	#SPI_RDYOut_BIT
 
	`BV
(4)

	)

251 #ñi‡–
HAL_UART_SPI
 == 1)

253 
	#PxDIR
 
P0DIR


	)

254 
	#SPI_RDYOut
 
P0_4


	)

255 
	#SPI_RDYOut_BIT
 
	`BV
(4)

	)

258 #ñi‡ (
HAL_UART_SPI
 == 2)

259 
	#PxDIR
 
P0DIR


	)

260 
	#SPI_RDYOut
 
P0_5


	)

261 
	#SPI_RDYOut_BIT
 
	`BV
(5)

	)

262 #ñi‡ (
HAL_UART_SPI
 == 1)

263 
	#PxDIR
 
P1DIR


	)

264 
	#SPI_RDYOut
 
P1_1


	)

265 
	#SPI_RDYOut_BIT
 
	`BV
(1)

	)

273 #i‡(
SPI_MAX_PKT_LEN
 <= 256)

274 
uöt8
 
	t•iLí_t
;

276 
uöt16
 
	t•iLí_t
;

281 
	mSPIRX_STATE_SOF
,

282 
	mSPIRX_STATE_LEN
,

283 
	mSPIRX_STATE_DATA
,

284 
	mSPIRX_STATE_FCS


285 } 
	t•iRxSã_t
;

292 #i‡
SPI_MAX_PKT_LEN
 == 256

293 
	#SPI_LEN_T_INCR
(
LEN
Ë(LEN)++

	)

295 
	#SPI_LEN_T_INCR
(
LEN
Ë
	`°
 ( \

296 i‡(++(
LEN
Ë>
SPI_MAX_PKT_LEN
) \

298 (
LEN
) = 0; \

300 )

	)

303 
	#SPI_CLR_RX_BYTE
(
IDX
Ë(
•iRxBuf
[(IDX)] = 
	`BUILD_UINT16
(0, (
DMA_PAD
 ^ 0xFF)))

	)

304 
	#SPI_GET_RX_BYTE
(
IDX
Ë(*(vﬁ©ûê
uöt8
 *)(
•iRxBuf
+(IDX)))

	)

305 
	#SPI_NEW_RX_BYTE
(
IDX
Ë((
uöt8
)
DMA_PAD
 =
	`HI_UINT16
(
•iRxBuf
[(IDX)]))

	)

307 
	#SPI_DAT_LEN
(
PBUF
Ë((PBUF)[
SPI_LEN_IDX
])

	)

308 
	#SPI_PKT_LEN
(
PBUF
Ë(
	`SPI_DAT_LEN
((PBUF)Ë+ 
SPI_FRM_LEN
)

	)

310 
	#SPI_RDY_IN
(Ë(
SPI_RDYIn
 =0)

	)

311 
	#SPI_RDY_OUT
(Ë(
SPI_RDYOut
 =0)

	)

313 #i‡
deföed
 
HAL_SPI_MASTER


314 
	#SPI_CLR_CSn_OUT
(Ë(
SPI_RDYOut
 = 1)

	)

315 
	#SPI_SET_CSn_OUT
(Ë(
SPI_RDYOut
 = 0)

	)

317 
	#SPI_CLOCK_RX
(
CNT
Ë
	`°
 ( \

318 
	`SPI_SET_CSn_OUT
(); \

320 
•iLí_t
 
˙t
 = 0; c¡ < (
CNT
); cnt++) \

322 
UxDBUF
 = 0; \

323 
UxCSR
 & 
CSR_ACTIVE
); \

326 
	`SPI_CLR_CSn_OUT
(); \

327 )

	)

328 
	#SPI_CLR_RDY_OUT
(Ë
	`SPI_CLR_CSn_OUT
()

	)

330 #ñi‡!
deföed
 
HAL_SPI_MASTER


331 
	#SPI_CLR_RDY_OUT
(Ë(
SPI_RDYOut
 = 1)

	)

332 
	#SPI_SET_RDY_OUT
(Ë(
SPI_RDYOut
 = 0)

	)

335 
	#SPI_RX_RDY
(Ë(
•iRxHód
 !
•iRxTaû
)

	)

344 
__no_öô
 
uöt16
 
	g•iRxBuf
[
SPI_MAX_PKT_LEN
];

345 
__no_öô
 
uöt8
 
	g•iRxD©
[
SPI_MAX_PKT_LEN
];

346 
__no_öô
 
uöt8
 
	g•iTxPkt
[
SPI_MAX_PKT_LEN
];

348 
•iRxSã_t
 
	g•iRxPktSèã
;

349 
•iLí_t
 
	g•iRxIdx
;

350 
•iLí_t
 
	g•iRxC¡
;

351 
•iLí_t
 
	g•iRxLí
;

352 
•iLí_t
 
	g•iRxFcs
;

353 
•iLí_t
 
	g•iRxHód
;

354 
•iLí_t
 
	g•iRxTaû
;

355 
•iLí_t
 
	g•iRxTemp
;

356 vﬁ©ûê
•iLí_t
 
	g•iTxLí
;

358 
hÆUARTCBack_t
 
	g•iCB
;

360 vﬁ©ûê
uöt8
 
	g•iRdyI§
;

361 #ifde‡
POWER_SAVING


362 
boﬁ
 
	gpktFound
;

365 
•iLí_t
 
	gdbgFcsByã
;

366 #ifde‡
RBA_UART_TO_SPI


367 
uöt16
 
	gbadFcsPktCou¡
 = 0;

375 
HÆUART_DMAI§SPI
();

381 
HÆUARTPﬁlSPI
();

382 
uöt8
 
•iCÆcFcs
(uöt8 *
pBuf
);

383 
•iP¨£Rx
();

399 
	$HÆUARTInôSPI
()

401 #i‡(
HAL_UART_SPI
 == 1)

402 
PERCFG
 &~
HAL_UART_PERCFG_BIT
;

404 
PERCFG
 |
HAL_UART_PERCFG_BIT
;

406 #i‡
deföed
 
HAL_SPI_MASTER


407 
PxSEL
 |
HAL_UART_Px_SEL_M
;

408 
UxCSR
 = 0;

409 
UxGCR
 = 15;

410 
UxBAUD
 = 255;

411 #ñi‡!
deföed
 
HAL_SPI_MASTER


412 
PxSEL
 |
HAL_UART_Px_SEL_S
;

413 
UxCSR
 = 
CSR_SLAVE
;

415 
UxUCR
 = 
UCR_FLUSH
;

416 
UxGCR
 |
	`BV
(5);

418 
P2DIR
 &~
P2DIR_PRIPO
;

419 
P2DIR
 |
HAL_UART_PRIPO
;

422 
PxIEN
 |
SPI_RDYIn_BIT
;

423 
PICTL
 |
PICTL_BIT
;

425 
	`SPI_CLR_RDY_OUT
();

426 
PxDIR
 |
SPI_RDYOut_BIT
;

429 
hÆDMADesc_t
 *
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_SPI_CH_TX
 );

432 
	`HAL_DMA_ABORT_CH
–
HAL_SPI_CH_TX
 );

435 
	`HAL_DMA_SET_DEST
–
ch
, 
DMA_UxDBUF
 );

438 
	`HAL_DMA_SET_VLEN
–
ch
, 
HAL_DMA_VLEN_USE_LEN
 );

441 
	`HAL_DMA_SET_WORD_SIZE
–
ch
, 
HAL_DMA_WORDSIZE_BYTE
 );

444 
	`HAL_DMA_SET_TRIG_MODE
–
ch
, 
HAL_DMA_TMODE_SINGLE
 );

445 
	`HAL_DMA_SET_TRIG_SRC
–
ch
, 
DMATRIG_TX
 );

448 
	`HAL_DMA_SET_SRC_INC
–
ch
, 
HAL_DMA_SRCINC_1
 );

449 
	`HAL_DMA_SET_SOURCE
–
ch
, 
•iTxPkt
 );

452 
	`HAL_DMA_SET_DST_INC
–
ch
, 
HAL_DMA_DSTINC_0
 );

455 
	`HAL_DMA_SET_IRQ
–
ch
, 
HAL_DMA_IRQMASK_ENABLE
 );

458 
	`HAL_DMA_SET_M8
–
ch
, 
HAL_DMA_M8_USE_8_BITS
 );

461 
	`HAL_DMA_SET_PRIORITY
–
ch
, 
HAL_DMA_PRI_HIGH
 );

464 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_SPI_CH_RX
 );

467 
	`HAL_DMA_ABORT_CH
–
HAL_SPI_CH_RX
 );

470 
	`HAL_DMA_SET_SOURCE
–
ch
, 
DMA_UxDBUF
 );

473 
	`HAL_DMA_SET_VLEN
–
ch
, 
HAL_DMA_VLEN_USE_LEN
 );

482 
	`HAL_DMA_SET_WORD_SIZE
–
ch
, 
HAL_DMA_WORDSIZE_WORD
 );

485 
	`HAL_DMA_SET_TRIG_MODE
–
ch
, 
HAL_DMA_TMODE_SINGLE_REPEATED
 );

486 
	`HAL_DMA_SET_TRIG_SRC
–
ch
, 
DMATRIG_RX
 );

489 
	`HAL_DMA_SET_SRC_INC
–
ch
, 
HAL_DMA_SRCINC_0
 );

492 
	`HAL_DMA_SET_DST_INC
–
ch
, 
HAL_DMA_DSTINC_1
 );

493 
	`HAL_DMA_SET_DEST
–
ch
, 
•iRxBuf
 );

494 
	`HAL_DMA_SET_LEN
–
ch
, 
SPI_MAX_PKT_LEN
 );

497 
	`HAL_DMA_SET_IRQ
–
ch
, 
HAL_DMA_IRQMASK_DISABLE
 );

500 
	`HAL_DMA_SET_M8
–
ch
, 
HAL_DMA_M8_USE_8_BITS
 );

503 
	`HAL_DMA_SET_PRIORITY
–
ch
, 
HAL_DMA_PRI_HIGH
 );

505 vﬁ©ûê
uöt8
 
dummy
 = *(vﬁ©ûêuöt8 *)
DMA_UxDBUF
;

506 
	`HAL_DMA_CLEAR_IRQ
(
HAL_SPI_CH_RX
);

507 
	`HAL_DMA_ARM_CH
(
HAL_SPI_CH_RX
);

508 ()
	`mem£t
(
•iRxBuf
, (
DMA_PAD
 ^ 0xFF), 
SPI_MAX_PKT_LEN
 * (
uöt16
));

509 
	}
}

526 
	$HÆUARTO≥nSPI
(
hÆUARTCfg_t
 *
c⁄fig
)

528 
•iCB
 = 
c⁄fig
->
ˇŒBackFunc
;

530 
UxCSR
 |
CSR_RE
;

532 
PxIFG
 = 0;

533 
PxIF
 = 0;

534 
IENx
 |
IEN_BIT
;

536 ()
dbgFcsByã
;

537 
	}
}

555 
•iLí_t
 
	$HÆUARTRódSPI
(
uöt8
 *
buf
, 
•iLí_t
 
Àn
)

557 
•iLí_t
 
˙t
 = 0; c¡ < 
Àn
; cnt++)

559 i‡(
•iRxHód
 =
•iRxTaû
)

561 
Àn
 = 
˙t
;

565 *
buf
++ = 
•iRxD©
[
•iRxHód
];

566 
	`SPI_LEN_T_INCR
(
•iRxHód
);

569  
Àn
;

570 
	}
}

588 
•iLí_t
 
	$HÆUARTWrôeSPI
(
uöt8
 *
buf
, 
•iLí_t
 
Àn
)

590 i‡(
•iTxLí
 != 0)

595 i‡(
Àn
 > 
SPI_MAX_DAT_LEN
)

597 
Àn
 = 
SPI_MAX_DAT_LEN
;

600 
•iTxLí
 = 
Àn
;

602 #i‡
deföed
 
HAL_SPI_MASTER


604 
•iRdyI§
 = 0;

605 
•iTxPkt
[
SPI_LEN_IDX
] = 
Àn
;

606 ()
	`mem˝y
(
•iTxPkt
 + 
SPI_DAT_IDX
, 
buf
, 
Àn
);

608 
	`•iCÆcFcs
(
•iTxPkt
);

609 
•iTxPkt
[
SPI_SOF_IDX
] = 
SPI_SOF
;

611 
hÆDMADesc_t
 *
ch
 = 
	`HAL_DMA_GET_DESC1234
(
HAL_SPI_CH_TX
);

612 
	`HAL_DMA_SET_LEN
(
ch
, 
	`SPI_PKT_LEN
(
•iTxPkt
));

615 
	`HAL_DMA_ABORT_CH
–
HAL_SPI_CH_RX
 );

616 
•iRxIdx
 = 0;

617 ()
	`mem£t
(
•iRxBuf
, (
DMA_PAD
 ^ 0xFF), 
SPI_MAX_PKT_LEN
 * (
uöt16
));

619 
	`HAL_DMA_ARM_CH
(
HAL_SPI_CH_RX
);

621 
	`asm
("NOP");ásm("NOP");ásm("NOP");ásm("NOP");ásm("NOP");

622 
	`asm
("NOP");ásm("NOP");ásm("NOP");ásm("NOP");

625 
	`HAL_DMA_ABORT_CH
–
HAL_SPI_CH_TX
 );

626 
	`HAL_DMA_ARM_CH
(
HAL_SPI_CH_TX
);

628 
	`asm
("NOP");ásm("NOP");ásm("NOP");ásm("NOP");ásm("NOP");

629 
	`asm
("NOP");ásm("NOP");ásm("NOP");ásm("NOP");

631 
	`SPI_SET_CSn_OUT
();

633 (!
	`SPI_RDY_IN
()Ë&& (!
•iRdyI§
) );

635 
	`HAL_DMA_MAN_TRIGGER
(
HAL_SPI_CH_TX
);

637 #ñi‡!
deföed
 
HAL_SPI_MASTER


639 #ifde‡
POWER_SAVING


641 
	`CLEAR_SLEEP_MODE
();

644 
	`SPI_CLR_RDY_OUT
();

646 
	`HAL_DMA_ARM_CH
(
HAL_SPI_CH_RX
);

648 
	`asm
("NOP");ásm("NOP");ásm("NOP");ásm("NOP");ásm("NOP");

649 
	`asm
("NOP");ásm("NOP");ásm("NOP");ásm("NOP");

651 i‡–
	`SPI_RDY_IN
() )

653 
	`SPI_SET_RDY_OUT
();

656 
•iTxPkt
[
SPI_LEN_IDX
] = 
Àn
;

657 ()
	`mem˝y
(
•iTxPkt
 + 
SPI_DAT_IDX
, 
buf
, 
Àn
);

659 
	`•iCÆcFcs
(
•iTxPkt
);

660 
•iTxPkt
[
SPI_SOF_IDX
] = 
SPI_SOF
;

662 
hÆDMADesc_t
 *
ch
 = 
	`HAL_DMA_GET_DESC1234
(
HAL_SPI_CH_TX
);

663 
	`HAL_DMA_SET_LEN
(
ch
, 
	`SPI_PKT_LEN
(
•iTxPkt
) + 1);

664 
	`HAL_DMA_ARM_CH
(
HAL_SPI_CH_TX
);

666 
	`asm
("NOP");ásm("NOP");ásm("NOP");ásm("NOP");ásm("NOP");

667 
	`asm
("NOP");ásm("NOP");ásm("NOP");ásm("NOP");

669 
	`SPI_SET_RDY_OUT
();

672  
Àn
;

673 
	}
}

690 
	$HÆUARTPﬁlSPI
()

692 #ifde‡
HAL_SPI_MASTER


694 #i‡
deföed
 
POWER_SAVING


695 
pktFound
 = 
FALSE
;

697 i‡––
•iRdyI§
 ) || (
	`SPI_RDY_IN
()) )

699 
	`CLEAR_SLEEP_MODE
();

701 #i‡
deföed
 
HAL_SBL_BOOT_CODE


702 if(!
•iTxLí
)

704 
UxDBUF
 = 0x00;

706 
	`HAL_DMA_ARM_CH
(
HAL_SPI_CH_RX
);

708 
	`asm
("NOP");ásm("NOP");ásm("NOP");ásm("NOP");

709 
	`asm
("NOP");ásm("NOP");ásm("NOP");ásm("NOP");

710 
	`asm
("NOP");

712 
hÆI¡Sèã_t
 
ötSèã
;

713 
	`HAL_ENTER_CRITICAL_SECTION
(
ötSèã
);

715 
	`SPI_SET_RDY_OUT
();

716 
	`SPI_CLR_RDY_OUT
();

718 
	`HAL_EXIT_CRITICAL_SECTION
(
ötSèã
);

721 #i‡
deföed
 
POWER_SAVING


722 
pktFound
 = 
TRUE
;

727 #i‡
deföed
 
HAL_SPI_MASTER


728 i‡(!
•iTxLí
)

730 i‡((!
•iTxLí
Ë&& (!
	`SPI_RDY_IN
()))

733 
	`SPI_CLR_RDY_OUT
();

734 
	`•iP¨£Rx
();

737 #i‡
deföed
 
HAL_SPI_MASTER


738 if–
	`SPI_RX_RDY
())

740 i‡(
	`SPI_RX_RDY
(Ë&& !
•iTxLí
)

743 i‡(
•iCB
 !
NULL
)

745 
	`•iCB
((
HAL_UART_SPI
 - 1), 
HAL_UART_RX_TIMEOUT
);

749 i‡(!
•iTxLí
)

751 i‡–
	`SPI_RDY_OUT
 () )

753 
	`SPI_CLR_RDY_OUT
();

757 #i‡
deföed
 
POWER_SAVING


758 i‡–
	`SPI_RDY_IN
()|| 
	`SPI_RX_RDY
(Ë|| 
•iRxLí
 || 
•iTxLí
 || 
•iRdyI§
 || 
pktFound
 || 
	`SPI_RDY_OUT
() )

760 
	`CLEAR_SLEEP_MODE
();

762 i‡–(!
pktFound
Ë&& (!
	`SPI_NEW_RX_BYTE
(
•iRxIdx
)) )

764 
PxIEN
 |
SPI_RDYIn_BIT
;

765 
	`SPI_CLR_RDY_OUT
();

768 
•iRdyI§
 = 0;

770 
	}
}

787 
•iLí_t
 
	$HÆUARTRxAvaûSPI
()

789  (
•iRxTaû
 > 
•iRxHód
Ë? (•iRxTaû-•iRxHódË: (•iRxTaû+(
SPI_MAX_PKT_LEN
-spiRxHead));

790 
	}
}

807 
uöt8
 
	$•iCÆcFcs
(
uöt8
 *
pBuf
)

809 
•iLí_t
 
Àn
 = 
	`SPI_DAT_LEN
(
pBuf
Ë+ 
SPI_HDR_LEN
 + 
SPI_HDR_IDX
;

810 
•iLí_t
 
idx
 = 
SPI_HDR_IDX
;

811 
uöt8
 
fcs
 = 0;

813 
idx
 < 
Àn
)

815 
fcs
 ^
pBuf
[
idx
++];

817 
pBuf
[
idx
] = 
fcs
;

819  
fcs
;

820 
	}
}

837 
	$•iP¨£Rx
()

841 i‡(!
	`SPI_NEW_RX_BYTE
(
•iRxIdx
))

843 #i‡
deföed
 
HAL_SPI_MASTER


844 i‡(
	`SPI_RDY_IN
(Ë&& (
•iTxLí
 == 0))

846 
	`SPI_CLOCK_RX
(1);

853 
uöt8
 
ch
 = 
	`SPI_GET_RX_BYTE
(
•iRxIdx
);

854 
	`SPI_CLR_RX_BYTE
(
•iRxIdx
);

855 
	`SPI_LEN_T_INCR
(
•iRxIdx
);

857 
•iRxPktSèã
)

859 
SPIRX_STATE_SOF
:

860 i‡(
ch
 =
SPI_SOF
)

862 
•iRxPktSèã
 = 
SPIRX_STATE_LEN
;

869 
•iRxLí
 = 1;

873 
SPIRX_STATE_LEN
:

874 i‡((
ch
 =0Ë|| (ch > 
SPI_MAX_DAT_LEN
))

876 
•iRxPktSèã
 = 
SPIRX_STATE_SOF
;

877 
•iRxLí
 = 0;

881 
•iRxFcs
 = 
•iRxLí
 = 
ch
;

882 
•iRxTemp
 = 
•iRxTaû
;

883 
•iRxC¡
 = 0;

884 
•iRxPktSèã
 = 
SPIRX_STATE_DATA
;

885 #i‡
deföed
 
HAL_SPI_MASTER


886 i‡(!
	`SPI_NEW_RX_BYTE
(
•iRxIdx
))

888 
hÆI¡Sèã_t
 
ötSèã
;

889 
	`HAL_ENTER_CRITICAL_SECTION
(
ötSèã
);

890 
	`SPI_CLOCK_RX
(
ch
 + 1);

891 
	`HAL_EXIT_CRITICAL_SECTION
(
ötSèã
);

897 
SPIRX_STATE_DATA
:

898 
•iRxFcs
 ^
ch
;

899 
•iRxD©
[
•iRxTemp
] = 
ch
;

901 
	`SPI_LEN_T_INCR
(
•iRxTemp
);

903 i‡(++
•iRxC¡
 =
•iRxLí
)

905 
•iRxPktSèã
 = 
SPIRX_STATE_FCS
;

909 
SPIRX_STATE_FCS
:

910 
•iRxPktSèã
 = 
SPIRX_STATE_SOF
;

911 #ifde‡
POWER_SAVING


912 
pktFound
 = 
TRUE
;

914 
	`SPI_CLR_RDY_OUT
();

916 i‡(
ch
 =
•iRxFcs
)

918 
•iRxTaû
 = 
•iRxTemp
;

922 
dbgFcsByã
 = 
ch
;

923 #ifde‡
RBA_UART_TO_SPI


924 
badFcsPktCou¡
++;

927 
•iRxC¡
 = 
•iRxLí
 = 0;

931 
	`HAL_ASSERT
(0);

935 
	}
}

952 
	$HÆUART_DMAI§SPI
()

954 #i‡
deföed
 
HAL_SPI_MASTER


956 
UxCSR
 & 
CSR_ACTIVE
);

958 
	`SPI_RDY_IN
())

960 
	`SPI_CLOCK_RX
(1);

963 
•iRdyI§
 = 0;

965 
UxDBUF
 = 0x00;

966 
	`SPI_CLR_RDY_OUT
();

967 
•iTxLí
 = 0;

968 
	}
}

979 #i‡
deföed
 
HAL_SBL_BOOT_CODE


980 
	$•iRdyIn
()

983 #i‡ ((
HAL_UART_SPI
 =1Ë|| 
deföed
 
HAL_SPI_MASTER
)

984 
	$HAL_ISR_FUNCTION
(
p‹t0I§
, 
P0INT_VECTOR
)

985 #ñi‡(
HAL_UART_SPI
 == 2)

986 
	$HAL_ISR_FUNCTION
(
p‹t1I§
, 
P1INT_VECTOR
)

989 
	`HAL_ENTER_ISR
();

991 
PxIFG
 = 0;

992 
PxIF
 = 0;

994 
•iRdyI§
 = 1;

996 #i‡!
deföed
 
HAL_SPI_MASTER


998 i‡(
•iTxLí
 == 0)

1000 #i‡!
deföed
 
HAL_SBL_BOOT_CODE


1001 
	`CLEAR_SLEEP_MODE
();

1002 
UxDBUF
 = 0x00;

1003 
	`SPI_SET_RDY_OUT
();

1005 
	`SPI_CLR_RDY_OUT
();

1009 #i‡!
deföed
 
HAL_SBL_BOOT_CODE


1010 
	`CLEAR_SLEEP_MODE
();

1011 
	`HAL_EXIT_ISR
();

1014 
	`HAL_ENABLE_INTERRUPTS
();

1015 
	}
}

	@../../../../Components/hal/target/CC2540USB/_hal_uart_usb.c

44 
	~"hÆ_u¨t.h
"

46 
	~"usb_bﬂrd_cfg.h
"

47 
	~"usb_cdc.h
"

48 
	~"usb_cdc_hooks.h
"

49 
	~"usb_fúmw¨e_libøry_c⁄fig.h
"

50 
	~"usb_fúmw¨e_libøry_hódîs.h
"

56 #i‡!
deföed
 
HAL_UART_BAUD_RATE


57 
	#HAL_UART_BAUD_RATE
 115200

	)

61 
	#HAL_UART_MSECS_TO_TICKS
 33

	)

63 #i‡!
deföed
 
HAL_UART_USB_HIGH


64 
	#HAL_UART_USB_HIGH
 (256 / 2 - 16)

	)

66 #i‡!
deföed
 
HAL_UART_USB_IDLE


67 
	#HAL_UART_USB_IDLE
 (0 * 
HAL_UART_MSECS_TO_TICKS
)

	)

71 
	#HAL_UART_USB_TX_MAX
 64

	)

85 
__no_öô
 
uöt8
 
	ghÆU¨tRxQ
[256];

86 
__no_öô
 
uöt8
 
	ghÆU¨tTxQ
[256];

88 
uöt8
 
	ghÆU¨tRxH
, 
	ghÆU¨tRxT
;

89 
uöt8
 
	ghÆU¨tTxH
, 
	ghÆU¨tTxT
;

91 #i‡!
deföed
 
HAL_SB_BOOT_CODE


92 
uöt8
 
	grxTick
;

93 
uöt8
 
	grxShdw
;

94 
uöt8
 
	gusbTxMT
;

95 
hÆUARTCBack_t
 
	gusbCB
;

102 
HÆUARTInôUSB
();

103 
HÆUARTPﬁlUSB
();

104 
hÆU¨tPﬁlEvt
();

105 
hÆU¨tPﬁlRx
();

106 
hÆU¨tPﬁlTx
();

123 
	$HÆUARTInôUSB
()

126 
cuºítLöeCodög
.
dãR©e
 = 
HAL_UART_BAUD_RATE
;

127 
cuºítLöeCodög
.
ch¨F‹m©
 = 
CDC_CHAR_FORMAT_1_STOP_BIT
;

128 
cuºítLöeCodög
.
∑rôyTy≥
 = 
CDC_PARITY_TYPE_NONE
;

129 
cuºítLöeCodög
.
d©aBôs
 = 8;

132 
	`usbfwInô
();

135 
	`usbúqInô
(0xFFFF);

137 #i‡
deföed
 
HAL_SB_BOOT_CODE


138 
	`HAL_USB_PULLUP_ENABLE
();

140 
	}
}

142 #i‡!
deföed
 
HAL_SB_BOOT_CODE


152 
	$HÆUARTO≥nUSB
(
hÆUARTCfg_t
 *
c⁄fig
)

154 
usbCB
 = 
c⁄fig
->
ˇŒBackFunc
;

155 
	`HAL_USB_PULLUP_ENABLE
();

156 
	}
}

168 
	$HÆUARTPﬁlUSB
()

170 #i‡
deföed
 
HAL_SB_BOOT_CODE


171 
USBIF
Ë
	`usbúqH™dÀr
();

173 
	`hÆU¨tPﬁlEvt
();

174 
	`hÆU¨tPﬁlRx
();

175 
	`hÆU¨tPﬁlTx
();

176 
	}
}

178 
uöt8
 
HÆUARTRx
(uöt8 *
buf
, uöt8 
max
);

179 
uöt8
 
	$HÆUARTRx
(
uöt8
 *
buf
, uöt8 
max
)

181 
uöt8
 
˙t
 = 0;

183 (
hÆU¨tRxH
 !
hÆU¨tRxT
Ë&& (
˙t
 < 
max
))

185 *
buf
++ = 
hÆU¨tRxQ
[
hÆU¨tRxH
++];

186 
˙t
++;

189  
˙t
;

190 
	}
}

192 
uöt8
 
HÆUARTTx
(uöt8 *
buf
, uöt8 
˙t
);

193 
uöt8
 
	$HÆUARTTx
(
uöt8
 *
buf
, uöt8 
˙t
)

195 
˙t
--)

197 
hÆU¨tTxQ
[
hÆU¨tTxT
++] = *
buf
++;

200 #i‡!
deföed
 
HAL_SB_BOOT_CODE


201 
usbTxMT
 = 
FALSE
;

204 
	}
}

215 
uöt16
 
	$HÆUARTRxAvaûUSB
()

217  ((
hÆU¨tRxT
 >
hÆU¨tRxH
)?

218 
hÆU¨tRxT
 - 
hÆU¨tRxH
 : (
hÆU¨tRxQ
) - halUartRxH + halUartRxT);

219 
	}
}

230 
	$hÆU¨tPﬁlEvt
()

233 i‡(
	`USBIRQ_GET_EVENT_MASK
(Ë& 
USBIRQ_EVENT_RESET
)

235 
	`USBIRQ_CLEAR_EVENTS
(
USBIRQ_EVENT_RESET
);

236 
	`usbfwRe£tH™dÀr
();

240 i‡(
	`USBIRQ_GET_EVENT_MASK
(Ë& 
USBIRQ_EVENT_SETUP
)

242 
	`USBIRQ_CLEAR_EVENTS
(
USBIRQ_EVENT_SETUP
);

243 
	`usbfwSëupH™dÀr
();

247 i‡(
	`USBIRQ_GET_EVENT_MASK
(Ë& 
USBIRQ_EVENT_SUSPEND
)

250 
	`USBIRQ_CLEAR_EVENTS
(
USBIRQ_EVENT_SUSPEND
);

252 #i‡
HAL_UART_USB_SUSPEND


254 
	`usbsu•E¡î
();

258 
	`USBIRQ_CLEAR_EVENTS
(
USBIRQ_EVENT_RESUME
);

260 
	}
}

271 
	$hÆU¨tPﬁlRx
()

273 
uöt8
 
˙t
;

274 
uöt8
 
ï
 = 
	`USBFW_GET_SELECTED_ENDPOINT
();

275 
	`USBFW_SELECT_ENDPOINT
(4);

278 i‡(
	`USBFW_OUT_ENDPOINT_DISARMED
())

280 
hÆI¡Sèã_t
 
ötSèã
;

282 
	`HAL_ENTER_CRITICAL_SECTION
(
ötSèã
);

284 
˙t
 = 
	`USBFW_GET_OUT_ENDPOINT_COUNT_LOW
();

285 
˙t
 +
	`USBFW_GET_OUT_ENDPOINT_COUNT_HIGH
() >> 8;

286 
	`HAL_EXIT_CRITICAL_SECTION
(
ötSèã
);

288 
˙t
--)

290 
hÆU¨tRxQ
[
hÆU¨tRxT
++] = 
USBF4
;

292 
	`USBFW_ARM_OUT_ENDPOINT
();

294 #i‡!
deföed
 
HAL_SB_BOOT_CODE


298 i‡(
rxTick
 == 0)

300 
rxShdw
 = 
ST0
;

302 
rxTick
 = 
HAL_UART_USB_IDLE
;

305 #i‡!
deföed
 
HAL_SB_BOOT_CODE


306 i‡(
rxTick
)

309 
uöt8
 
de¸
 = 
ST0
 - 
rxShdw
;

311 i‡(
rxTick
 > 
de¸
)

313 
rxTick
 -
de¸
;

314 
rxShdw
 = 
ST0
;

318 
rxTick
 = 0;

323 
uöt8
 
evt
 = 0;

324 
˙t
 = 
hÆU¨tRxT
 - 
hÆU¨tRxH
;

326 i‡(
˙t
 >
HAL_UART_USB_HIGH
)

328 
evt
 = 
HAL_UART_RX_ABOUT_FULL
;

330 i‡(
˙t
 && !
rxTick
)

332 
evt
 = 
HAL_UART_RX_TIMEOUT
;

335 i‡(
evt
 && (
NULL
 !
usbCB
))

337 
	`usbCB
(0, 
evt
);

342 
	`USBFW_SELECT_ENDPOINT
(
ï
);

343 
	}
}

354 
	$hÆU¨tPﬁlTx
()

356 
uöt8
 
ï
 = 
	`USBFW_GET_SELECTED_ENDPOINT
();

357 
	`USBFW_SELECT_ENDPOINT
(4);

360 i‡(
	`USBFW_IN_ENDPOINT_DISARMED
())

362 i‡(
hÆU¨tTxT
 =
hÆU¨tTxH
)

364 #i‡!
deföed
 
HAL_SB_BOOT_CODE


365 i‡(!
usbTxMT
 && 
usbCB
)

367 
usbTxMT
 = 
TRUE
;

368 
	`usbCB
(0, 
HAL_UART_TX_EMPTY
);

374 
uöt8
 
max
 = 
HAL_UART_USB_TX_MAX
;

378 
USBF4
 = 
hÆU¨tTxQ
[
hÆU¨tTxH
++];

379 } (
hÆU¨tTxH
 !
hÆU¨tTxT
Ë&& (0 !--
max
));

381 
	`USBFW_ARM_IN_ENDPOINT
();

385 
	`USBFW_SELECT_ENDPOINT
(
ï
);

386 
	}
}

	@../../../../Components/hal/target/CC2540USB/hal_adc.c

44 
	~"hÆ_adc.h
"

45 
	~"hÆ_defs.h
"

46 
	~"hÆ_mcu.h
"

47 
	~"hÆ_ty≥s.h
"

52 
	#HAL_ADC_EOC
 0x80

	)

53 
	#HAL_ADC_START
 0x40

	)

55 
	#HAL_ADC_STSEL_EXT
 0x00

	)

56 
	#HAL_ADC_STSEL_FULL
 0x10

	)

57 
	#HAL_ADC_STSEL_T1C0
 0x20

	)

58 
	#HAL_ADC_STSEL_ST
 0x30

	)

60 
	#HAL_ADC_RAND_NORM
 0x00

	)

61 
	#HAL_ADC_RAND_LFSR
 0x04

	)

62 
	#HAL_ADC_RAND_SEED
 0x08

	)

63 
	#HAL_ADC_RAND_STOP
 0x0¯

	)

64 
	#HAL_ADC_RAND_BITS
 0x0¯

	)

66 
	#HAL_ADC_DEC_064
 0x00

	)

67 
	#HAL_ADC_DEC_128
 0x10

	)

68 
	#HAL_ADC_DEC_256
 0x20

	)

69 
	#HAL_ADC_DEC_512
 0x30

	)

70 
	#HAL_ADC_DEC_BITS
 0x30

	)

72 
	#HAL_ADC_STSEL
 
HAL_ADC_STSEL_ST


	)

73 
	#HAL_ADC_RAND_GEN
 
HAL_ADC_RAND_STOP


	)

74 
	#HAL_ADC_REF_VOLT
 
HAL_ADC_REF_AVDD


	)

75 
	#HAL_ADC_DEC_RATE
 
HAL_ADC_DEC_064


	)

76 
	#HAL_ADC_SCHN
 
HAL_ADC_CHN_VDD3


	)

77 
	#HAL_ADC_ECHN
 
HAL_ADC_CHN_GND


	)

84 #i‡(
HAL_ADC
 =
TRUE
)

85 
uöt8
 
	gadcRef
;

97 
	$HÆAdcInô
 ()

99 #i‡(
HAL_ADC
 =
TRUE
)

100 
adcRef
 = 
HAL_ADC_REF_VOLT
;

102 
	}
}

117 
uöt16
 
	$HÆAdcRód
 (
uöt8
 
ch™√l
, uöt8 
ªsﬁuti⁄
)

119 
öt16
 
ªadög
 = 0;

121 #i‡(
HAL_ADC
 =
TRUE
)

122 
uöt8
 
i
, 
ªsbôs
;

123 
uöt8
 
adcCh™√l
 = 1;

133 i‡(
ch™√l
 <
HAL_ADC_CHANNEL_7
)

135 
i
=0; i < 
ch™√l
; i++)

137 
adcCh™√l
 <<= 1;

141 
ADCCFG
 |
adcCh™√l
;

145 
ªsﬁuti⁄
)

147 
HAL_ADC_RESOLUTION_8
:

148 
ªsbôs
 = 
HAL_ADC_DEC_064
;

150 
HAL_ADC_RESOLUTION_10
:

151 
ªsbôs
 = 
HAL_ADC_DEC_128
;

153 
HAL_ADC_RESOLUTION_12
:

154 
ªsbôs
 = 
HAL_ADC_DEC_256
;

156 
HAL_ADC_RESOLUTION_14
:

158 
ªsbôs
 = 
HAL_ADC_DEC_512
;

163 
ADCCON3
 = 
ch™√l
 | 
ªsbôs
 | 
adcRef
;

166 !(
ADCCON1
 & 
HAL_ADC_EOC
));

169 i‡(
ch™√l
 <
HAL_ADC_CHANNEL_7
)

170 
ADCCFG
 &(
adcCh™√l
 ^ 0xFF);

173 
ªadög
 = (
öt16
Ë(
ADCL
);

174 
ªadög
 |(
öt16
Ë(
ADCH
 << 8);

177 i‡(
ªadög
 < 0)

178 
ªadög
 = 0;

180 
ªsﬁuti⁄
)

182 
HAL_ADC_RESOLUTION_8
:

183 
ªadög
 >>= 8;

185 
HAL_ADC_RESOLUTION_10
:

186 
ªadög
 >>= 6;

188 
HAL_ADC_RESOLUTION_12
:

189 
ªadög
 >>= 4;

191 
HAL_ADC_RESOLUTION_14
:

193 
ªadög
 >>= 2;

198 (Ë
ch™√l
;

199 (Ë
ªsﬁuti⁄
;

202  ((
uöt16
)
ªadög
);

203 
	}
}

215 
	$HÆAdcSëRe„ªn˚
 ( 
uöt8
 
ª„ªn˚
 )

217 #i‡(
HAL_ADC
 =
TRUE
)

218 
adcRef
 = 
ª„ªn˚
;

220 
	}
}

233 
boﬁ
 
	$HÆAdcCheckVdd
(
uöt8
 
vdd
)

235 
ADCCON3
 = 0x0F;

236 !(
ADCCON1
 & 0x80));

237  (
ADCH
 > 
vdd
);

238 
	}
}

	@../../../../Components/hal/target/CC2540USB/hal_aes.c

42 
	~"oßl.h
"

43 
	~"hÆ_´s.h
"

44 
	~"hÆ_dma.h
"

66 (*
pS•AesEn¸y±
)–
uöt8
 *, uöt8 * ) = (*)
NULL
;

71 
	`´sDmaInô
( );

73 #i‡((
deföed
 
HAL_DMA
Ë&& (HAL_DMA =
TRUE
))

85 
	$´sDmaInô
( )

87 
hÆDMADesc_t
 *
ch
;

90 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_IN
 );

91 
	`HAL_DMA_SET_DEST
–
ch
, 
HAL_AES_IN_ADDR
 );

92 
	`HAL_DMA_SET_VLEN
–
ch
, 
HAL_DMA_VLEN_USE_LEN
 );

93 
	`HAL_DMA_SET_WORD_SIZE
–
ch
, 
HAL_DMA_WORDSIZE_BYTE
 );

94 
	`HAL_DMA_SET_TRIG_MODE
–
ch
, 
HAL_DMA_TMODE_SINGLE
 );

95 
	`HAL_DMA_SET_TRIG_SRC
–
ch
, 
HAL_DMA_TRIG_ENC_DW
 );

96 
	`HAL_DMA_SET_SRC_INC
–
ch
, 
HAL_DMA_SRCINC_1
 );

97 
	`HAL_DMA_SET_DST_INC
–
ch
, 
HAL_DMA_DSTINC_0
 );

98 
	`HAL_DMA_SET_IRQ
–
ch
, 
HAL_DMA_IRQMASK_DISABLE
 );

99 
	`HAL_DMA_SET_M8
–
ch
, 
HAL_DMA_M8_USE_8_BITS
 );

100 
	`HAL_DMA_SET_PRIORITY
–
ch
, 
HAL_DMA_PRI_HIGH
 );

103 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_OUT
 );

104 
	`HAL_DMA_SET_SOURCE
–
ch
, 
HAL_AES_OUT_ADDR
 );

105 
	`HAL_DMA_SET_VLEN
–
ch
, 
HAL_DMA_VLEN_USE_LEN
 );

106 
	`HAL_DMA_SET_WORD_SIZE
–
ch
, 
HAL_DMA_WORDSIZE_BYTE
 );

107 
	`HAL_DMA_SET_TRIG_MODE
–
ch
, 
HAL_DMA_TMODE_SINGLE
 );

108 
	`HAL_DMA_SET_TRIG_SRC
–
ch
, 
HAL_DMA_TRIG_ENC_UP
 );

109 
	`HAL_DMA_SET_SRC_INC
–
ch
, 
HAL_DMA_SRCINC_0
 );

110 
	`HAL_DMA_SET_DST_INC
–
ch
, 
HAL_DMA_DSTINC_1
 );

111 
	`HAL_DMA_SET_IRQ
–
ch
, 
HAL_DMA_IRQMASK_DISABLE
 );

112 
	`HAL_DMA_SET_M8
–
ch
, 
HAL_DMA_M8_USE_8_BITS
 );

113 
	`HAL_DMA_SET_PRIORITY
–
ch
, 
HAL_DMA_PRI_HIGH
 );

114 
	}
}

117 #i‡(!
deföed
 
HAL_AES_DMA
Ë|| (HAL_AES_DMA =
FALSE
)

129 
	$AesLﬂdBlock
–
uöt8
 *
±r
 )

131 
uöt8
 
i
;

134 
	`AES_START
();

137 
i
 = 0; i < 
STATE_BLENGTH
; i++)

139 
ENCDI
 = *
±r
++;

141 
	}
}

155 
	$AesSèπBlock
–
uöt8
 *
out
, uöt8 *
ö
 )

157 
uöt8
 
i
;

160 
	`AES_START
();

163 
i
 = 0; i < 
STATE_BLENGTH
; i++)

165 
ENCDI
 = *
ö
++;

169 
	`HAL_AES_DELAY
();

172 
i
 = 0; i < 
STATE_BLENGTH
; i++)

174 *
out
++ = 
ENCDO
;

176 
	}
}

192 
	$AesSèπSh‹tBlock
–
uöt8
 *
out
, uöt8 *
ö
 )

194 
uöt8
 
i
, 
j
;

196 
	`AES_START
();

197 
i
 = 0; i < 4; i++)

200 
j
 = 0; j < 4; j++)

202 
ENCDI
 = *
ö
++;

206 
	`HAL_AES_DELAY
();

209 
j
 = 0; j < 4; j++)

211 *
out
++ = 
ENCDO
;

214 
	}
}

228 
	$AesLﬂdIV
–
uöt8
 *
IV
 )

230 #i‡(
deföed
 
HAL_AES_DMA
Ë&& (HAL_AES_DMA =
TRUE
)

231 
hÆDMADesc_t
 *
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_IN
 );

234 
	`HAL_DMA_SET_SOURCE
–
ch
, 
IV
 );

235 
	`HAL_DMA_SET_LEN
–
ch
, 
STATE_BLENGTH
 );

238 
	`HAL_DMA_CLEAR_IRQ
–
HAL_DMA_AES_IN
 );

239 
	`HAL_DMA_ARM_CH
–
HAL_DMA_AES_IN
 );

241 
	`asm
("NOP");

242 } !
	`HAL_DMA_CH_ARMED
(
HAL_DMA_AES_IN
));

245 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_LOAD_IV
 );

248 
	`AES_START
();

249  !(
ENCCS
 & 0x08) );

252 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_LOAD_IV
 );

255 
	`AesLﬂdBlock
–
IV
 );

257 
	}
}

270 
	$AesLﬂdKey
–
uöt8
 *
AesKey
 )

272 #i‡(
deföed
 
HAL_AES_DMA
Ë&& (HAL_AES_DMA =
TRUE
)

273 
hÆDMADesc_t
 *
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_IN
 );

276 
	`HAL_DMA_SET_SOURCE
–
ch
, 
AesKey
 );

277 
	`HAL_DMA_SET_LEN
–
ch
, 
KEY_BLENGTH
 );

280 
	`HAL_DMA_CLEAR_IRQ
–
HAL_DMA_AES_IN
 );

281 
	`HAL_DMA_ARM_CH
–
HAL_DMA_AES_IN
 );

283 
	`asm
("NOP");

284 } !
	`HAL_DMA_CH_ARMED
(
HAL_DMA_AES_IN
));

287 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_LOAD_KEY
 );

290 
	`AES_START
();

291  !(
ENCCS
 & 0x08) );

294 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_LOAD_KEY
 );

297 
	`AesLﬂdBlock
–
AesKey
 );

299 
	}
}

301 #i‡(
deföed
 
HAL_AES_DMA
Ë&& (HAL_AES_DMA =
TRUE
)

321 
	$AesDmaSëup
–
uöt8
 *
C°©e
, 
uöt16
 
msg_out_Àn
, uöt8 *
msg_ö
, uöt16 
msg_ö_Àn
 )

323 
hÆDMADesc_t
 *
ch
;

326 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_IN
 );

327 
	`HAL_DMA_SET_SOURCE
–
ch
, 
msg_ö
 );

328 
	`HAL_DMA_SET_LEN
–
ch
, 
msg_ö_Àn
 );

331 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_OUT
 );

332 
	`HAL_DMA_SET_DEST
–
ch
, 
C°©e
 );

333 
	`HAL_DMA_SET_LEN
–
ch
, 
msg_out_Àn
 );

336 
	`HAL_DMA_CLEAR_IRQ
–
HAL_DMA_AES_IN
 );

337 
	`HAL_DMA_ARM_CH
–
HAL_DMA_AES_IN
 );

339 
	`asm
("NOP");

340 } !
	`HAL_DMA_CH_ARMED
(
HAL_DMA_AES_IN
));

341 
	`HAL_DMA_CLEAR_IRQ
–
HAL_DMA_AES_OUT
 );

342 
	`HAL_DMA_ARM_CH
–
HAL_DMA_AES_OUT
 );

344 
	`asm
("NOP");

345 } !
	`HAL_DMA_CH_ARMED
(
HAL_DMA_AES_OUT
));

346 
	}
}

360 
	$HÆAesInô
( )

362 #i‡(
deföed
 
HAL_AES_DMA
Ë&& (HAL_AES_DMA =
TRUE
)

364 
	`´sDmaInô
();

366 
	}
}

379 
	$s•_HW_KeyInô
–
uöt8
 *
AesKey
 )

381 
	`AES_SETMODE
(
ECB
);

382 
	`AesLﬂdKey
–
AesKey
 );

383 
	}
}

402 
	$s•AesEn¸y±HW
–
uöt8
 *
AesKey
, uöt8 *
C°©e
 )

404 ()
AesKey
;

406 #i‡(
deföed
 
HAL_AES_DMA
Ë&& (HAL_AES_DMA =
TRUE
)

408 
	`AesDmaSëup
–
C°©e
, 
STATE_BLENGTH
, Cstate, STATE_BLENGTH );

409 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_ENCRYPT
 );

412 
	`AES_START
();

413  !
	`HAL_DMA_CHECK_IRQ
–
HAL_DMA_AES_OUT
 ) );

416 
	`AES_SETMODE
(
ECB
);

417 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_ENCRYPT
 );

420 
	`AesSèπBlock
–
C°©e
, Cstate );

422 
	}
}

	@../../../../Components/hal/target/CC2540USB/hal_aes.h

39 #i‚de‡
HAL_AES_H_


40 
	#HAL_AES_H_


	)

42 
	~"hÆ_ty≥s.h
"

44 
	#STATE_BLENGTH
 16

45 
	#KEY_BLENGTH
 16

46 
	#KEY_EXP_LENGTH
 176

47 

	)

52 #i‡((
deföed
 
SOFTWARE_AES
Ë&& (SOFTWARE_AES =
TRUE
)Ë&& ((deföed 
SW_AES_AND_KEY_EXP
) && (SW_AES_AND_KEY_EXP == TRUE))

56 
HÆAesInô
( );

57 
AesLﬂdBlock
–
uöt8
 * );

58 
AesSèπBlock
–
uöt8
 *, uint8 * );

59 
AesSèπSh‹tBlock
–
uöt8
 *, uint8 * );

60 
AesLﬂdIV
(
uöt8
 *);

61 
AesDmaSëup
–
uöt8
 *, 
uöt16
, uint8 *, uint16 );

62 
AesLﬂdKey
–
uöt8
 * );

64 (*
pS•AesEn¸y±
)–
uöt8
 *, uint8 * );

65 
	`s•_HW_KeyInô
 (
uöt8
 *);

66 
	`s•KeyEx∑nsi⁄
 (
uöt8
 *, uint8 *);

68 
	`s•AesEn¸y±HW
 (
uöt8
 *, uint8 *);

69 
	`s•AesEn¸y±KeyExp
 (
uöt8
 *, uint8 *);

70 
	`s•AesEn¸y±Basic
 (
uöt8
 *, uint8 *);

72 
	`s•AesDe¸y±HW
–
uöt8
 *, uint8 * );

73 
	`s•AesDe¸y±
–
uöt8
 *
key
, uöt8 *
buf
 );

76 
	#AES_BUSY
 0x08

	)

77 
	#ENCRYPT
 0x00

	)

78 
	#DECRYPT
 0x01

	)

81 
	#AES_SETMODE
(
mode
) \

83 
ENCCS
 = (ENCCS & ~0x70Ë| (
mode
); \

84 
	}
} 0)

	)

87 
	#CBC
 0x00

	)

88 
	#CFB
 0x10

	)

89 
	#OFB
 0x20

	)

90 
	#CTR
 0x30

	)

91 
	#ECB
 0x40

	)

92 
	#CBC_MAC
 0x50

	)

95 
	#AES_SET_ENCR_DECR_KEY_IV
(
cmd
) \

97 
ENCCS
 = (ENCCS & ~0x07Ë| (
cmd
); \

98 } 0)

	)

101 
	#AES_ENCRYPT
 0x00

	)

102 
	#AES_DECRYPT
 0x02

	)

103 
	#AES_LOAD_KEY
 0x04

	)

104 
	#AES_LOAD_IV
 0x06

	)

108 
	#AES_START
(Ë
ENCCS
 |0x01

	)

111 
	#HAL_DMA_AES_IN
 1

	)

112 
	#HAL_DMA_AES_OUT
 2

	)

115 
	#HAL_AES_IN_ADDR
 0x70B1

	)

116 
	#HAL_AES_OUT_ADDR
 0x70B2

	)

118 #i‡!
deföed
 (
HAL_AES_DMA
Ë|| (HAL_AES_DMA =
FALSE
)

119 
	#HAL_AES_DELAY
() \

121 vﬁ©ûê
uöt8
 
dñay
 = 15; \

122 
dñay
--); \

123 } 0)

	)

	@../../../../Components/hal/target/CC2540USB/hal_board_cfg.h

42 #i‚de‡
HAL_BOARD_CFG_H


43 
	#HAL_BOARD_CFG_H


	)

45 #ifde‡
__˝lu•lus


55 
	~"hÆ_mcu.h
"

56 
	~"hÆ_defs.h
"

57 
	~"hÆ_ty≥s.h
"

58 
	~"usb_bﬂrd_cfg.h
"

66 
	#HAL_BOARD_CC2540USB


	)

70 
	#HAL_CPU_CLOCK_MHZ
 32

	)

74 
	#EXTERNAL_CRYSTAL_OSC
 0x00

75 
	#INTERNAL_RC_OSC
 0x80

76 

	)

78 #i‡!
deföed
 (
XOSC32K_INSTALLED
Ë|| (deföed (XOSC32K_INSTALLEDË&& (XOSC32K_INSTALLED =
FALSE
))

79 
	#OSC_32KHZ
 
INTERNAL_RC_OSC


	)

81 
	#OSC_32KHZ
 
EXTERNAL_CRYSTAL_OSC


	)

85 
	#MIN_TIME_TO_STABLE_32KHZ_XOSC
 400

	)

88 
	#HAL_LCD_MAX_CHARS
 16

	)

89 
	#HAL_LCD_MAX_BUFF
 25

	)

93 
	#HAL_NUM_LEDS
 2

	)

95 
	#HAL_LED_BLINK_DELAY
(Ë
	`°
–{ vﬁ©ûê
uöt32
 
i
; i=0; i<0x5800; i++Ë{ }; } )

	)

98 
	#LED1_BV
 
	`BV
(0)

	)

99 
	#LED1_SBIT
 
P0_0


	)

100 
	#LED1_DDR
 
P0DIR


	)

101 
	#LED1_POLARITY
 
ACTIVE_LOW


	)

104 
	#LED2_BV
 
	`BV
(1)

	)

105 
	#LED2_SBIT
 
P1_1


	)

106 
	#LED2_DDR
 
P1DIR


	)

107 
	#LED2_POLARITY
 
ACTIVE_HIGH


	)

111 
	#ACTIVE_LOW
 !

	)

112 
	#ACTIVE_HIGH
 !!

	)

115 
	#PUSH1_BV
 
	`BV
(2)

	)

116 
	#PUSH1_SBIT
 
P1_2


	)

117 
	#PUSH1_POLARITY
 
ACTIVE_LOW


	)

120 
	#PUSH2_BV
 
	`BV
(3)

	)

121 
	#PUSH2_SBIT
 
P1_3


	)

122 
	#PUSH2_POLARITY
 
ACTIVE_LOW


	)

127 
	#HAL_FLASH_PAGE_PER_BANK
 16

	)

130 
	#HAL_FLASH_PAGE_SIZE
 2048

	)

131 
	#HAL_FLASH_WORD_SIZE
 4

	)

134 
	#HAL_FLASH_PAGE_MAP
 0x8000

	)

137 
	#HAL_FLASH_LOCK_BITS
 16

	)

140 #i‡
deföed
 
NON_BANKED


141 
	#HAL_NV_PAGE_END
 30

	)

145 
	#HAL_NV_PAGE_END
 126

	)

149 
	#HAL_FLASH_IEEE_SIZE
 8

	)

150 
	#HAL_FLASH_IEEE_PAGE
 (
HAL_NV_PAGE_END
+1)

	)

151 
	#HAL_FLASH_IEEE_OSET
 (
HAL_FLASH_PAGE_SIZE
 - 
HAL_FLASH_LOCK_BITS
 - 
HAL_FLASH_IEEE_SIZE
)

	)

152 
	#HAL_INFOP_IEEE_OSET
 0xC

	)

154 
	#HAL_NV_PAGE_CNT
 2

	)

155 
	#HAL_NV_PAGE_BEG
 (
HAL_NV_PAGE_END
-
HAL_NV_PAGE_CNT
+1)

	)

158 
	#HAL_NV_DMA_CH
 0

	)

159 
	#HAL_DMA_CH_RX
 3

	)

160 
	#HAL_DMA_CH_TX
 4

	)

162 
	#HAL_NV_DMA_GET_DESC
(Ë
	`HAL_DMA_GET_DESC0
()

	)

163 
	#HAL_NV_DMA_SET_ADDR
(
a
Ë
	`HAL_DMA_SET_ADDR_DESC0
(◊))

	)

167 
	#HAL_USB_IMG_ADDR
 0x1800

	)

168 
	#HAL_USB_CRC_ADDR
 0x1890

	)

170 
	#HAL_USB_IMG_SIZE
 (0x40000 - 0x2000 - 0x3000)

	)

178 
	#PREFETCH_ENABLE
(Ë
	`°
–
FCTL
 = 0x08; )

	)

179 
	#PREFETCH_DISABLE
(Ë
	`°
–
FCTL
 = 0x04; )

	)

184 
	#SET_OSC_TO_HSOSC
() \

186 
CLKCONCMD
 = (CLKCONCMD & 0x80Ë| 
CLKCONCMD_16MHZ
; \

187  (
CLKCONSTA
 & ~0x80Ë!
CLKCONCMD_16MHZ
 ); \

188 }

	)

191 
	#SET_OSC_TO_XOSC
() \

193 
CLKCONCMD
 = (CLKCONCMD & 0x80Ë| 
CLKCONCMD_32MHZ
; \

194  (
CLKCONSTA
 & ~0x80Ë!
CLKCONCMD_32MHZ
 ); \

195 }

	)

198 
	#SET_32KHZ_OSC
() \

200 
CLKCONCMD
 = (CLKCONCMD & ~0x80Ë| 
OSC_32KHZ
; \

201  (
CLKCONSTA
 & 0x80Ë!
OSC_32KHZ
 ); \

202 }

	)

204 
	#START_HSOSC_XOSC
() \

206 
sdfsdfß


	)

207 
SLEEPCMD
 &~
OSC_PD
; \

208 !(
SLEEPSTA
 & 
XOSC_STB
)); \

211 
	#STOP_HSOSC
() \

213 
SLEEPCMD
 |
OSC_PD
; \

214 }

	)

217 #i‡
deföed
 
HAL_USB_BOOT_CODE


218 
	#HAL_BOARD_INIT
() \

221 
	`START_HSOSC_XOSC
(); \

222 
	`SET_OSC_TO_HSOSC
(); \

223 
	`SET_32KHZ_OSC
(); \

224 
	`SET_OSC_TO_XOSC
(); \

225 
	`STOP_HSOSC
(); \

228 
	`HAL_USB_PULLUP_DISABLE
(); \

231 
	`PREFETCH_ENABLE
(); \

232 }

	)

235 
	#HAL_BOARD_INIT
() \

238 
	`START_HSOSC_XOSC
(); \

239 
	`SET_OSC_TO_HSOSC
(); \

240 
	`SET_32KHZ_OSC
(); \

241 
	`SET_OSC_TO_XOSC
(); \

242 
	`STOP_HSOSC
(); \

245 
	`PREFETCH_ENABLE
(); \

246 }

	)

251 
	#HAL_DEBOUNCE
(
ex¥
Ë{ 
i
; i=0; i<500; i++Ë{ i‡(!”x¥)Ëò0; } }

	)

255 
	#HAL_PUSH_BUTTON1
(Ë(
	`PUSH1_POLARITY
 (
PUSH1_SBIT
))

	)

256 
	#HAL_PUSH_BUTTON2
(Ë(
	`PUSH2_POLARITY
 (
PUSH2_SBIT
))

	)

257 
	#HAL_PUSH_BUTTON3
(Ë(0)

	)

258 
	#HAL_PUSH_BUTTON4
(Ë(0)

	)

259 
	#HAL_PUSH_BUTTON5
(Ë(0)

	)

260 
	#HAL_PUSH_BUTTON6
(Ë(0)

	)

264 
	#HAL_TURN_OFF_LED1
(Ë
	`°
–
LED1_SBIT
 = 
	`LED1_POLARITY
 (0); )

	)

265 
	#HAL_TURN_OFF_LED2
(Ë
	`°
–
LED2_SBIT
 = 
	`LED2_POLARITY
 (0); )

	)

266 
	#HAL_TURN_OFF_LED3
(Ë
	`HAL_TURN_OFF_LED1
()

	)

267 
	#HAL_TURN_OFF_LED4
(Ë
	`HAL_TURN_OFF_LED2
()

	)

269 
	#HAL_TURN_ON_LED1
(Ë
	`°
–
LED1_SBIT
 = 
	`LED1_POLARITY
 (1); )

	)

270 
	#HAL_TURN_ON_LED2
(Ë
	`°
–
LED2_SBIT
 = 
	`LED2_POLARITY
 (1); )

	)

271 
	#HAL_TURN_ON_LED3
(Ë
	`HAL_TURN_ON_LED1
()

	)

272 
	#HAL_TURN_ON_LED4
(Ë
	`HAL_TURN_ON_LED2
()

	)

274 
	#HAL_TOGGLE_LED1
(Ë
	`°
–i‡(
LED1_SBIT
Ë{ LED1_SBIT = 0; } { LED1_SBIT = 1;} )

	)

275 
	#HAL_TOGGLE_LED2
(Ë
	`°
–i‡(
LED2_SBIT
Ë{ LED2_SBIT = 0; } { LED2_SBIT = 1;} )

	)

276 
	#HAL_TOGGLE_LED3
(Ë
	`HAL_TOGGLE_LED1
()

	)

277 
	#HAL_TOGGLE_LED4
(Ë
	`HAL_TOGGLE_LED2
()

	)

279 
	#HAL_STATE_LED1
(Ë(
	`LED1_POLARITY
 (
LED1_SBIT
))

	)

280 
	#HAL_STATE_LED2
(Ë(
	`LED2_POLARITY
 (
LED2_SBIT
))

	)

281 
	#HAL_STATE_LED3
(Ë
	`HAL_STATE_LED1
()

	)

282 
	#HAL_STATE_LED4
(Ë
	`HAL_STATE_LED2
()

	)

287 #i‚de‡
HAL_TIMER


288 
	#HAL_TIMER
 
FALSE


	)

292 #i‚de‡
HAL_ADC


293 
	#HAL_ADC
 
TRUE


	)

297 #i‚de‡
HAL_DMA


298 
	#HAL_DMA
 
TRUE


	)

302 #i‚de‡
HAL_FLASH


303 
	#HAL_FLASH
 
TRUE


	)

307 #i‚de‡
HAL_AES


308 
	#HAL_AES
 
TRUE


	)

311 #i‚de‡
HAL_AES_DMA


312 
	#HAL_AES_DMA
 
TRUE


	)

316 #i‚de‡
HAL_LCD


317 
	#HAL_LCD
 
FALSE


	)

321 #i‚de‡
HAL_LED


322 
	#HAL_LED
 
TRUE


	)

324 #i‡(!
deföed
 
BLINK_LEDS
Ë&& (
HAL_LED
 =
TRUE
)

325 
	#BLINK_LEDS


	)

329 #i‚de‡
HAL_KEY


330 
	#HAL_KEY
 
TRUE


	)

334 #i‚de‡
HAL_UART


335 
	#HAL_UART
 
TRUE


	)

336 
	#HAL_UART_DMA
 0

	)

337 
	#HAL_UART_ISR
 0

	)

338 
	#HAL_UART_USB
 1

	)

341 #i‚de‡
HAL_UART_DMA


342 
	#HAL_UART_DMA
 0

	)

344 #i‚de‡
HAL_UART_ISR


345 
	#HAL_UART_ISR
 0

	)

348 #i‚de‡
HAL_UART_USB


349 #i‡
HAL_UART


350 
	#HAL_UART_USB
 1

	)

352 
	#HAL_UART_USB
 0

	)

357 #i‚de‡
HAL_HID


358 
	#HAL_HID
 
FALSE


	)

361 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2540USB/hal_crc.c

45 
	~"hÆ_bﬂrd.h
"

46 
	~"hÆ_¸c.h
"

47 
	~"hÆ_ty≥s.h
"

64 
uöt16
 
	$HÆCRCCÆc
()

66 
uöt16
 
¸c
 = 
RNDH
;

67 
¸c
 = (¸¯<< 8Ë| 
RNDL
;

69  
¸c
;

70 
	}
}

87 
	$HÆCRCExec
(
uöt8
 
ch
)

89 
RNDH
 = 
ch
;

90 
	}
}

107 
	$HÆCRCInô
(
uöt16
 
£ed
)

109 
ADCCON1
 &= 0xF3;

111 
RNDL
 = 
	`HI_UINT16
(
£ed
);

112 
RNDL
 = 
	`LO_UINT16
(
£ed
);

113 
	}
}

	@../../../../Components/hal/target/CC2540USB/hal_crc.h

39 #i‚de‡
HAL_CRC_H


40 
	#HAL_CRC_H


	)

47 
	~"hÆ_ty≥s.h
"

64 
uöt16
 
HÆCRCCÆc
();

81 
HÆCRCExec
(
uöt8
 
ch
);

98 
HÆCRCInô
(
uöt16
 
£ed
);

	@../../../../Components/hal/target/CC2540USB/hal_dma.c

44 
	~"hÆ_dma.h
"

45 
	~"hÆ_mcu.h
"

46 
	~"hÆ_ty≥s.h
"

47 
	~"hÆ_u¨t.h
"

49 #i‡(
deföed
 
HAL_IRGEN
Ë&& (HAL_IRGEN =
TRUE
)

50 
	~"hÆ_úgí.h
"

53 #i‡((
deföed
 
HAL_DMA
Ë&& (HAL_DMA =
TRUE
))

59 
hÆDMADesc_t
 
	gdmaCh0
;

60 
hÆDMADesc_t
 
	gdmaCh1234
[4];

71 
	$HÆDmaInô
( )

73 
	`HAL_DMA_SET_ADDR_DESC0
–&
dmaCh0
 );

74 
	`HAL_DMA_SET_ADDR_DESC1234
–
dmaCh1234
 );

75 #i‡(
HAL_UART_DMA
 || \

76 ((
deföed
 
HAL_UART_SPI
) && (HAL_UART_SPI != 0)) || \

77 ((
deföed
 
HAL_IRGEN
Ë&& (HAL_IRGEN =
TRUE
)))

78 
DMAIE
 = 1;

80 
	}
}

82 #i‡(
HAL_UART_DMA
 || \

83 ((
deföed
 
	gHAL_UART_SPI
) && (HAL_UART_SPI != 0)) || \

84 ((
deföed
 
HAL_IRGEN
Ë&& (HAL_IRGEN =
TRUE
)))

94 
	$HAL_ISR_FUNCTION
–
hÆDmaI§
, 
DMA_VECTOR
 )

96 
	`HAL_ENTER_ISR
();

98 
DMAIF
 = 0;

100 #i‡(((
deföed
 
HAL_UART_DMA
) && (HAL_UART_DMA != 0)) || \

101 ((
deföed
 
HAL_UART_SPI
) && (HAL_UART_SPI != 0)))

102 i‡(
	`HAL_DMA_CHECK_IRQ
(
HAL_DMA_CH_TX
))

104 
	`HAL_DMA_CLEAR_IRQ
(
HAL_DMA_CH_TX
);

105 
	`HÆUARTI§DMA
();

106 
	`HÆUARTI§DMA
();

110 #i‡(
deföed
 
HAL_IRGEN
Ë&& (HAL_IRGEN =
TRUE
)

111 i‡–
HAL_IRGEN
 =
TRUE
 && 
	`HAL_DMA_CHECK_IRQ
–
HAL_IRGEN_DMA_CH
 ) )

113 
	`HAL_DMA_CLEAR_IRQ
–
HAL_IRGEN_DMA_CH
 );

114 
	`HÆIrGíDmaI§
();

118 
	`CLEAR_SLEEP_MODE
();

119 
	`HAL_EXIT_ISR
();

122 
	}
}

	@../../../../Components/hal/target/CC2540USB/hal_dma.h

40 #i‚de‡
HAL_DMA_H


41 
	#HAL_DMA_H


	)

43 #ifde‡
__˝lu•lus


52 
	~"hÆ_bﬂrd.h
"

53 
	~"hÆ_ty≥s.h
"

55 #i‡((
deföed
 
HAL_DMA
Ë&& (HAL_DMA =
TRUE
))

61 
	#HAL_DMA_SET_ADDR_DESC0
–
a
 ) \

62 
	`°
( \

63 
DMA0CFGH
 = (
uöt8
)–(
uöt16
)(
a
) >> 8 ); \

64 
DMA0CFGL
 = (
uöt8
)–(
uöt16
)(
a
) & 0xFF ); \

65 )

	)

67 
	#HAL_DMA_SET_ADDR_DESC1234
–
a
 ) \

68 
	`°
( \

69 
DMA1CFGH
 = (
uöt8
)–(
uöt16
)(
a
) >> 8 ); \

70 
DMA1CFGL
 = (
uöt8
)–(
uöt16
)(
a
) & 0xFF); \

71 )

	)

73 
	#HAL_DMA_GET_DESC0
(Ë&
dmaCh0


	)

75 
	#HAL_DMA_GET_DESC1234
–
a
 ) (
dmaCh1234
+(◊)-1))

	)

77 
	#HAL_DMA_ARM_CH
–
ch
 ) 
DMAARM
 = (0x01 << (ch))

	)

79 
	#HAL_DMA_CH_ARMED
–
ch
 ) (
DMAARM
 & (0x01 << (ch)))

	)

81 
	#HAL_DMA_ABORT_CH
–
ch
 ) 
DMAARM
 = (0x80 | (0x01 << (ch)))

	)

82 
	#HAL_DMA_MAN_TRIGGER
–
ch
 ) 
DMAREQ
 = (0x01 << (ch))

	)

83 
	#HAL_DMA_START_CH
–
ch
 ) 
	`HAL_DMA_MAN_TRIGGER
–(chË)

	)

85 
	#HAL_DMA_CLEAR_IRQ
–
ch
 ) 
DMAIRQ
 &~–1 << (chË)

	)

87 
	#HAL_DMA_CHECK_IRQ
–
ch
 ) (
DMAIRQ
 & ( 1 << (chË))

	)

90 
	#HAL_DMA_SET_SOURCE
–
pDesc
, 
§c
 ) \

91 
	`°
( \

92 
pDesc
->
§cAddrH
 = (
uöt8
)((
uöt16
)(
§c
) >> 8); \

93 
pDesc
->
§cAddrL
 = (
uöt8
)((
uöt16
)(
§c
) & 0xFF); \

94 )

	)

97 
	#HAL_DMA_SET_DEST
–
pDesc
, 
d°
 ) \

98 
	`°
( \

99 
pDesc
->
d°AddrH
 = (
uöt8
)((
uöt16
)(
d°
) >> 8); \

100 
pDesc
->
d°AddrL
 = (
uöt8
)((
uöt16
)(
d°
) & 0xFF); \

101 )

	)

105 
	#HAL_DMA_SET_LEN
–
pDesc
, 
Àn
 ) \

106 
	`°
( \

107 
pDesc
->
x„rLíL
 = (
uöt8
)(
uöt16
)(
Àn
); \

108 
pDesc
->
x„rLíV
 &~
HAL_DMA_LEN_H
; \

109 
pDesc
->
x„rLíV
 |(
uöt8
)((
uöt16
)(
Àn
) >> 8); \

110 )

	)

112 
	#HAL_DMA_GET_LEN
–
pDesc
 ) \

113 (((
uöt16
)(
pDesc
->
x„rLíV
 & 
HAL_DMA_LEN_H
Ë<< 8Ë|ÖDesc->
x„rLíL
)

	)

115 
	#HAL_DMA_SET_VLEN
–
pDesc
, 
vMode
 ) \

116 
	`°
( \

117 
pDesc
->
x„rLíV
 &~
HAL_DMA_LEN_V
; \

118 
pDesc
->
x„rLíV
 |(
vMode
 << 5); \

119 )

	)

121 
	#HAL_DMA_SET_WORD_SIZE
–
pDesc
, 
xSz
 ) \

122 
	`°
( \

123 
pDesc
->
˘æA
 &~
HAL_DMA_WORD_SIZE
; \

124 
pDesc
->
˘æA
 |(
xSz
 << 7); \

125 )

	)

127 
	#HAL_DMA_SET_TRIG_MODE
–
pDesc
, 
tMode
 ) \

128 
	`°
( \

129 
pDesc
->
˘æA
 &~
HAL_DMA_TRIG_MODE
; \

130 
pDesc
->
˘æA
 |(
tMode
 << 5); \

131 )

	)

133 
	#HAL_DMA_GET_TRIG_MODE
–
pDesc
 ) (’Desc->
˘æA
 >> 5Ë& 0x3)

	)

135 
	#HAL_DMA_SET_TRIG_SRC
–
pDesc
, 
tSrc
 ) \

136 
	`°
( \

137 
pDesc
->
˘æA
 &~
HAL_DMA_TRIG_SRC
; \

138 
pDesc
->
˘æA
 |
tSrc
; \

139 )

	)

141 
	#HAL_DMA_SET_SRC_INC
–
pDesc
, 
§cInc
 ) \

142 
	`°
( \

143 
pDesc
->
˘æB
 &~
HAL_DMA_SRC_INC
; \

144 
pDesc
->
˘æB
 |(
§cInc
 << 6); \

145 )

	)

147 
	#HAL_DMA_SET_DST_INC
–
pDesc
, 
d°Inc
 ) \

148 
	`°
( \

149 
pDesc
->
˘æB
 &~
HAL_DMA_DST_INC
; \

150 
pDesc
->
˘æB
 |(
d°Inc
 << 4); \

151 )

	)

153 
	#HAL_DMA_SET_IRQ
–
pDesc
, 
íabÀ
 ) \

154 
	`°
( \

155 
pDesc
->
˘æB
 &~
HAL_DMA_IRQ_MASK
; \

156 
pDesc
->
˘æB
 |(
íabÀ
 << 3); \

157 )

	)

159 
	#HAL_DMA_SET_M8
–
pDesc
, 
m8
 ) \

160 
	`°
( \

161 
pDesc
->
˘æB
 &~
HAL_DMA_M8
; \

162 
pDesc
->
˘æB
 |(
m8
 << 2); \

163 )

	)

165 
	#HAL_DMA_SET_PRIORITY
–
pDesc
, 
¥i
 ) \

166 
	`°
( \

167 
pDesc
->
˘æB
 &~
HAL_DMA_PRIORITY
; \

168 
pDesc
->
˘æB
 |
¥i
; \

169 )

	)

176 
	#HAL_DMA_VLEN_USE_LEN
 0x00

	)

178 
	#HAL_DMA_VLEN_1_P_VALOFFIRST
 0x01

	)

180 
	#HAL_DMA_VLEN_VALOFFIRST
 0x02

	)

182 
	#HAL_DMA_VLEN_1_P_VALOFFIRST_P_1
 0x03

	)

184 
	#HAL_DMA_VLEN_1_P_VALOFFIRST_P_2
 0x04

	)

186 
	#HAL_DMA_WORDSIZE_BYTE
 0x00

	)

187 
	#HAL_DMA_WORDSIZE_WORD
 0x01

	)

189 
	#HAL_DMA_TMODE_SINGLE
 0x00

	)

190 
	#HAL_DMA_TMODE_BLOCK
 0x01

	)

191 
	#HAL_DMA_TMODE_SINGLE_REPEATED
 0x02

	)

192 
	#HAL_DMA_TMODE_BLOCK_REPEATED
 0x03

	)

194 
	#HAL_DMA_TRIG_NONE
 0

	)

195 
	#HAL_DMA_TRIG_PREV
 1

	)

196 
	#HAL_DMA_TRIG_T1_CH0
 2

	)

197 
	#HAL_DMA_TRIG_T1_CH1
 3

	)

198 
	#HAL_DMA_TRIG_T1_CH2
 4

	)

199 
	#HAL_DMA_TRIG_T2_COMP
 5

	)

200 
	#HAL_DMA_TRIG_T2_OVFL
 6

	)

201 
	#HAL_DMA_TRIG_T3_CH0
 7

	)

202 
	#HAL_DMA_TRIG_T3_CH1
 8

	)

203 
	#HAL_DMA_TRIG_T4_CH0
 9

	)

204 
	#HAL_DMA_TRIG_T4_CH1
 10

	)

205 
	#HAL_DMA_TRIG_ST
 11

	)

206 
	#HAL_DMA_TRIG_IOC_0
 12

	)

207 
	#HAL_DMA_TRIG_IOC_1
 13

	)

208 
	#HAL_DMA_TRIG_URX0
 14

	)

209 
	#HAL_DMA_TRIG_UTX0
 15

	)

210 
	#HAL_DMA_TRIG_URX1
 16

	)

211 
	#HAL_DMA_TRIG_UTX1
 17

	)

212 
	#HAL_DMA_TRIG_FLASH
 18

	)

213 
	#HAL_DMA_TRIG_RADIO
 19

	)

214 
	#HAL_DMA_TRIG_ADC_CHALL
 20

	)

215 
	#HAL_DMA_TRIG_ADC_CH0
 21

	)

216 
	#HAL_DMA_TRIG_ADC_CH1
 22

	)

217 
	#HAL_DMA_TRIG_ADC_CH2
 23

	)

218 
	#HAL_DMA_TRIG_ADC_CH3
 24

	)

219 
	#HAL_DMA_TRIG_ADC_CH4
 25

	)

220 
	#HAL_DMA_TRIG_ADC_CH5
 26

	)

221 
	#HAL_DMA_TRIG_ADC_CH6
 27

	)

222 
	#HAL_DMA_TRIG_ADC_CH7
 28

	)

223 
	#HAL_DMA_TRIG_ENC_DW
 29

	)

224 
	#HAL_DMA_TRIG_ENC_UP
 30

	)

226 
	#HAL_DMA_SRCINC_0
 0x00

	)

227 
	#HAL_DMA_SRCINC_1
 0x01

	)

228 
	#HAL_DMA_SRCINC_2
 0x02

	)

229 
	#HAL_DMA_SRCINC_M1
 0x03

	)

231 
	#HAL_DMA_DSTINC_0
 0x00

	)

232 
	#HAL_DMA_DSTINC_1
 0x01

	)

233 
	#HAL_DMA_DSTINC_2
 0x02

	)

234 
	#HAL_DMA_DSTINC_M1
 0x03

	)

236 
	#HAL_DMA_IRQMASK_DISABLE
 0x00

	)

237 
	#HAL_DMA_IRQMASK_ENABLE
 0x01

	)

239 
	#HAL_DMA_M8_USE_8_BITS
 0x00

	)

240 
	#HAL_DMA_M8_USE_7_BITS
 0x01

	)

242 
	#HAL_DMA_PRI_LOW
 0x00

	)

243 
	#HAL_DMA_PRI_GUARANTEED
 0x01

	)

244 
	#HAL_DMA_PRI_HIGH
 0x02

	)

245 
	#HAL_DMA_PRI_ABSOLUTE
 0x03

	)

247 
	#HAL_DMA_MAX_ARM_CLOCKS
 45

248 

	)

254 
	#HAL_DMA_LEN_V
 0xE0

	)

255 
	#HAL_DMA_LEN_H
 0x1F

	)

258 
	#HAL_DMA_WORD_SIZE
 0x80

	)

259 
	#HAL_DMA_TRIG_MODE
 0x60

	)

260 
	#HAL_DMA_TRIG_SRC
 0x1F

	)

263 
	#HAL_DMA_SRC_INC
 0xC0

	)

264 
	#HAL_DMA_DST_INC
 0x30

	)

265 
	#HAL_DMA_IRQ_MASK
 0x08

	)

266 
	#HAL_DMA_M8
 0x04

	)

267 
	#HAL_DMA_PRIORITY
 0x03

	)

270 
uöt8
 
§cAddrH
;

271 
uöt8
 
§cAddrL
;

272 
uöt8
 
d°AddrH
;

273 
uöt8
 
d°AddrL
;

274 
uöt8
 
x„rLíV
;

275 
uöt8
 
x„rLíL
;

276 
uöt8
 
˘æA
;

277 
uöt8
 
˘æB
;

278 } 
	thÆDMADesc_t
;

284 
hÆDMADesc_t
 
dmaCh0
;

285 
hÆDMADesc_t
 
dmaCh1234
[4];

291 
HÆDmaInô
( );

295 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2540USB/hal_flash.c

45 
	~"hÆ_bﬂrd_cfg.h
"

46 
	~"hÆ_dma.h
"

47 
	~"hÆ_Êash.h
"

48 
	~"hÆ_ty≥s.h
"

69 
	$HÆFœshRód
(
uöt8
 
pg
, 
uöt16
 
off£t
, uöt8 *
buf
, uöt16 
˙t
)

72 
uöt8
 *
±r
 = (uöt8 *)(
off£t
 + 
HAL_FLASH_PAGE_MAP
) +

73 ((
pg
 % 
HAL_FLASH_PAGE_PER_BANK
Ë* 
HAL_FLASH_PAGE_SIZE
);

74 
uöt8
 
mem˘r
 = 
MEMCTR
;

76 #i‡!
deföed
 
HAL_OAD_BOOT_CODE


77 
hÆI¡Sèã_t
 
is
;

80 
pg
 /
HAL_FLASH_PAGE_PER_BANK
;

82 #i‡!
deföed
 
HAL_OAD_BOOT_CODE


83 
	`HAL_ENTER_CRITICAL_SECTION
(
is
);

87 
MEMCTR
 = (MEMCTR & 0xF8Ë| 
pg
;

89 
˙t
--)

91 *
buf
++ = *
±r
++;

94 
MEMCTR
 = 
mem˘r
;

96 #i‡!
deföed
 
HAL_OAD_BOOT_CODE


97 
	`HAL_EXIT_CRITICAL_SECTION
(
is
);

99 
	}
}

119 
	$HÆFœshWrôe
(
uöt16
 
addr
, 
uöt8
 *
buf
, uöt16 
˙t
)

121 #i‡(
deföed
 
HAL_DMA
Ë&& (HAL_DMA =
TRUE
)

122 
hÆDMADesc_t
 *
ch
 = 
	`HAL_NV_DMA_GET_DESC
();

124 
	`HAL_DMA_SET_SOURCE
(
ch
, 
buf
);

125 
	`HAL_DMA_SET_DEST
(
ch
, &
FWDATA
);

126 
	`HAL_DMA_SET_VLEN
(
ch
, 
HAL_DMA_VLEN_USE_LEN
);

127 
	`HAL_DMA_SET_LEN
(
ch
, (
˙t
 * 
HAL_FLASH_WORD_SIZE
));

128 
	`HAL_DMA_SET_WORD_SIZE
(
ch
, 
HAL_DMA_WORDSIZE_BYTE
);

129 
	`HAL_DMA_SET_TRIG_MODE
(
ch
, 
HAL_DMA_TMODE_SINGLE
);

130 
	`HAL_DMA_SET_TRIG_SRC
(
ch
, 
HAL_DMA_TRIG_FLASH
);

131 
	`HAL_DMA_SET_SRC_INC
(
ch
, 
HAL_DMA_SRCINC_1
);

132 
	`HAL_DMA_SET_DST_INC
(
ch
, 
HAL_DMA_DSTINC_0
);

134 
	`HAL_DMA_SET_IRQ
(
ch
, 
HAL_DMA_IRQMASK_DISABLE
);

135 
	`HAL_DMA_SET_M8
–
ch
, 
HAL_DMA_M8_USE_8_BITS
);

136 
	`HAL_DMA_SET_PRIORITY
(
ch
, 
HAL_DMA_PRI_HIGH
);

137 
	`HAL_DMA_CLEAR_IRQ
(
HAL_NV_DMA_CH
);

138 
	`HAL_DMA_ARM_CH
(
HAL_NV_DMA_CH
);

140 
FADDRL
 = (
uöt8
)
addr
;

141 
FADDRH
 = (
uöt8
)(
addr
 >> 8);

142 
FCTL
 |= 0x02;

143 
FCTL
 & 0x80);

145 
	}
}

163 
	$HÆFœshEø£
(
uöt8
 
pg
)

165 
FADDRH
 = 
pg
 * (
HAL_FLASH_PAGE_SIZE
 / 
HAL_FLASH_WORD_SIZE
 / 256);

166 
FCTL
 |= 0x01;

167 
	}
}

	@../../../../Components/hal/target/CC2540USB/hal_key.c

45 
	~"hÆ_bﬂrd.h
"

46 
	~"hÆ_drivîs.h
"

47 
	~"hÆ_key.h
"

48 
	~"hÆ_ty≥s.h
"

49 
	~"oßl.h
"

50 
	~"usb_öãºu±.h
"

52 #i‡(
deföed
 
HAL_KEY
Ë&& (HAL_KEY =
TRUE
)

59 
	#HAL_KEY_CLR_INT
() \

60 
	`°
 ( \

62 
P1IFG
 = 0; \

63 
P1IF
 = 0; \

64 )

	)

81 
uöt8
 
	gHÆ_KeyI¡E«bÀ
;

93 
hÆKeyCBack_t
 
	gpHÆKeyPro˚ssFun˘i⁄
;

94 vﬁ©ûê
uöt8
 
	gi§Keys
;

95 
uöt8
 
	ghÆKeys
;

118 
	$HÆKeyInô
()

120 
	}
}

139 
	$HÆKeyC⁄fig
(
boﬁ
 
öãºu±E«bÀ
, 
hÆKeyCBack_t
 
cback
)

141 i‡((
HÆ_KeyI¡E«bÀ
 = 
öãºu±E«bÀ
))

143 
	`HAL_KEY_CLR_INT
();

144 
PICTL
 |= 0x01;

145 
P1IEN
 |
PUSH1_BV
 | 
PUSH2_BV
;

146 
IEN2
 |= 0x10;

150 ()
	`oßl_£t_evít
(
HÆ_TaskID
, 
HAL_KEY_EVENT
);

153 
pHÆKeyPro˚ssFun˘i⁄
 = 
cback
;

154 
	}
}

172 
	$HÆKeyPﬁl
()

174 
uöt8
 
√wKeys
;

176 i‡(
HÆ_KeyI¡E«bÀ
)

178 
hÆI¡Sèã_t
 
ötSèã
;

179 
	`HAL_ENTER_CRITICAL_SECTION
(
ötSèã
);

180 
√wKeys
 = 
i§Keys
;

181 
i§Keys
 = 0;

182 
	`HAL_EXIT_CRITICAL_SECTION
(
ötSèã
);

186 
uöt8
 
keys
 = 
	`HÆKeyRód
();

187 
√wKeys
 = (
hÆKeys
 ^ 
keys
) & keys;

188 
hÆKeys
 = 
keys
;

191 i‡(
√wKeys
 && 
pHÆKeyPro˚ssFun˘i⁄
)

193 (
pHÆKeyPro˚ssFun˘i⁄
)(
√wKeys
, 
HAL_KEY_STATE_NORMAL
);

195 
	}
}

213 
uöt8
 
	$HÆKeyRód
()

215 
uöt8
 
keys
 = 0;

217 i‡(
	`HAL_PUSH_BUTTON1
())

219 
keys
 |
HAL_KEY_SW_1
;

222 i‡(
	`HAL_PUSH_BUTTON2
())

224 
keys
 |
HAL_KEY_SW_2
;

227  
keys
;

228 
	}
}

239 
	$HÆKeyE¡îSÀï
 ( )

241 
	}
}

252 
uöt8
 
	$HÆKeyExôSÀï
 ( )

255  ( 
	`HÆKeyRód
 () );

256 
	}
}

274 
	$HAL_ISR_FUNCTION
–
usbKeyISR
, 
P1INT_VECTOR
 )

276 
	`HAL_ENTER_ISR
();

278 i‡(
P1IFG
 & 
PUSH1_BV
)

280 
i§Keys
 |
HAL_KEY_SW_1
;

283 i‡(
P1IFG
 & 
PUSH2_BV
)

285 
i§Keys
 |
HAL_KEY_SW_2
;

288 
	`HAL_KEY_CLR_INT
();

289 ()
	`oßl_£t_evít
(
HÆ_TaskID
, 
HAL_KEY_EVENT
);

291 
	`CLEAR_SLEEP_MODE
();

293 
	`HAL_EXIT_ISR
();

296 
	}
}

300 
	$HÆKeyInô
(){
	}
}

301 
	$HÆKeyC⁄fig
(
boﬁ
 
öãºu±E«bÀ
, 
hÆKeyCBack_t
 
cback
){
	}
}

302 
uöt8
 
	$HÆKeyRód
(){  0;
	}
}

303 
	$HÆKeyPﬁl
(){
	}
}

	@../../../../Components/hal/target/CC2540USB/hal_lcd.c

43 
	~"hÆ_ty≥s.h
"

44 
	~"hÆ_lcd.h
"

45 
	~"OSAL.h
"

46 
	~"OnBﬂrd.h
"

47 
	~"hÆ_as£π.h
"

49 #i‡
deföed
 (
ZTOOL_P1
Ë|| deföed (
ZTOOL_P2
)

50 
	~"DebugTø˚.h
"

71 
	#HAL_LCD_MAX_CHARS
 16

	)

72 
	#HAL_LCD_MAX_BUFF
 25

	)

75 
	#HAL_LCD_MODE_PORT
 0

	)

76 
	#HAL_LCD_MODE_PIN
 0

	)

78 
	#HAL_LCD_RESET_PORT
 1

	)

79 
	#HAL_LCD_RESET_PIN
 1

	)

81 
	#HAL_LCD_CS_PORT
 1

	)

82 
	#HAL_LCD_CS_PIN
 2

	)

85 
	#HAL_LCD_CLK_PORT
 1

	)

86 
	#HAL_LCD_CLK_PIN
 5

	)

88 
	#HAL_LCD_MOSI_PORT
 1

	)

89 
	#HAL_LCD_MOSI_PIN
 6

	)

91 
	#HAL_LCD_MISO_PORT
 1

	)

92 
	#HAL_LCD_MISO_PIN
 7

	)

95 
	#HAL_SPI_CLOCK_POL_LO
 0x00

	)

96 
	#HAL_SPI_CLOCK_PHA_0
 0x00

	)

97 
	#HAL_SPI_TRANSFER_MSB_FIRST
 0x20

	)

100 
	#LCD_MAX_LINE_COUNT
 3

	)

105 
	#OSC_OFF
 0x00

	)

106 
	#OSC_ON
 0x01

	)

107 
	#POWER_SAVE_OFF
 0x00

	)

108 
	#POWER_SAVE_ON
 0x02

	)

109 
	#SET_POWER_SAVE_MODE
(
›ti⁄s
Ë
	`HÆLcd_HW_C⁄åﬁ
(0x0C | (›ti⁄s))

	)

112 
	#CGROM
 0x00

	)

113 
	#CGRAM
 0x01

	)

114 
	#COM_FORWARD
 0x00

	)

115 
	#COM_BACKWARD
 0x02

	)

116 
	#TWO_LINE
 0x00

	)

117 
	#THREE_LINE
 0x04

	)

118 
	#FUNCTION_SET
(
›ti⁄s
Ë
	`HÆLcd_HW_C⁄åﬁ
(0x10 | (›ti⁄s))

	)

121 
	#LINE1
 0x00

	)

122 
	#LINE2
 0x01

	)

123 
	#LINE3
 0x02

	)

124 
	#LINE4
 0x03

	)

125 
	#SET_DISPLAY_START_LINE
(
löe
Ë
	`HÆLcd_HW_C⁄åﬁ
(0x18 | (löe))

	)

128 
	#BIAS_1_5
 0x00

	)

129 
	#BIAS_1_4
 0x01

	)

130 
	#SET_BIAS_CTRL
(
büs
Ë
	`HÆLcd_HW_C⁄åﬁ
(0x1C | (büs))

	)

133 
	#VOLTAGE_DIVIDER_OFF
 0x00

	)

134 
	#VOLTAGE_DIVIDER_ON
 0x01

	)

135 
	#CONVERTER_AND_REG_OFF
 0x00

	)

136 
	#CONVERTER_AND_REG_ON
 0x04

	)

137 
	#SET_POWER_CTRL
(
›ti⁄s
Ë
	`HÆLcd_HW_C⁄åﬁ
(0x20 | (›ti⁄s))

	)

140 
	#DISPLAY_CTRL_ON
 0x01

	)

141 
	#DISPLAY_CTRL_OFF
 0x00

	)

142 
	#DISPLAY_CTRL_BLINK_ON
 0x02

	)

143 
	#DISPLAY_CTRL_BLINK_OFF
 0x00

	)

144 
	#DISPLAY_CTRL_CURSOR_ON
 0x04

	)

145 
	#DISPLAY_CTRL_CURSOR_OFF
 0x00

	)

146 
	#SET_DISPLAY_CTRL
(
›ti⁄s
Ë
	`HÆLcd_HW_C⁄åﬁ
(0x28 | (›ti⁄s))

	)

149 
	#SET_DDRAM_ADDR
(
ch¨Index
Ë
	`HÆLcd_HW_C⁄åﬁ
(0x80 | (ch¨Index))

	)

150 
	#SET_GCRAM_CHAR
(
•ecIndex
Ë
	`HÆLcd_HW_C⁄åﬁ
(0xC0 | (•ecIndex))

	)

153 
	#CONTRAST_CTRL_REGISTER
 0x10

	)

154 
	#SET_ICONRAM_ADDR
(
addr
Ë
	`HÆLcd_HW_C⁄åﬁ
(0x40 | (addr))

	)

157 
	#LINE_1_AND_2
 0x01

	)

158 
	#LINE_2_AND_3
 0x02

	)

159 
	#NORMAL_DISPLAY
 0x00

	)

160 
	#SET_DOUBLE_HEIGHT
(
›ti⁄s
Ë
	`HÆLcd_HW_C⁄åﬁ
(0x08 | (›ti⁄s))

	)

166 
	#HAL_IO_SET
(
p‹t
, 
pö
, 
vÆ
Ë
	`HAL_IO_SET_PREP
’‹t,Öö, vÆ)

	)

167 
	#HAL_IO_SET_PREP
(
p‹t
, 
pö
, 
vÆ
Ë
	`°
–
P
##p‹t##
_
##pö## = vÆ; )

	)

169 
	#HAL_CONFIG_IO_OUTPUT
(
p‹t
, 
pö
, 
vÆ
Ë
	`HAL_CONFIG_IO_OUTPUT_PREP
’‹t,Öö, vÆ)

	)

170 
	#HAL_CONFIG_IO_OUTPUT_PREP
(
p‹t
, 
pö
, 
vÆ
Ë
	`°
–
P
##p‹t##
SEL
 &~
	`BV
(pin); \

171 
P
##
p‹t
##
_
##
pö
## = 
vÆ
; \

172 
P
##
p‹t
##
DIR
 |
	`BV
(
pö
); )

	)

174 
	#HAL_CONFIG_IO_PERIPHERAL
(
p‹t
, 
pö
Ë
	`HAL_CONFIG_IO_PERIPHERAL_PREP
’‹t,Öö)

	)

175 
	#HAL_CONFIG_IO_PERIPHERAL_PREP
(
p‹t
, 
pö
Ë
	`°
–
P
##p‹t##
SEL
 |
	`BV
’ö); )

	)

180 
	#LCD_SPI_BEGIN
(Ë
	`HAL_IO_SET
(
HAL_LCD_CS_PORT
, 
HAL_LCD_CS_PIN
, 0);

	)

181 
	#LCD_SPI_END
() \

183 
	`asm
("NOP"); \

184 
	`asm
("NOP"); \

185 
	`asm
("NOP"); \

186 
	`asm
("NOP"); \

187 
	`HAL_IO_SET
(
HAL_LCD_CS_PORT
, 
HAL_LCD_CS_PIN
, 1); \

188 }

	)

190 
	#LCD_SPI_TX
(
x
Ë{ 
U1CSR
 &~(
	`BV
(2Ë| BV(1)); 
U1DBUF
 = x;  !(U1CSR & BV(1)Ë); }

	)

191 
	#LCD_SPI_WAIT_RXRDY
(Ë{ !(
U1CSR
 & 
	`BV
(1))); }

	)

195 
	#LCD_DO_WRITE
(Ë
	`HAL_IO_SET
(
HAL_LCD_MODE_PORT
, 
HAL_LCD_MODE_PIN
, 1);

	)

196 
	#LCD_DO_CONTROL
(Ë
	`HAL_IO_SET
(
HAL_LCD_MODE_PORT
, 
HAL_LCD_MODE_PIN
, 0);

	)

198 
	#LCD_ACTIVATE_RESET
(Ë
	`HAL_IO_SET
(
HAL_LCD_RESET_PORT
, 
HAL_LCD_RESET_PIN
, 0);

	)

199 
	#LCD_RELEASE_RESET
(Ë
	`HAL_IO_SET
(
HAL_LCD_RESET_PORT
, 
HAL_LCD_RESET_PIN
, 1);

	)

205 #i‡(
HAL_LCD
 =
TRUE
)

206 
uöt8
 *
	gLcd_Löe1
;

212 #i‡(
HAL_LCD
 =
TRUE
)

213 
HÆLcd_HW_Inô
();

214 
HÆLcd_HW_WaôUs
(
uöt16
 
i
);

215 
HÆLcd_HW_CÀ¨
();

216 
HÆLcd_HW_CÀ¨AŒS≥cCh¨s
();

217 
HÆLcd_HW_C⁄åﬁ
(
uöt8
 
cmd
);

218 
HÆLcd_HW_Wrôe
(
uöt8
 
d©a
);

219 
HÆLcd_HW_SëC⁄åa°
(
uöt8
 
vÆue
);

220 
HÆLcd_HW_WrôeCh¨
(
uöt8
 
löe
, uöt8 
cﬁ
, 
ãxt
);

221 
HÆLcd_HW_WrôeLöe
(
uöt8
 
löe
, c⁄° *
pText
);

233 
	$HÆLcdInô
()

235 #i‡(
HAL_LCD
 =
TRUE
)

236 
Lcd_Löe1
 = 
NULL
;

237 
	`HÆLcd_HW_Inô
();

239 
	}
}

269 
	$HÆLcdWrôeSåög
 ( *
°r
, 
uöt8
 
›ti⁄
)

271 #i‡(
HAL_LCD
 =
TRUE
)

273 
uöt8
 
°rLí
 = 0;

274 
uöt8
 
tŸÆLí
 = 0;

275 
uöt8
 *
buf
;

276 
uöt8
 
tmpLí
;

278 i‡–
Lcd_Löe1
 =
NULL
 )

280 
Lcd_Löe1
 = 
	`oßl_mem_Æloc
–
HAL_LCD_MAX_CHARS
+1 );

281 
	`HÆLcdWrôeSåög
( "Texas Instruments", 1 );

284 
°rLí
 = (
uöt8
)
	`oßl_°æí
–(*)
°r
 );

287 i‡–
°rLí
 > 
HAL_LCD_MAX_CHARS
 )

288 
°rLí
 = 
HAL_LCD_MAX_CHARS
;

290 i‡–
›ti⁄
 =
HAL_LCD_LINE_1
 )

293 
	`oßl_mem˝y
–
Lcd_Löe1
, 
°r
, 
°rLí
 );

294 
Lcd_Löe1
[
°rLí
] = '\0';

299 
tmpLí
 = (
uöt8
)
	`oßl_°æí
–(*)
Lcd_Löe1
 );

300 
tŸÆLí
 = 
tmpLí
 + 1 + 
°rLí
 + 1;

301 
buf
 = 
	`oßl_mem_Æloc
–
tŸÆLí
 );

302 i‡–
buf
 !
NULL
 )

305 
	`oßl_mem˝y
–
buf
, 
Lcd_Löe1
, 
tmpLí
 );

306 
buf
[
tmpLí
++] = ' ';

307 
	`oßl_mem˝y
–&
buf
[
tmpLí
], 
°r
, 
°rLí
 );

308 
buf
[
tmpLí
+
°rLí
] = '\0';

311 #i‡
	`deföed
 (
ZTOOL_P1
Ë|| deföed (
ZTOOL_P2
)

313 #i‡
	`deföed
(
SERIAL_DEBUG_SUPPORTED
)

314 
	`debug_°r
–(
uöt8
*)
buf
 );

320 
	`oßl_mem_‰ì
–
buf
 );

325 
	`HÆLcd_HW_WrôeLöe
 (
›ti⁄
, 
°r
);

329 
	}
}

342 
	$HÆLcdWrôeVÆue
 ( 
uöt32
 
vÆue
, c⁄° 
uöt8
 
ødix
, uöt8 
›ti⁄
)

344 #i‡(
HAL_LCD
 =
TRUE
)

345 
uöt8
 
buf
[
HAL_LCD_MAX_BUFF
];

347 
	`_…ﬂ
–
vÆue
, &
buf
[0], 
ødix
 );

348 
	`HÆLcdWrôeSåög
–(*)
buf
, 
›ti⁄
 );

350 
	}
}

362 
	$HÆLcdWrôeS¸ìn
–*
löe1
, *
löe2
 )

364 #i‡(
HAL_LCD
 =
TRUE
)

365 
	`HÆLcdWrôeSåög
–
löe1
, 1 );

366 
	`HÆLcdWrôeSåög
–
löe2
, 2 );

368 
	}
}

382 
	$HÆLcdWrôeSåögVÆue
–*
tôÀ
, 
uöt16
 
vÆue
, 
uöt8
 
f‹m©
, uöt8 
löe
 )

384 #i‡(
HAL_LCD
 =
TRUE
)

385 
uöt8
 
tmpLí
;

386 
uöt8
 
buf
[
HAL_LCD_MAX_BUFF
];

387 
uöt32
 
îr
;

389 
tmpLí
 = (
uöt8
)
	`oßl_°æí
–(*)
tôÀ
 );

390 
	`oßl_mem˝y
–
buf
, 
tôÀ
, 
tmpLí
 );

391 
buf
[
tmpLí
] = ' ';

392 
îr
 = (
uöt32
)(
vÆue
);

393 
	`_…ﬂ
–
îr
, &
buf
[
tmpLí
+1], 
f‹m©
 );

394 
	`HÆLcdWrôeSåög
–(*)
buf
, 
löe
 );

396 
	}
}

412 
	$HÆLcdWrôeSåögVÆueVÆue
–*
tôÀ
, 
uöt16
 
vÆue1
, 
uöt8
 
f‹m©1
,

413 
uöt16
 
vÆue2
, 
uöt8
 
f‹m©2
, uöt8 
löe
 )

416 #i‡(
HAL_LCD
 =
TRUE
)

418 
uöt8
 
tmpLí
;

419 
uöt8
 
buf
[
HAL_LCD_MAX_BUFF
];

420 
uöt32
 
îr
;

422 
tmpLí
 = (
uöt8
)
	`oßl_°æí
–(*)
tôÀ
 );

423 i‡–
tmpLí
 )

425 
	`oßl_mem˝y
–
buf
, 
tôÀ
, 
tmpLí
 );

426 
buf
[
tmpLí
++] = ' ';

429 
îr
 = (
uöt32
)(
vÆue1
);

430 
	`_…ﬂ
–
îr
, &
buf
[
tmpLí
], 
f‹m©1
 );

431 
tmpLí
 = (
uöt8
)
	`oßl_°æí
–(*)
buf
 );

433 
buf
[
tmpLí
++] = ',';

434 
buf
[
tmpLí
++] = ' ';

435 
îr
 = (
uöt32
)(
vÆue2
);

436 
	`_…ﬂ
–
îr
, &
buf
[
tmpLí
], 
f‹m©2
 );

438 
	`HÆLcdWrôeSåög
–(*)
buf
, 
löe
 );

441 
	}
}

453 
	$HÆLcdDi•œyPî˚¡B¨
–*
tôÀ
, 
uöt8
 
vÆue
 )

455 #i‡(
HAL_LCD
 =
TRUE
)

457 
uöt8
 
≥r˚¡
;

458 
uöt8
 
À·Ovî
;

459 
uöt8
 
buf
[17];

460 
uöt32
 
îr
;

461 
uöt8
 
x
;

464 
	`HÆLcdWrôeSåög
–
tôÀ
, 
HAL_LCD_LINE_1
 );

466 i‡–
vÆue
 > 100 )

467 
vÆue
 = 100;

470 
≥r˚¡
 = (
uöt8
)(
vÆue
 / 10);

471 
À·Ovî
 = (
uöt8
)(
vÆue
 % 10);

474 
	`oßl_mem˝y
–
buf
, "[ ] ", 15 );

476  
x
 = 0; x < 
≥r˚¡
; x ++ )

478 
buf
[1+
x
] = '>';

481 i‡–
À·Ovî
 >= 5 )

482 
buf
[1+
x
] = '+';

484 
îr
 = (
uöt32
)
vÆue
;

485 
	`_…ﬂ
–
îr
, (
uöt8
*)&
buf
[13], 10 );

487 
	`HÆLcdWrôeSåög
–(*)
buf
, 
HAL_LCD_LINE_2
 );

491 
	}
}

494 #i‡(
HAL_LCD
 =
TRUE
)

508 
	$hÆLcd_C⁄figIO
()

511 
	`HAL_CONFIG_IO_OUTPUT
(
HAL_LCD_MODE_PORT
, 
HAL_LCD_MODE_PIN
, 1);

512 
	`HAL_CONFIG_IO_OUTPUT
(
HAL_LCD_RESET_PORT
, 
HAL_LCD_RESET_PIN
, 1);

513 
	`HAL_CONFIG_IO_OUTPUT
(
HAL_LCD_CS_PORT
, 
HAL_LCD_CS_PIN
, 1);

514 
	}
}

525 
	$hÆLcd_C⁄figSPI
()

529 
uöt8
 
baud_exp⁄ít
;

530 
uöt8
 
baud_m™tisß
;

533 
PERCFG
 |= 0x02;

536 
	`HAL_CONFIG_IO_PERIPHERAL
(
HAL_LCD_CLK_PORT
, 
HAL_LCD_CLK_PIN
);

537 
	`HAL_CONFIG_IO_PERIPHERAL
(
HAL_LCD_MOSI_PORT
, 
HAL_LCD_MOSI_PIN
);

538 
	`HAL_CONFIG_IO_PERIPHERAL
(
HAL_LCD_MISO_PORT
, 
HAL_LCD_MISO_PIN
);

544 
baud_exp⁄ít
 = 15;

545 
baud_m™tisß
 = 0;

548 
U1UCR
 = 0x80;

549 
U1CSR
 = 0x00;

550 
U1GCR
 = 
HAL_SPI_TRANSFER_MSB_FIRST
 | 
HAL_SPI_CLOCK_PHA_0
 | 
HAL_SPI_CLOCK_POL_LO
 | 
baud_exp⁄ít
;

551 
U1BAUD
 = 
baud_m™tisß
;

552 
	}
}

563 
	$HÆLcd_HW_Inô
()

566 
	`hÆLcd_C⁄figIO
();

569 
	`hÆLcd_C⁄figSPI
();

572 
	`LCD_ACTIVATE_RESET
();

573 
	`HÆLcd_HW_WaôUs
(15000);

574 
	`LCD_RELEASE_RESET
();

575 
	`HÆLcd_HW_WaôUs
(15);

578 
	`FUNCTION_SET
(
CGRAM
 | 
COM_FORWARD
 | 
THREE_LINE
);

581 
	`HÆLcd_HW_SëC⁄åa°
(15);

584 
	`SET_POWER_SAVE_MODE
(
OSC_OFF
 | 
POWER_SAVE_ON
);

585 
	`SET_POWER_CTRL
(
VOLTAGE_DIVIDER_ON
 | 
CONVERTER_AND_REG_ON
);

586 
	`SET_BIAS_CTRL
(
BIAS_1_5
);

587 
	`HÆLcd_HW_WaôUs
(21000);

590 
	`HÆLcd_HW_CÀ¨
();

591 
	`HÆLcd_HW_CÀ¨AŒS≥cCh¨s
();

592 
	`SET_DISPLAY_CTRL
(
DISPLAY_CTRL_ON
 | 
DISPLAY_CTRL_BLINK_OFF
 | 
DISPLAY_CTRL_CURSOR_OFF
);

593 
	}
}

604 
	$HÆLcd_HW_C⁄åﬁ
(
uöt8
 
cmd
)

606 
	`LCD_SPI_BEGIN
();

607 
	`LCD_DO_CONTROL
();

608 
	`LCD_SPI_TX
(
cmd
);

609 
	`LCD_SPI_WAIT_RXRDY
();

610 
	`LCD_SPI_END
();

611 
	}
}

622 
	$HÆLcd_HW_Wrôe
(
uöt8
 
d©a
)

624 
	`LCD_SPI_BEGIN
();

625 
	`LCD_DO_WRITE
();

626 
	`LCD_SPI_TX
(
d©a
);

627 
	`LCD_SPI_WAIT_RXRDY
();

628 
	`LCD_SPI_END
();

629 
	}
}

640 
	$HÆLcd_HW_SëC⁄åa°
(
uöt8
 
vÆue
)

642 
	`SET_ICONRAM_ADDR
(
CONTRAST_CTRL_REGISTER
);

643 
	`HÆLcd_HW_Wrôe
(
vÆue
);

644 
	}
}

655 
	$HÆLcd_HW_CÀ¨
()

657 
uöt8
 
n
;

659 
	`SET_DDRAM_ADDR
(0x00);

660 
n
 = 0;Ç < (
LCD_MAX_LINE_COUNT
 * 
HAL_LCD_MAX_CHARS
);Ç++)

662 
	`HÆLcd_HW_Wrôe
(' ');

664 
	}
}

675 
	$HÆLcd_HW_CÀ¨AŒS≥cCh¨s
()

677 
uöt8
 
n
 = 0;

679 
	`SET_GCRAM_CHAR
(0);

680 
n
 = 0;Ç < (8 * 8);Ç++)

682 
	`HÆLcd_HW_Wrôe
(0x00);

684 
	}
}

696 
	$HÆLcd_HW_WrôeCh¨
(
uöt8
 
löe
, uöt8 
cﬁ
, 
ãxt
)

698 i‡(
cﬁ
 < 
HAL_LCD_MAX_CHARS
)

700 
	`SET_DDRAM_ADDR
((
löe
 - 1Ë* 
HAL_LCD_MAX_CHARS
 + 
cﬁ
);

701 
	`HÆLcd_HW_Wrôe
(
ãxt
);

707 
	}
}

719 
	$HÆLcd_HW_WrôeLöe
(
uöt8
 
löe
, c⁄° *
pText
)

721 
uöt8
 
cou¡
;

722 
uöt8
 
tŸÆLígth
 = (uöt8)
	`oßl_°æí
–(*)
pText
 );

725 
cou¡
=0; cou¡<
tŸÆLígth
; count++)

727 
	`HÆLcd_HW_WrôeCh¨
(
löe
, 
cou¡
, (*(
pText
++)));

731 
cou¡
=
tŸÆLígth
; cou¡<
HAL_LCD_MAX_CHARS
;count++)

733 
	`HÆLcd_HW_WrôeCh¨
(
löe
, 
cou¡
, ' ');

735 
	}
}

746 
	$HÆLcd_HW_WaôUs
(
uöt16
 
mi¸oSecs
)

748 
mi¸oSecs
--)

751 
	`asm
("nop");ásm("nop");ásm("nop");ásm("nop");ásm("nop");

752 
	`asm
("nop");ásm("nop");ásm("nop");ásm("nop");ásm("nop");

753 
	`asm
("nop");ásm("nop");ásm("nop");ásm("nop");ásm("nop");

754 
	`asm
("nop");ásm("nop");ásm("nop");ásm("nop");ásm("nop");

755 
	`asm
("nop");ásm("nop");ásm("nop");ásm("nop");ásm("nop");

756 
	`asm
("nop");ásm("nop");ásm("nop");ásm("nop");ásm("nop");

757 
	`asm
("nop");ásm("nop");

759 
	}
}

	@../../../../Components/hal/target/CC2540USB/hal_led.c

44 
	~"hÆ_mcu.h
"

45 
	~"hÆ_defs.h
"

46 
	~"hÆ_ty≥s.h
"

47 
	~"hÆ_drivîs.h
"

48 
	~"hÆ_Àd.h
"

49 
	~"oßl.h
"

50 
	~"hÆ_bﬂrd.h
"

58 
uöt8
 
	mmode
;

59 
uöt8
 
	mÀ·
;

60 
uöt8
 
	m⁄P˘
;

61 
uöt16
 
	mtime
;

62 
uöt32
 
	m√xt
;

63 } 
	tHÆLedC⁄åﬁ_t
;

67 
HÆLedC⁄åﬁ_t
 
	mHÆLedC⁄åﬁTabÀ
[
HAL_LED_DEFAULT_MAX_LEDS
];

68 
uöt8
 
	m¶ìpA˘ive
;

69 } 
	tHÆLedSètus_t
;

75 
uöt8
 
	gHÆLedSèã
;

77 #i‡
HAL_LED
 =
TRUE


78 
uöt8
 
	gHÆSÀïLedSèã
;

79 
uöt8
 
	g¥eBlökSèã
;

83 #ifde‡
BLINK_LEDS


84 
HÆLedSètus_t
 
	gHÆLedSètusC⁄åﬁ
;

91 #i‡(
HAL_LED
 =
TRUE
)

92 
HÆLedUpd©e
 ();

93 
HÆLedOnOff
 (
uöt8
 
Àds
, uöt8 
mode
);

109 
	$HÆLedInô
 ()

111 #i‡(
HAL_LED
 =
TRUE
)

112 
	`HÆLedSë
(
HAL_LED_ALL
, 
HAL_LED_MODE_OFF
);

115 
LED1_DDR
 |
LED1_BV
;

116 #i‡(!
deföed
 
HAL_PA_LNA
 && !deföed 
HAL_PA_LNA_CC2590
)

117 
LED2_DDR
 |
LED2_BV
;

118 #i‡(!
deföed
 
CC2540_MINIDK
 && !deföed 
HAL_BOARD_CC2540USB
)

119 
LED3_DDR
 |
LED3_BV
;

122 #i‡
deföed
 
BLINK_LEDS


123 
HÆLedSètusC⁄åﬁ
.
¶ìpA˘ive
 = 
FALSE
;

126 
	}
}

137 
uöt8
 
	$HÆLedSë
 (
uöt8
 
Àds
, uöt8 
mode
)

140 #i‡(
	`deföed
 (
BLINK_LEDS
)Ë&& (
HAL_LED
 =
TRUE
)

141 
uöt8
 
Àd
;

142 
HÆLedC⁄åﬁ_t
 *
°s
;

144 
mode
)

146 
HAL_LED_MODE_BLINK
:

148 
	`HÆLedBlök
 (
Àds
, 1, 
HAL_LED_DEFAULT_DUTY_CYCLE
, 
HAL_LED_DEFAULT_FLASH_TIME
);

151 
HAL_LED_MODE_FLASH
:

153 
	`HÆLedBlök
 (
Àds
, 
HAL_LED_DEFAULT_FLASH_COUNT
, 
HAL_LED_DEFAULT_DUTY_CYCLE
, 
HAL_LED_DEFAULT_FLASH_TIME
);

156 
HAL_LED_MODE_ON
:

157 
HAL_LED_MODE_OFF
:

158 
HAL_LED_MODE_TOGGLE
:

160 
Àd
 = 
HAL_LED_1
;

161 
Àds
 &
HAL_LED_ALL
;

162 
°s
 = 
HÆLedSètusC⁄åﬁ
.
HÆLedC⁄åﬁTabÀ
;

164 
Àds
)

166 i‡(
Àds
 & 
Àd
)

168 i‡(
mode
 !
HAL_LED_MODE_TOGGLE
)

170 
°s
->
mode
 = mode;

174 
°s
->
mode
 ^
HAL_LED_MODE_ON
;

176 
	`HÆLedOnOff
 (
Àd
, 
°s
->
mode
);

177 
Àds
 ^
Àd
;

179 
Àd
 <<= 1;

180 
°s
++;

188 #ñi‡(
HAL_LED
 =
TRUE
)

189 
	`LedOnOff
(
Àds
, 
mode
);

192 (Ë
Àds
;

193 (Ë
mode
;

196  ( 
HÆLedSèã
 );

197 
	}
}

212 
	$HÆLedBlök
 (
uöt8
 
Àds
, uöt8 
numBlöks
, uöt8 
≥r˚¡
, 
uöt16
 
≥riod
)

214 #i‡(
	`deföed
 (
BLINK_LEDS
)Ë&& (
HAL_LED
 =
TRUE
)

215 
uöt8
 
Àd
;

216 
HÆLedC⁄åﬁ_t
 *
°s
;

218 i‡(
Àds
 && 
≥r˚¡
 && 
≥riod
)

220 i‡(
≥r˚¡
 < 100)

222 
Àd
 = 
HAL_LED_1
;

223 
Àds
 &
HAL_LED_ALL
;

224 
°s
 = 
HÆLedSètusC⁄åﬁ
.
HÆLedC⁄åﬁTabÀ
;

226 
Àds
)

228 i‡(
Àds
 & 
Àd
)

231 if(
°s
->
mode
 < 
HAL_LED_MODE_BLINK
 )

232 
¥eBlökSèã
 |(
Àd
 & 
HÆLedSèã
);

234 
°s
->
mode
 = 
HAL_LED_MODE_OFF
;

235 
°s
->
time
 = 
≥riod
;

236 
°s
->
⁄P˘
 = 
≥r˚¡
;

237 
°s
->
À·
 = 
numBlöks
;

238 i‡(!
numBlöks
Ë
°s
->
mode
 |
HAL_LED_MODE_FLASH
;

239 
°s
->
√xt
 = 
	`oßl_GëSy°emClock
();

240 
°s
->
mode
 |
HAL_LED_MODE_BLINK
;

241 
Àds
 ^
Àd
;

243 
Àd
 <<= 1;

244 
°s
++;

247 
	`oßl_°›_timîEx
(
HÆ_TaskID
, 
HAL_LED_BLINK_EVENT
);

248 
	`oßl_£t_evít
 (
HÆ_TaskID
, 
HAL_LED_BLINK_EVENT
);

252 
	`HÆLedSë
 (
Àds
, 
HAL_LED_MODE_ON
);

257 
	`HÆLedSë
 (
Àds
, 
HAL_LED_MODE_OFF
);

259 #ñi‡(
HAL_LED
 =
TRUE
)

260 
≥r˚¡
 = (
Àds
 & 
HÆLedSèã
Ë? 
HAL_LED_MODE_OFF
 : 
HAL_LED_MODE_ON
;

261 
	`HÆLedOnOff
 (
Àds
, 
≥r˚¡
);

264 (Ë
Àds
;

265 (Ë
numBlöks
;

266 (Ë
≥r˚¡
;

267 (Ë
≥riod
;

269 
	}
}

271 #i‡(
HAL_LED
 =
TRUE
)

281 
	$HÆLedUpd©e
 ()

283 
uöt8
 
Àd
;

284 
uöt8
 
p˘
;

285 
uöt8
 
Àds
;

286 
HÆLedC⁄åﬁ_t
 *
°s
;

287 
uöt32
 
time
;

288 
uöt16
 
√xt
;

289 
uöt16
 
waô
;

291 
√xt
 = 0;

292 
Àd
 = 
HAL_LED_1
;

293 
Àds
 = 
HAL_LED_ALL
;

294 
°s
 = 
HÆLedSètusC⁄åﬁ
.
HÆLedC⁄åﬁTabÀ
;

297 i‡(!
HÆLedSètusC⁄åﬁ
.
¶ìpA˘ive
)

299 
Àds
)

301 i‡(
Àds
 & 
Àd
)

303 i‡(
°s
->
mode
 & 
HAL_LED_MODE_BLINK
)

305 
time
 = 
	`oßl_GëSy°emClock
();

306 i‡(
time
 >
°s
->
√xt
)

308 i‡(
°s
->
mode
 & 
HAL_LED_MODE_ON
)

310 
p˘
 = 100 - 
°s
->
⁄P˘
;

311 
°s
->
mode
 &~
HAL_LED_MODE_ON
;

312 
	`HÆLedOnOff
 (
Àd
, 
HAL_LED_MODE_OFF
);

314 i‡–!(
°s
->
mode
 & 
HAL_LED_MODE_FLASH
) )

316 
°s
->
À·
--;

319 i‡–!(
°s
->
À·
Ë&& !(°s->
mode
 & 
HAL_LED_MODE_FLASH
) )

321 
°s
->
mode
 ^
HAL_LED_MODE_BLINK
;

325 
p˘
 = 
°s
->
⁄P˘
;

326 
°s
->
mode
 |
HAL_LED_MODE_ON
;

327 
	`HÆLedOnOff
–
Àd
, 
HAL_LED_MODE_ON
 );

329 i‡(
°s
->
mode
 & 
HAL_LED_MODE_BLINK
)

331 
waô
 = (((
uöt32
)
p˘
 * (uöt32)
°s
->
time
) / 100);

332 
°s
->
√xt
 = 
time
 + 
waô
;

337 
waô
 = 0;

339 
	`HÆLedSë
 (
Àd
, ((
¥eBlökSèã
 &Üed)!=0)?
HAL_LED_MODE_ON
:
HAL_LED_MODE_OFF
);

341 
¥eBlökSèã
 &(
Àd
 ^ 0xFF);

346 
waô
 = 
°s
->
√xt
 - 
time
;

349 i‡(!
√xt
 || ( 
waô
 && (wait <Çext) ))

351 
√xt
 = 
waô
;

354 
Àds
 ^
Àd
;

356 
Àd
 <<= 1;

357 
°s
++;

360 i‡(
√xt
)

362 
	`oßl_°¨t_timîEx
(
HÆ_TaskID
, 
HAL_LED_BLINK_EVENT
, 
√xt
);

365 
	}
}

377 
	$HÆLedOnOff
 (
uöt8
 
Àds
, uöt8 
mode
)

379 i‡(
Àds
 & 
HAL_LED_1
)

381 i‡(
mode
 =
HAL_LED_MODE_ON
)

383 
	`HAL_TURN_ON_LED1
();

387 
	`HAL_TURN_OFF_LED1
();

391 i‡(
Àds
 & 
HAL_LED_2
)

393 i‡(
mode
 =
HAL_LED_MODE_ON
)

395 
	`HAL_TURN_ON_LED2
();

399 
	`HAL_TURN_OFF_LED2
();

403 i‡(
Àds
 & 
HAL_LED_3
)

405 i‡(
mode
 =
HAL_LED_MODE_ON
)

407 
	`HAL_TURN_ON_LED3
();

411 
	`HAL_TURN_OFF_LED3
();

415 i‡(
Àds
 & 
HAL_LED_4
)

417 i‡(
mode
 =
HAL_LED_MODE_ON
)

419 
	`HAL_TURN_ON_LED4
();

423 
	`HAL_TURN_OFF_LED4
();

428 i‡(
mode
)

430 
HÆLedSèã
 |
Àds
;

434 
HÆLedSèã
 &(
Àds
 ^ 0xFF);

436 
	}
}

448 
uöt8
 
	$HÆLedGëSèã
 ()

450 #i‡(
HAL_LED
 =
TRUE
)

451  
HÆLedSèã
;

455 
	}
}

466 
	$HÆLedE¡îSÀï
( )

468 #ifde‡
BLINK_LEDS


470 
HÆLedSètusC⁄åﬁ
.
¶ìpA˘ive
 = 
TRUE
;

473 #i‡(
HAL_LED
 =
TRUE
)

475 
HÆSÀïLedSèã
 = 0;

476 
HÆSÀïLedSèã
 |
	`HAL_STATE_LED1
();

477 
HÆSÀïLedSèã
 |
	`HAL_STATE_LED2
() << 1;

478 
HÆSÀïLedSèã
 |
	`HAL_STATE_LED3
() << 2;

479 
HÆSÀïLedSèã
 |
	`HAL_STATE_LED4
() << 3;

482 
	`HÆLedOnOff
 (
HAL_LED_ALL
, 
HAL_LED_MODE_OFF
);

485 
	}
}

496 
	$HÆLedExôSÀï
( )

498 #i‡(
HAL_LED
 =
TRUE
)

500 
	`HÆLedOnOff
(
HÆSÀïLedSèã
, 
HAL_LED_MODE_ON
);

503 
	`HÆLedUpd©e
();

506 #ifde‡
BLINK_LEDS


508 
HÆLedSètusC⁄åﬁ
.
¶ìpA˘ive
 = 
FALSE
;

510 
	}
}

	@../../../../Components/hal/target/CC2540USB/hal_mcu.h

40 #i‚de‡
_HAL_MCU_H


41 
	#_HAL_MCU_H


	)

53 
	~"hÆ_defs.h
"

54 
	~"hÆ_ty≥s.h
"

61 
	#HAL_MCU_CC2540


	)

70 #ifde‡
__IAR_SYSTEMS_ICC__


72 #i‡
deföed
–
CC2541
Ë|| deföed–
CC2541S
 )

73 
	~<ioCC2541.h
>

75 
	~<ioCC2540.h
>

78 
	#HAL_COMPILER_IAR


	)

79 
	#HAL_MCU_LITTLE_ENDIAN
(Ë
__LITTLE_ENDIAN__


	)

80 
	#_PRAGMA
(
x
Ë
	`_Pøgma
(#x)

	)

81 
	#HAL_ISR_FUNC_DECLARATION
(
f
,
v
Ë
	`_PRAGMA
(
ve˘‹
=vË
__√¨_func
 
__öãºu±
 
	`f
()

	)

82 
	#HAL_ISR_FUNC_PROTOTYPE
(
f
,
v
Ë
	`_PRAGMA
(
ve˘‹
=vË
__√¨_func
 
__öãºu±
 
	`f
()

	)

83 
	#HAL_ISR_FUNCTION
(
f
,
v
Ë
	`HAL_ISR_FUNC_PROTOTYPE
(f,v); 
	`HAL_ISR_FUNC_DECLARATION
(f,v)

	)

86 #ñi‡
deföed
 
__KEIL__


88 #i‡
deföed
–
CC2541
Ë|| deföed–
CC2541S
 )

89 
	~<CC2541.h
>

91 
	~<CC2540.h
>

94 
	#HAL_COMPILER_KEIL


	)

95 
	#HAL_MCU_LITTLE_ENDIAN
(Ë0

	)

96 
	#HAL_ISR_FUNC_DECLARATION
(
f
,
v
Ë
	`f
(Ë
öãºu±
 
	)
v

97 
	#HAL_ISR_FUNC_PROTOTYPE
(
f
,
v
Ë
	`f
()

	)

98 
	#HAL_ISR_FUNCTION
(
f
,
v
Ë
	`HAL_ISR_FUNC_PROTOTYPE
(f,v); 
	`HAL_ISR_FUNC_DECLARATION
(f,v)

	)

110 
	#HAL_ENABLE_INTERRUPTS
(Ë
	`°
–
EA
 = 1; )

	)

111 
	#HAL_DISABLE_INTERRUPTS
(Ë
	`°
–
EA
 = 0; )

	)

112 
	#HAL_INTERRUPTS_ARE_ENABLED
(Ë(
EA
)

	)

114 
	thÆI¡Sèã_t
;

115 
	#HAL_ENTER_CRITICAL_SECTION
(
x
Ë
	`°
–x = 
EA
; 
	`HAL_DISABLE_INTERRUPTS
(); )

	)

116 
	#HAL_EXIT_CRITICAL_SECTION
(
x
Ë
	`°
–
EA
 = x; )

	)

117 
	#HAL_CRITICAL_STATEMENT
(
x
Ë
	`°
–
hÆI¡Sèã_t
 
_s
; 
	`HAL_ENTER_CRITICAL_SECTION
(_s); x; 
	`HAL_EXIT_CRITICAL_SECTION
(_s); )

	)

119 #ifde‡
__IAR_SYSTEMS_ICC__


125 
	#HAL_ENTER_ISR
(Ë{ 
hÆI¡Sèã_t
 
_i§I¡Sèã
 = 
EA
; 
	`HAL_ENABLE_INTERRUPTS
();

	)

126 
	#HAL_EXIT_ISR
(Ë
EA
 = 
_i§I¡Sèã
; }

	)

128 
	#HAL_ENTER_ISR
()

	)

129 
	#HAL_EXIT_ISR
()

	)

136 
	#WD_EN
 
	`BV
(3)

	)

137 
	#WD_MODE
 
	`BV
(2)

	)

138 
	#WD_INT_1900_USEC
 (
	`BV
(0Ë| BV(1))

	)

139 
	#WD_RESET1
 (0xA0 | 
WD_EN
 | 
WD_INT_1900_USEC
)

	)

140 
	#WD_RESET2
 (0x50 | 
WD_EN
 | 
WD_INT_1900_USEC
)

	)

141 
	#WD_KICK
(Ë
	`°
–
WDCTL
 = (0xA0 | WDCTL & 0x0F); WDCTL = (0x50 | WDCTL & 0x0F); )

	)

144 
	#HAL_SYSTEM_RESET
(Ë
	`°
–
	`HAL_DISABLE_INTERRUPTS
(); 
WDCTL
 = 
WD_RESET1
; WDCTL = 
WD_RESET2
; ;;); )

	)

150 
	#REV_A
 0x00

	)

151 
	#REV_B
 0x11

	)

152 
	#REV_C
 0x20

	)

153 
	#REV_D
 0x21

	)

161 
	#PCON_IDLE
 
	`BV
(0Ë

	)

164 
	#OSC_PD
 
	`BV
(2Ë

	)

165 
	#PMODE
 (
	`BV
(1Ë| BV(0)Ë

	)

168 
	#XOSC_STB
 
	`BV
(6Ë

	)

169 
	#HFRC_STB
 
	`BV
(5Ë

	)

172 
	#OSC_PD
 
	`BV
(2Ë

	)

176 
	#OSC
 
	`BV
(6)

	)

177 
	#TICKSPD
(
x
Ë(x << 3)

	)

178 
	#CLKSPD
(
x
Ë(x << 0)

	)

179 
	#CLKCONCMD_32MHZ
 (0)

	)

180 
	#CLKCONCMD_16MHZ
 (
	`CLKSPD
(1Ë| 
	`TICKSPD
(1Ë| 
OSC
)

	)

183 
	#LDRDY
 
	`BV
(0Ë

	)

187 #ifde‡
POWER_SAVING


188 vﬁ©ûê
__d©a
 
uöt8
 
hÆSÀïPc⁄VÆue
;

193 
	#CLEAR_SLEEP_MODE
(Ë
	`°
–
hÆSÀïPc⁄VÆue
 = 0; )

	)

194 
	#ALLOW_SLEEP_MODE
(Ë
	`°
–
hÆSÀïPc⁄VÆue
 = 
PCON_IDLE
; )

	)

196 
	#CLEAR_SLEEP_MODE
()

	)

197 
	#ALLOW_SLEEP_MODE
()

	)

	@../../../../Components/hal/target/CC2540USB/hal_sleep.c

43 
	~"hÆ_ty≥s.h
"

44 
	~"hÆ_mcu.h
"

45 
	~"hÆ_bﬂrd.h
"

46 
	~"hÆ_¶ìp.h
"

47 
	~"hÆ_Àd.h
"

48 
	~"hÆ_key.h
"

49 
	~"OSAL.h
"

50 
	~"OSAL_Timîs.h
"

51 
	~"OSAL_Tasks.h
"

52 
	~"OSAL_PwrMgr.h
"

53 
	~"hÆ_drivîs.h
"

54 
	~"hÆ_as£π.h
"

55 
	~"Œ_¶ìp.h
"

56 
	~"Œ_timî2.h
"

57 
	~"Œ_m©h.h
"

63 #i‚de‡
HAL_SLEEP_DEBUG_POWER_MODE


65 
	#HAL_SLEEP_PREP_POWER_MODE
(
mode
) \

66 
	`°
–
SLEEPCMD
 &~
PMODE
; \

67 
SLEEPCMD
 |
mode
; \

68 !(
STLOAD
 & 
LDRDY
)); \

69 
hÆSÀïPc⁄VÆue
 = 
PCON_IDLE
; \

70 )

	)

71 
	#HAL_SLEEP_SET_POWER_MODE
() \

72 
	`hÆSëSÀïMode
()

	)

77 
	#HAL_SLEEP_PREP_POWER_MODE
(
mode
Ë

	)

78 
	#HAL_SLEEP_SET_POWER_MODE
() \

79 
	`°
–
hÆSÀïI¡
 =
FALSE
); \

80 
hÆSÀïI¡
 = 
FALSE
; \

81 
	`HAL_DISABLE_INTERRUPTS
(); \

82 )

	)

86 
	#HAL_SLEEP_TIMER_ENABLE_INT
(Ë
	`°
(
IEN0
 |
STIE_BV
;)

87 
	#HAL_SLEEP_TIMER_DISABLE_INT
(Ë
	`°
(
IEN0
 &~
STIE_BV
;)

88 
	#HAL_SLEEP_TIMER_CLEAR_INT
(Ë
	`°
(
IRCON
 &= ~0x80;)

89 

	)

91 
	#HAL_SLEEP_IE_BACKUP_AND_DISABLE
–
õn0
, 
õn1
, 
õn2
 ) \

92 
	`°
–(
õn0
Ë
IEN0
; \

93 (
õn1
Ë
IEN1
; \

94 (
õn2
Ë
IEN2
; \

95 
IEN0
 &
STIE_BV
; \

96 
IEN1
 &
P0IE_BV
; \

97 
IEN2
 &(
P1IE_BV
|
P2IE_BV
); \

98 )

	)

101 
	#HAL_SLEEP_IE_RESTORE
–
õn0
, 
õn1
, 
õn2
 ) \

102 
	`°
–
IEN0
 = (
õn0
); \

103 
IEN1
 = (
õn1
); \

104 
IEN2
 = (
õn2
); \

105 )

	)

108 
	#HAL_SLEEP_MS_TO_625US
–
ms
 ) (((((
uöt32
Ë(ms)Ë* 8Ë+ 4Ë/ 5)

	)

112 
	#HAL_SLEEP_MS_TO_32KHZ
–
ms
 ) ((((
uöt32
Ë(ms)Ë* 4096Ë/ 125)

	)

128 
	#MAX_SLEEP_TIMEOUT
 40000

	)

136 
	#CC2540_PM0
 0

137 
	#CC2540_PM1
 1

138 
	#CC2540_PM2
 2

139 
	#CC2540_PM3
 3

140 

	)

147 
	#HAL_SLEEP_OFF
 
CC2540_PM0


	)

148 
	#HAL_SLEEP_TIMER
 
CC2540_PM2


	)

149 
	#HAL_SLEEP_DEEP
 
CC2540_PM3


	)

154 
	#MAX_SLEEP_TIME
 16711680

155 

	)

159 #i‡!
deföed
 (
PM_MIN_SLEEP_TIME
)

160 
	#PM_MIN_SLEEP_TIME
 66

162 

	)

169 #i‡
deföed
–
CC2541
Ë|| deföed–
CC2541S
 )

170 
	#HAL_SLEEP_ADJ_TICKS
 25

171 #ñ£ // CC2540

	)

172 
	#HAL_SLEEP_ADJ_TICKS
 35

174 

	)

176 
	#STIE_BV
 
	`BV
(5)

	)

177 
	#P0IE_BV
 
	`BV
(5)

	)

178 
	#P1IE_BV
 
	`BV
(4)

	)

179 
	#P2IE_BV
 
	`BV
(1)

	)

182 #i‡
HAL_MCU_LITTLE_ENDIAN
()

183 
	#UINT32_NDX0
 0

	)

184 
	#UINT32_NDX1
 1

	)

185 
	#UINT32_NDX2
 2

	)

186 
	#UINT32_NDX3
 3

	)

188 
	#UINT32_NDX0
 3

	)

189 
	#UINT32_NDX1
 2

	)

190 
	#UINT32_NDX2
 1

	)

191 
	#UINT32_NDX3
 0

	)

203 
uöt8
 
	ghÆPwrMgtMode
 = 
HAL_SLEEP_OFF
;

206 
uöt8
 
	gwakeF‹RF
;

208 #ifde‡
HAL_SLEEP_DEBUG_POWER_MODE


209 
boﬁ
 
	ghÆSÀïI¡
 = 
FALSE
;

217 vﬁ©ûê
__d©a
 
uöt8
 
	ghÆSÀïPc⁄VÆue
 = 
PCON_IDLE
;

226 #¥agm®
loˇti⁄
 = "SLEEP_CODE"

227 
hÆSëSÀïMode
();

229 
hÆSÀïSëTimî
–
uöt32
 
¶ìpTime
, uöt32 
timeout
 );

230 
uöt32
 
hÆSÀïRódTimî
( );

231 
uöt32
 
TimîEœp£d
( );

251 #¥agm®
›timize
=
n⁄e


252 
	$hÆSëSÀïMode
()

255 
PCON
 = 
hÆSÀïPc⁄VÆue
;

257 
	`HAL_DISABLE_INTERRUPTS
();

258 
	}
}

277 
	$hÆSÀï
–
uöt32
 
oßl_timeout
 )

279 
uöt32
 
timeout
;

280 
uöt32
 
ŒTimeout
;

281 
uöt32
 
¶ìpTimî
;

283 #ifde‡
DEBUG_GPIO


285 
P1_0
 = 1;

289 i‡(
oßl_timeout
 > 
MAX_SLEEP_TIMEOUT
)

291 
oßl_timeout
 = 
MAX_SLEEP_TIMEOUT
;

295 
	`LL_TimeToNextRfEvít
–&
¶ìpTimî
, &
ŒTimeout
 );

301 i‡(
oßl_timeout
 == 0)

304 
timeout
 = 
ŒTimeout
;

309 
wakeF‹RF
 = (
timeout
 !0Ë? 
TRUE
 : 
FALSE
;

315 
timeout
 = 
	`HAL_SLEEP_MS_TO_32KHZ
–
oßl_timeout
 );

318 i‡((
ŒTimeout
 !0Ë&& (ŒTimeouà< 
timeout
))

321 
timeout
 = 
ŒTimeout
;

324 
wakeF‹RF
 = 
TRUE
;

329 
¶ìpTimî
 = 
	`hÆSÀïRódTimî
();

332 
wakeF‹RF
 = 
FALSE
;

337 
hÆPwrMgtMode
 = (
timeout
 =0Ë? 
HAL_SLEEP_DEEP
 : 
HAL_SLEEP_TIMER
;

339 #ifde‡
DEBUG_GPIO


341 
P1_0
 = 0;

345 i‡–(
timeout
 > 
PM_MIN_SLEEP_TIME
) || (timeout == 0) )

347 
hÆI¡Sèã_t
 
õn0
, 
õn1
, 
õn2
;

349 #ifde‡
DEBUG_GPIO


351 
P1_0
 = 1;

354 
	`HAL_ASSERT
–
	`HAL_INTERRUPTS_ARE_ENABLED
() );

355 
	`HAL_DISABLE_INTERRUPTS
();

358 i‡–
hÆSÀïPc⁄VÆue
 && ( 
	`LL_PowîOffReq
(
hÆPwrMgtMode
Ë=
LL_SLEEP_REQUEST_ALLOWED
 ) )

360 #i‡((
deföed
 
HAL_KEY
Ë&& (HAL_KEY =
TRUE
))

362 
	`HÆKeyE¡îSÀï
();

365 #ifde‡
HAL_SLEEP_DEBUG_LED


366 
	`HAL_TURN_OFF_LED3
();

369 
	`HÆLedE¡îSÀï
();

373 i‡(
timeout
 != 0)

376 i‡(
timeout
 > 
MAX_SLEEP_TIME
 )

379 
	`hÆSÀïSëTimî
–
¶ìpTimî
, 
MAX_SLEEP_TIME
 );

384 
	`hÆSÀïSëTimî
–
¶ìpTimî
, 
timeout
 );

389 
	`HAL_SLEEP_PREP_POWER_MODE
(
hÆPwrMgtMode
);

392 
	`HAL_SLEEP_IE_BACKUP_AND_DISABLE
(
õn0
, 
õn1
, 
õn2
);

393 
	`HAL_ENABLE_INTERRUPTS
();

395 #ifde‡
DEBUG_GPIO


397 
P1_0
 = 0;

405 
	`HAL_SLEEP_SET_POWER_MODE
();

407 #ifde‡
DEBUG_GPIO


409 
P1_0
 = 1;

422 i‡–(
wakeF‹RF
 =
TRUE
Ë&& !(
IRCON
 & 0x80) )

424 
wakeF‹RF
 = 
FALSE
;

428 
	`HAL_SLEEP_IE_RESTORE
(
õn0
, 
õn1
, 
õn2
);

433 
	`LL_PowîOnReq
–(
hÆPwrMgtMode
 =
CC2540_PM3
), 
wakeF‹RF
 );

435 #ifde‡
HAL_SLEEP_DEBUG_LED


436 
	`HAL_TURN_ON_LED3
();

439 
	`HÆLedExôSÀï
();

442 #i‡((
deföed
 
HAL_KEY
Ë&& (HAL_KEY =
TRUE
))

444 ()
	`HÆKeyExôSÀï
();

448 
	`HAL_ENABLE_INTERRUPTS
();

451 #ifde‡
DEBUG_GPIO


453 
P1_0
 = 0;

457 
	}
}

485 
	$hÆSÀïSëTimî
–
uöt32
 
¶ìpTimî
, uöt32 
timeout
 )

487 
	`HAL_SLEEP_TIMER_DISABLE_INT
();

490 
¶ìpTimî
 +
timeout
;

493 
¶ìpTimî
 -
HAL_SLEEP_ADJ_TICKS
;

496 
ST2
 = ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX2
];

497 
ST1
 = ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX1
];

498 
ST0
 = ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX0
];

500 
	`HAL_SLEEP_TIMER_CLEAR_INT
();

501 
	`HAL_SLEEP_TIMER_ENABLE_INT
();

504 
	}
}

522 
uöt32
 
	$hÆSÀïRódTimî
( )

524 
uöt32
 
¶ìpTimî
;

528 ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX0
] = 
ST0
;

529 ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX1
] = 
ST1
;

530 ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX2
] = 
ST2
;

531 ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX3
] = 0;

533 –
¶ìpTimî
 );

534 
	}
}

552 
uöt32
 
	$TimîEœp£d
( )

555 
	}
}

573 
	$hÆRe°‹eSÀïLevñ
( )

576 #ifde‡
PM_TEST


577 
	`oßl_°¨t_timîEx
 (
HÆ_TaskID
, 
HAL_SLEEP_TIMER_EVENT
, 1000);

579 
	}
}

597 
	$HAL_ISR_FUNCTION
(
hÆSÀïTimîI§
, 
ST_VECTOR
)

599 
	`HAL_ENTER_ISR
();

601 
	`HAL_SLEEP_TIMER_CLEAR_INT
();

603 #ifde‡
HAL_SLEEP_DEBUG_POWER_MODE


604 
hÆSÀïI¡
 = 
TRUE
;

607 
	`CLEAR_SLEEP_MODE
();

609 
	`HAL_EXIT_ISR
();

612 
	}
}

	@../../../../Components/hal/target/CC2540USB/hal_startup.c

42 
	~"hÆ_bﬂrd.h
"

43 
	~"hÆ_ty≥s.h
"

45 #ifde‡
__˝lu•lus


49 #¥agm®
œnguage
=
exãnded


54 #¥agm®
loˇti⁄
="CSTART"

59 #i‡(
__CODE_MODEL__
 == 2)

60 
__√¨_func
 
__roŸ
 

62 
__roŸ
 

64 
__low_Àvñ_öô
();

77 #i‡(
__CODE_MODEL__
 == 2)

78 
__√¨_func
 
__roŸ
 

80 
__roŸ
 

82 
__low_Àvñ_öô
()

88 #i‡
deföed
 
HAL_IMAGE_A


89 
MEMCTR
 = (MEMCTR & 0xF8) | 0x05;

90 #ñi‡
deföed
 
HAL_IMAGE_B


91 
MEMCTR
 = (MEMCTR & 0xF8) | 0x04;

93 
MEMCTR
 = (MEMCTR & 0xF8) | 0x01;

105 #¥agm®
œnguage
=

107 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2540USB/hal_timer.c

	@../../../../Components/hal/target/CC2540USB/hal_types.h

44 #i‚de‡
_HAL_TYPES_H


45 
	#_HAL_TYPES_H


	)

56 sig√d 
	töt8
;

57 
	tuöt8
;

59 sig√d 
	töt16
;

60 
	tuöt16
;

62 sig√d 
	töt32
;

63 
	tuöt32
;

65 
	tboﬁ
;

67 
uöt8
 
	thÆD©aAlign_t
;

76 #ifde‡
__IAR_SYSTEMS_ICC__


77 
	#CODE
 
__code


	)

78 
	#XDATA
 
__xd©a


	)

79 
	#DATA
 
__d©a


	)

80 
	#NEAR_FUNC
 
__√¨_func


	)

81 
	#ASM_NOP
 
	`asm
("NOP")

	)

84 #ñi‡
deföed
 
__KEIL__


85 
	#CODE
 
code


	)

86 
	#XDATA
 
xd©a


	)

87 
	#ASM_NOP
 
	`__n›
()

	)

90 #ñi‡
deföed
 
__GNUC__


91 
	#ASM_NOP
 
__asm__
 
	`__vﬁ©ûe__
 ("n›")

	)

94 #ñi‡
_MSC_VER


95 
	#ASM_NOP
 
__asm
 
NOP


	)

98 #ñi‡
deföed
 
__TI_COMPILER_VERSION


99 
	#ASM_NOP
 
	`asm
(" NOP")

	)

111 #i‚de‡
TRUE


112 
	#TRUE
 1

	)

115 #i‚de‡
FALSE


116 
	#FALSE
 0

	)

119 #i‚de‡
NULL


120 
	#NULL
 0

	)

	@../../../../Components/hal/target/CC2540USB/hal_uart.c

44 
	~"hÆ_bﬂrd_cfg.h
"

45 
	~"hÆ_defs.h
"

46 
	~"hÆ_drivîs.h
"

47 
	~"hÆ_ty≥s.h
"

48 
	~"hÆ_u¨t.h
"

49 #i‡
deföed
 
POWER_SAVING


50 
	~"OSAL.h
"

51 
	~"OSAL_PwrMgr.h
"

58 
HÆUARTI§DMA
();

64 #i‡
HAL_UART_DMA


65 
	~"_hÆ_u¨t_dma.c
"

67 #i‡
HAL_UART_ISR


68 
	~"_hÆ_u¨t_i§.c
"

70 #i‡
HAL_UART_SPI


71 
	~"_hÆ_u¨t_•i.c
"

73 #i‡
HAL_UART_USB


74 
	~"_hÆ_u¨t_usb.c
"

86 
	$HÆUARTInô
()

88 #i‡(
HAL_UART_DMA
 && 
HAL_UART_SPI
)

89 i‡(
HAL_UART_PORT
)

91 
	`HÆUARTInôSPI
();

95 
	`HÆUARTInôDMA
();

98 #i‡
HAL_UART_DMA


99 
	`HÆUARTInôDMA
();

101 #i‡
HAL_UART_ISR


102 
	`HÆUARTInôISR
();

104 #i‡
HAL_UART_SPI


105 
	`HÆUARTInôSPI
();

107 #i‡
HAL_UART_USB


108 
	`HÆUARTInôUSB
();

111 
	}
}

123 
uöt8
 
	$HÆUARTO≥n
(
uöt8
 
p‹t
, 
hÆUARTCfg_t
 *
c⁄fig
)

125 #i‡(
HAL_UART_DMA
 == 1)

126 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë
	`HÆUARTO≥nDMA
(
c⁄fig
);

128 #i‡(
HAL_UART_DMA
 == 2)

129 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë
	`HÆUARTO≥nDMA
(
c⁄fig
);

131 #i‡(
HAL_UART_ISR
 == 1)

132 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë
	`HÆUARTO≥nISR
(
c⁄fig
);

134 #i‡(
HAL_UART_ISR
 == 2)

135 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë
	`HÆUARTO≥nISR
(
c⁄fig
);

137 #i‡(
HAL_UART_SPI
 == 1)

138 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë
	`HÆUARTO≥nSPI
(
c⁄fig
);

140 #i‡(
HAL_UART_SPI
 == 2)

141 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë
	`HÆUARTO≥nSPI
(
c⁄fig
);

143 #i‡(
HAL_UART_USB
)

144 
	`HÆUARTO≥nUSB
(
c⁄fig
);

146 #i‡(
HAL_UART_DMA
 =0Ë&& (
HAL_UART_ISR
 =0Ë&& (
HAL_UART_SPI
 == 0)

148 (Ë
p‹t
;

149 (Ë
c⁄fig
;

152  
HAL_UART_SUCCESS
;

153 
	}
}

166 
uöt16
 
	$HÆUARTRód
(
uöt8
 
p‹t
, uöt8 *
buf
, 
uöt16
 
Àn
)

168 #i‡(
HAL_UART_DMA
 == 1)

169 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë 
	`HÆUARTRódDMA
(
buf
, 
Àn
);

171 #i‡(
HAL_UART_DMA
 == 2)

172 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë 
	`HÆUARTRódDMA
(
buf
, 
Àn
);

174 #i‡(
HAL_UART_ISR
 == 1)

175 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë 
	`HÆUARTRódISR
(
buf
, 
Àn
);

177 #i‡(
HAL_UART_ISR
 == 2)

178 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë 
	`HÆUARTRódISR
(
buf
, 
Àn
);

180 #i‡(
HAL_UART_SPI
 == 1)

181 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë 
	`HÆUARTRódSPI
(
buf
, 
Àn
);

183 #i‡(
HAL_UART_SPI
 == 2)

184 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë 
	`HÆUARTRódSPI
(
buf
, 
Àn
);

187 #i‡
HAL_UART_USB


188  
	`HÆUARTRx
(
buf
, 
Àn
);

190 #i‡(
HAL_UART_DMA
 =0Ë&& (
HAL_UART_ISR
 =0Ë&& (
HAL_UART_SPI
 == 0)

192 (Ë
p‹t
;

193 (Ë
buf
;

194 (Ë
Àn
;

198 
	}
}

211 
uöt16
 
	$HÆUARTWrôe
(
uöt8
 
p‹t
, uöt8 *
buf
, 
uöt16
 
Àn
)

213 #i‡(
HAL_UART_DMA
 == 1)

214 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë 
	`HÆUARTWrôeDMA
(
buf
, 
Àn
);

216 #i‡(
HAL_UART_DMA
 == 2)

217 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë 
	`HÆUARTWrôeDMA
(
buf
, 
Àn
);

219 #i‡(
HAL_UART_ISR
 == 1)

220 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë 
	`HÆUARTWrôeISR
(
buf
, 
Àn
);

222 #i‡(
HAL_UART_ISR
 == 2)

223 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë 
	`HÆUARTWrôeISR
(
buf
, 
Àn
);

225 #i‡(
HAL_UART_SPI
 == 1)

226 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë 
	`HÆUARTWrôeSPI
(
buf
, 
Àn
);

228 #i‡(
HAL_UART_SPI
 == 2)

229 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë 
	`HÆUARTWrôeSPI
(
buf
, 
Àn
);

232 #i‡
HAL_UART_USB


233 
	`HÆUARTTx
(
buf
, 
Àn
);

234  
Àn
;

236 #i‡(
HAL_UART_DMA
 =0Ë&& (
HAL_UART_ISR
 =0Ë&& (
HAL_UART_SPI
 == 0)

238 (Ë
p‹t
;

239 (Ë
buf
;

240 (Ë
Àn
;

244 
	}
}

255 
	$HÆUARTSu•íd
( )

257 #i‡
HAL_UART_ISR


258 
	`HÆUARTSu•ídISR
();

260 
	}
}

271 
	$HÆUARTResume
( )

273 #i‡
HAL_UART_ISR


274 
	`HÆUARTResumeISR
();

276 
	}
}

287 
	$HÆUARTPﬁl
()

289 #i‡(
HAL_UART_DMA
 && 
HAL_UART_SPI
)

290 i‡(
HAL_UART_PORT
)

292 
	`HÆUARTPﬁlSPI
();

296 
	`HÆUARTPﬁlDMA
();

299 #i‡
HAL_UART_DMA


300 
	`HÆUARTPﬁlDMA
();

302 #i‡
HAL_UART_ISR


303 
	`HÆUARTPﬁlISR
();

305 #i‡
HAL_UART_SPI


306 
	`HÆUARTPﬁlSPI
();

308 #i‡
HAL_UART_USB


309 
	`HÆUARTPﬁlUSB
();

312 
	}
}

323 
uöt16
 
	$HÆ_UART_RxBufLí
–
uöt8
 
p‹t
 )

325 #i‡(
HAL_UART_DMA
 == 1)

326 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë 
	`HÆUARTRxAvaûDMA
();

328 #i‡(
HAL_UART_DMA
 == 2)

329 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë 
	`HÆUARTRxAvaûDMA
();

331 #i‡(
HAL_UART_ISR
 == 1)

332 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë 
	`HÆUARTRxAvaûISR
();

334 #i‡(
HAL_UART_ISR
 == 2)

335 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë 
	`HÆUARTRxAvaûISR
();

337 #i‡(
HAL_UART_SPI
 == 1)

338 i‡(
p‹t
 =
HAL_UART_PORT_0
Ë 
	`HÆUARTRxAvaûSPI
();

340 #i‡(
HAL_UART_SPI
 == 2)

341 i‡(
p‹t
 =
HAL_UART_PORT_1
Ë 
	`HÆUARTRxAvaûSPI
();

344 #i‡
HAL_UART_USB


345  
	`HÆUARTRxAvaûUSB
();

347 #i‡(
HAL_UART_DMA
 =0Ë&& (
HAL_UART_ISR
 =0Ë&& (
HAL_UART_SPI
 == 0)

349 (Ë
p‹t
;

353 
	}
}

355 
	$HÆUARTI§DMA
()

357 #i‡(
HAL_UART_DMA
 && 
HAL_UART_SPI
)

358 i‡(
HAL_UART_PORT
)

360 
	`HÆUART_DMAI§SPI
();

364 
	`HÆUART_DMAI§DMA
();

366 #ñi‡
HAL_UART_DMA


367 
	`HÆUART_DMAI§DMA
();

368 #ñi‡
HAL_UART_SPI


369 
	`HÆUART_DMAI§SPI
();

371 
	}
}

	@../../../../Components/hal/target/CC2540USB/usb/class_cdc/usb_cdc.h

9 #i‚de‡
USB_CDC_H


10 
	#USB_CDC_H


	)

13 
	#CDC_DEVICE
 0x02

	)

16 
	#COMM_INTF
 0x02

	)

19 
	#ABSTRACT_CONTROL_MODEL
 0x02

	)

22 
	#V25TER
 0x01

23 

	)

26 
	#DATA_INTF
 0x0A

	)

29 
	#NO_PROTOCOL
 0x00

30 

	)

33 
	#ABSTRACT_STATE
 0x01

	)

34 
	#COUNTRY_SETTING
 0x02

	)

38 
	#CS_INTERFACE
 0x24

	)

39 
	#CS_ENDPOINT
 0x25

	)

42 
	#DSC_FN_HEADER
 0x00

	)

43 
	#DSC_FN_CALL_MGT
 0x01

	)

44 
	#DSC_FN_ACM
 0x02

45 
	#DSC_FN_DLM
 0x03

46 
	#DSC_FN_TELEPHONE_RINGER
 0x04

	)

47 
	#DSC_FN_RPT_CAPABILITIES
 0x05

	)

48 
	#DSC_FN_UNION
 0x06

	)

49 
	#DSC_FN_COUNTRY_SELECTION
 0x07

	)

50 
	#DSC_FN_TEL_OP_MODES
 0x08

	)

51 
	#DSC_FN_USB_TERMINAL
 0x09

	)

55 
	#CDC_COMM_INTF_ID
 0x00

	)

56 
	#CDC_DATA_INTF_ID
 0x01

	)

61 
	#CDC_SEND_ENCAPSULATED_COMMAND
 0x00

	)

62 
	#CDC_GET_ENCAPSULATED_RESPONSE
 0x01

	)

63 
	#CDC_SET_COMM_FEATURE
 0x02

64 
	#CDC_GET_COMM_FEATURE
 0x03

65 
	#CDC_CLEAR_COMM_FEATURE
 0x04

66 
	#CDC_SET_LINE_CODING
 0x20

67 
	#CDC_GET_LINE_CODING
 0x21

68 
	#CDC_SET_CONTROL_LINE_STATE
 0x22

69 
	#CDC_SEND_BREAK
 0x23

70 

	)

73 
	#CDC_CHAR_FORMAT_1_STOP_BIT
 0

	)

74 
	#CDC_CHAR_FORMAT_1_5_STOP_BIT
 1

	)

75 
	#CDC_CHAR_FORMAT_2_STOP_BIT
 2

	)

77 
	#CDC_PARITY_TYPE_NONE
 0

	)

78 
	#CDC_PARITY_TYPE_ODD
 1

	)

79 
	#CDC_PARITY_TYPE_EVEN
 2

	)

80 
	#CDC_PARITY_TYPE_MARK
 3

	)

81 
	#CDC_PARITY_TYPE_SPACE
 4

	)

	@../../../../Components/hal/target/CC2540USB/usb/class_cdc/usb_cdc_hooks.c

16 
	~"usb_cdc.h
"

17 
	~"usb_cdc_hooks.h
"

18 
	~"usb_fúmw¨e_libøry_hódîs.h
"

20 
	~"hÆ_ty≥s.h
"

24 
CDC_LINE_CODING_STRUCTURE
 
	gcuºítLöeCodög
;

32 
	$usb¸HookPro˚ssOut
()

35 i‡(
usbSëupHódî
.
ªque°
 =
CDC_SET_CONTROL_LINE_STATE
) {

37 if(
usbfwD©a
.
ï0Sètus
 =
EP_IDLE
)

39 
usbfwD©a
.
ï0Sètus
 = 
EP_RX
;

43 } if(
usbSëupHódî
.
ªque°
 =
CDC_SET_LINE_CODING
) {

45 if(
usbfwD©a
.
ï0Sètus
 =
EP_IDLE
)

47 
usbSëupD©a
.
pBuf„r
 = (
uöt8
 
__xd©a
 *Ë&
cuºítLöeCodög
;

48 
usbfwD©a
.
ï0Sètus
 = 
EP_RX
;

50 if(
usbfwD©a
.
ï0Sètus
 =
EP_RX
) { }

54 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

56 
	}
}

59 
	$usb¸HookPro˚ssIn
()

62 i‡(
usbSëupHódî
.
ªque°
 =
CDC_GET_LINE_CODING
) {

64 i‡(
usbfwD©a
.
ï0Sètus
 =
EP_IDLE
) {

65 
usbSëupD©a
.
pBuf„r
 = (
uöt8
 
__xd©a
 *Ë&
cuºítLöeCodög
;

66 
usbSëupD©a
.
byãsLe·
 = 7;

67 
usbfwD©a
.
ï0Sètus
 = 
EP_TX
;

69 } i‡(
usbfwD©a
.
ï0Sètus
 =
EP_TX
) {

73 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

75 
	}
}

78 
	$usbvrHookPro˚ssOut
(Ë{
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
; 
	}
}

79 
	$usbvrHookPro˚ssIn
(Ë{
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
; 
	}
}

82 
	$usb§HookSëDes¸ùt‹
(Ë{ 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
; 
	}
}

83 
	$usb§HookSynchFøme
(Ë{ 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
; 
	}
}

84 
	$usb§HookCÀ¨Fótuª
(Ë{ 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
; 
	}
}

85 
	$usb§HookSëFótuª
(Ë{ 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
; 
	}
}

86 
	$usb§HookModifyGëSètus
(
uöt8
 
ªcùõ¡
, uöt8 
ödex
, 
uöt16
 
__xd©a
 *
pSètus
Ë{ 
	}
}

90 
	$usb§HookPro˚ssEvít
(
uöt8
 
evít
, uöt8 
ödex
)

93 
evít
) {

94 
USBSR_EVENT_CONFIGURATION_CHANGING
 :

96 
USBSR_EVENT_CONFIGURATION_CHANGED
 :

98 
USBSR_EVENT_INTERFACE_CHANGING
 :

100 
USBSR_EVENT_INTERFACE_CHANGED
 :

102 
USBSR_EVENT_REMOTE_WAKEUP_ENABLED
 :

104 
USBSR_EVENT_REMOTE_WAKEUP_DISABLED
 :

106 
USBSR_EVENT_EPIN_STALL_CLEARED
 :

108 
USBSR_EVENT_EPIN_STALL_SET
 :

110 
USBSR_EVENT_EPOUT_STALL_CLEARED
 :

112 
USBSR_EVENT_EPOUT_STALL_SET
 :

115 
	}
}

118 
	$usbúqHookPro˚ssEvíts
()

121 
	}
}

	@../../../../Components/hal/target/CC2540USB/usb/class_cdc/usb_cdc_hooks.h

8 #i‚de‡
USB_CDC_HOOKS_H


9 
	#USB_CDC_HOOKS_H


	)

11 
	~"hÆ_ty≥s.h
"

14 
uöt32
 
	mdãR©e
;

15 
uöt8
 
	mch¨F‹m©
;

16 
uöt8
 
	m∑rôyTy≥
;

17 
uöt8
 
	md©aBôs
;

18 } 
	tCDC_LINE_CODING_STRUCTURE
;

20 
CDC_LINE_CODING_STRUCTURE
 
cuºítLöeCodög
;

	@../../../../Components/hal/target/CC2540USB/usb/class_cdc/usb_firmware_library_config.c

11 
	#USBFIRMWARELIBRARYCONFIG_C


12 
	~"usb_fúmw¨e_libøry_hódîs.h
"

	)

23 
USB_DESCRIPTOR_MARKER
 
	gusbDes¸ùt‹M¨kî
= {

24 (
uöt8
 
__code
 *)&
usbDescSèπ
,

25 (
uöt8
 
__code
 *)&
usbDescEnd
,

26 (
DESC_LUT_INFO
 
__code
 *Ë&
usbDescLut
,

27 (
DESC_LUT_INFO
 
__code
 *Ë&
usbDescLutEnd
,

28 (
DBLBUF_LUT_INFO
 
__code
 *Ë&
usbDblbufLut
,

29 (
DBLBUF_LUT_INFO
 
__code
 *Ë&
usbDblbufLutEnd


	@../../../../Components/hal/target/CC2540USB/usb/class_cdc/usb_firmware_library_config.h

8 #i‚de‡
USBFIRMWARELIBRARYCONFIG_H


9 
	#USBFIRMWARELIBRARYCONFIG_H


10 

	)

26 
	#USB_SETUP_MAX_NUMBER_OF_INTERFACES
 5

	)

	@../../../../Components/hal/target/CC2540USB/usb/class_cdc/usb_firmware_library_headers.h

9 #i‚de‡
USB_FIRMWARE_LIBRARY_HEADERS_H


10 
	#USB_FIRMWARE_LIBRARY_HEADERS_H


	)

20 
	~"usb_fúmw¨e_libøry_c⁄fig.h
"

21 
	~"usb_des¸ùt‹.h
"

22 
	~"usb_des¸ùt‹_∑r£r.h
"

23 
	~"usb_öãºu±.h
"

24 
	~"usb_‰amew‹k.h
"

25 
	~"usb_ªg.h
"

26 
	~"usb_°™d¨d_ªque°s.h
"

27 
	~"usb_su•íd.h
"

	@../../../../Components/hal/target/CC2540USB/usb/class_hid/usb_class_requests.c

13 
	~"usb_˛ass_ªque°s.h
"

14 
	~"usb_hid_ªp‹ts.h
"

15 
	~"usb_‰amew‹k.h
"

25 
	$usb¸SëRï‹t
()

28 i‡(
usbfwD©a
.
ï0Sètus
 =
EP_IDLE
) {

32 i‡((
	`HI_UINT16
(
usbSëupHódî
.
vÆue
Ë=
HID_REP_TYPE_OUTPUT
) &&

33 (
usbSëupHódî
.
ödex
 =
KEYBOARD_INDEX
) &&

34 (
usbSëupHódî
.
Àngth
 =(
KEYBOARD_OUT_REPORT
))) {

37 
usbfwD©a
.
ï0Sètus
 = 
EP_RX
;

38 
usbSëupD©a
.
pBuf„r
 = (
uöt8
 *Ë&
hidD©a
.
keybﬂrdOutRï‹t
.
ÀdSètus
;

39 
usbSëupD©a
.
byãsLe·
 = 
usbSëupHódî
.
Àngth
;

45 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

50 } i‡(
usbfwD©a
.
ï0Sètus
 =
EP_RX
) {

61 
	}
}

71 
	$usb¸GëRï‹t
()

74 i‡(
usbfwD©a
.
ï0Sètus
 =
EP_IDLE
) {

77 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

81 } i‡(
usbfwD©a
.
ï0Sètus
 =
EP_TX
) {

87 
	}
}

98 
	$usb¸SëPrŸocﬁ
()

101 i‡(
usbfwD©a
.
ï0Sètus
 =
EP_IDLE
) {

104 i‡((
usbSëupHódî
.
vÆue
 & 0xFFFE) ||

105 (
usbSëupHódî
.
Àngth
 != 0) ||

106 (
usbSëupHódî
.
ödex
 > 
MOUSE_INDEX
)) {

109 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

114 
	`LO_UINT16
(
usbSëupHódî
.
ödex
)) {

116 
KEYBOARD_INDEX
:

117 
hidD©a
.
keybﬂrdPrŸocﬁ
 = 
	`LO_UINT16
(
usbSëupHódî
.
vÆue
);

119 
MOUSE_INDEX
:

120 
hidD©a
.
mou£PrŸocﬁ
 = 
	`LO_UINT16
(
usbSëupHódî
.
vÆue
);

131 
	}
}

142 
	$usb¸GëPrŸocﬁ
()

145 i‡(
usbfwD©a
.
ï0Sètus
 =
EP_IDLE
) {

148 i‡((
usbSëupHódî
.
vÆue
 != 0) ||

149 (
usbSëupHódî
.
Àngth
 != 1) ||

150 (
usbSëupHódî
.
ödex
 > 
MOUSE_INDEX
)) {

153 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

158 
	`LO_UINT16
(
usbSëupHódî
.
ödex
)) {

160 
KEYBOARD_INDEX
:

161 
usbSëupD©a
.
pBuf„r
 = &
hidD©a
.
keybﬂrdPrŸocﬁ
;

163 
MOUSE_INDEX
:

164 
usbSëupD©a
.
pBuf„r
 = &
hidD©a
.
mou£PrŸocﬁ
;

169 
usbSëupD©a
.
byãsLe·
 = 1;

170 
usbfwD©a
.
ï0Sètus
 = 
EP_TX
;

175 } i‡(
usbfwD©a
.
ï0Sètus
 =
EP_TX
) {

181 
	}
}

192 
	$usb¸SëIdÀ
()

195 i‡(
usbfwD©a
.
ï0Sètus
 =
EP_IDLE
) {

198 i‡((
usbSëupHódî
.
Àngth
 != 0) ||

199 (
usbSëupHódî
.
ödex
 > 
MOUSE_INDEX
)) {

202 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

207 
	`LO_UINT16
(
usbSëupHódî
.
ödex
)) {

209 
KEYBOARD_INDEX
:

210 
hidD©a
.
keybﬂrdIdÀR©e
 = 
usbSëupHódî
.
vÆue
;

212 
MOUSE_INDEX
:

213 
hidD©a
.
mou£IdÀR©e
 = 
usbSëupHódî
.
vÆue
;

224 
	}
}

235 
	$usb¸GëIdÀ
()

238 i‡(
usbfwD©a
.
ï0Sètus
 =
EP_IDLE
) {

241 i‡((
usbSëupHódî
.
Àngth
 != 1) ||

242 (
usbSëupHódî
.
ödex
 > 
MOUSE_INDEX
)) {

245 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

250 
	`LO_UINT16
(
usbSëupHódî
.
ödex
)) {

252 
KEYBOARD_INDEX
:

253 
usbSëupD©a
.
pBuf„r
 = 
	`LOBYTEPTR
(
hidD©a
.
keybﬂrdIdÀR©e
);

255 
MOUSE_INDEX
:

256 
usbSëupD©a
.
pBuf„r
 = 
	`LOBYTEPTR
(
hidD©a
.
mou£IdÀR©e
);

261 
usbSëupD©a
.
byãsLe·
 = 1;

262 
usbfwD©a
.
ï0Sètus
 = 
EP_TX
;

267 } i‡(
usbfwD©a
.
ï0Sètus
 =
EP_TX
) {

273 
	}
}

	@../../../../Components/hal/target/CC2540USB/usb/class_hid/usb_class_requests.h

9 #i‚de‡
USB_CLASS_REQUEST


10 
	#USB_CLASS_REQUEST


	)

13 
	#KEYBOARD_INDEX
 0

	)

14 
	#MOUSE_INDEX
 1

	)

17 
	#GET_REPORT
 0x01

	)

18 
	#GET_IDLE
 0x02

	)

19 
	#GET_PROTOCOL
 0x03

	)

20 
	#SET_REPORT
 0x09

	)

21 
	#SET_IDLE
 0x0A

	)

22 
	#SET_PROTOCOL
 0x0B

	)

25 
	#HID_REP_TYPE_INPUT
 1

	)

26 
	#HID_REP_TYPE_OUTPUT
 2

	)

27 
	#HID_REP_TYPE_FEATURE
 3

	)

30 
	#HID_IDLE_INDEFINITE
 0x0000

	)

31 
	#HID_IDLE_NOT_SET
 0x00FF

32 

	)

34 
	#HID_PROTOCOL_BOOT
 0

	)

35 
	#HID_PROTOCOL_REPORT
 1

	)

39 
usb¸SëRï‹t
();

40 
usb¸SëPrŸocﬁ
();

41 
usb¸SëIdÀ
();

42 
usb¸GëRï‹t
();

43 
usb¸GëPrŸocﬁ
();

44 
usb¸GëIdÀ
();

	@../../../../Components/hal/target/CC2540USB/usb/class_hid/usb_firmware_library_config.c

11 
	#USBFIRMWARELIBRARYCONFIG_C


12 
	~"usb_fúmw¨e_libøry_hódîs.h
"

	)

24 
USB_DESCRIPTOR_MARKER
 
	gusbDes¸ùt‹M¨kî
= {

25 (
uöt8
 
__code
 *)&
usbDescSèπ
,

26 (
uöt8
 
__code
 *)&
usbDescEnd
,

27 (
DESC_LUT_INFO
 
__code
 *Ë&
usbDescLut
,

28 (
DESC_LUT_INFO
 
__code
 *Ë&
usbDescLutEnd
,

29 (
DBLBUF_LUT_INFO
 
__code
 *Ë&
usbDblbufLut
,

	@../../../../Components/hal/target/CC2540USB/usb/class_hid/usb_firmware_library_config.h

9 #i‚de‡
USB_FIRMWARE_LIBRARY_CONFIG_H


10 
	#USB_FIRMWARE_LIBRARY_CONFIG_H


	)

38 #i‡!
deföed
 
USB_SETUP_MAX_NUMBER_OF_INTERFACES


39 
	#USB_SETUP_MAX_NUMBER_OF_INTERFACES
 2

	)

	@../../../../Components/hal/target/CC2540USB/usb/class_hid/usb_firmware_library_headers.h

9 #i‚de‡
RF_USB_LIBRARY_HEADERS_H


10 
	#RF_USB_LIBRARY_HEADERS_H


	)

20 
	~"hÆ_defs.h
"

21 
	~"hÆ_ty≥s.h
"

22 
	~"hÆ_bﬂrd.h
"

23 
	~"usb_fúmw¨e_libøry_c⁄fig.h
"

24 
	~"usb_des¸ùt‹.h
"

25 
	~"usb_des¸ùt‹_∑r£r.h
"

26 
	~"usb_öãºu±.h
"

27 
	~"usb_‰amew‹k.h
"

28 
	~"usb_ªg.h
"

29 
	~"usb_°™d¨d_ªque°s.h
"

30 
	~"usb_su•íd.h
"

	@../../../../Components/hal/target/CC2540USB/usb/class_hid/usb_hid.c

13 
	~"usb_fúmw¨e_libøry_hódîs.h
"

14 
	~"usb_hid_ªp‹ts.h
"

15 
	~"usb_˛ass_ªque°s.h
"

16 
	~"usb_hid.h
"

26 
	$usbHidInô
()

29 
	`usbúqInô
(0xFFFF);

30 
	`usbfwInô
();

31 
	}
}

35 
	$usbHidPro˚ssEvíts
()

38 i‡(
	`USBIRQ_GET_EVENT_MASK
(Ë& 
USBIRQ_EVENT_RESUME
) {

39 
	`USBIRQ_CLEAR_EVENTS
(
USBIRQ_EVENT_RESUME
);

40 i‡(
pFnSu•ídExôHook
!=
NULL
)

42 
	`pFnSu•ídExôHook
();

47 i‡(
	`USBIRQ_GET_EVENT_MASK
(Ë& 
USBIRQ_EVENT_RESET
) {

48 
	`USBIRQ_CLEAR_EVENTS
(0xFFFF);

49 
	`usbfwRe£tH™dÀr
();

53 i‡(
	`USBIRQ_GET_EVENT_MASK
(Ë& 
USBIRQ_EVENT_SUSPEND
) {

54 
	`USBIRQ_CLEAR_EVENTS
(
USBIRQ_EVENT_SUSPEND
);

55 i‡(
pFnSu•ídE¡îHook
!=
NULL
)

57 
	`pFnSu•ídE¡îHook
();

62 i‡(
	`USBIRQ_GET_EVENT_MASK
(Ë& 
USBIRQ_EVENT_SETUP
) {

63 
	`USBIRQ_CLEAR_EVENTS
(
USBIRQ_EVENT_SETUP
);

64 
	`usbfwSëupH™dÀr
();

66 
	}
}

	@../../../../Components/hal/target/CC2540USB/usb/class_hid/usb_hid.h

9 #i‚de‡
USB_HID_H


10 
	#USB_HID_H


	)

12 
	~"usb_fúmw¨e_libøry_c⁄fig.h
"

13 
	~"usb_hid_ªp‹ts.h
"

14 
	~"usb_˛ass_ªque°s.h
"

16 
usbHidInô
();

17 
usbHidPro˚ssEvíts
();

	@../../../../Components/hal/target/CC2540USB/usb/class_hid/usb_hid_hooks.c

15 
	~"usb_fúmw¨e_libøry_hódîs.h
"

16 
	~"usb_˛ass_ªque°s.h
"

30 
	$usb¸HookPro˚ssOut
()

33 
usbSëupHódî
.
ªque°
) {

34 
SET_REPORT
: 
	`usb¸SëRï‹t
(); ;

35 
SET_PROTOCOL
: 
	`usb¸SëPrŸocﬁ
(); ;

36 
SET_IDLE
: 
	`usb¸SëIdÀ
(); ;

37 : 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
; ;

39 
	}
}

43 
	$usb¸HookPro˚ssIn
()

46 
usbSëupHódî
.
ªque°
) {

47 
GET_REPORT
: 
	`usb¸GëRï‹t
(); ;

48 
GET_PROTOCOL
: 
	`usb¸GëPrŸocﬁ
(); ;

49 
GET_IDLE
: 
	`usb¸GëIdÀ
(); ;

50 : 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
; ;

52 
	}
}

56 
	$usbvrHookPro˚ssOut
(Ë{ 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
; 
	}
}

57 
	$usbvrHookPro˚ssIn
(Ë{ 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
; 
	}
}

60 
	$usb§HookSëDes¸ùt‹
(Ë{ 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
; 
	}
}

61 
	$usb§HookSynchFøme
(Ë{ 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
; 
	}
}

62 
	$usb§HookCÀ¨Fótuª
(Ë{ 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
; 
	}
}

63 
	$usb§HookSëFótuª
(Ë{ 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
; 
	}
}

64 
	$usb§HookModifyGëSètus
(
uöt8
 
ªcùõ¡
, uöt8 
ödex
, 
uöt16
 
__xd©a
 *
pSètus
)

66 ()
ªcùõ¡
;

67 ()
ödex
;

68 ()
pSètus
;

69 
	}
}

73 
	$usb§HookPro˚ssEvít
(
uöt8
 
evít
, uöt8 
ödex
)

75 ()
ödex
;

78 
evít
) {

79 
USBSR_EVENT_CONFIGURATION_CHANGING
 :

81 
USBSR_EVENT_CONFIGURATION_CHANGED
 :

83 
USBSR_EVENT_INTERFACE_CHANGING
 :

85 
USBSR_EVENT_INTERFACE_CHANGED
 :

87 
USBSR_EVENT_REMOTE_WAKEUP_ENABLED
 :

89 
USBSR_EVENT_REMOTE_WAKEUP_DISABLED
 :

91 
USBSR_EVENT_EPIN_STALL_CLEARED
 :

93 
USBSR_EVENT_EPIN_STALL_SET
 :

95 
USBSR_EVENT_EPOUT_STALL_CLEARED
 :

97 
USBSR_EVENT_EPOUT_STALL_SET
 :

100 
	}
}

104 
	$usbúqHookPro˚ssEvíts
()

107 
	}
}

	@../../../../Components/hal/target/CC2540USB/usb/class_hid/usb_hid_reports.c

9 
	~"usb_fúmw¨e_libøry_hódîs.h
"

10 
	~"usb_˛ass_ªque°s.h
"

11 
	~"usb_hid_ªp‹ts.h
"

14 
HID_DATA
 
	ghidD©a
 = {

15 .
keybﬂrdOutRï‹t
.
ÀdSètus
= 0,

16 .
	gkeybﬂrdPrŸocﬁ
 = 
HID_PROTOCOL_REPORT
,

17 .
	gmou£PrŸocﬁ
 = 
HID_PROTOCOL_REPORT
,

18 .
	gkeybﬂrdIdÀR©e
 = 
HID_IDLE_NOT_SET
,

19 .
	gmou£IdÀR©e
 = 
HID_IDLE_NOT_SET
,

22 
	#hÆI¡U∆ock
(
HIS
Ë
	`HAL_EXIT_CRITICAL_SECTION
((HIS))

	)

23 
hÆI¡Sèã_t
 
hÆI¡Lock
();

24 
hÆI¡Sèã_t
 
	$hÆI¡Lock
()

26 
hÆI¡Sèã_t
 
ötSèã
 = 
EA
;

27 
	`HAL_DISABLE_INTERRUPTS
();

28  
ötSèã
;

29 
	}
}

48 
uöt8
 
	$hidSídHidInRï‹t
(
uöt8
 *
pRï‹t
, uöt8 
ídPoöt
, uöt8 
Àn
)

50 
uöt8
 
ªsu…
 = 
FALSE
;

52 i‡(
ídPoöt
 < 6)

54 
uöt8
 
ó
 = 
	`hÆI¡Lock
();

56 
	`USBFW_SELECT_ENDPOINT
(
ídPoöt
);

57 i‡(!(
USBCSIL
 & 
USBCSIL_INPKT_RDY
))

59 
	`usbfwWrôeFifo
(((&
USBF0
Ë+ (
ídPoöt
 << 1)), 
Àn
, 
pRï‹t
);

60 
USBCSIL
 |
USBCSIL_INPKT_RDY
;

61 
ªsu…
 = 
TRUE
;

63 
	`hÆI¡U∆ock
(
ó
);

66  
ªsu…
;

67 
	}
}

	@../../../../Components/hal/target/CC2540USB/usb/class_hid/usb_hid_reports.h

9 #i‚de‡
USBHIDREPORTS_H


10 
	#USBHIDREPORTS_H


	)

12 
	~"hÆ_ty≥s.h
"

14 
	#USB_HID_KBD_EP
 1

15 
	#USB_HID_CC_EP
 2

16 
	#USB_HID_MOUSE_EP
 4

17 

	)

19 
uöt8
 
	mÀdSètus
;

20 } 
	tKEYBOARD_OUT_REPORT
;

23 
uöt8
 
	mmodifõrs
;

24 
uöt8
 
	mª£rved
;

25 
uöt8
 
	mpKeyCodes
[6];

26 } 
	tKEYBOARD_IN_REPORT
;

29 
uöt8
 
	mbuâ⁄s
;

30 
öt8
 
	mdX
;

31 
öt8
 
	mdY
;

32 
öt8
 
	mdZ
;

33 } 
	tMOUSE_IN_REPORT
;

37 
KEYBOARD_OUT_REPORT
 
	mkeybﬂrdOutRï‹t
;

38 
uöt8
 
	mkeybﬂrdPrŸocﬁ
;

39 
uöt8
 
	mmou£PrŸocﬁ
;

40 
uöt16
 
	mkeybﬂrdIdÀR©e
;

41 
uöt16
 
	mmou£IdÀR©e
;

42 } 
	tHID_DATA
;

45 
HID_DATA
 
hidD©a
;

47 
uöt8
 
hidSídHidInRï‹t
(uöt8 *
pRï‹t
, uöt8 
ídPoöt
, uöt8 
Àn
);

48 
hidShowKeybﬂrdLeds
();

	@../../../../Components/hal/target/CC2540USB/usb/library/cc2540/usb_board_cfg.h

41 #i‚de‡
USB_BOARD_CFG_H


42 
	#USB_BOARD_CFG_H


	)

49 
	~"hÆ_bﬂrd_cfg.h
"

50 
	~"hÆ_mcu.h
"

51 
	~"ioCC2540.h
"

52 
	~"usb_ªg.h
"

59 
	#HAL_BOARD_IO_USB_ENABLE_PORT
 1

60 
	#HAL_BOARD_IO_USB_ENABLE_PIN
 0

	)

62 
	#BIT0
 0x01

	)

63 
	#BIT1
 0x02

	)

64 
	#BIT2
 0x04

	)

65 
	#BIT3
 0x08

	)

66 
	#BIT4
 0x10

	)

67 
	#BIT5
 0x20

	)

68 
	#BIT6
 0x40

	)

69 
	#BIT7
 0x80

	)

71 #i‡!
deföed
 
HAL_UART_USB_SUSPEND


72 
	#HAL_UART_USB_SUSPEND
 
FALSE


	)

80 
	#HAL_USB_ENABLE
(Ë
	`°
–
USBCTRL

USBCTRL_PLL_EN
 | 
USBCTRL_USB_EN
; \

81 !(
USBCTRL
&
USBCTRL_PLL_LOCKED
)); )

	)

82 
	#HAL_USB_PLL_DISABLE
(Ë
	`°
–
USBCTRL
&~
USBCTRL_PLL_EN
; \

83 
USBCTRL
&
USBCTRL_PLL_LOCKED
); )

	)

84 
	#HAL_USB_DISABLE
 
	`°
(
USBCTRL
 = 0; USBCTRL & 0x80);)

	)

86 
	#HAL_USB_PULLUP_ENABLE
() \

87 
	`MCU_IO_OUTPUT
(
HAL_BOARD_IO_USB_ENABLE_PORT
, 
HAL_BOARD_IO_USB_ENABLE_PIN
, 1)

	)

88 
	#HAL_USB_PULLUP_DISABLE
() \

89 
	`MCU_IO_OUTPUT
(
HAL_BOARD_IO_USB_ENABLE_PORT
, 
HAL_BOARD_IO_USB_ENABLE_PIN
, 0)

	)

91 
	#HAL_USB_INT_ENABLE
(Ë
	`°
–
P2IEN
|0x20; 
IEN2
|0x02; )

	)

92 
	#HAL_USB_INT_DISABLE
(Ë
	`°
–
P2IEN
&~0x20; )

	)

93 
	#HAL_USB_INT_CLEAR
(Ë
	`°
–
P2IFG
0; 
P2IF
0; )

	)

95 
	#HAL_USB_RESUME_INT_ENABLE
(Ë
	`°
 ( 
USBCIE
 |0x02; )

	)

96 
	#HAL_USB_RESUME_INT_DISABLE
(Ë
	`°
 ( 
USBCIE
 &~0x02; )

	)

98 
	#USBCTRL_PLL_LOCKED
 0x80

	)

99 
	#USBCTRL_PLL_EN
 0x02

	)

100 
	#USBCTRL_USB_EN
 0x01

	)

102 
	#P2IFG_DPIF
 0x20

	)

104 
	#CC2540_IS_XOSC_STABLE
(Ë(
SLEEPSTA
 & 
XOSC_STB
)

	)

106 
	#NOP
(Ë
	`asm
("NOP")

	)

107 
	#MCU_IO_TRISTATE
 1

108 
	#MCU_IO_PULLUP
 2

	)

109 
	#MCU_IO_PULLDOWN
 3

	)

114 
	#MCU_IO_PERIPHERAL
(
p‹t
, 
pö
Ë
	`MCU_IO_PERIPHERAL_PREP
’‹t,Öö)

	)

115 
	#MCU_IO_INPUT
(
p‹t
, 
pö
, 
func
Ë
	`MCU_IO_INPUT_PREP
’‹t,Öö, func)

	)

116 
	#MCU_IO_OUTPUT
(
p‹t
, 
pö
, 
vÆ
Ë
	`MCU_IO_OUTPUT_PREP
’‹t,Öö, vÆ)

	)

117 
	#MCU_IO_SET
(
p‹t
, 
pö
, 
vÆ
Ë
	`MCU_IO_SET_PREP
’‹t,Öö, vÆ)

	)

118 
	#MCU_IO_SET_HIGH
(
p‹t
, 
pö
Ë
	`MCU_IO_SET_HIGH_PREP
’‹t,Öö)

	)

119 
	#MCU_IO_SET_LOW
(
p‹t
, 
pö
Ë
	`MCU_IO_SET_LOW_PREP
’‹t,Öö)

	)

120 
	#MCU_IO_TGL
(
p‹t
, 
pö
Ë
	`MCU_IO_TGL_PREP
’‹t,Öö)

	)

121 
	#MCU_IO_GET
(
p‹t
, 
pö
Ë
	`MCU_IO_GET_PREP
’‹t,Öö)

	)

123 
	#MCU_IO_DIR_INPUT
(
p‹t
, 
pö
Ë
	`MCU_IO_DIR_INPUT_PREP
’‹t,Öö)

	)

124 
	#MCU_IO_DIR_OUTPUT
(
p‹t
, 
pö
Ë
	`MCU_IO_DIR_OUTPUT_PREP
’‹t,Öö)

	)

129 
	#MCU_IO_PERIPHERAL_PREP
(
p‹t
, 
pö
Ë
	`°
–
P
##p‹t##
SEL
 |
	`BV
’ö); )

	)

131 
	#MCU_IO_INPUT_PREP
(
p‹t
, 
pö
, 
func
Ë
	`°
–
P
##p‹t##
SEL
 &~
	`BV
(pin); \

132 
P
##
p‹t
##
DIR
 &~
	`BV
(
pö
); \

133 
func
) { \

134 
MCU_IO_PULLUP
: \

135 
P
##
p‹t
##
INP
 &~
	`BV
(
pö
); \

136 
P2INP
 &~
	`BV
(
p‹t
 + 5); \

138 
MCU_IO_PULLDOWN
: \

139 
P
##
p‹t
##
INP
 &~
	`BV
(
pö
); \

140 
P2INP
 |
	`BV
(
p‹t
 + 5); \

143 
P
##
p‹t
##
INP
 |
	`BV
(
pö
); \

144 ; } )

	)

146 
	#MCU_IO_OUTPUT_PREP
(
p‹t
, 
pö
, 
vÆ
Ë
	`°
–
P
##p‹t##
SEL
 &~
	`BV
(pin); \

147 
P
##
p‹t
##
_
##
pö
## = 
vÆ
; \

148 
P
##
p‹t
##
DIR
 |
	`BV
(
pö
); )

	)

150 
	#MCU_IO_SET_HIGH_PREP
(
p‹t
, 
pö
Ë
	`°
–
P
##p‹t##
_
##pö## = 1; )

	)

151 
	#MCU_IO_SET_LOW_PREP
(
p‹t
, 
pö
Ë
	`°
–
P
##p‹t##
_
##pö## = 0; )

	)

153 
	#MCU_IO_SET_PREP
(
p‹t
, 
pö
, 
vÆ
Ë
	`°
–
P
##p‹t##
_
##pö## = vÆ; )

	)

154 
	#MCU_IO_TGL_PREP
(
p‹t
, 
pö
Ë
	`°
–
P
##p‹t##
_
##pö## ^1; )

	)

155 
	#MCU_IO_GET_PREP
(
p‹t
, 
pö
Ë(
P
##p‹t## & 
	`BV
’ö))

	)

157 
	#MCU_IO_DIR_INPUT_PREP
(
p‹t
, 
pö
Ë
	`°
–
P
##p‹t##
DIR
 &~
	`BV
’ö); )

	)

158 
	#MCU_IO_DIR_OUTPUT_PREP
(
p‹t
, 
pö
Ë
	`°
–
P
##p‹t##
DIR
 |
	`BV
’ö); )

	)

	@../../../../Components/hal/target/CC2540USB/usb/library/cc2540/usb_interrupt.c

11 
	#USBINTERRUPT_C


12 
	~"usb_fúmw¨e_libøry_hódîs.h
"

	)

13 
	~"usb_bﬂrd_cfg.h
"

14 
	~"hÆ_Êash.h
"

15 
	~"hÆ_Àd.h
"

27 
	$usbúqInô
(
uöt16
 
úqMask
)

30 
usbúqD©a
.
evítMask
 = 0x0000;

31 
usbúqD©a
.
öSu•íd
 = 
FALSE
;

32 
usbúqD©a
.
úqMask
 = irqMask;

35 
USBCIE
 = 
úqMask
;

36 
USBIIE
 = 
úqMask
 >> 4;

37 
USBOIE
 = (
úqMask
 >> 9) & 0x3E;

39 
	`HAL_USB_INT_CLEAR
();

40 
	`HAL_USB_INT_ENABLE
();

42 
	}
}

51 #i‡
deföed
 
HAL_USB_BOOT_CODE


52 
	$usbúqH™dÀr
()

54 #¥agm®
ve˘‹
=
P2INT_VECTOR


55 
__öãºu±
 
	$usbúqH™dÀr
()

58 
uöt8
 
usbcif
;

61 !
	`CC2540_IS_XOSC_STABLE
());

64 
usbcif
 = 
USBCIF
;

65 i‡(
usbcif
 & 
USBCIF_RSTIF
) {

69 
USBCIE
 = 
usbúqD©a
.
úqMask
;

70 
USBIIE
 = 
usbúqD©a
.
úqMask
 >> 4;

71 
USBOIE
 = (
usbúqD©a
.
úqMask
 >> 9) & 0x3E;

74 
USBPOW
 |
USBPOW_SUSPEND_EN
;

78 
usbúqD©a
.
evítMask
 |(
uöt16
Ë
usbcif
;

79 
usbúqD©a
.
evítMask
 |(
uöt16
Ë
USBIIF
 << 4;

80 
usbúqD©a
.
evítMask
 |(
uöt16
Ë
USBOIF
 << 9;

85 i‡(
usbcif
 & 
USBCIF_SUSPENDIF
) {

86 
usbúqD©a
.
öSu•íd
 = 
TRUE
;

88 i‡(
usbcif
 & (
USBCIF_RSTIF
 | 
USBCIF_RESUMEIF
)) {

89 
usbúqD©a
.
öSu•íd
 = 
FALSE
;

91 i‡(
P2IFG
 & 
P2IFG_DPIF
) {

93 
P2IFG
 = ~
P2IFG_DPIF
;

94 
usbúqD©a
.
öSu•íd
 = 
FALSE
;

98 
	`usbúqHookPro˚ssEvíts
();

101 
	`HAL_USB_INT_CLEAR
();

103 
	}
}

	@../../../../Components/hal/target/CC2540USB/usb/library/cc2540/usb_suspend.c

11 
	~"usb_fúmw¨e_libøry_hódîs.h
"

12 
	~"hÆ_bﬂrd.h
"

13 
	~"hÆ_mcu.h
"

14 
	~"hÆ_Àd.h
"

16 
__xd©a
 
VFPTR
 
	gpFnSu•ídE¡îHook

NULL
;

17 
__xd©a
 
VFPTR
 
	gpFnSu•ídExôHook

NULL
;

19 #i‡
HAL_UART_USB_SUSPEND


20 
hÆE¡îPowîMode
();

30 
	$usbsu•E¡î
()

32 i‡(
pFnSu•ídE¡îHook
!=
NULL
)

33 
	`pFnSu•ídE¡îHook
();

35 
	`HAL_USB_INT_CLEAR
();

36 
	`HAL_USB_INT_ENABLE
();

39 
	`HAL_USB_PLL_DISABLE
();

41 
	`HAL_LED_CLR_1
();

45 
SLEEPCMD
 = 0x05;

46 
	`hÆE¡îPowîMode
();

47 }  
usbúqD©a
.
öSu•íd
 );

52 !
	`CC2540_IS_XOSC_STABLE
());

55 
	`HAL_USB_ENABLE
();

57 i‡(
pFnSu•ídExôHook
!=
NULL
)

58 
	`pFnSu•ídExôHook
();

59 
	}
}

76 
uöt8
 
	$usbsu•DoRemŸeWakeup
()

78 
	`hÆMcuWaôMs
(
uöt16
 
m£c
);

79 
hÆI¡Sèã_t
 
ötSèã
;

82 i‡(!
usbfwD©a
.
ªmŸeWakeup
Ë 
FALSE
;

84 
	`HAL_ENTER_CRITICAL_SECTION
(
ötSèã
);

87 
usbúqD©a
.
öSu•íd
 = 
FALSE
;

90 
USBPOW
 |
USBPOW_RESUME
;

91 
	`hÆMcuWaôMs
(10);

92 
USBPOW
 &~
USBPOW_RESUME
;

95 
	`HAL_USB_INT_CLEAR
();

97 
	`HAL_EXIT_CRITICAL_SECTION
(
ötSèã
);

99  
TRUE
;

101 
	}
}

	@../../../../Components/hal/target/CC2540USB/usb/library/cc2540_hid/usb_board_cfg.h

41 #i‚de‡
USB_BOARD_CFG_H


42 
	#USB_BOARD_CFG_H


	)

49 
	~"hÆ_bﬂrd_cfg.h
"

50 
	~"hÆ_mcu.h
"

51 
	~"ioCC2540.h
"

52 
	~"usb_ªg.h
"

59 
	#HAL_BOARD_IO_USB_ENABLE_PORT
 1

60 
	#HAL_BOARD_IO_USB_ENABLE_PIN
 0

	)

62 
	#BIT0
 0x01

	)

63 
	#BIT1
 0x02

	)

64 
	#BIT2
 0x04

	)

65 
	#BIT3
 0x08

	)

66 
	#BIT4
 0x10

	)

67 
	#BIT5
 0x20

	)

68 
	#BIT6
 0x40

	)

69 
	#BIT7
 0x80

	)

76 
	#HAL_BOARD_STABLE
(Ë(
CLKCONSTA
 =(
CLKCONCMD_32MHZ
 | 
OSC_32KHZ
))

	)

80 
	#HAL_USB_ENABLE
(Ë
	`°
( \

81 !
	`HAL_BOARD_STABLE
()); \

82 
USBCTRL
 = 
USBCTRL_USB_EN
 | 
USBCTRL_PLL_EN
; \

83 !(
USBCTRL
 & 
USBCTRL_PLL_LOCKED
)); \

84 )

	)

86 
	#HAL_USB_RUN
(Ë
	`°
( \

87 
	`HAL_USB_PULLUP_ENABLE
(); \

88 
	`HAL_USB_INT_CLEAR
(); \

89 
	`HAL_USB_INT_ENABLE
(); \

90 )

	)

92 
	#HAL_USB_PLL_DISABLE
(Ë
	`°
–
USBCTRL
 &~
USBCTRL_PLL_EN
; USBCTRL & 
USBCTRL_PLL_LOCKED
); )

	)

93 
	#HAL_USB_DISABLE
 
	`°
–
USBCTRL
 = 0; USBCTRL & 
USBCTRL_PLL_LOCKED
); )

	)

95 
	#HAL_USB_PULLUP_ENABLE
() \

96 
	`MCU_IO_OUTPUT
(
HAL_BOARD_IO_USB_ENABLE_PORT
, 
HAL_BOARD_IO_USB_ENABLE_PIN
, 1)

	)

97 
	#HAL_USB_PULLUP_DISABLE
() \

98 
	`MCU_IO_OUTPUT
(
HAL_BOARD_IO_USB_ENABLE_PORT
, 
HAL_BOARD_IO_USB_ENABLE_PIN
, 0)

	)

100 
	#HAL_USB_INT_ENABLE
(Ë
	`°
–
P2IEN
|0x20; 
IEN2
|0x02; )

	)

101 
	#HAL_USB_INT_DISABLE
(Ë
	`°
–
P2IEN
&~0x20; )

	)

102 
	#HAL_USB_INT_CLEAR
(Ë
	`°
–
P2IFG
0; 
P2IF
0; )

	)

104 
	#HAL_USB_RESUME_INT_ENABLE
(Ë
	`°
 ( 
USBCIE
 |0x02; )

	)

105 
	#HAL_USB_RESUME_INT_DISABLE
(Ë
	`°
 ( 
USBCIE
 &~0x02; )

	)

107 
	#USBCTRL_PLL_LOCKED
 0x80

	)

108 
	#USBCTRL_PLL_EN
 0x02

	)

109 
	#USBCTRL_USB_EN
 0x01

	)

111 
	#P2IFG_DPIF
 0x20

	)

113 
	#CC2540_IS_XOSC_STABLE
(Ë(
SLEEPSTA
 & 
XOSC_STB
)

	)

115 
	#NOP
(Ë
	`asm
("NOP")

	)

116 
	#MCU_IO_TRISTATE
 1

117 
	#MCU_IO_PULLUP
 2

	)

118 
	#MCU_IO_PULLDOWN
 3

	)

123 
	#MCU_IO_PERIPHERAL
(
p‹t
, 
pö
Ë
	`MCU_IO_PERIPHERAL_PREP
’‹t,Öö)

	)

124 
	#MCU_IO_INPUT
(
p‹t
, 
pö
, 
func
Ë
	`MCU_IO_INPUT_PREP
’‹t,Öö, func)

	)

125 
	#MCU_IO_OUTPUT
(
p‹t
, 
pö
, 
vÆ
Ë
	`MCU_IO_OUTPUT_PREP
’‹t,Öö, vÆ)

	)

126 
	#MCU_IO_SET
(
p‹t
, 
pö
, 
vÆ
Ë
	`MCU_IO_SET_PREP
’‹t,Öö, vÆ)

	)

127 
	#MCU_IO_SET_HIGH
(
p‹t
, 
pö
Ë
	`MCU_IO_SET_HIGH_PREP
’‹t,Öö)

	)

128 
	#MCU_IO_SET_LOW
(
p‹t
, 
pö
Ë
	`MCU_IO_SET_LOW_PREP
’‹t,Öö)

	)

129 
	#MCU_IO_TGL
(
p‹t
, 
pö
Ë
	`MCU_IO_TGL_PREP
’‹t,Öö)

	)

130 
	#MCU_IO_GET
(
p‹t
, 
pö
Ë
	`MCU_IO_GET_PREP
’‹t,Öö)

	)

132 
	#MCU_IO_DIR_INPUT
(
p‹t
, 
pö
Ë
	`MCU_IO_DIR_INPUT_PREP
’‹t,Öö)

	)

133 
	#MCU_IO_DIR_OUTPUT
(
p‹t
, 
pö
Ë
	`MCU_IO_DIR_OUTPUT_PREP
’‹t,Öö)

	)

138 
	#MCU_IO_PERIPHERAL_PREP
(
p‹t
, 
pö
Ë
	`°
–
P
##p‹t##
SEL
 |
	`BV
’ö); )

	)

140 
	#MCU_IO_INPUT_PREP
(
p‹t
, 
pö
, 
func
Ë
	`°
–
P
##p‹t##
SEL
 &~
	`BV
(pin); \

141 
P
##
p‹t
##
DIR
 &~
	`BV
(
pö
); \

142 
func
) { \

143 
MCU_IO_PULLUP
: \

144 
P
##
p‹t
##
INP
 &~
	`BV
(
pö
); \

145 
P2INP
 &~
	`BV
(
p‹t
 + 5); \

147 
MCU_IO_PULLDOWN
: \

148 
P
##
p‹t
##
INP
 &~
	`BV
(
pö
); \

149 
P2INP
 |
	`BV
(
p‹t
 + 5); \

152 
P
##
p‹t
##
INP
 |
	`BV
(
pö
); \

153 ; } )

	)

155 
	#MCU_IO_OUTPUT_PREP
(
p‹t
, 
pö
, 
vÆ
Ë
	`°
–
P
##p‹t##
SEL
 &~
	`BV
(pin); \

156 
P
##
p‹t
##
_
##
pö
## = 
vÆ
; \

157 
P
##
p‹t
##
DIR
 |
	`BV
(
pö
); )

	)

159 
	#MCU_IO_SET_HIGH_PREP
(
p‹t
, 
pö
Ë
	`°
–
P
##p‹t##
_
##pö## = 1; )

	)

160 
	#MCU_IO_SET_LOW_PREP
(
p‹t
, 
pö
Ë
	`°
–
P
##p‹t##
_
##pö## = 0; )

	)

162 
	#MCU_IO_SET_PREP
(
p‹t
, 
pö
, 
vÆ
Ë
	`°
–
P
##p‹t##
_
##pö## = vÆ; )

	)

163 
	#MCU_IO_TGL_PREP
(
p‹t
, 
pö
Ë
	`°
–
P
##p‹t##
_
##pö## ^1; )

	)

164 
	#MCU_IO_GET_PREP
(
p‹t
, 
pö
Ë(
P
##p‹t## & 
	`BV
’ö))

	)

166 
	#MCU_IO_DIR_INPUT_PREP
(
p‹t
, 
pö
Ë
	`°
–
P
##p‹t##
DIR
 &~
	`BV
’ö); )

	)

167 
	#MCU_IO_DIR_OUTPUT_PREP
(
p‹t
, 
pö
Ë
	`°
–
P
##p‹t##
DIR
 |
	`BV
’ö); )

	)

	@../../../../Components/hal/target/CC2540USB/usb/library/cc2540_hid/usb_interrupt.c

11 
	#USBINTERRUPT_C


12 
	~"usb_fúmw¨e_libøry_hódîs.h
"

	)

13 
	~"usb_bﬂrd_cfg.h
"

25 
	$usbúqInô
(
uöt16
 
úqMask
)

27 
usbúqD©a
.
evítMask
 = 0x0000;

28 
usbúqD©a
.
úqMask
 = irqMask;

29 
usbúqD©a
.
öSu•íd
 = 
FALSE
;

30 
	}
}

39 #i‡
deföed
 
HAL_USB_BOOT_CODE


40 
	$usbúqH™dÀr
()

42 #¥agm®
ve˘‹
=
P2INT_VECTOR


43 
__öãºu±
 
	$usbúqH™dÀr
()

46 
uöt16
 
evítMask
;

47 
uöt8
 
usbcif
;

49 
	`HAL_ENTER_ISR
();

50 
	`HAL_USB_ENABLE
();

51 
usbcif
 = 
USBCIF
;

53 i‡((
usbcif
 & (
USBCIF_RSTIF
 | 
USBCIF_RESUMEIF
)Ë|| (
P2IFG
 & 
P2IFG_DPIF
)) {

54 i‡(
usbcif
 & 
USBCIF_RSTIF
) {

57 
USBCIE
 = 
usbúqD©a
.
úqMask
;

58 
USBIIE
 = 
usbúqD©a
.
úqMask
 >> 4;

59 
USBOIE
 = (
usbúqD©a
.
úqMask
 >> 9) & 0x3E;

62 
USBPOW
 |
USBPOW_SUSPEND_EN
;

65 
usbcif
 |
USBCIF_RESUMEIF
;

66 
usbúqD©a
.
öSu•íd
 = 
FALSE
;

68 i‡(
usbcif
 & 
USBCIF_SUSPENDIF
) {

69 
	`HAL_USB_PLL_DISABLE
();

70 
usbúqD©a
.
öSu•íd
 = 
TRUE
;

73 
evítMask
 = 
usbcif
;

74 
evítMask
 |(
uöt16
)
USBIIF
 << 4;

75 
evítMask
 |(
uöt16
)
USBOIF
 << 9;

76 
usbúqD©a
.
evítMask
 |=ÉventMask;

78 
	`HAL_USB_INT_CLEAR
();

79 
	`HAL_EXIT_ISR
();

80 
	}
}

	@../../../../Components/hal/target/CC2540USB/usb/library/cc2540_hid/usb_suspend.c

11 
	~"usb_fúmw¨e_libøry_hódîs.h
"

12 
	~"usb_bﬂrd_cfg.h
"

13 
	~"hÆ_¶ìp.h
"

15 
__xd©a
 
VFPTR
 
	gpFnSu•ídE¡îHook

NULL
;

16 
__xd©a
 
VFPTR
 
	gpFnSu•ídExôHook

NULL
;

31 #¥agm®
›timize
=
n⁄e


32 
	$hÆMcuWaôMs
(
uöt16
 
m£c
)

34 
m£c
--)

36 
	`hÆSÀïWaô
(1000);

38 
	}
}

52 
uöt8
 
	$usbsu•DoRemŸeWakeup
()

54 
hÆI¡Sèã_t
 
ötSèã
;

55 
uöt8
 
exô
 = 
FALSE
;

57 i‡(!
usbfwD©a
.
ªmŸeWakeup
Ë 
FALSE
;

59 
	`HAL_ENTER_CRITICAL_SECTION
(
ötSèã
);

61 i‡(
usbúqD©a
.
öSu•íd
)

63 
	`HAL_USB_ENABLE
();

64 
USBPOW
 |
USBPOW_RESUME
;

65 
	`hÆMcuWaôMs
(10);

66 
USBPOW
 &~
USBPOW_RESUME
;

67 
exô
 = 
TRUE
;

70 
	`HAL_EXIT_CRITICAL_SECTION
(
ötSèã
);

72 i‡(
exô
 && (
pFnSu•ídExôHook
!=
NULL
))

74 
	`pFnSu•ídExôHook
();

77  
TRUE
;

78 
	}
}

	@../../../../Components/hal/target/CC2540USB/usb/library/usb/usb_descriptor_parser.c

11 
	#USBDESCRIPTORPARSER_C


12 
	~"usb_fúmw¨e_libøry_hódîs.h
"

	)

14 
	#BLE_INFO_PAGE_BDADDR
 0x780C

15 
	#BLE_INFO_PAGE_BDADDR_LEN
 8

	)

16 
	#BLE_INFO_PAGE_WAFER_INFO
 0x7FF4

	)

20 
USBDP_DATA
 
__xd©a
 
	gusbdpD©a
;

26 c⁄° 
uöt8
 
	gœnguageId
[4] = {

28 
DESC_TYPE_STRING
,

33 c⁄° 
uöt8
 
	gm™uÁ˘uªr
[36] = {

35 
DESC_TYPE_STRING
,

56 c⁄° 
uöt8
 
	g¥odu˘
[36] = {

58 
DESC_TYPE_STRING
,

79 
uöt8
 
	g£rülNumbî
[42] = {

81 
DESC_TYPE_STRING
,

108 
	$usbdpInô
()

110 
usbdpD©a
.
pDesc
 = (c⁄° 
uöt8
 
__code
 *Ë
usbDes¸ùt‹M¨kî
.
pUsbDescSèπ
;

111 
	}
}

138 
__code
* 
	$usbdpFödNext
(
uöt8
 
w™ãdTy≥
, uöt8 
hÆtAtTy≥
)

140 
__code
 *
pResu…
;

141 
pResu…
 = 
NULL
;

144 
usbdpD©a
.
pDesc
 !(
__code
 *Ë
usbDes¸ùt‹M¨kî
.
pUsbDescEnd
) {

147 i‡(
usbdpD©a
.
pDesc
[
DESC_TYPE_IDX
] =
w™ãdTy≥
) {

148 
pResu…
 = (
__code
*Ë
usbdpD©a
.
pDesc
;

149 
usbdpD©a
.
pDesc
 +usbdpD©a.pDesc[
DESC_LENGTH_IDX
];

153 } i‡(
usbdpD©a
.
pDesc
[
DESC_TYPE_IDX
] =
hÆtAtTy≥
) {

154 i‡(
hÆtAtTy≥
) ;

158 
usbdpD©a
.
pDesc
 +usbdpD©a.pDesc[
DESC_LENGTH_IDX
];

161  
pResu…
;

162 
	}
}

174 
USB_DEVICE_DESCRIPTOR
 
__code
* 
	$usbdpGëDevi˚Desc
()

176 
	`usbdpInô
();

177  
	`usbdpFödNext
(
DESC_TYPE_DEVICE
, 0);

178 
	}
}

200 
USB_CONFIGURATION_DESCRIPTOR
 
__code
* 
	$usbdpGëC⁄figuøti⁄Desc
(
uöt8
 
cfgVÆue
, uöt8 
cfgIndex
)

202 
USB_CONFIGURATION_DESCRIPTOR
 
__code
 *
pC⁄figuøti⁄Desc
;

203 
	`usbdpInô
();

206 
pC⁄figuøti⁄Desc
 = 
	`usbdpFödNext
(
DESC_TYPE_CONFIG
, 0)) {

209 i‡(
cfgVÆue
) {

210 i‡(
cfgVÆue
 =
pC⁄figuøti⁄Desc
->
bC⁄figuøti⁄VÆue
) ;

213 } i‡(!
cfgIndex
--) {

218  
pC⁄figuøti⁄Desc
;

219 
	}
}

242 
USB_INTERFACE_DESCRIPTOR
 
__code
* 
	$usbdpGëI¡îÁ˚Desc
(
uöt8
 
cfgVÆue
, uöt8 
ötNumbî
, uöt8 
ÆtSëtög
)

244 
USB_INTERFACE_DESCRIPTOR
 
__code
 *
pI¡îÁ˚Desc
;

247 
	`usbdpGëC⁄figuøti⁄Desc
(
cfgVÆue
, 0);

250 
pI¡îÁ˚Desc
 = 
	`usbdpFödNext
(
DESC_TYPE_INTERFACE
, 
DESC_TYPE_CONFIG
)) {

251 i‡((
pI¡îÁ˚Desc
->
bI¡îÁ˚Numbî
 =
ötNumbî
Ë&& (pI¡îÁ˚Desc->
bA…î«ãSëtög
 =
ÆtSëtög
)) {

256  
pI¡îÁ˚Desc
;

257 
	}
}

272 
USB_STRING_DESCRIPTOR
 *
	$usbdpGëSåögDesc
(
uöt8
 
°rIndex
)

274 
USB_STRING_DESCRIPTOR
 *
pSåögDesc
 = 
NULL
;

276 #ifde‡
MS_EXT_C_ID


289 
°rIndex
)

292 
pSåögDesc
 = (
USB_STRING_DESCRIPTOR
 *)
œnguageId
;

296 
pSåögDesc
 = (
USB_STRING_DESCRIPTOR
 *)
m™uÁ˘uªr
;

300 
pSåögDesc
 = (
USB_STRING_DESCRIPTOR
 *)
¥odu˘
;

304 i‡(
£rülNumbî
[0] == 0)

306 
uöt8
 
bdAddr
[ 8 ], 
i
;

307 
uöt16
 
tmp
;

310 
i
=0; i<
BLE_INFO_PAGE_BDADDR_LEN
; i++)

312 
bdAddr
[
i
] = ((
uöt8
 *)
BLE_INFO_PAGE_BDADDR
)[i];

316 i‡–(
bdAddr
[0] == 0xFF) && (bdAddr[1] == 0xFF) &&

317 (
bdAddr
[2] == 0xFF) && (bdAddr[3] == 0xFF) &&

318 (
bdAddr
[4] == 0xFF) && (bdAddr[5] == 0xFF) &&

319 (
bdAddr
[6] == 0xFF) && (bdAddr[7] == 0xFF) )

322 
i
=0; i<
BLE_INFO_PAGE_BDADDR_LEN
; i++)

324 
bdAddr
[
i
] = ((
uöt8
 *)
BLE_INFO_PAGE_WAFER_INFO
)[i];

328 
i
=2; i<42; i+=2)

330 i‡(((
i
-2) % 10) == 0)

332 
uöt8
 
j
 = (
i
-2) / 5;

333 
tmp
 = 
	`BUILD_UINT16
(
bdAddr
[
j
], bdAddr[j+1]);

336 
£rülNumbî
[
i
] = '0' + (
tmp
 % 10);

337 
tmp
 /= 10;

339 
£rülNumbî
[0] = 42;

341 
pSåögDesc
 = (
USB_STRING_DESCRIPTOR
 *)
£rülNumbî
;

350  
pSåögDesc
;

351 
	}
}

	@../../../../Components/hal/target/CC2540USB/usb/library/usb/usb_descriptor_parser.h

9 #i‚de‡
USBDESCRIPTORPARSER_H


10 
	#USBDESCRIPTORPARSER_H


	)

63 
	~"usb_des¸ùt‹.h
"

72 
	#DESC_LENGTH_IDX
 0

73 
	#DESC_TYPE_IDX
 1

74 
	#DESC_CONFIG_LENGTH_LSB_IDX
 2

75 
	#DESC_CONFIG_LENGTH_MSB_IDX
 3

78 

	)

82 
usbdpInô
();

83 
__code
 *
usbdpFödNext
(
uöt8
 
w™ãdTy≥
, uöt8 
hÆtAtTy≥
);

85 
USB_DEVICE_DESCRIPTOR
 
__code
* 
usbdpGëDevi˚Desc
();

86 
USB_CONFIGURATION_DESCRIPTOR
 
__code
* 
usbdpGëC⁄figuøti⁄Desc
(
uöt8
 
cfgVÆue
, uöt8 
cfgIndex
);

87 
USB_INTERFACE_DESCRIPTOR
 
__code
* 
usbdpGëI¡îÁ˚Desc
(
uöt8
 
cfgVÆue
, uöt8 
ötNumbî
, uöt8 
ÆtSëtög
);

88 
USB_STRING_DESCRIPTOR
 *
usbdpGëSåögDesc
(
uöt8
 
°rIndex
);

	@../../../../Components/hal/target/CC2540USB/usb/library/usb/usb_framework.c

11 
	#USBFRAMEWORK_C


12 
	~"usb_fúmw¨e_libøry_hódîs.h
"

	)

13 
	~"usb_bﬂrd_cfg.h
"

16 
VFPTR
 
__d©a
 
	gPro˚ssFunc
;

25 
	$usbfwInô
()

28 
usbfwD©a
.
£lfPowîed
 = (
	`usbdpGëC⁄figuøti⁄Desc
(1, 0)->
bmAâribuãs
 & 0x40Ë? 
TRUE
 : 
FALSE
;

29 
usbfwD©a
.
ªmŸeWakeup
 = 
FALSE
;

31 
	`HAL_USB_ENABLE
();

34 
	`HAL_USB_RESUME_INT_ENABLE
();

36 
	}
}

48 
	$usbfwRe£tH™dÀr
()

52 
usbfwD©a
.
usbSèã
 = 
DEV_DEFAULT
;

53 
usbfwD©a
.
c⁄figuøti⁄VÆue
 = 0;

56 
usbfwD©a
.
ï0Sètus
 = 
EP_IDLE
;

57 
	`usbfwSëAŒEpSètus
(
EP_HALT
);

60 
Pro˚ssFunc
 = 
NULL
;

62 
	}
}

77 
	$usbfwSëupH™dÀr
()

79 
uöt8
 
c⁄åﬁReg
;

80 
uöt8
 
byãsNow
;

81 
uöt8
 
ﬁdEndpoöt
;

84 
ﬁdEndpoöt
 = 
	`USBFW_GET_SELECTED_ENDPOINT
();

85 
	`USBFW_SELECT_ENDPOINT
(0);

86 
c⁄åﬁReg
 = 
USBCS0
;

89 i‡(
c⁄åﬁReg
 & 
USBCS0_SETUP_END
) {

90 
USBCS0
 = 
USBCS0_CLR_SETUP_END
;

91 
usbfwD©a
.
ï0Sètus
 = 
EP_CANCEL
;

92 i‡(
Pro˚ssFunc
Ë
	`Pro˚ssFunc
();

93 
usbfwD©a
.
ï0Sètus
 = 
EP_IDLE
;

97 i‡(
c⁄åﬁReg
 & 
USBCS0_SENT_STALL
) {

98 
USBCS0
 = 0x00;

99 
usbfwD©a
.
ï0Sètus
 = 
EP_IDLE
;

103 i‡(
usbfwD©a
.
ï0Sètus
 =
EP_RX
) {

106 
byãsNow
 = 
USBCNT0
;

107 
	`usbfwRódFifo
(&
USBF0
, 
byãsNow
, 
usbSëupD©a
.
pBuf„r
);

108 
usbSëupD©a
.
byãsLe·
 -
byãsNow
;

109 
usbSëupD©a
.
pBuf„r
 +
byãsNow
;

112 
USBCS0
 = 
usbSëupD©a
.
byãsLe·
 ? 
USBCS0_CLR_OUTPKT_RDY
 : (USBCS0_CLR_OUTPKT_RDY | 
USBCS0_DATA_END
);

115 i‡(
usbSëupD©a
.
byãsLe·
 == 0) {

116 i‡(
Pro˚ssFunc
Ë
	`Pro˚ssFunc
();

117 
usbfwD©a
.
ï0Sètus
 = 
EP_IDLE
;

121 
	`USBFW_SELECT_ENDPOINT
(
ﬁdEndpoöt
);

125 } i‡(
usbfwD©a
.
ï0Sètus
 =
EP_MANUAL_RX
) {

126 
	`Pro˚ssFunc
();

130 i‡(
usbfwD©a
.
ï0Sètus
 =
EP_IDLE
) {

131 i‡(
c⁄åﬁReg
 & 
USBCS0_OUTPKT_RDY
) {

132 
	`usbfwRódFifo
(&
USBF0
, 8, (
uöt8
 
__xd©a
 *Ë&
usbSëupHódî
);

135 
Pro˚ssFunc
 = 
NULL
;

136 
usbSëupHódî
.
ªque°Ty≥
 & (
RT_MASK_TYPE
 | 
RT_MASK_DIR
)) {

139 
RT_STD_OUT
:

140 
usbSëupHódî
.
ªque°
) {

141 
SET_ADDRESS
: 
	`usb§SëAddªss
(); ;

142 
SET_FEATURE
: 
	`usb§SëFótuª
(); ;

143 
CLEAR_FEATURE
: 
	`usb§CÀ¨Fótuª
(); ;

144 
SET_CONFIGURATION
: 
	`usb§SëC⁄figuøti⁄
(); ;

145 
SET_INTERFACE
: 
	`usb§SëI¡îÁ˚
(); ;

146 
SET_DESCRIPTOR
:

147 : 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
; ;

152 
RT_STD_IN
:

153 
usbSëupHódî
.
ªque°
) {

154 
GET_STATUS
: 
	`usb§GëSètus
(); ;

155 
GET_DESCRIPTOR
: 
	`usb§GëDes¸ùt‹
(); ;

156 
GET_CONFIGURATION
: 
	`usb§GëC⁄figuøti⁄
(); ;

157 
GET_INTERFACE
: 
	`usb§GëI¡îÁ˚
(); ;

158 
SYNCH_FRAME
:

159 : 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
; ;

164 
RT_VEND_OUT
:

165 
Pro˚ssFunc
 = 
usbvrHookPro˚ssOut
; 
	`usbvrHookPro˚ssOut
();

167 
RT_VEND_IN
:

168 
Pro˚ssFunc
 = 
usbvrHookPro˚ssIn
; 
	`usbvrHookPro˚ssIn
();

172 
RT_CLASS_OUT
:

173 
Pro˚ssFunc
 = 
usb¸HookPro˚ssOut
; 
	`usb¸HookPro˚ssOut
();

175 
RT_CLASS_IN
:

176 
Pro˚ssFunc
 = 
usb¸HookPro˚ssIn
; 
	`usb¸HookPro˚ssIn
();

181 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

186 
USBCS0
 = (
usbfwD©a
.
ï0Sètus
 =
EP_STALL
Ë? (
USBCS0_CLR_OUTPKT_RDY
 | 
USBCS0_SEND_STALL
) : USBCS0_CLR_OUTPKT_RDY;

191 i‡(
usbfwD©a
.
ï0Sètus
 =
EP_TX
) {

192 
c⁄åﬁReg
 = 
USBCS0_INPKT_RDY
;

195 i‡(
usbSëupD©a
.
byãsLe·
 < 
EP0_PACKET_SIZE
) {

196 
byãsNow
 = 
usbSëupD©a
.
byãsLe·
;

197 
c⁄åﬁReg
 |
USBCS0_DATA_END
;

201 
byãsNow
 = 
EP0_PACKET_SIZE
;

205 
	`usbfwWrôeFifo
(&
USBF0
, 
byãsNow
, 
usbSëupD©a
.
pBuf„r
);

206 
usbSëupD©a
.
pBuf„r
 +
byãsNow
;

207 
usbSëupD©a
.
byãsLe·
 -
byãsNow
;

210 
USBCS0
 = 
c⁄åﬁReg
;

213 i‡(
byãsNow
 < 
EP0_PACKET_SIZE
) {

214 i‡(
Pro˚ssFunc
Ë
	`Pro˚ssFunc
();

215 
usbfwD©a
.
ï0Sètus
 = 
EP_IDLE
;

219 } i‡(
usbfwD©a
.
ï0Sètus
 =
EP_MANUAL_TX
) {

220 
	`Pro˚ssFunc
();

224 
	`USBFW_SELECT_ENDPOINT
(
ﬁdEndpoöt
);

226 
	}
}

238 
	$usbfwSëAŒEpSètus
(
EP_STATUS
 
°©us
)

240 
uöt8
 
n
;

241 
n
 = 0;Ç < (
usbfwD©a
.
pEpInSètus
);Ç++)

242 
usbfwD©a
.
pEpInSètus
[
n
] = 
°©us
;

243 
n
 = 0;Ç < (
usbfwD©a
.
pEpOutSètus
);Ç++)

244 
usbfwD©a
.
pEpOutSètus
[
n
] = 
°©us
;

245 
	}
}

262 
	$usbfwRódFifo
(
uöt8
 vﬁ©ûê
__xd©a
 *
pFifo
, uöt8 
cou¡
, 
__gíîic
 *
pD©a
)

264 
uöt8
 
__gíîic
 *
pTemp
 = 
pD©a
;

265 i‡(
cou¡
) {

267 *(
pTemp
++Ë*
pFifo
;

268 } --
cou¡
);

270 
	}
}

287 
	$usbfwWrôeFifo
(
uöt8
 vﬁ©ûê
__xd©a
 *
pFifo
, uöt8 
cou¡
, 
__gíîic
 *
pD©a
)

289 
uöt8
 
__gíîic
 *
pTemp
 = 
pD©a
;

290 i‡(
cou¡
) {

292 *
pFifo
 = *(
pTemp
++);

293 } --
cou¡
);

295 
	}
}

	@../../../../Components/hal/target/CC2540USB/usb/library/usb/usb_framework_structs.h

9 #i‚de‡
USBFRAMEWORKSTRUCTS_H


10 
	#USBFRAMEWORKSTRUCTS_H


	)

17 
	~"hÆ_ty≥s.h
"

18 
	~"usb_fúmw¨e_libøry_c⁄fig.h
"

20 #ifde‡
EXTERN


21 #unde‡
EXTERN


23 #ifde‡
USBFRAMEWORK_C


24 
	#EXTERN


25 #ñ£

	)

26 
	#EXTERN
 

28 

	)

36 
EP_IDLE
 = 0x00,

37 
EP_TX
 = 0x01,

38 
EP_RX
 = 0x02,

39 
EP_HALT
 = 0x03,

40 
EP_STALL
 = 0x04,

41 
EP_MANUAL_TX
 = 0x05,

42 
EP_MANUAL_RX
 = 0x06,

43 
EP_CANCEL
 = 0x07

44 } 
	tEP_STATUS
;

48 
	mDEV_ATTACHED
 = 0x00,

49 
	mDEV_POWERED
 = 0x01,

50 
	mDEV_DEFAULT
 = 0x02,

51 
	mDEV_ADDRESS
 = 0x03,

52 
	mDEV_CONFIGURED
 = 0x04,

53 
	mDEV_SUSPENDED
 = 0x05

54 } 
	tUSB_STATE
;

58 
USB_STATE
 
	musbSèã
;

59 
uöt8
 
	mc⁄figuøti⁄VÆue
;

60 
uöt8
 
	mpA…î«ãSëtög
[
USB_SETUP_MAX_NUMBER_OF_INTERFACES
];

61 
EP_STATUS
 
	mï0Sètus
;

62 
EP_STATUS
 
	mpEpInSètus
[5];

63 
EP_STATUS
 
	mpEpOutSètus
[5];

64 
uöt8
 
	mªmŸeWakeup
;

65 
uöt8
 
	m£lfPowîed
;

66 } 
	tUSBFW_DATA
;

71 
uöt8
 
	mªque°Ty≥
;

72 
uöt8
 
	mªque°
;

73 
uöt16
 
	mvÆue
;

74 
uöt16
 
	mödex
;

75 
uöt16
 
	mÀngth
;

76 } 
	tUSB_SETUP_HEADER
;

80 
uöt8
 
__gíîic
 *
	mpBuf„r
;

81 
uöt16
 
	mbyãsLe·
;

82 } 
	tUSB_SETUP_DATA
;

93 
uöt8
 
	mbLígth
;

94 
uöt8
 
	mbDes¸ùt‹Ty≥
;

95 
uöt16
 
	mbcdUSB
;

96 
uöt8
 
	mbDevi˚Cœss
;

97 
uöt8
 
	mbDevi˚SubCœss
;

98 
uöt8
 
	mbDevi˚PrŸocﬁ
;

99 
uöt8
 
	mbMaxPackëSize0
;

100 
uöt16
 
	midVíd‹
;

101 
uöt16
 
	midProdu˘
;

102 
uöt16
 
	mbcdDevi˚
;

103 
uöt8
 
	miM™uÁ˘uªr
;

104 
uöt8
 
	miProdu˘
;

105 
uöt8
 
	miSîülNumbî
;

106 
uöt8
 
	mbNumC⁄figuøti⁄s
;

107 } 
	tUSB_DEVICE_DESCRIPTOR
;

111 
uöt8
 
	mbLígth
;

112 
uöt8
 
	mbDes¸ùt‹Ty≥
;

113 
uöt16
 
	mwTŸÆLígth
;

114 
uöt8
 
	mbNumI¡îÁ˚s
;

115 
uöt8
 
	mbC⁄figuøti⁄VÆue
;

116 
uöt8
 
	miC⁄figuøti⁄
;

117 
uöt8
 
	mbmAâribuãs
;

118 
uöt8
 
	mbMaxPowî
;

119 } 
	tUSB_CONFIGURATION_DESCRIPTOR
;

123 
uöt8
 
	mbLígth
;

124 
uöt8
 
	mbDes¸ùt‹Ty≥
;

125 
uöt8
 
	mbI¡îÁ˚Numbî
;

126 
uöt8
 
	mbA…î«ãSëtög
;

127 
uöt8
 
	mbNumEndpoöts
;

128 
uöt8
 
	mbI¡îÁ˚Cœss
;

129 
uöt8
 
	mbI¡îÁ˚SubCœss
;

130 
uöt8
 
	mbI¡îÁ˚PrŸocﬁ
;

131 
uöt8
 
	miI¡îÁ˚
;

132 } 
	tUSB_INTERFACE_DESCRIPTOR
;

136 
uöt8
 
	mbLígth
;

137 
uöt8
 
	mbDes¸ùt‹Ty≥
;

138 
uöt8
 
	mbEndpoötAddªss
;

139 
uöt8
 
	mbmAâribuãs
;

140 
uöt16
 
	mwMaxPackëSize
;

141 
uöt8
 
	mbI¡îvÆ
;

142 } 
	tUSB_ENDPOINT_DESCRIPTOR
;

146 
uöt8
 
	mbLígth
;

147 
uöt8
 
	mbDes¸ùt‹Ty≥
;

148 
uöt16
 
	mpSåög
[1];

149 } 
	tUSB_STRING_DESCRIPTOR
;

153 
uöt8
 
	mbLígth
;

154 
uöt8
 
	mbDes¸ùt‹Ty≥
;

155 
uöt16
 
	mbscHID
;

156 
uöt8
 
	mbCou¡ryCode
;

157 
uöt8
 
	mbNumDes¸ùt‹s
;

158 
uöt8
 
	mbRDes¸ùt‹Ty≥
;

159 
uöt16
 
	mwDes¸ùt‹Lígth
;

160 } 
	tUSB_HID_DESCRIPTOR
;

167 
uöt8
 
	mvÆueMsb
;

168 
uöt8
 
	mvÆueLsb
;

169 
uöt8
 
	mödexMsb
;

170 
uöt8
 
	mödexLsb
;

171 
uöt8
 
__code
 *
	mpDescSèπ
;

172 
uöt16
 
	mÀngth
;

173 } 
	tDESC_LUT_INFO
;

177 
USB_INTERFACE_DESCRIPTOR
 
__code
 *
	mpI¡îÁ˚
;

178 
uöt8
 
	möMask
;

179 
uöt8
 
	moutMask
;

180 } 
	tDBLBUF_LUT_INFO
;

186 
uöt16
 
	mevítMask
;

187 
uöt8
 
	möSu•íd
;

188 
uöt16
 
	múqMask
;

189 } 
	tUSBIRQ_DATA
;

194 c⁄° 
uöt8
 
__code
 *
	mpDesc
;

195 } 
	tUSBDP_DATA
;

	@../../../../Components/hal/target/CC2540USB/usb/library/usb/usb_interrupt.h

9 #i‚de‡
USBINTERRUPT_H


10 
	#USBINTERRUPT_H


	)

76 
	~"usb_‰amew‹k_°ru˘s.h
"

78 #ifde‡
EXTERN


79 #unde‡
EXTERN


81 #ifde‡
USBINTERRUPT_C


82 
	#EXTERN


83 #ñ£

	)

84 
	#EXTERN
 

86 

	)

95 #ifde‡
USBIRQ_DATA_ADDR


96 
EXTERN
 
__no_öô
 
__d©a
 
USBIRQ_DATA
 
usbúqD©a
 @ 
USBIRQ_DATA_ADDR
;

98 
EXTERN
 
USBIRQ_DATA
 
__d©a
 
	gusbúqD©a
;

109 
	#USBIRQ_EVENT_SUSPEND
 0x0001

	)

111 
	#USBIRQ_EVENT_RESUME
 0x0002

	)

113 
	#USBIRQ_EVENT_RESET
 0x0004

	)

115 
	#USBIRQ_EVENT_START_OF_FRAME
 0x0008

	)

117 
	#USBIRQ_EVENT_SETUP
 0x0010

	)

119 
	#USBIRQ_EVENT_EP1IN
 0x0020

	)

121 
	#USBIRQ_EVENT_EP2IN
 0x0040

	)

123 
	#USBIRQ_EVENT_EP3IN
 0x0080

	)

125 
	#USBIRQ_EVENT_EP4IN
 0x0100

	)

127 
	#USBIRQ_EVENT_EP5IN
 0x0200

	)

129 
	#USBIRQ_EVENT_EP1OUT
 0x0400

	)

131 
	#USBIRQ_EVENT_EP2OUT
 0x0800

	)

133 
	#USBIRQ_EVENT_EP3OUT
 0x1000

	)

135 
	#USBIRQ_EVENT_EP4OUT
 0x2000

	)

137 
	#USBIRQ_EVENT_EP5OUT
 0x4000

	)

147 
	#USBIRQ_CLEAR_EVENTS
(
mask
Ë(
usbúqD©a
.
evítMask
 &~(mask))

	)

149 
	#USBIRQ_GET_EVENT_MASK
(Ë(
usbúqD©a
.
evítMask
)

	)

159 
usbúqHookPro˚ssEvíts
();

167 
usbúqInô
(
uöt16
 
úqMask
);

168 #i‡
deföed
 
HAL_USB_BOOT_CODE


169 
usbúqH™dÀr
();

171 
__öãºu±
 
usbúqH™dÀr
();

	@../../../../Components/hal/target/CC2540USB/usb/library/usb_descriptor.h

8 #i‚de‡
USBDESCRIPTOR_H


9 
	#USBDESCRIPTOR_H


	)

12 #i‚de‡
ASM_FILE


13 
	~"usb_‰amew‹k_°ru˘s.h
"

87 #ifde‡
EXTERN


88 #unde‡
EXTERN


90 #ifde‡
USBDESCRIPTORPARSER_C


91 
	#EXTERN


92 #ñ£

	)

93 
	#EXTERN
 

95 

	)

100 
	#EP0_PACKET_SIZE
 32

102 

	)

105 
	#DESC_TYPE_DEVICE
 0x01

106 
	#DESC_TYPE_CONFIG
 0x02

107 
	#DESC_TYPE_STRING
 0x03

108 
	#DESC_TYPE_INTERFACE
 0x04

109 
	#DESC_TYPE_ENDPOINT
 0x05

111 

	)

114 
	#DESC_TYPE_HID
 0x21

115 
	#DESC_TYPE_HIDREPORT
 0x22

117 

	)

120 
	#EP_ATTR_CTRL
 0x00

121 
	#EP_ATTR_ISO
 0x01

122 
	#EP_ATTR_BULK
 0x02

123 
	#EP_ATTR_INT
 0x03

124 
	#EP_ATTR_TYPE_BM
 0x03

127 

	)

129 #i‚de‡
ASM_FILE


136 
uöt8
 
__code
* c⁄° 
pUsbDescSèπ
;

137 
uöt8
 
__code
* c⁄° 
pUsbDescEnd
;

138 
DESC_LUT_INFO
 
__code
* c⁄° 
pUsbDescLut
;

139 
DESC_LUT_INFO
 
__code
* c⁄° 
pUsbDescLutEnd
;

140 
DBLBUF_LUT_INFO
 
__code
* c⁄° 
pUsbDblbufLut
;

141 
DBLBUF_LUT_INFO
 
__code
* c⁄° 
pUsbDblbufLutEnd
;

142 } 
	tUSB_DESCRIPTOR_MARKER
;

144 
USB_DESCRIPTOR_MARKER
 
__xd©a
 
usbDes¸ùt‹M¨kî
;

152 
__code
* 
usbDescSèπ
;

153 
__code
* 
usbDescEnd
;

154 
__code
* 
usbDescLut
;

155 
__code
* 
usbDescLutEnd
;

156 
__code
* 
usbDblbufLut
;

157 
__code
* 
usbDblbufLutEnd
;

	@../../../../Components/hal/target/CC2540USB/usb/library/usb_framework.h

9 #i‚de‡
USBFRAMEWORK_H


10 
	#USBFRAMEWORK_H


	)

182 
	~"usb_bﬂrd_cfg.h
"

183 
	~"usb_‰amew‹k_°ru˘s.h
"

185 #ifde‡
EXTERN


186 #unde‡
EXTERN


188 #ifde‡
USBFRAMEWORK_C


189 
	#EXTERN


190 #ñ£

	)

191 
	#EXTERN
 

193 

	)

198 
EXTERN
 
USBFW_DATA
 
__xd©a
 
usbfwD©a
;

206 
EXTERN
 
USB_SETUP_DATA
 
__xd©a
 
	gusbSëupD©a
;

207 
EXTERN
 
USB_SETUP_HEADER
 
__xd©a
 
	gusbSëupHódî
;

217 
	#RT_MASK_DIR
 0x80

218 
	#RT_MASK_TYPE
 0x60

219 
	#RT_MASK_RECIP
 0x1F

220 

	)

222 
	#RT_DIR_IN
 0x80

223 
	#RT_DIR_OUT
 0x00

224 

	)

226 
	#RT_TYPE_STD
 0x00

227 
	#RT_TYPE_CLASS
 0x20

228 
	#RT_TYPE_VEND
 0x40

229 

	)

231 
	#RT_RECIP_DEV
 0x00

232 
	#RT_RECIP_IF
 0x01

233 
	#RT_RECIP_EP
 0x02

234 
	#RT_RECIP_OTHER
 0x03

235 

	)

237 
	#RT_STD_OUT
 (
RT_TYPE_STD
 | 
RT_DIR_OUT
)

238 
	#RT_STD_IN
 (
RT_TYPE_STD
 | 
RT_DIR_IN
)

239 
	#RT_VEND_OUT
 (
RT_TYPE_VEND
 | 
RT_DIR_OUT
)

240 
	#RT_VEND_IN
 (
RT_TYPE_VEND
 | 
RT_DIR_IN
)

241 
	#RT_CLASS_OUT
 (
RT_TYPE_CLASS
 | 
RT_DIR_OUT
)

242 
	#RT_CLASS_IN
 (
RT_TYPE_CLASS
 | 
RT_DIR_IN
)

243 

	)

245 
	#RT_OUT_DEVICE
 (
RT_DIR_OUT
 | 
RT_RECIP_DEV
)

246 
	#RT_IN_DEVICE
 (
RT_DIR_IN
 | 
RT_RECIP_DEV
)

247 
	#RT_OUT_INTERFACE
 (
RT_DIR_OUT
 | 
RT_RECIP_IF
)

248 
	#RT_IN_INTERFACE
 (
RT_DIR_IN
 | 
RT_RECIP_IF
)

249 
	#RT_OUT_ENDPOINT
 (
RT_DIR_OUT
 | 
RT_RECIP_EP
)

250 
	#RT_IN_ENDPOINT
 (
RT_DIR_IN
 | 
RT_RECIP_EP
)

253 

	)

261 
usb¸HookPro˚ssOut
();

263 
usb¸HookPro˚ssIn
();

265 
usbvrHookPro˚ssOut
();

267 
usbvrHookPro˚ssIn
();

281 
	#USBFW_SELECT_ENDPOINT
(
n
Ë(
USBINDEX
 = (n))

	)

283 
	#USBFW_GET_SELECTED_ENDPOINT
(Ë(
USBINDEX
)

	)

286 
	#USBFW_STALL_IN_ENDPOINT
(Ë
	`°
 (\

287 
USBCSIL
 = 
USBCSIL_SEND_STALL
; \

288 
usbfwD©a
.
pEpInSètus
[
USBINDEX
 - 1] = 
EP_HALT
; )

	)

291 
	#USBFW_IN_ENDPOINT_STALLED
(Ë(
USBCSIL
 & 
USBCSIL_SEND_STALL
)

	)

293 
	#USBFW_FLUSH_IN_ENDPOINT
(Ë
	`°
 (\

294 
USBCSIL
 = 
USBCSIL_FLUSH_PACKET
; \

295 
USBCSIL
 & 
USBCSIL_FLUSH_PACKET
); )

	)

298 
	#USBFW_ARM_IN_ENDPOINT
(Ë(
USBCSIL
 = 
USBCSIL_INPKT_RDY
)

	)

300 
	#USBFW_IN_ENDPOINT_DISARMED
(Ë!(
USBCSIL
 & 
USBCSIL_INPKT_RDY
)

	)

302 
	#USBFW_IN_ENDPOINT_FIFO_EMPTY
(Ë!(
USBCSIL
 & 
USBCSIL_PKT_PRESENT
)

	)

305 
	#USBFW_STALL_OUT_ENDPOINT
(Ë
	`°
 ( \

306 
USBCSOL
 = 
USBCSOL_SEND_STALL
; \

307 
usbfwD©a
.
pEpOutSètus
[
USBINDEX
 - 1] = 
EP_HALT
; \

308 }

	)

311 
	#USBFW_OUT_ENDPOINT_STALLED
(Ë(
USBCSOL
 & 
USBCSOL_SEND_STALL
)

	)

313 
	#USBFW_FLUSH_OUT_ENDPOINT
(Ë
	`°
(\

314 
USBCSOL
 = 
USBCSOL_FLUSH_PACKET
; \

315 
USBCSOL
 & 
USBCSOL_FLUSH_PACKET
); )

	)

318 
	#USBFW_ARM_OUT_ENDPOINT
(Ë(
USBCSOL
 = 0)

	)

320 
	#USBFW_OUT_ENDPOINT_DISARMED
(Ë(
USBCSOL
 & 
USBCSOL_OUTPKT_RDY
)

	)

322 
	#USBFW_GET_OUT_ENDPOINT_COUNT_LOW
(Ë(
USBCNTL
)

	)

324 
	#USBFW_GET_OUT_ENDPOINT_COUNT_HIGH
(Ë(
USBCNTH
)

	)

330 
	#LOBYTEPTR
(
w
Ë–(
uöt8
 
__gíîic
 *)(&(w)Ë+ 1 )

	)

338 
usbfwInô
();

339 
usbfwRe£tH™dÀr
();

340 
usbfwSëupH™dÀr
();

341 
usbfwSëAŒEpSètus
(
EP_STATUS
 
°©us
);

342 
usbfwWrôeFifo
(
uöt8
 vﬁ©ûê
__xd©a
 *
pFifo
, uöt8 
cou¡
, 
__gíîic
 *
pD©a
);

343 
usbfwRódFifo
(
uöt8
 vﬁ©ûê
__xd©a
 *
pFifo
, uöt8 
cou¡
, 
__gíîic
 *
pD©a
);

	@../../../../Components/hal/target/CC2540USB/usb/library/usb_hid/usb_descriptor_parser.c

11 
	#USBDESCRIPTORPARSER_C


12 
	~"usb_fúmw¨e_libøry_hódîs.h
"

	)

16 
USBDP_DATA
 
__xd©a
 
	gusbdpD©a
;

23 
	$usbdpInô
()

25 
usbdpD©a
.
pDesc
 = (c⁄° 
uöt8
 
__code
 *Ë
usbDes¸ùt‹M¨kî
.
pUsbDescSèπ
;

26 
	}
}

53 
__code
* 
	$usbdpFödNext
(
uöt8
 
w™ãdTy≥
, uöt8 
hÆtAtTy≥
)

55 
__code
 *
pResu…
;

56 
pResu…
 = 
NULL
;

59 
usbdpD©a
.
pDesc
 !(
__code
 *Ë
usbDes¸ùt‹M¨kî
.
pUsbDescEnd
) {

62 i‡(
usbdpD©a
.
pDesc
[
DESC_TYPE_IDX
] =
w™ãdTy≥
) {

63 
pResu…
 = (
__code
*Ë
usbdpD©a
.
pDesc
;

64 
usbdpD©a
.
pDesc
 +usbdpD©a.pDesc[
DESC_LENGTH_IDX
];

68 } i‡(
usbdpD©a
.
pDesc
[
DESC_TYPE_IDX
] =
hÆtAtTy≥
) {

69 i‡(
hÆtAtTy≥
) ;

73 
usbdpD©a
.
pDesc
 +usbdpD©a.pDesc[
DESC_LENGTH_IDX
];

76  
pResu…
;

77 
	}
}

89 
USB_DEVICE_DESCRIPTOR
 
__code
* 
	$usbdpGëDevi˚Desc
()

91 
	`usbdpInô
();

92  
	`usbdpFödNext
(
DESC_TYPE_DEVICE
, 0);

93 
	}
}

115 
USB_CONFIGURATION_DESCRIPTOR
 
__code
* 
	$usbdpGëC⁄figuøti⁄Desc
(
uöt8
 
cfgVÆue
, uöt8 
cfgIndex
)

117 
USB_CONFIGURATION_DESCRIPTOR
 
__code
 *
pC⁄figuøti⁄Desc
;

118 
	`usbdpInô
();

121 
pC⁄figuøti⁄Desc
 = 
	`usbdpFödNext
(
DESC_TYPE_CONFIG
, 0)) {

124 i‡(
cfgVÆue
) {

125 i‡(
cfgVÆue
 =
pC⁄figuøti⁄Desc
->
bC⁄figuøti⁄VÆue
) ;

128 } i‡(!
cfgIndex
--) {

133  
pC⁄figuøti⁄Desc
;

134 
	}
}

157 
USB_INTERFACE_DESCRIPTOR
 
__code
* 
	$usbdpGëI¡îÁ˚Desc
(
uöt8
 
cfgVÆue
, uöt8 
ötNumbî
, uöt8 
ÆtSëtög
)

159 
USB_INTERFACE_DESCRIPTOR
 
__code
 *
pI¡îÁ˚Desc
;

162 
	`usbdpGëC⁄figuøti⁄Desc
(
cfgVÆue
, 0);

165 
pI¡îÁ˚Desc
 = 
	`usbdpFödNext
(
DESC_TYPE_INTERFACE
, 
DESC_TYPE_CONFIG
)) {

166 i‡((
pI¡îÁ˚Desc
->
bI¡îÁ˚Numbî
 =
ötNumbî
Ë&& (pI¡îÁ˚Desc->
bA…î«ãSëtög
 =
ÆtSëtög
)) {

171  
pI¡îÁ˚Desc
;

172 
	}
}

187 
USB_STRING_DESCRIPTOR
 
__code
* 
	$usbdpGëSåögDesc
(
uöt8
 
°rIndex
)

189 
USB_STRING_DESCRIPTOR
 
__code
 *
pSåögDesc
;

190 
	`usbdpInô
();

192 #ifde‡
MS_EXT_C_ID


193 i‡(
°rIndex
 == 0xEE){

196 
pSåögDesc
 = 
	`usbdpFödNext
(
DESC_TYPE_STRING
, 0);

197 }
pSåögDesc
 !
NULL
 &&ÖSåögDesc->
bLígth
 != 18);

203 
pSåögDesc
 = 
	`usbdpFödNext
(
DESC_TYPE_STRING
, 0);

204 } 
°rIndex
--);

206  
pSåögDesc
;

207 
	}
}

	@../../../../Components/hal/target/CC2540USB/usb/library/usb_hid/usb_descriptor_parser.h

9 #i‚de‡
USBDESCRIPTORPARSER_H


10 
	#USBDESCRIPTORPARSER_H


	)

63 
	~"usb_des¸ùt‹.h
"

72 
	#DESC_LENGTH_IDX
 0

73 
	#DESC_TYPE_IDX
 1

74 
	#DESC_CONFIG_LENGTH_LSB_IDX
 2

75 
	#DESC_CONFIG_LENGTH_MSB_IDX
 3

78 

	)

82 
usbdpInô
();

83 
__code
 *
usbdpFödNext
(
uöt8
 
w™ãdTy≥
, uöt8 
hÆtAtTy≥
);

85 
USB_DEVICE_DESCRIPTOR
 
__code
* 
usbdpGëDevi˚Desc
();

86 
USB_CONFIGURATION_DESCRIPTOR
 
__code
* 
usbdpGëC⁄figuøti⁄Desc
(
uöt8
 
cfgVÆue
, uöt8 
cfgIndex
);

87 
USB_INTERFACE_DESCRIPTOR
 
__code
* 
usbdpGëI¡îÁ˚Desc
(
uöt8
 
cfgVÆue
, uöt8 
ötNumbî
, uöt8 
ÆtSëtög
);

88 
USB_STRING_DESCRIPTOR
 
__code
* 
usbdpGëSåögDesc
(
uöt8
 
°rIndex
);

	@../../../../Components/hal/target/CC2540USB/usb/library/usb_hid/usb_framework.c

11 
	#USBFRAMEWORK_C


12 
	~"usb_fúmw¨e_libøry_hódîs.h
"

	)

13 
	~"usb_bﬂrd_cfg.h
"

16 
VFPTR
 
	gPro˚ssFunc
;

25 
	$usbfwInô
()

28 
usbfwD©a
.
£lfPowîed
 = (
	`usbdpGëC⁄figuøti⁄Desc
(1, 0)->
bmAâribuãs
 & 0x40Ë? 
TRUE
 : 
FALSE
;

29 
usbfwD©a
.
ªmŸeWakeup
 = 
TRUE
;

31 
	`HAL_USB_ENABLE
();

32 
	`HAL_USB_RUN
();

33 
	}
}

45 
	$usbfwRe£tH™dÀr
()

49 
usbfwD©a
.
usbSèã
 = 
DEV_DEFAULT
;

50 
usbfwD©a
.
c⁄figuøti⁄VÆue
 = 0;

53 
usbfwD©a
.
ï0Sètus
 = 
EP_IDLE
;

54 
	`usbfwSëAŒEpSètus
(
EP_HALT
);

57 
Pro˚ssFunc
 = 
NULL
;

59 
	}
}

74 
	$usbfwSëupH™dÀr
()

76 
uöt8
 
c⁄åﬁReg
;

77 
uöt8
 
byãsNow
;

78 
uöt8
 
ﬁdEndpoöt
;

81 
ﬁdEndpoöt
 = 
	`USBFW_GET_SELECTED_ENDPOINT
();

82 
	`USBFW_SELECT_ENDPOINT
(0);

83 
c⁄åﬁReg
 = 
USBCS0
;

86 i‡(
c⁄åﬁReg
 & 
USBCS0_SETUP_END
) {

87 
USBCS0
 = 
USBCS0_CLR_SETUP_END
;

88 
usbfwD©a
.
ï0Sètus
 = 
EP_CANCEL
;

89 i‡(
Pro˚ssFunc
Ë
	`Pro˚ssFunc
();

90 
usbfwD©a
.
ï0Sètus
 = 
EP_IDLE
;

94 i‡(
c⁄åﬁReg
 & 
USBCS0_SENT_STALL
) {

95 
USBCS0
 = 0x00;

96 
usbfwD©a
.
ï0Sètus
 = 
EP_IDLE
;

100 i‡(
usbfwD©a
.
ï0Sètus
 =
EP_RX
) {

103 
byãsNow
 = 
USBCNT0
;

104 
	`usbfwRódFifo
(&
USBF0
, 
byãsNow
, 
usbSëupD©a
.
pBuf„r
);

105 
usbSëupD©a
.
byãsLe·
 -
byãsNow
;

106 
usbSëupD©a
.
pBuf„r
 +
byãsNow
;

109 
USBCS0
 = 
usbSëupD©a
.
byãsLe·
 ? 
USBCS0_CLR_OUTPKT_RDY
 : (USBCS0_CLR_OUTPKT_RDY | 
USBCS0_DATA_END
);

112 i‡(
usbSëupD©a
.
byãsLe·
 == 0) {

113 i‡(
Pro˚ssFunc
Ë
	`Pro˚ssFunc
();

114 
usbfwD©a
.
ï0Sètus
 = 
EP_IDLE
;

118 
	`USBFW_SELECT_ENDPOINT
(
ﬁdEndpoöt
);

122 } i‡(
usbfwD©a
.
ï0Sètus
 =
EP_MANUAL_RX
) {

123 
	`Pro˚ssFunc
();

127 i‡(
usbfwD©a
.
ï0Sètus
 =
EP_IDLE
) {

128 i‡(
c⁄åﬁReg
 & 
USBCS0_OUTPKT_RDY
) {

129 
	`usbfwRódFifo
(&
USBF0
, 8, (
uöt8
 
__xd©a
 *Ë&
usbSëupHódî
);

132 
Pro˚ssFunc
 = 
NULL
;

133 
usbSëupHódî
.
ªque°Ty≥
 & (
RT_MASK_TYPE
 | 
RT_MASK_DIR
)) {

136 
RT_STD_OUT
:

137 
usbSëupHódî
.
ªque°
) {

138 
SET_ADDRESS
: 
	`usb§SëAddªss
(); ;

139 
SET_FEATURE
: 
	`usb§SëFótuª
(); ;

140 
CLEAR_FEATURE
: 
	`usb§CÀ¨Fótuª
(); ;

141 
SET_CONFIGURATION
: 
	`usb§SëC⁄figuøti⁄
(); ;

142 
SET_INTERFACE
: 
	`usb§SëI¡îÁ˚
(); ;

143 
SET_DESCRIPTOR
:

144 : 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
; ;

149 
RT_STD_IN
:

150 
usbSëupHódî
.
ªque°
) {

151 
GET_STATUS
: 
	`usb§GëSètus
(); ;

152 
GET_DESCRIPTOR
: 
	`usb§GëDes¸ùt‹
(); ;

153 
GET_CONFIGURATION
: 
	`usb§GëC⁄figuøti⁄
(); ;

154 
GET_INTERFACE
: 
	`usb§GëI¡îÁ˚
(); ;

155 
SYNCH_FRAME
:

156 : 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
; ;

161 
RT_VEND_OUT
:

162 
Pro˚ssFunc
 = 
usbvrHookPro˚ssOut
; 
	`usbvrHookPro˚ssOut
();

164 
RT_VEND_IN
:

165 
Pro˚ssFunc
 = 
usbvrHookPro˚ssIn
; 
	`usbvrHookPro˚ssIn
();

169 
RT_CLASS_OUT
:

170 
Pro˚ssFunc
 = 
usb¸HookPro˚ssOut
; 
	`usb¸HookPro˚ssOut
();

172 
RT_CLASS_IN
:

173 
Pro˚ssFunc
 = 
usb¸HookPro˚ssIn
; 
	`usb¸HookPro˚ssIn
();

178 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

183 
USBCS0
 = (
usbfwD©a
.
ï0Sètus
 =
EP_STALL
Ë? (
USBCS0_CLR_OUTPKT_RDY
 | 
USBCS0_SEND_STALL
) : USBCS0_CLR_OUTPKT_RDY;

188 i‡(
usbfwD©a
.
ï0Sètus
 =
EP_TX
) {

189 
c⁄åﬁReg
 = 
USBCS0_INPKT_RDY
;

192 i‡(
usbSëupD©a
.
byãsLe·
 < 
EP0_PACKET_SIZE
) {

193 
byãsNow
 = 
usbSëupD©a
.
byãsLe·
;

194 
c⁄åﬁReg
 |
USBCS0_DATA_END
;

198 
byãsNow
 = 
EP0_PACKET_SIZE
;

202 
	`usbfwWrôeFifo
(&
USBF0
, 
byãsNow
, 
usbSëupD©a
.
pBuf„r
);

203 
usbSëupD©a
.
pBuf„r
 +
byãsNow
;

204 
usbSëupD©a
.
byãsLe·
 -
byãsNow
;

207 
USBCS0
 = 
c⁄åﬁReg
;

210 i‡(
byãsNow
 < 
EP0_PACKET_SIZE
) {

211 i‡(
Pro˚ssFunc
Ë
	`Pro˚ssFunc
();

212 
usbfwD©a
.
ï0Sètus
 = 
EP_IDLE
;

216 } i‡(
usbfwD©a
.
ï0Sètus
 =
EP_MANUAL_TX
) {

217 
	`Pro˚ssFunc
();

221 
	`USBFW_SELECT_ENDPOINT
(
ﬁdEndpoöt
);

223 
	}
}

235 
	$usbfwSëAŒEpSètus
(
EP_STATUS
 
°©us
)

237 
uöt8
 
n
;

238 
n
 = 0;Ç < (
usbfwD©a
.
pEpInSètus
);Ç++)

239 
usbfwD©a
.
pEpInSètus
[
n
] = 
°©us
;

240 
n
 = 0;Ç < (
usbfwD©a
.
pEpOutSètus
);Ç++)

241 
usbfwD©a
.
pEpOutSètus
[
n
] = 
°©us
;

242 
	}
}

259 
	$usbfwRódFifo
(
uöt8
 vﬁ©ûê
__xd©a
 *
pFifo
, uöt8 
cou¡
, 
__gíîic
 *
pD©a
)

261 
uöt8
 
__gíîic
 *
pTemp
 = 
pD©a
;

262 i‡(
cou¡
) {

264 *(
pTemp
++Ë*
pFifo
;

265 } --
cou¡
);

267 
	}
}

284 
	$usbfwWrôeFifo
(
uöt8
 vﬁ©ûê
__xd©a
 *
pFifo
, uöt8 
cou¡
, 
__gíîic
 *
pD©a
)

286 
uöt8
 
__gíîic
 *
pTemp
 = 
pD©a
;

287 i‡(
cou¡
) {

289 *
pFifo
 = *(
pTemp
++);

290 } --
cou¡
);

292 
	}
}

	@../../../../Components/hal/target/CC2540USB/usb/library/usb_hid/usb_framework_structs.h

9 #i‚de‡
USBFRAMEWORKSTRUCTS_H


10 
	#USBFRAMEWORKSTRUCTS_H


	)

17 
	~"hÆ_ty≥s.h
"

18 
	~"usb_fúmw¨e_libøry_c⁄fig.h
"

20 #ifde‡
EXTERN


21 #unde‡
EXTERN


23 #ifde‡
USBFRAMEWORK_C


24 
	#EXTERN


25 #ñ£

	)

26 
	#EXTERN
 

28 

	)

36 
EP_IDLE
 = 0x00,

37 
EP_TX
 = 0x01,

38 
EP_RX
 = 0x02,

39 
EP_HALT
 = 0x03,

40 
EP_STALL
 = 0x04,

41 
EP_MANUAL_TX
 = 0x05,

42 
EP_MANUAL_RX
 = 0x06,

43 
EP_CANCEL
 = 0x07

44 } 
	tEP_STATUS
;

48 
	mDEV_ATTACHED
 = 0x00,

49 
	mDEV_POWERED
 = 0x01,

50 
	mDEV_DEFAULT
 = 0x02,

51 
	mDEV_ADDRESS
 = 0x03,

52 
	mDEV_CONFIGURED
 = 0x04,

53 
	mDEV_SUSPENDED
 = 0x05

54 } 
	tUSB_STATE
;

58 
USB_STATE
 
	musbSèã
;

59 
uöt8
 
	mc⁄figuøti⁄VÆue
;

60 
uöt8
 
	mpA…î«ãSëtög
[
USB_SETUP_MAX_NUMBER_OF_INTERFACES
];

61 
EP_STATUS
 
	mï0Sètus
;

62 
EP_STATUS
 
	mpEpInSètus
[5];

63 
EP_STATUS
 
	mpEpOutSètus
[5];

64 
uöt8
 
	mªmŸeWakeup
;

65 
uöt8
 
	m£lfPowîed
;

66 } 
	tUSBFW_DATA
;

71 
uöt8
 
	mªque°Ty≥
;

72 
uöt8
 
	mªque°
;

73 
uöt16
 
	mvÆue
;

74 
uöt16
 
	mödex
;

75 
uöt16
 
	mÀngth
;

76 } 
	tUSB_SETUP_HEADER
;

80 
uöt8
 
__gíîic
 *
	mpBuf„r
;

81 
uöt16
 
	mbyãsLe·
;

82 } 
	tUSB_SETUP_DATA
;

93 
uöt8
 
	mbLígth
;

94 
uöt8
 
	mbDes¸ùt‹Ty≥
;

95 
uöt16
 
	mbcdUSB
;

96 
uöt8
 
	mbDevi˚Cœss
;

97 
uöt8
 
	mbDevi˚SubCœss
;

98 
uöt8
 
	mbDevi˚PrŸocﬁ
;

99 
uöt8
 
	mbMaxPackëSize0
;

100 
uöt16
 
	midVíd‹
;

101 
uöt16
 
	midProdu˘
;

102 
uöt16
 
	mbcdDevi˚
;

103 
uöt8
 
	miM™uÁ˘uªr
;

104 
uöt8
 
	miProdu˘
;

105 
uöt8
 
	miSîülNumbî
;

106 
uöt8
 
	mbNumC⁄figuøti⁄s
;

107 } 
	tUSB_DEVICE_DESCRIPTOR
;

111 
uöt8
 
	mbLígth
;

112 
uöt8
 
	mbDes¸ùt‹Ty≥
;

113 
uöt16
 
	mwTŸÆLígth
;

114 
uöt8
 
	mbNumI¡îÁ˚s
;

115 
uöt8
 
	mbC⁄figuøti⁄VÆue
;

116 
uöt8
 
	miC⁄figuøti⁄
;

117 
uöt8
 
	mbmAâribuãs
;

118 
uöt8
 
	mbMaxPowî
;

119 } 
	tUSB_CONFIGURATION_DESCRIPTOR
;

123 
uöt8
 
	mbLígth
;

124 
uöt8
 
	mbDes¸ùt‹Ty≥
;

125 
uöt8
 
	mbI¡îÁ˚Numbî
;

126 
uöt8
 
	mbA…î«ãSëtög
;

127 
uöt8
 
	mbNumEndpoöts
;

128 
uöt8
 
	mbI¡îÁ˚Cœss
;

129 
uöt8
 
	mbI¡îÁ˚SubCœss
;

130 
uöt8
 
	mbI¡îÁ˚PrŸocﬁ
;

131 
uöt8
 
	miI¡îÁ˚
;

132 } 
	tUSB_INTERFACE_DESCRIPTOR
;

136 
uöt8
 
	mbLígth
;

137 
uöt8
 
	mbDes¸ùt‹Ty≥
;

138 
uöt8
 
	mbEndpoötAddªss
;

139 
uöt8
 
	mbmAâribuãs
;

140 
uöt16
 
	mwMaxPackëSize
;

141 
uöt8
 
	mbI¡îvÆ
;

142 } 
	tUSB_ENDPOINT_DESCRIPTOR
;

146 
uöt8
 
	mbLígth
;

147 
uöt8
 
	mbDes¸ùt‹Ty≥
;

148 
uöt16
 
	mpSåög
[1];

149 } 
	tUSB_STRING_DESCRIPTOR
;

153 
uöt8
 
	mbLígth
;

154 
uöt8
 
	mbDes¸ùt‹Ty≥
;

155 
uöt16
 
	mbscHID
;

156 
uöt8
 
	mbCou¡ryCode
;

157 
uöt8
 
	mbNumDes¸ùt‹s
;

158 
uöt8
 
	mbRDes¸ùt‹Ty≥
;

159 
uöt16
 
	mwDes¸ùt‹Lígth
;

160 } 
	tUSB_HID_DESCRIPTOR
;

167 
uöt8
 
	mvÆueMsb
;

168 
uöt8
 
	mvÆueLsb
;

169 
uöt8
 
	mödexMsb
;

170 
uöt8
 
	mödexLsb
;

171 
uöt8
 
__code
 *
	mpDescSèπ
;

172 
uöt16
 
	mÀngth
;

173 } 
	tDESC_LUT_INFO
;

177 
USB_INTERFACE_DESCRIPTOR
 
__code
 *
	mpI¡îÁ˚
;

178 
uöt8
 
	möMask
;

179 
uöt8
 
	moutMask
;

180 } 
	tDBLBUF_LUT_INFO
;

186 
uöt16
 
	mevítMask
;

187 
uöt16
 
	múqMask
;

188 
uöt8
 
	möSu•íd
;

189 } 
	tUSBIRQ_DATA
;

194 c⁄° 
uöt8
 
__code
 *
	mpDesc
;

195 } 
	tUSBDP_DATA
;

	@../../../../Components/hal/target/CC2540USB/usb/library/usb_hid/usb_interrupt.h

9 #i‚de‡
USBINTERRUPT_H


10 
	#USBINTERRUPT_H


	)

76 
	~"usb_‰amew‹k_°ru˘s.h
"

78 #ifde‡
EXTERN


79 #unde‡
EXTERN


81 #ifde‡
USBINTERRUPT_C


82 
	#EXTERN


83 #ñ£

	)

84 
	#EXTERN
 

86 

	)

94 #ifde‡
USBIRQ_DATA_ADDR


95 
EXTERN
 
__no_öô
 vﬁ©ûê
USBIRQ_DATA
 
usbúqD©a
 @ 
USBIRQ_DATA_ADDR
;

97 
EXTERN
 vﬁ©ûê
USBIRQ_DATA
 
	gusbúqD©a
;

108 
	#USBIRQ_EVENT_SUSPEND
 0x0001

	)

110 
	#USBIRQ_EVENT_RESUME
 0x0002

	)

112 
	#USBIRQ_EVENT_RESET
 0x0004

	)

114 
	#USBIRQ_EVENT_START_OF_FRAME
 0x0008

	)

116 
	#USBIRQ_EVENT_SETUP
 0x0010

	)

118 
	#USBIRQ_EVENT_EP1IN
 0x0020

	)

120 
	#USBIRQ_EVENT_EP2IN
 0x0040

	)

122 
	#USBIRQ_EVENT_EP3IN
 0x0080

	)

124 
	#USBIRQ_EVENT_EP4IN
 0x0100

	)

126 
	#USBIRQ_EVENT_EP5IN
 0x0200

	)

128 
	#USBIRQ_EVENT_EP1OUT
 0x0400

	)

130 
	#USBIRQ_EVENT_EP2OUT
 0x0800

	)

132 
	#USBIRQ_EVENT_EP3OUT
 0x1000

	)

134 
	#USBIRQ_EVENT_EP4OUT
 0x2000

	)

136 
	#USBIRQ_EVENT_EP5OUT
 0x4000

	)

146 
	#USBIRQ_CLEAR_EVENTS
(
mask
Ë(
usbúqD©a
.
evítMask
 &((maskË^ 0xFF))

	)

148 
	#USBIRQ_GET_EVENT_MASK
(Ë(
usbúqD©a
.
evítMask
)

	)

158 
usbúqHookPro˚ssEvíts
();

166 
usbúqInô
(
uöt16
 
úqMask
);

167 #i‡
deföed
 
HAL_USB_BOOT_CODE


168 
usbúqH™dÀr
();

170 
__öãºu±
 
usbúqH™dÀr
();

	@../../../../Components/hal/target/CC2540USB/usb/library/usb_reg.h

9 #i‚de‡
USBREG_H


10 
	#USBREG_H


	)

14 
	#USBADDR_UPDATE
 0x80

	)

15 
	#USBADDR_USBADDR
 0x7F

	)

18 
	#USBPOW_ISO_WAIT_SOF
 0x80

	)

19 
	#USBPOW_RST
 0x08

	)

20 
	#USBPOW_RESUME
 0x04

	)

21 
	#USBPOW_SUSPEND
 0x02

	)

22 
	#USBPOW_SUSPEND_EN
 0x01

	)

25 
	#USBIIF_INEP5IF
 0x20

	)

26 
	#USBIIF_INEP4IF
 0x10

	)

27 
	#USBIIF_INEP3IF
 0x08

	)

28 
	#USBIIF_INEP2IF
 0x04

	)

29 
	#USBIIF_INEP1IF
 0x02

	)

30 
	#USBIIF_EP0IF
 0x01

	)

33 
	#USBOIF_OUTEP5IF
 0x20

	)

34 
	#USBOIF_OUTEP4IF
 0x10

	)

35 
	#USBOIF_OUTEP3IF
 0x08

	)

36 
	#USBOIF_OUTEP2IF
 0x04

	)

37 
	#USBOIF_OUTEP1IF
 0x02

	)

40 
	#USBCIF_SOFIF
 0x08

	)

41 
	#USBCIF_RSTIF
 0x04

	)

42 
	#USBCIF_RESUMEIF
 0x02

	)

43 
	#USBCIF_SUSPENDIF
 0x01

	)

46 
	#USBIIE_INEP5IE
 0x20

	)

47 
	#USBIIE_INEP4IE
 0x10

	)

48 
	#USBIIE_INEP3IE
 0x08

	)

49 
	#USBIIE_INEP2IE
 0x04

	)

50 
	#USBIIE_INEP1IE
 0x02

	)

51 
	#USBIIE_EP0IE
 0x01

	)

54 
	#USBOIE_OUTEP5IE
 0x20

	)

55 
	#USBOIE_OUTEP4IE
 0x10

	)

56 
	#USBOIE_OUTEP3IE
 0x08

	)

57 
	#USBOIE_OUTEP2IE
 0x04

	)

58 
	#USBOIE_OUTEP1IE
 0x02

	)

61 
	#USBCIE_SOFIE
 0x08

	)

62 
	#USBCIE_RSTIE
 0x04

	)

63 
	#USBCIE_RESUMEIE
 0x02

	)

64 
	#USBCIE_SUSPENDIE
 0x01

	)

67 
	#USBCS0_CLR_SETUP_END
 0x80

	)

68 
	#USBCS0_CLR_OUTPKT_RDY
 0x40

	)

69 
	#USBCS0_SEND_STALL
 0x20

	)

70 
	#USBCS0_SETUP_END
 0x10

	)

71 
	#USBCS0_DATA_END
 0x08

	)

72 
	#USBCS0_SENT_STALL
 0x04

	)

73 
	#USBCS0_INPKT_RDY
 0x02

	)

74 
	#USBCS0_OUTPKT_RDY
 0x01

	)

77 
	#USBCSIL_CLR_DATA_TOG
 0x40

	)

78 
	#USBCSIL_SENT_STALL
 0x20

	)

79 
	#USBCSIL_SEND_STALL
 0x10

	)

80 
	#USBCSIL_FLUSH_PACKET
 0x08

	)

81 
	#USBCSIL_UNDERRUN
 0x04

	)

82 
	#USBCSIL_PKT_PRESENT
 0x02

	)

83 
	#USBCSIL_INPKT_RDY
 0x01

	)

86 
	#USBCSIH_AUTOSET
 0x80

	)

87 
	#USBCSIH_ISO
 0x40

	)

88 
	#USBCSIH_FORCE_DATA_TOG
 0x08

	)

89 
	#USBCSIH_IN_DBL_BUF
 0x01

	)

92 
	#USBCSOL_CLR_DATA_TOG
 0x80

	)

93 
	#USBCSOL_SENT_STALL
 0x40

	)

94 
	#USBCSOL_SEND_STALL
 0x20

	)

95 
	#USBCSOL_FLUSH_PACKET
 0x10

	)

96 
	#USBCSOL_DATA_ERROR
 0x08

	)

97 
	#USBCSOL_OVERRUN
 0x04

	)

98 
	#USBCSOL_FIFO_FULL
 0x02

	)

99 
	#USBCSOL_OUTPKT_RDY
 0x01

	)

102 
	#USBCSOH_AUTOCLEAR
 0x80

	)

103 
	#USBCSOH_ISO
 0x40

	)

104 
	#USBCSOH_OUT_DBL_BUF
 0x01

	)

106 
	#SLEEP_USB_EN
 0x80

	)

	@../../../../Components/hal/target/CC2540USB/usb/library/usb_standard_requests.c

11 
	~"usb_fúmw¨e_libøry_hódîs.h
"

12 
	~"hÆ_ty≥s.h
"

13 
	~"hÆ_bﬂrd.h
"

37 
	$usb§GëSètus
()

39 
uöt8
 
ídpoöt
;

40 
uöt16
 
__xd©a
 
°©us
;

43 i‡(
usbSëupHódî
.
vÆue
 || 
	`HI_UINT16
(usbSëupHódî.
ödex
Ë|| (usbSëupHódî.
Àngth
 != 2)) {

44 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

48 
usbSëupHódî
.
ªque°Ty≥
) {

53 
RT_IN_DEVICE
:

56 i‡(
	`LO_UINT16
(
usbSëupHódî
.
ödex
)) {

57 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

63 
°©us
 = 
usbfwD©a
.
£lfPowîed
 ? 0x0001 : 0x0000;

66 i‡(
usbfwD©a
.
ªmŸeWakeup
Ë
°©us
 |= 0x0002;

72 
RT_IN_INTERFACE
:

75 i‡(
usbfwD©a
.
usbSèã
 !
DEV_CONFIGURED
) {

76 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

78 
°©us
 = 0x0000;

84 
RT_IN_ENDPOINT
:

85 
ídpoöt
 = 
	`LO_UINT16
(
usbSëupHódî
.
ödex
) & 0x7F;

88 i‡((
usbfwD©a
.
usbSèã
 !
DEV_CONFIGURED
Ë|| (
ídpoöt
 > 5)) {

89 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

95 i‡(
	`LO_UINT16
(
usbSëupHódî
.
ödex
) & 0x80) {

96 
°©us
 = (
usbfwD©a
.
pEpInSètus
[
ídpoöt
 - 1] =
EP_HALT
) ? 0x0001 : 0x0000;

100 
°©us
 = (
usbfwD©a
.
pEpOutSètus
[
ídpoöt
 - 1] =
EP_HALT
) ? 0x0001 : 0x0000;

106 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

110 i‡(
usbfwD©a
.
ï0Sètus
 !
EP_STALL
) {

112 
usbSëupD©a
.
pBuf„r
 = (
uöt8
 
__gíîic
 *)&
°©us
;

113 
usbSëupD©a
.
byãsLe·
 = 2;

114 
usbfwD©a
.
ï0Sètus
 = 
EP_TX
;

117 
	}
}

133 
uöt8
 
	$Ch™geFótuª
(
uöt8
 
£t
)

135 
uöt8
 
ídpoöt
;

138 i‡(
usbSëupHódî
.
Àngth
 || (
usbfwD©a
.
usbSèã
 !
DEV_CONFIGURED
Ë&& (usbSëupHódî.
ödex
 != 0)) {

139 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

143 
usbSëupHódî
.
ªque°Ty≥
 & 
RT_MASK_RECIP
) {

146 
RT_RECIP_DEV
:

149 i‡(
	`LO_UINT16
(
usbSëupHódî
.
vÆue
Ë!
DEVICE_REMOTE_WAKEUP
) {

150  
FALSE
;

152 
usbfwD©a
.
ªmŸeWakeup
 = 
£t
;

153 
	`usb§HookPro˚ssEvít
(
£t
 ? 
USBSR_EVENT_REMOTE_WAKEUP_ENABLED
 : 
USBSR_EVENT_REMOTE_WAKEUP_DISABLED
, 0);

158 
RT_RECIP_IF
:

159  
FALSE
;

162 
RT_RECIP_EP
:

163 
ídpoöt
 = 
	`LO_UINT16
(
usbSëupHódî
.
ödex
) & 0x7F;

166 i‡(
	`LO_UINT16
(
usbSëupHódî
.
vÆue
Ë!
ENDPOINT_HALT
) {

167  
FALSE
;

168 } i‡(
ídpoöt
 > 5) {

169 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

171 
	`USBFW_SELECT_ENDPOINT
(
ídpoöt
);

174 i‡(
	`LO_UINT16
(
usbSëupHódî
.
ödex
) & 0x80) {

175 
USBCSIL
 = 
£t
 ? 
USBCSIL_SEND_STALL
 : 
USBCSIL_CLR_DATA_TOG
;

176 
usbfwD©a
.
pEpInSètus
[
ídpoöt
 - 1] = 
£t
 ? 
EP_HALT
 : 
EP_IDLE
;

177 
	`usb§HookPro˚ssEvít
(
£t
 ? 
USBSR_EVENT_EPIN_STALL_SET
 : 
USBSR_EVENT_EPIN_STALL_CLEARED
, 
ídpoöt
);

181 
USBCSOL
 = 
£t
 ? 
USBCSOL_SEND_STALL
 : 
USBCSOL_CLR_DATA_TOG
;

182 
usbfwD©a
.
pEpOutSètus
[
ídpoöt
 - 1] = 
£t
 ? 
EP_HALT
 : 
EP_IDLE
;

183 
	`usb§HookPro˚ssEvít
(
£t
 ? 
USBSR_EVENT_EPOUT_STALL_SET
 : 
USBSR_EVENT_EPOUT_STALL_CLEARED
, 
ídpoöt
);

185 
	`USBFW_SELECT_ENDPOINT
(0);

190 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

194  
TRUE
;

195 
	}
}

214 
	$usb§CÀ¨Fótuª
()

216 i‡(!
	`Ch™geFótuª
(
FALSE
)) {

217 
	`usb§HookCÀ¨Fótuª
();

219 
	}
}

238 
	$usb§SëFótuª
()

240 i‡(!
	`Ch™geFótuª
(
TRUE
)) {

241 
	`usb§HookSëFótuª
();

243 
	}
}

262 
	$usb§SëAddªss
()

266 i‡(
usbSëupHódî
.
ödex
 || usbSëupHódî.
Àngth
 || 
	`HI_UINT16
(usbSëupHódî.
vÆue
Ë|| (
	`LO_UINT16
(usbSetupHeader.value) & 0x80)) {

267 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

271 
USBADDR
 = 
	`LO_UINT16
(
usbSëupHódî
.
vÆue
);

272 i‡(
	`LO_UINT16
(
usbSëupHódî
.
vÆue
) != 0) {

273 i‡(
usbfwD©a
.
usbSèã
 =
DEV_DEFAULT
ËusbfwD©a.usbSèã = 
DEV_ADDRESS
;

275 i‡(
usbfwD©a
.
usbSèã
 =
DEV_ADDRESS
ËusbfwD©a.usbSèã = 
DEV_DEFAULT
;

279 
	}
}

305 
	$usb§GëDes¸ùt‹
()

307 
uöt8
 
n
;

310 
	`HI_UINT16
(
usbSëupHódî
.
vÆue
)) {

313 
DESC_TYPE_DEVICE
:

314 
usbSëupD©a
.
pBuf„r
 = (
uöt8
 
__code
*Ë
	`usbdpGëDevi˚Desc
();

315 
usbSëupD©a
.
byãsLe·
 = usbSëupD©a.
pBuf„r
[
DESC_LENGTH_IDX
];

319 
DESC_TYPE_CONFIG
:

320 
usbSëupD©a
.
pBuf„r
 = (
uöt8
 
__code
*Ë
	`usbdpGëC⁄figuøti⁄Desc
(0, 
	`LO_UINT16
(
usbSëupHódî
.
vÆue
));

321 
usbSëupD©a
.
byãsLe·
 = usbSëupD©a.
pBuf„r
[
DESC_CONFIG_LENGTH_LSB_IDX
] +

322 
usbSëupD©a
.
pBuf„r
[
DESC_CONFIG_LENGTH_MSB_IDX
] * 256;

326 
DESC_TYPE_STRING
:

328 
usbSëupD©a
.
pBuf„r
 = (
uöt8
*Ë
	`usbdpGëSåögDesc
(
	`LO_UINT16
(
usbSëupHódî
.
vÆue
));

329 
usbSëupD©a
.
byãsLe·
 = usbSëupD©a.
pBuf„r
[
DESC_LENGTH_IDX
];

335 
usbSëupD©a
.
pBuf„r
 = 
NULL
;

336 
n
 = 0;Ç < ((
uöt16
)
usbDes¸ùt‹M¨kî
.
pUsbDescLutEnd
 - (uöt16)usbDes¸ùt‹M¨kî.
pUsbDescLut
Ë/ (
DESC_LUT_INFO
);Ç++) {

337 i‡((
usbDes¸ùt‹M¨kî
.
pUsbDescLut
[
n
].
vÆueMsb
 =
	`HI_UINT16
(
usbSëupHódî
.
vÆue
))

338 && (
usbDes¸ùt‹M¨kî
.
pUsbDescLut
[
n
].
vÆueLsb
 =
	`LO_UINT16
(
usbSëupHódî
.
vÆue
))

339 && (
usbDes¸ùt‹M¨kî
.
pUsbDescLut
[
n
].
ödexMsb
 =
	`HI_UINT16
(
usbSëupHódî
.
ödex
))

340 && (
usbDes¸ùt‹M¨kî
.
pUsbDescLut
[
n
].
ödexLsb
 =
	`LO_UINT16
(
usbSëupHódî
.
ödex
)) )

342 
usbSëupD©a
.
pBuf„r
 = 
usbDes¸ùt‹M¨kî
.
pUsbDescLut
[
n
].
pDescSèπ
;

343 
usbSëupD©a
.
byãsLe·
 = 
usbDes¸ùt‹M¨kî
.
pUsbDescLut
[
n
].
Àngth
;

349 i‡(
usbSëupD©a
.
pBuf„r
 =
NULL
Ë
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

351 i‡(
usbfwD©a
.
ï0Sètus
 !
EP_STALL
) {

355 i‡(
usbSëupD©a
.
byãsLe·
 > 
usbSëupHódî
.
Àngth
) {

356 
usbSëupD©a
.
byãsLe·
 = 
usbSëupHódî
.
Àngth
;

359 
usbfwD©a
.
ï0Sètus
 = 
EP_TX
;

362 
	}
}

376 
	$C⁄figuªEndpoöts
(
USB_INTERFACE_DESCRIPTOR
 
__code
 *
pI¡îÁ˚
)

378 
uöt8
 
n
;

379 
uöt16
 
maxpRegVÆue
;

380 
uöt8
 
csRegVÆue
;

381 
uöt8
 
ídpoöt
;

382 
USB_ENDPOINT_DESCRIPTOR
 
__code
 *
pEndpoöt
;

383 
DBLBUF_LUT_INFO
 
__code
 *
pUsbDblbufLutInfo
;

386 i‡(
pI¡îÁ˚
->
bNumEndpoöts
) {

387 
pUsbDblbufLutInfo
 = (
DBLBUF_LUT_INFO
 
__code
*Ë
usbDes¸ùt‹M¨kî
.
pUsbDblbufLut
;

388 
pUsbDblbufLutInfo
->
pI¡îÁ˚
 !=ÖInterface) {

389 
pUsbDblbufLutInfo
++;

394 
n
 = 0;Ç < 
pI¡îÁ˚
->
bNumEndpoöts
;Ç++) {

395 i‡(
pEndpoöt
 = 
	`usbdpFödNext
(
DESC_TYPE_ENDPOINT
, 0)) {

398 
ídpoöt
 = 
pEndpoöt
->
bEndpoötAddªss
 & 0x0F;

399 
	`USBFW_SELECT_ENDPOINT
(
ídpoöt
);

401 
csRegVÆue
 = 0x00;

402 
maxpRegVÆue
 = (
pEndpoöt
->
wMaxPackëSize
 + 7) >> 3;

405 i‡(
pEndpoöt
->
bEndpoötAddªss
 & 0x80) {

408 
USBCSIL
 = 
USBCSIL_CLR_DATA_TOG
 | 
USBCSIL_FLUSH_PACKET
;

409 
USBCSIL
 = 
USBCSIL_FLUSH_PACKET
;

412 i‡((
pEndpoöt
->
bmAâribuãs
 & 
EP_ATTR_TYPE_BM
Ë=
EP_ATTR_ISO
Ë
csRegVÆue
 |
USBCSIH_ISO
;

413 i‡(
pUsbDblbufLutInfo
->
öMask
 & (1 << 
ídpoöt
)Ë
csRegVÆue
 |
USBCSIH_IN_DBL_BUF
;

414 
USBCSIH
 = 
csRegVÆue
;

417 
USBMAXI
 = 
maxpRegVÆue
;

420 
usbfwD©a
.
pEpInSètus
[
ídpoöt
 - 1] = 
EP_IDLE
;

426 
USBCSOL
 = 
USBCSOL_CLR_DATA_TOG
 | 
USBCSOL_FLUSH_PACKET
;

427 
USBCSOL
 = 
USBCSOL_FLUSH_PACKET
;

430 i‡((
pEndpoöt
->
bmAâribuãs
 & 
EP_ATTR_TYPE_BM
Ë=
EP_ATTR_ISO
Ë
csRegVÆue
 |
USBCSOH_ISO
;

431 i‡(
pUsbDblbufLutInfo
->
outMask
 & (1 << 
ídpoöt
)Ë
csRegVÆue
 |
USBCSOH_OUT_DBL_BUF
;

432 
USBCSOH
 = 
csRegVÆue
;

435 
USBMAXO
 = 
maxpRegVÆue
;

438 
usbfwD©a
.
pEpOutSètus
[
ídpoöt
 - 1] = 
EP_IDLE
;

440 
	`USBFW_SELECT_ENDPOINT
(0);

443 
	}
}

461 
	$usb§GëC⁄figuøti⁄
()

465 i‡(
usbSëupHódî
.
vÆue
 || usbSëupHódî.
ödex
 || (usbSëupHódî.
Àngth
 != 1)) {

466 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

470 
usbSëupD©a
.
pBuf„r
 = &
usbfwD©a
.
c⁄figuøti⁄VÆue
;

471 
usbSëupD©a
.
byãsLe·
 = 1;

472 
usbfwD©a
.
ï0Sètus
 = 
EP_TX
;

475 
	}
}

494 
	$usb§SëC⁄figuøti⁄
()

496 
uöt8
 
n
;

497 
USB_CONFIGURATION_DESCRIPTOR
 
__code
 *
pC⁄figuøti⁄
;

498 
USB_INTERFACE_DESCRIPTOR
 
__code
 *
pI¡îÁ˚
;

501 i‡((
usbfwD©a
.
usbSèã
 =
DEV_DEFAULT
Ë|| 
usbSëupHódî
.
ödex
 || usbSëupHódî.
Àngth
 || 
	`HI_UINT16
(usbSëupHódî.
vÆue
)) {

502 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

506 
	`usb§HookPro˚ssEvít
(
USBSR_EVENT_CONFIGURATION_CHANGING
, 0);

509 i‡(
	`LO_UINT16
(
usbSëupHódî
.
vÆue
)) {

512 
pC⁄figuøti⁄
 = 
	`usbdpGëC⁄figuøti⁄Desc
(
	`LO_UINT16
(
usbSëupHódî
.
vÆue
), 0);

515 i‡(
pC⁄figuøti⁄
) {

516 
usbfwD©a
.
usbSèã
 = 
DEV_CONFIGURED
;

517 
usbfwD©a
.
c⁄figuøti⁄VÆue
 = 
	`LO_UINT16
(
usbSëupHódî
.
vÆue
);

520 
n
 = 0;Ç < 
pC⁄figuøti⁄
->
bNumI¡îÁ˚s
;Ç++) {

521 
usbfwD©a
.
pA…î«ãSëtög
[
n
] = 0x00;

525 
pI¡îÁ˚
 = 
	`usbdpFödNext
(
DESC_TYPE_INTERFACE
, 0);

526 } 
pI¡îÁ˚
->
bA…î«ãSëtög
 !
usbfwD©a
.
pA…î«ãSëtög
[
n
]);

529 
	`C⁄figuªEndpoöts
(
pI¡îÁ˚
);

534 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

539 
usbfwD©a
.
c⁄figuøti⁄VÆue
 = 
	`LO_UINT16
(
usbSëupHódî
.
vÆue
);

540 
usbfwD©a
.
usbSèã
 = 
DEV_ADDRESS
;

541 
	`usbfwSëAŒEpSètus
(
EP_HALT
);

543 
	`usb§HookPro˚ssEvít
(
USBSR_EVENT_CONFIGURATION_CHANGED
, 0);

546 
	}
}

565 
	$usb§GëI¡îÁ˚
()

569 i‡((
usbfwD©a
.
usbSèã
 !
DEV_CONFIGURED
Ë|| (
usbSëupHódî
.
ªque°Ty≥
 !
RT_IN_INTERFACE
Ë|| usbSëupHódî.
vÆue
 || (usbSëupHódî.
Àngth
 != 1)) {

570 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

574 
usbSëupD©a
.
pBuf„r
 = &
usbfwD©a
.
pA…î«ãSëtög
[
usbSëupHódî
.
ödex
];

575 
usbSëupD©a
.
byãsLe·
 = 1;

576 
usbfwD©a
.
ï0Sètus
 = 
EP_TX
;

579 
	}
}

598 
	$usb§SëI¡îÁ˚
()

600 
USB_INTERFACE_DESCRIPTOR
 
__code
 *
pI¡îÁ˚
;

603 i‡((
usbfwD©a
.
usbSèã
 !
DEV_CONFIGURED
Ë|| (
usbSëupHódî
.
ªque°Ty≥
 !
RT_OUT_INTERFACE
Ë|| usbSëupHódî.
Àngth
) {

604 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

608 i‡(
pI¡îÁ˚
 = 
	`usbdpGëI¡îÁ˚Desc
(
usbfwD©a
.
c⁄figuøti⁄VÆue
, 
usbSëupHódî
.
ödex
, usbSëupHódî.
vÆue
)) {

609 
	`usb§HookPro˚ssEvít
(
USBSR_EVENT_INTERFACE_CHANGING
, 
usbSëupHódî
.
ödex
);

610 
usbfwD©a
.
pA…î«ãSëtög
[
usbSëupHódî
.
ödex
] = usbSëupHódî.
vÆue
;

613 
	`C⁄figuªEndpoöts
(
pI¡îÁ˚
);

614 
	`usb§HookPro˚ssEvít
(
USBSR_EVENT_INTERFACE_CHANGED
, 
usbSëupHódî
.
ödex
);

618 
usbfwD©a
.
ï0Sètus
 = 
EP_STALL
;

622 
	}
}

	@../../../../Components/hal/target/CC2540USB/usb/library/usb_standard_requests.h

9 #i‚de‡
USBSTANDARDREQUESTS_H


10 
	#USBSTANDARDREQUESTS_H


	)

61 
	#GET_STATUS
 0x00

	)

63 
	#CLEAR_FEATURE
 0x01

	)

65 
	#SET_FEATURE
 0x03

	)

67 
	#SET_ADDRESS
 0x05

	)

69 
	#GET_DESCRIPTOR
 0x06

	)

71 
	#SET_DESCRIPTOR
 0x07

	)

73 
	#GET_CONFIGURATION
 0x08

	)

75 
	#SET_CONFIGURATION
 0x09

	)

77 
	#GET_INTERFACE
 0x0A

	)

79 
	#SET_INTERFACE
 0x0B

	)

81 
	#SYNCH_FRAME
 0x0C

	)

91 
	#ENDPOINT_HALT
 0x00

	)

93 
	#DEVICE_REMOTE_WAKEUP
 0x01

	)

103 
	#USBSR_EVENT_CONFIGURATION_CHANGING
 0x01

	)

105 
	#USBSR_EVENT_CONFIGURATION_CHANGED
 0x02

	)

107 
	#USBSR_EVENT_INTERFACE_CHANGING
 0x03

	)

109 
	#USBSR_EVENT_INTERFACE_CHANGED
 0x04

	)

111 
	#USBSR_EVENT_REMOTE_WAKEUP_ENABLED
 0x05

	)

113 
	#USBSR_EVENT_REMOTE_WAKEUP_DISABLED
 0x06

	)

115 
	#USBSR_EVENT_EPIN_STALL_CLEARED
 0x07

	)

117 
	#USBSR_EVENT_EPIN_STALL_SET
 0x08

	)

119 
	#USBSR_EVENT_EPOUT_STALL_CLEARED
 0x09

	)

121 
	#USBSR_EVENT_EPOUT_STALL_SET
 0x0A

	)

133 
usb§HookSëDes¸ùt‹
();

135 
usb§HookSynchFøme
();

137 
usb§HookCÀ¨Fótuª
();

139 
usb§HookSëFótuª
();

141 
usb§HookModifyGëSètus
(
uöt8
 
ªcùõ¡
, uöt8 
ödex
, 
uöt16
 
__xd©a
 *
pSètus
);

143 
usb§HookPro˚ssEvít
(
uöt8
 
evít
, uöt8 
ödex
);

151 
usb§GëSètus
();

152 
usb§CÀ¨Fótuª
();

153 
usb§SëFótuª
();

154 
usb§SëAddªss
();

155 
usb§GëDes¸ùt‹
();

156 
usb§GëC⁄figuøti⁄
();

157 
usb§SëC⁄figuøti⁄
();

158 
usb§GëI¡îÁ˚
();

159 
usb§SëI¡îÁ˚
();

	@../../../../Components/hal/target/CC2540USB/usb/library/usb_suspend.h

9 #i‚de‡
USBSUSPEND_H


10 
	#USBSUSPEND_H


	)

90 
	~"usb_fúmw¨e_libøry_hódîs.h
"

92 (*
	tVFPTR
)();

96 
__xd©a
 
VFPTR
 
pFnSu•ídE¡îHook
;

97 
__xd©a
 
VFPTR
 
pFnSu•ídExôHook
;

101 
	`usbsu•E¡î
();

102 
uöt8
 
	`usbsu•DoRemŸeWakeup
();

103 
	`usbsu•St›Pm1
();

	@../../../../Components/hal/target/CC2541ARC/AIR_MOTION_Lib.h

84 #i‚de‡
__AIR_MOTION_LIB_H


85 
	#__AIR_MOTION_LIB_H


	)

91 
	~"°döt.h
"

94 
	~"°dboﬁ.h
"

107 
uöt8_t
 
	mLe·
 :1;

108 
uöt8_t
 
	mRight
 :1;

109 
uöt8_t
 
	mUp
 :1;

110 
uöt8_t
 
	mDown
 :1;

111 } 
	tt_°ru˘_AIR_MOTION_Swùes
;

120 
öt16_t
 
	mX
;

121 
öt16_t
 
	mY
;

122 
öt16_t
 
	mZ
;

123 } 
	tt_°ru˘_AIR_MOTION_Sís‹Axis
;

132 
öt8_t
 
	mX
;

133 
öt8_t
 
	mY
;

134 } 
	tt_°ru˘_AIR_MOTION_Dñè
;

141 
	mAúMŸi⁄Low
,

142 
	mAúMŸi⁄N‹mÆ
,

143 
	mAúMŸi⁄High


144 } 
	tt_íum_AIR_MOTION_Levñ
;

152 
t_°ru˘_AIR_MOTION_Dñè
 
	mDñèGaö
;

153 
t_°ru˘_AIR_MOTION_Sís‹Axis
 
	mGyroOff£ts
;

154 
uöt8_t
 
	mGyroSèticMaxNoi£
;

155 
uöt16_t
 
	mSèticSam∂es
;

156 
uöt16_t
 
	mSwùeMöDi°
;

157 
uöt16_t
 
	mSwùeMaxNoi£
;

158 
uöt8_t
 
	mSèπupSam∂es
;

159 
uöt8_t
 
	mClickStûlSam∂es
;

160 
t_íum_AIR_MOTION_Levñ
 
	mClickStûlTﬁî™˚
;

161 
boﬁ
 
	mIsRﬁlCompE«bÀd
;

162 
uöt16_t
 
	mAcc1gLsb
;

163 
uöt16_t
 
	mGyroSísôivôy
;

164 } 
	tt_°ru˘_AIR_MOTION_Inô
;

172 
t_°ru˘_AIR_MOTION_Sís‹Axis
 
	mGyroSam∂es
;

173 
t_°ru˘_AIR_MOTION_Sís‹Axis
 
	mAccSam∂es
;

174 
uöt8_t
 
	mClickSam∂e
;

175 } 
	tt_°ru˘_AIR_MOTION_Pro˚ssDñèSam∂es
;

183 
uöt8_t
 
	mIsDñèCompuãd
 :1;

184 
uöt8_t
 
	mIsSètic
 :1;

185 
uöt8_t
 
	mNewGyroOff£t
 :1;

186 } 
	tt_°ru˘_AIR_MOTION_Sètus
;

194 
t_°ru˘_AIR_MOTION_Sètus
 
	mSètus
;

195 
t_°ru˘_AIR_MOTION_Sís‹Axis
 
	mGyroOff£ts
;

196 
t_°ru˘_AIR_MOTION_Dñè
 
	mDñè
;

197 
t_°ru˘_AIR_MOTION_Swùes
 
	mSwùesDëe˘ed
;

198 } 
	tt_°ru˘_AIR_MOTION_Pro˚ssDñèSètus
;

237 
AIR_MOTION_Inô
(c⁄° 
t_°ru˘_AIR_MOTION_Inô
 *
pInôP¨amëîs
);

266 
t_°ru˘_AIR_MOTION_Pro˚ssDñèSètus
 
AIR_MOTION_Pro˚ssDñè
(
t_°ru˘_AIR_MOTION_Pro˚ssDñèSam∂es
 
lSís‹Sam∂es
);

	@../../../../Components/hal/target/CC2541ARC/hal_accel.c

48 
	~"comdef.h
"

49 
	~"hÆ_ac˚l.h
"

50 
	~"hÆ_bﬂrd_cfg.h
"

51 
	~"hÆ_drivîs.h
"

52 
	~"hÆ_mŸi⁄.h
"

53 
	~"oßl.h
"

61 
	#ACC_REG_ADDR_XOUT_HPF_L
 0x00

	)

62 
	#ACC_REG_ADDR_XOUT_HPF_H
 0x01

	)

63 
	#ACC_REG_ADDR_YOUT_HPF_L
 0x02

	)

64 
	#ACC_REG_ADDR_YOUT_HPF_H
 0x03

	)

65 
	#ACC_REG_ADDR_ZOUT_HPF_L
 0x04

	)

66 
	#ACC_REG_ADDR_ZOUT_HPF_H
 0x05

	)

67 
	#ACC_REG_ADDR_XOUT_L
 0x06

	)

68 
	#ACC_REG_ADDR_XOUT_H
 0x07

	)

69 
	#ACC_REG_ADDR_YOUT_L
 0x08

	)

70 
	#ACC_REG_ADDR_YOUT_H
 0x09

	)

71 
	#ACC_REG_ADDR_ZOUT_L
 0x0A

	)

72 
	#ACC_REG_ADDR_ZOUT_H
 0x0B

	)

73 
	#ACC_REG_ADDR_DCST_RESP
 0x0C

	)

74 
	#ACC_REG_ADDR_WHO_AM_I
 0x0F

	)

75 
	#ACC_REG_ADDR_TILT_POS_CUR
 0x10

	)

76 
	#ACC_REG_ADDR_TILT_POS_PRE
 0x11

	)

77 
	#ACC_REG_ADDR_INT_SRC_REG1
 0x15

	)

78 
	#ACC_REG_ADDR_INT_SRC_REG2
 0x16

	)

79 
	#ACC_REG_ADDR_STATUS_REG
 0x18

	)

80 
	#ACC_REG_ADDR_INT_REL
 0x1A

	)

81 
	#ACC_REG_ADDR_CTRL_REG1
 0x1B

	)

82 
	#ACC_REG_ADDR_CTRL_REG2
 0x1C

	)

83 
	#ACC_REG_ADDR_CTRL_REG3
 0x1D

	)

84 
	#ACC_REG_ADDR_INT_CTRL_REG1
 0x1E

	)

85 
	#ACC_REG_ADDR_INT_CTRL_REG2
 0x1F

	)

86 
	#ACC_REG_ADDR_INT_CTRL_REG3
 0x20

	)

87 
	#ACC_REG_ADDR_DATA_CTRL_REG
 0x21

	)

88 
	#ACC_REG_ADDR_TILT_TIMER
 0x28

	)

89 
	#ACC_REG_ADDR_WUF_TIMER
 0x29

	)

90 
	#ACC_REG_ADDR_TDT_TIMER
 0x2B

	)

91 
	#ACC_REG_ADDR_TDT_H_THRESH
 0x2C

	)

92 
	#ACC_REG_ADDR_TDT_L_THRESH
 0x2D

	)

93 
	#ACC_REG_ADDR_TAP_TIMER
 0x2E

	)

94 
	#ACC_REG_ADDR_TDT_TOTAL_TIMER
 0x2F

	)

95 
	#ACC_REG_ADDR_TDT_LATENCY_TIMER
 0x30

	)

96 
	#ACC_REG_ADDR_TDT_WINDOW_TIMER
 0x31

	)

97 
	#ACC_REG_ADDR_SELF_TEST
 0x3A

	)

98 
	#ACC_REG_ADDR_WUF_THRESH
 0x5A

	)

99 
	#ACC_REG_ADDR_TILT_ANGLE
 0x5C

	)

100 
	#ACC_REG_ADDR_HYST_SET
 0x5F

	)

103 
	#CTRL_REG1_PC1_OPERATING_MODE
 0x80

	)

104 
	#CTRL_REG1_PC1_STANDBY_MODE
 0x00

	)

105 
	#CTRL_REG1_RES_12BIT
 0x40

	)

106 
	#CTRL_REG1_RES_8BIT
 0x00

	)

107 
	#CTRL_REG1_DRDYE_INT_ENABLED
 0x20

	)

108 
	#CTRL_REG1_DRDYE_INT_DISABLED
 0x00

	)

109 
	#CTRL_REG1_GSEL_8G
 0x10

	)

110 
	#CTRL_REG1_GSEL_4G
 0x08

	)

111 
	#CTRL_REG1_GSEL_2G
 0x00

	)

112 
	#CTRL_REG1_TDTE_ENABLED
 0x04

	)

113 
	#CTRL_REG1_TDTE_DISABLED
 0x00

	)

114 
	#CTRL_REG1_WUFE_ENABLED
 0x02

	)

115 
	#CTRL_REG1_WUFE_DISABLED
 0x00

	)

116 
	#CTRL_REG1_TPE_ENABLED
 0x01

	)

117 
	#CTRL_REG1_TPE_DISABLED
 0x00

	)

119 
	#CTRL_REG3_OWUF_ODR_100HZ
 0x02

	)

121 
	#INT_CTRL_REG1_INT_ENABLED
 0x20

	)

122 
	#INT_CTRL_REG1_POLARITY_HIGH
 0x10

	)

124 
	#INT_CTRL_REG2_X_AXIS_ENABLED
 0x80

	)

125 
	#INT_CTRL_REG2_Y_AXIS_ENABLED
 0x40

	)

126 
	#INT_CTRL_REG2_Z_AXIS_ENABLED
 0x20

	)

128 
	#DATA_CTRL_REG_LPF_ODR_50HZ
 0x02

	)

129 
	#DATA_CTRL_REG_LPF_ODR_100HZ
 0x03

	)

130 
	#DATA_CTRL_REG_LPF_ODR_200HZ
 0x04

	)

131 
	#DATA_CTRL_REG_LPF_ODR_400HZ
 0x05

	)

132 
	#DATA_CTRL_REG_LPF_ODR_800HZ
 0x06

	)

135 
	#HAL_ACCEL_P1_GPIO_PINS
 ( 
	`BV
(2Ë)

	)

138 
	#HAL_ACCEL_P1_INPUT_PINS
 ( 
	`BV
(2Ë)

	)

141 
	#HAL_ACCEL_P1_INTERRUPT_PINS
 ( 
	`BV
(2Ë)

	)

144 
	#HAL_ACCEL_POWER_PIN_BV
 ( 
	`BV
(6Ë)

	)

145 
	#HAL_ACCEL_POWER_PIN
 
P1_6


	)

146 
	#HAL_ACCEL_POWER_PxDIR
 
P1DIR


	)

147 
	#HAL_ACCEL_POWER_PxSEL
 
P1SEL


	)

165 
uöt8
 
	maddr
;

166 
uöt8
 
	md©a
;

167 } 
	thÆAc˚lC⁄fig_t
;

173 
hÆAc˚lC⁄fig_t
 
	gHÆAc˚lE«bÀC⁄figTabÀ
[] =

175 { 
ACC_REG_ADDR_CTRL_REG1
, 0 },

176 { 
ACC_REG_ADDR_CTRL_REG2
, 0 },

177 { 
ACC_REG_ADDR_CTRL_REG3
, 0 },

178 { 
ACC_REG_ADDR_INT_CTRL_REG1
, 
INT_CTRL_REG1_POLARITY_HIGH
 },

179 { 
ACC_REG_ADDR_INT_CTRL_REG2
, 0 },

180 { 
ACC_REG_ADDR_INT_CTRL_REG3
, 0 },

181 { 
ACC_REG_ADDR_DATA_CTRL_REG
, 
DATA_CTRL_REG_LPF_ODR_200HZ
 },

182 { 
ACC_REG_ADDR_CTRL_REG1
, 
CTRL_REG1_PC1_OPERATING_MODE
 | 
CTRL_REG1_GSEL_2G
}

184 
	#HAL_ACCEL_ENABLE_CONFIG_TABLE_SIZE
 ((
HÆAc˚lE«bÀC⁄figTabÀ
Ë/ (HÆAc˚lE«bÀC⁄figTabÀ[0]))

	)

186 
hÆAc˚lC⁄fig_t
 
	gHÆAc˚lMŸi⁄Dëe˘C⁄figTabÀ
[] =

188 { 
ACC_REG_ADDR_CTRL_REG1
, 0 },

189 { 
ACC_REG_ADDR_CTRL_REG3
, 
CTRL_REG3_OWUF_ODR_100HZ
 },

190 { 
ACC_REG_ADDR_INT_CTRL_REG1
, 
INT_CTRL_REG1_INT_ENABLED
 | 
INT_CTRL_REG1_POLARITY_HIGH
 },

191 { 
ACC_REG_ADDR_INT_CTRL_REG2
, 
INT_CTRL_REG2_X_AXIS_ENABLED
 | 
INT_CTRL_REG2_Y_AXIS_ENABLED
 | 
INT_CTRL_REG2_Z_AXIS_ENABLED
 },

192 { 
ACC_REG_ADDR_INT_CTRL_REG3
, 0 },

193 { 
ACC_REG_ADDR_DATA_CTRL_REG
, 
DATA_CTRL_REG_LPF_ODR_200HZ
 },

194 { 
ACC_REG_ADDR_WUF_TIMER
, 25 },

195 { 
ACC_REG_ADDR_WUF_THRESH
, 0x08 },

196 { 
ACC_REG_ADDR_CTRL_REG1
, 
CTRL_REG1_PC1_OPERATING_MODE
 | 
CTRL_REG1_WUFE_ENABLED
 | 
CTRL_REG1_GSEL_2G
 }

198 
	#HAL_ACCEL_MOTION_DETECT_CONFIG_TABLE_SIZE
 ((
HÆAc˚lMŸi⁄Dëe˘C⁄figTabÀ
Ë/ (HÆAc˚lMŸi⁄Dëe˘C⁄figTabÀ[0]))

	)

200 
hÆAc˚lC⁄fig_t
 
	gHÆAc˚lLowPowîC⁄figTabÀ
[] =

202 { 
ACC_REG_ADDR_CTRL_REG1
, 0 }

204 
	#HAL_ACCEL_LOW_POWER_CONFIG_TABLE_SIZE
 ((
HÆAc˚lLowPowîC⁄figTabÀ
Ë/ (HÆAc˚lLowPowîC⁄figTabÀ[0]))

	)

210 
hÆAc˚lPro˚ssMŸi⁄Dëe˘I¡îru±
( );

216 
hÆAc˚lCBack_t
 
	gpHÆAc˚lPro˚ssFun˘i⁄
;

229 
	$hÆAc˚lPro˚ssMŸi⁄Dëe˘I¡îru±
( )

232 
P1IEN
 &(
uöt8
Ë~
HAL_ACCEL_P1_INTERRUPT_PINS
;

235 
IEN2
 &~(
	`BV
( 4 ));

238 
	`oßl_£t_evít
–
HÆ_TaskID
, 
HAL_MOTION_DETECTED_EVENT
 );

239 
	}
}

250 
	$hÆAc˚lPro˚ssMŸi⁄Dëe˘Evít
( )

253 i‡(
pHÆAc˚lPro˚ssFun˘i⁄
 !
NULL
)

255 
	`pHÆAc˚lPro˚ssFun˘i⁄
();

257 
	}
}

274 
	$HÆAc˚lInô
( )

277 
HAL_ACCEL_POWER_PxDIR
 |
HAL_ACCEL_POWER_PIN_BV
;

280 
HAL_ACCEL_POWER_PIN
 = 1;

283 
HAL_ACCEL_POWER_PxSEL
 &~
HAL_ACCEL_POWER_PIN_BV
;

284 
P1SEL
 &(
uöt8
Ë~
HAL_ACCEL_P1_GPIO_PINS
;

287 
P1DIR
 &(
uöt8
Ë~
HAL_ACCEL_P1_INPUT_PINS
;

292 
P2INP
 |= 0x40;

295 
pHÆAc˚lPro˚ssFun˘i⁄
 = 
NULL
;

296 
	}
}

313 
	$HÆAc˚lE«bÀ
( )

315 
uöt8
 
i
, 
dummy
;

318 
	`HÆMŸi⁄I2cWrôe
–
HAL_MOTION_DEVICE_ACCELEROMETER
,

319 
ACC_REG_ADDR_CTRL_REG1
,

320 &
HÆAc˚lE«bÀC⁄figTabÀ
[0].
d©a
,

324 
	`HÆMŸi⁄I2cRód
–
HAL_MOTION_DEVICE_ACCELEROMETER
,

325 
ACC_REG_ADDR_INT_REL
,

327 &
dummy
 );

330 
i
 = 0; i < 
HAL_ACCEL_ENABLE_CONFIG_TABLE_SIZE
; i++)

332 
	`HÆMŸi⁄I2cWrôe
–
HAL_MOTION_DEVICE_ACCELEROMETER
,

333 
HÆAc˚lE«bÀC⁄figTabÀ
[
i
].
addr
,

334 &
HÆAc˚lE«bÀC⁄figTabÀ
[
i
].
d©a
,

337 
	}
}

354 
	$HÆAc˚lDißbÀ
( )

356 
uöt8
 
i
;

359 
i
 = 0; i < 
HAL_ACCEL_LOW_POWER_CONFIG_TABLE_SIZE
; i++)

361 
	`HÆMŸi⁄I2cWrôe
–
HAL_MOTION_DEVICE_ACCELEROMETER
,

362 
HÆAc˚lLowPowîC⁄figTabÀ
[
i
].
addr
,

363 &
HÆAc˚lLowPowîC⁄figTabÀ
[
i
].
d©a
,

366 
	}
}

383 
	$HÆAc˚lMŸi⁄Dëe˘
–
hÆAc˚lCBack_t
 
cback
 )

385 
uöt8
 
i
;

388 
pHÆAc˚lPro˚ssFun˘i⁄
 = 
cback
;

391 
i
 = 0; i < 
HAL_ACCEL_MOTION_DETECT_CONFIG_TABLE_SIZE
; i++)

393 
	`HÆMŸi⁄I2cWrôe
–
HAL_MOTION_DEVICE_ACCELEROMETER
,

394 
HÆAc˚lMŸi⁄Dëe˘C⁄figTabÀ
[
i
].
addr
,

395 &
HÆAc˚lMŸi⁄Dëe˘C⁄figTabÀ
[
i
].
d©a
,

400 
P1IFG
 = (
uöt8
Ë(~
HAL_ACCEL_P1_INTERRUPT_PINS
);

401 
P1IF
 = 0;

404 
P1IEN
 |
HAL_ACCEL_P1_INTERRUPT_PINS
;

407 
IEN2
 |
	`BV
( 4 );

408 
	}
}

423 
	$HAL_ISR_FUNCTION
–
hÆAc˚lP‹t1I§
, 
P1INT_VECTOR
 )

425 
	`HAL_ENTER_ISR
();

428 i‡((
P1IFG
 & 
HAL_ACCEL_P1_INTERRUPT_PINS
Ë&& (
P1IEN
 & HAL_ACCEL_P1_INTERRUPT_PINS))

430 
	`hÆAc˚lPro˚ssMŸi⁄Dëe˘I¡îru±
();

433 
P1IFG
 = 0;

434 
P1IF
 = 0;

436 
	`HAL_EXIT_ISR
();

437 
	}
}

	@../../../../Components/hal/target/CC2541ARC/hal_accel.h

41 #i‚de‡
HAL_ACCEL_H


42 
	#HAL_ACCEL_H


	)

44 #ifde‡
__˝lu•lus


53 
	~"comdef.h
"

59 
	#HAL_ACCEL_I2C_ADDRESS
 0x0F

	)

60 
	#HAL_ACCEL_OUTPUT_DATA_ADDRESS
 0x06

61 

	)

66 (*
hÆAc˚lCBack_t
) ( );

88 
HÆAc˚lInô
( );

105 
HÆAc˚lE«bÀ
( );

122 
HÆAc˚lDißbÀ
( );

139 
HÆAc˚lMŸi⁄Dëe˘
–
hÆAc˚lCBack_t
 
cback
 );

157 
HÆAc˚lRód
–
öt8
 *
y
, i¡8 *
z
 );

174 
hÆAc˚lPro˚ssMŸi⁄Dëe˘Evít
( );

179 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2541ARC/hal_aes.c

42 
	~"oßl.h
"

43 
	~"hÆ_´s.h
"

44 
	~"hÆ_dma.h
"

66 (*
pS•AesEn¸y±
)–
uöt8
 *, uöt8 * ) = (*)
NULL
;

71 
	`´sDmaInô
( );

73 #i‡((
deföed
 
HAL_DMA
Ë&& (HAL_DMA =
TRUE
))

85 
	$´sDmaInô
( )

87 
hÆDMADesc_t
 *
ch
;

90 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_IN
 );

91 
	`HAL_DMA_SET_DEST
–
ch
, 
HAL_AES_IN_ADDR
 );

92 
	`HAL_DMA_SET_VLEN
–
ch
, 
HAL_DMA_VLEN_USE_LEN
 );

93 
	`HAL_DMA_SET_WORD_SIZE
–
ch
, 
HAL_DMA_WORDSIZE_BYTE
 );

94 
	`HAL_DMA_SET_TRIG_MODE
–
ch
, 
HAL_DMA_TMODE_SINGLE
 );

95 
	`HAL_DMA_SET_TRIG_SRC
–
ch
, 
HAL_DMA_TRIG_ENC_DW
 );

96 
	`HAL_DMA_SET_SRC_INC
–
ch
, 
HAL_DMA_SRCINC_1
 );

97 
	`HAL_DMA_SET_DST_INC
–
ch
, 
HAL_DMA_DSTINC_0
 );

98 
	`HAL_DMA_SET_IRQ
–
ch
, 
HAL_DMA_IRQMASK_DISABLE
 );

99 
	`HAL_DMA_SET_M8
–
ch
, 
HAL_DMA_M8_USE_8_BITS
 );

100 
	`HAL_DMA_SET_PRIORITY
–
ch
, 
HAL_DMA_PRI_HIGH
 );

103 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_OUT
 );

104 
	`HAL_DMA_SET_SOURCE
–
ch
, 
HAL_AES_OUT_ADDR
 );

105 
	`HAL_DMA_SET_VLEN
–
ch
, 
HAL_DMA_VLEN_USE_LEN
 );

106 
	`HAL_DMA_SET_WORD_SIZE
–
ch
, 
HAL_DMA_WORDSIZE_BYTE
 );

107 
	`HAL_DMA_SET_TRIG_MODE
–
ch
, 
HAL_DMA_TMODE_SINGLE
 );

108 
	`HAL_DMA_SET_TRIG_SRC
–
ch
, 
HAL_DMA_TRIG_ENC_UP
 );

109 
	`HAL_DMA_SET_SRC_INC
–
ch
, 
HAL_DMA_SRCINC_0
 );

110 
	`HAL_DMA_SET_DST_INC
–
ch
, 
HAL_DMA_DSTINC_1
 );

111 
	`HAL_DMA_SET_IRQ
–
ch
, 
HAL_DMA_IRQMASK_DISABLE
 );

112 
	`HAL_DMA_SET_M8
–
ch
, 
HAL_DMA_M8_USE_8_BITS
 );

113 
	`HAL_DMA_SET_PRIORITY
–
ch
, 
HAL_DMA_PRI_HIGH
 );

114 
	}
}

117 #i‡(!
deföed
 
HAL_AES_DMA
Ë|| (HAL_AES_DMA =
FALSE
)

129 
	$AesLﬂdBlock
–
uöt8
 *
±r
 )

131 
uöt8
 
i
;

134 
	`AES_START
();

137 
i
 = 0; i < 
STATE_BLENGTH
; i++)

139 
ENCDI
 = *
±r
++;

141 
	}
}

155 
	$AesSèπBlock
–
uöt8
 *
out
, uöt8 *
ö
 )

157 
uöt8
 
i
;

160 
	`AES_START
();

163 
i
 = 0; i < 
STATE_BLENGTH
; i++)

165 
ENCDI
 = *
ö
++;

169 
	`HAL_AES_DELAY
();

172 
i
 = 0; i < 
STATE_BLENGTH
; i++)

174 *
out
++ = 
ENCDO
;

176 
	}
}

192 
	$AesSèπSh‹tBlock
–
uöt8
 *
out
, uöt8 *
ö
 )

194 
uöt8
 
i
, 
j
;

196 
	`AES_START
();

197 
i
 = 0; i < 4; i++)

200 
j
 = 0; j < 4; j++)

202 
ENCDI
 = *
ö
++;

206 
	`HAL_AES_DELAY
();

209 
j
 = 0; j < 4; j++)

211 *
out
++ = 
ENCDO
;

214 
	}
}

228 
	$AesLﬂdIV
–
uöt8
 *
IV
 )

230 #i‡(
deföed
 
HAL_AES_DMA
Ë&& (HAL_AES_DMA =
TRUE
)

231 
hÆDMADesc_t
 *
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_IN
 );

234 
	`HAL_DMA_SET_SOURCE
–
ch
, 
IV
 );

235 
	`HAL_DMA_SET_LEN
–
ch
, 
STATE_BLENGTH
 );

238 
	`HAL_DMA_CLEAR_IRQ
–
HAL_DMA_AES_IN
 );

239 
	`HAL_DMA_ARM_CH
–
HAL_DMA_AES_IN
 );

241 
	`asm
("NOP");

242 } !
	`HAL_DMA_CH_ARMED
(
HAL_DMA_AES_IN
));

245 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_LOAD_IV
 );

248 
	`AES_START
();

249  !(
ENCCS
 & 0x08) );

252 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_LOAD_IV
 );

255 
	`AesLﬂdBlock
–
IV
 );

257 
	}
}

270 
	$AesLﬂdKey
–
uöt8
 *
AesKey
 )

272 #i‡(
deföed
 
HAL_AES_DMA
Ë&& (HAL_AES_DMA =
TRUE
)

273 
hÆDMADesc_t
 *
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_IN
 );

276 
	`HAL_DMA_SET_SOURCE
–
ch
, 
AesKey
 );

277 
	`HAL_DMA_SET_LEN
–
ch
, 
KEY_BLENGTH
 );

280 
	`HAL_DMA_CLEAR_IRQ
–
HAL_DMA_AES_IN
 );

281 
	`HAL_DMA_ARM_CH
–
HAL_DMA_AES_IN
 );

283 
	`asm
("NOP");

284 } !
	`HAL_DMA_CH_ARMED
(
HAL_DMA_AES_IN
));

287 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_LOAD_KEY
 );

290 
	`AES_START
();

291  !(
ENCCS
 & 0x08) );

294 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_LOAD_KEY
 );

297 
	`AesLﬂdBlock
–
AesKey
 );

299 
	}
}

301 #i‡(
deföed
 
HAL_AES_DMA
Ë&& (HAL_AES_DMA =
TRUE
)

321 
	$AesDmaSëup
–
uöt8
 *
C°©e
, 
uöt16
 
msg_out_Àn
, uöt8 *
msg_ö
, uöt16 
msg_ö_Àn
 )

323 
hÆDMADesc_t
 *
ch
;

326 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_IN
 );

327 
	`HAL_DMA_SET_SOURCE
–
ch
, 
msg_ö
 );

328 
	`HAL_DMA_SET_LEN
–
ch
, 
msg_ö_Àn
 );

331 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_OUT
 );

332 
	`HAL_DMA_SET_DEST
–
ch
, 
C°©e
 );

333 
	`HAL_DMA_SET_LEN
–
ch
, 
msg_out_Àn
 );

336 
	`HAL_DMA_CLEAR_IRQ
–
HAL_DMA_AES_IN
 );

337 
	`HAL_DMA_ARM_CH
–
HAL_DMA_AES_IN
 );

339 
	`asm
("NOP");

340 } !
	`HAL_DMA_CH_ARMED
(
HAL_DMA_AES_IN
));

341 
	`HAL_DMA_CLEAR_IRQ
–
HAL_DMA_AES_OUT
 );

342 
	`HAL_DMA_ARM_CH
–
HAL_DMA_AES_OUT
 );

344 
	`asm
("NOP");

345 } !
	`HAL_DMA_CH_ARMED
(
HAL_DMA_AES_OUT
));

346 
	}
}

360 
	$HÆAesInô
( )

362 #i‡(
deföed
 
HAL_AES_DMA
Ë&& (HAL_AES_DMA =
TRUE
)

364 
	`´sDmaInô
();

366 
	}
}

379 
	$s•_HW_KeyInô
–
uöt8
 *
AesKey
 )

381 
	`AES_SETMODE
(
ECB
);

382 
	`AesLﬂdKey
–
AesKey
 );

383 
	}
}

402 
	$s•AesEn¸y±HW
–
uöt8
 *
AesKey
, uöt8 *
C°©e
 )

404 ()
AesKey
;

406 #i‡(
deföed
 
HAL_AES_DMA
Ë&& (HAL_AES_DMA =
TRUE
)

408 
	`AesDmaSëup
–
C°©e
, 
STATE_BLENGTH
, Cstate, STATE_BLENGTH );

409 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_ENCRYPT
 );

412 
	`AES_START
();

413  !
	`HAL_DMA_CHECK_IRQ
–
HAL_DMA_AES_OUT
 ) );

416 
	`AES_SETMODE
(
ECB
);

417 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_ENCRYPT
 );

420 
	`AesSèπBlock
–
C°©e
, Cstate );

422 
	}
}

	@../../../../Components/hal/target/CC2541ARC/hal_aes.h

39 #i‚de‡
HAL_AES_H_


40 
	#HAL_AES_H_


	)

42 
	~"hÆ_ty≥s.h
"

44 
	#STATE_BLENGTH
 16

45 
	#KEY_BLENGTH
 16

46 
	#KEY_EXP_LENGTH
 176

47 

	)

52 #i‡((
deföed
 
SOFTWARE_AES
Ë&& (SOFTWARE_AES =
TRUE
)Ë&& ((deföed 
SW_AES_AND_KEY_EXP
) && (SW_AES_AND_KEY_EXP == TRUE))

56 
HÆAesInô
( );

57 
AesLﬂdBlock
–
uöt8
 * );

58 
AesSèπBlock
–
uöt8
 *, uint8 * );

59 
AesSèπSh‹tBlock
–
uöt8
 *, uint8 * );

60 
AesLﬂdIV
(
uöt8
 *);

61 
AesDmaSëup
–
uöt8
 *, 
uöt16
, uint8 *, uint16 );

62 
AesLﬂdKey
–
uöt8
 * );

64 (*
pS•AesEn¸y±
)–
uöt8
 *, uint8 * );

65 
	`s•_HW_KeyInô
 (
uöt8
 *);

66 
	`s•KeyEx∑nsi⁄
 (
uöt8
 *, uint8 *);

68 
	`s•AesEn¸y±HW
 (
uöt8
 *, uint8 *);

69 
	`s•AesEn¸y±KeyExp
 (
uöt8
 *, uint8 *);

70 
	`s•AesEn¸y±Basic
 (
uöt8
 *, uint8 *);

72 
	`s•AesDe¸y±HW
–
uöt8
 *, uint8 * );

73 
	`s•AesDe¸y±
–
uöt8
 *
key
, uöt8 *
buf
 );

76 
	#AES_BUSY
 0x08

	)

77 
	#ENCRYPT
 0x00

	)

78 
	#DECRYPT
 0x01

	)

81 
	#AES_SETMODE
(
mode
) \

83 
ENCCS
 = (ENCCS & ~0x70Ë| (
mode
); \

84 
	}
} 0)

	)

87 
	#CBC
 0x00

	)

88 
	#CFB
 0x10

	)

89 
	#OFB
 0x20

	)

90 
	#CTR
 0x30

	)

91 
	#ECB
 0x40

	)

92 
	#CBC_MAC
 0x50

	)

95 
	#AES_SET_ENCR_DECR_KEY_IV
(
cmd
) \

97 
ENCCS
 = (ENCCS & ~0x07Ë| (
cmd
); \

98 } 0)

	)

101 
	#AES_ENCRYPT
 0x00

	)

102 
	#AES_DECRYPT
 0x02

	)

103 
	#AES_LOAD_KEY
 0x04

	)

104 
	#AES_LOAD_IV
 0x06

	)

108 
	#AES_START
(Ë
ENCCS
 |0x01

	)

111 
	#HAL_DMA_AES_IN
 1

	)

112 
	#HAL_DMA_AES_OUT
 2

	)

115 
	#HAL_AES_IN_ADDR
 0x70B1

	)

116 
	#HAL_AES_OUT_ADDR
 0x70B2

	)

118 #i‡!
deföed
 (
HAL_AES_DMA
Ë|| (HAL_AES_DMA =
FALSE
)

119 
	#HAL_AES_DELAY
() \

121 vﬁ©ûê
uöt8
 
dñay
 = 15; \

122 
dñay
--); \

123 } 0)

	)

	@../../../../Components/hal/target/CC2541ARC/hal_buzzer.c

43 
	~"hÆ_bﬂrd.h
"

44 
	~"hÆ_buzzî.h
"

45 
	~"hÆ_drivîs.h
"

46 
	~"oßl.h
"

53 
	#HAL_T4_CC0_VALUE
 125

	)

54 
	#HAL_T4_TIMER_CTL_DIV32
 0xA0

	)

55 
	#HAL_T4_TIMER_CTL_START
 0x10

	)

56 
	#HAL_T4_TIMER_CTL_CLEAR
 0x04

	)

57 
	#HAL_T4_TIMER_CTL_OPMODE_MODULO
 0x02

	)

58 
	#HAL_T4_TIMER_CCTL_MODE_COMPARE
 0x04

	)

59 
	#HAL_T4_TIMER_CCTL_CMP_TOGGLE
 0x10

	)

60 
	#HAL_T4_TIMER_CTL_DIV64
 0xC0

	)

63 
	#HAL_BUZZER_P1_GPIO_PINS
 ( 
	`BV
–0 ) )

	)

66 
	#HAL_BUZZER_P1_OUTPUT_PINS
 ( 
	`BV
–0 ) )

	)

69 
	#HAL_BUZZER_ENABLE_PIN
 
P1_0


	)

75 
	#HAL_BUZZER_DISABLE
(Ë–
HAL_BUZZER_ENABLE_PIN
 = 0 )

	)

85 
hÆBuzzîCBack_t
 
	gpHÆBuzzîRögCom∂ëeNŸifiˇti⁄Fun˘i⁄
;

104 
	$HÆBuzzîInô
( )

106 
pHÆBuzzîRögCom∂ëeNŸifiˇti⁄Fun˘i⁄
 = 
NULL
;

109 
	`HAL_BUZZER_DISABLE
();

112 
P1DIR
 |(
uöt8
Ë
HAL_BUZZER_P1_OUTPUT_PINS
;

113 
	}
}

132 
	$HÆBuzzîRög
–
uöt16
 
m£c
,

133 
uöt8
 
t⁄e
,

134 
hÆBuzzîCBack_t
 
buzzîCback
 )

137 
pHÆBuzzîRögCom∂ëeNŸifiˇti⁄Fun˘i⁄
 = 
buzzîCback
;

140 
P1SEL
 |(
uöt8
Ë
HAL_BUZZER_P1_GPIO_PINS
;

142 i‡–
t⁄e
 =
HAL_BUZZER_LOW_TONE
 )

145 
T4CTL
 = 
HAL_T4_TIMER_CTL_DIV64
 |

146 
HAL_T4_TIMER_CTL_CLEAR
 |

147 
HAL_T4_TIMER_CTL_OPMODE_MODULO
;

152 
T4CTL
 = 
HAL_T4_TIMER_CTL_DIV32
 |

153 
HAL_T4_TIMER_CTL_CLEAR
 |

154 
HAL_T4_TIMER_CTL_OPMODE_MODULO
;

157 
T4CCTL0
 = 
HAL_T4_TIMER_CCTL_MODE_COMPARE
 | 
HAL_T4_TIMER_CCTL_CMP_TOGGLE
;

158 
T4CC0
 = 
HAL_T4_CC0_VALUE
;

161 
T4CTL
 |
HAL_T4_TIMER_CTL_START
;

164 
	`oßl_°¨t_timîEx
–
HÆ_TaskID
,

165 
HAL_BUZZER_EVENT
,

166 
m£c
 );

168 
	}
}

179 
	$HÆBuzzîSt›
( )

182 
T4CTL
 = 0;

185 
P1SEL
 &(
uöt8
Ë~
HAL_BUZZER_P1_GPIO_PINS
;

188 i‡(
pHÆBuzzîRögCom∂ëeNŸifiˇti⁄Fun˘i⁄
 !
NULL
)

190 
	`pHÆBuzzîRögCom∂ëeNŸifiˇti⁄Fun˘i⁄
();

192 
	}
}

	@../../../../Components/hal/target/CC2541ARC/hal_buzzer.h

41 #i‚de‡
HAL_BUZZER_H


42 
	#HAL_BUZZER_H


	)

44 #ifde‡
__˝lu•lus


53 
	~"comdef.h
"

59 
	#HAL_BUZZER_LOW_TONE
 0

	)

60 
	#HAL_BUZZER_HIGH_TONE
 1

	)

67 (*
hÆBuzzîCBack_t
) ();

89 
HÆBuzzîInô
( );

108 
HÆBuzzîRög
–
uöt16
 
m£c
,

109 
uöt8
 
t⁄e
,

110 
hÆBuzzîCBack_t
 
buzzîCback
 );

121 
HÆBuzzîSt›
( );

123 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2541ARC/hal_drivers.c

44 
	~"hÆ_ty≥s.h
"

45 
	~"OSAL.h
"

46 
	~"hÆ_drivîs.h
"

47 
	~"hÆ_adc.h
"

48 #i‡(
deföed
 
HAL_DMA
Ë&& (HAL_DMA =
TRUE
)

49 
	~"hÆ_dma.h
"

51 
	~"hÆ_Êash.h
"

52 #i‡((
deföed
 
HAL_I2C
Ë&& (HAL_I2C =
TRUE
))

53 
	~"hÆ_i2c.h
"

55 
	~"hÆ_key.h
"

56 
	~"hÆ_lcd.h
"

57 
	~"hÆ_Àd.h
"

58 
	~"hÆ_timî.h
"

59 
	~"hÆ_u¨t.h
"

60 
	~"hÆ_¶ìp.h
"

62 #i‡(
deföed
 
HAL_AES
Ë&& (HAL_AES =
TRUE
)

63 
	~"hÆ_´s.h
"

65 #i‡(
deföed
 
HAL_MOTION
Ë&& (HAL_MOTION =
TRUE
)

66 
	~"hÆ_gyro.h
"

67 
	~"hÆ_mŸi⁄.h
"

69 #i‡(
deföed
 
HAL_SPI
Ë&& (HAL_SPI =
TRUE
)

70 
	~"hÆ_•i.h
"

72 #i‡(
deföed
 
HAL_BUZZER
Ë&& (HAL_BUZZER =
TRUE
)

73 
	~"hÆ_buzzî.h
"

75 #i‡(
deföed
 
HAL_GPIO_DBG
Ë&& (HAL_GPIO_DBG =
TRUE
)

76 
	~"hÆ_gpiodbg.h
"

96 
uöt8
 
	gHÆ_TaskID
;

98 
HÆLedUpd©e
( );

113 
	$HÆ_Inô
–
uöt8
 
èsk_id
 )

116 
HÆ_TaskID
 = 
èsk_id
;

121 #i‡(
deföed
 
HAL_MOTION
Ë&& (HAL_MOTION =
TRUE
)

122 
	`HÆMŸi⁄Inô
();

124 
	}
}

135 
	$HÆDrivîInô
 ()

138 #i‡(
deföed
 
HAL_VDDMON
Ë&& (HAL_VDDMON =
TRUE
)

139 
	`HÆVddM⁄Inô
();

143 #i‡(
deföed
 
HAL_ADC
Ë&& (HAL_ADC =
TRUE
)

144 
	`HÆAdcInô
();

148 #i‡(
deföed
 
HAL_DMA
Ë&& (HAL_DMA =
TRUE
)

150 
	`HÆDmaInô
();

154 #i‡(
deföed
 
HAL_AES
Ë&& (HAL_AES =
TRUE
)

155 
	`HÆAesInô
();

159 #i‡(
deföed
 
HAL_LCD
Ë&& (HAL_LCD =
TRUE
)

160 
	`HÆLcdInô
();

164 #i‡(
deföed
 
HAL_LED
Ë&& (HAL_LED =
TRUE
)

165 
	`HÆLedInô
();

169 #i‡(
deföed
 
HAL_UART
Ë&& (HAL_UART =
TRUE
)

170 
	`HÆUARTInô
();

174 #i‡(
deföed
 
HAL_KEY
Ë&& (HAL_KEY =
TRUE
)

175 
	`HÆKeyInô
();

179 #i‡(
deföed
 
HAL_SPI
Ë&& (HAL_SPI =
TRUE
)

180 
	`HÆSpiInô
();

184 #i‡(
deföed
 
HAL_BUZZER
Ë&& (HAL_BUZZER =
TRUE
)

185 
	`HÆBuzzîInô
();

189 #i‡(
deföed
 
HAL_GPIO_DBG
Ë&& (HAL_GPIO_DBG =
TRUE
)

190 
	`HÆGpioDbgInô
();

192 
	}
}

211 
	$hÆDrivîBegPM
()

213 #i‡((
deföed
 
HAL_LED
Ë&& (HAL_LED =
TRUE
))

214 
	`HÆLedE¡îSÀï
();

216 #i‡((
deföed
 
HAL_KEY
Ë&& (HAL_KEY =
TRUE
))

217 
	`HÆKeyE¡îSÀï
();

219 #i‡((
deföed
 
HAL_I2C
Ë&& (HAL_I2C =
TRUE
))

220 
	`HÆI2CE¡îSÀï
();

222 
	}
}

241 
	$hÆDrivîEndPM
()

243 #i‡((
deföed
 
HAL_LED
Ë&& (HAL_LED =
TRUE
))

244 
	`HÆLedExôSÀï
();

246 #i‡((
deföed
 
HAL_KEY
Ë&& (HAL_KEY =
TRUE
))

247 
	`HÆKeyExôSÀï
();

249 #i‡((
deföed
 
HAL_I2C
Ë&& (HAL_I2C =
TRUE
))

250 
	`HÆI2CExôSÀï
();

252 
	}
}

264 
uöt16
 
	$HÆ_Pro˚ssEvít
–
uöt8
 
èsk_id
, 
uöt16
 
evíts
 )

266 
uöt8
 *
msgPå
;

268 ()
èsk_id
;

270 i‡–
evíts
 & 
SYS_EVENT_MSG
 )

272 
msgPå
 = 
	`oßl_msg_ª˚ive
(
HÆ_TaskID
);

274 
msgPå
)

279 
	`oßl_msg_dóŒoˇã
–
msgPå
 );

281 
msgPå
 = 
	`oßl_msg_ª˚ive
–
HÆ_TaskID
 );

283  
evíts
 ^ 
SYS_EVENT_MSG
;

286 i‡–
evíts
 & 
HAL_LED_BLINK_EVENT
 )

288 #i‡(
	`deföed
 (
BLINK_LEDS
)Ë&& (
HAL_LED
 =
TRUE
)

289 
	`HÆLedUpd©e
();

291  
evíts
 ^ 
HAL_LED_BLINK_EVENT
;

294 i‡(
evíts
 & 
HAL_KEY_EVENT
)

297 #i‡(
deföed
 
HAL_KEY
Ë&& (HAL_KEY =
TRUE
)

299 
	`HÆKeyPﬁl
();

302 i‡(!
HÆ_KeyI¡E«bÀ
)

304 
	`oßl_°¨t_timîEx
–
HÆ_TaskID
, 
HAL_KEY_EVENT
, 100);

308  
evíts
 ^ 
HAL_KEY_EVENT
;

311 #i‡(
deföed
 
HAL_MOTION
Ë&& (HAL_MOTION =
TRUE
Ë&& (!deföed 
NO_POINTING_LIB
)

312 i‡(
evíts
 & 
HAL_MOTION_EVENT
)

314 
uöt16
 
evítH™dÀd
 = 
	`HÆMŸi⁄H™dÀOSEvít
–
evíts
 );

315  
evíts
 ^ 
evítH™dÀd
;

318 #i‡(
deföed
 
HAL_I2C
Ë&& (HAL_I2C =
TRUE
)

319 i‡(
evíts
 & 
HAL_GYRO_REGISTER_ACCESS_READY_EVENT
)

321 
	`HÆGyroH™dÀGyroRegi°îAc˚ssRódyEvít
();

322  
evíts
 ^ 
HAL_GYRO_REGISTER_ACCESS_READY_EVENT
;

327 #i‡(
deföed
 
HAL_BUZZER
Ë&& (HAL_BUZZER =
TRUE
)

328 i‡(
evíts
 & 
HAL_BUZZER_EVENT
)

330 
	`HÆBuzzîSt›
();

331  
evíts
 ^ 
HAL_BUZZER_EVENT
;

338 
	}
}

349 
	$HÆ_Pro˚ssPﬁl
 ()

352 #i‡(
deföed
 
HAL_VDDMON
Ë&& (HAL_VDDMON =
TRUE
)

353 
	`HÆVddM⁄Pﬁl
();

355 #i‡((
deföed
 
HAL_I2C
Ë&& (HAL_I2C =
TRUE
Ë&& (deföed 
HAL_I2C_POLLED
) && (HAL_I2C_POLLED == TRUE))

356 
	`HÆI2CPﬁl
();

358 #i‡(
deföed
 
HAL_UART
Ë&& (HAL_UART =
TRUE
)

359 
	`HÆUARTPﬁl
();

361 #i‡(
deföed
 
HAL_SPI
Ë&& (HAL_SPI =
TRUE
)

362 
	`HÆSpiPﬁl
();

364 #i‡(
deföed
 
HAL_HID
Ë&& (HAL_HID =
TRUE
)

365 
	`usbHidPro˚ssEvíts
();

366 
	`usbHidPro˚ssEvíts
();

368 
	}
}

	@../../../../Components/hal/target/CC2541ARC/hal_drivers.h

39 #i‚de‡
HAL_DRIVER_H


40 
	#HAL_DRIVER_H


	)

42 #ifde‡
__˝lu•lus


51 
	#HAL_KEY_EVENT
 0x0001

	)

52 
	#HAL_LED_BLINK_EVENT
 0x0002

	)

54 
	#HAL_SLEEP_TIMER_EVENT
 0x00400

	)

55 
	#PERIOD_RSSI_RESET_EVT
 0x00800

	)

57 
	#PERIOD_RSSI_RESET_TIMEOUT
 10

	)

61 
	#HAL_MOTION_GYRO_POWERUP_DONE_EVENT
 0x0004

	)

62 
	#HAL_MOTION_GYRO_CALIBRATION_DONE_EVENT
 0x0008

	)

63 
	#HAL_MOTION_MEASUREMENT_START_EVENT
 0x0010

	)

64 
	#HAL_MOTION_MEASUREMENT_DONE_EVENT
 0x0020

	)

65 
	#HAL_BUZZER_EVENT
 0x0040

	)

66 
	#HAL_GYRO_REGISTER_ACCESS_READY_EVENT
 0x0080

	)

67 
	#HAL_MOTION_DETECTED_EVENT
 0x0100

	)

68 
	#HAL_GYRO_ACTIVE_EVENT
 0x0200

	)

69 
	#HAL_MOTION_EVENT
 \

70 –
HAL_MOTION_GYRO_POWERUP_DONE_EVENT
 | \

71 
HAL_MOTION_GYRO_CALIBRATION_DONE_EVENT
 | \

72 
HAL_MOTION_MEASUREMENT_START_EVENT
 | \

73 
HAL_MOTION_MEASUREMENT_DONE_EVENT
 | \

74 
HAL_MOTION_DETECTED_EVENT
 | \

75 
HAL_GYRO_ACTIVE_EVENT
 )

	)

80 
uöt8
 
HÆ_TaskID
;

82 
HÆ_Inô
 ( 
uöt8
 
èsk_id
 );

87 
uöt16
 
HÆ_Pro˚ssEvít
 ( 
uöt8
 
èsk_id
, uöt16 
evíts
 );

92 
HÆ_Pro˚ssPﬁl
 ();

97 
HÆDrivîInô
 ();

116 
hÆDrivîBegPM
();

135 
hÆDrivîEndPM
();

137 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2541ARC/hal_gyro.c

44 
	~"hÆ_ac˚l.h
"

45 
	~"hÆ_mcu.h
"

46 
	~"hÆ_drivîs.h
"

47 
	~"hÆ_gyro.h
"

48 
	~"hÆ_mŸi⁄.h
"

49 
	~"oßl.h
"

56 
	#HAL_GYRO_P0_GPIO_PINS
 ( 
	`BV
–7 ) | BV–5 ) )

	)

57 
	#HAL_GYRO_P1_GPIO_PINS
 ( 
	`BV
–3 ) )

	)

60 
	#HAL_GYRO_P0_OUTPUT_PINS
 ( 
	`BV
–7 ) | BV–5 ) )

	)

61 
	#HAL_GYRO_P1_OUTPUT_PINS
 ( 
	`BV
–3 ) )

	)

64 
	#HAL_GYRO_POWER_PIN
 
P0_7


	)

65 
	#HAL_GYRO_CLKIN_PIN
 
P0_5


	)

66 
	#HAL_GYRO_INT_PIN
 
P1_3


	)

69 
	#IMU3000_REG_ADDR_WHO_AM_I
 0x00

	)

70 
	#IMU3000_REG_ADDR_X_OFFS_USRH
 0x0C

	)

71 
	#IMU3000_REG_ADDR_X_OFFS_USRL
 0x0D

	)

72 
	#IMU3000_REG_ADDR_Y_OFFS_USRH
 0x0E

	)

73 
	#IMU3000_REG_ADDR_Y_OFFS_USRL
 0x0F

	)

74 
	#IMU3000_REG_ADDR_Z_OFFS_USRH
 0x10

	)

75 
	#IMU3000_REG_ADDR_Z_OFFS_USRL
 0x11

	)

76 
	#IMU3000_REG_ADDR_FIFO_EN
 0x12

	)

77 
	#IMU3000_REG_ADDR_AUX_VDDIO
 0x13

	)

78 
	#IMU3000_REG_ADDR_AUX_SLV_ADDR
 0x14

	)

79 
	#IMU3000_REG_ADDR_SMPLRT_DIV
 0x15

	)

80 
	#IMU3000_REG_ADDR_DLPF_FS
 0x16

	)

81 
	#IMU3000_REG_ADDR_INT_CFG
 0x17

	)

82 
	#IMU3000_REG_ADDR_AUX_BURST_ADDR
 0x18

	)

83 
	#IMU3000_REG_ADDR_INT_STATUS
 0x1A

	)

84 
	#IMU3000_REG_ADDR_TEMP_OUT_H
 0x1B

	)

85 
	#IMU3000_REG_ADDR_TEMP_OUT_L
 0x1C

	)

86 
	#IMU3000_REG_ADDR_GYRO_XOUT_H
 0x1D

	)

87 
	#IMU3000_REG_ADDR_GYRO_XOUT_L
 0x1E

	)

88 
	#IMU3000_REG_ADDR_GYRO_YOUT_H
 0x1F

	)

89 
	#IMU3000_REG_ADDR_GYRO_YOUT_L
 0x20

	)

90 
	#IMU3000_REG_ADDR_GYRO_ZOUT_H
 0x21

	)

91 
	#IMU3000_REG_ADDR_GYRO_ZOUT_L
 0x22

	)

92 
	#IMU3000_REG_ADDR_AUX_XOUT_H
 0x23

	)

93 
	#IMU3000_REG_ADDR_AUX_XOUT_L
 0x24

	)

94 
	#IMU3000_REG_ADDR_AUX_YOUT_H
 0x25

	)

95 
	#IMU3000_REG_ADDR_AUX_YOUT_L
 0x26

	)

96 
	#IMU3000_REG_ADDR_AUX_ZOUT_H
 0x27

	)

97 
	#IMU3000_REG_ADDR_AUX_ZOUT_L
 0x28

	)

98 
	#IMU3000_REG_ADDR_DMP_REG1
 0x35

	)

99 
	#IMU3000_REG_ADDR_DMP_REG2
 0x36

	)

100 
	#IMU3000_REG_ADDR_DMP_REG3
 0x37

	)

101 
	#IMU3000_REG_ADDR_DMP_REG4
 0x38

	)

102 
	#IMU3000_REG_ADDR_DMP_REG5
 0x39

	)

103 
	#IMU3000_REG_ADDR_FIFO_COUNTH
 0x3A

	)

104 
	#IMU3000_REG_ADDR_FIFO_COUNTL
 0x3B

	)

105 
	#IMU3000_REG_ADDR_FIFO_R
 0x3C

	)

106 
	#IMU3000_REG_ADDR_USER_CTRL
 0x3D

	)

107 
	#IMU3000_REG_ADDR_PWR_MGM
 0x3E

	)

110 
	#AUX_IF_RST
 0x08

	)

111 
	#AUX_IF_EN
 0x20

	)

114 
	#CLK_SRC_PLL_X_GYRO_REF
 0x01

	)

115 
	#PWR_MGM_SLEEP
 0x40

	)

116 
	#PWR_MGM_STBY_XG
 0x20

	)

117 
	#PWR_MGM_STBY_YG
 0x10

	)

118 
	#PWR_MGM_STBY_ZG
 0x08

	)

129 
uöt8
 
	maddr
;

130 
uöt8
 
	md©a
;

131 } 
	thÆGyroC⁄fig_t
;

136 
hÆGyroE«bÀCback_t
 
	gpHÆGyroE«bÀPro˚ssFun˘i⁄
;

137 
hÆGyroC⁄fig_t
 
	gHÆGyroC⁄figTabÀ
[] =

139 { 
IMU3000_REG_ADDR_AUX_SLV_ADDR
, 
HAL_ACCEL_I2C_ADDRESS
 },

140 { 
IMU3000_REG_ADDR_AUX_BURST_ADDR
, 
HAL_ACCEL_OUTPUT_DATA_ADDRESS
 },

141 { 
IMU3000_REG_ADDR_SMPLRT_DIV
, 4 },

142 { 
IMU3000_REG_ADDR_DLPF_FS
, 0x19 }

144 
	#HAL_GYRO_CONFIG_TABLE_SIZE
 ((
HÆGyroC⁄figTabÀ
Ë/ (HÆGyroC⁄figTabÀ[0]))

	)

149 
gyroSÀï
( );

150 
gyroWake
( );

165 
	$HÆGyroInô
( )

168 
HAL_GYRO_POWER_PIN
 = 1;

169 
HAL_GYRO_CLKIN_PIN
 = 0;

170 
HAL_GYRO_INT_PIN
 = 0;

173 
P0SEL
 &(
uöt8
Ë~
HAL_GYRO_P0_GPIO_PINS
;

174 
P1SEL
 &(
uöt8
Ë~
HAL_GYRO_P1_GPIO_PINS
;

177 
P0DIR
 |(
uöt8
Ë
HAL_GYRO_P0_OUTPUT_PINS
;

178 
P1DIR
 |(
uöt8
Ë
HAL_GYRO_P1_OUTPUT_PINS
;

181 
pHÆGyroE«bÀPro˚ssFun˘i⁄
 = 
NULL
;

184 
	`oßl_°¨t_timîEx
–
HÆ_TaskID
,

185 
HAL_GYRO_REGISTER_ACCESS_READY_EVENT
,

187 
	}
}

198 
	$HÆGyroE«bÀ
–
hÆGyroE«bÀCback_t
 
cback
 )

201 
pHÆGyroE«bÀPro˚ssFun˘i⁄
 = 
cback
;

204 
	`gyroWake
();

207 
	`oßl_°¨t_timîEx
–
HÆ_TaskID
,

208 
HAL_GYRO_REGISTER_ACCESS_READY_EVENT
,

210 
	}
}

221 
	$HÆGyroH™dÀGyroRegi°îAc˚ssRódyEvít
( )

223 
uöt8
 
i
;

225 i‡(
pHÆGyroE«bÀPro˚ssFun˘i⁄
 !
NULL
)

228 
i
 = 0; i < 
HAL_GYRO_CONFIG_TABLE_SIZE
; i++)

230 
	`HÆMŸi⁄I2cWrôe
–
HAL_MOTION_DEVICE_GYRO
,

231 
HÆGyroC⁄figTabÀ
[
i
].
addr
,

232 &
HÆGyroC⁄figTabÀ
[
i
].
d©a
,

237 
	`pHÆGyroE«bÀPro˚ssFun˘i⁄
();

242 
	`gyroSÀï
();

244 
	}
}

255 
	$HÆGyroDißbÀ
( )

258 
	`gyroSÀï
();

259 
	}
}

270 
	$HÆGyroRód
–
öt16
 *
x
, i¡16 *
y
, i¡16 *
z
 )

272 
uöt8
 
ãmp
[6];

275 
	`HÆMŸi⁄I2cRód
–
HAL_MOTION_DEVICE_GYRO
,

276 
IMU3000_REG_ADDR_GYRO_XOUT_H
,

278 (
uöt8
 *)
ãmp
 );

281 *
x
 = (
ãmp
[2] << 8) |Åemp[3];

282 *
y
 = (
ãmp
[0] << 8) |Åemp[1];

283 *
z
 = (
ãmp
[4] << 8) |Åemp[5];

284 
	}
}

303 
	$HÆGyroRódAc˚lD©a
–
öt8
 *
x
, i¡8 *
y
, i¡8 *
z
 )

305 
uöt8
 
ãmp
[6];

308 
	`HÆMŸi⁄I2cRód
–
HAL_MOTION_DEVICE_GYRO
,

309 
IMU3000_REG_ADDR_AUX_XOUT_H
,

311 (
uöt8
 *)
ãmp
 );

332 *
x
 = 
ãmp
[1];

333 *
y
 = 
ãmp
[3];

334 *
z
 = 
ãmp
[5];

335 
	}
}

347 
	$HÆGyroE«bÀI2CPassThru
( )

349 
uöt8
 
d©a
 = 
AUX_IF_RST
;

351 
	`HÆMŸi⁄I2cWrôe
–
HAL_MOTION_DEVICE_GYRO
,

352 
IMU3000_REG_ADDR_USER_CTRL
,

353 &
d©a
,

355 
	}
}

367 
	$HÆGyroDißbÀI2CPassThru
( )

369 
uöt8
 
d©a
 = 
AUX_IF_RST
 | 
AUX_IF_EN
;

371 
	`HÆMŸi⁄I2cWrôe
–
HAL_MOTION_DEVICE_GYRO
,

372 
IMU3000_REG_ADDR_USER_CTRL
,

373 &
d©a
,

375 
	}
}

387 
	$HÆGyroSèπGyroMósuªmíts
( )

389 
uöt8
 
d©a
 = 
CLK_SRC_PLL_X_GYRO_REF
;

391 
	`HÆGyroDißbÀI2CPassThru
();

392 
	`HÆMŸi⁄I2cWrôe
–
HAL_MOTION_DEVICE_GYRO
,

393 
IMU3000_REG_ADDR_PWR_MGM
,

394 &
d©a
,

396 
	}
}

407 
	$gyroSÀï
( )

410 
uöt8
 
ªg
 = 
PWR_MGM_SLEEP
 | 
PWR_MGM_STBY_XG
 | 
PWR_MGM_STBY_YG
 | 
PWR_MGM_STBY_ZG
;

411 
	`HÆMŸi⁄I2cWrôe
–
HAL_MOTION_DEVICE_GYRO
,

412 
IMU3000_REG_ADDR_PWR_MGM
,

413 &
ªg
,

415 
	}
}

426 
	$gyroWake
( )

429 
uöt8
 
ªg
 = 0;

431 
	`HÆMŸi⁄I2cWrôe
–
HAL_MOTION_DEVICE_GYRO
,

432 
IMU3000_REG_ADDR_PWR_MGM
,

433 &
ªg
,

435 
	}
}

	@../../../../Components/hal/target/CC2541ARC/hal_gyro.h

41 #i‚de‡
HAL_GYRO_H


42 
	#HAL_GYRO_H


	)

44 #ifde‡
__˝lu•lus


53 
	~"comdef.h
"

59 
	#HAL_GYRO_OUTPUT_SETTLING_TIME
 200

60 
	#HAL_GYRO_CAL_SETTLING_TIME
 10

61 
	#HAL_GYRO_I2C_ADDRESS
 0x68

	)

67 (*
hÆGyroE«bÀCback_t
) ( );

89 
HÆGyroInô
( );

106 
HÆGyroE«bÀ
–
hÆGyroE«bÀCback_t
 
cback
 );

117 
HÆGyroH™dÀGyroRegi°îAc˚ssRódyEvít
( );

134 
HÆGyroDißbÀ
( );

145 
HÆGyroRód
–
öt16
 *
x
, i¡16 *
y
, i¡16 *
z
 );

164 
HÆGyroRódAc˚lD©a
–
öt8
 *
x
, i¡8 *
y
, i¡8 *
z
 );

176 
HÆGyroE«bÀI2CPassThru
( );

188 
HÆGyroDißbÀI2CPassThru
( );

200 
HÆGyroSèπGyroMósuªmíts
( );

202 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2541ARC/hal_i2c.c

45 
	~"hÆ_ty≥s.h
"

46 
	~"hÆ_bﬂrd_cfg.h
"

47 #i‡(
deföed
 
HAL_I2C
Ë&& (HAL_I2C =
TRUE
)

48 
	~"hÆ_as£π.h
"

49 
	~"hÆ_i2c.h
"

50 
	~"oßl.h
"

57 
	#I2C_ENS1
 
	`BV
(6)

	)

58 
	#I2C_STA
 
	`BV
(5)

	)

59 
	#I2C_STO
 
	`BV
(4)

	)

60 
	#I2C_SI
 
	`BV
(3)

	)

61 
	#I2C_AA
 
	`BV
(2)

	)

62 
	#I2C_MST_RD_BIT
 
	`BV
(0)

63 

	)

64 
	#I2C_CLOCK_MASK
 0x83

	)

66 
	#I2C_PXIFG
 
P2IFG


	)

67 
	#I2C_IF
 
P2IF


	)

68 
	#I2C_IE
 
	`BV
(1)

	)

77 
	mm°Sèπed
 = 0x08,

78 
	mm°RïSèπ
 = 0x10,

79 
	mm°AddrAckW
 = 0x18,

80 
	mm°AddrNackW
 = 0x20,

81 
	mm°D©aAckW
 = 0x28,

82 
	mm°D©aNackW
 = 0x30,

83 
	mm°Lo°Arb
 = 0x38,

84 
	mm°AddrAckR
 = 0x40,

85 
	mm°AddrNackR
 = 0x48,

86 
	mm°D©aAckR
 = 0x50,

87 
	mm°D©aNackR
 = 0x58,

90 
	m¶vAddrAckR
 = 0x60,

91 
	mm°Lo°ArbR
 = 0x68,

92 
	m¶vAddrAckG
 = 0x70,

93 
	mm°Lo°ArbG
 = 0x78,

94 
	m¶vD©aAckR
 = 0x80,

95 
	m¶vD©aNackR
 = 0x88,

96 
	mgíD©aAckR
 = 0x90,

97 
	mgíD©aNackR
 = 0x98,

98 
	m¶vSt›≥d
 = 0xA0,

99 
	m¶vAddrAckW
 = 0xA8,

100 
	mm°Lo°ArbW
 = 0xB0,

101 
	m¶vD©aAckW
 = 0xB8,

102 
	m¶vD©aNackW
 = 0xC0,

103 
	m¶vLa°AckW
 = 0xC8,

106 
	mi2cIdÀ
 = 0xF8

107 } 
	ti2cSètus_t
;

114 
	#I2C_WRAPPER_DISABLE
(Ë
	`°
–
I2CWC
 = 0x0C; )

	)

115 
	#I2C_CLOCK_RATE
(
x
Ë
	`°
–
I2CCFG
 &~
I2C_CLOCK_MASK
; \

116 
I2CCFG
 |
x
; )

	)

118 
	#I2C_CLR_NACK
(Ë
	`°
–
I2CCFG
 |
I2C_AA
; I2CCFG &~
I2C_SI
; )

	)

119 
	#I2C_SET_NACK
(Ë
	`°
–
I2CCFG
 &~
I2C_AA
; )

	)

120 
	#I2C_SET_ACK
(Ë
	`°
–
I2CCFG
 |
I2C_AA
; )

	)

123 
	#I2C_ENABLE
(Ë
	`°
–
I2CCFG
 |(
I2C_ENS1
 | 
I2C_AA
); )

	)

126 
	#I2C_STRT
(Ë
	`°
 ( \

127 
I2CCFG
 &~
I2C_SI
; \

128 
I2CCFG
 |
I2C_STA
; \

129 (
I2CCFG
 & 
I2C_SI
) == 0); \

130 
I2CCFG
 &~
I2C_STA
; \

131 )

	)

134 
	#I2C_STOP
(Ë
	`°
 ( \

135 
I2CCFG
 |
I2C_STO
; \

136 
I2CCFG
 &~
I2C_SI
; \

137 (
I2CCFG
 & 
I2C_STO
) != 0); \

138 )

	)

141 
	#I2C_READ
(
_X_
Ë
	`°
 ( \

142 
I2CCFG
 &~
I2C_SI
; \

143 (
I2CCFG
 & 
I2C_SI
) == 0); \

144 (
_X_
Ë
I2CDATA
; \

145 )

	)

148 
	#I2C_WRITE
(
_X_
Ë
	`°
 ( \

149 
I2CDATA
 = (
_X_
); \

150 
I2CCFG
 &~
I2C_SI
; \

151 (
I2CCFG
 & 
I2C_SI
) == 0); \

152 )

	)

155 
	#SLV_READ
(
_X_
Ë
	`°
 ( \

156 
I2CCFG
 &~
I2C_SI
; \

157 ((
I2CCFG
 & 
I2C_SI
) == 0) \

158 && (
I2CSTAT
 !
¶vSt›≥d
)); \

159 (
_X_
Ë
I2CDATA
; \

160 )

	)

163 
	#SLV_WRITE
(
_X_
Ë
	`°
 ( \

164 
I2CDATA
 = (
_X_
); \

165 
I2CCFG
 &~
I2C_SI
; \

166 ((
I2CCFG
 & 
I2C_SI
) == 0) \

167 && (
I2CSTAT
 !
¶vSt›≥d
)); \

168 )

	)

170 #i‡
HAL_I2C_POLLED


171 
	#I2C_INT_ENABLE
()

	)

173 
	#I2C_INT_ENABLE
(Ë
	`°
–
IEN2
 |
I2C_IE
; )

	)

175 
	#I2C_INT_DISABLE
(Ë
	`°
–
IEN2
 &~
I2C_IE
; )

	)

176 
	#I2C_INT_ENABLED
(Ë–
IEN2
 & 
I2C_IE
 )

	)

183 
uöt8
 
	gi2cAddrSave
, 
	gi2cCfgSave
;

185 #i‡
HAL_I2C_SLAVE


186 
i2cCÆlback_t
 
	gi2cCB
;

187 vﬁ©ûê
i2cLí_t
 
	gi2cRxIdx
, 
	gi2cTxIdx
;

188 
uöt8
 
	gi2cRxBuf
[
HAL_I2C_BUF_MAX
+1], 
	gi2cTxBuf
[HAL_I2C_BUF_MAX+1];

191 vﬁ©ûê
i2cLí_t
 
	gi2cRxLí
, 
	gi2cTxLí
;

193 #i‡
HAL_I2C_MASTER


210 
uöt8
 
	$i2cM°Såt
(
uöt8
 
addªss
, uöt8 
RD_WRn
)

212 
	`I2C_STRT
();

214 i‡(
I2CSTAT
 =
m°Sèπed
)

216 
addªss
 <<= 1;

217 
	`I2C_WRITE
(
addªss
 | 
RD_WRn
);

220  
I2CSTAT
;

221 
	}
}

238 
	$HÆI2CInô
(
i2cClock_t
 
˛ockR©e
)

240 
	`I2C_WRAPPER_DISABLE
();

241 
I2CADDR
 = 0;

242 
	`I2C_CLOCK_RATE
(
˛ockR©e
);

243 
	`I2C_ENABLE
();

244 
	}
}

263 
i2cLí_t
 
	$HÆI2CRód
(
uöt8
 
addªss
, 
i2cLí_t
 
Àn
, uöt8 *
pBuf
)

265 
uöt8
 
˙t
 = 0;

267 i‡(
	`i2cM°Såt
(
addªss
, 
I2C_MST_RD_BIT
Ë!
m°AddrAckR
)

269 
Àn
 = 0;

275 i‡(
Àn
 > 1)

277 
	`I2C_SET_ACK
();

280 
Àn
 > 0)

283 i‡(
Àn
 == 1)

285 
	`I2C_SET_NACK
();

289 
	`I2C_READ
(*
pBuf
++);

290 
˙t
++;

291 
Àn
--;

293 i‡(
I2CSTAT
 !
m°D©aAckR
)

295 i‡(
I2CSTAT
 !
m°D©aNackR
)

298 
˙t
--;

304 
	`I2C_STOP
();

305  
˙t
;

306 
	}
}

325 
i2cLí_t
 
	$HÆI2CWrôe
(
uöt8
 
addªss
, 
i2cLí_t
 
Àn
, uöt8 *
pBuf
)

327 i‡(
	`i2cM°Såt
(
addªss
, 0Ë!
m°AddrAckW
)

329 
Àn
 = 0;

332 
i2cLí_t
 
˙t
 = 0; c¡ < 
Àn
; cnt++)

334 
	`I2C_WRITE
(*
pBuf
++);

336 i‡(
I2CSTAT
 !
m°D©aAckW
)

338 i‡(
I2CSTAT
 =
m°D©aNackW
)

340 
Àn
 = 
˙t
 + 1;

344 
Àn
 = 
˙t
;

350 
	`I2C_STOP
();

351  
Àn
;

352 
	}
}

371 
i2cLí_t
 
	$i2cSlvRx
()

373 
uöt8
 
ch
, 
idx
 = 0;

376 
	`SLV_READ
(
ch
);

378 i‡((
I2CSTAT
 =
¶vD©aAckR
Ë|| (I2CSTAT =
¶vD©aNackR
))

380 
i2cRxBuf
[
idx
++] = 
ch
;

383 i‡(
idx
 =
HAL_I2C_BUF_MAX
)

385 
	`I2C_SET_NACK
();

387 } 
I2CSTAT
 =
¶vD©aAckR
);

389 
i2cRxLí
 = 
idx
;

390 
i2cRxIdx
 = 0;

391 
	`I2C_CLR_NACK
();

393  
idx
;

394 
	}
}

411 
i2cLí_t
 
	$i2cSlvTx
()

413 
uöt8
 
idx
 = 
i2cTxIdx
, 
Àn
 = 
i2cTxLí
;

417 i‡(
Àn
 == 1)

419 
	`I2C_SET_NACK
();

421 
	`SLV_WRITE
(
i2cTxBuf
[
idx
]);

423 i‡((
I2CSTAT
 =
¶vD©aAckW
Ë|| (I2CSTAT =
¶vLa°AckW
Ë|| (I2CSTAT =
¶vD©aNackW
))

425 
idx
++;

427 i‡((--
Àn
 =0Ë|| (
I2CSTAT
 =
¶vD©aNackW
))

438 
i2cTxIdx
 = 
idx
;

439 
i2cTxLí
 = 
Àn
;

440 
	`I2C_CLR_NACK
();

442  
Àn
;

443 
	}
}

461 
	$HÆI2CInô
(
uöt8
 
addªss
, 
i2cCÆlback_t
 
i2cCÆlback
)

463 
i2cCB
 = 
i2cCÆlback
;

464 
	`HAL_ASSERT
(
i2cCB
);

466 
	`I2C_WRAPPER_DISABLE
();

467 
I2CADDR
 = 
addªss
 << 1;

468 
	`I2C_ENABLE
();

470 
I2C_PXIFG
 = 0;

471 
I2C_IF
 = 0;

472 
	`I2C_INT_ENABLE
();

473 
	}
}

491 
i2cLí_t
 
	$HÆI2CRód
(
i2cLí_t
 
Àn
, 
uöt8
 *
pBuf
)

493 
uöt8
 
rxLí
 = 
i2cRxLí
;

495 i‡(
Àn
 >
rxLí
)

497 
Àn
 = 
rxLí
;

498 
rxLí
 = 0;

502 
rxLí
 -
Àn
;

505 ()
	`oßl_mem˝y
(
pBuf
, 
i2cRxBuf
+
i2cRxIdx
, 
Àn
);

506 
i2cRxIdx
 +
Àn
;

507 
i2cRxLí
 = 
rxLí
;

509  
Àn
;

510 
	}
}

528 
i2cLí_t
 
	$HÆI2CWrôe
(
i2cLí_t
 
Àn
, 
uöt8
 *
pBuf
)

530 #i‡((
HAL_I2C_BUF_MAX
 != 255) && (HAL_I2C_BUF_MAX != 65535))

531 i‡(
Àn
 > 
HAL_I2C_BUF_MAX
)

533 
Àn
 = 
HAL_I2C_BUF_MAX
;

537 i‡(
i2cTxLí
 != 0)

542 ()
	`oßl_mem˝y
(
i2cTxBuf
, 
pBuf
, 
Àn
);

543 
i2cTxIdx
 = 0;

544 
i2cTxLí
 = 
Àn
;

546 #i‡
HAL_I2C_POLLED


547 i‡(
I2CSTAT
 =
¶vAddrAckW
)

549 
	`i2cSlvTx
();

558 i‡(!
	`I2C_INT_ENABLED
())

560 
	`I2C_INT_ENABLE
();

564  
Àn
;

565 
	}
}

582 #i‡
HAL_I2C_POLLED


583 
	$HÆI2CPﬁl
()

585 
	$HAL_ISR_FUNCTION
(
hÆI2CI§
, 
I2C_VECTOR
)

588 
	`HAL_ENTER_ISR
();

590 
I2CSTAT
)

592 
¶vAddrAckR
:

593 i‡(
i2cRxLí
 == 0)

595 
	`i2cSlvRx
();

599 vﬁ©ûê
uöt8
 
ch
;

601 
	`I2C_SET_NACK
();

602 
	`SLV_READ
(
ch
);

603 
	`I2C_CLR_NACK
();

606 ()
	`i2cCB
(
i2cRxLí
);

609 
¶vAddrAckW
:

610 i‡(
i2cTxLí
 != 0)

612 
	`i2cSlvTx
();

614 i‡(
	`i2cCB
(0Ë=
FALSE
)

616 
	`I2C_SET_NACK
();

617 
	`SLV_WRITE
(0);

618 
	`I2C_CLR_NACK
();

627 
	`I2C_INT_DISABLE
();

631 
i2cIdÀ
:

635 
	`I2C_STOP
();

636 
	`I2C_CLR_NACK
();

641 
I2C_PXIFG
 = 0;

642 
I2C_IF
 = 0;

644 
	`HAL_EXIT_ISR
();

645 
	}
}

663 
uöt8
 
	$HÆI2CRódy2SÀï
()

665  ((
i2cRxLí
 =0Ë&& (
i2cTxLí
 =0Ë&& (
I2CSTAT
 =
i2cIdÀ
));

666 
	}
}

683 
	$HÆI2CE¡îSÀï
()

685 
i2cCfgSave
 = 
I2CCFG
;

686 
i2cAddrSave
 = 
I2CADDR
;

687 
	}
}

704 
	$HÆI2CExôSÀï
()

706 
I2CCFG
 = 
i2cCfgSave
;

707 
I2CADDR
 = 
i2cAddrSave
;

708 
	}
}

	@../../../../Components/hal/target/CC2541ARC/hal_i2c.h

43 #i‚de‡
HAL_I2C_H


44 
	#HAL_I2C_H


	)

51 
	~"hÆ_ty≥s.h
"

52 #i‡(
deföed
 
HAL_I2C
Ë&& (HAL_I2C =
TRUE
)

59 #i‡!
deföed
 
HAL_I2C_MASTER


60 
	#HAL_I2C_MASTER
 
FALSE


	)

63 #i‡!
deföed
 
HAL_I2C_SLAVE


64 #i‡
HAL_I2C_MASTER


65 
	#HAL_I2C_SLAVE
 
FALSE


	)

67 
	#HAL_I2C_SLAVE
 
TRUE


	)

71 #i‡
HAL_I2C_MASTER


72 
	#HAL_I2C_POLLED
 
FALSE


73 #ñ£ // i‡HAL_I2C_SLAVE

	)

74 #i‡!
deföed
 
HAL_I2C_POLLED


75 
	#HAL_I2C_POLLED
 
FALSE


78 

	)

79 #i‡!
deföed
 
HAL_I2C_BUF_MAX


80 
	#HAL_I2C_BUF_MAX
 255

	)

83 
	#HAL_I2C_SLAVE_ADDR_DEF
 0x41

	)

90 #i‡(
HAL_I2C_BUF_MAX
 < 256)

91 
uöt8
 
	ti2cLí_t
;

93 
uöt16
 
	ti2cLí_t
;

96 #i‡
HAL_I2C_MASTER


98 
	mi2cClock_123KHZ
 = 0x00,

99 
	mi2cClock_144KHZ
 = 0x01,

100 
	mi2cClock_165KHZ
 = 0x02,

101 
	mi2cClock_197KHZ
 = 0x03,

102 
	mi2cClock_33KHZ
 = 0x80,

103 
	mi2cClock_267KHZ
 = 0x81,

104 
	mi2cClock_533KHZ
 = 0x82

105 } 
	ti2cClock_t
;

126 
	$uöt8
 (*
	ti2cCÆlback_t
)(
	tuöt8
 
	t˙t
);

134 #i‡
HAL_I2C_MASTER


135 
	`HÆI2CInô
(
i2cClock_t
 
˛ockR©e
);

136 
i2cLí_t
 
	`HÆI2CRód
(
uöt8
 
addªss
, i2cLí_à
Àn
, uöt8 *
pBuf
);

137 
i2cLí_t
 
	`HÆI2CWrôe
(
uöt8
 
addªss
, i2cLí_à
Àn
, uöt8 *
pBuf
);

139 
	`HÆI2CInô
(
uöt8
 
addªss
, 
i2cCÆlback_t
 
i2cCÆlback
);

140 
i2cLí_t
 
	`HÆI2CRód
(i2cLí_à
Àn
, 
uöt8
 *
pBuf
);

141 
i2cLí_t
 
	`HÆI2CWrôe
(i2cLí_à
Àn
, 
uöt8
 *
pBuf
);

142 #i‡
HAL_I2C_POLLED


143 
	`HÆI2CPﬁl
();

146 
uöt8
 
	`HÆI2CRódy2SÀï
();

147 
	`HÆI2CE¡îSÀï
();

148 
	`HÆI2CExôSÀï
();

	@../../../../Components/hal/target/CC2541ARC/hal_key.c

83 
	~"hÆ_mcu.h
"

84 
	~"hÆ_defs.h
"

85 
	~"hÆ_ty≥s.h
"

86 
	~"hÆ_drivîs.h
"

87 
	~"hÆ_adc.h
"

88 
	~"hÆ_key.h
"

89 
	~"oßl.h
"

90 
	~"oßl_˛ock.h
"

91 
	~"hÆ_¶ìp.h
"

101 
	#HAL_KEY_BIT0
 0x01

	)

102 
	#HAL_KEY_BIT1
 0x02

	)

103 
	#HAL_KEY_BIT2
 0x04

	)

104 
	#HAL_KEY_BIT3
 0x08

	)

105 
	#HAL_KEY_BIT4
 0x10

	)

106 
	#HAL_KEY_BIT5
 0x20

	)

107 
	#HAL_KEY_BIT6
 0x40

	)

108 
	#HAL_KEY_BIT7
 0x80

	)

110 
	#HAL_KEY_RISING_EDGE
 0

	)

111 
	#HAL_KEY_FALLING_EDGE
 1

	)

113 
	#HAL_KEY_PDUP2
 0x80

	)

114 
	#HAL_KEY_PDUP1
 0x40

	)

115 
	#HAL_KEY_PDUP0
 0x20

	)

117 
	#HAL_KEY_DEBOUNCE_VALUE
 25

118 
	#HAL_KEY_POLLING_VALUE
 100

	)

120 
	#HAL_KEY_CODE_NOKEY
 0xFF

	)

123 
	#HAL_KEY_NUM_ROWS
 3

	)

124 
	#HAL_KEY_NUM_COLUMNS
 16

	)

127 
	#HAL_KEY_P0_GPIO_PINS
 ( 
HAL_KEY_BIT0
 | 
HAL_KEY_BIT1
 | 
HAL_KEY_BIT2
 | 
HAL_KEY_BIT3
 | 
HAL_KEY_BIT4
)

	)

128 
	#HAL_KEY_P1_GPIO_PINS
 ( 
HAL_KEY_BIT4
 )

	)

131 
	#HAL_KEY_P0_INPUT_PINS
 ( 
HAL_KEY_BIT0
 | 
HAL_KEY_BIT1
 | 
HAL_KEY_BIT2
 )

	)

132 
	#HAL_KEY_P0_OUTPUT_PINS
 ( 
HAL_KEY_BIT3
 | 
HAL_KEY_BIT4
 )

	)

133 
	#HAL_KEY_P1_INPUT_PINS
 0x00

	)

134 
	#HAL_KEY_P1_OUTPUT_PINS
 ( 
HAL_KEY_BIT4
 )

	)

137 
	#HAL_KEY_P0_INTERRUPT_PINS
 ( 
HAL_KEY_BIT0
 | 
HAL_KEY_BIT1
 | 
HAL_KEY_BIT2
 )

	)

140 
	#HAL_KEY_SHIFT_REGISTER_CLOCK_PIN
 
P0_3


	)

141 
	#HAL_KEY_SHIFT_REGISTER_POWER_PIN
 
P0_4


	)

142 
	#HAL_KEY_SHIFT_REGISTER_DATA_PIN
 
P1_4


	)

143 
	#HAL_KEY_SHIFT_REGISTER_POWER_OFF
 0

	)

144 
	#HAL_KEY_SHIFT_REGISTER_POWER_ON
 1

	)

154 
uöt8
 
	ghÆKeySavedKeys
;

155 
hÆKeyCBack_t
 
	gpHÆKeyPro˚ssFun˘i⁄
;

156 
boﬁ
 
	gHÆ_KeyI¡E«bÀ
;

157 
uöt8
 
	ghÆSaveI¡Key
;

159 
uöt8
 
	gHÆKeyC⁄figuªd
;

160 
uöt8
 
	ghÆKeyTimîRu¬ög
;

166 
hÆPro˚ssKeyI¡îru±
 ();

167 
hÆClockShi·Regi°î
 ();

168 
hÆPowîDownShi·Regi°î
 ();

169 
hÆSëShi·Regi°îD©a
–
uöt8
 
d©a
 );

170 
hÆPowîUpShi·Regi°î
( );

184 
	$HÆKeyInô
( )

186 #i‡(
HAL_KEY
 =
TRUE
)

188 
hÆKeySavedKeys
 = 
HAL_KEY_CODE_NOKEY
;

201 
P0SEL
 &(
uöt8
Ë~
HAL_KEY_P0_GPIO_PINS
;

202 
P1SEL
 &(
uöt8
Ë~
HAL_KEY_P1_GPIO_PINS
;

205 
P0DIR
 |(
uöt8
Ë
HAL_KEY_P0_OUTPUT_PINS
;

206 
P0DIR
 &(
uöt8
Ë~
HAL_KEY_P0_INPUT_PINS
;

208 
P1DIR
 |(
uöt8
Ë
HAL_KEY_P1_OUTPUT_PINS
;

209 
P1DIR
 &(
uöt8
Ë~
HAL_KEY_P1_INPUT_PINS
;

211 
P0INP
 = 0x00;

214 
P1_0
 = 
P1_1
 = 
P1_4
 = 0x00;

217 
	`hÆPowîDownShi·Regi°î
();

220 
pHÆKeyPro˚ssFun˘i⁄
 = 
NULL
;

223 
HÆKeyC⁄figuªd
 = 
FALSE
;

225 
hÆKeyTimîRu¬ög
 = 
FALSE
;

227 
	}
}

239 
	$HÆKeyC⁄fig
 (
boﬁ
 
öãºu±E«bÀ
, 
hÆKeyCBack_t
 
cback
)

241 #i‡(
HAL_KEY
 =
TRUE
)

243 
HÆ_KeyI¡E«bÀ
 = 
öãºu±E«bÀ
;

246 
pHÆKeyPro˚ssFun˘i⁄
 = 
cback
;

249 i‡(
HÆ_KeyI¡E«bÀ
)

252 
PICTL
 |
HAL_KEY_BIT0
;

255 
P0IEN
 |
HAL_KEY_P0_INTERRUPT_PINS
;

258 
IEN1
 |
HAL_KEY_BIT5
;

261 i‡(
HÆKeyC⁄figuªd
 =
TRUE
)

263 
	`oßl_°›_timîEx
–
HÆ_TaskID
, 
HAL_KEY_EVENT
);

269 
P0IEN
 &~(
HAL_KEY_P0_INTERRUPT_PINS
);

270 
IEN1
 &~(
HAL_KEY_BIT5
);

272 
	`oßl_°¨t_timîEx
 (
HÆ_TaskID
, 
HAL_KEY_EVENT
, 
HAL_KEY_POLLING_VALUE
);

276 
HÆKeyC⁄figuªd
 = 
TRUE
;

278 
	}
}

289 
uöt8
 
	$HÆKeyRód
 ( )

291 
uöt8
 
cﬁkeys
 = 0, 
rowkeys
 = 0;

292 
uöt8
 
keys
, 
cﬁcode
 = 
HAL_KEY_NUM_COLUMNS
, 
rowcode
 = 
HAL_KEY_NUM_ROWS
;

294 #i‡(
HAL_KEY
 =
TRUE
)

298 
P0IEN
 &~(
HAL_KEY_P0_INTERRUPT_PINS
);

301 
keys
 = (
P0
 & 
HAL_KEY_P0_INPUT_PINS
);

302 
uöt8
 
row
 = 0;Ñow < 
HAL_KEY_NUM_ROWS
;Ñow++)

304 i‡(((1 << 
row
Ë& 
keys
) == 0)

306 i‡(++
rowkeys
 == 1)

309 
rowcode
 = 
row
;

325 
P2INP
 |
HAL_KEY_BIT5
;

326 
	`hÆPowîUpShi·Regi°î
();

329 
	`hÆSÀïWaô
( 50 );

332 
	`hÆSëShi·Regi°îD©a
( 0 );

333 
	`hÆClockShi·Regi°î
();

336 
	`hÆSëShi·Regi°îD©a
( 1 );

337 
	`hÆClockShi·Regi°î
();

338 
	`hÆSëShi·Regi°îD©a
( 0 );

340 
uöt8
 
cﬁ
 = 0; cﬁ < 
HAL_KEY_NUM_COLUMNS
; col++)

343 
keys
 = (
P0
 & 
HAL_KEY_P0_INPUT_PINS
);

346 
	`hÆClockShi·Regi°î
();

349 i‡(
keys
 & ((
uöt8
)1 << 
rowcode
))

351 i‡(++
cﬁkeys
 == 1)

354 
cﬁcode
 = 
cﬁ
;

365 
	`hÆPowîDownShi·Regi°î
();

368 
P2INP
 &~
HAL_KEY_BIT5
;

370 i‡(
HÆ_KeyI¡E«bÀ
)

374 
P0IFG
 = (
uöt8
Ë(~
HAL_KEY_P0_INTERRUPT_PINS
);

375 
P0IF
 = 0;

378 
P0IEN
 |
HAL_KEY_P0_INTERRUPT_PINS
;

384 i‡((
cﬁcode
 =
HAL_KEY_NUM_COLUMNS
) ||

385 (
rowcode
 =
HAL_KEY_NUM_ROWS
) ||

386 (
rowkeys
 > 1) ||

387 (
cﬁkeys
 > 1))

389 
keys
 = 
HAL_KEY_CODE_NOKEY
;

393 
keys
 = (
rowcode
 << 4Ë| 
cﬁcode
;

396  
keys
;

397 
	}
}

409 
	$HÆKeyPﬁl
 ()

411 #i‡(
HAL_KEY
 =
TRUE
)

413 
uöt8
 
keys
 = 0;

419 
keys
 = 
	`HÆKeyRód
();

422 i‡(!
HÆ_KeyI¡E«bÀ
)

424 i‡(
keys
 =
hÆKeySavedKeys
)

428 
hÆKeySavedKeys
 = 
keys
;

432 i‡((
keys
 !
HAL_KEY_CODE_NOKEY
 || 
HÆ_KeyI¡E«bÀ
) &&

433 (
pHÆKeyPro˚ssFun˘i⁄
))

437 (
pHÆKeyPro˚ssFun˘i⁄
Ë(
keys
, 
HAL_KEY_STATE_NORMAL
);

440 i‡(
HÆ_KeyI¡E«bÀ
)

442 i‡(
keys
 !
HAL_KEY_CODE_NOKEY
)

446 
	`oßl_°¨t_timîEx
(
HÆ_TaskID
, 
HAL_KEY_EVENT
, 50);

450 
hÆKeyTimîRu¬ög
 = 
FALSE
;

455 
	}
}

467 
	$hÆPro˚ssKeyI¡îru±
 ()

470 #i‡(
HAL_KEY
 =
TRUE
)

472 i‡(
P0IFG
 & 
HAL_KEY_P0_INTERRUPT_PINS
)

475 
P0IEN
 &(
uöt8
Ë~
HAL_KEY_P0_INTERRUPT_PINS
;

478 
P0IFG
 = (
uöt8
Ë(~
HAL_KEY_P0_INTERRUPT_PINS
);

479 i‡(!
hÆKeyTimîRu¬ög
)

481 
hÆKeyTimîRu¬ög
 = 
TRUE
;

482 
	`oßlTimeUpd©e
();

483 
	`oßl_°¨t_timîEx
 (
HÆ_TaskID
, 
HAL_KEY_EVENT
, 
HAL_KEY_DEBOUNCE_VALUE
);

486 
P0IEN
 |
HAL_KEY_P0_INTERRUPT_PINS
;

489 
	}
}

500 
	$HÆKeyE¡îSÀï
 ( )

505 
	}
}

516 
uöt8
 
	$HÆKeyExôSÀï
 ( )

524  
TRUE
;

525 
	}
}

540 
	$HAL_ISR_FUNCTION
–
hÆKeyP‹t0I§
, 
P0INT_VECTOR
 )

542 
	`HAL_ENTER_ISR
();

544 
	`hÆPro˚ssKeyI¡îru±
();

546 #i‡
HAL_KEY


547 
P0IFG
 = (
uöt8
Ë(~
HAL_KEY_P0_INTERRUPT_PINS
);

548 
P0IF
 = 0;

551 
	`HAL_EXIT_ISR
();

552 
	}
}

563 
	$hÆClockShi·Regi°î
( )

565 
HAL_KEY_SHIFT_REGISTER_CLOCK_PIN
 = 1;

566 
HAL_KEY_SHIFT_REGISTER_CLOCK_PIN
 = 0;

567 
	}
}

578 
	$hÆPowîDownShi·Regi°î
( )

580 
HAL_KEY_SHIFT_REGISTER_CLOCK_PIN
 = 0;

581 
HAL_KEY_SHIFT_REGISTER_POWER_PIN
 = 
HAL_KEY_SHIFT_REGISTER_POWER_OFF
;

582 
HAL_KEY_SHIFT_REGISTER_DATA_PIN
 = 0;

583 
	}
}

594 
	$hÆPowîUpShi·Regi°î
( )

596 
HAL_KEY_SHIFT_REGISTER_POWER_PIN
 = 
HAL_KEY_SHIFT_REGISTER_POWER_ON
;

597 
	}
}

608 
	$hÆSëShi·Regi°îD©a
–
uöt8
 
d©a
 )

611 
HAL_KEY_SHIFT_REGISTER_DATA_PIN
 = (
d©a
 & 0x01);

612 
	}
}

	@../../../../Components/hal/target/CC2541ARC/hal_mcu.h

40 #i‚de‡
_HAL_MCU_H


41 
	#_HAL_MCU_H


	)

53 
	~"hÆ_defs.h
"

54 
	~"hÆ_ty≥s.h
"

61 
	#HAL_MCU_CC2540


	)

70 #ifde‡
__IAR_SYSTEMS_ICC__


72 #i‡
deföed
–
CC2541
Ë|| deföed–
CC2541S
 )

73 
	~<ioCC2541.h
>

75 
	~<ioCC2540.h
>

78 
	#HAL_COMPILER_IAR


	)

79 
	#HAL_MCU_LITTLE_ENDIAN
(Ë
__LITTLE_ENDIAN__


	)

80 
	#_PRAGMA
(
x
Ë
	`_Pøgma
(#x)

	)

81 
	#HAL_ISR_FUNC_DECLARATION
(
f
,
v
Ë
	`_PRAGMA
(
ve˘‹
=vË
__√¨_func
 
__öãºu±
 
	`f
()

	)

82 
	#HAL_ISR_FUNC_PROTOTYPE
(
f
,
v
Ë
	`_PRAGMA
(
ve˘‹
=vË
__√¨_func
 
__öãºu±
 
	`f
()

	)

83 
	#HAL_ISR_FUNCTION
(
f
,
v
Ë
	`HAL_ISR_FUNC_PROTOTYPE
(f,v); 
	`HAL_ISR_FUNC_DECLARATION
(f,v)

	)

86 #ñi‡
deföed
 
__KEIL__


88 #i‡
deföed
–
CC2541
Ë|| deföed–
CC2541S
 )

89 
	~<CC2541.h
>

91 
	~<CC2540.h
>

94 
	#HAL_COMPILER_KEIL


	)

95 
	#HAL_MCU_LITTLE_ENDIAN
(Ë0

	)

96 
	#HAL_ISR_FUNC_DECLARATION
(
f
,
v
Ë
	`f
(Ë
öãºu±
 
	)
v

97 
	#HAL_ISR_FUNC_PROTOTYPE
(
f
,
v
Ë
	`f
()

	)

98 
	#HAL_ISR_FUNCTION
(
f
,
v
Ë
	`HAL_ISR_FUNC_PROTOTYPE
(f,v); 
	`HAL_ISR_FUNC_DECLARATION
(f,v)

	)

110 
	#HAL_ENABLE_INTERRUPTS
(Ë
	`°
–
EA
 = 1; )

	)

111 
	#HAL_DISABLE_INTERRUPTS
(Ë
	`°
–
EA
 = 0; )

	)

112 
	#HAL_INTERRUPTS_ARE_ENABLED
(Ë(
EA
)

	)

114 
	thÆI¡Sèã_t
;

115 
	#HAL_ENTER_CRITICAL_SECTION
(
x
Ë
	`°
–x = 
EA
; 
	`HAL_DISABLE_INTERRUPTS
(); )

	)

116 
	#HAL_EXIT_CRITICAL_SECTION
(
x
Ë
	`°
–
EA
 = x; )

	)

117 
	#HAL_CRITICAL_STATEMENT
(
x
Ë
	`°
–
hÆI¡Sèã_t
 
_s
; 
	`HAL_ENTER_CRITICAL_SECTION
(_s); x; 
	`HAL_EXIT_CRITICAL_SECTION
(_s); )

	)

119 #ifde‡
__IAR_SYSTEMS_ICC__


125 
	#HAL_ENTER_ISR
(Ë{ 
hÆI¡Sèã_t
 
_i§I¡Sèã
 = 
EA
; 
	`HAL_ENABLE_INTERRUPTS
();

	)

126 
	#HAL_EXIT_ISR
(Ë
EA
 = 
_i§I¡Sèã
; }

	)

128 
	#HAL_ENTER_ISR
()

	)

129 
	#HAL_EXIT_ISR
()

	)

136 
	#WD_EN
 
	`BV
(3)

	)

137 
	#WD_MODE
 
	`BV
(2)

	)

138 
	#WD_INT_1900_USEC
 (
	`BV
(0Ë| BV(1))

	)

139 
	#WD_RESET1
 (0xA0 | 
WD_EN
 | 
WD_INT_1900_USEC
)

	)

140 
	#WD_RESET2
 (0x50 | 
WD_EN
 | 
WD_INT_1900_USEC
)

	)

141 
	#WD_KICK
(Ë
	`°
–
WDCTL
 = (0xA0 | WDCTL & 0x0F); WDCTL = (0x50 | WDCTL & 0x0F); )

	)

144 
	#HAL_SYSTEM_RESET
(Ë
	`°
–
	`HAL_DISABLE_INTERRUPTS
(); 
WDCTL
 = 
WD_RESET1
; WDCTL = 
WD_RESET2
; ;;); )

	)

150 
	#REV_A
 0x00

	)

151 
	#REV_B
 0x11

	)

152 
	#REV_C
 0x20

	)

153 
	#REV_D
 0x21

	)

161 
	#PCON_IDLE
 
	`BV
(0Ë

	)

164 
	#OSC_PD
 
	`BV
(2Ë

	)

165 
	#PMODE
 (
	`BV
(1Ë| BV(0)Ë

	)

168 
	#XOSC_STB
 
	`BV
(6Ë

	)

169 
	#HFRC_STB
 
	`BV
(5Ë

	)

172 
	#OSC_PD
 
	`BV
(2Ë

	)

176 
	#OSC
 
	`BV
(6)

	)

177 
	#TICKSPD
(
x
Ë(x << 3)

	)

178 
	#CLKSPD
(
x
Ë(x << 0)

	)

179 
	#CLKCONCMD_32MHZ
 (0)

	)

180 
	#CLKCONCMD_16MHZ
 (
	`CLKSPD
(1Ë| 
	`TICKSPD
(1Ë| 
OSC
)

	)

183 
	#LDRDY
 
	`BV
(0Ë

	)

187 #ifde‡
POWER_SAVING


188 vﬁ©ûê
__d©a
 
uöt8
 
hÆSÀïPc⁄VÆue
;

193 
	#CLEAR_SLEEP_MODE
(Ë
	`°
–
hÆSÀïPc⁄VÆue
 = 0; )

	)

194 
	#ALLOW_SLEEP_MODE
(Ë
	`°
–
hÆSÀïPc⁄VÆue
 = 
PCON_IDLE
; )

	)

196 
	#CLEAR_SLEEP_MODE
()

	)

197 
	#ALLOW_SLEEP_MODE
()

	)

	@../../../../Components/hal/target/CC2541ARC/hal_motion.c

43 
	~"hÆ_mcu.h
"

44 
	~"hÆ_bﬂrd_cfg.h
"

45 
	~"hÆ_ac˚l.h
"

46 
	~"hÆ_defs.h
"

47 
	~"hÆ_gyro.h
"

48 
	~"hÆ_i2c.h
"

49 
	~"hÆ_ty≥s.h
"

50 
	~"hÆ_drivîs.h
"

51 
	~"hÆ_adc.h
"

52 
	~"hÆ_key.h
"

53 
	~"hÆ_mŸi⁄.h
"

54 
	~"oßl.h
"

55 
	~"oßl_¢v.h
"

58 
	~"AIR_MOTION_Lib.h
"

64 
	#HAL_MOTION_TIME_BETWEEN_MEASUREMENTS
 10

65 

	)

67 
	#HAL_MOTION_NUM_CAL_SAMPLES
 8

	)

70 
	#HAL_MOTION_ENABLE_ROLL_COMPENSATION
 
TRUE


	)

73 #i‡!
deföed
 
HAL_MOTION_NV_ID_BEG


74 
	#HAL_MOTION_NV_ID_BEG
 0xF0

76 

	)

77 
	#HAL_MOTION_NV_ITEM_GYRO_OFFSETS_ID
 ( 
HAL_MOTION_NV_ID_BEG
 + 0 )

	)

88 
	mHAL_MOTION_STATE_OFF
,

89 
	mHAL_MOTION_STATE_INIT
,

90 
	mHAL_MOTION_STATE_POWERING_ON
,

91 
	mHAL_MOTION_STATE_CALIBRATING
,

92 
	mHAL_MOTION_STATE_WAITING_FOR_NEXT_MEASUREMENT
,

93 
	mHAL_MOTION_STATE_MEASURING
,

94 
	mHAL_MOTION_STATE_STANDBY


96 
uöt8
 
	thÆMŸi⁄Sèã_t
;

100 
öt8
 
	mgaöX
;

101 
öt8
 
	mgaöY
;

102 } 
	thÆMŸi⁄GaöSëtögs_t
;

107 
hÆMŸi⁄CBack_t
 
	gpHÆMŸi⁄Pro˚ssFun˘i⁄
;

108 
hÆMŸi⁄CÆCBack_t
 
	gpHÆMŸi⁄CÆCom∂ëeNŸifiˇti⁄Fun˘i⁄
;

109 
hÆMŸi⁄Sèã_t
 
	gHÆMŸi⁄Sèã
 = 
HAL_MOTION_STATE_OFF
;

110 
boﬁ
 
	gHÆMŸi⁄CÆibøãGyro
;

112 c⁄° 
hÆMŸi⁄GaöSëtögs_t
 
	gHÆMŸi⁄Mou£GaöTabÀ
[] =

114 #i‡(
HAL_MOTION_ENABLE_ROLL_COMPENSATION
 =
TRUE
)

126 
uöt8
 
	gHÆMŸi⁄Mou£GaöTabÀIndex
;

128 
	#HAL_MOTION_MOUSE_GAIN_TABLE_SIZE
 ((
HÆMŸi⁄Mou£GaöTabÀ
Ë/ (HÆMŸi⁄Mou£GaöTabÀ[0]))

	)

129 
	#HAL_MOTION_DEFAULT_GAIN_TABLE_INDEX
 1;

	)

131 °ru˘ { 
öt16
 
	mx
,
	my
,
	mz
; } 
	gHÆMŸi⁄GyroOff£ts
;

133 c⁄° 
uöt8
 
	gHÆMŸi⁄Devi˚AddªssTabÀ
[] =

135 
HAL_GYRO_I2C_ADDRESS
,

136 
HAL_ACCEL_I2C_ADDRESS


139 
t_°ru˘_AIR_MOTION_Pro˚ssDñèSam∂es
 
	gßm∂es
;

140 
t_°ru˘_AIR_MOTION_Pro˚ssDñèSètus
 
	gmŸi⁄_°©us
;

143 
t_°ru˘_AIR_MOTION_Inô
 
	gmŸi⁄_öô
 = {

152 
AúMŸi⁄N‹mÆ
,

153 
HAL_MOTION_ENABLE_ROLL_COMPENSATION
,

158 
	gHÆNbSam∂esCÆC¡
 = 0;

163 
HÆMŸi⁄H™dÀMósuªmítSèπEvít
( );

164 
HÆMŸi⁄H™dÀCÆPowîupD⁄eEvít
( );

165 
HÆMŸi⁄H™dÀGyroA˘iveEvít
( );

166 
HÆMŸi⁄GyroRódy
( );

180 
	$HÆMŸi⁄Inô
( )

183 
pHÆMŸi⁄Pro˚ssFun˘i⁄
 = 
NULL
;

184 
pHÆMŸi⁄CÆCom∂ëeNŸifiˇti⁄Fun˘i⁄
 = 
NULL
;

187 
	`HÆI2CInô
–
i2cClock_267KHZ
 );

190 
	`HÆAc˚lInô
();

191 
	`HÆGyroInô
();

194 
HÆMŸi⁄Sèã
 = 
HAL_MOTION_STATE_INIT
;

195 
	}
}

206 
	$HÆMŸi⁄C⁄fig
–
hÆMŸi⁄CBack_t
 
mósCback
 )

208 
uöt8
 
¢vSètus
;

211 
pHÆMŸi⁄Pro˚ssFun˘i⁄
 = 
mósCback
;

214 
HÆMŸi⁄Mou£GaöTabÀIndex
 = 
HAL_MOTION_DEFAULT_GAIN_TABLE_INDEX
;

215 
¢vSètus
 = 
	`oßl_¢v_ªad
–
HAL_MOTION_NV_ITEM_GYRO_OFFSETS_ID
,

216 –
HÆMŸi⁄GyroOff£ts
 ),

217 (
uöt8
 *)&
HÆMŸi⁄GyroOff£ts
 );

218 i‡(
¢vSètus
 !
SUCCESS
)

221 
HÆMŸi⁄GyroOff£ts
.
x
 = 0;

222 
HÆMŸi⁄GyroOff£ts
.
y
 = 0;

223 
HÆMŸi⁄GyroOff£ts
.
z
 = 0;

225 
	}
}

236 
	$HÆMŸi⁄E«bÀ
( )

239 
mŸi⁄_öô
.
DñèGaö
.
X
 = 
HÆMŸi⁄Mou£GaöTabÀ
[
HÆMŸi⁄Mou£GaöTabÀIndex
].
gaöX
;

240 
mŸi⁄_öô
.
DñèGaö
.
Y
 = 
HÆMŸi⁄Mou£GaöTabÀ
[
HÆMŸi⁄Mou£GaöTabÀIndex
].
gaöY
;

241 
mŸi⁄_öô
.
GyroOff£ts
.
X
 = 
HÆMŸi⁄GyroOff£ts
.
x
;

242 
mŸi⁄_öô
.
GyroOff£ts
.
Y
 = 
HÆMŸi⁄GyroOff£ts
.
y
;

243 
mŸi⁄_öô
.
GyroOff£ts
.
Z
 = 
HÆMŸi⁄GyroOff£ts
.
z
;

245 
	`AIR_MOTION_Inô
(&
mŸi⁄_öô
);

251 
	`HÆGyroE«bÀ
–
HÆMŸi⁄GyroRódy
 );

254 
HÆMŸi⁄CÆibøãGyro
 = 
FALSE
;

257 
HÆMŸi⁄Sèã
 = 
HAL_MOTION_STATE_POWERING_ON
;

258 
	}
}

270 
uöt8
 
	$HÆMŸi⁄CÆ
–
hÆMŸi⁄CÆCBack_t
 
ˇlCback
,

271 
uöt16
 
ˇlDuøti⁄
 )

273 i‡(
HÆMŸi⁄Sèã
 =
HAL_MOTION_STATE_INIT
)

276 
pHÆMŸi⁄CÆCom∂ëeNŸifiˇti⁄Fun˘i⁄
 = 
ˇlCback
;

279 
	`oßl_°¨t_timîEx
–
HÆ_TaskID
,

280 
HAL_MOTION_GYRO_POWERUP_DONE_EVENT
,

281 
ˇlDuøti⁄
 );

284 
mŸi⁄_öô
.
GyroOff£ts
.
X
 = 0;

285 
mŸi⁄_öô
.
GyroOff£ts
.
Y
 = 0;

286 
mŸi⁄_öô
.
GyroOff£ts
.
Z
 = 0;

287 
	`AIR_MOTION_Inô
(&
mŸi⁄_öô
);

290 
HÆMŸi⁄Sèã
 = 
HAL_MOTION_STATE_POWERING_ON
;

292  
TRUE
;

295  
FALSE
;

296 
	}
}

307 
	$HÆMŸi⁄DißbÀ
( )

310 
	`HÆGyroE«bÀI2CPassThru
();

311 
	`HÆAc˚lDißbÀ
();

312 
	`HÆGyroDißbÀ
();

315 
	`oßl_°›_timîEx
–
HÆ_TaskID
,

316 
HAL_MOTION_MEASUREMENT_START_EVENT
 );

319 
HÆMŸi⁄Sèã
 = 
HAL_MOTION_STATE_INIT
;

320 
	}
}

333 
	$HÆMŸi⁄Sèndby
( )

336 
	`oßl_°›_timîEx
–
HÆ_TaskID
,

337 
HAL_MOTION_MEASUREMENT_START_EVENT
 );

340 
	`HÆGyroE«bÀI2CPassThru
();

341 
	`HÆAc˚lMŸi⁄Dëe˘
–
HÆMŸi⁄E«bÀ
 );

344 
	`HÆGyroDißbÀ
();

347 
HÆMŸi⁄Sèã
 = 
HAL_MOTION_STATE_STANDBY
;

348 
	}
}

359 
	$HÆMŸi⁄ModifyAúMou£Resﬁuti⁄
–
hÆMŸi⁄Mou£Resﬁuti⁄_t
 
a˘i⁄
 )

361 i‡(
a˘i⁄
 =
HAL_MOTION_RESOLUTION_INCREASE
)

363 i‡(
HÆMŸi⁄Mou£GaöTabÀIndex
 < 
HAL_MOTION_MOUSE_GAIN_TABLE_SIZE
 - 1)

365 
HÆMŸi⁄Mou£GaöTabÀIndex
 += 1;

370 i‡(
HÆMŸi⁄Mou£GaöTabÀIndex
 > 0)

372 
HÆMŸi⁄Mou£GaöTabÀIndex
 -= 1;

377 
mŸi⁄_öô
.
DñèGaö
.
X
 = 
HÆMŸi⁄Mou£GaöTabÀ
[
HÆMŸi⁄Mou£GaöTabÀIndex
].
gaöX
;

378 
mŸi⁄_öô
.
DñèGaö
.
Y
 = 
HÆMŸi⁄Mou£GaöTabÀ
[
HÆMŸi⁄Mou£GaöTabÀIndex
].
gaöY
;

379 
mŸi⁄_öô
.
GyroOff£ts
.
X
 = 
HÆMŸi⁄GyroOff£ts
.
x
;

380 
mŸi⁄_öô
.
GyroOff£ts
.
Y
 = 
HÆMŸi⁄GyroOff£ts
.
y
;

381 
mŸi⁄_öô
.
GyroOff£ts
.
Z
 = 
HÆMŸi⁄GyroOff£ts
.
z
;

383 
	`AIR_MOTION_Inô
(&
mŸi⁄_öô
);

384 
	}
}

396 
uöt16
 
	$HÆMŸi⁄H™dÀOSEvít
–
uöt16
 
evíts
 )

398 
uöt16
 
πnVÆ
 = 0;

400 i‡(
evíts
 & 
HAL_MOTION_MEASUREMENT_START_EVENT
)

402 
	`HÆMŸi⁄H™dÀMósuªmítSèπEvít
();

403 
πnVÆ
 = 
HAL_MOTION_MEASUREMENT_START_EVENT
;

405 i‡(
evíts
 & 
HAL_MOTION_GYRO_POWERUP_DONE_EVENT
)

407 
	`HÆMŸi⁄H™dÀCÆPowîupD⁄eEvít
();

408 
πnVÆ
 = 
HAL_MOTION_GYRO_POWERUP_DONE_EVENT
;

410 i‡(
evíts
 & 
HAL_GYRO_ACTIVE_EVENT
)

412 
	`HÆMŸi⁄H™dÀGyroA˘iveEvít
();

413 
πnVÆ
 = 
HAL_GYRO_ACTIVE_EVENT
;

415 i‡(
evíts
 & 
HAL_MOTION_DETECTED_EVENT
)

417 
	`hÆAc˚lPro˚ssMŸi⁄Dëe˘Evít
();

418 
πnVÆ
 = 
HAL_MOTION_DETECTED_EVENT
;

421  
πnVÆ
;

422 
	}
}

434 
	$HÆMŸi⁄GyroRódy
( )

436 i‡(
HÆMŸi⁄Sèã
 =
HAL_MOTION_STATE_POWERING_ON
)

438 i‡(
HÆMŸi⁄CÆibøãGyro
 =
FALSE
)

440 
	`HÆGyroE«bÀI2CPassThru
();

441 
	`HÆAc˚lE«bÀ
();

444 
	`HÆGyroSèπGyroMósuªmíts
();

447 
	`oßl_°¨t_timîEx
–
HÆ_TaskID
,

448 
HAL_GYRO_ACTIVE_EVENT
,

451 
	}
}

462 
	$HÆMŸi⁄H™dÀGyroA˘iveEvít
( )

464 i‡(
HÆMŸi⁄Sèã
 =
HAL_MOTION_STATE_POWERING_ON
)

467 
	`oßl_°¨t_ªlﬂd_timî
–
HÆ_TaskID
,

468 
HAL_MOTION_MEASUREMENT_START_EVENT
,

469 
HAL_MOTION_TIME_BETWEEN_MEASUREMENTS
 );

471 i‡(
HÆMŸi⁄CÆibøãGyro
 =
FALSE
)

474 
HÆMŸi⁄Sèã
 = 
HAL_MOTION_STATE_WAITING_FOR_NEXT_MEASUREMENT
;

479 
mŸi⁄_öô
.
DñèGaö
.
X
 = 
HÆMŸi⁄Mou£GaöTabÀ
[
HÆMŸi⁄Mou£GaöTabÀIndex
].
gaöX
;

480 
mŸi⁄_öô
.
DñèGaö
.
Y
 = 
HÆMŸi⁄Mou£GaöTabÀ
[
HÆMŸi⁄Mou£GaöTabÀIndex
].
gaöY
;

481 
mŸi⁄_öô
.
GyroOff£ts
.
X
 = 
HÆMŸi⁄GyroOff£ts
.
x
;

482 
mŸi⁄_öô
.
GyroOff£ts
.
Y
 = 
HÆMŸi⁄GyroOff£ts
.
y
;

483 
mŸi⁄_öô
.
GyroOff£ts
.
Z
 = 
HÆMŸi⁄GyroOff£ts
.
z
;

484 
	`AIR_MOTION_Inô
(&
mŸi⁄_öô
);

487 
	}
}

499 
	$HÆMŸi⁄H™dÀCÆPowîupD⁄eEvít
( )

502 
	`HÆGyroE«bÀ
–
HÆMŸi⁄GyroRódy
 );

505 
HÆMŸi⁄CÆibøãGyro
 = 
TRUE
;

508 
HÆNbSam∂esCÆC¡
 = 
mŸi⁄_öô
.
SèticSam∂es
 * 2;

509 
	}
}

521 
	$HÆMŸi⁄H™dÀMósuªmítSèπEvít
( )

523 i‡(
HÆMŸi⁄Sèã
 =
HAL_MOTION_STATE_WAITING_FOR_NEXT_MEASUREMENT
)

525 
öt16
 
x
, 
y
, 
z
;

526 #i‡(
HAL_MOTION_ENABLE_ROLL_COMPENSATION
 =
TRUE
)

527 
öt8
 
ax
, 
ay
, 
az
;

531 
HÆMŸi⁄Sèã
 = 
HAL_MOTION_STATE_MEASURING
;

533 
	`HÆGyroRód
(&
x
, &
y
, &
z
 );

535 
ßm∂es
.
GyroSam∂es
.
X
 = 
x
;

536 
ßm∂es
.
GyroSam∂es
.
Y
 = -
y
;

537 
ßm∂es
.
GyroSam∂es
.
Z
 = 
z
;

540 #i‡(
HAL_MOTION_ENABLE_ROLL_COMPENSATION
 =
TRUE
)

541 
	`HÆGyroRódAc˚lD©a
–&
ax
, &
ay
, &
az
 );

542 
ßm∂es
.
AccSam∂es
.
X
 = 
ax
;

543 
ßm∂es
.
AccSam∂es
.
Y
 = 
ay
;

544 
ßm∂es
.
AccSam∂es
.
Z
 = -
az
;

548 
mŸi⁄_°©us
 = 
	`AIR_MOTION_Pro˚ssDñè
(
ßm∂es
);

551 
HÆMŸi⁄Sèã
 = 
HAL_MOTION_STATE_WAITING_FOR_NEXT_MEASUREMENT
;

553 i‡(
mŸi⁄_°©us
.
Sètus
.
IsDñèCompuãd
)

557 i‡(
pHÆMŸi⁄Pro˚ssFun˘i⁄
 !
NULL
)

559 
	`pHÆMŸi⁄Pro˚ssFun˘i⁄
–
mŸi⁄_°©us
.
Dñè
.
X
,

560 
mŸi⁄_°©us
.
Dñè
.
Y
 );

564 i‡(
HÆMŸi⁄CÆibøãGyro
 =
TRUE
 && 
HÆMŸi⁄Sèã
 =
HAL_MOTION_STATE_POWERING_ON
)

567 
öt16
 
x
, 
y
, 
z
;

568 #i‡(
HAL_MOTION_ENABLE_ROLL_COMPENSATION
 =
TRUE
)

569 
öt8
 
ax
, 
ay
, 
az
;

572 
HÆMŸi⁄Sèã
 = 
HAL_MOTION_STATE_MEASURING
;

574 
	`HÆGyroRód
–&
x
, &
y
, &
z
 );

576 
ßm∂es
.
GyroSam∂es
.
X
 = 
x
;

577 
ßm∂es
.
GyroSam∂es
.
Y
 = -
y
;

578 
ßm∂es
.
GyroSam∂es
.
Z
 = 
z
;

581 #i‡(
HAL_MOTION_ENABLE_ROLL_COMPENSATION
 =
TRUE
)

582 
	`HÆGyroRódAc˚lD©a
–&
ax
, &
ay
, &
az
 );

583 
ßm∂es
.
AccSam∂es
.
X
 = 
ax
;

584 
ßm∂es
.
AccSam∂es
.
Y
 = 
ay
;

585 
ßm∂es
.
AccSam∂es
.
Z
 = -
az
;

589 
mŸi⁄_°©us
 = 
	`AIR_MOTION_Pro˚ssDñè
(
ßm∂es
);

591 i‡(
mŸi⁄_°©us
.
Sètus
.
NewGyroOff£t
 =
åue
)

594 
HÆMŸi⁄GyroOff£ts
.
x
 = 
mŸi⁄_°©us
.
GyroOff£ts
.
X
;

595 
HÆMŸi⁄GyroOff£ts
.
y
 = 
mŸi⁄_°©us
.
GyroOff£ts
.
Y
;

596 
HÆMŸi⁄GyroOff£ts
.
z
 = 
mŸi⁄_°©us
.
GyroOff£ts
.
Z
;

599 (Ë
	`oßl_¢v_wrôe
–
HAL_MOTION_NV_ITEM_GYRO_OFFSETS_ID
,

600 –
HÆMŸi⁄GyroOff£ts
 ),

601 (
uöt8
 *)&
HÆMŸi⁄GyroOff£ts
 );

604 
	`HÆMŸi⁄DißbÀ
();

607 i‡(
pHÆMŸi⁄CÆCom∂ëeNŸifiˇti⁄Fun˘i⁄
 !
NULL
)

609 
	`pHÆMŸi⁄CÆCom∂ëeNŸifiˇti⁄Fun˘i⁄
();

612 i‡(
HÆNbSam∂esCÆC¡
 == 0)

615 i‡(
pHÆMŸi⁄CÆCom∂ëeNŸifiˇti⁄Fun˘i⁄
 !
NULL
)

618 
	`pHÆMŸi⁄CÆCom∂ëeNŸifiˇti⁄Fun˘i⁄
();

620 
	`HÆMŸi⁄DißbÀ
();

624 
HÆNbSam∂esCÆC¡
--;

626 
HÆMŸi⁄Sèã
 = 
HAL_MOTION_STATE_POWERING_ON
;

629 
	}
}

649 
	$HÆMŸi⁄I2cRód
–
hÆMŸi⁄Devi˚_t
 
devi˚
, 
uöt8
 
addr
, uöt8 
numByãs
, uöt8 *
pBuf
 )

651 
uöt8
 
loˇlAddr
 = 
addr
;

654 
	`HÆI2CWrôe
–
HÆMŸi⁄Devi˚AddªssTabÀ
[
devi˚
], 1, &
loˇlAddr
 );

657 
	`HÆI2CRód
–
HÆMŸi⁄Devi˚AddªssTabÀ
[
devi˚
], 
numByãs
, 
pBuf
 );

658 
	}
}

678 
	$HÆMŸi⁄I2cWrôe
–
hÆMŸi⁄Devi˚_t
 
devi˚
, 
uöt8
 
addr
, uöt8 *
pD©a
, uöt8 
numByãs
 )

680 
uöt8
 
HÆMŸi⁄I2CBuf
[20];

681 
uöt8
 
i
;

682 
uöt8
 *
pBuf
 = 
HÆMŸi⁄I2CBuf
;

685 *
pBuf
++ = 
addr
;

686 
i
 = 0; i < 
numByãs
; i++)

688 *
pBuf
++ = *
pD©a
++;

692 
	`HÆI2CWrôe
–
HÆMŸi⁄Devi˚AddªssTabÀ
[
devi˚
], 
numByãs
 + 1, 
HÆMŸi⁄I2CBuf
 );

693 
	}
}

	@../../../../Components/hal/target/CC2541ARC/hal_motion.h

41 #i‚de‡
HAL_MOTION_H


42 
	#HAL_MOTION_H


	)

44 #ifde‡
__˝lu•lus


53 
	~"comdef.h
"

65 (*
hÆMŸi⁄CBack_t
Ë(
	töt16
 
	tgyroMickeysX
, i¡16 
	tgyroMickeysY
);

66 (*
hÆMŸi⁄CÆCBack_t
) ();

70 
HAL_MOTION_RESOLUTION_DECREASE
,

71 
HAL_MOTION_RESOLUTION_INCREASE


73 
uöt8
 
	thÆMŸi⁄Mou£Resﬁuti⁄_t
;

77 
HAL_MOTION_DEVICE_GYRO
,

78 
HAL_MOTION_DEVICE_ACCELEROMETER


80 
uöt8
 
	thÆMŸi⁄Devi˚_t
;

102 
HÆMŸi⁄Inô
();

119 
HÆMŸi⁄C⁄fig
(
hÆMŸi⁄CBack_t
 
mósCback
);

136 
HÆMŸi⁄E«bÀ
();

148 
uöt8
 
HÆMŸi⁄CÆ
–
hÆMŸi⁄CÆCBack_t
 
ˇlCback
,

149 
uöt16
 
ˇlDuøti⁄
 );

166 
HÆMŸi⁄DißbÀ
();

179 
HÆMŸi⁄Sèndby
( );

190 
HÆMŸi⁄ModifyAúMou£Resﬁuti⁄
–
hÆMŸi⁄Mou£Resﬁuti⁄_t
 
a˘i⁄
 );

201 
uöt16
 
HÆMŸi⁄H™dÀOSEvít
–uöt16 
evíts
 );

215 
HÆMŸi⁄I2cRód
–
hÆMŸi⁄Devi˚_t
 
devi˚
, 
uöt8
 
addr
, uöt8 
numByãs
, uöt8 *
pBuf
 );

229 
HÆMŸi⁄I2cWrôe
–
hÆMŸi⁄Devi˚_t
 
devi˚
, 
uöt8
 
addr
, uöt8 *
pD©a
, uöt8 
numByãs
 );

231 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2541ARC/hal_sleep.c

43 
	~"hÆ_ty≥s.h
"

44 
	~"hÆ_mcu.h
"

45 
	~"hÆ_bﬂrd.h
"

46 
	~"hÆ_¶ìp.h
"

47 
	~"hÆ_Àd.h
"

48 
	~"hÆ_key.h
"

49 
	~"OSAL.h
"

50 
	~"OSAL_Timîs.h
"

51 
	~"OSAL_Tasks.h
"

52 
	~"OSAL_PwrMgr.h
"

53 
	~"hÆ_drivîs.h
"

54 
	~"hÆ_as£π.h
"

55 
	~"Œ_¶ìp.h
"

56 
	~"Œ_timî2.h
"

57 
	~"Œ_m©h.h
"

63 #i‚de‡
HAL_SLEEP_DEBUG_POWER_MODE


65 
	#HAL_SLEEP_PREP_POWER_MODE
(
mode
) \

66 
	`°
–
SLEEPCMD
 &~
PMODE
; \

67 
SLEEPCMD
 |
mode
; \

68 !(
STLOAD
 & 
LDRDY
)); \

69 
hÆSÀïPc⁄VÆue
 = 
PCON_IDLE
; \

70 )

	)

71 
	#HAL_SLEEP_SET_POWER_MODE
() \

72 
	`hÆSëSÀïMode
()

	)

77 
	#HAL_SLEEP_PREP_POWER_MODE
(
mode
Ë

	)

78 
	#HAL_SLEEP_SET_POWER_MODE
() \

79 
	`°
–
hÆSÀïI¡
 =
FALSE
); \

80 
hÆSÀïI¡
 = 
FALSE
; \

81 
	`HAL_DISABLE_INTERRUPTS
(); \

82 )

	)

86 
	#HAL_SLEEP_TIMER_ENABLE_INT
(Ë
	`°
(
IEN0
 |
STIE_BV
;)

87 
	#HAL_SLEEP_TIMER_DISABLE_INT
(Ë
	`°
(
IEN0
 &~
STIE_BV
;)

88 
	#HAL_SLEEP_TIMER_CLEAR_INT
(Ë
	`°
(
IRCON
 &= ~0x80;)

89 

	)

91 
	#HAL_SLEEP_IE_BACKUP_AND_DISABLE
–
õn0
, 
õn1
, 
õn2
 ) \

92 
	`°
–(
õn0
Ë
IEN0
; \

93 (
õn1
Ë
IEN1
; \

94 (
õn2
Ë
IEN2
; \

95 
IEN0
 &
STIE_BV
; \

96 
IEN1
 &
P0IE_BV
; \

97 
IEN2
 &(
P1IE_BV
|
P2IE_BV
); \

98 )

	)

101 
	#HAL_SLEEP_IE_RESTORE
–
õn0
, 
õn1
, 
õn2
 ) \

102 
	`°
–
IEN0
 = (
õn0
); \

103 
IEN1
 = (
õn1
); \

104 
IEN2
 = (
õn2
); \

105 )

	)

108 
	#HAL_SLEEP_MS_TO_625US
–
ms
 ) (((((
uöt32
Ë(ms)Ë* 8Ë+ 4Ë/ 5)

	)

112 
	#HAL_SLEEP_MS_TO_32KHZ
–
ms
 ) ((((
uöt32
Ë(ms)Ë* 4096Ë/ 125)

	)

115 
	#MAX_16BIT_TIMEOUT
 0xFFFF

	)

117 #i‡!
deföed
 
NOP


118 
	#NOP
(Ë
	`asm
("NOP")

	)

127 
	#CC2540_PM0
 0

128 
	#CC2540_PM1
 1

129 
	#CC2540_PM2
 2

130 
	#CC2540_PM3
 3

131 

	)

138 
	#HAL_SLEEP_OFF
 
CC2540_PM0


	)

139 
	#HAL_SLEEP_TIMER
 
CC2540_PM2


	)

140 
	#HAL_SLEEP_DEEP
 
CC2540_PM3


	)

145 
	#MAX_SLEEP_TIME
 16711680

146 

	)

150 #i‡!
deföed
 (
PM_MIN_SLEEP_TIME
)

151 
	#PM_MIN_SLEEP_TIME
 66

153 

	)

160 #i‡
deföed
–
CC2541
Ë|| deföed–
CC2541S
 )

161 
	#HAL_SLEEP_ADJ_TICKS
 25

162 #ñ£ // CC2540

	)

163 
	#HAL_SLEEP_ADJ_TICKS
 35

165 

	)

167 
	#STIE_BV
 
	`BV
(5)

	)

168 
	#P0IE_BV
 
	`BV
(5)

	)

169 
	#P1IE_BV
 
	`BV
(4)

	)

170 
	#P2IE_BV
 
	`BV
(1)

	)

173 #i‡
HAL_MCU_LITTLE_ENDIAN
()

174 
	#UINT32_NDX0
 0

	)

175 
	#UINT32_NDX1
 1

	)

176 
	#UINT32_NDX2
 2

	)

177 
	#UINT32_NDX3
 3

	)

179 
	#UINT32_NDX0
 3

	)

180 
	#UINT32_NDX1
 2

	)

181 
	#UINT32_NDX2
 1

	)

182 
	#UINT32_NDX3
 0

	)

194 
uöt8
 
	ghÆPwrMgtMode
 = 
HAL_SLEEP_OFF
;

197 
uöt8
 
	gwakeF‹RF
;

199 #ifde‡
HAL_SLEEP_DEBUG_POWER_MODE


200 
boﬁ
 
	ghÆSÀïI¡
 = 
FALSE
;

208 vﬁ©ûê
__d©a
 
uöt8
 
	ghÆSÀïPc⁄VÆue
 = 
PCON_IDLE
;

217 #¥agm®
loˇti⁄
 = "SLEEP_CODE"

218 
hÆSëSÀïMode
();

220 
hÆSÀïSëTimî
–
uöt32
 
¶ìpTime
, uöt32 
timeout
 );

221 
uöt32
 
hÆSÀïRódTimî
( );

222 
uöt32
 
TimîEœp£d
( );

242 #¥agm®
›timize
=
n⁄e


243 
	$hÆSëSÀïMode
()

246 
PCON
 = 
hÆSÀïPc⁄VÆue
;

248 
	`HAL_DISABLE_INTERRUPTS
();

249 
	}
}

268 
	$hÆSÀï
–
uöt32
 
oßl_timeout
 )

270 
uöt32
 
timeout
;

271 
uöt32
 
ŒTimeout
;

272 
uöt32
 
¶ìpTimî
;

274 
	`hÆDrivîBegPM
();

276 #ifde‡
DEBUG_GPIO


278 
P1_0
 = 1;

281 i‡(
oßl_timeout
 > 
MAX_16BIT_TIMEOUT
)

283 
oßl_timeout
 = 
MAX_16BIT_TIMEOUT
;

287 
	`LL_TimeToNextRfEvít
–&
¶ìpTimî
, &
ŒTimeout
 );

293 i‡(
oßl_timeout
 == 0)

296 
timeout
 = 
ŒTimeout
;

301 
wakeF‹RF
 = (
timeout
 !0Ë? 
TRUE
 : 
FALSE
;

307 
timeout
 = 
	`HAL_SLEEP_MS_TO_32KHZ
–
oßl_timeout
 );

310 i‡((
ŒTimeout
 !0Ë&& (ŒTimeouà< 
timeout
))

313 
timeout
 = 
ŒTimeout
;

316 
wakeF‹RF
 = 
TRUE
;

321 
¶ìpTimî
 = 
	`hÆSÀïRódTimî
();

324 
wakeF‹RF
 = 
FALSE
;

329 
hÆPwrMgtMode
 = (
timeout
 =0Ë? 
HAL_SLEEP_DEEP
 : 
HAL_SLEEP_TIMER
;

331 #ifde‡
DEBUG_GPIO


333 
P1_0
 = 0;

337 i‡–(
timeout
 > 
PM_MIN_SLEEP_TIME
) || (timeout == 0) )

339 
hÆI¡Sèã_t
 
õn0
, 
õn1
, 
õn2
;

341 #ifde‡
DEBUG_GPIO


343 
P1_0
 = 1;

346 
	`HAL_ASSERT
–
	`HAL_INTERRUPTS_ARE_ENABLED
() );

347 
	`HAL_DISABLE_INTERRUPTS
();

350 i‡–
	`LL_PowîOffReq
(
hÆPwrMgtMode
Ë=
LL_SLEEP_REQUEST_ALLOWED
 )

352 #i‡((
deföed
 
HAL_KEY
Ë&& (HAL_KEY =
TRUE
))

354 
	`HÆKeyE¡îSÀï
();

357 #ifde‡
HAL_SLEEP_DEBUG_LED


358 
	`HAL_TURN_OFF_LED3
();

361 
	`HÆLedE¡îSÀï
();

365 i‡(
timeout
 != 0)

368 i‡(
timeout
 > 
MAX_SLEEP_TIME
 )

371 
	`hÆSÀïSëTimî
–
¶ìpTimî
, 
MAX_SLEEP_TIME
 );

376 
	`hÆSÀïSëTimî
–
¶ìpTimî
, 
timeout
 );

381 
	`HAL_SLEEP_PREP_POWER_MODE
(
hÆPwrMgtMode
);

384 
	`HAL_SLEEP_IE_BACKUP_AND_DISABLE
(
õn0
, 
õn1
, 
õn2
);

385 
	`HAL_ENABLE_INTERRUPTS
();

387 #ifde‡
DEBUG_GPIO


389 
P1_0
 = 0;

397 
	`HAL_SLEEP_SET_POWER_MODE
();

399 #ifde‡
DEBUG_GPIO


401 
P1_0
 = 1;

414 i‡–(
wakeF‹RF
 =
TRUE
Ë&& !(
IRCON
 & 0x80) )

416 
wakeF‹RF
 = 
FALSE
;

420 
	`HAL_SLEEP_IE_RESTORE
(
õn0
, 
õn1
, 
õn2
);

425 
	`LL_PowîOnReq
–(
hÆPwrMgtMode
 =
CC2540_PM3
), 
wakeF‹RF
 );

427 #ifde‡
HAL_SLEEP_DEBUG_LED


428 
	`HAL_TURN_ON_LED3
();

431 
	`HÆLedExôSÀï
();

434 #i‡((
deföed
 
HAL_KEY
Ë&& (HAL_KEY =
TRUE
))

436 ()
	`HÆKeyExôSÀï
();

440 
	`HAL_ENABLE_INTERRUPTS
();

443 
	`hÆDrivîEndPM
();

445 #ifde‡
DEBUG_GPIO


447 
P1_0
 = 0;

451 
	}
}

479 
	$hÆSÀïSëTimî
–
uöt32
 
¶ìpTimî
, uöt32 
timeout
 )

481 
	`HAL_SLEEP_TIMER_DISABLE_INT
();

484 
¶ìpTimî
 +
timeout
;

487 
¶ìpTimî
 -
HAL_SLEEP_ADJ_TICKS
;

490 
ST2
 = ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX2
];

491 
ST1
 = ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX1
];

492 
ST0
 = ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX0
];

494 
	`HAL_SLEEP_TIMER_CLEAR_INT
();

495 
	`HAL_SLEEP_TIMER_ENABLE_INT
();

498 
	}
}

516 
uöt32
 
	$hÆSÀïRódTimî
( )

518 
uöt32
 
¶ìpTimî
;

522 ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX0
] = 
ST0
;

523 ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX1
] = 
ST1
;

524 ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX2
] = 
ST2
;

525 ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX3
] = 0;

527 –
¶ìpTimî
 );

528 
	}
}

546 
uöt32
 
	$TimîEœp£d
( )

549 
	}
}

567 
	$hÆRe°‹eSÀïLevñ
( )

570 #ifde‡
PM_TEST


571 
	`oßl_°¨t_timîEx
 (
HÆ_TaskID
, 
HAL_SLEEP_TIMER_EVENT
, 1000);

573 
	}
}

591 
	$HAL_ISR_FUNCTION
(
hÆSÀïTimîI§
, 
ST_VECTOR
)

593 
	`HAL_ENTER_ISR
();

595 
	`HAL_SLEEP_TIMER_CLEAR_INT
();

597 #ifde‡
HAL_SLEEP_DEBUG_POWER_MODE


598 
hÆSÀïI¡
 = 
TRUE
;

601 
	`CLEAR_SLEEP_MODE
();

603 
	`HAL_EXIT_ISR
();

606 
	}
}

627 #¥agm®
›timize
=
n⁄e


628 
	$hÆSÀïWaô
(
uöt16
 
duøti⁄
)

630 
duøti⁄
 >>= 1;

632 
duøti⁄
-- > 0)

634 
	`NOP
(); NOP(); NOP(); NOP(); NOP(); NOP(); NOP(); NOP(); NOP(); NOP(); NOP(); NOP();

635 
	`NOP
(); NOP(); NOP(); NOP(); NOP(); NOP(); NOP(); NOP(); NOP(); NOP(); NOP(); NOP();

637 
	}
}

	@../../../../Components/hal/target/CC2541ARC/hal_types.h

44 #i‚de‡
_HAL_TYPES_H


45 
	#_HAL_TYPES_H


	)

56 sig√d 
	töt8
;

57 
	tuöt8
;

59 sig√d 
	töt16
;

60 
	tuöt16
;

62 sig√d 
	töt32
;

63 
	tuöt32
;

65 
	tboﬁ
;

67 
uöt8
 
	thÆD©aAlign_t
;

76 #ifde‡
__IAR_SYSTEMS_ICC__


77 
	#CODE
 
__code


	)

78 
	#XDATA
 
__xd©a


	)

79 
	#DATA
 
__d©a


	)

80 
	#NEAR_FUNC
 
__√¨_func


	)

81 
	#ASM_NOP
 
	`asm
("NOP")

	)

84 #ñi‡
deföed
 
__KEIL__


85 
	#CODE
 
code


	)

86 
	#XDATA
 
xd©a


	)

87 
	#ASM_NOP
 
	`__n›
()

	)

90 #ñi‡
deföed
 
__GNUC__


91 
	#ASM_NOP
 
__asm__
 
	`__vﬁ©ûe__
 ("n›")

	)

94 #ñi‡
_MSC_VER


95 
	#ASM_NOP
 
__asm
 
NOP


	)

98 #ñi‡
deföed
 
__TI_COMPILER_VERSION


99 
	#ASM_NOP
 
	`asm
(" NOP")

	)

111 #i‚de‡
TRUE


112 
	#TRUE
 1

	)

115 #i‚de‡
FALSE


116 
	#FALSE
 0

	)

119 #i‚de‡
NULL


120 
	#NULL
 0

	)

	@../../../../Components/hal/target/CC2541ARC/stdbool.h

2 #i‚de‡
__STDBOOL_H


3 
	#__STDBOOL_H


	)

7 
	#åue
 1

	)

8 
	#Ál£
 0

	)

10 
	#__boﬁ_åue_Ál£_¨e_deföed
 1

	)

12 
	#boﬁ
 

	)

	@../../../../Components/hal/target/CC2541ARC/stdint.h

2 #i‚de‡
__STDINT_H


3 
	#__STDINT_H


	)

7 sig√d 
	töt8_t
;

8 
	tuöt8_t
;

11 sig√d 
	töt16_t
;

12 
	tuöt16_t
;

15 sig√d 
	töt32_t
;

16 
	tuöt32_t
;

	@../../../../Components/hal/target/CC2541ST/hal_acc.c

45 
	~"hÆ_acc.h
"

46 
	~"hÆ_£ns‹.h
"

47 
	~"hÆ_i2c.h
"

48 
	~"hÆ_bﬂrd_cfg.h
"

55 
	#HAL_KXTI9_I2C_ADDRESS
 0x0F

	)

58 
	#ACC_REG_ADDR_XOUT_HPF_L
 0x00

59 
	#ACC_REG_ADDR_XOUT_HPF_H
 0x01

60 
	#ACC_REG_ADDR_YOUT_HPF_L
 0x02

61 
	#ACC_REG_ADDR_YOUT_HPF_H
 0x03

62 
	#ACC_REG_ADDR_ZOUT_HPF_L
 0x04

63 
	#ACC_REG_ADDR_ZOUT_HPF_H
 0x05

64 
	#ACC_REG_ADDR_XOUT_L
 0x06

65 
	#ACC_REG_ADDR_XOUT_H
 0x07

66 
	#ACC_REG_ADDR_YOUT_L
 0x08

67 
	#ACC_REG_ADDR_YOUT_H
 0x09

68 
	#ACC_REG_ADDR_ZOUT_L
 0x0A

69 
	#ACC_REG_ADDR_ZOUT_H
 0x0B

70 
	#ACC_REG_ADDR_DCST_RESP
 0x0C

71 
	#ACC_REG_ADDR_WHO_AM_I
 0x0F

72 
	#ACC_REG_ADDR_TILT_POS_CUR
 0x10

73 
	#ACC_REG_ADDR_TILT_POS_PRE
 0x11

74 

	)

75 
	#ACC_REG_ADDR_INT_SRC_REG1
 0x15

76 
	#ACC_REG_ADDR_INT_SRC_REG2
 0x16

77 
	#ACC_REG_ADDR_STATUS_REG
 0x18

78 
	#ACC_REG_ADDR_INT_REL
 0x1A

79 

	)

80 
	#ACC_REG_ADDR_CTRL_REG1
 0x1B

81 
	#ACC_REG_ADDR_CTRL_REG2
 0x1C

82 
	#ACC_REG_ADDR_CTRL_REG3
 0x1D

83 

	)

84 
	#ACC_REG_ADDR_INT_CTRL_REG1
 0x1E

85 
	#ACC_REG_ADDR_INT_CTRL_REG2
 0x1F

86 
	#ACC_REG_ADDR_INT_CTRL_REG3
 0x20

87 
	#ACC_REG_ADDR_DATA_CTRL_REG
 0x21

88 

	)

89 
	#ACC_REG_ADDR_TILT_TIMER
 0x28

90 
	#ACC_REG_ADDR_WUF_TIMER
 0x29

91 
	#ACC_REG_ADDR_TDT_TIMER
 0x2B

92 
	#ACC_REG_ADDR_TDT_H_THRESH
 0x2C

93 
	#ACC_REG_ADDR_TDT_L_THRESH
 0x2D

94 
	#ACC_REG_ADDR_TDT_TAP_TIMER
 0x2E

95 
	#ACC_REG_ADDR_TDT_TOTAL_TIMER
 0x2F

96 
	#ACC_REG_ADDR_TDT_LATENCY_TIMER
 0x30

97 
	#ACC_REG_ADDR_TDT_WINDOW_TIMER
 0x31

98 

	)

99 
	#ACC_REG_ADDR_BUF_CTRL1
 0x32

100 
	#ACC_REG_ADDR_BUF_CTRL2
 0x33

101 
	#ACC_REG_ADDR_BUF_STATUS_REG1
 0x34

102 
	#ACC_REG_ADDR_BUF_STATUS_REG2
 0x35

103 
	#ACC_REG_ADDR_BUF_CLEAR
 0x36

104 

	)

105 
	#ACC_REG_ADDR_SELF_TEST
 0x3A

106 

	)

107 
	#ACC_REG_ADDR_WUF_THRESH
 0x5A

108 
	#ACC_REG_ADDR_TILT_ANGLE
 0x5C

109 
	#ACC_REG_ADDR_HYST_SET
 0x5F

110 
	#ACC_REG_ADDR_BUF_READ
 0x7F

111 

	)

113 
	#REG_VAL_WHO_AM_I
 0x08

114 

	)

116 
	#ACC_REG_CTRL_PC
 0x80

117 
	#ACC_REG_CTRL_RES
 0x40

118 
	#ACC_REG_CTRL_DRDYE
 0x20

119 
	#ACC_REG_CTRL_GSEL_HI
 0x10

120 
	#ACC_REG_CTRL_GSEL_LO
 0x08

121 
	#ACC_REG_CTRL_GSEL_TDTE
 0x04

122 
	#ACC_REG_CTRL_GSEL_WUFE
 0x02

123 
	#ACC_REG_CTRL_GSEL_TPE
 0x01

124 

	)

126 
	#ACC_REG_CTRL_ON_2G
 ( 
ACC_REG_CTRL_PC
 )

	)

127 
	#ACC_REG_CTRL_OFF_2G
 ( 0 )

	)

130 
	#ACC_REG_CTRL_ON_4G
 ( 
ACC_REG_CTRL_PC
 | 
ACC_REG_CTRL_GSEL_LO
)

	)

131 
	#ACC_REG_CTRL_OFF_4G
 ( 
ACC_REG_CTRL_GSEL_LO
 )

	)

134 
	#ACC_REG_CTRL_ON_8G
 ( 
ACC_REG_CTRL_PC
 | 
ACC_REG_CTRL_GSEL_HI
)

	)

135 
	#ACC_REG_CTRL_OFF_8G
 ( 
ACC_REG_CTRL_GSEL_HI
)

	)

151 
HÆAccSñe˘
();

157 
uöt8
 
	gaccSís‹C⁄fig
;

158 
uöt8
 
	gaccSís‹Off
;

159 
uöt8
 
	gaccR™ge
;

168 
	$HÆAccInô
()

170 
	`HÆAccSëR™ge
(
HAL_ACC_RANGE_8G
);

171 
	}
}

182 
	$HÆAccSëR™ge
(
uöt8
 
ønge
)

184 
accR™ge
 = 
ønge
;

186 
accR™ge
)

188 
HAL_ACC_RANGE_2G
:

189 
accSís‹C⁄fig
 = 
ACC_REG_CTRL_ON_2G
;

190 
accSís‹Off
 = 
ACC_REG_CTRL_OFF_2G
;

192 
HAL_ACC_RANGE_4G
:

193 
accSís‹C⁄fig
 = 
ACC_REG_CTRL_ON_4G
;

194 
accSís‹Off
 = 
ACC_REG_CTRL_OFF_4G
;

196 
HAL_ACC_RANGE_8G
:

197 
accSís‹C⁄fig
 = 
ACC_REG_CTRL_ON_8G
;

198 
accSís‹Off
 = 
ACC_REG_CTRL_OFF_8G
;

204 
	}
}

213 
boﬁ
 
	$HÆAccRód
(
uöt8
 *
pBuf
 )

215 
uöt8
 
x
;

216 
uöt8
 
y
;

217 
uöt8
 
z
;

218 
boﬁ
 
suc˚ss
;

221 
	`HÆAccSñe˘
();

224 
	`HÆSís‹WrôeReg
(
ACC_REG_ADDR_CTRL_REG1
, &
accSís‹C⁄fig
, (accSensorConfig));

227 
	`ST_HAL_DELAY
(180);

230 
suc˚ss
 = 
	`HÆSís‹RódReg
–
ACC_REG_ADDR_XOUT_H
, &
x
, (x));

231 i‡(
suc˚ss
)

233 
suc˚ss
 = 
	`HÆSís‹RódReg
–
ACC_REG_ADDR_YOUT_H
, &
y
, (y));

234 i‡(
suc˚ss
)

236 
suc˚ss
 = 
	`HÆSís‹RódReg
–
ACC_REG_ADDR_ZOUT_H
, &
z
, (z));

240 i‡(
suc˚ss
)

243 
pBuf
[0] = 
x
;

244 
pBuf
[1] = 
y
;

245 
pBuf
[2] = 
z
;

249 
	`HÆSís‹WrôeReg
(
ACC_REG_ADDR_CTRL_REG1
, &
accSís‹Off
, (accSensorOff));

251  
suc˚ss
;

252 
	}
}

262 
boﬁ
 
	$HÆAccTe°
()

264 
uöt8
 
vÆ
;

267 
	`HÆAccSñe˘
();

270 
	`ST_ASSERT
(
	`HÆSís‹RódReg
(
ACC_REG_ADDR_DCST_RESP
, &
vÆ
, 1));

271 
	`ST_ASSERT
(
vÆ
==0x55);

274 
vÆ
 = 0x10;

275 
	`ST_ASSERT
(
	`HÆSís‹WrôeReg
(
ACC_REG_ADDR_CTRL_REG3
, &
vÆ
, 1));

276 
	`ST_ASSERT
(
	`HÆSís‹RódReg
(
ACC_REG_ADDR_DCST_RESP
, &
vÆ
, 1));

277 
	`ST_ASSERT
(
vÆ
==0xAA);

280 
	`ST_ASSERT
(
	`HÆSís‹RódReg
(
ACC_REG_ADDR_WHO_AM_I
, &
vÆ
, 1));

281 
	`ST_ASSERT
(
vÆ
==
REG_VAL_WHO_AM_I
);

283  
TRUE
;

284 
	}
}

298 
	$HÆAccSñe˘
()

301 
	`HÆI2CInô
(
HAL_KXTI9_I2C_ADDRESS
,
i2cClock_267KHZ
);

302 
	}
}

	@../../../../Components/hal/target/CC2541ST/hal_acc.h

39 #i‚de‡
HAL_ACC_H


40 
	#HAL_ACC_H


	)

42 #ifde‡
__˝lu•lus


51 
	~"comdef.h
"

57 
	#HAL_ACC_RANGE_8G
 1

	)

58 
	#HAL_ACC_RANGE_4G
 2

	)

59 
	#HAL_ACC_RANGE_2G
 3

	)

71 
HÆAccInô
();

72 
boﬁ
 
HÆAccRód
(
uöt8
 *
pBuf
);

73 
boﬁ
 
HÆAccTe°
();

74 
HÆAccSëR™ge
(
uöt8
 
ønge
);

80 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2541ST/hal_aes.c

42 
	~"oßl.h
"

43 
	~"hÆ_´s.h
"

44 
	~"hÆ_dma.h
"

66 (*
pS•AesEn¸y±
)–
uöt8
 *, uöt8 * ) = (*)
NULL
;

71 
	`´sDmaInô
( );

73 #i‡((
deföed
 
HAL_DMA
Ë&& (HAL_DMA =
TRUE
))

85 
	$´sDmaInô
( )

87 
hÆDMADesc_t
 *
ch
;

90 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_IN
 );

91 
	`HAL_DMA_SET_DEST
–
ch
, 
HAL_AES_IN_ADDR
 );

92 
	`HAL_DMA_SET_VLEN
–
ch
, 
HAL_DMA_VLEN_USE_LEN
 );

93 
	`HAL_DMA_SET_WORD_SIZE
–
ch
, 
HAL_DMA_WORDSIZE_BYTE
 );

94 
	`HAL_DMA_SET_TRIG_MODE
–
ch
, 
HAL_DMA_TMODE_SINGLE
 );

95 
	`HAL_DMA_SET_TRIG_SRC
–
ch
, 
HAL_DMA_TRIG_ENC_DW
 );

96 
	`HAL_DMA_SET_SRC_INC
–
ch
, 
HAL_DMA_SRCINC_1
 );

97 
	`HAL_DMA_SET_DST_INC
–
ch
, 
HAL_DMA_DSTINC_0
 );

98 
	`HAL_DMA_SET_IRQ
–
ch
, 
HAL_DMA_IRQMASK_DISABLE
 );

99 
	`HAL_DMA_SET_M8
–
ch
, 
HAL_DMA_M8_USE_8_BITS
 );

100 
	`HAL_DMA_SET_PRIORITY
–
ch
, 
HAL_DMA_PRI_HIGH
 );

103 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_OUT
 );

104 
	`HAL_DMA_SET_SOURCE
–
ch
, 
HAL_AES_OUT_ADDR
 );

105 
	`HAL_DMA_SET_VLEN
–
ch
, 
HAL_DMA_VLEN_USE_LEN
 );

106 
	`HAL_DMA_SET_WORD_SIZE
–
ch
, 
HAL_DMA_WORDSIZE_BYTE
 );

107 
	`HAL_DMA_SET_TRIG_MODE
–
ch
, 
HAL_DMA_TMODE_SINGLE
 );

108 
	`HAL_DMA_SET_TRIG_SRC
–
ch
, 
HAL_DMA_TRIG_ENC_UP
 );

109 
	`HAL_DMA_SET_SRC_INC
–
ch
, 
HAL_DMA_SRCINC_0
 );

110 
	`HAL_DMA_SET_DST_INC
–
ch
, 
HAL_DMA_DSTINC_1
 );

111 
	`HAL_DMA_SET_IRQ
–
ch
, 
HAL_DMA_IRQMASK_DISABLE
 );

112 
	`HAL_DMA_SET_M8
–
ch
, 
HAL_DMA_M8_USE_8_BITS
 );

113 
	`HAL_DMA_SET_PRIORITY
–
ch
, 
HAL_DMA_PRI_HIGH
 );

114 
	}
}

117 #i‡(!
deföed
 
HAL_AES_DMA
Ë|| (HAL_AES_DMA =
FALSE
)

129 
	$AesLﬂdBlock
–
uöt8
 *
±r
 )

131 
uöt8
 
i
;

134 
	`AES_START
();

137 
i
 = 0; i < 
STATE_BLENGTH
; i++)

139 
ENCDI
 = *
±r
++;

141 
	}
}

155 
	$AesSèπBlock
–
uöt8
 *
out
, uöt8 *
ö
 )

157 
uöt8
 
i
;

160 
	`AES_START
();

163 
i
 = 0; i < 
STATE_BLENGTH
; i++)

165 
ENCDI
 = *
ö
++;

169 
	`HAL_AES_DELAY
();

172 
i
 = 0; i < 
STATE_BLENGTH
; i++)

174 *
out
++ = 
ENCDO
;

176 
	}
}

192 
	$AesSèπSh‹tBlock
–
uöt8
 *
out
, uöt8 *
ö
 )

194 
uöt8
 
i
, 
j
;

196 
	`AES_START
();

197 
i
 = 0; i < 4; i++)

200 
j
 = 0; j < 4; j++)

202 
ENCDI
 = *
ö
++;

206 
	`HAL_AES_DELAY
();

209 
j
 = 0; j < 4; j++)

211 *
out
++ = 
ENCDO
;

214 
	}
}

228 
	$AesLﬂdIV
–
uöt8
 *
IV
 )

230 #i‡(
deföed
 
HAL_AES_DMA
Ë&& (HAL_AES_DMA =
TRUE
)

231 
hÆDMADesc_t
 *
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_IN
 );

234 
	`HAL_DMA_SET_SOURCE
–
ch
, 
IV
 );

235 
	`HAL_DMA_SET_LEN
–
ch
, 
STATE_BLENGTH
 );

238 
	`HAL_DMA_CLEAR_IRQ
–
HAL_DMA_AES_IN
 );

239 
	`HAL_DMA_ARM_CH
–
HAL_DMA_AES_IN
 );

241 
	`asm
("NOP");

242 } !
	`HAL_DMA_CH_ARMED
(
HAL_DMA_AES_IN
));

245 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_LOAD_IV
 );

248 
	`AES_START
();

249  !(
ENCCS
 & 0x08) );

252 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_LOAD_IV
 );

255 
	`AesLﬂdBlock
–
IV
 );

257 
	}
}

270 
	$AesLﬂdKey
–
uöt8
 *
AesKey
 )

272 #i‡(
deföed
 
HAL_AES_DMA
Ë&& (HAL_AES_DMA =
TRUE
)

273 
hÆDMADesc_t
 *
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_IN
 );

276 
	`HAL_DMA_SET_SOURCE
–
ch
, 
AesKey
 );

277 
	`HAL_DMA_SET_LEN
–
ch
, 
KEY_BLENGTH
 );

280 
	`HAL_DMA_CLEAR_IRQ
–
HAL_DMA_AES_IN
 );

281 
	`HAL_DMA_ARM_CH
–
HAL_DMA_AES_IN
 );

283 
	`asm
("NOP");

284 } !
	`HAL_DMA_CH_ARMED
(
HAL_DMA_AES_IN
));

287 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_LOAD_KEY
 );

290 
	`AES_START
();

291  !(
ENCCS
 & 0x08) );

294 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_LOAD_KEY
 );

297 
	`AesLﬂdBlock
–
AesKey
 );

299 
	}
}

301 #i‡(
deföed
 
HAL_AES_DMA
Ë&& (HAL_AES_DMA =
TRUE
)

321 
	$AesDmaSëup
–
uöt8
 *
C°©e
, 
uöt16
 
msg_out_Àn
, uöt8 *
msg_ö
, uöt16 
msg_ö_Àn
 )

323 
hÆDMADesc_t
 *
ch
;

326 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_IN
 );

327 
	`HAL_DMA_SET_SOURCE
–
ch
, 
msg_ö
 );

328 
	`HAL_DMA_SET_LEN
–
ch
, 
msg_ö_Àn
 );

331 
ch
 = 
	`HAL_DMA_GET_DESC1234
–
HAL_DMA_AES_OUT
 );

332 
	`HAL_DMA_SET_DEST
–
ch
, 
C°©e
 );

333 
	`HAL_DMA_SET_LEN
–
ch
, 
msg_out_Àn
 );

336 
	`HAL_DMA_CLEAR_IRQ
–
HAL_DMA_AES_IN
 );

337 
	`HAL_DMA_ARM_CH
–
HAL_DMA_AES_IN
 );

339 
	`asm
("NOP");

340 } !
	`HAL_DMA_CH_ARMED
(
HAL_DMA_AES_IN
));

341 
	`HAL_DMA_CLEAR_IRQ
–
HAL_DMA_AES_OUT
 );

342 
	`HAL_DMA_ARM_CH
–
HAL_DMA_AES_OUT
 );

344 
	`asm
("NOP");

345 } !
	`HAL_DMA_CH_ARMED
(
HAL_DMA_AES_OUT
));

346 
	}
}

360 
	$HÆAesInô
( )

362 #i‡(
deföed
 
HAL_AES_DMA
Ë&& (HAL_AES_DMA =
TRUE
)

364 
	`´sDmaInô
();

366 
	}
}

379 
	$s•_HW_KeyInô
–
uöt8
 *
AesKey
 )

381 
	`AES_SETMODE
(
ECB
);

382 
	`AesLﬂdKey
–
AesKey
 );

383 
	}
}

402 
	$s•AesEn¸y±HW
–
uöt8
 *
AesKey
, uöt8 *
C°©e
 )

404 ()
AesKey
;

406 #i‡(
deföed
 
HAL_AES_DMA
Ë&& (HAL_AES_DMA =
TRUE
)

408 
	`AesDmaSëup
–
C°©e
, 
STATE_BLENGTH
, Cstate, STATE_BLENGTH );

409 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_ENCRYPT
 );

412 
	`AES_START
();

413  !
	`HAL_DMA_CHECK_IRQ
–
HAL_DMA_AES_OUT
 ) );

416 
	`AES_SETMODE
(
ECB
);

417 
	`AES_SET_ENCR_DECR_KEY_IV
–
AES_ENCRYPT
 );

420 
	`AesSèπBlock
–
C°©e
, Cstate );

422 
	}
}

	@../../../../Components/hal/target/CC2541ST/hal_aes.h

39 #i‚de‡
HAL_AES_H_


40 
	#HAL_AES_H_


	)

42 
	~"hÆ_ty≥s.h
"

44 
	#STATE_BLENGTH
 16

45 
	#KEY_BLENGTH
 16

46 
	#KEY_EXP_LENGTH
 176

47 

	)

52 #i‡((
deföed
 
SOFTWARE_AES
Ë&& (SOFTWARE_AES =
TRUE
)Ë&& ((deföed 
SW_AES_AND_KEY_EXP
) && (SW_AES_AND_KEY_EXP == TRUE))

56 
HÆAesInô
( );

57 
AesLﬂdBlock
–
uöt8
 * );

58 
AesSèπBlock
–
uöt8
 *, uint8 * );

59 
AesSèπSh‹tBlock
–
uöt8
 *, uint8 * );

60 
AesLﬂdIV
(
uöt8
 *);

61 
AesDmaSëup
–
uöt8
 *, 
uöt16
, uint8 *, uint16 );

62 
AesLﬂdKey
–
uöt8
 * );

64 (*
pS•AesEn¸y±
)–
uöt8
 *, uint8 * );

65 
	`s•_HW_KeyInô
 (
uöt8
 *);

66 
	`s•KeyEx∑nsi⁄
 (
uöt8
 *, uint8 *);

68 
	`s•AesEn¸y±HW
 (
uöt8
 *, uint8 *);

69 
	`s•AesEn¸y±KeyExp
 (
uöt8
 *, uint8 *);

70 
	`s•AesEn¸y±Basic
 (
uöt8
 *, uint8 *);

72 
	`s•AesDe¸y±HW
–
uöt8
 *, uint8 * );

73 
	`s•AesDe¸y±
–
uöt8
 *
key
, uöt8 *
buf
 );

76 
	#AES_BUSY
 0x08

	)

77 
	#ENCRYPT
 0x00

	)

78 
	#DECRYPT
 0x01

	)

81 
	#AES_SETMODE
(
mode
) \

83 
ENCCS
 = (ENCCS & ~0x70Ë| (
mode
); \

84 
	}
} 0)

	)

87 
	#CBC
 0x00

	)

88 
	#CFB
 0x10

	)

89 
	#OFB
 0x20

	)

90 
	#CTR
 0x30

	)

91 
	#ECB
 0x40

	)

92 
	#CBC_MAC
 0x50

	)

95 
	#AES_SET_ENCR_DECR_KEY_IV
(
cmd
) \

97 
ENCCS
 = (ENCCS & ~0x07Ë| (
cmd
); \

98 } 0)

	)

101 
	#AES_ENCRYPT
 0x00

	)

102 
	#AES_DECRYPT
 0x02

	)

103 
	#AES_LOAD_KEY
 0x04

	)

104 
	#AES_LOAD_IV
 0x06

	)

108 
	#AES_START
(Ë
ENCCS
 |0x01

	)

111 
	#HAL_DMA_AES_IN
 1

	)

112 
	#HAL_DMA_AES_OUT
 2

	)

115 
	#HAL_AES_IN_ADDR
 0x70B1

	)

116 
	#HAL_AES_OUT_ADDR
 0x70B2

	)

118 #i‡!
deföed
 (
HAL_AES_DMA
Ë|| (HAL_AES_DMA =
FALSE
)

119 
	#HAL_AES_DELAY
() \

121 vﬁ©ûê
uöt8
 
dñay
 = 15; \

122 
dñay
--); \

123 } 0)

	)

	@../../../../Components/hal/target/CC2541ST/hal_assert.c

45 
	~"hÆ_as£π.h
"

46 
	~"hÆ_ty≥s.h
"

47 
	~"hÆ_bﬂrd.h
"

48 
	~"hÆ_defs.h
"

49 
	~"hÆ_mcu.h
"

55 #ifde‡
HAL_LED_BLINK_DELAY


56 #unde‡
HAL_LED_BLINK_DELAY


59 
	#HAL_LED_BLINK_DELAY
(Ë
	`°
–{ vﬁ©ûê
uöt32
 
i
; i=0; i<0x1450; i++) { }; } )

60 

	)

65 
hÆAs£πHaz¨dLights
();

78 
	$hÆAs£πH™dÀr
()

81 #ifde‡
ASSERT_RESET


82 
	`HAL_SYSTEM_RESET
();

83 #ñi‡!
deföed
 
ASSERT_WHILE


84 
	`hÆAs£πHaz¨dLights
();

88 
	}
}

90 #i‡!
deföed
 
ASSERT_WHILE


101 
	$hÆAs£πHaz¨dLights
()

105 
	`HAL_DISABLE_INTERRUPTS
();

112 
	`HAL_LED_BLINK_DELAY
();

115 
	`HAL_TOGGLE_LED1
();

116 
	`HAL_TOGGLE_LED2
();

118 
	}
}

127 
HAL_ASSERT_SIZE
–
öt8
, 1);

128 
HAL_ASSERT_SIZE
–
uöt8
, 1);

129 
HAL_ASSERT_SIZE
–
öt16
, 2);

130 
HAL_ASSERT_SIZE
(
uöt16
, 2);

131 
HAL_ASSERT_SIZE
–
öt32
, 4);

132 
HAL_ASSERT_SIZE
(
uöt32
, 4);

	@../../../../Components/hal/target/CC2541ST/hal_bar.c

44 
	~"hÆ_b¨.h
"

45 
	~"hÆ_£ns‹.h
"

46 
	~"hÆ_i2c.h
"

53 
	#HAL_C953_I2C_ADDRESS
 0x77

	)

56 
	#C953_DATA_LEN
 2

	)

57 
	#C953_CAL_LEN
 16

	)

60 
	#C953_REG_ADDR_IFACE_SETTINGS
 0x87

61 
	#C953_REG_ADDR_I2C_SLAVE
 0x88

62 
	#C953_REG_ADDR_RESET
 0xF0

63 
	#C953_REG_ADDR_COMMAND
 0xF1

64 
	#C953_REG_ADDR_TEMP_LSB
 0xF3

65 
	#C953_REG_ADDR_TEMP_MSB
 0xF4

66 
	#C953_REG_ADDR_PRESS_LSB
 0xF5

67 
	#C953_REG_ADDR_PRESS_MSB
 0xF6

68 

	)

70 
	#C953_REG_CALIBRATION_1_LSB
 0x8E

	)

71 
	#C953_REG_CALIBRATION_1_MSB
 0x8F

	)

72 
	#C953_REG_CALIBRATION_2_LSB
 0x90

	)

73 
	#C953_REG_CALIBRATION_2_MSB
 0x91

	)

74 
	#C953_REG_CALIBRATION_3_LSB
 0x92

	)

75 
	#C953_REG_CALIBRATION_3_MSB
 0x93

	)

76 
	#C953_REG_CALIBRATION_4_LSB
 0x94

	)

77 
	#C953_REG_CALIBRATION_4_MSB
 0x95

	)

78 
	#C953_REG_CALIBRATION_5_LSB
 0x96

	)

79 
	#C953_REG_CALIBRATION_5_MSB
 0x97

	)

80 
	#C953_REG_CALIBRATION_6_LSB
 0x98

	)

81 
	#C953_REG_CALIBRATION_6_MSB
 0x99

	)

82 
	#C953_REG_CALIBRATION_7_LSB
 0x9A

	)

83 
	#C953_REG_CALIBRATION_7_MSB
 0x9B

	)

84 
	#C953_REG_CALIBRATION_8_LSB
 0x9C

	)

85 
	#C953_REG_CALIBRATION_8_MSB
 0x9D

	)

88 
	#C953_LOW_RES_LOW
 0x00

89 
	#C953_LOW_RES_STANDARD
 0x08

90 
	#C953_LOW_RES_HIGH
 0x10

91 
	#C953_LOW_RES_ULTRA_HIGH
 0x18

92 

	)

94 
	#C953_PRESSURE_ONLY
 0x00

95 
	#C953_TEMPERATURE_ONLY
 0x02

96 

	)

98 
	#C953_TEMP_READ_COMMAND
 ( 
C953_TEMPERATURE_ONLY
 | 
C953_LOW_RES_LOW
 | 0x01 )

	)

99 
	#C953_PRESS_READ_COMMAND
 ( 
C953_PRESSURE_ONLY
 | 
C953_LOW_RES_LOW
 | 0x01 )

	)

100 
	#C953_OFF_COMMAND
 0x00

	)

101 
	#C953_RESET_COMMAND
 0x73

	)

102 
	#C953_TEST_COMMAND
 0x1E

103 

	)

113 
HÆB¨Sñe˘
();

119 
uöt8
 
	gb¨D©a
[4];

120 
uöt8
 
	gb¨Cmd
 = 
C953_TEMP_READ_COMMAND
;

121 
boﬁ
 
	gfCmdOk
;

130 
	$HÆB¨Inô
()

132 
uöt8
 
vÆ
 = 
C953_OFF_COMMAND
;

134 
	`HÆB¨Sñe˘
();

135 
	`HÆSís‹WrôeReg
(
C953_REG_ADDR_COMMAND
, &
vÆ
, (val));

136 
b¨Cmd
 = 
C953_TEMP_READ_COMMAND
;

137 
	}
}

147 
	$HÆB¨SèπMósuªmít
()

149 
	`HÆB¨Sñe˘
();

150 
fCmdOk
 = 
	`HÆSís‹WrôeReg
(
C953_REG_ADDR_COMMAND
, &
b¨Cmd
, (barCmd));

151 
	}
}

163 
boﬁ
 
	$HÆB¨RódMósuªmít
(
uöt8
 *
pBuf
)

165 
boﬁ
 
suc˚ss
;

166 
uöt8
 
dOff£t
 = 0;

168 i‡(!
fCmdOk
)

170  
FALSE
;

173 
	`HÆB¨Sñe˘
();

175 i‡(
b¨Cmd
==
C953_PRESS_READ_COMMAND
)

177 
dOff£t
 = 2;

180 
suc˚ss
 = 
	`HÆSís‹RódReg
–
C953_REG_ADDR_PRESS_LSB
, &
b¨D©a
[
dOff£t
], 
C953_DATA_LEN
 );

181 i‡(
suc˚ss
)

183 
pBuf
[0] = 
b¨D©a
[0];

184 
pBuf
[1] = 
b¨D©a
[1];

185 
pBuf
[2] = 
b¨D©a
[2];

186 
pBuf
[3] = 
b¨D©a
[3];

189 i‡(
b¨Cmd
==
C953_PRESS_READ_COMMAND
)

191 
b¨Cmd
 = 
C953_TEMP_READ_COMMAND
;

194 
b¨Cmd
 = 
C953_PRESS_READ_COMMAND
;

198  
suc˚ss
;

199 
	}
}

211 
	$HÆB¨RódCÆibøti⁄
(
uöt8
 *
pBuf
)

213 
	`HÆB¨Sñe˘
();

214 
	`HÆSís‹RódReg
(
C953_REG_CALIBRATION_1_LSB
, 
pBuf
, 
C953_CAL_LEN
);

215 
	}
}

225 
boﬁ
 
	$HÆB¨Te°
()

227 
uöt8
 
vÆ
;

230 
	`HÆB¨Sñe˘
();

233 
	`ST_ASSERT
(
	`HÆSís‹RódReg
(
C953_REG_ADDR_I2C_SLAVE
, &
vÆ
, (val)));

234 
	`ST_ASSERT
(
vÆ
==
HAL_C953_I2C_ADDRESS
);

237 
vÆ
 = 
C953_TEST_COMMAND
;

238 
	`ST_ASSERT
(
	`HÆSís‹WrôeReg
(
C953_REG_ADDR_COMMAND
, &
vÆ
, (val)));

239 
	`ST_ASSERT
(
	`HÆSís‹RódReg
(
C953_REG_ADDR_COMMAND
, &
vÆ
, (val)));

240 
	`ST_ASSERT
(
vÆ
==
C953_TEST_COMMAND
);

243 
vÆ
 = 
C953_OFF_COMMAND
;

244 
	`ST_ASSERT
(
	`HÆSís‹WrôeReg
(
C953_REG_ADDR_COMMAND
, &
vÆ
, (val)));

246  
TRUE
;

247 
	}
}

261 
	$HÆB¨Sñe˘
()

264 
	`HÆI2CInô
(
HAL_C953_I2C_ADDRESS
,
i2cClock_267KHZ
);

265 
	}
}

	@../../../../Components/hal/target/CC2541ST/hal_bar.h

39 #i‚de‡
HAL_BAR_H


40 
	#HAL_BAR_H


	)

42 #ifde‡
__˝lu•lus


50 
	~"hÆ_ty≥s.h
"

63 
HÆB¨Inô
();

64 
HÆB¨SèπMósuªmít
();

65 
boﬁ
 
HÆB¨RódMósuªmít
(
uöt8
 *
pBuf
);

66 
HÆB¨RódCÆibøti⁄
(
uöt8
 *
pBuf
);

67 
boﬁ
 
HÆB¨Te°
();

72 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2541ST/hal_board_cfg.h

40 #i‚de‡
HAL_BOARD_CFG_H


41 
	#HAL_BOARD_CFG_H


	)

52 
	#ACTIVE_LOW
 !

	)

53 
	#ACTIVE_HIGH
 !!

	)

60 
	~"hÆ_mcu.h
"

61 
	~"hÆ_defs.h
"

62 
	~"hÆ_ty≥s.h
"

71 
	#CC2541_SB


	)

77 
	#HAL_CPU_CLOCK_MHZ
 32

	)

78 
	#EXTERNAL_CRYSTAL_OSC
 0x00

	)

79 
	#INTERNAL_RC_OSC
 0x80

	)

89 #i‡–!
deföed
 ( 
POWER_SAVING
 ) ) && ( !deföed ( 
OSC32K_CRYSTAL_INSTALLED
 ) )

90 
	#OSC32K_CRYSTAL_INSTALLED
 
FALSE


	)

94 #i‡!
deföed
 (
OSC32K_CRYSTAL_INSTALLED
Ë|| (deföed (OSC32K_CRYSTAL_INSTALLEDË&& (OSC32K_CRYSTAL_INSTALLED =
TRUE
))

95 
	#OSC_32KHZ
 
EXTERNAL_CRYSTAL_OSC


	)

97 
	#OSC_32KHZ
 
INTERNAL_RC_OSC


	)

101 
	#MIN_TIME_TO_STABLE_32KHZ_XOSC
 400

	)

108 
	#HAL_NUM_LEDS
 2

	)

110 
	#HAL_LED_BLINK_DELAY
(Ë
	`°
–{ vﬁ©ûê
uöt32
 
i
; i=0; i<0x5800; i++Ë{ }; } )

	)

113 
	#LED1_BV
 
	`BV
(0)

	)

114 
	#LED1_SBIT
 
P1_0


	)

115 
	#LED1_DDR
 
P1DIR


	)

116 
	#LED1_POLARITY
 
ACTIVE_LOW


	)

119 
	#LED2_BV
 
	`BV
(4)

	)

120 
	#LED2_SBIT
 
P0_4


	)

121 
	#LED2_DDR
 
P0DIR


	)

122 
	#LED2_POLARITY
 
ACTIVE_LOW


	)

130 
	#GYRO_VDD_BV
 
	`BV
(1)

	)

131 
	#GYRO_VDD_SBIT
 
P1_1


	)

132 
	#GYRO_VDD_DDR
 
P1DIR


	)

135 
	#GYRO_INT_BV
 
	`BV
(1)

	)

136 
	#GYRO_INT_SBIT
 
P0_1


	)

137 
	#GYRO_INT_DDR
 
P0DIR


	)

140 
	#IRTEMP_DRDY_BV
 
	`BV
(3)

	)

141 
	#IRTEMP_DRDY_SBIT
 
P0_3


	)

142 
	#IRTEMP_DRDY_DDR
 
P0DIR


	)

145 
	#MAG_INT_BV
 
	`BV
(6)

	)

146 
	#MAG_INT_SBIT
 
P0_6


	)

147 
	#MAG_INT_DDR
 
P0DIR


	)

150 
	#DCDC_BV
 
	`BV
(7)

	)

151 
	#DCDC_SBIT
 
P0_7


	)

152 
	#DCDC_DDR
 
P0DIR


	)

153 
	#DCDC_SEL
 
P0SEL


	)

156 
	#ACC_INT_BV
 
	`BV
(2)

	)

157 
	#ACC_INT_SBIT
 
P0_2


	)

158 
	#ACC_INT_DDR
 
P0DIR


	)

159 
	#ACC_INT_SEL
 
P0SEL


	)

174 
	#HAL_FLASH_PAGE_PER_BANK
 16

	)

176 
	#HAL_FLASH_PAGE_SIZE
 2048

	)

177 
	#HAL_FLASH_WORD_SIZE
 4

	)

180 
	#HAL_FLASH_PAGE_MAP
 0x8000

	)

184 #i‡
deföed
 
NON_BANKED


185 
	#HAL_FLASH_LOCK_BITS
 16

	)

186 
	#HAL_NV_PAGE_END
 30

	)

188 
	#HAL_FLASH_LOCK_BITS
 16

	)

189 
	#HAL_NV_PAGE_END
 126

	)

193 
	#HAL_FLASH_IEEE_SIZE
 8

	)

194 
	#HAL_FLASH_IEEE_PAGE
 (
HAL_NV_PAGE_END
+1)

	)

195 
	#HAL_FLASH_IEEE_OSET
 (
HAL_FLASH_PAGE_SIZE
 - 
HAL_FLASH_LOCK_BITS
 - 
HAL_FLASH_IEEE_SIZE
)

	)

196 
	#HAL_INFOP_IEEE_OSET
 0xC

	)

198 
	#HAL_NV_PAGE_CNT
 2

	)

199 
	#HAL_NV_PAGE_BEG
 (
HAL_NV_PAGE_END
-
HAL_NV_PAGE_CNT
+1)

	)

202 
	#HAL_NV_DMA_CH
 0

	)

203 
	#HAL_DMA_CH_RX
 3

	)

204 
	#HAL_DMA_CH_TX
 4

	)

206 
	#HAL_NV_DMA_GET_DESC
(Ë
	`HAL_DMA_GET_DESC0
()

	)

207 
	#HAL_NV_DMA_SET_ADDR
(
a
Ë
	`HAL_DMA_SET_ADDR_DESC0
(◊))

	)

216 
	#PREFETCH_ENABLE
(Ë
	`°
–
FCTL
 = 0x08; )

	)

217 
	#PREFETCH_DISABLE
(Ë
	`°
–
FCTL
 = 0x04; )

	)

222 
	#SET_OSC_TO_HSOSC
() \

224 
CLKCONCMD
 = (CLKCONCMD & 0x80Ë| 
CLKCONCMD_16MHZ
; \

225  (
CLKCONSTA
 & ~0x80Ë!
CLKCONCMD_16MHZ
 ); \

226 }

	)

229 
	#SET_OSC_TO_XOSC
() \

231 
CLKCONCMD
 = (CLKCONCMD & 0x80Ë| 
CLKCONCMD_32MHZ
; \

232  (
CLKCONSTA
 & ~0x80Ë!
CLKCONCMD_32MHZ
 ); \

233 }

	)

236 
	#SET_32KHZ_OSC
() \

238 
CLKCONCMD
 = (CLKCONCMD & ~0x80Ë| 
OSC_32KHZ
; \

239  (
CLKCONSTA
 & 0x80Ë!
OSC_32KHZ
 ); \

240 }

	)

242 
	#START_HSOSC_XOSC
() \

244 
SLEEPCMD
 &~
OSC_PD
; \

245 !(
SLEEPSTA
 & 
XOSC_STB
)); \

246 }

	)

248 
	#STOP_HSOSC
() \

250 
SLEEPCMD
 |
OSC_PD
; \

251 }

	)

254 
	#HAL_BOARD_INIT
() \

256 
dÁsdf


	)

258 
START_HSOSC_XOSC
(); \

259 
SET_OSC_TO_HSOSC
(); \

260 
SET_32KHZ_OSC
(); \

261 
SET_OSC_TO_XOSC
(); \

262 
STOP_HSOSC
(); \

265 
PREFETCH_ENABLE
(); \

268 
	gLED1_DDR
 |
LED1_BV
; \

269 
	gLED2_DDR
 |
LED2_BV
; \

270 
	gGYRO_VDD_DDR
 |
GYRO_VDD_BV
; \

271 
	gDCDC_DDR
 |
DCDC_BV
; \

272 
	gGYRO_VDD_SBIT
 = 1; \

273 
	gP0DIR
 |
BV
(5); \

274 
	gP2DIR
 |
BV
(0); \

275 
	gP1DIR
 |= 0x3C; \

276 
	gP0INP
 = 0x4E; \

282 
	#HAL_TURN_OFF_LED1
(Ë
	`°
–
LED1_SBIT
 = 
	`LED1_POLARITY
 (0); )

	)

283 
	#HAL_TURN_OFF_LED2
(Ë
	`°
–
LED2_SBIT
 = 
	`LED2_POLARITY
 (0); )

	)

285 
	#HAL_TURN_ON_LED1
(Ë
	`°
–
LED1_SBIT
 = 
	`LED1_POLARITY
 (1); )

	)

286 
	#HAL_TURN_ON_LED2
(Ë
	`°
–
LED2_SBIT
 = 
	`LED2_POLARITY
 (1); )

	)

288 
	#HAL_TOGGLE_LED1
(Ë
	`°
–i‡(
LED1_SBIT
Ë{ LED1_SBIT = 0; } { LED1_SBIT = 1;} )

	)

289 
	#HAL_TOGGLE_LED2
(Ë
	`°
–i‡(
LED2_SBIT
Ë{ LED2_SBIT = 0; } { LED2_SBIT = 1;} )

	)

291 
	#HAL_STATE_LED1
(Ë(
	`LED1_POLARITY
 (
LED1_SBIT
))

	)

292 
	#HAL_STATE_LED2
(Ë(
	`LED2_POLARITY
 (
LED2_SBIT
))

	)

300 #i‚de‡
HAL_TIMER


301 
	#HAL_TIMER
 
FALSE


	)

305 #i‚de‡
HAL_ADC


306 
	#HAL_ADC
 
FALSE


	)

310 #i‚de‡
HAL_DMA


311 
	#HAL_DMA
 
TRUE


	)

315 #i‚de‡
HAL_FLASH


316 
	#HAL_FLASH
 
TRUE


	)

320 #i‚de‡
HAL_AES


321 
	#HAL_AES
 
FALSE


	)

324 #i‚de‡
HAL_AES_DMA


325 
	#HAL_AES_DMA
 
FALSE


	)

329 #i‚de‡
HAL_LCD


330 
	#HAL_LCD
 
FALSE


	)

334 #i‚de‡
HAL_LED


335 
	#HAL_LED
 
TRUE


	)

337 #i‡(!
deföed
 
BLINK_LEDS
Ë&& (
HAL_LED
 =
TRUE
)

338 
	#BLINK_LEDS


	)

342 #i‚de‡
HAL_KEY


343 
	#HAL_KEY
 
TRUE


	)

	@../../../../Components/hal/target/CC2541ST/hal_crc.c

45 
	~"hÆ_bﬂrd.h
"

46 
	~"hÆ_¸c.h
"

47 
	~"hÆ_ty≥s.h
"

64 
uöt16
 
	$HÆCRCCÆc
()

66 
uöt16
 
¸c
 = 
RNDH
;

67 
¸c
 = (¸¯<< 8Ë| 
RNDL
;

69  
¸c
;

70 
	}
}

87 
	$HÆCRCExec
(
uöt8
 
ch
)

89 
RNDH
 = 
ch
;

90 
	}
}

107 
	$HÆCRCInô
(
uöt16
 
£ed
)

109 
ADCCON1
 &= 0xF3;

111 
RNDL
 = 
	`HI_UINT16
(
£ed
);

112 
RNDL
 = 
	`LO_UINT16
(
£ed
);

113 
	}
}

	@../../../../Components/hal/target/CC2541ST/hal_crc.h

39 #i‚de‡
HAL_CRC_H


40 
	#HAL_CRC_H


	)

47 
	~"hÆ_ty≥s.h
"

64 
uöt16
 
HÆCRCCÆc
();

81 
HÆCRCExec
(
uöt8
 
ch
);

98 
HÆCRCInô
(
uöt16
 
£ed
);

	@../../../../Components/hal/target/CC2541ST/hal_dma.c

44 
	~"hÆ_dma.h
"

45 
	~"hÆ_mcu.h
"

46 
	~"hÆ_ty≥s.h
"

47 
	~"hÆ_u¨t.h
"

49 #i‡(
deföed
 
HAL_IRGEN
Ë&& (HAL_IRGEN =
TRUE
)

50 
	~"hÆ_úgí.h
"

53 #i‡((
deföed
 
HAL_DMA
Ë&& (HAL_DMA =
TRUE
))

59 
hÆDMADesc_t
 
	gdmaCh0
;

60 
hÆDMADesc_t
 
	gdmaCh1234
[4];

71 
	$HÆDmaInô
( )

73 
	`HAL_DMA_SET_ADDR_DESC0
–&
dmaCh0
 );

74 
	`HAL_DMA_SET_ADDR_DESC1234
–
dmaCh1234
 );

75 #i‡(
HAL_UART_DMA
 || \

76 ((
deföed
 
HAL_UART_SPI
) && (HAL_UART_SPI != 0)) || \

77 ((
deföed
 
HAL_IRGEN
Ë&& (HAL_IRGEN =
TRUE
)))

78 
DMAIE
 = 1;

80 
	}
}

82 #i‡(
HAL_UART_DMA
 || \

83 ((
deföed
 
	gHAL_UART_SPI
) && (HAL_UART_SPI != 0)) || \

84 ((
deföed
 
HAL_IRGEN
Ë&& (HAL_IRGEN =
TRUE
)))

94 
	$HAL_ISR_FUNCTION
–
hÆDmaI§
, 
DMA_VECTOR
 )

96 
	`HAL_ENTER_ISR
();

98 
DMAIF
 = 0;

100 #i‡(((
deföed
 
HAL_UART_DMA
) && (HAL_UART_DMA != 0)) || \

101 ((
deföed
 
HAL_UART_SPI
) && (HAL_UART_SPI != 0)))

102 i‡(
	`HAL_DMA_CHECK_IRQ
(
HAL_DMA_CH_TX
))

104 
	`HAL_DMA_CLEAR_IRQ
(
HAL_DMA_CH_TX
);

105 
	`HÆUARTI§DMA
();

106 
	`HÆUARTI§DMA
();

110 #i‡(
deföed
 
HAL_IRGEN
Ë&& (HAL_IRGEN =
TRUE
)

111 i‡–
HAL_IRGEN
 =
TRUE
 && 
	`HAL_DMA_CHECK_IRQ
–
HAL_IRGEN_DMA_CH
 ) )

113 
	`HAL_DMA_CLEAR_IRQ
–
HAL_IRGEN_DMA_CH
 );

114 
	`HÆIrGíDmaI§
();

118 
	`CLEAR_SLEEP_MODE
();

119 
	`HAL_EXIT_ISR
();

122 
	}
}

	@../../../../Components/hal/target/CC2541ST/hal_dma.h

40 #i‚de‡
HAL_DMA_H


41 
	#HAL_DMA_H


	)

43 #ifde‡
__˝lu•lus


52 
	~"hÆ_bﬂrd.h
"

53 
	~"hÆ_ty≥s.h
"

55 #i‡((
deföed
 
HAL_DMA
Ë&& (HAL_DMA =
TRUE
))

61 
	#HAL_DMA_SET_ADDR_DESC0
–
a
 ) \

62 
	`°
( \

63 
DMA0CFGH
 = (
uöt8
)–(
uöt16
)(
a
) >> 8 ); \

64 
DMA0CFGL
 = (
uöt8
)–(
uöt16
)(
a
) & 0xFF ); \

65 )

	)

67 
	#HAL_DMA_SET_ADDR_DESC1234
–
a
 ) \

68 
	`°
( \

69 
DMA1CFGH
 = (
uöt8
)–(
uöt16
)(
a
) >> 8 ); \

70 
DMA1CFGL
 = (
uöt8
)–(
uöt16
)(
a
) & 0xFF); \

71 )

	)

73 
	#HAL_DMA_GET_DESC0
(Ë&
dmaCh0


	)

75 
	#HAL_DMA_GET_DESC1234
–
a
 ) (
dmaCh1234
+(◊)-1))

	)

77 
	#HAL_DMA_ARM_CH
–
ch
 ) 
DMAARM
 = (0x01 << (ch))

	)

79 
	#HAL_DMA_CH_ARMED
–
ch
 ) (
DMAARM
 & (0x01 << (ch)))

	)

81 
	#HAL_DMA_ABORT_CH
–
ch
 ) 
DMAARM
 = (0x80 | (0x01 << (ch)))

	)

82 
	#HAL_DMA_MAN_TRIGGER
–
ch
 ) 
DMAREQ
 = (0x01 << (ch))

	)

83 
	#HAL_DMA_START_CH
–
ch
 ) 
	`HAL_DMA_MAN_TRIGGER
–(chË)

	)

85 
	#HAL_DMA_CLEAR_IRQ
–
ch
 ) 
DMAIRQ
 &~–1 << (chË)

	)

87 
	#HAL_DMA_CHECK_IRQ
–
ch
 ) (
DMAIRQ
 & ( 1 << (chË))

	)

90 
	#HAL_DMA_SET_SOURCE
–
pDesc
, 
§c
 ) \

91 
	`°
( \

92 
pDesc
->
§cAddrH
 = (
uöt8
)((
uöt16
)(
§c
) >> 8); \

93 
pDesc
->
§cAddrL
 = (
uöt8
)((
uöt16
)(
§c
) & 0xFF); \

94 )

	)

97 
	#HAL_DMA_SET_DEST
–
pDesc
, 
d°
 ) \

98 
	`°
( \

99 
pDesc
->
d°AddrH
 = (
uöt8
)((
uöt16
)(
d°
) >> 8); \

100 
pDesc
->
d°AddrL
 = (
uöt8
)((
uöt16
)(
d°
) & 0xFF); \

101 )

	)

105 
	#HAL_DMA_SET_LEN
–
pDesc
, 
Àn
 ) \

106 
	`°
( \

107 
pDesc
->
x„rLíL
 = (
uöt8
)(
uöt16
)(
Àn
); \

108 
pDesc
->
x„rLíV
 &~
HAL_DMA_LEN_H
; \

109 
pDesc
->
x„rLíV
 |(
uöt8
)((
uöt16
)(
Àn
) >> 8); \

110 )

	)

112 
	#HAL_DMA_GET_LEN
–
pDesc
 ) \

113 (((
uöt16
)(
pDesc
->
x„rLíV
 & 
HAL_DMA_LEN_H
Ë<< 8Ë|ÖDesc->
x„rLíL
)

	)

115 
	#HAL_DMA_SET_VLEN
–
pDesc
, 
vMode
 ) \

116 
	`°
( \

117 
pDesc
->
x„rLíV
 &~
HAL_DMA_LEN_V
; \

118 
pDesc
->
x„rLíV
 |(
vMode
 << 5); \

119 )

	)

121 
	#HAL_DMA_SET_WORD_SIZE
–
pDesc
, 
xSz
 ) \

122 
	`°
( \

123 
pDesc
->
˘æA
 &~
HAL_DMA_WORD_SIZE
; \

124 
pDesc
->
˘æA
 |(
xSz
 << 7); \

125 )

	)

127 
	#HAL_DMA_SET_TRIG_MODE
–
pDesc
, 
tMode
 ) \

128 
	`°
( \

129 
pDesc
->
˘æA
 &~
HAL_DMA_TRIG_MODE
; \

130 
pDesc
->
˘æA
 |(
tMode
 << 5); \

131 )

	)

133 
	#HAL_DMA_GET_TRIG_MODE
–
pDesc
 ) (’Desc->
˘æA
 >> 5Ë& 0x3)

	)

135 
	#HAL_DMA_SET_TRIG_SRC
–
pDesc
, 
tSrc
 ) \

136 
	`°
( \

137 
pDesc
->
˘æA
 &~
HAL_DMA_TRIG_SRC
; \

138 
pDesc
->
˘æA
 |
tSrc
; \

139 )

	)

141 
	#HAL_DMA_SET_SRC_INC
–
pDesc
, 
§cInc
 ) \

142 
	`°
( \

143 
pDesc
->
˘æB
 &~
HAL_DMA_SRC_INC
; \

144 
pDesc
->
˘æB
 |(
§cInc
 << 6); \

145 )

	)

147 
	#HAL_DMA_SET_DST_INC
–
pDesc
, 
d°Inc
 ) \

148 
	`°
( \

149 
pDesc
->
˘æB
 &~
HAL_DMA_DST_INC
; \

150 
pDesc
->
˘æB
 |(
d°Inc
 << 4); \

151 )

	)

153 
	#HAL_DMA_SET_IRQ
–
pDesc
, 
íabÀ
 ) \

154 
	`°
( \

155 
pDesc
->
˘æB
 &~
HAL_DMA_IRQ_MASK
; \

156 
pDesc
->
˘æB
 |(
íabÀ
 << 3); \

157 )

	)

159 
	#HAL_DMA_SET_M8
–
pDesc
, 
m8
 ) \

160 
	`°
( \

161 
pDesc
->
˘æB
 &~
HAL_DMA_M8
; \

162 
pDesc
->
˘æB
 |(
m8
 << 2); \

163 )

	)

165 
	#HAL_DMA_SET_PRIORITY
–
pDesc
, 
¥i
 ) \

166 
	`°
( \

167 
pDesc
->
˘æB
 &~
HAL_DMA_PRIORITY
; \

168 
pDesc
->
˘æB
 |
¥i
; \

169 )

	)

176 
	#HAL_DMA_VLEN_USE_LEN
 0x00

	)

178 
	#HAL_DMA_VLEN_1_P_VALOFFIRST
 0x01

	)

180 
	#HAL_DMA_VLEN_VALOFFIRST
 0x02

	)

182 
	#HAL_DMA_VLEN_1_P_VALOFFIRST_P_1
 0x03

	)

184 
	#HAL_DMA_VLEN_1_P_VALOFFIRST_P_2
 0x04

	)

186 
	#HAL_DMA_WORDSIZE_BYTE
 0x00

	)

187 
	#HAL_DMA_WORDSIZE_WORD
 0x01

	)

189 
	#HAL_DMA_TMODE_SINGLE
 0x00

	)

190 
	#HAL_DMA_TMODE_BLOCK
 0x01

	)

191 
	#HAL_DMA_TMODE_SINGLE_REPEATED
 0x02

	)

192 
	#HAL_DMA_TMODE_BLOCK_REPEATED
 0x03

	)

194 
	#HAL_DMA_TRIG_NONE
 0

	)

195 
	#HAL_DMA_TRIG_PREV
 1

	)

196 
	#HAL_DMA_TRIG_T1_CH0
 2

	)

197 
	#HAL_DMA_TRIG_T1_CH1
 3

	)

198 
	#HAL_DMA_TRIG_T1_CH2
 4

	)

199 
	#HAL_DMA_TRIG_T2_COMP
 5

	)

200 
	#HAL_DMA_TRIG_T2_OVFL
 6

	)

201 
	#HAL_DMA_TRIG_T3_CH0
 7

	)

202 
	#HAL_DMA_TRIG_T3_CH1
 8

	)

203 
	#HAL_DMA_TRIG_T4_CH0
 9

	)

204 
	#HAL_DMA_TRIG_T4_CH1
 10

	)

205 
	#HAL_DMA_TRIG_ST
 11

	)

206 
	#HAL_DMA_TRIG_IOC_0
 12

	)

207 
	#HAL_DMA_TRIG_IOC_1
 13

	)

208 
	#HAL_DMA_TRIG_URX0
 14

	)

209 
	#HAL_DMA_TRIG_UTX0
 15

	)

210 
	#HAL_DMA_TRIG_URX1
 16

	)

211 
	#HAL_DMA_TRIG_UTX1
 17

	)

212 
	#HAL_DMA_TRIG_FLASH
 18

	)

213 
	#HAL_DMA_TRIG_RADIO
 19

	)

214 
	#HAL_DMA_TRIG_ADC_CHALL
 20

	)

215 
	#HAL_DMA_TRIG_ADC_CH0
 21

	)

216 
	#HAL_DMA_TRIG_ADC_CH1
 22

	)

217 
	#HAL_DMA_TRIG_ADC_CH2
 23

	)

218 
	#HAL_DMA_TRIG_ADC_CH3
 24

	)

219 
	#HAL_DMA_TRIG_ADC_CH4
 25

	)

220 
	#HAL_DMA_TRIG_ADC_CH5
 26

	)

221 
	#HAL_DMA_TRIG_ADC_CH6
 27

	)

222 
	#HAL_DMA_TRIG_ADC_CH7
 28

	)

223 
	#HAL_DMA_TRIG_ENC_DW
 29

	)

224 
	#HAL_DMA_TRIG_ENC_UP
 30

	)

226 
	#HAL_DMA_SRCINC_0
 0x00

	)

227 
	#HAL_DMA_SRCINC_1
 0x01

	)

228 
	#HAL_DMA_SRCINC_2
 0x02

	)

229 
	#HAL_DMA_SRCINC_M1
 0x03

	)

231 
	#HAL_DMA_DSTINC_0
 0x00

	)

232 
	#HAL_DMA_DSTINC_1
 0x01

	)

233 
	#HAL_DMA_DSTINC_2
 0x02

	)

234 
	#HAL_DMA_DSTINC_M1
 0x03

	)

236 
	#HAL_DMA_IRQMASK_DISABLE
 0x00

	)

237 
	#HAL_DMA_IRQMASK_ENABLE
 0x01

	)

239 
	#HAL_DMA_M8_USE_8_BITS
 0x00

	)

240 
	#HAL_DMA_M8_USE_7_BITS
 0x01

	)

242 
	#HAL_DMA_PRI_LOW
 0x00

	)

243 
	#HAL_DMA_PRI_GUARANTEED
 0x01

	)

244 
	#HAL_DMA_PRI_HIGH
 0x02

	)

245 
	#HAL_DMA_PRI_ABSOLUTE
 0x03

	)

247 
	#HAL_DMA_MAX_ARM_CLOCKS
 45

248 

	)

254 
	#HAL_DMA_LEN_V
 0xE0

	)

255 
	#HAL_DMA_LEN_H
 0x1F

	)

258 
	#HAL_DMA_WORD_SIZE
 0x80

	)

259 
	#HAL_DMA_TRIG_MODE
 0x60

	)

260 
	#HAL_DMA_TRIG_SRC
 0x1F

	)

263 
	#HAL_DMA_SRC_INC
 0xC0

	)

264 
	#HAL_DMA_DST_INC
 0x30

	)

265 
	#HAL_DMA_IRQ_MASK
 0x08

	)

266 
	#HAL_DMA_M8
 0x04

	)

267 
	#HAL_DMA_PRIORITY
 0x03

	)

270 
uöt8
 
§cAddrH
;

271 
uöt8
 
§cAddrL
;

272 
uöt8
 
d°AddrH
;

273 
uöt8
 
d°AddrL
;

274 
uöt8
 
x„rLíV
;

275 
uöt8
 
x„rLíL
;

276 
uöt8
 
˘æA
;

277 
uöt8
 
˘æB
;

278 } 
	thÆDMADesc_t
;

284 
hÆDMADesc_t
 
dmaCh0
;

285 
hÆDMADesc_t
 
dmaCh1234
[4];

291 
HÆDmaInô
( );

295 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2541ST/hal_flash.c

45 
	~"hÆ_bﬂrd_cfg.h
"

46 
	~"hÆ_dma.h
"

47 
	~"hÆ_Êash.h
"

48 
	~"hÆ_ty≥s.h
"

69 
	$HÆFœshRód
(
uöt8
 
pg
, 
uöt16
 
off£t
, uöt8 *
buf
, uöt16 
˙t
)

72 
uöt8
 *
±r
 = (uöt8 *)(
off£t
 + 
HAL_FLASH_PAGE_MAP
) +

73 ((
pg
 % 
HAL_FLASH_PAGE_PER_BANK
Ë* 
HAL_FLASH_PAGE_SIZE
);

74 
uöt8
 
mem˘r
 = 
MEMCTR
;

76 #i‡!
deföed
 
HAL_OAD_BOOT_CODE


77 
hÆI¡Sèã_t
 
is
;

80 
pg
 /
HAL_FLASH_PAGE_PER_BANK
;

82 #i‡!
deföed
 
HAL_OAD_BOOT_CODE


83 
	`HAL_ENTER_CRITICAL_SECTION
(
is
);

87 
MEMCTR
 = (MEMCTR & 0xF8Ë| 
pg
;

89 
˙t
--)

91 *
buf
++ = *
±r
++;

94 
MEMCTR
 = 
mem˘r
;

96 #i‡!
deföed
 
HAL_OAD_BOOT_CODE


97 
	`HAL_EXIT_CRITICAL_SECTION
(
is
);

99 
	}
}

119 
	$HÆFœshWrôe
(
uöt16
 
addr
, 
uöt8
 *
buf
, uöt16 
˙t
)

121 #i‡(
deföed
 
HAL_DMA
Ë&& (HAL_DMA =
TRUE
)

122 
hÆDMADesc_t
 *
ch
 = 
	`HAL_NV_DMA_GET_DESC
();

124 
	`HAL_DMA_SET_SOURCE
(
ch
, 
buf
);

125 
	`HAL_DMA_SET_DEST
(
ch
, &
FWDATA
);

126 
	`HAL_DMA_SET_VLEN
(
ch
, 
HAL_DMA_VLEN_USE_LEN
);

127 
	`HAL_DMA_SET_LEN
(
ch
, (
˙t
 * 
HAL_FLASH_WORD_SIZE
));

128 
	`HAL_DMA_SET_WORD_SIZE
(
ch
, 
HAL_DMA_WORDSIZE_BYTE
);

129 
	`HAL_DMA_SET_TRIG_MODE
(
ch
, 
HAL_DMA_TMODE_SINGLE
);

130 
	`HAL_DMA_SET_TRIG_SRC
(
ch
, 
HAL_DMA_TRIG_FLASH
);

131 
	`HAL_DMA_SET_SRC_INC
(
ch
, 
HAL_DMA_SRCINC_1
);

132 
	`HAL_DMA_SET_DST_INC
(
ch
, 
HAL_DMA_DSTINC_0
);

134 
	`HAL_DMA_SET_IRQ
(
ch
, 
HAL_DMA_IRQMASK_DISABLE
);

135 
	`HAL_DMA_SET_M8
–
ch
, 
HAL_DMA_M8_USE_8_BITS
);

136 
	`HAL_DMA_SET_PRIORITY
(
ch
, 
HAL_DMA_PRI_HIGH
);

137 
	`HAL_DMA_CLEAR_IRQ
(
HAL_NV_DMA_CH
);

138 
	`HAL_DMA_ARM_CH
(
HAL_NV_DMA_CH
);

140 
FADDRL
 = (
uöt8
)
addr
;

141 
FADDRH
 = (
uöt8
)(
addr
 >> 8);

142 
FCTL
 |= 0x02;

143 
FCTL
 & 0x80);

145 
	}
}

163 
	$HÆFœshEø£
(
uöt8
 
pg
)

165 
FADDRH
 = 
pg
 * (
HAL_FLASH_PAGE_SIZE
 / 
HAL_FLASH_WORD_SIZE
 / 256);

166 
FCTL
 |= 0x01;

167 
	}
}

	@../../../../Components/hal/target/CC2541ST/hal_gyro.c

45 
	~"hÆ_gyro.h
"

46 
	~"hÆ_i2c.h
"

47 
	~"hÆ_£ns‹.h
"

55 
	#HAL_GYRO_I2C_ADDRESS
 0x68

	)

56 
	#HAL_GYRO_DATA_SIZE
 6

	)

60 
	#HAL_GYRO_REG_WHOAMI
 0x00

61 

	)

63 
	#HAL_GYRO_REG_XOFFS_USRH
 0x0C

64 
	#HAL_GYRO_REG_XOFFS_USRL
 0x0D

65 
	#HAL_GYRO_REG_YOFFS_USRH
 0x0E

66 
	#HAL_GYRO_REG_YOFFS_USRL
 0x0F

67 
	#HAL_GYRO_REG_ZOFFS_USRH
 0x10

68 
	#HAL_GYRO_REG_ZOFFS_USRL
 0x11

69 

	)

71 
	#HAL_GYRO_REG_FIFO_EN
 0x12

72 
	#HAL_GYRO_REG_AUX_VDDIO
 0x13

73 
	#HAL_GYRO_REG_AUX_SLV_ADDR
 0x14

74 
	#HAL_GYRO_REG_SMPLRT_DIV
 0x15

75 
	#HAL_GYRO_REG_DLPF_FS
 0x16

76 
	#HAL_GYRO_REG_INT_CFG
 0x17

77 
	#HAL_GYRO_REG_AUX_BURST_ADDR
 0x18

78 
	#HAL_GYRO_REG_INT_STATUS
 0x1A

79 

	)

81 
	#HAL_GYRO_REG_TEMP_OUT_H
 0x1B

82 
	#HAL_GYRO_REG_TEMP_OUT_L
 0x1C

83 
	#HAL_GYRO_REG_GYRO_XOUT_H
 0x1D

84 
	#HAL_GYRO_REG_GYRO_XOUT_L
 0x1E

85 
	#HAL_GYRO_REG_GYRO_YOUT_H
 0x1F

86 
	#HAL_GYRO_REG_GYRO_YOUT_L
 0x20

87 
	#HAL_GYRO_REG_GYRO_ZOUT_H
 0x21

88 
	#HAL_GYRO_REG_GYRO_ZOUT_L
 0x22

89 
	#HAL_GYRO_REG_AUX_XOUT_H
 0x23

90 
	#HAL_GYRO_REG_AUX_XOUT_L
 0x24

91 
	#HAL_GYRO_REG_AUX_YOUT_H
 0x25

92 
	#HAL_GYRO_REG_AUX_YOUT_L
 0x26

93 
	#HAL_GYRO_REG_AUX_ZOUT_H
 0x27

94 
	#HAL_GYRO_REG_AUX_ZOUT_L
 0x28

95 

	)

97 
	#HAL_GYRO_REG_FIFO_COUNTH
 0x3A

98 
	#HAL_GYRO_REG_FIFO_COUNTL
 0x3B

99 
	#HAL_GYRO_REG_FIFO_R
 0x3C

100 

	)

102 
	#HAL_GYRO_REG_USER_CTRL
 0x3D

103 
	#HAL_GYRO_REG_PWR_MGM
 0x3E

104 

	)

106 
	#HAL_GYRO_REG_FIFO_EN_TEMP_OUT
 0x80

	)

107 
	#HAL_GYRO_REG_FIFO_EN_GYRO_XOUT
 0x40

	)

108 
	#HAL_GYRO_REG_FIFO_EN_GYRO_YOUT
 0x20

	)

109 
	#HAL_GYRO_REG_FIFO_EN_GYRO_ZOUT
 0x10

	)

110 
	#HAL_GYRO_REG_FIFO_EN_AUX_XOUT
 0x08

	)

111 
	#HAL_GYRO_REG_FIFO_EN_AUX_YOUT
 0x04

	)

112 
	#HAL_GYRO_REG_FIFO_EN_AUX_ZOUT
 0x02

	)

113 
	#HAL_GYRO_REG_FIFO_EN_FIFO_FOOTER
 0x01

	)

115 
	#HAL_GYRO_USER_CTRL_DMP_EN
 0x80

	)

116 
	#HAL_GYRO_USER_CTRL_FIFO_EN
 0x40

	)

117 
	#HAL_GYRO_USER_CTRL_AUX_IF_EN
 0x20

	)

118 
	#HAL_GYRO_USER_CTRL_AUX_IF_RST_EN
 0x08

	)

119 
	#HAL_GYRO_USER_CTRL_DMP_RST
 0x04

	)

120 
	#HAL_GYRO_USER_CTRL_FIFO_RST
 0x02

	)

121 
	#HAL_GYRO_USER_CTRL_GYRO_RST
 0x01

	)

123 
	#HAL_GYRO_PWR_MGM_H_RESET
 0x80

	)

124 
	#HAL_GYRO_PWR_MGM_SLEEP
 0x40

	)

125 
	#HAL_GYRO_PWR_MGM_STBY_XG
 0x20

	)

126 
	#HAL_GYRO_PWR_MGM_STBY_YG
 0x10

	)

127 
	#HAL_GYRO_PWR_MGM_STBY_ZG
 0x08

	)

128 
	#HAL_GYRO_PWR_MGM_STBY_ALL
 0x38

129 

	)

131 
	#HAL_GYRO_PWR_MGM_CLOCK_INT_OSC
 0x00

	)

132 
	#HAL_GYRO_PWR_MGM_CLOCK_PLL_X
 0x01

	)

133 
	#HAL_GYRO_PWR_MGM_CLOCK_PLL_Y
 0x02

	)

134 
	#HAL_GYRO_PWR_MGM_CLOCK_PLL_Z
 0x03

	)

135 
	#HAL_GYRO_PWR_MGM_CLOCK_PLL_32768KHZ
 0x04

	)

136 
	#HAL_GYRO_PWR_MGM_CLOCK_PLL_19_2MHZ
 0x05

	)

137 
	#HAL_GYRO_PWR_MGM_CLOCK_STOP
 0x07

	)

143 
HÆGyroSñe˘
();

149 
uöt8
 
	gmSètus
;

156 
uöt8
 
	gmDißbÀdAxes
;

157 
uöt8
 
	gcfgOn
;

172 
	$HÆGyroInô
()

174 
mSètus
 = 
HAL_GYRO_STOPPED
;

175 
mDißbÀdAxes
 = 
HAL_GYRO_PWR_MGM_STBY_ALL
;

177 
	`HÆGyroTu∫Off
();

178 
	}
}

188 
	$HÆGyroTu∫On
()

190 
boﬁ
 
suc˚ss
;

191 
uöt8
 
˛k_£À˘
;

193 
	`HÆDcDcC⁄åﬁ
(
ST_GYRO
,
åue
);

195 
	`HÆGyroSñe˘
();

198 
˛k_£À˘
 = 
HAL_GYRO_PWR_MGM_CLOCK_INT_OSC
;

199 if(!(
mDißbÀdAxes
 & 
HAL_GYRO_PWR_MGM_STBY_XG
))

201 
˛k_£À˘
 = 
HAL_GYRO_PWR_MGM_CLOCK_PLL_X
;

203 if(!(
mDißbÀdAxes
 & 
HAL_GYRO_PWR_MGM_STBY_YG
))

205 
˛k_£À˘
 = 
HAL_GYRO_PWR_MGM_CLOCK_PLL_Y
;

207 if(!(
mDißbÀdAxes
 & 
HAL_GYRO_PWR_MGM_STBY_ZG
))

209 
˛k_£À˘
 = 
HAL_GYRO_PWR_MGM_CLOCK_PLL_Z
;

213 
cfgOn
 = 
mDißbÀdAxes
 & (~
HAL_GYRO_PWR_MGM_SLEEP
 | 
˛k_£À˘
);

214 
suc˚ss
 = 
	`HÆSís‹WrôeReg
(
HAL_GYRO_REG_PWR_MGM
,&
cfgOn
,1);

215 if(
suc˚ss
)

217 
mSètus
 = 
HAL_GYRO_DATA_READY
;

221 
mSètus
 = 
HAL_GYRO_STATE_ERROR
;

223 
	}
}

232 
	$HÆGyroTu∫Off
()

234 
boﬁ
 
suc˚ss
;

235 
uöt8
 
vÆ
;

237 
	`HÆGyroSñe˘
();

240 
vÆ
 = 
HAL_GYRO_PWR_MGM_SLEEP
;

241 
suc˚ss
 = 
	`HÆSís‹WrôeReg
(
HAL_GYRO_REG_PWR_MGM
,&
vÆ
,1);

243 if(
suc˚ss
)

245 
uöt8
 
rv
;

247 
suc˚ss
 = 
	`HÆSís‹RódReg
(
HAL_GYRO_REG_PWR_MGM
,&
rv
,1);

248 i‡(
suc˚ss
 && 
rv
 =
vÆ
)

250 
mSètus
 = 
HAL_GYRO_STOPPED
;

251 
mDißbÀdAxes
 = 
HAL_GYRO_PWR_MGM_STBY_ALL
;

255 i‡(!
suc˚ss
)

257 
mSètus
 = 
HAL_GYRO_STATE_ERROR
;

260 
	`HÆDcDcC⁄åﬁ
(
ST_GYRO
,
Ál£
);

261 
	}
}

273 
boﬁ
 
	$HÆGyroRód
(
uöt8
 *
pBuf
)

275 
boﬁ
 
suc˚ss
;

276 
uöt8
 
buf
[
HAL_GYRO_DATA_SIZE
];

277 
uöt8
 
vÆ
;

279 
	`HÆGyroSñe˘
();

282 
suc˚ss
 = 
	`HÆSís‹RódReg
(
HAL_GYRO_REG_GYRO_XOUT_H
,
buf
,
HAL_GYRO_DATA_SIZE
);

284 i‡(
suc˚ss
)

287 
pBuf
[0] = 
buf
[1];

288 
pBuf
[1] = 
buf
[0];

289 
pBuf
[2] = 
buf
[3];

290 
pBuf
[3] = 
buf
[2];

291 
pBuf
[4] = 
buf
[5];

292 
pBuf
[5] = 
buf
[4];

296 
vÆ
 = 
HAL_GYRO_PWR_MGM_SLEEP
;

297 
suc˚ss
 = 
	`HÆSís‹WrôeReg
(
HAL_GYRO_REG_PWR_MGM
,&
vÆ
,1);

298 
mSètus
 = 
HAL_GYRO_SLEEP
;

300  
suc˚ss
;

301 
	}
}

311 
boﬁ
 
	$HÆGyroWakeUp
()

313 
	`HÆGyroSñe˘
();

315 
mSètus
 = 
HAL_GYRO_DATA_READY
;

318  
	`HÆSís‹WrôeReg
(
HAL_GYRO_REG_PWR_MGM
,&
cfgOn
,1);

319 
	}
}

329 
uöt8
 
	$HÆGyroSètus
()

331  
mSètus
;

332 
	}
}

346 
	$HÆGyroSñe˘Axes
(
uöt8
 
axes
)

348 
mDißbÀdAxes
 = 
HAL_GYRO_PWR_MGM_STBY_ALL
;

350 if(
axes
 & 0x01)

352 
mDißbÀdAxes
 ^
HAL_GYRO_PWR_MGM_STBY_XG
;

355 if(
axes
 & 0x02)

357 
mDißbÀdAxes
 ^
HAL_GYRO_PWR_MGM_STBY_YG
;

360 if(
axes
 & 0x04)

362 
mDißbÀdAxes
 ^
HAL_GYRO_PWR_MGM_STBY_ZG
;

365 if(
	`HÆGyroSètus
(Ë!
HAL_GYRO_STOPPED
)

367 
	`HÆGyroTu∫On
();

369 
	}
}

378 
boﬁ
 
	$HÆGyroTe°
()

380 
uöt8
 
vÆ
;

382 
	`HÆGyroSñe˘
();

385 
	`ST_ASSERT
(
	`HÆSís‹RódReg
(
HAL_GYRO_REG_WHOAMI
, &
vÆ
, 1));

386 
	`ST_ASSERT
((
vÆ
&
HAL_GYRO_I2C_ADDRESS
) == HAL_GYRO_I2C_ADDRESS);

388  
TRUE
;

389 
	}
}

403 
	$HÆGyroSñe˘
()

406 
	`HÆI2CInô
(
HAL_GYRO_I2C_ADDRESS
, 
i2cClock_533KHZ
);

407 
	}
}

	@../../../../Components/hal/target/CC2541ST/hal_gyro.h

40 #i‚de‡
HAL_GYRO_H


41 
	#HAL_GYRO_H


	)

43 #ifde‡
__˝lu•lus


51 
	~"comdef.h
"

58 
	#HAL_GYRO_STOPPED
 0x00

	)

59 
	#HAL_GYRO_SLEEP
 0x01

	)

60 
	#HAL_GYRO_DATA_READY
 0x02

	)

61 
	#HAL_GYRO_STATE_ERROR
 0xFF

	)

70 
HÆGyroInô
();

71 
HÆGyroTu∫On
();

72 
HÆGyroTu∫Off
();

73 
boﬁ
 
HÆGyroWakeUp
();

74 
boﬁ
 
HÆGyroRód
(
uöt8
 *
úTempD©a
);

75 
boﬁ
 
HÆGyroTe°
();

76 
HÆGyroSñe˘Axes
(
uöt8
 
axes
);

77 
uöt8
 
HÆGyroSètus
();

79 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2541ST/hal_humi.c

45 
	~"hÆ_humi.h
"

46 
	~"hÆ_£ns‹.h
"

47 
	~"hÆ_i2c.h
"

55 
	#HAL_SHT21_I2C_ADDRESS
 0x40

	)

57 
	#S_REG_LEN
 2

	)

58 
	#DATA_LEN
 3

	)

61 
	#SHT21_CMD_TEMP_T_H
 0xE3

62 
	#SHT21_CMD_HUMI_T_H
 0xE5

63 
	#SHT21_CMD_TEMP_T_NH
 0xF3

64 
	#SHT21_CMD_HUMI_T_NH
 0xF5

65 
	#SHT21_CMD_WRITE_U_R
 0xE6

66 
	#SHT21_CMD_READ_U_R
 0xE7

67 
	#SHT21_CMD_SOFT_RST
 0xFE

68 

	)

69 
	#HUMIDITY
 0x00

	)

70 
	#TEMPERATURE
 0x01

	)

72 
	#USR_REG_MASK
 0x38

73 
	#USR_REG_DEFAULT
 0x02

74 
	#USR_REG_RES_MASK
 0x7E

75 
	#USR_REG_11BITRES
 0x81

76 

	)

86 
HÆHumiSñe˘
();

87 
boﬁ
 
HÆHumiRódD©a
(
uöt8
 *
pBuf
,uöt8 
nByãs
);

88 
boﬁ
 
HÆHumiWrôeCmd
(
uöt8
 
cmd
);

94 
uöt8
 
	gu§
;

95 
uöt8
 
	gbuf
[6];

96 
boﬁ
 
	gsuc˚ss
;

105 
	$HÆHumiInô
()

107 
	`HÆHumiSñe˘
();

110 
	`HÆSís‹RódReg
(
SHT21_CMD_READ_U_R
,&
u§
,1);

111 
u§
 &
USR_REG_RES_MASK
;

112 
u§
 |
USR_REG_11BITRES
;

113 
	`HÆSís‹WrôeReg
(
SHT21_CMD_WRITE_U_R
,&
u§
,1);

114 
suc˚ss
 = 
FALSE
;

115 
	}
}

125 
boﬁ
 
	$HÆHumiExecMósuªmítSãp
(
uöt8
 
°©e
)

127 
	`HÆHumiSñe˘
();

129 
°©e
)

133 
	`HÆDcDcC⁄åﬁ
(
ST_HUMID
,
åue
);

136 
suc˚ss
 = 
	`HÆHumiWrôeCmd
(
SHT21_CMD_TEMP_T_NH
);

141 i‡(
suc˚ss
)

143 
suc˚ss
 = 
	`HÆHumiRódD©a
(
buf
, 
DATA_LEN
);

146 i‡(
suc˚ss
)

148 
suc˚ss
 = 
	`HÆHumiWrôeCmd
(
SHT21_CMD_HUMI_T_NH
);

155 i‡(
suc˚ss
)

157 
suc˚ss
 = 
	`HÆHumiRódD©a
(
buf
+
DATA_LEN
, DATA_LEN);

161 
	`HÆDcDcC⁄åﬁ
(
ST_HUMID
,
Ál£
);

165  
suc˚ss
;

166 
	}
}

176 
boﬁ
 
	$HÆHumiRódMósuªmít
(
uöt8
 *
pBuf
)

179 
pBuf
[0] = 
buf
[1];

180 
pBuf
[1] = 
buf
[0];

183 
pBuf
[2] = 
buf
[4];

184 
pBuf
[3] = 
buf
[3];

186  
suc˚ss
;

187 
	}
}

198 
boﬁ
 
	$HÆHumiTe°
()

200 
uöt8
 
vÆ
;

202 
	`HÆHumiSñe˘
();

205 
	`ST_ASSERT
(
	`HÆSís‹RódReg
(
SHT21_CMD_READ_U_R
,&
vÆ
,1));

206 
	`ST_ASSERT
(
vÆ
==
u§
);

208  
TRUE
;

209 
	}
}

224 
	$HÆHumiSñe˘
()

227 
	`HÆI2CInô
(
HAL_SHT21_I2C_ADDRESS
,
i2cClock_267KHZ
);

228 
	}
}

240 
boﬁ
 
	$HÆHumiWrôeCmd
(
uöt8
 
cmd
)

243  
	`HÆI2CWrôe
(1,&
cmd
) == 1;

244 
	}
}

258 
boﬁ
 
	$HÆHumiRódD©a
(
uöt8
 *
pBuf
, uöt8 
nByãs
)

261  
	`HÆI2CRód
(
nByãs
,
pBuf
 ) ==ÇBytes;

262 
	}
}

	@../../../../Components/hal/target/CC2541ST/hal_humi.h

38 #i‚de‡
HAL_HUMI_H


39 
	#HAL_HUMI_H


	)

41 #ifde‡
__˝lu•lus


49 
	~"hÆ_ty≥s.h
"

54 
	#HAL_HUM_MEAS_STATE_1
 0

55 
	#HAL_HUM_MEAS_STATE_2
 1

56 
	#HAL_HUM_MEAS_STATE_3
 2

57 

	)

61 
HÆHumiInô
();

62 
boﬁ
 
HÆHumiExecMósuªmítSãp
(
uöt8
 
°©e
);

63 
boﬁ
 
HÆHumiRódMósuªmít
(
uöt8
 *
pBuf
);

64 
boﬁ
 
HÆHumiTe°
();

68 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2541ST/hal_i2c.c

45 
	~"hÆ_as£π.h
"

46 
	~"hÆ_bﬂrd_cfg.h
"

47 
	~"hÆ_i2c.h
"

53 
	#I2C_ENS1
 
	`BV
(6)

	)

54 
	#I2C_STA
 
	`BV
(5)

	)

55 
	#I2C_STO
 
	`BV
(4)

	)

56 
	#I2C_SI
 
	`BV
(3)

	)

57 
	#I2C_AA
 
	`BV
(2)

	)

58 
	#I2C_MST_RD_BIT
 
	`BV
(0)

59 

	)

60 
	#I2C_CLOCK_MASK
 0x83

	)

62 
	#I2C_PXIFG
 
P2IFG


	)

63 
	#I2C_IF
 
P2IF


	)

64 
	#I2C_IE
 
	`BV
(1)

	)

74 
	mm°Sèπed
 = 0x08,

75 
	mm°RïSèπ
 = 0x10,

76 
	mm°AddrAckW
 = 0x18,

77 
	mm°AddrNackW
 = 0x20,

78 
	mm°D©aAckW
 = 0x28,

79 
	mm°D©aNackW
 = 0x30,

80 
	mm°Lo°Arb
 = 0x38,

81 
	mm°AddrAckR
 = 0x40,

82 
	mm°AddrNackR
 = 0x48,

83 
	mm°D©aAckR
 = 0x50,

84 
	mm°D©aNackR
 = 0x58,

85 } 
	ti2cSètus_t
;

92 
	#I2C_WRAPPER_DISABLE
(Ë
	`°
–
I2CWC
 = 0x00; )

	)

93 
	#I2C_CLOCK_RATE
(
x
Ë
	`°
–
I2CCFG
 &~
I2C_CLOCK_MASK
; \

94 
I2CCFG
 |
x
; )

	)

95 
	#I2C_SET_NACK
(Ë
	`°
–
I2CCFG
 &~
I2C_AA
; )

	)

96 
	#I2C_SET_ACK
(Ë
	`°
–
I2CCFG
 |
I2C_AA
; )

	)

99 
	#I2C_ENABLE
(Ë
	`°
–
I2CCFG
 |(
I2C_ENS1
); )

	)

100 
	#I2C_DISABLE
(Ë
	`°
–
I2CCFG
 &~(
I2C_ENS1
); )

	)

103 
	#I2C_STRT
(Ë
	`°
 ( \

104 
I2CCFG
 &~
I2C_SI
; \

105 
I2CCFG
 |
I2C_STA
; \

106 (
I2CCFG
 & 
I2C_SI
) == 0); \

107 
I2CCFG
 &~
I2C_STA
; \

108 )

	)

111 
	#I2C_STOP
(Ë
	`°
 ( \

112 
I2CCFG
 |
I2C_STO
; \

113 
I2CCFG
 &~
I2C_SI
; \

114 (
I2CCFG
 & 
I2C_STO
) != 0); \

115 )

	)

118 
	#I2C_READ
(
_X_
Ë
	`°
 ( \

119 
I2CCFG
 &~
I2C_SI
; \

120 (
I2CCFG
 & 
I2C_SI
) == 0); \

121 (
_X_
Ë
I2CDATA
; \

122 )

	)

125 
	#I2C_WRITE
(
_X_
Ë
	`°
 ( \

126 
I2CDATA
 = (
_X_
); \

127 
I2CCFG
 &~
I2C_SI
; \

128 (
I2CCFG
 & 
I2C_SI
) == 0); \

129 )

	)

136 
uöt8
 
	gi2cAddr
;

149 
uöt8
 
	$i2cM°Såt
(
uöt8
 
RD_WRn
)

151 
	`I2C_STRT
();

153 i‡(
I2CSTAT
 =
m°Sèπed
)

155 
	`I2C_WRITE
(
i2cAddr
 | 
RD_WRn
);

158  
I2CSTAT
;

159 
	}
}

177 
	$HÆI2CInô
(
uöt8
 
addªss
, 
i2cClock_t
 
˛ockR©e
)

179 
i2cAddr
 = 
addªss
 << 1;

181 
	`I2C_WRAPPER_DISABLE
();

182 
I2CADDR
 = 0;

183 
	`I2C_CLOCK_RATE
(
˛ockR©e
);

184 
	`I2C_ENABLE
();

185 
	}
}

203 
uöt8
 
	$HÆI2CRód
(
uöt8
 
Àn
, uöt8 *
pBuf
)

205 
uöt8
 
˙t
 = 0;

207 i‡(
	`i2cM°Såt
(
I2C_MST_RD_BIT
Ë!
m°AddrAckR
)

209 
Àn
 = 0;

215 i‡(
Àn
 > 1)

217 
	`I2C_SET_ACK
();

220 
Àn
 > 0)

223 i‡(
Àn
 == 1)

225 
	`I2C_SET_NACK
();

229 
	`I2C_READ
(*
pBuf
++);

230 
˙t
++;

231 
Àn
--;

233 i‡(
I2CSTAT
 !
m°D©aAckR
)

235 i‡(
I2CSTAT
 !
m°D©aNackR
)

238 
˙t
--;

243 
	`I2C_STOP
();

245  
˙t
;

246 
	}
}

264 
uöt8
 
	$HÆI2CWrôe
(
uöt8
 
Àn
, uöt8 *
pBuf
)

266 i‡(
	`i2cM°Såt
(0Ë!
m°AddrAckW
)

268 
Àn
 = 0;

271 
uöt8
 
˙t
 = 0; c¡ < 
Àn
; cnt++)

273 
	`I2C_WRITE
(*
pBuf
++);

275 i‡(
I2CSTAT
 !
m°D©aAckW
)

277 i‡(
I2CSTAT
 =
m°D©aNackW
)

279 
Àn
 = 
˙t
 + 1;

283 
Àn
 = 
˙t
;

289 
	`I2C_STOP
();

291  
Àn
;

292 
	}
}

309 
	$HÆI2CDißbÀ
()

311 
	`I2C_DISABLE
();

312 
	}
}

	@../../../../Components/hal/target/CC2541ST/hal_i2c.h

39 #i‚de‡
HAL_I2C_H


40 
	#HAL_I2C_H


	)

46 
	~"comdef.h
"

52 
	#HAL_I2C_SLAVE_ADDR_DEF
 0x41

	)

60 
	mi2cClock_123KHZ
 = 0x00,

61 
	mi2cClock_144KHZ
 = 0x01,

62 
	mi2cClock_165KHZ
 = 0x02,

63 
	mi2cClock_197KHZ
 = 0x03,

64 
	mi2cClock_33KHZ
 = 0x80,

65 
	mi2cClock_267KHZ
 = 0x81,

66 
	mi2cClock_533KHZ
 = 0x82

67 } 
	ti2cClock_t
;

74 
HÆI2CInô
(
uöt8
 
addªss
, 
i2cClock_t
 
˛ockR©e
);

75 
uöt8
 
HÆI2CRód
(uöt8 
Àn
, uöt8 *
pBuf
);

76 
uöt8
 
HÆI2CWrôe
(uöt8 
Àn
, uöt8 *
pBuf
);

77 
HÆI2CDißbÀ
();

	@../../../../Components/hal/target/CC2541ST/hal_interrupt.c

44 
	~"hÆ_keys.h
"

45 
	~"hÆ_acc.h
"

46 
	~"hÆ_mag.h
"

47 
	~"hÆ_i2c.h
"

52 
	$HAL_ISR_FUNCTION
–
hÆKeyP‹t0I§
, 
P0INT_VECTOR
 )

55 
	`HAL_ENTER_ISR
();

56 i‡(
HAL_KEY_SW_1_PXIFG
 & 
HAL_KEY_SW_1_BIT
)

58 
	`hÆPro˚ssKeyI¡îru±
();

65 
P0IFG
 = 0;

66 
P0IF
 = 0;

67 
	`HAL_EXIT_ISR
();

68 
	}
}

76 
	$HAL_ISR_FUNCTION
–
hÆKeyP‹t1I§
, 
P1INT_VECTOR
 )

78 
	`HAL_ENTER_ISR
();

79 i‡((
HAL_KEY_SW_2_PXIFG
 & 
HAL_KEY_SW_2_BIT
Ë|| (
HAL_KEY_SW_3_PXIFG
 & 
HAL_KEY_SW_3_BIT
))

81 
	`hÆPro˚ssKeyI¡îru±
();

87 
HAL_KEY_SW_2_PXIFG
 = 0;

88 
HAL_KEY_SW_3_PXIFG
 = 0;

89 
P1IF
 = 0;

90 
	`HAL_EXIT_ISR
();

91 
	}
}

100 
	$HAL_ISR_FUNCTION
–
hÆI2CI§
, 
I2C_VECTOR
 )

102 
	`HAL_ENTER_ISR
();

109 
P2IFG
 = 0;

110 
P2IF
 = 0;

112 
	`HAL_EXIT_ISR
();

113 
	}
}

	@../../../../Components/hal/target/CC2541ST/hal_irtemp.c

44 
	~"hÆ_úãmp.h
"

45 
	~"hÆ_i2c.h
"

46 
	~"hÆ_£ns‹.h
"

54 
	#TMP006_I2C_ADDRESS
 0x44

	)

57 
	#TMP006_REG_ADDR_VOLTAGE
 0x00

	)

58 
	#TMP006_REG_ADDR_TEMPERATURE
 0x01

	)

59 
	#TMP006_REG_ADDR_CONFIG
 0x02

	)

60 
	#TMP006_REG_MANF_ID
 0xFE

	)

61 
	#TMP006_REG_PROD_ID
 0xFE

	)

64 
	#TMP006_VAL_CONFIG_RESET
 0x7400

65 
	#TMP006_VAL_CONFIG_ON
 0x7000

66 
	#TMP006_VAL_CONFIG_OFF
 0x0000

67 
	#TMP006_VAL_MANF_ID
 0x5449

68 
	#TMP006_VAL_PROD_ID
 0x0067

69 

	)

71 
	#DATA_RDY_BIT
 0x8000

72 

	)

74 
	#IRTEMP_REG_LEN
 2

	)

81 
HÆIRTempSñe˘
();

88 
IRTem≥øtuª_Sèãs_t
 
	gútSís‹Sèã
 = 
TMP006_OFF
;

90 
uöt8
 
	gc⁄figSís‹Re£t
[2] = {0x80, 0x00};

91 
uöt8
 
	gc⁄figSís‹Off
[2] = {0x00, 0x80};

92 
uöt8
 
	gc⁄figSís‹On
[2] = {0x70, 0x00};

107 
	$HALIRTempInô
()

109 
útSís‹Sèã
 = 
TMP006_OFF
;

110 
	`HÆIRTempTu∫Off
();

111 
	}
}

121 
	$HÆIRTempTu∫On
()

123 
	`HÆDcDcC⁄åﬁ
(
ST_IRTEMP
,
åue
);

124 
	`HÆIRTempSñe˘
();

126 i‡(
	`HÆSís‹WrôeReg
(
TMP006_REG_ADDR_CONFIG
, 
c⁄figSís‹On
, 
IRTEMP_REG_LEN
))

128 
útSís‹Sèã
 = 
TMP006_IDLE
;

130 
	}
}

139 
	$HÆIRTempTu∫Off
()

141 
	`HÆIRTempSñe˘
();

143 i‡(
	`HÆSís‹WrôeReg
(
TMP006_REG_ADDR_CONFIG
, 
c⁄figSís‹Off
, 
IRTEMP_REG_LEN
))

145 
útSís‹Sèã
 = 
TMP006_OFF
;

147 
	`HÆDcDcC⁄åﬁ
(
ST_IRTEMP
,
Ál£
);

148 
	}
}

159 
boﬁ
 
	$HÆIRTempRód
(
uöt8
 *
pBuf
)

161 
uöt16
 
v
;

162 
uöt16
 
t
;

163 
boﬁ
 
suc˚ss
;

165 i‡(
útSís‹Sèã
 !
TMP006_DATA_READY
)

167  
FALSE
;

170 
	`HÆIRTempSñe˘
();

173 
suc˚ss
 = 
	`HÆSís‹RódReg
(
TMP006_REG_ADDR_VOLTAGE
, (
uöt8
 *)&
v
,
IRTEMP_REG_LEN
 );

174 i‡(
suc˚ss
)

176 
suc˚ss
 = 
	`HÆSís‹RódReg
(
TMP006_REG_ADDR_TEMPERATURE
, (
uöt8
 *)&
t
,
IRTEMP_REG_LEN
 );

179 i‡(
suc˚ss
)

182 
pBuf
[0] = 
	`HI_UINT16
–
v
 );

183 
pBuf
[1] = 
	`LO_UINT16
–
v
 );

184 
pBuf
[2] = 
	`HI_UINT16
–
t
 );

185 
pBuf
[3] = 
	`LO_UINT16
–
t
 );

189 i‡(
	`HÆSís‹WrôeReg
(
TMP006_REG_ADDR_CONFIG
, 
c⁄figSís‹Off
, 
IRTEMP_REG_LEN
))

191 
útSís‹Sèã
 = 
TMP006_OFF
;

193 
	`HÆDcDcC⁄åﬁ
(
ST_IRTEMP
,
Ál£
);

195  
suc˚ss
;

196 
	}
}

206 
IRTem≥øtuª_Sèãs_t
 
	$HÆIRTempSètus
()

208 i‡(
útSís‹Sèã
 !
TMP006_OFF
)

210 
boﬁ
 
suc˚ss
;

211 
uöt16
 
v
;

214 
	`HÆIRTempSñe˘
();

217 
suc˚ss
 = 
	`HÆSís‹RódReg
(
TMP006_REG_ADDR_CONFIG
, (
uöt8
 *)&
v
,
IRTEMP_REG_LEN
 );

218 i‡((
v
 & 
DATA_RDY_BIT
Ë&& 
suc˚ss
)

220 
útSís‹Sèã
 = 
TMP006_DATA_READY
;

224  
útSís‹Sèã
;

225 
	}
}

235 
boﬁ
 
	$HÆIRTempTe°
()

237 
uöt16
 
vÆ
;

240 
	`HÆIRTempSñe˘
();

243 
	`ST_ASSERT
(
	`HÆSís‹RódReg
(
TMP006_REG_MANF_ID
, (
uöt8
 *)&
vÆ
, 
IRTEMP_REG_LEN
));

244 
vÆ
 = (
	`LO_UINT16
(vÆË<< 8Ë| 
	`HI_UINT16
(val);

245 
	`ST_ASSERT
(
vÆ
 =
TMP006_VAL_MANF_ID
);

248 
	`ST_ASSERT
(
	`HÆSís‹WrôeReg
(
TMP006_REG_ADDR_CONFIG
, 
c⁄figSís‹Re£t
, 
IRTEMP_REG_LEN
));

251 
	`ST_ASSERT
(
	`HÆSís‹RódReg
(
TMP006_REG_ADDR_CONFIG
, (
uöt8
 *)&
vÆ
, 
IRTEMP_REG_LEN
));

252 
vÆ
 = ((
	`LO_UINT16
(vÆË<< 8Ë| 
	`HI_UINT16
(val));

253 
	`ST_ASSERT
(
vÆ
 =
TMP006_VAL_CONFIG_RESET
);

256 
	`ST_ASSERT
(
	`HÆSís‹WrôeReg
(
TMP006_REG_ADDR_CONFIG
, 
c⁄figSís‹Off
,
IRTEMP_REG_LEN
));

259 
	`ST_ASSERT
(
	`HÆSís‹RódReg
(
TMP006_REG_ADDR_CONFIG
, (
uöt8
 *)&
vÆ
, 
IRTEMP_REG_LEN
));

260 
vÆ
 = ((
	`LO_UINT16
(vÆË<< 8Ë| 
	`HI_UINT16
(val));

261 
	`ST_ASSERT
(
vÆ
 =
TMP006_VAL_CONFIG_OFF
);

264 
	`ST_ASSERT
(
	`HÆSís‹WrôeReg
(
TMP006_REG_ADDR_CONFIG
, 
c⁄figSís‹On
, 
IRTEMP_REG_LEN
));

267 
	`ST_ASSERT
(
	`HÆSís‹RódReg
(
TMP006_REG_ADDR_CONFIG
, (
uöt8
 *)&
vÆ
, 
IRTEMP_REG_LEN
));

268 
vÆ
 = ((
	`LO_UINT16
(vÆË<< 8Ë| 
	`HI_UINT16
(val));

269 
	`ST_ASSERT
(
vÆ
 =
TMP006_VAL_CONFIG_ON
);

272 
	`ST_ASSERT
(
	`HÆSís‹WrôeReg
(
TMP006_REG_ADDR_CONFIG
, 
c⁄figSís‹Off
, 
IRTEMP_REG_LEN
));

274  
TRUE
;

275 
	}
}

289 
	$HÆIRTempSñe˘
()

292 
	`HÆI2CInô
(
TMP006_I2C_ADDRESS
, 
i2cClock_533KHZ
);

293 
	}
}

	@../../../../Components/hal/target/CC2541ST/hal_irtemp.h

39 #i‚de‡
HAL_IRTEMP_H


40 
	#HAL_IRTEMP_H


	)

42 #ifde‡
__˝lu•lus


50 
	~"comdef.h
"

62 
TMP006_OFF
,

63 
TMP006_IDLE
,

64 
TMP006_DATA_READY


65 } 
	tIRTem≥øtuª_Sèãs_t
;

71 
HALIRTempInô
();

72 
HÆIRTempTu∫On
();

73 
HÆIRTempTu∫Off
();

74 
boﬁ
 
HÆIRTempRód
(
uöt8
 *
úTempD©a
);

75 
boﬁ
 
HÆIRTempTe°
();

76 
IRTem≥øtuª_Sèãs_t
 
HÆIRTempSètus
();

79 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2541ST/hal_keys.c

83 
	~"hÆ_mcu.h
"

84 
	~"hÆ_defs.h
"

85 
	~"hÆ_ty≥s.h
"

86 
	~"hÆ_drivîs.h
"

87 
	~"hÆ_adc.h
"

88 
	~"hÆ_keys.h
"

89 
	~"oßl.h
"

91 #i‡(
deföed
 
HAL_KEY
Ë&& (HAL_KEY =
TRUE
)

114 
uöt8
 
	ghÆKeySavedKeys
;

115 
hÆKeyCBack_t
 
	gpHÆKeyPro˚ssFun˘i⁄
;

116 
uöt8
 
	gHÆKeyC⁄figuªd
;

117 
boﬁ
 
	gHÆ_KeyI¡E«bÀ
;

139 
	$HÆKeyInô
( )

142 
hÆKeySavedKeys
 = 0;

144 
HAL_KEY_SW_1_SEL
 &~(
HAL_KEY_SW_1_BIT
);

145 
HAL_KEY_SW_1_DIR
 &~(
HAL_KEY_SW_1_BIT
);

147 
HAL_KEY_SW_2_SEL
 &~(
HAL_KEY_SW_2_BIT
);

148 
HAL_KEY_SW_2_DIR
 &~(
HAL_KEY_SW_2_BIT
);

150 
HAL_KEY_SW_3_SEL
 &~(
HAL_KEY_SW_3_BIT
);

151 
HAL_KEY_SW_3_DIR
 &~(
HAL_KEY_SW_3_BIT
);

155 
pHÆKeyPro˚ssFun˘i⁄
 = 
NULL
;

158 
HÆKeyC⁄figuªd
 = 
FALSE
;

159 
	}
}

172 
	$HÆKeyC⁄fig
 (
boﬁ
 
öãºu±E«bÀ
, 
hÆKeyCBack_t
 
cback
)

175 
HÆ_KeyI¡E«bÀ
 = 
öãºu±E«bÀ
;

178 
pHÆKeyPro˚ssFun˘i⁄
 = 
cback
;

181 i‡(
HÆ_KeyI¡E«bÀ
)

184 
PICTL
 |(
HAL_KEY_SW_1_EDGEBIT
 | 
HAL_KEY_SW_2_3_EDGEBIT
);

186 
HAL_KEY_SW_1_ICTL
 |
HAL_KEY_SW_1_ICTLBIT
;

187 
HAL_KEY_SW_1_IEN
 |
HAL_KEY_SW_1_IENBIT
;

188 
HAL_KEY_SW_1_PXIFG
 = ~(
HAL_KEY_SW_1_BIT
);

190 
HAL_KEY_SW_2_ICTL
 |
HAL_KEY_SW_2_ICTLBIT
;

191 
HAL_KEY_SW_2_IEN
 |
HAL_KEY_SW_2_IENBIT
;

192 
HAL_KEY_SW_2_PXIFG
 = ~(
HAL_KEY_SW_2_BIT
);

194 
HAL_KEY_SW_3_ICTL
 |
HAL_KEY_SW_3_ICTLBIT
;

195 
HAL_KEY_SW_3_IEN
 |
HAL_KEY_SW_3_IENBIT
;

196 
HAL_KEY_SW_3_PXIFG
 = (
uöt8
)(~(
HAL_KEY_SW_3_BIT
));

199 i‡(
HÆKeyC⁄figuªd
 =
TRUE
)

201 
	`oßl_°›_timîEx
(
HÆ_TaskID
, 
HAL_KEY_EVENT
);

206 
HAL_KEY_SW_1_ICTL
 &~(
HAL_KEY_SW_1_ICTLBIT
);

207 
HAL_KEY_SW_1_IEN
 &~(
HAL_KEY_SW_1_IENBIT
);

209 
HAL_KEY_SW_2_ICTL
 &~(
HAL_KEY_SW_2_ICTLBIT
);

210 
HAL_KEY_SW_2_IEN
 &~(
HAL_KEY_SW_2_IENBIT
);

212 
HAL_KEY_SW_3_ICTL
 &~(
HAL_KEY_SW_3_ICTLBIT
);

213 
HAL_KEY_SW_3_IEN
 &~(
HAL_KEY_SW_3_IENBIT
);

215 
	`oßl_£t_evít
(
HÆ_TaskID
, 
HAL_KEY_EVENT
);

219 
HÆKeyC⁄figuªd
 = 
TRUE
;

220 
	}
}

232 
uöt8
 
	$HÆKeyRód
 ( )

234 
uöt8
 
keys
 = 0;

236 i‡(!(
HAL_KEY_SW_1_PORT
 & 
HAL_KEY_SW_1_BIT
))

238 
keys
 |
HAL_KEY_SW_1
;

240 i‡(!(
HAL_KEY_SW_2_PORT
 & 
HAL_KEY_SW_2_BIT
))

242 
keys
 |
HAL_KEY_SW_2
;

244 i‡(!(
HAL_KEY_SW_3_PORT
 & 
HAL_KEY_SW_3_BIT
))

246 
keys
 |
HAL_KEY_SW_3
;

249  
keys
;

250 
	}
}

262 
	$HÆKeyPﬁl
 ()

264 
uöt8
 
keys
 = 0;

265 
uöt8
 
nŸify
 = 0;

267 i‡(!(
HAL_KEY_SW_1_PORT
 & 
HAL_KEY_SW_1_BIT
))

269 
keys
 |
HAL_KEY_SW_1
;

271 i‡(!(
HAL_KEY_SW_2_PORT
 & 
HAL_KEY_SW_2_BIT
))

273 
keys
 |
HAL_KEY_SW_2
;

275 i‡(!(
HAL_KEY_SW_3_PORT
 & 
HAL_KEY_SW_3_BIT
))

277 
keys
 |
HAL_KEY_SW_3
;

280 (Ë
keys
;

285 i‡(!
HÆ_KeyI¡E«bÀ
)

287 i‡(
keys
 =
hÆKeySavedKeys
)

294 
nŸify
 = 1;

300 i‡(
keys
)

302 
nŸify
 = 1;

307 
hÆKeySavedKeys
 = 
keys
;

310 i‡(
nŸify
 && (
pHÆKeyPro˚ssFun˘i⁄
))

312 (
pHÆKeyPro˚ssFun˘i⁄
Ë(
keys
, 
HAL_KEY_STATE_NORMAL
);

315 
	}
}

327 
	$hÆPro˚ssKeyI¡îru±
 ()

329 
boﬁ
 
vÆid
=
FALSE
;

331 if–
HAL_KEY_SW_1_PXIFG
 & 
HAL_KEY_SW_1_BIT
)

333 
HAL_KEY_SW_1_PXIFG
 = ~(
HAL_KEY_SW_1_BIT
);

334 
vÆid
 = 
TRUE
;

337 i‡(
HAL_KEY_SW_2_PXIFG
 & 
HAL_KEY_SW_2_BIT
)

339 
HAL_KEY_SW_2_PXIFG
 = ~(
HAL_KEY_SW_2_BIT
);

340 
vÆid
 = 
TRUE
;

342 i‡(
HAL_KEY_SW_3_PXIFG
 & 
HAL_KEY_SW_3_BIT
)

344 
HAL_KEY_SW_3_PXIFG
 = (
uöt8
)(~(
HAL_KEY_SW_3_BIT
));

345 
vÆid
 = 
TRUE
;

348 i‡(
vÆid
)

350 
	`oßl_°¨t_timîEx
 (
HÆ_TaskID
, 
HAL_KEY_EVENT
, 
HAL_KEY_DEBOUNCE_VALUE
);

352 
	}
}

363 
	$HÆKeyE¡îSÀï
 ( )

365 
	}
}

376 
uöt8
 
	$HÆKeyExôSÀï
 ( )

379  ( 
	`HÆKeyRód
 () );

380 
	}
}

385 
	$HÆKeyInô
(){
	}
}

386 
	$HÆKeyC⁄fig
(
boﬁ
 
öãºu±E«bÀ
, 
hÆKeyCBack_t
 
cback
){
	}
}

387 
uöt8
 
	$HÆKeyRód
(){  0;
	}
}

388 
	$HÆKeyPﬁl
(){
	}
}

	@../../../../Components/hal/target/CC2541ST/hal_keys.h

40 #i‚de‡
HAL_KEYS_H


41 
	#HAL_KEYS_H


	)

43 #ifde‡
__˝lu•lus


51 
	~"hÆ_bﬂrd.h
"

62 
	#HAL_KEY_INTERRUPT_DISABLE
 0x00

	)

63 
	#HAL_KEY_INTERRUPT_ENABLE
 0x01

	)

66 
	#HAL_KEY_STATE_NORMAL
 0x00

	)

67 
	#HAL_KEY_STATE_SHIFT
 0x01

	)

70 
	#HAL_KEY_SW_1
 0x01

71 
	#HAL_KEY_SW_2
 0x02

72 
	#HAL_KEY_SW_3
 0x04

73 

	)

74 
	#HAL_KEY_DEBOUNCE_VALUE
 25

	)

77 
	#HAL_KEY_CPU_PORT_0_IF
 
P0IF


	)

78 
	#HAL_KEY_CPU_PORT_2_IF
 
P2IF


	)

81 
	#HAL_KEY_SW_1_PORT
 
P0


	)

82 
	#HAL_KEY_SW_1_BIT
 
	`BV
(0)

	)

83 
	#HAL_KEY_SW_1_SEL
 
P0SEL


	)

84 
	#HAL_KEY_SW_1_DIR
 
P0DIR


	)

87 
	#HAL_KEY_SW_2_PORT
 
P1


	)

88 
	#HAL_KEY_SW_2_BIT
 
	`BV
(6)

	)

89 
	#HAL_KEY_SW_2_SEL
 
P1SEL


	)

90 
	#HAL_KEY_SW_2_DIR
 
P1DIR


	)

93 
	#HAL_KEY_SW_3_PORT
 
P1


	)

94 
	#HAL_KEY_SW_3_BIT
 
	`BV
(7)

	)

95 
	#HAL_KEY_SW_3_SEL
 
P1SEL


	)

96 
	#HAL_KEY_SW_3_DIR
 
P1DIR


	)

99 
	#HAL_KEY_SW_1_IEN
 
IEN1


	)

100 
	#HAL_KEY_SW_1_ICTL
 
P0IEN


	)

101 
	#HAL_KEY_SW_1_ICTLBIT
 
	`BV
(0Ë

	)

102 
	#HAL_KEY_SW_1_IENBIT
 
	`BV
(5Ë

	)

103 
	#HAL_KEY_SW_1_PXIFG
 
P0IFG


	)

105 
	#HAL_KEY_SW_2_IEN
 
IEN2


	)

106 
	#HAL_KEY_SW_2_ICTL
 
P1IEN


	)

107 
	#HAL_KEY_SW_2_ICTLBIT
 
	`BV
(6Ë

	)

108 
	#HAL_KEY_SW_2_IENBIT
 
	`BV
(4Ë

	)

109 
	#HAL_KEY_SW_2_PXIFG
 
P1IFG


	)

111 
	#HAL_KEY_SW_3_IEN
 
IEN2


	)

112 
	#HAL_KEY_SW_3_ICTL
 
P1IEN


	)

113 
	#HAL_KEY_SW_3_ICTLBIT
 
	`BV
(7Ë

	)

114 
	#HAL_KEY_SW_3_IENBIT
 
	`BV
(4Ë

	)

115 
	#HAL_KEY_SW_3_PXIFG
 
P1IFG


	)

117 
	#HAL_KEY_SW_1_EDGEBIT
 
	`BV
(0)

	)

118 
	#HAL_KEY_SW_2_3_EDGEBIT
 
	`BV
(2)

	)

123 (*
hÆKeyCBack_t
Ë(
	tuöt8
 
	tkeys
, uöt8 
	t°©e
);

128 
boﬁ
 
HÆ_KeyI¡E«bÀ
;

137 
HÆKeyInô
( );

142 
HÆKeyC⁄fig
–
boﬁ
 
öãºu±E«bÀ
, c⁄° 
hÆKeyCBack_t
 
cback
);

147 
uöt8
 
HÆKeyRód
( );

152 
HÆKeyE¡îSÀï
 ( );

157 
uöt8
 
HÆKeyExôSÀï
 ( );

162 
HÆKeyPﬁl
 ( );

167 
boﬁ
 
HÆKeyPªs£d
( );

169 
hÆPro˚ssKeyI¡îru±
();

175 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2541ST/hal_led.c

43 
	~"hÆ_mcu.h
"

44 
	~"hÆ_defs.h
"

45 
	~"hÆ_ty≥s.h
"

46 
	~"hÆ_drivîs.h
"

47 
	~"hÆ_Àd.h
"

48 
	~"oßl.h
"

49 
	~"hÆ_bﬂrd.h
"

64 
uöt8
 
	mmode
;

65 
uöt8
 
	mtodo
;

66 
uöt8
 
	m⁄P˘
;

67 
uöt16
 
	mtime
;

68 
uöt32
 
	m√xt
;

69 } 
	tHÆLedC⁄åﬁ_t
;

73 
HÆLedC⁄åﬁ_t
 
	mHÆLedC⁄åﬁTabÀ
[
HAL_LED_DEFAULT_MAX_LEDS
];

74 
uöt8
 
	m¶ìpA˘ive
;

75 } 
	tHÆLedSètus_t
;

83 
uöt8
 
	gHÆLedSèã
;

85 #i‡
HAL_LED
 =
TRUE


86 
uöt8
 
	gHÆSÀïLedSèã
;

87 
uöt8
 
	g¥eBlökSèã
;

91 #ifde‡
BLINK_LEDS


92 
HÆLedSètus_t
 
	gHÆLedSètusC⁄åﬁ
;

98 #i‡(
HAL_LED
 =
TRUE
)

99 
HÆLedUpd©e
 ();

100 
HÆLedOnOff
 (
uöt8
 
Àds
, uöt8 
mode
);

116 
	$HÆLedInô
 ()

118 #i‡(
HAL_LED
 =
TRUE
)

120 
	`HÆLedSë
 (
HAL_LED_ALL
, 
HAL_LED_MODE_OFF
);

122 #ifde‡
BLINK_LEDS


124 
HÆLedSètusC⁄åﬁ
.
¶ìpA˘ive
 = 
FALSE
;

126 
	}
}

137 
uöt8
 
	$HÆLedSë
 (
uöt8
 
Àds
, uöt8 
mode
)

140 #i‡(
	`deföed
 (
BLINK_LEDS
)Ë&& (
HAL_LED
 =
TRUE
)

141 
uöt8
 
Àd
;

142 
HÆLedC⁄åﬁ_t
 *
°s
;

144 
mode
)

146 
HAL_LED_MODE_BLINK
:

148 
	`HÆLedBlök
 (
Àds
, 1, 
HAL_LED_DEFAULT_DUTY_CYCLE
, 
HAL_LED_DEFAULT_FLASH_TIME
);

151 
HAL_LED_MODE_FLASH
:

153 
	`HÆLedBlök
 (
Àds
, 
HAL_LED_DEFAULT_FLASH_COUNT
, 
HAL_LED_DEFAULT_DUTY_CYCLE
, 
HAL_LED_DEFAULT_FLASH_TIME
);

156 
HAL_LED_MODE_ON
:

157 
HAL_LED_MODE_OFF
:

158 
HAL_LED_MODE_TOGGLE
:

160 
Àd
 = 
HAL_LED_1
;

161 
Àds
 &
HAL_LED_ALL
;

162 
°s
 = 
HÆLedSètusC⁄åﬁ
.
HÆLedC⁄åﬁTabÀ
;

164 
Àds
)

166 i‡(
Àds
 & 
Àd
)

168 i‡(
mode
 !
HAL_LED_MODE_TOGGLE
)

170 
°s
->
mode
 = mode;

174 
°s
->
mode
 ^
HAL_LED_MODE_ON
;

176 
	`HÆLedOnOff
 (
Àd
, 
°s
->
mode
);

177 
Àds
 ^
Àd
;

179 
Àd
 <<= 1;

180 
°s
++;

188 #ñi‡(
HAL_LED
 =
TRUE
)

189 
	`LedOnOff
(
Àds
, 
mode
);

192 (Ë
Àds
;

193 (Ë
mode
;

196  ( 
HÆLedSèã
 );

198 
	}
}

213 
	$HÆLedBlök
 (
uöt8
 
Àds
, uöt8 
numBlöks
, uöt8 
≥r˚¡
, 
uöt16
 
≥riod
)

215 #i‡(
	`deföed
 (
BLINK_LEDS
)Ë&& (
HAL_LED
 =
TRUE
)

216 
uöt8
 
Àd
;

217 
HÆLedC⁄åﬁ_t
 *
°s
;

219 i‡(
Àds
 && 
≥r˚¡
 && 
≥riod
)

221 i‡(
≥r˚¡
 < 100)

223 
Àd
 = 
HAL_LED_1
;

224 
Àds
 &
HAL_LED_ALL
;

225 
°s
 = 
HÆLedSètusC⁄åﬁ
.
HÆLedC⁄åﬁTabÀ
;

227 
Àds
)

229 i‡(
Àds
 & 
Àd
)

232 if(
°s
->
mode
 < 
HAL_LED_MODE_BLINK
 )

233 
¥eBlökSèã
 |(
Àd
 & 
HÆLedSèã
);

235 
°s
->
mode
 = 
HAL_LED_MODE_OFF
;

236 
°s
->
time
 = 
≥riod
;

237 
°s
->
⁄P˘
 = 
≥r˚¡
;

238 
°s
->
todo
 = 
numBlöks
;

239 i‡(!
numBlöks
Ë
°s
->
mode
 |
HAL_LED_MODE_FLASH
;

240 
°s
->
√xt
 = 
	`oßl_GëSy°emClock
();

241 
°s
->
mode
 |
HAL_LED_MODE_BLINK
;

242 
Àds
 ^
Àd
;

244 
Àd
 <<= 1;

245 
°s
++;

247 
	`oßl_£t_evít
 (
HÆ_TaskID
, 
HAL_LED_BLINK_EVENT
);

251 
	`HÆLedSë
 (
Àds
, 
HAL_LED_MODE_ON
);

256 
	`HÆLedSë
 (
Àds
, 
HAL_LED_MODE_OFF
);

258 #ñi‡(
HAL_LED
 =
TRUE
)

259 
≥r˚¡
 = (
Àds
 & 
HÆLedSèã
Ë? 
HAL_LED_MODE_OFF
 : 
HAL_LED_MODE_ON
;

260 
	`HÆLedOnOff
 (
Àds
, 
≥r˚¡
);

263 (Ë
Àds
;

264 (Ë
numBlöks
;

265 (Ë
≥r˚¡
;

266 (Ë
≥riod
;

268 
	}
}

270 #i‡(
HAL_LED
 =
TRUE
)

280 
	$HÆLedUpd©e
 ()

282 
uöt8
 
Àd
;

283 
uöt8
 
p˘
;

284 
uöt8
 
Àds
;

285 
HÆLedC⁄åﬁ_t
 *
°s
;

286 
uöt32
 
time
;

287 
uöt16
 
√xt
;

288 
uöt16
 
waô
;

290 
√xt
 = 0;

291 
Àd
 = 
HAL_LED_1
;

292 
Àds
 = 
HAL_LED_ALL
;

293 
°s
 = 
HÆLedSètusC⁄åﬁ
.
HÆLedC⁄åﬁTabÀ
;

296 i‡(!
HÆLedSètusC⁄åﬁ
.
¶ìpA˘ive
)

298 
Àds
)

300 i‡(
Àds
 & 
Àd
)

302 i‡(
°s
->
mode
 & 
HAL_LED_MODE_BLINK
)

304 
time
 = 
	`oßl_GëSy°emClock
();

305 i‡(
time
 >
°s
->
√xt
)

307 i‡(
°s
->
mode
 & 
HAL_LED_MODE_ON
)

309 
p˘
 = 100 - 
°s
->
⁄P˘
;

310 
°s
->
mode
 &~
HAL_LED_MODE_ON
;

311 
	`HÆLedOnOff
 (
Àd
, 
HAL_LED_MODE_OFF
);

313 i‡(!(
°s
->
mode
 & 
HAL_LED_MODE_FLASH
))

315 
°s
->
todo
--;

316 i‡(!
°s
->
todo
)

318 
°s
->
mode
 ^
HAL_LED_MODE_BLINK
;

324 
p˘
 = 
°s
->
⁄P˘
;

325 
°s
->
mode
 |
HAL_LED_MODE_ON
;

326 
	`HÆLedOnOff
 (
Àd
, 
HAL_LED_MODE_ON
);

329 i‡(
°s
->
mode
 & 
HAL_LED_MODE_BLINK
)

331 
waô
 = (((
uöt32
)
p˘
 * (uöt32)
°s
->
time
) / 100);

332 
°s
->
√xt
 = 
time
 + 
waô
;

337 
waô
 = 0;

339 
	`HÆLedSë
 (
Àd
, ((
¥eBlökSèã
 &Üed)!=0)?
HAL_LED_MODE_ON
:
HAL_LED_MODE_OFF
);

341 
¥eBlökSèã
 &(
Àd
 ^ 0xFF);

346 
waô
 = 
°s
->
√xt
 - 
time
;

349 i‡(!
√xt
 || ( 
waô
 && (wait <Çext) ))

351 
√xt
 = 
waô
;

354 
Àds
 ^
Àd
;

356 
Àd
 <<= 1;

357 
°s
++;

360 i‡(
√xt
)

362 
	`oßl_°¨t_timîEx
(
HÆ_TaskID
, 
HAL_LED_BLINK_EVENT
, 
√xt
);

365 
	}
}

377 
	$HÆLedOnOff
 (
uöt8
 
Àds
, uöt8 
mode
)

379 i‡(
Àds
 & 
HAL_LED_1
)

381 i‡(
mode
 =
HAL_LED_MODE_ON
)

383 
	`HAL_TURN_ON_LED1
();

387 
	`HAL_TURN_OFF_LED1
();

391 i‡(
Àds
 & 
HAL_LED_2
)

393 i‡(
mode
 =
HAL_LED_MODE_ON
)

395 
	`HAL_TURN_ON_LED2
();

399 
	`HAL_TURN_OFF_LED2
();

404 i‡(
mode
)

406 
HÆLedSèã
 |
Àds
;

410 
HÆLedSèã
 &(
Àds
 ^ 0xFF);

412 
	}
}

424 
uöt8
 
	$HÆLedGëSèã
 ()

426 #i‡(
HAL_LED
 =
TRUE
)

427  
HÆLedSèã
;

431 
	}
}

442 
	$HÆLedE¡îSÀï
( )

444 #ifde‡
BLINK_LEDS


446 
HÆLedSètusC⁄åﬁ
.
¶ìpA˘ive
 = 
TRUE
;

449 #i‡(
HAL_LED
 =
TRUE
)

451 
HÆSÀïLedSèã
 = 0;

452 
HÆSÀïLedSèã
 |
	`HAL_STATE_LED1
();

453 
HÆSÀïLedSèã
 |
	`HAL_STATE_LED2
() << 1;

456 
	`HÆLedOnOff
 (
HAL_LED_ALL
, 
HAL_LED_MODE_OFF
);

460 
	}
}

471 
	$HÆLedExôSÀï
( )

473 #i‡(
HAL_LED
 =
TRUE
)

476 
	`HÆLedOnOff
(
HÆSÀïLedSèã
, 
HAL_LED_MODE_ON
);

479 
	`HÆLedUpd©e
();

482 #ifde‡
BLINK_LEDS


484 
HÆLedSètusC⁄åﬁ
.
¶ìpA˘ive
 = 
FALSE
;

486 
	}
}

	@../../../../Components/hal/target/CC2541ST/hal_mag.c

44 
	~"hÆ_mag.h
"

45 
	~"hÆ_£ns‹.h
"

46 
	~"hÆ_i2c.h
"

52 
	#MAG_REG_READ_ALL_LEN
 6

	)

53 
	#MAG_REG_FAST_READ_LEN
 3

	)

56 
	#MAG_REG_ADDR_DR_STATUS
 0x00

57 
	#MAG_REG_ADDR_X_MSB
 0x01

58 
	#MAG_REG_ADDR_X_LSB
 0x02

59 
	#MAG_REG_ADDR_Y_MSB
 0x03

60 
	#MAG_REG_ADDR_Y_LSB
 0x04

61 
	#MAG_REG_ADDR_Z_MSB
 0x05

62 
	#MAG_REG_ADDR_Z_LSB
 0x06

63 
	#MAG_REG_ADDR_WHO_AM_I
 0x07

64 
	#MAG_REG_ADDR_SYSMOD
 0x08

65 
	#MAG_REG_ADDR_OFF_X_MSB
 0x09

66 
	#MAG_REG_ADDR_OFF_X_LSB
 0x0A

67 
	#MAG_REG_ADDR_OFF_Y_MSB
 0x0B

68 
	#MAG_REG_ADDR_OFF_Y_LSB
 0x0C

69 
	#MAG_REG_ADDR_OFF_Z_MSB
 0x0D

70 
	#MAG_REG_ADDR_OFF_Z_LSB
 0x0E

71 
	#MAG_REG_ADDR_DIE_TEMP
 0x0F

72 
	#MAG_REG_ADDR_CTRL_1
 0x10

73 
	#MAG_REG_ADDR_CTRL_2
 0x11

74 

	)

75 
	#MAG_REG_ADDR_READ_START
 
MAG_REG_ADDR_X_MSB


	)

78 
	#MAG_REG_CTRL_FR
 0x04

79 
	#MAG_REG_CTRL_TM
 0x02

80 
	#MAG_REG_CTRL_EN
 0x01

81 

	)

82 
	#MAG_REG_CTRL_DR_10HZ_OSR_1
 0x60

	)

83 
	#MAG_REG_CTRL_DR_10HZ_OSR_2
 0x48

	)

84 
	#MAG_REG_CTRL_DR_10HZ_OSR_4
 0x30

	)

85 
	#MAG_REG_CTRL_DR_10HZ_OSR_8
 0x10

	)

88 
	#WHO_AM_I_VALUE
 0xC4

	)

89 
	#CTRL1_TEST_VALUE
 0xF8

	)

92 
	#MAG_REG_CTRL_ON
 
MAG_REG_CTRL_DR_10HZ_OSR_1
 | 
MAG_REG_CTRL_EN


	)

93 
	#MAG_REG_CTRL2_AMN
 0x80

	)

94 
	#MAG_REG_CTRL_OFF
 0x00

	)

110 
HÆMagSñe˘
();

116 
Mag√tomëî_Sèãs_t
 
	g£ns‹Sèã
 = 
MAG3110_OFF
;

117 
uöt8
 
	ghÆMagSís‹C⁄fig
 = 
MAG_REG_CTRL_ON
;

118 
uöt8
 
	ghÆMagSís‹Off
 = 
MAG_REG_CTRL_OFF
;

119 
uöt8
 
	ghÆMagAutoMr°En
 = 
MAG_REG_CTRL2_AMN
;

129 
	$HÆMagInô
()

131 
£ns‹Sèã
 = 
MAG3110_OFF
;

132 
	}
}

142 
Mag√tomëî_Sèãs_t
 
	$HÆMagSètus
( )

144 if–
£ns‹Sèã
 =
MAG3110_IDLE
)

146 
uöt8
 
°©us
 = 0;

148 
	`HÆMagSñe˘
();

149 
	`HÆSís‹RódReg
–
MAG_REG_ADDR_DR_STATUS
, &
°©us
, 1);

150 if(
°©us
!=0)

152 
£ns‹Sèã
 = 
MAG3110_DATA_READY
;

156  
£ns‹Sèã
;

157 
	}
}

166 
	$HÆMagTu∫On
()

168 
	`HÆMagSñe˘
();

170 
	`HÆSís‹WrôeReg
(
MAG_REG_ADDR_CTRL_1
, &
hÆMagSís‹C⁄fig
, (halMagSensorConfig));

171 
	`HÆSís‹WrôeReg
(
MAG_REG_ADDR_CTRL_2
, &
hÆMagAutoMr°En
, (halMagAutoMrstEn));

172 
£ns‹Sèã
 = 
MAG3110_IDLE
;

173 
	}
}

183 
	$HÆMagTu∫Off
()

185 
	`HÆMagSñe˘
();

187 
	`HÆSís‹WrôeReg
(
MAG_REG_ADDR_CTRL_1
, &
hÆMagSís‹Off
, (halMagSensorOff));

188 
£ns‹Sèã
 = 
MAG3110_OFF
;

189 
	}
}

201 
boﬁ
 
	$HÆMagRód
(
uöt8
 *
pBuf
)

203 
uöt8
 
tmp
[
MAG_REG_READ_ALL_LEN
];

204 
boﬁ
 
f
;

206 
	`HÆMagSñe˘
();

208 
f
 = 
	`HÆSís‹RódReg
(
MAG_REG_ADDR_READ_START
,
tmp
,
MAG_REG_READ_ALL_LEN
);

209 i‡(
f
)

212 
pBuf
[0] = 
tmp
[1];

213 
pBuf
[1] = 
tmp
[0];

214 
pBuf
[2] = 
tmp
[3];

215 
pBuf
[3] = 
tmp
[2];

216 
pBuf
[4] = 
tmp
[5];

217 
pBuf
[5] = 
tmp
[4];

219 
£ns‹Sèã
 = 
MAG3110_IDLE
;

221  
f
;

222 
	}
}

232 
boﬁ
 
	$HÆMagTe°
()

234 
uöt8
 
vÆ
;

237 
	`HÆMagSñe˘
();

240 
	`ST_ASSERT
(
	`HÆSís‹RódReg
(
MAG_REG_ADDR_WHO_AM_I
, &
vÆ
, (val)));

241 
	`ST_ASSERT
(
vÆ
==
WHO_AM_I_VALUE
);

244 
	`ST_ASSERT
(
	`HÆSís‹RódReg
(
MAG_REG_ADDR_CTRL_1
, &
vÆ
, (val)));

245 
	`ST_ASSERT
(
vÆ
==
MAG_REG_CTRL_OFF
);

248 
vÆ
 = 
CTRL1_TEST_VALUE
;

249 
	`ST_ASSERT
(
	`HÆSís‹WrôeReg
(
MAG_REG_ADDR_CTRL_1
, &
vÆ
, (val)));

250 
	`ST_ASSERT
(
	`HÆSís‹RódReg
(
MAG_REG_ADDR_CTRL_1
, &
vÆ
, (val)));

251 
	`ST_ASSERT
(
vÆ
==
CTRL1_TEST_VALUE
);

254 
vÆ
 = 
MAG_REG_CTRL_OFF
;

255 
	`ST_ASSERT
(
	`HÆSís‹WrôeReg
(
MAG_REG_ADDR_CTRL_1
, &
vÆ
, (val)));

258 
	`ST_ASSERT
(
	`HÆSís‹RódReg
(
MAG_REG_ADDR_SYSMOD
, &
vÆ
, (val)));

259 
	`ST_ASSERT
(
vÆ
==0);

261  
TRUE
;

262 
	}
}

276 
	$HÆMagSñe˘
()

279 
	`HÆI2CInô
(
HAL_MAG3110_I2C_ADDRESS
,
i2cClock_267KHZ
);

280 
	}
}

	@../../../../Components/hal/target/CC2541ST/hal_mag.h

38 #i‚de‡
HAL_MAG_H


39 
	#HAL_MAG_H


	)

41 #ifde‡
__˝lu•lus


49 
	~"comdef.h
"

55 
	#HAL_MAG3110_I2C_ADDRESS
 0x0E

	)

56 
	#HAL_MAG3110_PERIOD_MASK
 0x10

	)

57 
	#HAL_MAG3110_ENABLE_MASK
 0x01

	)

65 
MAG3110_OFF
,

66 
MAG3110_IDLE
,

67 
MAG3110_DATA_READY
,

68 } 
	tMag√tomëî_Sèãs_t
;

74 
HÆMagInô
();

75 
HÆMagTu∫On
();

76 
HÆMagTu∫Off
();

77 
boﬁ
 
HÆMagRód
(
uöt8
 *
pBuf
);

78 
boﬁ
 
HÆMagTe°
();

79 
Mag√tomëî_Sèãs_t
 
HÆMagSètus
( );

84 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2541ST/hal_mcu.h

40 #i‚de‡
_HAL_MCU_H


41 
	#_HAL_MCU_H


	)

53 
	~"hÆ_defs.h
"

54 
	~"hÆ_ty≥s.h
"

61 
	#HAL_MCU_CC2540


	)

70 #ifde‡
__IAR_SYSTEMS_ICC__


72 #i‡
deföed
–
CC2541
Ë|| deföed–
CC2541S
 )

73 
	~<ioCC2541.h
>

75 
	~<ioCC2540.h
>

78 
	#HAL_COMPILER_IAR


	)

79 
	#HAL_MCU_LITTLE_ENDIAN
(Ë
__LITTLE_ENDIAN__


	)

80 
	#_PRAGMA
(
x
Ë
	`_Pøgma
(#x)

	)

81 
	#HAL_ISR_FUNC_DECLARATION
(
f
,
v
Ë
	`_PRAGMA
(
ve˘‹
=vË
__√¨_func
 
__öãºu±
 
	`f
()

	)

82 
	#HAL_ISR_FUNC_PROTOTYPE
(
f
,
v
Ë
	`_PRAGMA
(
ve˘‹
=vË
__√¨_func
 
__öãºu±
 
	`f
()

	)

83 
	#HAL_ISR_FUNCTION
(
f
,
v
Ë
	`HAL_ISR_FUNC_PROTOTYPE
(f,v); 
	`HAL_ISR_FUNC_DECLARATION
(f,v)

	)

86 #ñi‡
deföed
 
__KEIL__


88 #i‡
deföed
–
CC2541
Ë|| deföed–
CC2541S
 )

89 
	~<CC2541.h
>

91 
	~<CC2540.h
>

94 
	#HAL_COMPILER_KEIL


	)

95 
	#HAL_MCU_LITTLE_ENDIAN
(Ë0

	)

96 
	#HAL_ISR_FUNC_DECLARATION
(
f
,
v
Ë
	`f
(Ë
öãºu±
 
	)
v

97 
	#HAL_ISR_FUNC_PROTOTYPE
(
f
,
v
Ë
	`f
()

	)

98 
	#HAL_ISR_FUNCTION
(
f
,
v
Ë
	`HAL_ISR_FUNC_PROTOTYPE
(f,v); 
	`HAL_ISR_FUNC_DECLARATION
(f,v)

	)

110 
	#HAL_ENABLE_INTERRUPTS
(Ë
	`°
–
EA
 = 1; )

	)

111 
	#HAL_DISABLE_INTERRUPTS
(Ë
	`°
–
EA
 = 0; )

	)

112 
	#HAL_INTERRUPTS_ARE_ENABLED
(Ë(
EA
)

	)

114 
	thÆI¡Sèã_t
;

115 
	#HAL_ENTER_CRITICAL_SECTION
(
x
Ë
	`°
–x = 
EA
; 
	`HAL_DISABLE_INTERRUPTS
(); )

	)

116 
	#HAL_EXIT_CRITICAL_SECTION
(
x
Ë
	`°
–
EA
 = x; )

	)

117 
	#HAL_CRITICAL_STATEMENT
(
x
Ë
	`°
–
hÆI¡Sèã_t
 
_s
; 
	`HAL_ENTER_CRITICAL_SECTION
(_s); x; 
	`HAL_EXIT_CRITICAL_SECTION
(_s); )

	)

119 #ifde‡
__IAR_SYSTEMS_ICC__


125 
	#HAL_ENTER_ISR
(Ë{ 
hÆI¡Sèã_t
 
_i§I¡Sèã
 = 
EA
; 
	`HAL_ENABLE_INTERRUPTS
();

	)

126 
	#HAL_EXIT_ISR
(Ë
EA
 = 
_i§I¡Sèã
; }

	)

128 
	#HAL_ENTER_ISR
()

	)

129 
	#HAL_EXIT_ISR
()

	)

136 
	#WD_EN
 
	`BV
(3)

	)

137 
	#WD_MODE
 
	`BV
(2)

	)

138 
	#WD_INT_1900_USEC
 (
	`BV
(0Ë| BV(1))

	)

139 
	#WD_RESET1
 (0xA0 | 
WD_EN
 | 
WD_INT_1900_USEC
)

	)

140 
	#WD_RESET2
 (0x50 | 
WD_EN
 | 
WD_INT_1900_USEC
)

	)

141 
	#WD_KICK
(Ë
	`°
–
WDCTL
 = (0xA0 | WDCTL & 0x0F); WDCTL = (0x50 | WDCTL & 0x0F); )

	)

144 
	#HAL_SYSTEM_RESET
(Ë
	`°
–
	`HAL_DISABLE_INTERRUPTS
(); 
WDCTL
 = 
WD_RESET1
; WDCTL = 
WD_RESET2
; ;;); )

	)

150 
	#REV_A
 0x00

	)

151 
	#REV_B
 0x11

	)

152 
	#REV_C
 0x20

	)

153 
	#REV_D
 0x21

	)

161 
	#PCON_IDLE
 
	`BV
(0Ë

	)

164 
	#OSC_PD
 
	`BV
(2Ë

	)

165 
	#PMODE
 (
	`BV
(1Ë| BV(0)Ë

	)

168 
	#XOSC_STB
 
	`BV
(6Ë

	)

169 
	#HFRC_STB
 
	`BV
(5Ë

	)

172 
	#OSC_PD
 
	`BV
(2Ë

	)

176 
	#OSC
 
	`BV
(6)

	)

177 
	#TICKSPD
(
x
Ë(x << 3)

	)

178 
	#CLKSPD
(
x
Ë(x << 0)

	)

179 
	#CLKCONCMD_32MHZ
 (0)

	)

180 
	#CLKCONCMD_16MHZ
 (
	`CLKSPD
(1Ë| 
	`TICKSPD
(1Ë| 
OSC
)

	)

183 
	#LDRDY
 
	`BV
(0Ë

	)

187 #ifde‡
POWER_SAVING


188 vﬁ©ûê
__d©a
 
uöt8
 
hÆSÀïPc⁄VÆue
;

193 
	#CLEAR_SLEEP_MODE
(Ë
	`°
–
hÆSÀïPc⁄VÆue
 = 0; )

	)

194 
	#ALLOW_SLEEP_MODE
(Ë
	`°
–
hÆSÀïPc⁄VÆue
 = 
PCON_IDLE
; )

	)

196 
	#CLEAR_SLEEP_MODE
()

	)

197 
	#ALLOW_SLEEP_MODE
()

	)

	@../../../../Components/hal/target/CC2541ST/hal_sensor.c

44 
	~"hÆ_£ns‹.h
"

45 
	~"hÆ_i2c.h
"

46 
	~"hÆ_Àd.h
"

47 
	~"hÆ_úãmp.h
"

48 
	~"hÆ_humi.h
"

49 
	~"hÆ_b¨.h
"

50 
	~"hÆ_mag.h
"

51 
	~"hÆ_acc.h
"

52 
	~"hÆ_gyro.h
"

58 
	#N_TEST_RUNS
 10

	)

64 
uöt8
 
	gbuf„r
[24];

65 
uöt8
 
	ghÆSís‹E«bÀM≠
;

79 
boﬁ
 
	$HÆSís‹RódReg
(
uöt8
 
addr
, uöt8 *
pBuf
, uöt8 
nByãs
)

81 
uöt8
 
i
 = 0;

84 i‡(
	`HÆI2CWrôe
(1,&
addr
) == 1)

87 
i
 = 
	`HÆI2CRód
(
nByãs
,
pBuf
);

90  
i
 =
nByãs
;

91 
	}
}

104 
boﬁ
 
	$HÆSís‹WrôeReg
(
uöt8
 
addr
, uöt8 *
pBuf
, uöt8 
nByãs
)

106 
uöt8
 
i
;

107 
uöt8
 *
p
 = 
buf„r
;

110 *
p
++ = 
addr
;

111 
i
 = 0; i < 
nByãs
; i++)

113 *
p
++ = *
pBuf
++;

115 
nByãs
++;

118 
i
 = 
	`HÆI2CWrôe
(
nByãs
, 
buf„r
);

119 i‡–
i
!
nByãs
)

120 
	`HAL_TOGGLE_LED2
();

122  (
i
 =
nByãs
);

123 
	}
}

134 
uöt16
 
	$HÆSís‹Te°
()

136 
uöt16
 
i
;

137 
uöt8
 
£lfTe°Resu…
;

139 
hÆSís‹E«bÀM≠
 = 0;

140 
£lfTe°Resu…
 = 0;

141 
	`HÆGyroTu∫On
();

143 
i
=0; i<
N_TEST_RUNS
; i++)

145 
	`HÆLedSë
(
HAL_LED_2
,
HAL_LED_MODE_TOGGLE
);

148 i‡(
	`HÆIRTempTe°
())

149 
£lfTe°Resu…
 |
ST_IRTEMP
;

152 i‡(
	`HÆHumiTe°
())

153 
£lfTe°Resu…
 |
ST_HUMID
;

156 i‡(
	`HÆMagTe°
())

157 
£lfTe°Resu…
 |
ST_MAGN
;

160 i‡(
	`HÆAccTe°
())

161 
£lfTe°Resu…
 |
ST_ACC
;

164 i‡(
	`HÆB¨Te°
())

165 
£lfTe°Resu…
 |
ST_PRESS
;

168 i‡(
	`HÆGyroTe°
())

169 
£lfTe°Resu…
 |
ST_GYRO
;

172 
	`HÆGyroTu∫Off
();

174  
£lfTe°Resu…
;

175 
	}
}

191 
	$HÆDcDcC⁄åﬁ
(
uöt8
 
£ns‹ID
, 
boﬁ
 
powîOn
)

193 i‡(
powîOn
)

195 
hÆSís‹E«bÀM≠
 |
£ns‹ID
;

199 
hÆSís‹E«bÀM≠
 &~
£ns‹ID
;

202 i‡(
hÆSís‹E«bÀM≠
 & 
HIGH_SUPPLY_SENSOR_MAP
)

205 
DCDC_SBIT
 = 0;

210 
DCDC_SBIT
 = 1;

212 
	}
}

	@../../../../Components/hal/target/CC2541ST/hal_sensor.h

40 #i‚de‡
HAL_SENSOR_H


41 
	#HAL_SENSOR_H


	)

43 #ifde‡
__˝lu•lus


51 
	~"hÆ_ty≥s.h
"

58 
	#ST_IRTEMP
 0x01

	)

59 
	#ST_HUMID
 0x02

	)

60 
	#ST_MAGN
 0x04

	)

61 
	#ST_ACC
 0x08

	)

62 
	#ST_PRESS
 0x10

	)

63 
	#ST_GYRO
 0x20

	)

65 
	#HIGH_SUPPLY_SENSOR_MAP
 ( 
ST_IRTEMP
 | 
ST_HUMID
 | 
ST_GYRO
)

	)

68 
	#ST_ASSERT
(
c⁄d
Ë
	`°
–i‡(!(c⁄d)Ë 
FALSE
; )

	)

71 
	#ST_HAL_DELAY
(
n
Ë
	`°
–{ vﬁ©ûê
uöt32
 
i
; i=0; i<“); i++Ë{ }; } )

	)

76 
boﬁ
 
HÆSís‹RódReg
(
uöt8
 
addr
, uöt8 *
pBuf
, uöt8 
nByãs
);

77 
boﬁ
 
HÆSís‹WrôeReg
(
uöt8
 
addr
, uöt8 *
pBuf
, uöt8 
nByãs
);

78 
uöt16
 
HÆSís‹Te°
();

79 
HÆDcDcC⁄åﬁ
(
uöt8
 
£ns‹ID
, 
boﬁ
 
powîOn
);

83 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2541ST/hal_sleep.c

43 
	~"hÆ_ty≥s.h
"

44 
	~"hÆ_mcu.h
"

45 
	~"hÆ_bﬂrd.h
"

46 
	~"hÆ_¶ìp.h
"

47 
	~"hÆ_Àd.h
"

48 
	~"hÆ_key.h
"

49 
	~"hÆ_i2c.h
"

50 
	~"OSAL.h
"

51 
	~"OSAL_Timîs.h
"

52 
	~"OSAL_Tasks.h
"

53 
	~"OSAL_PwrMgr.h
"

54 
	~"hÆ_drivîs.h
"

55 
	~"hÆ_as£π.h
"

56 
	~"Œ_¶ìp.h
"

57 
	~"Œ_timî2.h
"

58 
	~"Œ_m©h.h
"

64 
	#I2C_DISABLE
(Ë
	`°
–
I2CCFG
 &~(
I2C_ENS1
); )

	)

66 #i‚de‡
HAL_SLEEP_DEBUG_POWER_MODE


68 
	#HAL_SLEEP_PREP_POWER_MODE
(
mode
) \

69 
	`°
–
SLEEPCMD
 &~
PMODE
; \

70 
SLEEPCMD
 |
mode
; \

71 !(
STLOAD
 & 
LDRDY
)); \

72 
hÆSÀïPc⁄VÆue
 = 
PCON_IDLE
; \

73 )

	)

74 
	#HAL_SLEEP_SET_POWER_MODE
() \

75 
	`hÆSëSÀïMode
()

	)

80 
	#HAL_SLEEP_PREP_POWER_MODE
(
mode
Ë

	)

81 
	#HAL_SLEEP_SET_POWER_MODE
() \

82 
	`°
–
hÆSÀïI¡
 =
FALSE
); \

83 
hÆSÀïI¡
 = 
FALSE
; \

84 
	`HAL_DISABLE_INTERRUPTS
(); \

85 )

	)

89 
	#HAL_SLEEP_TIMER_ENABLE_INT
(Ë
	`°
(
IEN0
 |
STIE_BV
;)

90 
	#HAL_SLEEP_TIMER_DISABLE_INT
(Ë
	`°
(
IEN0
 &~
STIE_BV
;)

91 
	#HAL_SLEEP_TIMER_CLEAR_INT
(Ë
	`°
(
IRCON
 &= ~0x80;)

92 

	)

94 
	#HAL_SLEEP_IE_BACKUP_AND_DISABLE
–
õn0
, 
õn1
, 
õn2
 ) \

95 
	`°
–(
õn0
Ë
IEN0
; \

96 (
õn1
Ë
IEN1
; \

97 (
õn2
Ë
IEN2
; \

98 
IEN0
 &
STIE_BV
; \

99 
IEN1
 &
P0IE_BV
; \

100 
IEN2
 &(
P1IE_BV
|
P2IE_BV
); \

101 )

	)

104 
	#HAL_SLEEP_IE_RESTORE
–
õn0
, 
õn1
, 
õn2
 ) \

105 
	`°
–
IEN0
 = (
õn0
); \

106 
IEN1
 = (
õn1
); \

107 
IEN2
 = (
õn2
); \

108 )

	)

111 
	#HAL_SLEEP_MS_TO_625US
–
ms
 ) (((((
uöt32
Ë(ms)Ë* 8Ë+ 4Ë/ 5)

	)

115 
	#HAL_SLEEP_MS_TO_32KHZ
–
ms
 ) ((((
uöt32
Ë(ms)Ë* 4096Ë/ 125)

	)

118 
	#MAX_16BIT_TIMEOUT
 0xFFFF

	)

126 
	#CC2540_PM0
 0

127 
	#CC2540_PM1
 1

128 
	#CC2540_PM2
 2

129 
	#CC2540_PM3
 3

130 

	)

137 
	#HAL_SLEEP_OFF
 
CC2540_PM0


	)

138 
	#HAL_SLEEP_TIMER
 
CC2540_PM2


	)

139 
	#HAL_SLEEP_DEEP
 
CC2540_PM3


	)

144 
	#MAX_SLEEP_TIME
 16711680

145 

	)

149 #i‡!
deföed
 (
PM_MIN_SLEEP_TIME
)

150 
	#PM_MIN_SLEEP_TIME
 66

152 

	)

159 #i‡
deföed
–
CC2541
Ë|| deföed–
CC2541S
 )

160 
	#HAL_SLEEP_ADJ_TICKS
 25

161 #ñ£ // CC2540

	)

162 
	#HAL_SLEEP_ADJ_TICKS
 35

164 

	)

166 
	#STIE_BV
 
	`BV
(5)

	)

167 
	#P0IE_BV
 
	`BV
(5)

	)

168 
	#P1IE_BV
 
	`BV
(4)

	)

169 
	#P2IE_BV
 
	`BV
(1)

	)

172 #i‡
HAL_MCU_LITTLE_ENDIAN
()

173 
	#UINT32_NDX0
 0

	)

174 
	#UINT32_NDX1
 1

	)

175 
	#UINT32_NDX2
 2

	)

176 
	#UINT32_NDX3
 3

	)

178 
	#UINT32_NDX0
 3

	)

179 
	#UINT32_NDX1
 2

	)

180 
	#UINT32_NDX2
 1

	)

181 
	#UINT32_NDX3
 0

	)

193 
uöt8
 
	ghÆPwrMgtMode
 = 
HAL_SLEEP_OFF
;

196 
uöt8
 
	gwakeF‹RF
;

198 #ifde‡
HAL_SLEEP_DEBUG_POWER_MODE


199 
boﬁ
 
	ghÆSÀïI¡
 = 
FALSE
;

207 vﬁ©ûê
__d©a
 
uöt8
 
	ghÆSÀïPc⁄VÆue
 = 
PCON_IDLE
;

216 #¥agm®
loˇti⁄
 = "SLEEP_CODE"

217 
hÆSëSÀïMode
();

219 
hÆSÀïSëTimî
–
uöt32
 
¶ìpTime
, uöt32 
timeout
 );

220 
uöt32
 
hÆSÀïRódTimî
( );

221 
uöt32
 
TimîEœp£d
( );

241 #¥agm®
›timize
=
n⁄e


242 
	$hÆSëSÀïMode
()

245 
PCON
 = 
hÆSÀïPc⁄VÆue
;

247 
	`HAL_DISABLE_INTERRUPTS
();

248 
	}
}

267 
	$hÆSÀï
–
uöt32
 
oßl_timeout
 )

269 
uöt32
 
timeout
;

270 
uöt32
 
ŒTimeout
;

271 
uöt32
 
¶ìpTimî
;

273 #ifde‡
DEBUG_GPIO


275 
P1_0
 = 1;

278 i‡(
oßl_timeout
 > 
MAX_16BIT_TIMEOUT
)

280 
oßl_timeout
 = 
MAX_16BIT_TIMEOUT
;

284 
	`LL_TimeToNextRfEvít
–&
¶ìpTimî
, &
ŒTimeout
 );

290 i‡(
oßl_timeout
 == 0)

293 
timeout
 = 
ŒTimeout
;

298 
wakeF‹RF
 = (
timeout
 !0Ë? 
TRUE
 : 
FALSE
;

304 
timeout
 = 
	`HAL_SLEEP_MS_TO_32KHZ
–
oßl_timeout
 );

307 i‡((
ŒTimeout
 !0Ë&& (ŒTimeouà< 
timeout
))

310 
timeout
 = 
ŒTimeout
;

313 
wakeF‹RF
 = 
TRUE
;

318 
¶ìpTimî
 = 
	`hÆSÀïRódTimî
();

321 
wakeF‹RF
 = 
FALSE
;

326 
hÆPwrMgtMode
 = (
timeout
 =0Ë? 
HAL_SLEEP_DEEP
 : 
HAL_SLEEP_TIMER
;

328 #ifde‡
DEBUG_GPIO


330 
P1_0
 = 0;

334 i‡–(
timeout
 > 
PM_MIN_SLEEP_TIME
) || (timeout == 0) )

336 
hÆI¡Sèã_t
 
õn0
, 
õn1
, 
õn2
;

338 #ifde‡
DEBUG_GPIO


340 
P1_0
 = 1;

343 
	`HAL_ASSERT
–
	`HAL_INTERRUPTS_ARE_ENABLED
() );

344 
	`HAL_DISABLE_INTERRUPTS
();

347 i‡–
	`LL_PowîOffReq
(
hÆPwrMgtMode
Ë=
LL_SLEEP_REQUEST_ALLOWED
 )

349 #i‡((
deföed
 
HAL_KEY
Ë&& (HAL_KEY =
TRUE
))

351 
	`HÆKeyE¡îSÀï
();

354 #ifde‡
HAL_SLEEP_DEBUG_LED


355 
	`HAL_TURN_OFF_LED3
();

358 
	`HÆLedE¡îSÀï
();

362 i‡(
timeout
 != 0)

365 i‡(
timeout
 > 
MAX_SLEEP_TIME
 )

368 
	`hÆSÀïSëTimî
–
¶ìpTimî
, 
MAX_SLEEP_TIME
 );

373 
	`hÆSÀïSëTimî
–
¶ìpTimî
, 
timeout
 );

378 
	`HAL_SLEEP_PREP_POWER_MODE
(
hÆPwrMgtMode
);

381 
	`HAL_SLEEP_IE_BACKUP_AND_DISABLE
(
õn0
, 
õn1
, 
õn2
);

382 
	`HAL_ENABLE_INTERRUPTS
();

385 
	`HÆI2CDißbÀ
();

388 
DCDC_SBIT
 = 0;

390 #ifde‡
DEBUG_GPIO


392 
P1_0
 = 0;

400 
	`HAL_SLEEP_SET_POWER_MODE
();

402 #ifde‡
DEBUG_GPIO


404 
P1_0
 = 1;

417 i‡–(
wakeF‹RF
 =
TRUE
Ë&& !(
IRCON
 & 0x80) )

419 
wakeF‹RF
 = 
FALSE
;

423 
	`HAL_SLEEP_IE_RESTORE
(
õn0
, 
õn1
, 
õn2
);

428 
	`LL_PowîOnReq
–(
hÆPwrMgtMode
 =
CC2540_PM3
), 
wakeF‹RF
 );

430 #ifde‡
HAL_SLEEP_DEBUG_LED


431 
	`HAL_TURN_ON_LED3
();

434 
	`HÆLedExôSÀï
();

437 #i‡((
deföed
 
HAL_KEY
Ë&& (HAL_KEY =
TRUE
))

439 ()
	`HÆKeyExôSÀï
();

443 
	`HAL_ENABLE_INTERRUPTS
();

446 #ifde‡
DEBUG_GPIO


448 
P1_0
 = 0;

452 
DCDC_SBIT
 = 1;

455 
	}
}

483 
	$hÆSÀïSëTimî
–
uöt32
 
¶ìpTimî
, uöt32 
timeout
 )

485 
	`HAL_SLEEP_TIMER_DISABLE_INT
();

488 
¶ìpTimî
 +
timeout
;

491 
¶ìpTimî
 -
HAL_SLEEP_ADJ_TICKS
;

494 
ST2
 = ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX2
];

495 
ST1
 = ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX1
];

496 
ST0
 = ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX0
];

498 
	`HAL_SLEEP_TIMER_CLEAR_INT
();

499 
	`HAL_SLEEP_TIMER_ENABLE_INT
();

502 
	}
}

520 
uöt32
 
	$hÆSÀïRódTimî
( )

522 
uöt32
 
¶ìpTimî
;

526 ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX0
] = 
ST0
;

527 ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX1
] = 
ST1
;

528 ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX2
] = 
ST2
;

529 ((
uöt8
 *)&
¶ìpTimî
)[
UINT32_NDX3
] = 0;

531 –
¶ìpTimî
 );

532 
	}
}

550 
uöt32
 
	$TimîEœp£d
( )

553 
	}
}

571 
	$hÆRe°‹eSÀïLevñ
( )

574 #ifde‡
PM_TEST


575 
	`oßl_°¨t_timîEx
 (
HÆ_TaskID
, 
HAL_SLEEP_TIMER_EVENT
, 1000);

577 
	}
}

595 
	$HAL_ISR_FUNCTION
(
hÆSÀïTimîI§
, 
ST_VECTOR
)

597 
	`HAL_ENTER_ISR
();

599 
	`HAL_SLEEP_TIMER_CLEAR_INT
();

601 #ifde‡
HAL_SLEEP_DEBUG_POWER_MODE


602 
hÆSÀïI¡
 = 
TRUE
;

605 
	`CLEAR_SLEEP_MODE
();

607 
	`HAL_EXIT_ISR
();

610 
	}
}

	@../../../../Components/hal/target/CC2541ST/hal_startup.c

42 
	~"hÆ_bﬂrd.h
"

43 
	~"hÆ_ty≥s.h
"

45 #ifde‡
__˝lu•lus


49 #¥agm®
œnguage
=
exãnded


54 #¥agm®
loˇti⁄
="CSTART"

59 #i‡(
__CODE_MODEL__
 == 2)

60 
__√¨_func
 
__roŸ
 

62 
__roŸ
 

64 
__low_Àvñ_öô
();

77 #i‡(
__CODE_MODEL__
 == 2)

78 
__√¨_func
 
__roŸ
 

80 
__roŸ
 

82 
__low_Àvñ_öô
()

88 #i‡
deföed
 
HAL_IMAGE_A


89 
MEMCTR
 = (MEMCTR & 0xF8) | 0x05;

90 #ñi‡
deföed
 
HAL_IMAGE_B


91 
MEMCTR
 = (MEMCTR & 0xF8) | 0x04;

93 
MEMCTR
 = (MEMCTR & 0xF8) | 0x01;

105 #¥agm®
œnguage
=

107 #ifde‡
__˝lu•lus


	@../../../../Components/hal/target/CC2541ST/hal_timer.c

	@../../../../Components/hal/target/CC2541ST/hal_types.h

44 #i‚de‡
_HAL_TYPES_H


45 
	#_HAL_TYPES_H


	)

56 sig√d 
	töt8
;

57 
	tuöt8
;

59 sig√d 
	töt16
;

60 
	tuöt16
;

62 sig√d 
	töt32
;

63 
	tuöt32
;

65 
	tboﬁ
;

67 
uöt8
 
	thÆD©aAlign_t
;

76 #ifde‡
__IAR_SYSTEMS_ICC__


77 
	#CODE
 
__code


	)

78 
	#XDATA
 
__xd©a


	)

79 
	#DATA
 
__d©a


	)

80 
	#NEAR_FUNC
 
__√¨_func


	)

81 
	#ASM_NOP
 
	`asm
("NOP")

	)

84 #ñi‡
deföed
 
__KEIL__


85 
	#CODE
 
code


	)

86 
	#XDATA
 
xd©a


	)

87 
	#ASM_NOP
 
	`__n›
()

	)

90 #ñi‡
deföed
 
__GNUC__


91 
	#ASM_NOP
 
__asm__
 
	`__vﬁ©ûe__
 ("n›")

	)

94 #ñi‡
_MSC_VER


95 
	#ASM_NOP
 
__asm
 
NOP


	)

98 #ñi‡
deföed
 
__TI_COMPILER_VERSION


99 
	#ASM_NOP
 
	`asm
(" NOP")

	)

111 #i‚de‡
TRUE


112 
	#TRUE
 1

	)

115 #i‚de‡
FALSE


116 
	#FALSE
 0

	)

119 #i‚de‡
NULL


120 
	#NULL
 0

	)

	@../../../../Components/osal/common/OSAL.c

46 
	~<°rög.h
>

48 
	~"comdef.h
"

49 
	~"hÆ_bﬂrd.h
"

50 
	~"OSAL.h
"

51 
	~"OSAL_Tasks.h
"

52 
	~"OSAL_Mem‹y.h
"

53 
	~"OSAL_PwrMgr.h
"

54 
	~"OSAL_Clock.h
"

56 
	~"OnBﬂrd.h
"

59 
	~"hÆ_drivîs.h
"

61 #ifde‡
IAR_ARMCM3_LM


62 
	~"FªeRTOSC⁄fig.h
"

63 
	~"oßl_èsk.h
"

83 
oßl_msg_q_t
 
	goßl_qHód
;

98 
uöt8
 
	ga˘iveTaskID
 = 
TASK_NO_TASK
;

104 
uöt8
 
oßl_msg_íqueue_push
–uöt8 
de°ö©i⁄_èsk
, uöt8 *
msg_±r
, uöt8 
urgít
 );

110 #ifde‡
__KEIL__


111 * 
	$ôﬂ
 ( 
vÆue
, * 
buf„r
, 
ødix
 )

113 (
buf„r
);

114 
	}
}

129 
	$oßl_°æí
–*
pSåög
 )

131  ()–
	`°æí
–
pSåög
 ) );

132 
	}
}

151 *
	$oßl_mem˝y
–*
d°
, c⁄° 
GENERIC
 *
§c
, 
Àn
 )

153 
uöt8
 *
pD°
;

154 c⁄° 
uöt8
 
GENERIC
 *
pSrc
;

156 
pSrc
 = 
§c
;

157 
pD°
 = 
d°
;

159  
Àn
-- )

160 *
pD°
++ = *
pSrc
++;

162  ( 
pD°
 );

163 
	}
}

182 *
	$oßl_ªvmem˝y
–*
d°
, c⁄° 
GENERIC
 *
§c
, 
Àn
 )

184 
uöt8
 *
pD°
;

185 c⁄° 
uöt8
 
GENERIC
 *
pSrc
;

187 
pSrc
 = 
§c
;

188 
pSrc
 +(
Àn
-1);

189 
pD°
 = 
d°
;

191  
Àn
-- )

192 *
pD°
++ = *
pSrc
--;

194  ( 
pD°
 );

195 
	}
}

209 *
	$oßl_memdup
–c⁄° 
GENERIC
 *
§c
, 
Àn
 )

211 
uöt8
 *
pD°
;

213 
pD°
 = 
	`oßl_mem_Æloc
–
Àn
 );

214 i‡–
pD°
 )

216 
VOID
 
	`oßl_mem˝y
–
pD°
, 
§c
, 
Àn
 );

219  ( (*)
pD°
 );

220 
	}
}

235 
uöt8
 
	$oßl_memcmp
–c⁄° 
GENERIC
 *
§c1
, c⁄° GENERIC *
§c2
, 
Àn
 )

237 c⁄° 
uöt8
 
GENERIC
 *
pSrc1
;

238 c⁄° 
uöt8
 
GENERIC
 *
pSrc2
;

240 
pSrc1
 = 
§c1
;

241 
pSrc2
 = 
§c2
;

243  
Àn
-- )

245 if–*
pSrc1
++ !*
pSrc2
++ )

246  
FALSE
;

248  
TRUE
;

249 
	}
}

265 *
	$oßl_mem£t
–*
de°
, 
uöt8
 
vÆue
, 
Àn
 )

267  
	`mem£t
–
de°
, 
vÆue
, 
Àn
 );

268 
	}
}

281 
uöt16
 
	$oßl_buûd_uöt16
–
uöt8
 *
sw≠≥d
 )

283  ( 
	`BUILD_UINT16
–
sw≠≥d
[0], swapped[1] ) );

284 
	}
}

298 
uöt32
 
	$oßl_buûd_uöt32
–
uöt8
 *
sw≠≥d
, uöt8 
Àn
 )

300 i‡–
Àn
 == 2 )

301  ( 
	`BUILD_UINT32
–
sw≠≥d
[0], swapped[1], 0L, 0L ) );

302 i‡–
Àn
 == 3 )

303  ( 
	`BUILD_UINT32
–
sw≠≥d
[0], swapped[1], swapped[2], 0L ) );

304 i‡–
Àn
 == 4 )

305  ( 
	`BUILD_UINT32
–
sw≠≥d
[0], swapped[1], swapped[2], swapped[3] ) );

307  ( (
uöt32
)
sw≠≥d
[0] );

308 
	}
}

310 #i‡!
deföed
 ( 
ZBIT
 ) && !deföed ( 
ZBIT2
 ) && !deföed (
UBIT
)

324 * 
	$_…ﬂ
(
l
, *
buf
, 
ødix
)

326 #i‡
	`deföed
–
__GNUC__
 )

327  ( (*)
	`…ﬂ
–
l
, 
buf
, 
ødix
 ) );

329 
tmp1
[10] = "", 
tmp2
[10] = "", 
tmp3
[10] = "";

330 
num1
, 
num2
, 
num3
;

331 
i
;

333 
buf
[0] = '\0';

335 i‡–
ødix
 == 10 )

337 
num1
 = 
l
 % 10000;

338 
num2
 = (
l
 / 10000) % 10000;

339 
num3
 = ()(
l
 / 100000000);

341 i‡(
num3
Ë
	`_ôﬂ
“um3, 
tmp3
, 10);

342 i‡(
num2
Ë
	`_ôﬂ
“um2, 
tmp2
, 10);

343 i‡(
num1
Ë
	`_ôﬂ
“um1, 
tmp1
, 10);

345 i‡(
num3
)

347 
	`°r˝y
((*)
buf
, (c⁄°*)
tmp3
);

348 
i
 = 0; i < 4 - 
	`°æí
((c⁄°*)
tmp2
); i++)

349 
	`°rˇt
((*)
buf
, "0");

351 
	`°rˇt
((*)
buf
, (c⁄°*)
tmp2
);

352 i‡(
num3
 || 
num2
)

354 
i
 = 0; i < 4 - 
	`°æí
((c⁄°*)
tmp1
); i++)

355 
	`°rˇt
((*)
buf
, "0");

357 
	`°rˇt
((*)
buf
, (c⁄°*)
tmp1
);

358 i‡(!
num3
 && !
num2
 && !
num1
)

359 
	`°r˝y
((*)
buf
, "0");

361 i‡–
ødix
 == 16 )

363 
num1
 = 
l
 & 0x0000FFFF;

364 
num2
 = 
l
 >> 16;

366 i‡(
num2
Ë
	`_ôﬂ
“um2, 
tmp2
, 16);

367 i‡(
num1
Ë
	`_ôﬂ
“um1, 
tmp1
, 16);

369 i‡(
num2
)

371 
	`°r˝y
((*)
buf
,(c⁄°*)
tmp2
);

372 
i
 = 0; i < 4 - 
	`°æí
((c⁄°*)
tmp1
); i++)

373 
	`°rˇt
((*)
buf
, "0");

375 
	`°rˇt
((*)
buf
, (c⁄°*)
tmp1
);

376 i‡(!
num2
 && !
num1
)

377 
	`°r˝y
((*)
buf
, "0");

380  
NULL
;

382  
buf
;

384 
	}
}

396 
uöt16
 
	$oßl_ønd
( )

398  ( 
	`Onbﬂrd_ønd
() );

399 
	}
}

427 
uöt8
 * 
	$oßl_msg_Æloˇã
–
uöt16
 
Àn
 )

429 
oßl_msg_hdr_t
 *
hdr
;

431 i‡–
Àn
 == 0 )

432  ( 
NULL
 );

434 
hdr
 = (
oßl_msg_hdr_t
 *Ë
	`oßl_mem_Æloc
–()(
Àn
 + ( osal_msg_hdr_t )) );

435 i‡–
hdr
 )

437 
hdr
->
√xt
 = 
NULL
;

438 
hdr
->
Àn
 =Üen;

439 
hdr
->
de°_id
 = 
TASK_NO_TASK
;

440  ( (
uöt8
 *Ë(
hdr
 + 1) );

443  ( 
NULL
 );

444 
	}
}

460 
uöt8
 
	$oßl_msg_dóŒoˇã
–
uöt8
 *
msg_±r
 )

462 
uöt8
 *
x
;

464 i‡–
msg_±r
 =
NULL
 )

465  ( 
INVALID_MSG_POINTER
 );

468 i‡–
	`OSAL_MSG_ID
–
msg_±r
 ) !
TASK_NO_TASK
 )

469  ( 
MSG_BUFFER_NOT_AVAIL
 );

471 
x
 = (
uöt8
 *)((uöt8 *)
msg_±r
 - –
oßl_msg_hdr_t
 ));

473 
	`oßl_mem_‰ì
–(*)
x
 );

475  ( 
SUCCESS
 );

476 
	}
}

495 
uöt8
 
	$oßl_msg_£nd
–
uöt8
 
de°ö©i⁄_èsk
, uöt8 *
msg_±r
 )

497  ( 
	`oßl_msg_íqueue_push
–
de°ö©i⁄_èsk
, 
msg_±r
, 
FALSE
 ) );

498 
	}
}

516 
uöt8
 
	$oßl_msg_push_‰⁄t
–
uöt8
 
de°ö©i⁄_èsk
, uöt8 *
msg_±r
 )

518  ( 
	`oßl_msg_íqueue_push
–
de°ö©i⁄_èsk
, 
msg_±r
, 
TRUE
 ) );

519 
	}
}

539 
uöt8
 
	$oßl_msg_íqueue_push
–
uöt8
 
de°ö©i⁄_èsk
, uöt8 *
msg_±r
, uöt8 
push
 )

541 i‡–
msg_±r
 =
NULL
 )

543  ( 
INVALID_MSG_POINTER
 );

546 i‡–
de°ö©i⁄_èsk
 >
èsksC¡
 )

548 
	`oßl_msg_dóŒoˇã
–
msg_±r
 );

549  ( 
INVALID_TASK
 );

553 i‡–
	`OSAL_MSG_NEXT
–
msg_±r
 ) !
NULL
 ||

554 
	`OSAL_MSG_ID
–
msg_±r
 ) !
TASK_NO_TASK
 )

556 
	`oßl_msg_dóŒoˇã
–
msg_±r
 );

557  ( 
INVALID_MSG_POINTER
 );

560 
	`OSAL_MSG_ID
–
msg_±r
 ) = 
de°ö©i⁄_èsk
;

562 i‡–
push
 =
TRUE
 )

565 
	`oßl_msg_push
–&
oßl_qHód
, 
msg_±r
 );

570 
	`oßl_msg_íqueue
–&
oßl_qHód
, 
msg_±r
 );

574 
	`oßl_£t_evít
–
de°ö©i⁄_èsk
, 
SYS_EVENT_MSG
 );

576  ( 
SUCCESS
 );

577 
	}
}

592 
uöt8
 *
	$oßl_msg_ª˚ive
–
uöt8
 
èsk_id
 )

594 
oßl_msg_hdr_t
 *
li°Hdr
;

595 
oßl_msg_hdr_t
 *
¥evHdr
 = 
NULL
;

596 
oßl_msg_hdr_t
 *
foundHdr
 = 
NULL
;

597 
hÆI¡Sèã_t
 
ötSèã
;

600 
	`HAL_ENTER_CRITICAL_SECTION
(
ötSèã
);

603 
li°Hdr
 = 
oßl_qHód
;

606  
li°Hdr
 !
NULL
 )

608 i‡–(
li°Hdr
 - 1)->
de°_id
 =
èsk_id
 )

610 i‡–
foundHdr
 =
NULL
 )

613 
foundHdr
 = 
li°Hdr
;

621 i‡–
foundHdr
 =
NULL
 )

623 
¥evHdr
 = 
li°Hdr
;

625 
li°Hdr
 = 
	`OSAL_MSG_NEXT
(ÜistHdr );

629 i‡–
li°Hdr
 !
NULL
 )

632 
	`oßl_£t_evít
–
èsk_id
, 
SYS_EVENT_MSG
 );

637 
	`oßl_˛ór_evít
–
èsk_id
, 
SYS_EVENT_MSG
 );

641 i‡–
foundHdr
 !
NULL
 )

644 
	`oßl_msg_exåa˘
–&
oßl_qHód
, 
foundHdr
, 
¥evHdr
 );

648 
	`HAL_EXIT_CRITICAL_SECTION
(
ötSèã
);

650  ( (
uöt8
*Ë
foundHdr
 );

651 
	}
}

671 
oßl_evít_hdr_t
 *
	$oßl_msg_föd
(
uöt8
 
èsk_id
, uöt8 
evít
)

673 
oßl_msg_hdr_t
 *
pHdr
;

674 
hÆI¡Sèã_t
 
ötSèã
;

676 
	`HAL_ENTER_CRITICAL_SECTION
(
ötSèã
);

678 
pHdr
 = 
oßl_qHód
;

681 
pHdr
 !
NULL
)

683 i‡(((
pHdr
-1)->
de°_id
 =
èsk_id
Ë&& (((
oßl_evít_hdr_t
 *ÌHdr)->
evít
 ==Évent))

688 
pHdr
 = 
	`OSAL_MSG_NEXT
(pHdr);

691 
	`HAL_EXIT_CRITICAL_SECTION
(
ötSèã
);

693  (
oßl_evít_hdr_t
 *)
pHdr
;

694 
	}
}

708 
	$oßl_msg_íqueue
–
oßl_msg_q_t
 *
q_±r
, *
msg_±r
 )

710 *
li°
;

711 
hÆI¡Sèã_t
 
ötSèã
;

714 
	`HAL_ENTER_CRITICAL_SECTION
(
ötSèã
);

716 
	`OSAL_MSG_NEXT
–
msg_±r
 ) = 
NULL
;

718 i‡–*
q_±r
 =
NULL
 )

720 *
q_±r
 = 
msg_±r
;

725  
li°
 = *
q_±r
; 
	`OSAL_MSG_NEXT
–li° ) !
NULL
;Üist = OSAL_MSG_NEXT(Üist ) );

728 
	`OSAL_MSG_NEXT
–
li°
 ) = 
msg_±r
;

732 
	`HAL_EXIT_CRITICAL_SECTION
(
ötSèã
);

733 
	}
}

746 *
	$oßl_msg_dequeue
–
oßl_msg_q_t
 *
q_±r
 )

748 *
msg_±r
 = 
NULL
;

749 
hÆI¡Sèã_t
 
ötSèã
;

752 
	`HAL_ENTER_CRITICAL_SECTION
(
ötSèã
);

754 i‡–*
q_±r
 !
NULL
 )

757 
msg_±r
 = *
q_±r
;

758 *
q_±r
 = 
	`OSAL_MSG_NEXT
–
msg_±r
 );

759 
	`OSAL_MSG_NEXT
–
msg_±r
 ) = 
NULL
;

760 
	`OSAL_MSG_ID
–
msg_±r
 ) = 
TASK_NO_TASK
;

764 
	`HAL_EXIT_CRITICAL_SECTION
(
ötSèã
);

766  
msg_±r
;

767 
	}
}

782 
	$oßl_msg_push
–
oßl_msg_q_t
 *
q_±r
, *
msg_±r
 )

784 
hÆI¡Sèã_t
 
ötSèã
;

787 
	`HAL_ENTER_CRITICAL_SECTION
(
ötSèã
);

790 
	`OSAL_MSG_NEXT
–
msg_±r
 ) = *
q_±r
;

791 *
q_±r
 = 
msg_±r
;

794 
	`HAL_EXIT_CRITICAL_SECTION
(
ötSèã
);

795 
	}
}

811 
	$oßl_msg_exåa˘
–
oßl_msg_q_t
 *
q_±r
, *
msg_±r
, *
¥ev_±r
 )

813 
hÆI¡Sèã_t
 
ötSèã
;

816 
	`HAL_ENTER_CRITICAL_SECTION
(
ötSèã
);

818 i‡–
msg_±r
 =*
q_±r
 )

821 *
q_±r
 = 
	`OSAL_MSG_NEXT
–
msg_±r
 );

826 
	`OSAL_MSG_NEXT
–
¥ev_±r
 ) = OSAL_MSG_NEXT–
msg_±r
 );

828 
	`OSAL_MSG_NEXT
–
msg_±r
 ) = 
NULL
;

829 
	`OSAL_MSG_ID
–
msg_±r
 ) = 
TASK_NO_TASK
;

832 
	`HAL_EXIT_CRITICAL_SECTION
(
ötSèã
);

833 
	}
}

849 
uöt8
 
	$oßl_msg_íqueue_max
–
oßl_msg_q_t
 *
q_±r
, *
msg_±r
, 
uöt8
 
max
 )

851 *
li°
;

852 
uöt8
 
ªt
 = 
FALSE
;

853 
hÆI¡Sèã_t
 
ötSèã
;

856 
	`HAL_ENTER_CRITICAL_SECTION
(
ötSèã
);

859 i‡–*
q_±r
 =
NULL
 )

861 *
q_±r
 = 
msg_±r
;

862 
ªt
 = 
TRUE
;

867 
li°
 = *
q_±r
;

868 
max
--;

869  (
	`OSAL_MSG_NEXT
–
li°
 ) !
NULL
Ë&& (
max
 > 0) )

871 
li°
 = 
	`OSAL_MSG_NEXT
(Üist );

872 
max
--;

876 i‡–
max
 != 0 )

878 
	`OSAL_MSG_NEXT
–
li°
 ) = 
msg_±r
;

879 
ªt
 = 
TRUE
;

884 
	`HAL_EXIT_CRITICAL_SECTION
(
ötSèã
);

886  
ªt
;

887 
	}
}

902 
uöt8
 
	$oßl_£t_evít
–
uöt8
 
èsk_id
, 
uöt16
 
evít_Êag
 )

904 i‡–
èsk_id
 < 
èsksC¡
 )

906 
hÆI¡Sèã_t
 
ötSèã
;

907 
	`HAL_ENTER_CRITICAL_SECTION
(
ötSèã
);

908 
èsksEvíts
[
èsk_id
] |
evít_Êag
;

909 
	`HAL_EXIT_CRITICAL_SECTION
(
ötSèã
);

910  ( 
SUCCESS
 );

914  ( 
INVALID_TASK
 );

916 
	}
}

931 
uöt8
 
	$oßl_˛ór_evít
–
uöt8
 
èsk_id
, 
uöt16
 
evít_Êag
 )

933 i‡–
èsk_id
 < 
èsksC¡
 )

935 
hÆI¡Sèã_t
 
ötSèã
;

936 
	`HAL_ENTER_CRITICAL_SECTION
(
ötSèã
);

937 
èsksEvíts
[
èsk_id
] &~(
evít_Êag
);

938 
	`HAL_EXIT_CRITICAL_SECTION
(
ötSèã
);

939  ( 
SUCCESS
 );

943  ( 
INVALID_TASK
 );

945 
	}
}

960 
uöt8
 
oßl_i§_ªgi°î
–uöt8 
öãºu±_id
, (*
i§_±r
)( uint8* ) )

963 ()
öãºu±_id
;

964 ()
i§_±r
;

965  ( 
SUCCESS
 );

966 
	}
}

985 
uöt8
 
	$oßl_öt_íabÀ
–
uöt8
 
öãºu±_id
 )

988 i‡–
öãºu±_id
 =
INTS_ALL
 )

990 
	`HAL_ENABLE_INTERRUPTS
();

991  ( 
SUCCESS
 );

995  ( 
INVALID_INTERRUPT_ID
 );

997 
	}
}

1015 
uöt8
 
	$oßl_öt_dißbÀ
–
uöt8
 
öãºu±_id
 )

1018 i‡–
öãºu±_id
 =
INTS_ALL
 )

1020 
	`HAL_DISABLE_INTERRUPTS
();

1021  ( 
SUCCESS
 );

1025  ( 
INVALID_INTERRUPT_ID
 );

1027 
	}
}

1041 
uöt8
 
	$oßl_öô_sy°em
( )

1044 
	`oßl_mem_öô
();

1047 
oßl_qHód
 = 
NULL
;

1050 
	`oßlTimîInô
();

1053 
	`oßl_pwrmgr_öô
();

1056 
	`oßlInôTasks
();

1059 
	`oßl_mem_kick
();

1061  ( 
SUCCESS
 );

1062 
	}
}

1076 
	$oßl_°¨t_sy°em
( )

1078 #i‡!
	`deföed
 ( 
ZBIT
 ) && !deföed ( 
UBIT
 )

1083 
	`oßl_run_sy°em
();

1085 
	}
}

1101 
	$oßl_run_sy°em
( )

1103 
uöt8
 
idx
 = 0;

1105 #i‚de‡
HAL_BOARD_CC2538


1106 
	`oßlTimeUpd©e
();

1109 
	`HÆ_Pro˚ssPﬁl
();

1112 i‡(
èsksEvíts
[
idx
])

1116 } ++
idx
 < 
èsksC¡
);

1118 i‡(
idx
 < 
èsksC¡
)

1120 
uöt16
 
evíts
;

1121 
hÆI¡Sèã_t
 
ötSèã
;

1123 
	`HAL_ENTER_CRITICAL_SECTION
(
ötSèã
);

1124 
evíts
 = 
èsksEvíts
[
idx
];

1125 
èsksEvíts
[
idx
] = 0;

1126 
	`HAL_EXIT_CRITICAL_SECTION
(
ötSèã
);

1128 
a˘iveTaskID
 = 
idx
;

1129 
evíts
 = (
èsksAº
[
idx
])( idx,Évents );

1130 
a˘iveTaskID
 = 
TASK_NO_TASK
;

1132 
	`HAL_ENTER_CRITICAL_SECTION
(
ötSèã
);

1133 
èsksEvíts
[
idx
] |
evíts
;

1134 
	`HAL_EXIT_CRITICAL_SECTION
(
ötSèã
);

1136 #i‡
	`deföed
–
POWER_SAVING
 )

1139 
	`oßl_pwrmgr_powîc⁄£rve
();

1144 #i‡
	`deföed
 (
c⁄figUSE_PREEMPTION
) && (configUSE_PREEMPTION == 0)

1146 
	`oßl_èsk_yõld
();

1149 
	}
}

1163 
uöt8
* 
	$oßl_buf„r_uöt32
–
uöt8
 *
buf
, 
uöt32
 
vÆ
 )

1165 *
buf
++ = 
	`BREAK_UINT32
–
vÆ
, 0 );

1166 *
buf
++ = 
	`BREAK_UINT32
–
vÆ
, 1 );

1167 *
buf
++ = 
	`BREAK_UINT32
–
vÆ
, 2 );

1168 *
buf
++ = 
	`BREAK_UINT32
–
vÆ
, 3 );

1170  
buf
;

1171 
	}
}

1186 
uöt8
* 
	$oßl_buf„r_uöt24
–
uöt8
 *
buf
, 
uöt24
 
vÆ
 )

1188 *
buf
++ = 
	`BREAK_UINT32
–
vÆ
, 0 );

1189 *
buf
++ = 
	`BREAK_UINT32
–
vÆ
, 1 );

1190 *
buf
++ = 
	`BREAK_UINT32
–
vÆ
, 2 );

1192  
buf
;

1193 
	}
}

1209 
uöt8
 
	$oßl_isbuf£t
–
uöt8
 *
buf
, uöt8 
vÆ
, uöt8 
Àn
 )

1211 
uöt8
 
x
;

1213 i‡–
buf
 =
NULL
 )

1215  ( 
FALSE
 );

1218  
x
 = 0; x < 
Àn
; x++ )

1221 i‡–
buf
[
x
] !
vÆ
 )

1223  ( 
FALSE
 );

1226  ( 
TRUE
 );

1227 
	}
}

1240 
uöt8
 
	$oßl_£lf
( )

1242  ( 
a˘iveTaskID
 );

1243 
	}
}

	@../../../../Components/osal/common/OSAL_ClockBLE.c

43 
	~"comdef.h
"

44 
	~"OnBﬂrd.h
"

45 
	~"OSAL.h
"

46 
	~"OSAL_Clock.h
"

52 
	#YórLígth
(
yr
Ë(
	`IsLópYór
(yrË? 366 : 365)

	)

60 
	#MAXCALCTICKS
 ((
uöt16
)(13105))

	)

62 
	#BEGYEAR
 2000

63 

	)

64 
	#DAY
 86400UL

65 

	)

81 
uöt16
 
Œ_McuPªcisi⁄Cou¡
();

86 
uöt16
 
	g¥eviousLLTimîTick
 = 0;

87 
uöt16
 
	gªmUsTicks
 = 0;

88 
uöt16
 
	gtimeMSec
 = 0;

92 
UTCTime
 
	gOSAL_timeSec⁄ds
 = 0;

97 
uöt8
 
m⁄thLígth
–uöt8 
Õyr
, uöt8 
m⁄
 );

99 
oßlClockUpd©e
–
uöt16
 
ñ≠£dMSec
 );

119 
	$oßlTimeUpd©e
( )

121 
uöt16
 
tmp
;

122 
uöt16
 
ticks625us
;

123 
uöt16
 
ñ≠£dMSec
 = 0;

126 
tmp
 = 
	`Œ_McuPªcisi⁄Cou¡
();

128 i‡–
tmp
 !
¥eviousLLTimîTick
 )

131 
ticks625us
 = 
tmp
 - 
¥eviousLLTimîTick
;

134 
¥eviousLLTimîTick
 = 
tmp
;

139  
ticks625us
 > 
MAXCALCTICKS
 )

141 
ticks625us
 -
MAXCALCTICKS
;

142 
ñ≠£dMSec
 +
MAXCALCTICKS
 * 5 / 8;

143 
ªmUsTicks
 +
MAXCALCTICKS
 * 5 % 8;

148 
tmp
 = (
ticks625us
 * 5Ë+ 
ªmUsTicks
;

151 
ñ≠£dMSec
 +
tmp
 / 8;

152 
ªmUsTicks
 = 
tmp
 % 8;

155 i‡–
ñ≠£dMSec
 )

157 
	`oßlClockUpd©e
–
ñ≠£dMSec
 );

158 
	`oßlTimîUpd©e
–
ñ≠£dMSec
 );

161 
	}
}

172 
	$oßlClockUpd©e
–
uöt16
 
ñ≠£dMSec
 )

175 
timeMSec
 +
ñ≠£dMSec
;

178 i‡–
timeMSec
 >= 1000 )

180 
OSAL_timeSec⁄ds
 +
timeMSec
 / 1000;

181 
timeMSec
 =ÅimeMSec % 1000;

183 
	}
}

196 
	$oßl_£tClock
–
UTCTime
 
√wTime
 )

198 
OSAL_timeSec⁄ds
 = 
√wTime
;

199 
	}
}

213 
UTCTime
 
	$oßl_gëClock
( )

215  ( 
OSAL_timeSec⁄ds
 );

216 
	}
}

230 
	$oßl_C⁄vîtUTCTime
–
UTCTimeSåu˘
 *
tm
, 
UTCTime
 
£cTime
 )

234 
uöt32
 
day
 = 
£cTime
 % 
DAY
;

235 
tm
->
£c⁄ds
 = 
day
 % 60UL;

236 
tm
->
möuãs
 = (
day
 % 3600UL) / 60UL;

237 
tm
->
hour
 = 
day
 / 3600UL;

242 
uöt16
 
numDays
 = 
£cTime
 / 
DAY
;

243 
tm
->
yór
 = 
BEGYEAR
;

244  
numDays
 >
	`YórLígth
–
tm
->
yór
 ) )

246 
numDays
 -
	`YórLígth
–
tm
->
yór
 );

247 
tm
->
yór
++;

250 
tm
->
m⁄th
 = 0;

251  
numDays
 >
	`m⁄thLígth
–
	`IsLópYór
–
tm
->
yór
 ),Åm->
m⁄th
 ) )

253 
numDays
 -
	`m⁄thLígth
–
	`IsLópYór
–
tm
->
yór
 ),Åm->
m⁄th
 );

254 
tm
->
m⁄th
++;

257 
tm
->
day
 = 
numDays
;

259 
	}
}

270 
uöt8
 
	$m⁄thLígth
–
uöt8
 
Õyr
, uöt8 
m⁄
 )

272 
uöt8
 
days
 = 31;

274 i‡–
m⁄
 == 1 )

276 
days
 = ( 28 + 
Õyr
 );

280 i‡–
m⁄
 > 6 )

282 
m⁄
--;

285 i‡–
m⁄
 & 1 )

287 
days
 = 30;

291  ( 
days
 );

292 
	}
}

303 
UTCTime
 
	$oßl_C⁄vîtUTCSecs
–
UTCTimeSåu˘
 *
tm
 )

305 
uöt32
 
£c⁄ds
;

308 
£c⁄ds
 = (((
tm
->
hour
 * 60ULË+Åm->
möuãs
) * 60UL) +Åm->seconds;

313 
uöt16
 
days
 = 
tm
->
day
;

317 
öt8
 
m⁄th
 = 
tm
->month;

318  --
m⁄th
 >= 0 )

320 
days
 +
	`m⁄thLígth
–
	`IsLópYór
–
tm
->
yór
 ), 
m⁄th
 );

326 
uöt16
 
yór
 = 
tm
->year;

327  --
yór
 >
BEGYEAR
 )

329 
days
 +
	`YórLígth
–
yór
 );

334 
£c⁄ds
 +(
days
 * 
DAY
);

337  ( 
£c⁄ds
 );

338 
	}
}

	@../../../../Components/osal/common/OSAL_Memory.c

46 
	~"comdef.h
"

47 
	~"OSAL.h
"

48 
	~"OSAL_Mem‹y.h
"

49 
	~"OnBﬂrd.h
"

50 
	~"hÆ_mcu.h
"

51 
	~"hÆ_as£π.h
"

58 
	#OSALMEM_IN_USE
 0x8000

	)

59 #i‡(
MAXMEMHEAP
 & 
OSALMEM_IN_USE
)

60 #îr‹ 
MAXMEMHEAP
 
is
 
too
 
big
 
to
 
m™age
!

63 
	#OSALMEM_HDRSZ
 (
oßlMemHdr_t
)

	)

66 
	#OSALMEM_ROUND
(
X
Ë((((XË+ 
OSALMEM_HDRSZ
 - 1Ë/ OSALMEM_HDRSZË* OSALMEM_HDRSZ)

	)

74 #i‡!
deföed
 
OSALMEM_MIN_BLKSZ


75 
	#OSALMEM_MIN_BLKSZ
 (
	`OSALMEM_ROUND
((
OSALMEM_HDRSZ
 * 2)))

	)

78 #i‡!
deföed
 
OSALMEM_LL_BLKSZ


79 #i‡
deföed
 
NONWK


80 
	#OSALMEM_LL_BLKSZ
 (
	`OSALMEM_ROUND
(6Ë+ (1 * 
OSALMEM_HDRSZ
))

	)

92 #i‡
deföed
 
ZCL_KEY_ESTABLISH


93 
	#OSALMEM_LL_BLKSZ
 (
	`OSALMEM_ROUND
(526Ë+ (32 * 
OSALMEM_HDRSZ
))

	)

94 #ñi‡
deföed
 
TC_LINKKEY_JOIN


95 
	#OSALMEM_LL_BLKSZ
 (
	`OSALMEM_ROUND
(454Ë+ (21 * 
OSALMEM_HDRSZ
))

	)

96 #ñi‡((
deföed
 
SECURE
) && (SECURE != 0))

97 
	#OSALMEM_LL_BLKSZ
 (
	`OSALMEM_ROUND
(418Ë+ (19 * 
OSALMEM_HDRSZ
))

	)

99 
	#OSALMEM_LL_BLKSZ
 (
	`OSALMEM_ROUND
(417Ë+ (19 * 
OSALMEM_HDRSZ
))

	)

109 #i‡!
deföed
 
OSALMEM_SMALL_BLKSZ


110 
	#OSALMEM_SMALL_BLKSZ
 (
	`OSALMEM_ROUND
(16))

	)

112 #i‡!
deföed
 
OSALMEM_SMALL_BLKCNT


113 
	#OSALMEM_SMALL_BLKCNT
 8

	)

123 
	#OSALMEM_SMALLBLK_BUCKET
 ((
OSALMEM_SMALL_BLKSZ
 * 
OSALMEM_SMALL_BLKCNT
Ë+ 
OSALMEM_LL_BLKSZ
)

	)

126 
	#OSALMEM_SMALLBLK_HDRCNT
 (
OSALMEM_SMALLBLK_BUCKET
 / 
OSALMEM_HDRSZ
)

	)

128 
	#OSALMEM_BIGBLK_IDX
 (
OSALMEM_SMALLBLK_HDRCNT
 + 1)

	)

131 
	#OSALMEM_BIGBLK_SZ
 (
MAXMEMHEAP
 - 
OSALMEM_SMALLBLK_BUCKET
 - 
OSALMEM_HDRSZ
*2)

	)

134 
	#OSALMEM_LASTBLK_IDX
 ((
MAXMEMHEAP
 / 
OSALMEM_HDRSZ
Ë- 1)

	)

137 #i‡!
deföed
 
OSALMEM_PROFILER


138 
	#OSALMEM_PROFILER
 
FALSE


140 #i‡!
deföed
 
OSALMEM_PROFILER_LL


	)

141 
	#OSALMEM_PROFILER_LL
 
FALSE


143 

	)

144 #i‡
OSALMEM_PROFILER


145 
	#OSALMEM_INIT
 'X'

	)

146 
	#OSALMEM_ALOC
 'A'

	)

147 
	#OSALMEM_REIN
 'F'

	)

157 
	mÀn
 : 15;

159 
	möU£
 : 1;

160 } 
	toßlMemHdrHdr_t
;

166 
hÆD©aAlign_t
 
	mÆignDummy
;

167 
uöt16
 
	mvÆ
;

168 
oßlMemHdrHdr_t
 
	mhdr
;

169 } 
	toßlMemHdr_t
;

176 #i‡!
deföed
 ( 
ZBIT
 )

177 
__no_öô
 
oßlMemHdr_t
 
	gtheHóp
[
MAXMEMHEAP
 / 
OSALMEM_HDRSZ
];

178 
__no_öô
 
oßlMemHdr_t
 *
	gff1
;

180 
oßlMemHdr_t
 
	gtheHóp
[
MAXMEMHEAP
 / 
OSALMEM_HDRSZ
];

181 
oßlMemHdr_t
 *
	gff1
;

184 
uöt8
 
	goßlMemSèt
;

186 #i‡
OSALMEM_METRICS


187 
uöt16
 
	gblkMax
;

188 
uöt16
 
	gblkC¡
;

189 
uöt16
 
	gblkFªe
;

190 
uöt16
 
	gmemAlo
;

191 
uöt16
 
	gmemMax
;

194 #i‡
OSALMEM_PROFILER


195 
	#OSALMEM_PROMAX
 8

	)

200 
uöt16
 
	g¥oC¡
[
OSALMEM_PROMAX
] = {

201 
OSALMEM_SMALL_BLKSZ
, 48, 112, 176, 192, 224, 256, 65535 };

202 
uöt16
 
	g¥oCur
[
OSALMEM_PROMAX
] = { 0 };

203 
uöt16
 
	g¥oMax
[
OSALMEM_PROMAX
] = { 0 };

204 
uöt16
 
	g¥oTŸ
[
OSALMEM_PROMAX
] = { 0 };

205 
uöt16
 
	g¥oSmÆlBlkMiss
;

213 #ifde‡
DPRINTF_HEAPTRACE


214 
d¥ötf
(c⁄° *
fmt
, ...);

232 
	$oßl_mem_öô
()

234 
	`HAL_ASSERT
(((
OSALMEM_MIN_BLKSZ
 % 
OSALMEM_HDRSZ
) == 0));

235 
	`HAL_ASSERT
(((
OSALMEM_LL_BLKSZ
 % 
OSALMEM_HDRSZ
) == 0));

236 
	`HAL_ASSERT
(((
OSALMEM_SMALL_BLKSZ
 % 
OSALMEM_HDRSZ
) == 0));

238 #i‡
OSALMEM_PROFILER


239 ()
	`oßl_mem£t
(
theHóp
, 
OSALMEM_INIT
, 
MAXMEMHEAP
);

243 
theHóp
[
OSALMEM_LASTBLK_IDX
].
vÆ
 = 0;

246 
ff1
 = 
theHóp
;

247 
ff1
->
vÆ
 = 
OSALMEM_SMALLBLK_BUCKET
;

250 
theHóp
[
OSALMEM_SMALLBLK_HDRCNT
].
vÆ
 = (
OSALMEM_HDRSZ
 | 
OSALMEM_IN_USE
);

253 
theHóp
[
OSALMEM_BIGBLK_IDX
].
vÆ
 = 
OSALMEM_BIGBLK_SZ
;

255 #i‡–
OSALMEM_METRICS
 )

259 
blkC¡
 = 
blkFªe
 = 2;

261 
	}
}

281 
	$oßl_mem_kick
()

283 
hÆI¡Sèã_t
 
ötSèã
;

284 
oßlMemHdr_t
 *
tmp
 = 
	`oßl_mem_Æloc
(1);

286 
	`HAL_ASSERT
((
tmp
 !
NULL
));

287 
	`HAL_ENTER_CRITICAL_SECTION
(
ötSèã
);

293 
ff1
 = 
tmp
 - 1;

294 
	`oßl_mem_‰ì
(
tmp
);

295 
oßlMemSèt
 = 0x01;

297 
	`HAL_EXIT_CRITICAL_SECTION
(
ötSèã
);

298 
	}
}

315 #ifde‡
DPRINTF_OSALHEAPTRACE


316 *
	$oßl_mem_Æloc_dbg
–
uöt16
 
size
, c⁄° *
‚ame
, 
 um
 )

318 *
	$oßl_mem_Æloc
–
uöt16
 
size
 )

321 
oßlMemHdr_t
 *
¥ev
 = 
NULL
;

322 
oßlMemHdr_t
 *
hdr
;

323 
hÆI¡Sèã_t
 
ötSèã
;

324 
uöt8
 
cﬂl
 = 0;

326 
size
 +
OSALMEM_HDRSZ
;

329 i‡––
hÆD©aAlign_t
 ) == 2 )

331 
size
 += (size & 0x01);

333 i‡––
hÆD©aAlign_t
 ) != 1 )

335 c⁄° 
uöt8
 
mod
 = 
size
 % –
hÆD©aAlign_t
 );

337 i‡–
mod
 != 0 )

339 
size
 +(–
hÆD©aAlign_t
 ) - 
mod
);

343 
	`HAL_ENTER_CRITICAL_SECTION
–
ötSèã
 );

347 i‡((
oßlMemSèt
 =0Ë|| (
size
 <
OSALMEM_SMALL_BLKSZ
))

349 
hdr
 = 
ff1
;

353 
hdr
 = (
theHóp
 + 
OSALMEM_BIGBLK_IDX
);

358 i‡–
hdr
->hdr.
öU£
 )

360 
cﬂl
 = 0;

364 i‡–
cﬂl
 != 0 )

366 #i‡–
OSALMEM_METRICS
 )

367 
blkC¡
--;

368 
blkFªe
--;

371 
¥ev
->
hdr
.
Àn
 += hdr->hdr.len;

373 i‡–
¥ev
->
hdr
.
Àn
 >
size
 )

375 
hdr
 = 
¥ev
;

381 i‡–
hdr
->hdr.
Àn
 >
size
 )

386 
cﬂl
 = 1;

387 
¥ev
 = 
hdr
;

391 
hdr
 = (
oßlMemHdr_t
 *)((
uöt8
 *)hd∏+ hdr->hdr.
Àn
);

393 i‡–
hdr
->
vÆ
 == 0 )

395 
hdr
 = 
NULL
;

400 i‡–
hdr
 !
NULL
 )

402 
uöt16
 
tmp
 = 
hdr
->hdr.
Àn
 - 
size
;

405 i‡–
tmp
 >
OSALMEM_MIN_BLKSZ
 )

408 
oßlMemHdr_t
 *
√xt
 = (oßlMemHdr_à*)((
uöt8
 *)
hdr
 + 
size
);

409 
√xt
->
vÆ
 = 
tmp
;

410 
hdr
->
vÆ
 = (
size
 | 
OSALMEM_IN_USE
);

412 #i‡–
OSALMEM_METRICS
 )

413 
blkC¡
++;

414 i‡–
blkMax
 < 
blkC¡
 )

416 
blkMax
 = 
blkC¡
;

418 
memAlo
 +
size
;

423 #i‡–
OSALMEM_METRICS
 )

424 
memAlo
 +
hdr
->hdr.
Àn
;

425 
blkFªe
--;

428 
hdr
->hdr.
öU£
 = 
TRUE
;

431 #i‡–
OSALMEM_METRICS
 )

432 i‡–
memMax
 < 
memAlo
 )

434 
memMax
 = 
memAlo
;

438 #i‡–
OSALMEM_PROFILER
 )

439 #i‡!
OSALMEM_PROFILER_LL


440 i‡(
oßlMemSèt
 != 0)

443 
uöt8
 
idx
;

445  
idx
 = 0; idx < 
OSALMEM_PROMAX
; idx++ )

447 i‡–
hdr
->hdr.
Àn
 <
¥oC¡
[
idx
] )

452 
¥oCur
[
idx
]++;

453 i‡–
¥oMax
[
idx
] < 
¥oCur
[idx] )

455 
¥oMax
[
idx
] = 
¥oCur
[idx];

457 
¥oTŸ
[
idx
]++;

467 i‡((
hdr
->hdr.
Àn
 <
OSALMEM_SMALL_BLKSZ
Ë&& (hd∏>(
theHóp
 + 
OSALMEM_BIGBLK_IDX
)))

469 
¥oSmÆlBlkMiss
++;

473 ()
	`oßl_mem£t
((
uöt8
 *)(
hdr
+1), 
OSALMEM_ALOC
, (hdr->hdr.
Àn
 - 
OSALMEM_HDRSZ
));

476 i‡((
oßlMemSèt
 !0Ë&& (
ff1
 =
hdr
))

478 
ff1
 = (
oßlMemHdr_t
 *)((
uöt8
 *)
hdr
 + hdr->hdr.
Àn
);

481 
hdr
++;

484 
	`HAL_EXIT_CRITICAL_SECTION
–
ötSèã
 );

486 #i‡!
	`deföed
 ( 
ZBIT
 )

487 #¥agm®
düg_suµªss
=
Pe767


488 
	`HAL_ASSERT
(((
hÆD©aAlign_t
)
hdr
 % (halDataAlign_t)) == 0);

489 #¥agm®
düg_deÁu…
=
Pe767


491 
	`HAL_ASSERT
(((
hÆD©aAlign_t
)
hdr
 % (halDataAlign_t)) == 0);

493 #ifde‡
DPRINTF_OSALHEAPTRACE


494 
	`d¥ötf
("oßl_mem_Æloc(%u)->%lx:%s:%u\n", 
size
, (Ë
hdr
, 
‚ame
, 
 um
);

496  (*)
hdr
;

497 
	}
}

514 #ifde‡
DPRINTF_OSALHEAPTRACE


515 
	$oßl_mem_‰ì_dbg
(*
±r
, c⁄° *
‚ame
, 
 um
)

517 
	$oßl_mem_‰ì
(*
±r
)

520 
oßlMemHdr_t
 *
hdr
 = (oßlMemHdr_à*)
±r
 - 1;

521 
hÆI¡Sèã_t
 
ötSèã
;

523 #ifde‡
DPRINTF_OSALHEAPTRACE


524 
	`d¥ötf
("oßl_mem_‰ì(%lx):%s:%u\n", (Ë
±r
, 
‚ame
, 
 um
);

527 
	`HAL_ASSERT
(((
uöt8
 *)
±r
 >(uöt8 *)
theHóp
Ë&& ((uöt8 *Ìå < (uöt8 *ÈheHóp+
MAXMEMHEAP
));

528 
	`HAL_ASSERT
(
hdr
->hdr.
öU£
);

530 
	`HAL_ENTER_CRITICAL_SECTION
–
ötSèã
 );

531 
hdr
->hdr.
öU£
 = 
FALSE
;

533 i‡(
ff1
 > 
hdr
)

535 
ff1
 = 
hdr
;

538 #i‡
OSALMEM_PROFILER


539 #i‡!
OSALMEM_PROFILER_LL


540 i‡(
oßlMemSèt
 != 0)

543 
uöt8
 
idx
;

545 
idx
 = 0; idx < 
OSALMEM_PROMAX
; idx++)

547 i‡(
hdr
->hdr.
Àn
 <
¥oC¡
[
idx
])

553 
¥oCur
[
idx
]--;

556 ()
	`oßl_mem£t
((
uöt8
 *)(
hdr
+1), 
OSALMEM_REIN
, (hdr->hdr.
Àn
 - 
OSALMEM_HDRSZ
) );

558 #i‡
OSALMEM_METRICS


559 
memAlo
 -
hdr
->hdr.
Àn
;

560 
blkFªe
++;

563 
	`HAL_EXIT_CRITICAL_SECTION
–
ötSèã
 );

564 
	}
}

566 #i‡
OSALMEM_METRICS


576 
uöt16
 
	$oßl_hóp_block_max
( )

578  
blkMax
;

579 
	}
}

590 
uöt16
 
	$oßl_hóp_block_˙t
( )

592  
blkC¡
;

593 
	}
}

604 
uöt16
 
	$oßl_hóp_block_‰ì
( )

606  
blkFªe
;

607 
	}
}

618 
uöt16
 
	$oßl_hóp_mem_u£d
( )

620  
memAlo
;

621 
	}
}

624 #i‡
deföed
 (
ZTOOL_P1
Ë|| deföed (
ZTOOL_P2
)

634 
uöt16
 
	$oßl_hóp_high_w©î
( )

636 #i‡–
OSALMEM_METRICS
 )

637  
memMax
;

639  
MAXMEMHEAP
;

641 
	}
}

	@../../../../Components/osal/common/OSAL_PwrMgr.c

44 
	~"comdef.h
"

45 
	~"OnBﬂrd.h
"

46 
	~"OSAL.h
"

47 
	~"OSAL_Tasks.h
"

48 
	~"OSAL_Timîs.h
"

49 
	~"OSAL_PwrMgr.h
"

69 
pwrmgr_©åibuã_t
 
	gpwrmgr_©åibuã
;

100 
	$oßl_pwrmgr_öô
( )

102 
pwrmgr_©åibuã
.
pwrmgr_devi˚
 = 
PWRMGR_ALWAYS_ON
;

103 
pwrmgr_©åibuã
.
pwrmgr_èsk_°©e
 = 0;

104 
	}
}

118 
	$oßl_pwrmgr_devi˚
–
uöt8
 
pwrmgr_devi˚
 )

120 
pwrmgr_©åibuã
.
pwrmgr_devi˚
 =Öwrmgr_device;

121 
	}
}

135 
uöt8
 
	$oßl_pwrmgr_èsk_°©e
–
uöt8
 
èsk_id
, uöt8 
°©e
 )

137 i‡–
èsk_id
 >
èsksC¡
 )

138  ( 
INVALID_TASK
 );

140 i‡–
°©e
 =
PWRMGR_CONSERVE
 )

143 
pwrmgr_©åibuã
.
pwrmgr_èsk_°©e
 &~(1 << 
èsk_id
 );

148 
pwrmgr_©åibuã
.
pwrmgr_èsk_°©e
 |(1 << 
èsk_id
);

151  ( 
SUCCESS
 );

152 
	}
}

154 #i‡
deföed
–
POWER_SAVING
 )

165 
	$oßl_pwrmgr_powîc⁄£rve
( )

167 
uöt32
 
√xt
;

168 
hÆI¡Sèã_t
 
ötSèã
;

171 i‡–
pwrmgr_©åibuã
.
pwrmgr_devi˚
 !
PWRMGR_ALWAYS_ON
 )

174 i‡–
pwrmgr_©åibuã
.
pwrmgr_èsk_°©e
 == 0 )

177 
	`HAL_ENTER_CRITICAL_SECTION
–
ötSèã
 );

180 
√xt
 = 
	`oßl_√xt_timeout
();

183 
	`HAL_EXIT_CRITICAL_SECTION
–
ötSèã
 );

186 
	`OSAL_SET_CPU_INTO_SLEEP
–
√xt
 );

189 
	}
}

	@../../../../Components/osal/common/OSAL_Timers.c

44 
	~"comdef.h
"

45 
	~"OnBﬂrd.h
"

46 
	~"OSAL.h
"

47 
	~"OSAL_Timîs.h
"

48 
	~"hÆ_timî.h
"

63 
uöt32
 
	mtime32
;

64 
uöt16
 
	mtime16
[2];

65 
uöt8
 
	mtime8
[4];

66 } 
	toßlTime_t
;

70 *
	m√xt
;

71 
oßlTime_t
 
	mtimeout
;

72 
uöt16
 
	mevít_Êag
;

73 
uöt8
 
	mèsk_id
;

74 
uöt32
 
	mªlﬂdTimeout
;

75 } 
	toßlTimîRec_t
;

81 
oßlTimîRec_t
 *
	gtimîHód
;

95 
uöt32
 
	goßl_sy°emClock
;

100 
oßlTimîRec_t
 *
oßlAddTimî
–
uöt8
 
èsk_id
, 
uöt16
 
evít_Êag
, 
uöt32
 
timeout
 );

101 
oßlTimîRec_t
 *
oßlFödTimî
–
uöt8
 
èsk_id
, 
uöt16
 
evít_Êag
 );

102 
oßlDñëeTimî
–
oßlTimîRec_t
 *
rmTimî
 );

117 
	$oßlTimîInô
( )

119 
oßl_sy°emClock
 = 0;

120 
	}
}

134 
oßlTimîRec_t
 * 
	$oßlAddTimî
–
uöt8
 
èsk_id
, 
uöt16
 
evít_Êag
, 
uöt32
 
timeout
 )

136 
oßlTimîRec_t
 *
√wTimî
;

137 
oßlTimîRec_t
 *
§chTimî
;

140 
√wTimî
 = 
	`oßlFödTimî
–
èsk_id
, 
evít_Êag
 );

141 i‡–
√wTimî
 )

144 
√wTimî
->
timeout
.
time32
 =Åimeout;

146  ( 
√wTimî
 );

151 
√wTimî
 = 
	`oßl_mem_Æloc
––
oßlTimîRec_t
 ) );

153 i‡–
√wTimî
 )

156 
√wTimî
->
èsk_id
 =Åask_id;

157 
√wTimî
->
evít_Êag
 =Évent_flag;

158 
√wTimî
->
timeout
.
time32
 =Åimeout;

159 
√wTimî
->
√xt
 = (*)
NULL
;

160 
√wTimî
->
ªlﬂdTimeout
 = 0;

163 i‡–
timîHód
 =
NULL
 )

166 
timîHód
 = 
√wTimî
;

171 
§chTimî
 = 
timîHód
;

174  
§chTimî
->
√xt
 )

175 
§chTimî
 = srchTimî->
√xt
;

178 
§chTimî
->
√xt
 = 
√wTimî
;

181  ( 
√wTimî
 );

185  ( (
oßlTimîRec_t
 *)
NULL
 );

188 
	}
}

201 
oßlTimîRec_t
 *
	$oßlFödTimî
–
uöt8
 
èsk_id
, 
uöt16
 
evít_Êag
 )

203 
oßlTimîRec_t
 *
§chTimî
;

206 
§chTimî
 = 
timîHód
;

209  
§chTimî
 )

211 i‡–
§chTimî
->
evít_Êag
 ==Évent_flag &&

212 
§chTimî
->
èsk_id
 ==Åask_id )

218 
§chTimî
 = srchTimî->
√xt
;

221  ( 
§chTimî
 );

222 
	}
}

234 
	$oßlDñëeTimî
–
oßlTimîRec_t
 *
rmTimî
 )

237 i‡–
rmTimî
 )

241 
rmTimî
->
evít_Êag
 = 0;

243 
	}
}

259 
uöt8
 
	$oßl_°¨t_timîEx
–
uöt8
 
èskID
, 
uöt16
 
evít_id
, 
uöt32
 
timeout_vÆue
 )

261 
hÆI¡Sèã_t
 
ötSèã
;

262 
oßlTimîRec_t
 *
√wTimî
;

264 
	`HAL_ENTER_CRITICAL_SECTION
–
ötSèã
 );

267 
√wTimî
 = 
	`oßlAddTimî
–
èskID
, 
evít_id
, 
timeout_vÆue
 );

269 
	`HAL_EXIT_CRITICAL_SECTION
–
ötSèã
 );

271  ( (
√wTimî
 !
NULL
Ë? 
SUCCESS
 : 
NO_TIMER_AVAIL
 );

272 
	}
}

289 
uöt8
 
	$oßl_°¨t_ªlﬂd_timî
–
uöt8
 
èskID
, 
uöt16
 
evít_id
, 
uöt32
 
timeout_vÆue
 )

291 
hÆI¡Sèã_t
 
ötSèã
;

292 
oßlTimîRec_t
 *
√wTimî
;

294 
	`HAL_ENTER_CRITICAL_SECTION
–
ötSèã
 );

297 
√wTimî
 = 
	`oßlAddTimî
–
èskID
, 
evít_id
, 
timeout_vÆue
 );

298 i‡–
√wTimî
 )

301 
√wTimî
->
ªlﬂdTimeout
 = 
timeout_vÆue
;

304 
	`HAL_EXIT_CRITICAL_SECTION
–
ötSèã
 );

306  ( (
√wTimî
 !
NULL
Ë? 
SUCCESS
 : 
NO_TIMER_AVAIL
 );

307 
	}
}

323 
uöt8
 
	$oßl_°›_timîEx
–
uöt8
 
èsk_id
, 
uöt16
 
evít_id
 )

325 
hÆI¡Sèã_t
 
ötSèã
;

326 
oßlTimîRec_t
 *
foundTimî
;

328 
	`HAL_ENTER_CRITICAL_SECTION
–
ötSèã
 );

331 
foundTimî
 = 
	`oßlFödTimî
–
èsk_id
, 
evít_id
 );

332 i‡–
foundTimî
 )

334 
	`oßlDñëeTimî
–
foundTimî
 );

337 
	`HAL_EXIT_CRITICAL_SECTION
–
ötSèã
 );

339  ( (
foundTimî
 !
NULL
Ë? 
SUCCESS
 : 
INVALID_EVENT_ID
 );

340 
	}
}

352 
uöt32
 
	$oßl_gë_timeoutEx
–
uöt8
 
èsk_id
, 
uöt16
 
evít_id
 )

354 
hÆI¡Sèã_t
 
ötSèã
;

355 
uöt32
 
π∫
 = 0;

356 
oßlTimîRec_t
 *
tmr
;

358 
	`HAL_ENTER_CRITICAL_SECTION
–
ötSèã
 );

360 
tmr
 = 
	`oßlFödTimî
–
èsk_id
, 
evít_id
 );

362 i‡–
tmr
 )

364 
π∫
 = 
tmr
->
timeout
.
time32
;

367 
	`HAL_EXIT_CRITICAL_SECTION
–
ötSèã
 );

369  
π∫
;

370 
	}
}

381 
uöt8
 
	$oßl_timî_num_a˘ive
( )

383 
hÆI¡Sèã_t
 
ötSèã
;

384 
uöt8
 
num_timîs
 = 0;

385 
oßlTimîRec_t
 *
§chTimî
;

387 
	`HAL_ENTER_CRITICAL_SECTION
–
ötSèã
 );

390 
§chTimî
 = 
timîHód
;

393  
§chTimî
 !
NULL
 )

395 
num_timîs
++;

396 
§chTimî
 = srchTimî->
√xt
;

399 
	`HAL_EXIT_CRITICAL_SECTION
–
ötSèã
 );

401  
num_timîs
;

402 
	}
}

413 
	$oßlTimîUpd©e
–
uöt32
 
upd©eTime
 )

415 
hÆI¡Sèã_t
 
ötSèã
;

416 
oßlTimîRec_t
 *
§chTimî
;

417 
oßlTimîRec_t
 *
¥evTimî
;

419 
oßlTime_t
 
timeUni⁄
;

420 
timeUni⁄
.
time32
 = 
upd©eTime
;

422 
	`HAL_ENTER_CRITICAL_SECTION
–
ötSèã
 );

424 
oßl_sy°emClock
 +
upd©eTime
;

425 
	`HAL_EXIT_CRITICAL_SECTION
–
ötSèã
 );

428 i‡–
timîHód
 !
NULL
 )

431 
§chTimî
 = 
timîHód
;

432 
¥evTimî
 = (*)
NULL
;

435  
§chTimî
 )

437 
oßlTimîRec_t
 *
‰ìTimî
 = 
NULL
;

439 
	`HAL_ENTER_CRITICAL_SECTION
–
ötSèã
 );

442 i‡((
timeUni⁄
.
time16
[1] =0Ë&& (timeUni⁄.
time8
[1] == 0))

445 i‡(
§chTimî
->
timeout
.
time8
[0] >
timeUni⁄
.time8[0])

448 
§chTimî
->
timeout
.
time8
[0] -
timeUni⁄
.time8[0];

453 i‡(
§chTimî
->
timeout
.
time32
 > 
timeUni⁄
.time32)

455 
§chTimî
->
timeout
.
time32
 -
timeUni⁄
.time32;

459 
§chTimî
->
timeout
.
time32
 = 0;

466 i‡(
§chTimî
->
timeout
.
time32
 > 
timeUni⁄
.time32)

468 
§chTimî
->
timeout
.
time32
 -
timeUni⁄
.time32;

472 
§chTimî
->
timeout
.
time32
 = 0;

477 i‡–(
§chTimî
->
timeout
.
time16
[0] == 0) && (srchTimer->timeout.time16[1] == 0) &&

478 (
§chTimî
->
ªlﬂdTimeout
Ë&& (§chTimî->
evít_Êag
) )

481 
	`oßl_£t_evít
–
§chTimî
->
èsk_id
, srchTimî->
evít_Êag
 );

484 
§chTimî
->
timeout
.
time32
 = srchTimî->
ªlﬂdTimeout
;

488 i‡–((
§chTimî
->
timeout
.
time16
[0] == 0) && (srchTimer->timeout.time16[1] == 0)) ||

489 (
§chTimî
->
evít_Êag
 == 0) )

492 i‡–
¥evTimî
 =
NULL
 )

494 
timîHód
 = 
§chTimî
->
√xt
;

498 
¥evTimî
->
√xt
 = 
§chTimî
->next;

502 
‰ìTimî
 = 
§chTimî
;

505 
§chTimî
 = srchTimî->
√xt
;

510 
¥evTimî
 = 
§chTimî
;

511 
§chTimî
 = srchTimî->
√xt
;

514 
	`HAL_EXIT_CRITICAL_SECTION
–
ötSèã
 );

516 i‡–
‰ìTimî
 )

518 i‡–(
‰ìTimî
->
timeout
.
time16
[0] == 0) && (freeTimer->timeout.time16[1] == 0) )

520 
	`oßl_£t_evít
–
‰ìTimî
->
èsk_id
, fªeTimî->
evít_Êag
 );

522 
	`oßl_mem_‰ì
–
‰ìTimî
 );

526 
	}
}

528 #ifde‡
POWER_SAVING


538 
	$oßl_adju°_timîs
( )

540 
uöt32
 
eTime
;

542 i‡–
timîHód
 !
NULL
 )

545 
eTime
 = 
	`TimîEœp£d
(Ë/ 
TICK_COUNT
;

547 i‡–
eTime
 )

549 
	`oßlTimîUpd©e
–
eTime
 );

552 
	}
}

566 
uöt32
 
	$oßl_√xt_timeout
( )

568 
uöt32
 
√xtTimeout
;

569 
oßlTimîRec_t
 *
§chTimî
;

571 i‡–
timîHód
 !
NULL
 )

574 
§chTimî
 = 
timîHód
;

575 
√xtTimeout
 = 
OSAL_TIMERS_MAX_TIMEOUT
;

578  
§chTimî
 !
NULL
 )

580 i‡(
§chTimî
->
timeout
.
time32
 < 
√xtTimeout
)

582 
√xtTimeout
 = 
§chTimî
->
timeout
.
time32
;

585 
§chTimî
 = srchTimî->
√xt
;

591 
√xtTimeout
 = 0;

594  ( 
√xtTimeout
 );

595 
	}
}

607 
uöt32
 
	$oßl_GëSy°emClock
( )

609  ( 
oßl_sy°emClock
 );

610 
	}
}

	@../../../../Components/osal/common/osal_bufmgr.c

46 
	~"OSAL.h
"

47 
	~"OnBﬂrd.h
"

48 
	~"oßl_bufmgr.h
"

54 
	#START_PTR
–
bd_±r
 ) ( (bd_±rË+ 1 )

	)

55 
	#END_PTR
–
bd_±r
 ) ( (
uöt8
 *)
	`START_PTR
–bd_±∏Ë+ (bd_±r)->
∑ylﬂd_Àn
 )

	)

64 
	sbm_desc


66 
bm_desc
 *
	m√xt_±r
;

67 
uöt16
 
	m∑ylﬂd_Àn
;

68 } 
	tbm_desc_t
;

82 
bm_desc_t
 *
	gbm_li°_±r
 = 
NULL
;

87 
bm_desc_t
 *
bm_desc_‰om_∑ylﬂd
 ( 
uöt8
 *
∑ylﬂd_±r
 );

102 *
	$oßl_bm_Æloc
–
uöt16
 
size
 )

104 
hÆI¡Sèã_t
 
cs
;

105 
bm_desc_t
 *
bd_±r
;

107 
	`HAL_ENTER_CRITICAL_SECTION
(
cs
);

109 
bd_±r
 = 
	`oßl_mem_Æloc
––
bm_desc_t
 ) + 
size
 );

111 i‡–
bd_±r
 !
NULL
 )

114 
bd_±r
->
∑ylﬂd_Àn
 = 
size
;

117 
bd_±r
->
√xt_±r
 = 
bm_li°_±r
;

118 
bm_li°_±r
 = 
bd_±r
;

121 
bd_±r
 = 
	`START_PTR
( bd_ptr );

124 
	`HAL_EXIT_CRITICAL_SECTION
(
cs
);

126  ( (*)
bd_±r
 );

127 
	}
}

138 
	$oßl_bm_‰ì
–*
∑ylﬂd_±r
 )

140 
hÆI¡Sèã_t
 
cs
;

141 
bm_desc_t
 *
lo›_±r
;

142 
bm_desc_t
 *
¥ev_±r
;

144 
	`HAL_ENTER_CRITICAL_SECTION
(
cs
);

146 
¥ev_±r
 = 
NULL
;

148 
lo›_±r
 = 
bm_li°_±r
;

149  
lo›_±r
 !
NULL
 )

151 i‡–
∑ylﬂd_±r
 >(*)
	`START_PTR
–
lo›_±r
 ) &&

152 
∑ylﬂd_±r
 <(*)
	`END_PTR
–
lo›_±r
) )

155 i‡–
¥ev_±r
 =
NULL
 )

158 
bm_li°_±r
 = 
lo›_±r
->
√xt_±r
;

162 
¥ev_±r
->
√xt_±r
 = 
lo›_±r
->next_ptr;

166 
	`oßl_mem_‰ì
–
lo›_±r
 );

173 
¥ev_±r
 = 
lo›_±r
;

174 
lo›_±r
 =Üo›_±r->
√xt_±r
;

177 
	`HAL_EXIT_CRITICAL_SECTION
(
cs
);

180 
	}
}

193 *
	$oßl_bm_adju°_hódî
–*
∑ylﬂd_±r
, 
öt16
 
size
 )

195 
bm_desc_t
 *
bd_±r
;

196 
uöt8
 *
√w_∑ylﬂd_±r
;

198 
bd_±r
 = 
	`bm_desc_‰om_∑ylﬂd
–(
uöt8
 *)
∑ylﬂd_±r
 );

199 i‡–
bd_±r
 !
NULL
 )

201 
√w_∑ylﬂd_±r
 = (
uöt8
 *)–(uöt8 *)
∑ylﬂd_±r
 - 
size
 );

204 i‡–
√w_∑ylﬂd_±r
 >(
uöt8
 *)
	`START_PTR
–
bd_±r
 ) &&

205 
√w_∑ylﬂd_±r
 <(
uöt8
 *)
	`END_PTR
–
bd_±r
 ) )

208  ( (*)
√w_∑ylﬂd_±r
 );

213  ( 
∑ylﬂd_±r
 );

214 
	}
}

227 *
	$oßl_bm_adju°_èû
–*
∑ylﬂd_±r
, 
öt16
 
size
 )

229 
bm_desc_t
 *
bd_±r
;

230 
uöt8
 *
√w_∑ylﬂd_±r
;

232 
bd_±r
 = 
	`bm_desc_‰om_∑ylﬂd
–(
uöt8
 *)
∑ylﬂd_±r
 );

233 i‡–
bd_±r
 !
NULL
 )

235 
√w_∑ylﬂd_±r
 = (
uöt8
 *)
	`END_PTR
–
bd_±r
 ) - 
size
;

238 i‡–
√w_∑ylﬂd_±r
 >(
uöt8
 *)
	`START_PTR
–
bd_±r
 ) &&

239 
√w_∑ylﬂd_±r
 <(
uöt8
 *)
	`END_PTR
–
bd_±r
 ) )

242  ( (*)
√w_∑ylﬂd_±r
 );

247  ( 
∑ylﬂd_±r
 );

248 
	}
}

259 
bm_desc_t
 *
	$bm_desc_‰om_∑ylﬂd
 ( 
uöt8
 *
∑ylﬂd_±r
 )

261 
bm_desc_t
 *
lo›_±r
;

263 
lo›_±r
 = 
bm_li°_±r
;

264  
lo›_±r
 !
NULL
 )

266 i‡–
∑ylﬂd_±r
 >(
uöt8
 *)
	`START_PTR
–
lo›_±r
 ) &&

267 
∑ylﬂd_±r
 <(
uöt8
 *)
	`END_PTR
–
lo›_±r
) )

274 
lo›_±r
 =Üo›_±r->
√xt_±r
;

277  ( 
lo›_±r
 );

278 
	}
}

	@../../../../Components/osal/common/osal_cbtimer.c

44 
	~"OSAL.h
"

45 
	~"OSAL_Tasks.h
"

47 
	~"oßl_cbtimî.h
"

56 
	#EVENT_ID
–
timîId
 ) ( 0x0001 << ( (ÅimîId ) % 
NUM_CBTIMERS_PER_TASK
 ) )

	)

59 
	#TASK_ID
–
timîId
 ) ( ( (ÅimîId ) / 
NUM_CBTIMERS_PER_TASK
 ) + 
ba£TaskID
 )

	)

62 
	#BANK_TASK_ID
–
èskId
 ) ( ( 
ba£TaskID
 - (ÅaskId ) ) * 
NUM_CBTIMERS
 )

	)

68 
	#NUM_CBTIMERS_PER_TASK
 15

	)

71 
	#NUM_CBTIMERS
 ( 
OSAL_CBTIMER_NUM_TASKS
 * 
NUM_CBTIMERS_PER_TASK
 )

	)

79 
p‚CbTimî_t
 
	mp‚CbTimî
;

80 
uöt8
 *
	mpD©a
;

81 } 
	tcbTimî_t
;

87 
uöt16
 
	gba£TaskID
 = 
TASK_NO_TASK
;

101 #i‡–
NUM_CBTIMERS
 > 0 )

102 
cbTimî_t
 
	gcbTimîs
[
NUM_CBTIMERS
];

123 
	$oßl_CbTimîInô
–
uöt8
 
èskId
 )

125 i‡–
ba£TaskID
 =
TASK_NO_TASK
 )

128 
ba£TaskID
 = 
èskId
;

131 
	`oßl_mem£t
–
cbTimîs
, 0, ( cbTimers ) );

133 
	}
}

145 
uöt16
 
	$oßl_CbTimîPro˚ssEvít
–
uöt8
 
èskId
, 
uöt16
 
evíts
 )

147 i‡–
evíts
 & 
SYS_EVENT_MSG
 )

152  ( 
evíts
 ^ 
SYS_EVENT_MSG
 );

155 i‡–
evíts
 )

157 
uöt8
 
i
;

158 
uöt16
 
evít
;

161  
i
 = 0; i < 
NUM_CBTIMERS_PER_TASK
; i++ )

163 i‡––
evíts
 >> 
i
 ) & 0x0001 )

165 
cbTimî_t
 *
pTimî
 = &
cbTimîs
[
	`BANK_TASK_ID
–
èskId
 )+
i
];

168 
evít
 = 0x0001 << 
i
;

171 
pTimî
->
	`p‚CbTimî
–pTimî->
pD©a
 );

174 
pTimî
->
p‚CbTimî
 = 
NULL
;

177 
pTimî
->
pD©a
 = 
NULL
;

185  ( 
evíts
 ^ 
evít
 );

191 
	}
}

207 
Sètus_t
 
	$oßl_CbTimîSèπ
–
p‚CbTimî_t
 
p‚CbTimî
, 
uöt8
 *
pD©a
,

208 
uöt16
 
timeout
, 
uöt8
 *
pTimîId
 )

210 
uöt8
 
i
;

213 i‡–
p‚CbTimî
 =
NULL
 )

215  ( 
INVALIDPARAMETER
 );

219  
i
 = 0; i < 
NUM_CBTIMERS
; i++ )

221 i‡–
cbTimîs
[
i
].
p‚CbTimî
 =
NULL
 )

224 i‡–
	`oßl_°¨t_timîEx
–
	`TASK_ID
–
i
 ), 
	`EVENT_ID
–ò), 
timeout
 ) =
SUCCESS
 )

227 
cbTimîs
[
i
].
p‚CbTimî
 =ÖfnCbTimer;

228 
cbTimîs
[
i
].
pD©a
 =ÖData;

230 i‡–
pTimîId
 !
NULL
 )

233 *
pTimîId
 = 
i
;

236  ( 
SUCCESS
 );

242  ( 
NO_TIMER_AVAIL
 );

243 
	}
}

258 
Sètus_t
 
	$oßl_CbTimîUpd©e
–
uöt8
 
timîId
, 
uöt16
 
timeout
 )

261 i‡–
timîId
 < 
NUM_CBTIMERS
 )

263 i‡–
cbTimîs
[
timîId
].
p‚CbTimî
 !
NULL
 )

266 i‡–
	`oßl_gë_timeoutEx
–
	`TASK_ID
–
timîId
 ), 
	`EVENT_ID
(ÅimerId ) ) != 0 )

269 
	`oßl_°¨t_timîEx
–
	`TASK_ID
–
timîId
 ), 
	`EVENT_ID
–timîId ), 
timeout
 );

271  ( 
SUCCESS
 );

277  ( 
INVALIDPARAMETER
 );

278 
	}
}

292 
Sètus_t
 
	$oßl_CbTimîSt›
–
uöt8
 
timîId
 )

295 i‡–
timîId
 < 
NUM_CBTIMERS
 )

297 i‡–
cbTimîs
[
timîId
].
p‚CbTimî
 !
NULL
 )

300 
	`oßl_°›_timîEx
–
	`TASK_ID
–
timîId
 ), 
	`EVENT_ID
(ÅimerId ) );

303 
cbTimîs
[
timîId
].
p‚CbTimî
 = 
NULL
;

306 
cbTimîs
[
timîId
].
pD©a
 = 
NULL
;

308  ( 
SUCCESS
 );

313  ( 
INVALIDPARAMETER
 );

314 
	}
}

	@../../../../Components/osal/include/OSAL.h

43 #i‚de‡
OSAL_H


44 
	#OSAL_H


	)

46 #ifde‡
__˝lu•lus


55 
	~<limôs.h
>

57 
	~"comdef.h
"

58 
	~"OSAL_Mem‹y.h
"

59 
	~"OSAL_Timîs.h
"

64 #i‡–
UINT_MAX
 == 65535 )

65 
	#oßl_off£tof
(
ty≥
, 
membî
Ë((
uöt16
Ë&((—y≥ *Ë0)->membî))

	)

67 
	#oßl_off£tof
(
ty≥
, 
membî
Ë((
uöt32
Ë&((—y≥ *Ë0)->membî))

	)

70 
	#OSAL_MSG_NEXT
(
msg_±r
Ë((
oßl_msg_hdr_t
 *Ë(msg_±rË- 1)->
√xt


	)

72 
	#OSAL_MSG_Q_INIT
(
q_±r
Ë*(q_±rË
NULL


	)

74 
	#OSAL_MSG_Q_EMPTY
(
q_±r
Ë(*(q_±rË=
NULL
)

	)

76 
	#OSAL_MSG_Q_HEAD
(
q_±r
Ë(*(q_±r))

	)

78 
	#OSAL_MSG_LEN
(
msg_±r
Ë((
oßl_msg_hdr_t
 *Ë(msg_±rË- 1)->
Àn


	)

80 
	#OSAL_MSG_ID
(
msg_±r
Ë((
oßl_msg_hdr_t
 *Ë(msg_±rË- 1)->
de°_id


	)

87 
	#INTS_ALL
 0xFF

	)

94 *
√xt
;

95 
uöt16
 
Àn
;

96 
uöt8
 
de°_id
;

97 } 
	toßl_msg_hdr_t
;

101 
uöt8
 
evít
;

102 
uöt8
 
°©us
;

103 } 
	toßl_evít_hdr_t
;

105 * 
	toßl_msg_q_t
;

120 
uöt8
 * 
oßl_msg_Æloˇã
(
uöt16
 
Àn
 );

125 
uöt8
 
oßl_msg_dóŒoˇã
–uöt8 *
msg_±r
 );

130 
uöt8
 
oßl_msg_£nd
–uöt8 
de°ö©i⁄_èsk
, uöt8 *
msg_±r
 );

135 
uöt8
 
oßl_msg_push_‰⁄t
–uöt8 
de°ö©i⁄_èsk
, uöt8 *
msg_±r
 );

140 
uöt8
 *
oßl_msg_ª˚ive
–uöt8 
èsk_id
 );

145 
oßl_evít_hdr_t
 *
oßl_msg_föd
(
uöt8
 
èsk_id
, uöt8 
evít
);

150 
oßl_msg_íqueue
–
oßl_msg_q_t
 *
q_±r
, *
msg_±r
 );

155 
uöt8
 
oßl_msg_íqueue_max
–
oßl_msg_q_t
 *
q_±r
, *
msg_±r
, uöt8 
max
 );

160 *
oßl_msg_dequeue
–
oßl_msg_q_t
 *
q_±r
 );

165 
oßl_msg_push
–
oßl_msg_q_t
 *
q_±r
, *
msg_±r
 );

170 
oßl_msg_exåa˘
–
oßl_msg_q_t
 *
q_±r
, *
msg_±r
, *
¥ev_±r
 );

178 
uöt8
 
oßl_£t_evít
–uöt8 
èsk_id
, 
uöt16
 
evít_Êag
 );

184 
uöt8
 
oßl_˛ór_evít
–uöt8 
èsk_id
, 
uöt16
 
evít_Êag
 );

192 
uöt8
 
oßl_i§_ªgi°î
–uöt8 
öãºu±_id
, (*
i§_±r
)( uint8* ) );

197 
uöt8
 
oßl_öt_íabÀ
–uöt8 
öãºu±_id
 );

202 
uöt8
 
oßl_öt_dißbÀ
–uöt8 
öãºu±_id
 );

210 
uöt8
 
oßl_öô_sy°em
( );

215 #i‡
deföed
 (
ZBIT
)

216 
__de˛•ec
(
dŒexp‹t
Ë
oßl_°¨t_sy°em
( );

218 
oßl_°¨t_sy°em
( );

224 
oßl_run_sy°em
( );

229 
uöt8
 
oßl_£lf
( );

237 
oßl_°æí
–*
pSåög
 );

242 *
oßl_mem˝y
–*, c⁄° 
GENERIC
 *, );

247 *
oßl_memdup
–c⁄° 
GENERIC
 *
§c
, 
Àn
 );

252 *
oßl_ªvmem˝y
–*, c⁄° 
GENERIC
 *, );

257 
uöt8
 
oßl_memcmp
–c⁄° 
GENERIC
 *
§c1
, c⁄° GENERIC *
§c2
, 
Àn
 );

262 *
oßl_mem£t
–*
de°
, 
uöt8
 
vÆue
, 
Àn
 );

267 
uöt16
 
oßl_buûd_uöt16
–
uöt8
 *
sw≠≥d
 );

272 
uöt32
 
oßl_buûd_uöt32
–
uöt8
 *
sw≠≥d
, uöt8 
Àn
 );

277 #i‡!
deföed
 ( 
ZBIT
 ) && !deföed ( 
ZBIT2
 ) && !deföed (
UBIT
)

278 
uöt8
 *
_…ﬂ
–
uöt32
 
l
, uöt8 * 
buf
, uöt8 
ødix
 );

284 
uöt16
 
oßl_ønd
( );

289 
uöt8
* 
oßl_buf„r_uöt32
–uöt8 *
buf
, 
uöt32
 
vÆ
 );

294 
uöt8
* 
oßl_buf„r_uöt24
–uöt8 *
buf
, 
uöt24
 
vÆ
 );

299 
uöt8
 
oßl_isbuf£t
–uöt8 *
buf
, uöt8 
vÆ
, uöt8 
Àn
 );

304 #ifde‡
__˝lu•lus


	@../../../../Components/osal/include/OSAL_Clock.h

40 #i‚de‡
OSAL_CLOCK_H


41 
	#OSAL_CLOCK_H


	)

43 #ifde‡
__˝lu•lus


56 
	#IsLópYór
(
yr
Ë(!((yrË% 400Ë|| (((yrË% 100Ë&& !((yrË% 4)))

	)

68 
uöt32
 
	tUTCTime
;

73 
uöt8
 
£c⁄ds
;

74 
uöt8
 
möuãs
;

75 
uöt8
 
hour
;

76 
uöt8
 
day
;

77 
uöt8
 
m⁄th
;

78 
uöt16
 
yór
;

79 } 
	tUTCTimeSåu˘
;

92 
oßlTimeUpd©e
( );

100 
oßl_£tClock
–
UTCTime
 
√wTime
 );

108 
UTCTime
 
oßl_gëClock
( );

117 
oßl_C⁄vîtUTCTime
–
UTCTimeSåu˘
 *
tm
, 
UTCTime
 
£cTime
 );

124 
UTCTime
 
oßl_C⁄vîtUTCSecs
–
UTCTimeSåu˘
 *
tm
 );

130 
oßlAdju°Timî
–
uöt32
 
M£c
 );

135 #ifde‡
__˝lu•lus


	@../../../../Components/osal/include/OSAL_Memory.h

40 #i‚de‡
OSAL_MEMORY_H


41 
	#OSAL_MEMORY_H


	)

43 #ifde‡
__˝lu•lus


51 
	~"comdef.h
"

57 #i‡!
deföed
 ( 
OSALMEM_METRICS
 )

58 
	#OSALMEM_METRICS
 
FALSE


	)

65 
	#oßl_°ack_u£d
(Ë
	`OnBﬂrd_°ack_u£d
()

	)

82 
oßl_mem_öô
( );

87 
oßl_mem_kick
( );

92 #ifde‡
DPRINTF_OSALHEAPTRACE


93 *
oßl_mem_Æloc_dbg
–
uöt16
 
size
, c⁄° *
‚ame
, 
 um
 );

94 
	#oßl_mem_Æloc
(
_size
 ) 
	`oßl_mem_Æloc_dbg
(_size, 
__FILE__
, 
__LINE__
)

	)

96 *
oßl_mem_Æloc
–
uöt16
 
size
 );

102 #ifde‡
DPRINTF_OSALHEAPTRACE


103 
oßl_mem_‰ì_dbg
–*
±r
, c⁄° *
‚ame
, 
 um
 );

104 
	#oßl_mem_‰ì
(
_±r
 ) 
	`oßl_mem_‰ì_dbg
(_±r, 
__FILE__
, 
__LINE__
)

	)

106 
oßl_mem_‰ì
–*
±r
 );

109 #i‡–
OSALMEM_METRICS
 )

113 
uöt16
 
oßl_hóp_block_max
( );

118 
uöt16
 
oßl_hóp_block_˙t
( );

123 
uöt16
 
oßl_hóp_block_‰ì
( );

128 
uöt16
 
oßl_hóp_mem_u£d
( );

131 #i‡
deföed
 (
ZTOOL_P1
Ë|| deföed (
ZTOOL_P2
)

135 
uöt16
 
oßl_hóp_high_w©î
( );

141 #ifde‡
__˝lu•lus


	@../../../../Components/osal/include/OSAL_Nv.h

40 #i‚de‡
OSAL_NV_H


41 
	#OSAL_NV_H


	)

43 #ifde‡
__˝lu•lus


52 
	~"hÆ_ty≥s.h
"

77 
oßl_nv_öô
–*
p
 );

82 
uöt8
 
oßl_nv_ôem_öô
–
uöt16
 
id
, uöt16 
Àn
, *
buf
 );

87 
uöt8
 
oßl_nv_ªad
–
uöt16
 
id
, uöt16 
off£t
, uöt16 
Àn
, *
buf
 );

92 
uöt8
 
oßl_nv_wrôe
–
uöt16
 
id
, uöt16 
off£t
, uöt16 
Àn
, *
buf
 );

97 
uöt16
 
oßl_nv_ôem_Àn
–uöt16 
id
 );

102 
uöt8
 
oßl_nv_dñëe
–
uöt16
 
id
, uöt16 
Àn
 );

107 #ifde‡
__˝lu•lus


	@../../../../Components/osal/include/OSAL_PwrMgr.h

40 #i‚de‡
OSAL_PWRMGR_H


41 
	#OSAL_PWRMGR_H


	)

43 #ifde‡
__˝lu•lus


65 
uöt16
 
pwrmgr_èsk_°©e
;

66 
uöt16
 
pwrmgr_√xt_timeout
;

67 
uöt16
 
accumuœãd_¶ìp_time
;

68 
uöt8
 
pwrmgr_devi˚
;

69 } 
	tpwrmgr_©åibuã_t
;

75 
	#PWRMGR_ALWAYS_ON
 0

	)

76 
	#PWRMGR_BATTERY
 1

	)

81 
	#PWRMGR_CONSERVE
 0

	)

82 
	#PWRMGR_HOLD
 1

	)

91 
pwrmgr_©åibuã_t
 
pwrmgr_©åibuã
;

102 
oßl_pwrmgr_öô
( );

115 
uöt8
 
oßl_pwrmgr_èsk_°©e
–uöt8 
èsk_id
, uöt8 
°©e
 );

124 
oßl_pwrmgr_devi˚
–
uöt8
 
pwrmgr_devi˚
 );

130 
oßl_pwrmgr_powîc⁄£rve
( );

135 #ifde‡
__˝lu•lus


	@../../../../Components/osal/include/OSAL_Tasks.h

40 #i‚de‡
OSAL_TASKS_H


41 
	#OSAL_TASKS_H


	)

43 #ifde‡
__˝lu•lus


59 
	#TASK_NO_TASK
 0xFF

	)

68 (*
	tpTaskEvítH™dÀrFn
)–
	tèsk_id
, 
	tevít
 );

74 c⁄° 
pTaskEvítH™dÀrFn
 
èsksAº
[];

75 c⁄° 
uöt8
 
èsksC¡
;

76 
uöt16
 *
èsksEvíts
;

85 
oßlInôTasks
( );

90 #ifde‡
__˝lu•lus


	@../../../../Components/osal/include/OSAL_Timers.h

40 #i‚de‡
OSAL_TIMERS_H


41 
	#OSAL_TIMERS_H


	)

43 #ifde‡
__˝lu•lus


61 
	#OSAL_TIMERS_MAX_TIMEOUT
 0x28f5c28ê

	)

78 
oßlTimîInô
( );

83 
uöt8
 
oßl_°¨t_timîEx
–uöt8 
èsk_id
, 
uöt16
 
evít_id
, 
uöt32
 
timeout_vÆue
 );

88 
uöt8
 
oßl_°¨t_ªlﬂd_timî
–uöt8 
èskID
, 
uöt16
 
evít_id
, 
uöt32
 
timeout_vÆue
 );

93 
uöt8
 
oßl_°›_timîEx
–uöt8 
èsk_id
, 
uöt16
 
evít_id
 );

98 
uöt32
 
oßl_gë_timeoutEx
–
uöt8
 
èsk_id
, 
uöt16
 
evít_id
 );

104 
oßl_timî_ISR
( );

109 
oßl_adju°_timîs
( );

114 
oßlTimîUpd©e
–
uöt32
 
upd©eTime
 );

119 
uöt8
 
oßl_timî_num_a˘ive
( );

125 
oßl_¶ìp_timîs
( );

126 
oßl_un¶ìp_timîs
( );

131 
uöt32
 
oßl_GëSy°emClock
( );

137 
uöt32
 
oßl_√xt_timeout
( );

142 #ifde‡
__˝lu•lus


	@../../../../Components/osal/include/ZComDef.h

40 #i‚de‡
ZCOMDEF_H


41 
	#ZCOMDEF_H


	)

43 #ifde‡
__˝lu•lus


52 
	~"comdef.h
"

53 
	~"ßddr.h
"

59 
	#oßl_˝yExtAddr
(
a
, 
b
Ë
	`sAddrExtCpy
(◊), (c⁄° 
uöt8
 *)(b))

	)

60 
	#oßl_ExtAddrEquÆ
(
a
, 
b
Ë
	`sAddrExtCmp
((c⁄° 
uöt8
 *)◊), (c⁄° uöt8 *)(b))

	)

61 
	#oßl_c›yAddªss
(
a
, 
b
Ë
	`sAddrCpy
–(
sAddr_t
 *)◊), (c⁄° sAddr_à*)(bË)

	)

70 
	#DEVICE_BUILD_COORDINATOR
 0x01

	)

71 
	#DEVICE_BUILD_ROUTER
 0x02

	)

72 
	#DEVICE_BUILD_ENDDEVICE
 0x04

	)

75 
	#ZSUCCESS
 
SUCCESS


	)

78 
	#COMPID_OSAL
 0

	)

79 
	#COMPID_MTEL
 1

	)

80 
	#COMPID_MTSPCI
 2

	)

81 
	#COMPID_NWK
 3

	)

82 
	#COMPID_NWKIF
 4

	)

83 
	#COMPID_MACCB
 5

	)

84 
	#COMPID_MAC
 6

	)

85 
	#COMPID_APP
 7

	)

86 
	#COMPID_TEST
 8

	)

88 
	#COMPID_RTG
 9

	)

89 
	#COMPID_DATA
 11

	)

92 
	#COMPID_TEST_NWK_STARTUP
 20

	)

93 
	#COMPID_TEST_SCAN_CONFIRM
 21

	)

94 
	#COMPID_TEST_ASSOC_CONFIRM
 22

	)

95 
	#COMPID_TEST_REMOTE_DATA_CONFIRM
 23

	)

98 
	#ZCD_NV_EXTADDR
 0x0001

	)

99 
	#ZCD_NV_BOOTCOUNTER
 0x0002

	)

100 
	#ZCD_NV_STARTUP_OPTION
 0x0003

	)

101 
	#ZCD_NV_START_DELAY
 0x0004

	)

104 
	#ZCD_NV_NIB
 0x0021

	)

105 
	#ZCD_NV_DEVICE_LIST
 0x0022

	)

106 
	#ZCD_NV_ADDRMGR
 0x0023

	)

107 
	#ZCD_NV_POLL_RATE
 0x0024

	)

108 
	#ZCD_NV_QUEUED_POLL_RATE
 0x0025

	)

109 
	#ZCD_NV_RESPONSE_POLL_RATE
 0x0026

	)

110 
	#ZCD_NV_REJOIN_POLL_RATE
 0x0027

	)

111 
	#ZCD_NV_DATA_RETRIES
 0x0028

	)

112 
	#ZCD_NV_POLL_FAILURE_RETRIES
 0x0029

	)

113 
	#ZCD_NV_STACK_PROFILE
 0x002A

	)

114 
	#ZCD_NV_INDIRECT_MSG_TIMEOUT
 0x002B

	)

115 
	#ZCD_NV_ROUTE_EXPIRY_TIME
 0x002C

	)

116 
	#ZCD_NV_EXTENDED_PAN_ID
 0x002D

	)

117 
	#ZCD_NV_BCAST_RETRIES
 0x002E

	)

118 
	#ZCD_NV_PASSIVE_ACK_TIMEOUT
 0x002F

	)

119 
	#ZCD_NV_BCAST_DELIVERY_TIME
 0x0030

	)

120 
	#ZCD_NV_NWK_MODE
 0x0031

	)

121 
	#ZCD_NV_CONCENTRATOR_ENABLE
 0x0032

	)

122 
	#ZCD_NV_CONCENTRATOR_DISCOVERY
 0x0033

	)

123 
	#ZCD_NV_CONCENTRATOR_RADIUS
 0x0034

	)

124 
	#ZCD_NV_CONCENTRATOR_RC
 0x0036

	)

125 
	#ZCD_NV_NWK_MGR_MODE
 0x0037

	)

126 
	#ZCD_NV_SRC_RTG_EXPIRY_TIME
 0x0038

	)

127 
	#ZCD_NV_ROUTE_DISCOVERY_TIME
 0x0039

	)

128 
	#ZCD_NV_NWK_ACTIVE_KEY_INFO
 0x003A

	)

129 
	#ZCD_NV_NWK_ALTERN_KEY_INFO
 0x003B

	)

130 
	#ZCD_NV_ROUTER_OFF_ASSOC_CLEANUP
 0x003C

	)

131 
	#ZCD_NV_NWK_LEAVE_REQ_ALLOWED
 0x003D

	)

132 
	#ZCD_NV_NWK_CHILD_AGE_ENABLE
 0x003E

	)

133 
	#ZCD_NV_DEVICE_LIST_KA_TIMEOUT
 0x003F

	)

136 
	#ZCD_NV_BINDING_TABLE
 0x0041

	)

137 
	#ZCD_NV_GROUP_TABLE
 0x0042

	)

138 
	#ZCD_NV_APS_FRAME_RETRIES
 0x0043

	)

139 
	#ZCD_NV_APS_ACK_WAIT_DURATION
 0x0044

	)

140 
	#ZCD_NV_APS_ACK_WAIT_MULTIPLIER
 0x0045

	)

141 
	#ZCD_NV_BINDING_TIME
 0x0046

	)

142 
	#ZCD_NV_APS_USE_EXT_PANID
 0x0047

	)

143 
	#ZCD_NV_APS_USE_INSECURE_JOIN
 0x0048

	)

144 
	#ZCD_NV_COMMISSIONED_NWK_ADDR
 0x0049

	)

146 
	#ZCD_NV_APS_NONMEMBER_RADIUS
 0x004B

147 
	#ZCD_NV_APS_LINK_KEY_TABLE
 0x004C

	)

148 
	#ZCD_NV_APS_DUPREJ_TIMEOUT_INC
 0x004D

	)

149 
	#ZCD_NV_APS_DUPREJ_TIMEOUT_COUNT
 0x004E

	)

150 
	#ZCD_NV_APS_DUPREJ_TABLE_SIZE
 0x004F

	)

153 
	#ZCD_NV_SECURITY_LEVEL
 0x0061

	)

154 
	#ZCD_NV_PRECFGKEY
 0x0062

	)

155 
	#ZCD_NV_PRECFGKEYS_ENABLE
 0x0063

	)

156 
	#ZCD_NV_SECURITY_MODE
 0x0064

	)

157 
	#ZCD_NV_SECURE_PERMIT_JOIN
 0x0065

	)

158 
	#ZCD_NV_APS_LINK_KEY_TYPE
 0x0066

	)

159 
	#ZCD_NV_APS_ALLOW_R19_SECURITY
 0x0067

	)

161 
	#ZCD_NV_IMPLICIT_CERTIFICATE
 0x0069

	)

162 
	#ZCD_NV_DEVICE_PRIVATE_KEY
 0x006A

	)

163 
	#ZCD_NV_CA_PUBLIC_KEY
 0x006B

	)

164 
	#ZCD_NV_KE_MAX_DEVICES
 0x006C

	)

166 
	#ZCD_NV_USE_DEFAULT_TCLK
 0x006D

	)

168 
	#ZCD_NV_RNG_COUNTER
 0x006F

	)

169 
	#ZCD_NV_RANDOM_SEED
 0x0070

	)

170 
	#ZCD_NV_TRUSTCENTER_ADDR
 0x0071

	)

173 
	#ZCD_NV_USERDESC
 0x0081

	)

174 
	#ZCD_NV_NWKKEY
 0x0082

	)

175 
	#ZCD_NV_PANID
 0x0083

	)

176 
	#ZCD_NV_CHANLIST
 0x0084

	)

177 
	#ZCD_NV_LEAVE_CTRL
 0x0085

	)

178 
	#ZCD_NV_SCAN_DURATION
 0x0086

	)

179 
	#ZCD_NV_LOGICAL_TYPE
 0x0087

	)

180 
	#ZCD_NV_NWKMGR_MIN_TX
 0x0088

	)

181 
	#ZCD_NV_NWKMGR_ADDR
 0x0089

	)

183 
	#ZCD_NV_ZDO_DIRECT_CB
 0x008F

	)

186 
	#ZCD_NV_SCENE_TABLE
 0x0091

	)

187 
	#ZCD_NV_MIN_FREE_NWK_ADDR
 0x0092

	)

188 
	#ZCD_NV_MAX_FREE_NWK_ADDR
 0x0093

	)

189 
	#ZCD_NV_MIN_FREE_GRP_ID
 0x0094

	)

190 
	#ZCD_NV_MAX_FREE_GRP_ID
 0x0095

	)

191 
	#ZCD_NV_MIN_GRP_IDS
 0x0096

	)

192 
	#ZCD_NV_MAX_GRP_IDS
 0x0097

	)

193 
	#ZCD_NV_OTA_BLOCK_REQ_DELAY
 0x0098

	)

196 
	#ZCD_NV_SAPI_ENDPOINT
 0x00A1

	)

202 
	#ZCD_NV_SAS_SHORT_ADDR
 0x00B1

	)

203 
	#ZCD_NV_SAS_EXT_PANID
 0x00B2

	)

204 
	#ZCD_NV_SAS_PANID
 0x00B3

	)

205 
	#ZCD_NV_SAS_CHANNEL_MASK
 0x00B4

	)

206 
	#ZCD_NV_SAS_PROTOCOL_VER
 0x00B5

	)

207 
	#ZCD_NV_SAS_STACK_PROFILE
 0x00B6

	)

208 
	#ZCD_NV_SAS_STARTUP_CTRL
 0x00B7

	)

210 
	#ZCD_NV_SAS_TC_ADDR
 0x00C1

	)

211 
	#ZCD_NV_SAS_TC_MASTER_KEY
 0x00C2

	)

212 
	#ZCD_NV_SAS_NWK_KEY
 0x00C3

	)

213 
	#ZCD_NV_SAS_USE_INSEC_JOIN
 0x00C4

	)

214 
	#ZCD_NV_SAS_PRECFG_LINK_KEY
 0x00C5

	)

215 
	#ZCD_NV_SAS_NWK_KEY_SEQ_NUM
 0x00C6

	)

216 
	#ZCD_NV_SAS_NWK_KEY_TYPE
 0x00C7

	)

217 
	#ZCD_NV_SAS_NWK_MGR_ADDR
 0x00C8

	)

219 
	#ZCD_NV_SAS_CURR_TC_MASTER_KEY
 0x00D1

	)

220 
	#ZCD_NV_SAS_CURR_NWK_KEY
 0x00D2

	)

221 
	#ZCD_NV_SAS_CURR_PRECFG_LINK_KEY
 0x00D3

	)

225 
	#ZCD_NV_TCLK_TABLE_START
 0x0101

	)

226 
	#ZCD_NV_TCLK_TABLE_END
 0x01FF

	)

230 
	#ZCD_NV_APS_LINK_KEY_DATA_START
 0x0201

231 
	#ZCD_NV_APS_LINK_KEY_DATA_END
 0x02FF

	)

241 
	#ZCD_STARTOPT_DEFAULT_CONFIG_STATE
 0x01

	)

242 
	#ZCD_STARTOPT_DEFAULT_NETWORK_STATE
 0x02

	)

243 
	#ZCD_STARTOPT_AUTO_START
 0x04

	)

244 
	#ZCD_STARTOPT_CLEAR_CONFIG
 
ZCD_STARTOPT_DEFAULT_CONFIG_STATE


	)

245 
	#ZCD_STARTOPT_CLEAR_STATE
 
ZCD_STARTOPT_DEFAULT_NETWORK_STATE


	)

248 
	#ZCL_KE_IMPLICIT_CERTIFICATE_LEN
 48

	)

249 
	#ZCL_KE_CA_PUBLIC_KEY_LEN
 22

	)

250 
	#ZCL_KE_DEVICE_PRIVATE_KEY_LEN
 21

	)

257 
uöt8
 
	tbyã
;

258 
uöt16
 
	tUINT16
;

259 
öt16
 
	tINT16
;

263 
AddrNŸPª£¡
 = 0,

264 
AddrGroup
 = 1,

265 
Addr16Bô
 = 2,

266 
Addr64Bô
 = 3,

267 
AddrBrﬂdˇ°
 = 15

270 
	#Z_EXTADDR_LEN
 8

	)

272 
byã
 
	tZL⁄gAddr_t
[
Z_EXTADDR_LEN
];

278 
uöt16
 
sh‹tAddr
;

279 
ZL⁄gAddr_t
 
extAddr
;

280 } 
addr
;

281 
byã
 
addrMode
;

282 } 
	tzAddrTy≥_t
;

285 
	#ZSuc˚ss
 
SUCCESS


	)

286 
	#ZFaûuª
 
FAILURE


	)

287 
	#ZInvÆidP¨amëî
 
INVALIDPARAMETER


	)

290 
	#ZMemEº‹
 0x10

	)

291 
	#ZBuf„rFuŒ
 0x11

	)

292 
	#ZUnsuµ‹ãdMode
 0x12

	)

293 
	#ZMacMemEº‹
 0x13

	)

295 
	#ZS≠iInProgªss
 0x20

	)

296 
	#ZS≠iTimeout
 0x21

	)

297 
	#ZS≠iInô
 0x22

	)

299 
	#ZNŸAuth‹ized
 0x7E

	)

301 
	#ZMÆf‹medCmd
 0x80

	)

302 
	#ZUnsupClu°îCmd
 0x81

	)

305 
	#ZOèAb‹t
 0x95

	)

306 
	#ZOèImageInvÆid
 0x96

	)

307 
	#ZOèWaôF‹D©a
 0x97

	)

308 
	#ZOèNoImageAvaûabÀ
 0x98

	)

309 
	#ZOèRequúeM‹eImage
 0x99

	)

312 
	#ZApsFaû
 0xb1

	)

313 
	#ZApsTabÀFuŒ
 0xb2

	)

314 
	#ZApsIŒegÆReque°
 0xb3

	)

315 
	#ZApsInvÆidBödög
 0xb4

	)

316 
	#ZApsUnsuµ‹ãdAârib
 0xb5

	)

317 
	#ZApsNŸSuµ‹ãd
 0xb6

	)

318 
	#ZApsNoAck
 0xb7

	)

319 
	#ZApsDu∂iˇãE¡ry
 0xb8

	)

320 
	#ZApsNoBoundDevi˚
 0xb9

	)

321 
	#ZApsNŸAŒowed
 0xba

	)

322 
	#ZApsNŸAuthítiˇãd
 0xbb

	)

325 
	#ZSecNoKey
 0xa1

	)

326 
	#ZSecOldFrmCou¡
 0xa2

	)

327 
	#ZSecMaxFrmCou¡
 0xa3

	)

328 
	#ZSecCcmFaû
 0xa4

	)

331 
	#ZNwkInvÆidP¨am
 0xc1

	)

332 
	#ZNwkInvÆidReque°
 0xc2

	)

333 
	#ZNwkNŸPîmôãd
 0xc3

	)

334 
	#ZNwkSèπupFaûuª
 0xc4

	)

335 
	#ZNwkAÃódyPª£¡
 0xc5

	)

336 
	#ZNwkSyncFaûuª
 0xc6

	)

337 
	#ZNwkTabÀFuŒ
 0xc7

	)

338 
	#ZNwkUnknownDevi˚
 0xc8

	)

339 
	#ZNwkUnsuµ‹ãdAâribuã
 0xc9

	)

340 
	#ZNwkNoNëw‹ks
 0xˇ

	)

341 
	#ZNwkLóveUnc⁄fúmed
 0xcb

	)

342 
	#ZNwkNoAck
 0xcc

343 
	#ZNwkNoRouã
 0xcd

	)

346 
	#ZMacSuc˚ss
 0x00

	)

347 
	#ZMacBóc⁄Loss
 0xe0

	)

348 
	#ZMacCh™√lAc˚ssFaûuª
 0xe1

	)

349 
	#ZMacDíõd
 0xe2

	)

350 
	#ZMacDißbÀTrxFaûuª
 0xe3

	)

351 
	#ZMacFaûedSecurôyCheck
 0xe4

	)

352 
	#ZMacFømeTooL⁄g
 0xe5

	)

353 
	#ZMacInvÆidGTS
 0xe6

	)

354 
	#ZMacInvÆidH™dÀ
 0xe7

	)

355 
	#ZMacInvÆidP¨amëî
 0xe8

	)

356 
	#ZMacNoACK
 0xe9

	)

357 
	#ZMacNoBóc⁄
 0xó

	)

358 
	#ZMacNoD©a
 0xeb

	)

359 
	#ZMacNoSh‹tAddr
 0xec

	)

360 
	#ZMacOutOfC≠
 0xed

	)

361 
	#ZMacPANIDC⁄Êi˘
 0xì

	)

362 
	#ZMacRólignmít
 0xef

	)

363 
	#ZMacTønß˘i⁄Expúed
 0xf0

	)

364 
	#ZMacTønß˘i⁄OvîFlow
 0xf1

	)

365 
	#ZMacTxA˘ive
 0xf2

	)

366 
	#ZMacUnAvaûabÀKey
 0xf3

	)

367 
	#ZMacUnsuµ‹ãdAâribuã
 0xf4

	)

368 
	#ZMacUnsuµ‹ãd
 0xf5

	)

369 
	#ZMacSrcM©chInvÆidIndex
 0xff

	)

371 
Sètus_t
 
	tZSètus_t
;

375 
uöt8
 
txCou¡î
;

376 
uöt8
 
txCo°
;

378 
uöt8
 
rxLqi
;

380 
uöt8
 
öKeySeqNum
;

381 
uöt32
 
öFrmC¡r
;

382 
uöt16
 
txFaûuª
;

383 } 
	tlökInfo_t
;

389 
	#SPI_INCOMING_ZTOOL_PORT
 0x21

390 
	#SPI_INCOMING_ZAPP_DATA
 0x22

391 
	#MT_SYS_APP_MSG
 0x23

392 
	#MT_SYS_APP_RSP_MSG
 0x24

393 
	#MT_SYS_OTA_MSG
 0x25

394 

	)

395 
	#AF_DATA_CONFIRM_CMD
 0xFD

396 
	#AF_REFLECT_ERROR_CMD
 0xFE

397 
	#AF_INCOMING_MSG_CMD
 0x1A

398 
	#AF_INCOMING_KVP_CMD
 0x1B

399 
	#AF_INCOMING_GRP_KVP_CMD
 0x1C

400 

	)

403 
	#ZDO_NEW_DSTADDR
 0xD0

404 
	#ZDO_STATE_CHANGE
 0xD1

405 
	#ZDO_MATCH_DESC_RSP_SENT
 0xD2

406 
	#ZDO_CB_MSG
 0xD3

407 
	#ZDO_NETWORK_REPORT
 0xD4

408 
	#ZDO_NETWORK_UPDATE
 0xD5

409 
	#ZDO_ADDR_CHANGE_IND
 0xD6

410 

	)

411 
	#NM_CHANNEL_INTERFERE
 0x31

412 
	#NM_ED_SCAN_CONFIRM
 0x32

413 
	#SAPS_CHANNEL_CHANGE
 0x33

414 
	#ZCL_INCOMING_MSG
 0x34

415 
	#ZCL_KEY_ESTABLISH_IND
 0x35

416 
	#ZCL_OTA_CALLBACK_IND
 0x36

417 

	)

433 #ifde‡
__˝lu•lus


	@../../../../Components/osal/include/comdef.h

40 #i‚de‡
COMDEF_H


41 
	#COMDEF_H


	)

43 #ifde‡
__˝lu•lus


54 
	~"hÆ_ty≥s.h
"

55 
	~"hÆ_defs.h
"

60 
	#VOID
 ()

	)

62 
	#NULL_OK


	)

63 
	#INP


	)

64 
	#OUTP


	)

65 
	#UNUSED


	)

66 
	#ONLY


	)

67 
	#READONLY


	)

68 
	#SHARED


	)

69 
	#KEEP


	)

70 
	#RELAX


	)

76 #i‚de‡
Ál£


77 
	#Ál£
 0

	)

80 #i‚de‡
åue


81 
	#åue
 1

	)

84 #i‚de‡
CONST


85 
	#CONST
 c⁄°

	)

88 #i‚de‡
GENERIC


89 
	#GENERIC


	)

93 
	#SUCCESS
 0x00

	)

94 
	#FAILURE
 0x01

	)

95 
	#INVALIDPARAMETER
 0x02

	)

96 
	#INVALID_TASK
 0x03

	)

97 
	#MSG_BUFFER_NOT_AVAIL
 0x04

	)

98 
	#INVALID_MSG_POINTER
 0x05

	)

99 
	#INVALID_EVENT_ID
 0x06

	)

100 
	#INVALID_INTERRUPT_ID
 0x07

	)

101 
	#NO_TIMER_AVAIL
 0x08

	)

102 
	#NV_ITEM_UNINIT
 0x09

	)

103 
	#NV_OPER_FAILED
 0x0A

	)

104 
	#INVALID_MEM_SIZE
 0x0B

	)

105 
	#NV_BAD_ITEM_LEN
 0x0C

	)

112 
uöt8
 
	tSètus_t
;

115 
öt32
 
	töt24
;

116 
uöt32
 
	tuöt24
;

122 
	#SYS_EVENT_MSG
 0x8000

123 

	)

128 
	#KEY_CHANGE
 0xC0

129 

	)

148 #ifde‡
__˝lu•lus


	@../../../../Components/osal/include/osal_bufmgr.h

40 #i‚de‡
OSAL_BUFMGR_H


41 
	#OSAL_BUFMGR_H


	)

43 #ifde‡
__˝lu•lus


83 *
oßl_bm_Æloc
–
uöt16
 
size
 );

88 *
oßl_bm_adju°_hódî
–*
∑ylﬂd_±r
, 
öt16
 
size
 );

93 *
oßl_bm_adju°_èû
–*
∑ylﬂd_±r
, 
öt16
 
size
 );

98 
oßl_bm_‰ì
–*
∑ylﬂd_±r
 );

103 #ifde‡
__˝lu•lus


	@../../../../Components/osal/include/osal_cbtimer.h

40 #i‚de‡
OSAL_CBTIMER_H


41 
	#OSAL_CBTIMER_H


	)

43 #ifde‡
__˝lu•lus


56 
	#INVALID_TIMER_ID
 0xFF

	)

59 
	#TIMEOUT_TIMER_ID
 0xFE

	)

68 #i‡–
OSAL_CBTIMER_NUM_TASKS
 == 0 )

69 #îr‹ 
CÆlback
 
Timî
 
moduÀ
 
shouldn
't be included (no callbackÅimer isÇeeded)!

70 #ñi‡–
OSAL_CBTIMER_NUM_TASKS
 == 1 )

71 
	#OSAL_CBTIMER_PROCESS_EVENT
–
a
 ) (á )

	)

72 #ñi‡–
OSAL_CBTIMER_NUM_TASKS
 == 2 )

73 
	#OSAL_CBTIMER_PROCESS_EVENT
–
a
 ) (á ), (á )

	)

75 #îr‹ 
Maximum
 
of
 2 
ˇŒback
 
timî
 
èsks
 
¨e
 
suµ‹ãd
! 
Modify
 
ô
 
hîe
.

87 (*
p‚CbTimî_t
)–
	tuöt8
 *
	tpD©a
 );

100 
oßl_CbTimîInô
–
uöt8
 
èskId
 );

105 
uöt16
 
oßl_CbTimîPro˚ssEvít
–
uöt8
 
èskId
, uöt16 
evíts
 );

110 
Sètus_t
 
oßl_CbTimîSèπ
–
p‚CbTimî_t
 
p‚CbTimî
, 
uöt8
 *
pD©a
,

111 
uöt16
 
timeout
, 
uöt8
 *
pTimîId
 );

116 
Sètus_t
 
oßl_CbTimîUpd©e
–
uöt8
 
timîId
, 
uöt16
 
timeout
 );

121 
Sètus_t
 
oßl_CbTimîSt›
–
uöt8
 
timîId
 );

126 #ifde‡
__˝lu•lus


	@../../../../Components/osal/include/osal_snv.h

40 #i‚de‡
OSAL_SNV_H


41 
	#OSAL_SNV_H


	)

43 #ifde‡
__˝lu•lus


52 
	~"hÆ_ty≥s.h
"

65 #ifde‡
OSAL_SNV_UINT16_ID


66 
uöt16
 
	toßlSnvId_t
;

67 
uöt16
 
	toßlSnvLí_t
;

69 
uöt8
 
	toßlSnvId_t
;

70 
uöt8
 
	toßlSnvLí_t
;

88 
uöt8
 
oßl_¢v_öô
( );

102 
uöt8
 
oßl_¢v_ªad
–
oßlSnvId_t
 
id
, 
oßlSnvLí_t
 
Àn
, *
pBuf
);

115 
uöt8
 
oßl_¢v_wrôe
–
oßlSnvId_t
 
id
, 
oßlSnvLí_t
 
Àn
, *
pBuf
);

128 
uöt8
 
oßl_¢v_com∑˘
–uöt8 
thªshﬁd
 );

133 #ifde‡
__˝lu•lus


	@../../../../Components/osal/mcu/cc2540/osal_snv.c

44 
	~"hÆ_adc.h
"

45 
	~"hÆ_Êash.h
"

46 
	~"hÆ_ty≥s.h
"

47 
	~"comdef.h
"

48 
	~"OSAL.h
"

49 
	~"oßl_¢v.h
"

50 
	~"hÆ_as£π.h
"

51 
	~"ßddr.h
"

53 #ifde‡
OSAL_SNV_UINT16_ID


62 
	#OSAL_NV_PAGE_SIZE
 
HAL_FLASH_PAGE_SIZE


	)

63 
	#OSAL_NV_PAGES_USED
 
HAL_NV_PAGE_CNT


	)

64 
	#OSAL_NV_PAGE_BEG
 
HAL_NV_PAGE_BEG


	)

65 
	#OSAL_NV_PAGE_END
 (
OSAL_NV_PAGE_BEG
 + 
OSAL_NV_PAGES_USED
 - 1)

	)

68 
	#OSAL_NV_ERASED
 0xFF

	)

71 
	#OSAL_NV_PAGE_HDR_SIZE
 4

	)

74 
	#OSAL_NV_PAGE_NULL
 0

	)

77 
	#OSAL_NV_ITEM_NULL
 0

	)

80 
	#OSAL_NV_WORD_SIZE
 
HAL_FLASH_WORD_SIZE


	)

83 
	#OSAL_NV_PAGE_HDR_OFFSET
 0

	)

88 
	#OSAL_NV_INVALID_LEN_MARK
 0x8000

	)

92 
	#OSAL_NV_INVALID_ID_MARK
 0x8000

	)

97 
	#OSAL_NV_ACTIVE_XFER_DIFF
 0x00100000

	)

100 
	#OSAL_NV_ACTIVE_PAGE_STATE
 
OSAL_NV_ACTIVE_XFER_DIFF


	)

103 
	#OSAL_NV_XFER_PAGE_STATE
 (
OSAL_NV_ACTIVE_PAGE_STATE
 ^ 
OSAL_NV_ACTIVE_XFER_DIFF
)

	)

105 
	#OSAL_NV_MIN_COMPACT_THRESHOLD
 70

106 
	#OSAL_NV_MAX_COMPACT_THRESHOLD
 95

107 

	)

113 #i‡(
deföed
 
HAL_MCU_CC2530
 || deföed 
HAL_MCU_CC2531
)

114 
	#OSAL_NV_CHECK_BUS_VOLTAGE
 (
	`HÆAdcCheckVdd
(
VDD_MIN_FLASH
))

	)

115 #ñi‡
deföed
 
HAL_MCU_CC2533


116 
	#OSAL_NV_CHECK_BUS_VOLTAGE
 (
	`HÆB©M⁄Ród
–
HAL_BATMON_MIN_FLASH
 ))

	)

119 
	#OSAL_NV_CHECK_BUS_VOLTAGE
 
TRUE


	)

129 
uöt16
 
	mid
;

130 
uöt16
 
	mÀn
;

131 } 
	toßlNvIãmHdr_t
;

138 
boﬁ
 
HÆAdcCheckVdd
(
uöt8
 
limô
);

144 #i‚de‡
OAD_KEEP_NV_PAGES


147 #¥agm®
loˇti⁄
="BLENV_ADDRESS_SPACE"

148 
__no_öô
 
uöt8
 
	g_nvBuf
[
OSAL_NV_PAGES_USED
 * 
OSAL_NV_PAGE_SIZE
];

149 #¥agm®
ªquúed
=
_nvBuf


152 #i‡
deföed
 
MAKE_CRC_SHDW


153 #¥agm®
loˇti⁄
="CRC_SHDW"

154 c⁄° 
CODE
 
uöt16
 
	g_¸cShdw
 = 0xFFFF;

155 #¥agm®
ªquúed
=
_¸cShdw


163 
uöt8
 
	ga˘ivePg
;

166 
uöt16
 
	gpgOff
;

171 
uöt8
 
	gÁûF
;

177 
uöt8
 
öôNV
( );

179 
£tA˘ivePage
–
uöt8
 
pg
 );

180 
£tX„rPage
();

181 
îa£Page
–
uöt8
 
pg
 );

182 
˛ónEø£dPage
–
uöt8
 
pg
 );

183 
födOff£t
( );

184 
com∑˘Page
–
uöt8
 
pg
 );

186 
wrôeW‹d
–
uöt8
 
pg
, 
uöt16
 
off£t
, uöt8 *
pBuf
 );

187 
wrôeW‹dM
–
uöt8
 
pg
, 
uöt16
 
off£t
, uöt8 *
pBuf
, 
oßlSnvLí_t
 
˙t
 );

204 
uöt8
 
	$öôNV
( )

206 
uöt32
 
pgHdr
;

207 
uöt8
 
x„rPg
 = 
OSAL_NV_PAGE_NULL
;

208 
uöt8
 
pg
;

210 
ÁûF
 = 
FALSE
;

211 
a˘ivePg
 = 
OSAL_NV_PAGE_NULL
;

214  
pg
 = 
OSAL_NV_PAGE_BEG
;Ög <
OSAL_NV_PAGE_END
;Ög++ )

216 
	`HÆFœshRód
(
pg
, 
OSAL_NV_PAGE_HDR_OFFSET
, (
uöt8
 *)(&
pgHdr
), 
OSAL_NV_PAGE_HDR_SIZE
);

218 i‡–
pgHdr
 =
OSAL_NV_ACTIVE_PAGE_STATE
)

220 i‡(
a˘ivePg
 !
OSAL_NV_PAGE_NULL
)

227 
	`˛ónEø£dPage
(
a˘ivePg
);

228 
	`˛ónEø£dPage
(
pg
);

229 
a˘ivePg
 = 
OSAL_NV_PAGE_NULL
;

233 
a˘ivePg
 = 
pg
;

236 i‡–
pgHdr
 =
OSAL_NV_XFER_PAGE_STATE
)

238 
x„rPg
 = 
pg
;

245 
	`˛ónEø£dPage
(
pg
);

249 i‡(
a˘ivePg
 =
OSAL_NV_PAGE_NULL
)

251 i‡(
x„rPg
 =
OSAL_NV_PAGE_NULL
)

255 
	`£tA˘ivePage
(
OSAL_NV_PAGE_BEG
);

256 
pgOff
 = 
OSAL_NV_PAGE_HDR_SIZE
;

262  (!
ÁûF
);

268 
a˘ivePg
 = 
x„rPg
;

269 
	`födOff£t
();

271 
	`com∑˘Page
(
x„rPg
);

276 i‡(
x„rPg
 !
OSAL_NV_PAGE_NULL
)

280 
	`îa£Page
(
x„rPg
);

284 
	`födOff£t
();

287  
TRUE
;

288 
	}
}

299 
	$£tA˘ivePage
–
uöt8
 
pg
 )

301 
uöt32
 
pgHdr
;

303 
pgHdr
 = 
OSAL_NV_ACTIVE_PAGE_STATE
;

305 
	`wrôeW‹d
–
pg
, 
OSAL_NV_PAGE_HDR_OFFSET
, (
uöt8
*Ë&
pgHdr
 );

306 i‡(!
ÁûF
)

308 
a˘ivePg
 = 
pg
;

310 
	}
}

321 
	$£tX„rPage
()

323 
uöt32
 
pgHdr
;

326 
pgHdr
 = 
OSAL_NV_XFER_PAGE_STATE
;

328 
	`wrôeW‹d
–
a˘ivePg
, 
OSAL_NV_PAGE_HDR_OFFSET
, (
uöt8
*)&
pgHdr
 );

329 
	}
}

340 
	$îa£Page
–
uöt8
 
pg
 )

342 i‡–!
OSAL_NV_CHECK_BUS_VOLTAGE
 || 
ÁûF
)

344 
ÁûF
 = 
TRUE
;

348 
	`HÆFœshEø£
(
pg
);

352 
uöt16
 
off£t
;

353 
uöt8
 
tmp
;

355 
off£t
 = 0; off£à< 
OSAL_NV_PAGE_SIZE
; offset ++)

357 
	`HÆFœshRód
(
pg
, 
off£t
, &
tmp
, 1);

358 i‡(
tmp
 !
OSAL_NV_ERASED
)

360 
ÁûF
 = 
TRUE
;

365 
	}
}

376 
	$˛ónEø£dPage
–
uöt8
 
pg
 )

378 
uöt8
 
buf
;

379 
uöt16
 
off£t
;

381 
off£t
 = 0; off£à< 
OSAL_NV_PAGE_SIZE
; offset ++)

383 
	`HÆFœshRód
(
pg
, 
off£t
, &
buf
, 1);

384 i‡(
buf
 !
OSAL_NV_ERASED
)

386 
	`îa£Page
(
pg
);

390 
	}
}

402 
	$födOff£t
()

404 
uöt16
 
off£t
;

405 
off£t
 = 
OSAL_NV_PAGE_SIZE
 - 
OSAL_NV_WORD_SIZE
;

406 
off£t
 >
OSAL_NV_PAGE_HDR_SIZE
;

407 
off£t
 -
OSAL_NV_WORD_SIZE
)

409 
uöt32
 
tmp
;

411 
	`HÆFœshRód
(
a˘ivePg
, 
off£t
, (
uöt8
 *)&
tmp
, 
OSAL_NV_WORD_SIZE
);

412 i‡(
tmp
 != 0xFFFFFFFF)

417 
pgOff
 = 
off£t
 + 
OSAL_NV_WORD_SIZE
;

418 
	}
}

434 
uöt16
 
	$födIãm
(
uöt8
 
pg
, 
uöt16
 
off£t
, 
oßlSnvId_t
 
id
)

436 
off£t
 -
OSAL_NV_WORD_SIZE
;

438 
off£t
 >
OSAL_NV_PAGE_HDR_SIZE
)

440 
oßlNvIãmHdr_t
 
hdr
;

442 
	`HÆFœshRód
(
pg
, 
off£t
, (
uöt8
 *Ë&
hdr
, 
OSAL_NV_WORD_SIZE
);

444 i‡(
hdr
.
id
 == id)

448 
uöt8
 
Àn
 = 
hdr
.À¿& ~
OSAL_NV_INVALID_LEN_MARK
;

449  
off£t
 - 
Àn
;

451 i‡(
hdr
.
Àn
 & 
OSAL_NV_INVALID_LEN_MARK
)

453 
off£t
 -
OSAL_NV_WORD_SIZE
;

458 i‡(
hdr
.
Àn
 + 
OSAL_NV_WORD_SIZE
 <
off£t
)

461 
off£t
 -
hdr
.
Àn
 + 
OSAL_NV_WORD_SIZE
;

468 
	`HAL_ASSERT_FORCED
();

474 
	}
}

490 
	$wrôeIãm
–
uöt8
 
pg
, 
uöt16
 
off£t
, 
oßlSnvId_t
 
id
, uöt16 
Æig√dLí
, uöt8 *
pBuf
 )

492 
oßlNvIãmHdr_t
 
hdr
;

494 
hdr
.
id
 = 0xFFFF;

495 
hdr
.
Àn
 = 
Æig√dLí
 | 
OSAL_NV_INVALID_LEN_MARK
;

498 
	`wrôeW‹d
(
pg
, 
off£t
 + 
Æig√dLí
, (
uöt8
 *Ë&
hdr
);

501 
hdr
.
Àn
 &~
OSAL_NV_INVALID_LEN_MARK
;

502 
	`wrôeW‹d
(
pg
, 
off£t
 + 
Æig√dLí
, (
uöt8
 *Ë&
hdr
);

505 
	`wrôeW‹dM
(
pg
, 
off£t
, 
pBuf
, 
Æig√dLí
 / 
OSAL_NV_WORD_SIZE
);

508 
hdr
.
id
 = id | 
OSAL_NV_INVALID_ID_MARK
;

509 
	`wrôeW‹d
(
pg
, 
off£t
 + 
Æig√dLí
, (
uöt8
 *Ë&
hdr
);

512 
hdr
.
id
 &~
OSAL_NV_INVALID_ID_MARK
;

513 
	`wrôeW‹d
(
pg
, 
off£t
 + 
Æig√dLí
, (
uöt8
 *Ë&
hdr
);

514 
	}
}

529 
	$x„rIãm
–
uöt8
 
pg
, 
uöt16
 
off£t
, uöt16 
Æig√dLí
, uöt16 
§cOff
 )

531 
uöt8
 
tmp
[
OSAL_NV_WORD_SIZE
];

532 
uöt16
 
i
 = 0;

535 
i
 <
Æig√dLí
)

537 
	`HÆFœshRód
(
a˘ivePg
, 
§cOff
 + 
i
, 
tmp
, 
OSAL_NV_WORD_SIZE
);

538 
	`wrôeW‹d
(
pg
, 
off£t
 + 
i
, 
tmp
);

540 
i
 +
OSAL_NV_WORD_SIZE
;

542 
	}
}

557 
	$com∑˘Page
–
uöt8
 
§cPg
 )

559 
uöt16
 
§cOff
, 
d°Off
;

560 
uöt8
 
d°Pg
;

561 
oßlSnvId_t
 
œ°Id
 = (osalSnvId_t) 0xFFFF;

563 
d°Pg
 = (
§cPg
 =
OSAL_NV_PAGE_BEG
)? 
OSAL_NV_PAGE_END
 : OSAL_NV_PAGE_BEG;

565 
d°Off
 = 
OSAL_NV_PAGE_HDR_SIZE
;

568 
§cOff
 = 
pgOff
 - (
oßlNvIãmHdr_t
);

570 
§cOff
 >
OSAL_NV_PAGE_HDR_SIZE
)

572 
oßlNvIãmHdr_t
 
hdr
;

574 i‡(
ÁûF
)

580 
	`HÆFœshRód
(
§cPg
, 
§cOff
, (
uöt8
 *Ë&
hdr
, 
OSAL_NV_WORD_SIZE
);

582 i‡(
hdr
.
id
 == 0xFFFF)

585 i‡(
hdr
.
Àn
 & 
OSAL_NV_INVALID_LEN_MARK
)

587 
§cOff
 -
OSAL_NV_WORD_SIZE
;

591 i‡(
hdr
.
Àn
 + 
OSAL_NV_WORD_SIZE
 <
§cOff
)

593 
§cOff
 -
hdr
.
Àn
 + 
OSAL_NV_WORD_SIZE
;

611 
	`HAL_ASSERT_FORCED
();

620 i‡(!(
hdr
.
id
 & 
OSAL_NV_INVALID_ID_MARK
Ë&& hdr.id !
œ°Id
)

624 
œ°Id
 = (
oßlSnvId_t
Ë
hdr
.
id
;

627 i‡(
	`födIãm
(
d°Pg
, 
d°Off
, 
œ°Id
) == 0)

633 
	`x„rIãm
(
d°Pg
, 
d°Off
, 
hdr
.
Àn
, 
§cOff
 - hdr.len);

635 
d°Off
 +
hdr
.
Àn
 + 
OSAL_NV_WORD_SIZE
;

638 
§cOff
 -
hdr
.
Àn
 + 
OSAL_NV_WORD_SIZE
;

643 
	`£tA˘ivePage
(
d°Pg
);

645 i‡(!
ÁûF
)

647 
pgOff
 = 
d°Off
;

651 
	`îa£Page
(
§cPg
);

652 
	}
}

666 
	$vîifyW‹dM
–
uöt8
 
pg
, 
uöt16
 
off£t
, uöt8 *
pBuf
, 
oßlSnvLí_t
 
˙t
 )

668 
uöt8
 
tmp
[
OSAL_NV_WORD_SIZE
];

670 
˙t
--)

674 
	`HÆFœshRód
(
pg
, 
off£t
, 
tmp
, 
OSAL_NV_WORD_SIZE
);

675 i‡(
FALSE
 =
	`oßl_memcmp
(
tmp
, 
pBuf
, 
OSAL_NV_WORD_SIZE
))

677 
ÁûF
 = 
TRUE
;

680 
off£t
 +
OSAL_NV_WORD_SIZE
;

681 
pBuf
 +
OSAL_NV_WORD_SIZE
;

683 
	}
}

696 
	$wrôeW‹d
–
uöt8
 
pg
, 
uöt16
 
off£t
, uöt8 *
pBuf
 )

698 
uöt16
 
addr
 = (
off£t
 >> 2Ë+ ((uöt16)
pg
 << 9);

700 i‡–!
ÁûF
 )

702 
	`HÆFœshWrôe
(
addr
, 
pBuf
, 1);

703 
	`vîifyW‹dM
(
pg
, 
off£t
, 
pBuf
, 1);

705 
	}
}

719 
	$wrôeW‹dM
–
uöt8
 
pg
, 
uöt16
 
off£t
, uöt8 *
buf
, 
oßlSnvLí_t
 
˙t
 )

721 
uöt16
 
addr
 = (
off£t
 >> 2Ë+ ((uöt16)
pg
 << 9);

723 i‡–!
ÁûF
 )

725 
	`HÆFœshWrôe
(
addr
, 
buf
, 
˙t
);

726 
	`vîifyW‹dM
(
pg
, 
off£t
, 
buf
, 
˙t
);

728 
	}
}

737 
uöt8
 
	$oßl_¢v_öô
( )

739 i‡(!
	`öôNV
())

742 
	`HAL_ASSERT_FORCED
();

744  
FAILURE
;

747  
SUCCESS
;

748 
	}
}

761 
uöt8
 
	$oßl_¢v_wrôe
–
oßlSnvId_t
 
id
, 
oßlSnvLí_t
 
Àn
, *
pBuf
 )

763 
uöt16
 
Æig√dLí
;

766 
uöt16
 
off£t
 = 
	`födIãm
(
a˘ivePg
, 
pgOff
, 
id
);

768 i‡(
off£t
 > 0)

770 
uöt8
 
tmp
;

771 
oßlSnvLí_t
 
i
;

773 
i
 = 0; i < 
Àn
; i++)

775 
	`HÆFœshRód
(
a˘ivePg
, 
off£t
, &
tmp
, 1);

776 i‡(
tmp
 !((
uöt8
 *)
pBuf
)[
i
])

780 
off£t
++;

783 i‡(
i
 =
Àn
)

787  
SUCCESS
;

792 
Æig√dLí
 = ((
Àn
 + 
OSAL_NV_WORD_SIZE
 - 1) / OSAL_NV_WORD_SIZE) * OSAL_NV_WORD_SIZE;

794 i‡–
pgOff
 + 
Æig√dLí
 + 
OSAL_NV_WORD_SIZE
 > 
OSAL_NV_PAGE_SIZE
 )

796 
	`£tX„rPage
();

797 
	`com∑˘Page
(
a˘ivePg
);

801 
	`wrôeIãm
(
a˘ivePg
, 
pgOff
, 
id
, 
Æig√dLí
, 
pBuf
);

802 i‡(
ÁûF
)

804  
NV_OPER_FAILED
;

807 
pgOff
 +
Æig√dLí
 + 
OSAL_NV_WORD_SIZE
;

809  
SUCCESS
;

810 
	}
}

824 
uöt8
 
	$oßl_¢v_ªad
–
oßlSnvId_t
 
id
, 
oßlSnvLí_t
 
Àn
, *
pBuf
 )

826 
uöt16
 
off£t
 = 
	`födIãm
(
a˘ivePg
, 
pgOff
, 
id
);

828 i‡(
off£t
 != 0)

830 
	`HÆFœshRód
(
a˘ivePg
, 
off£t
, 
pBuf
, 
Àn
);

831  
SUCCESS
;

833  
NV_OPER_FAILED
;

834 
	}
}

847 
uöt8
 
	$oßl_¢v_com∑˘
–
uöt8
 
thªshﬁd
 )

849 i‡––
thªshﬁd
 < 
OSAL_NV_MIN_COMPACT_THRESHOLD
 ) ||

850 –
thªshﬁd
 > 
OSAL_NV_MAX_COMPACT_THRESHOLD
 ) )

852  
INVALIDPARAMETER
;

856 i‡––(
uöt32
)
pgOff
 * 100 ) >–
OSAL_NV_PAGE_SIZE
 * (uöt32)
thªshﬁd
 ) )

858 
	`£tX„rPage
();

859 
	`com∑˘Page
(
a˘ivePg
);

861  
SUCCESS
;

864  
NV_OPER_FAILED
;

865 
	}
}

	@../../../../Components/services/saddr/saddr.h

40 #i‚de‡
SADDR_H


41 
	#SADDR_H


	)

44 #ifde‡
__˝lu•lus


53 
	#SADDR_EXT_LEN
 8

	)

56 
	#SADDR_MODE_NONE
 0

	)

57 
	#SADDR_MODE_SHORT
 2

	)

58 
	#SADDR_MODE_EXT
 3

	)

65 
uöt8
 
	tsAddrExt_t
[
SADDR_EXT_LEN
];

72 
uöt16
 
sh‹tAddr
;

73 
sAddrExt_t
 
extAddr
;

74 } 
addr
;

75 
uöt8
 
addrMode
;

76 } 
	tsAddr_t
;

92 
boﬁ
 
sAddrCmp
(c⁄° 
sAddr_t
 *
pAddr1
, c⁄° sAddr_à*
pAddr2
);

119 
boﬁ
 
sAddrIdí
(c⁄° 
sAddr_t
 *
pAddr1
, c⁄° sAddr_à*
pAddr2
);

136 
sAddrCpy
(
sAddr_t
 *
pDe°
, c⁄° sAddr_à*
pSrc
);

152 
boﬁ
 
sAddrExtCmp
(c⁄° 
uöt8
 * 
pAddr1
, c⁄° uöt8 * 
pAddr2
);

169 *
sAddrExtCpy
(
uöt8
 * 
pDe°
, c⁄° uöt8 * 
pSrc
);

171 #ifde‡
__˝lu•lus


	@../../Include/gapgattserver.h

41 #i‚de‡
GAPGATTSERVER_H


42 
	#GAPGATTSERVER_H


	)

44 #ifde‡
__˝lu•lus


57 
	#GAP_DEVICE_NAME_LEN
 (20+1)

	)

60 
	#GAP_PRIVACY_DISABLED
 0x00

	)

61 
	#GAP_PRIVACY_ENABLED
 0x01

	)

64 
	#GGS_DEVICE_NAME_ATT
 0

65 
	#GGS_APPEARANCE_ATT
 1

66 
	#GGS_PERI_PRIVACY_FLAG_ATT
 2

67 
	#GGS_RECONNCT_ADDR_ATT
 3

68 
	#GGS_PERI_CONN_PARAM_ATT
 4

69 
	#GGS_PERI_PRIVACY_FLAG_PROPS
 5

70 
	#GGS_W_PERMIT_DEVICE_NAME_ATT
 6

71 
	#GGS_W_PERMIT_APPEARANCE_ATT
 7

72 
	#GGS_W_PERMIT_PRIVACY_FLAG_ATT
 8

73 

	)

75 
	#GAP_SERVICE
 0x00000001

	)

78 
	#GGS_DEVICE_NAME_ID
 0

	)

79 
	#GGS_APPEARANCE_ID
 1

	)

81 #i‡
deföed
 ( 
TESTMODES
 )

83 
	#GGS_TESTMODE_OFF
 0

84 
	#GGS_TESTMODE_W_PERMIT_DEVICE_NAME
 1

85 
	#GGS_TESTMODE_W_PERMIT_APPEARANCE
 2

86 
	#GGS_TESTMODE_W_PERMIT_PRIVACY_FLAG
 3

88 

	)

93 (*
ggsAârVÆueCh™ge_t
)–
	tuöt8
 
	t©åId
 );

98 
ggsAârVÆueCh™ge_t
 
p‚AârVÆueCh™ge
;

99 } 
	tggsAµCBs_t
;

125 
bSètus_t
 
GGS_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

138 
bSètus_t
 
GGS_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

151 
bSètus_t
 
GGS_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

162 
bSètus_t
 
GGS_DñSîvi˚
–
uöt32
 
£rvi˚s
 );

176 
GGS_Regi°îAµCBs
–
ggsAµCBs_t
 *
≠pCÆlbacks
 );

186 
GGS_SëP¨amVÆue
–
uöt16
 
vÆue
 );

195 
uöt16
 
GGS_GëP¨amVÆue
( );

204 #ifde‡
__˝lu•lus


	@../../Include/gatt_profile_uuid.h

40 #i‚de‡
GATT_PROFILE_UUID_H


41 
	#GATT_PROFILE_UUID_H


	)

43 #ifde‡
__˝lu•lus


65 
	#IMMEDIATE_ALERT_SERV_UUID
 0x1802

66 
	#LINK_LOSS_SERV_UUID
 0x1803

67 
	#TX_PWR_LEVEL_SERV_UUID
 0x1804

68 
	#CURRENT_TIME_SERV_UUID
 0x1805

69 
	#REF_TIME_UPDATE_SERV_UUID
 0x1806

70 
	#NEXT_DST_CHANGE_SERV_UUID
 0x1807

71 
	#GLUCOSE_SERV_UUID
 0x1808

72 
	#THERMOMETER_SERV_UUID
 0x1809

73 
	#DEVINFO_SERV_UUID
 0x180A

74 
	#NWA_SERV_UUID
 0x180B

75 
	#HEARTRATE_SERV_UUID
 0x180D

76 
	#PHONE_ALERT_STS_SERV_UUID
 0x180E

77 
	#BATT_SERV_UUID
 0x180F

78 
	#BLOODPRESSURE_SERV_UUID
 0x1810

79 
	#ALERT_NOTIF_SERV_UUID
 0x1811

80 
	#HID_SERV_UUID
 0x1812

81 
	#SCAN_PARAM_SERV_UUID
 0x1813

82 
	#RSC_SERV_UUID
 0x1814

83 
	#CSC_SERV_UUID
 0x1816

84 
	#CYCPWR_SERV_UUID
 0x1818

85 
	#LOC_NAV_SERV_UUID
 0x1819

86 

	)

90 
	#ALERT_LEVEL_UUID
 0x2A06

91 
	#TX_PWR_LEVEL_UUID
 0x2A07

92 
	#DATE_TIME_UUID
 0x2A08

93 
	#DAY_OF_WEEK_UUID
 0x2A09

94 
	#DAY_DATE_TIME_UUID
 0x2A0A

95 
	#EXACT_TIME_256_UUID
 0x2A0C

96 
	#DST_OFFSET_UUID
 0x2A0D

97 
	#TIME_ZONE_UUID
 0x2A0E

98 
	#LOCAL_TIME_INFO_UUID
 0x2A0F

99 
	#TIME_WITH_DST_UUID
 0x2A11

100 
	#TIME_ACCURACY_UUID
 0x2A12

101 
	#TIME_SOURCE_UUID
 0x2A13

102 
	#REF_TIME_INFO_UUID
 0x2A14

103 
	#TIME_UPDATE_CTRL_PT_UUID
 0x2A16

104 
	#TIME_UPDATE_STATE_UUID
 0x2A17

105 
	#GLUCOSE_MEAS_UUID
 0x2A18

106 
	#BATT_LEVEL_UUID
 0x2A19

107 
	#TEMP_MEAS_UUID
 0x2A1C

108 
	#TEMP_TYPE_UUID
 0x2A1D

109 
	#IMEDIATE_TEMP_UUID
 0x2A1E

110 
	#MEAS_INTERVAL_UUID
 0x2A21

111 
	#BOOT_KEY_INPUT_UUID
 0x2A22

112 
	#SYSTEM_ID_UUID
 0x2A23

113 
	#MODEL_NUMBER_UUID
 0x2A24

114 
	#SERIAL_NUMBER_UUID
 0x2A25

115 
	#FIRMWARE_REV_UUID
 0x2A26

116 
	#HARDWARE_REV_UUID
 0x2A27

117 
	#SOFTWARE_REV_UUID
 0x2A28

118 
	#MANUFACTURER_NAME_UUID
 0x2A29

119 
	#IEEE_11073_CERT_DATA_UUID
 0x2A2A

120 
	#CURRENT_TIME_UUID
 0x2A2B

121 
	#SCAN_REFRESH_UUID
 0x2A31

122 
	#BOOT_KEY_OUTPUT_UUID
 0x2A32

123 
	#BOOT_MOUSE_INPUT_UUID
 0x2A33

124 
	#GLUCOSE_CONTEXT_UUID
 0x2A34

125 
	#BLOODPRESSURE_MEAS_UUID
 0x2A35

126 
	#IMEDIATE_CUFF_PRESSURE_UUID
 0x2A36

127 
	#HEARTRATE_MEAS_UUID
 0x2A37

128 
	#BODY_SENSOR_LOC_UUID
 0x2A38

129 
	#HEARTRATE_CTRL_PT_UUID
 0x2A39

130 
	#NETWORK_AVAIL_UUID
 0x2A3E

131 
	#ALERT_STATUS_UUID
 0x2A3F

132 
	#RINGER_CTRL_PT_UUID
 0x2A40

133 
	#RINGER_SETTING_UUID
 0x2A41

134 
	#ALERT_CAT_ID_BMASK_UUID
 0x2A42

135 
	#ALERT_CAT_ID_UUID
 0x2A43

136 
	#ALERT_NOTIF_CTRL_PT_UUID
 0x2A44

137 
	#UNREAD_ALERT_STATUS_UUID
 0x2A45

138 
	#NEW_ALERT_UUID
 0x2A46

139 
	#SUP_NEW_ALERT_CAT_UUID
 0x2A47

140 
	#SUP_UNREAD_ALERT_CAT_UUID
 0x2A48

141 
	#BLOODPRESSURE_FEATURE_UUID
 0x2A49

142 
	#HID_INFORMATION_UUID
 0x2A4A

143 
	#REPORT_MAP_UUID
 0x2A4B

144 
	#HID_CTRL_PT_UUID
 0x2A4C

145 
	#REPORT_UUID
 0x2A4D

146 
	#PROTOCOL_MODE_UUID
 0x2A4E

147 
	#SCAN_INTERVAL_WINDOW_UUID
 0x2A4F

148 
	#PNP_ID_UUID
 0x2A50

149 
	#GLUCOSE_FEATURE_UUID
 0x2A51

150 
	#RECORD_CTRL_PT_UUID
 0x2A52

151 
	#RSC_MEAS_UUID
 0x2A53

152 
	#RSC_FEATURE_UUID
 0x2A54

153 
	#SC_CTRL_PT_UUID
 0x2A55

154 
	#CSC_MEAS_UUID
 0x2A5B

155 
	#CSC_FEATURE_UUID
 0x2A5C

156 
	#SENSOR_LOC_UUID
 0x2A5D

157 
	#CYCPWR_MEAS_UUID
 0x2A63

158 
	#CYCPWR_VECTOR_UUID
 0x2A64

159 
	#CYCPWR_FEATURE_UUID
 0x2A65

160 
	#CYCPWR_CTRL_PT_UUID
 0x2A66

161 
	#LOC_SPEED_UUID
 0x2A67

162 
	#NAV_UUID
 0x2A68

163 
	#POS_QUALITY_UUID
 0x2A69

164 
	#LN_FEATURE_UUID
 0x2A6A

165 
	#LN_CTRL_PT_UUID
 0x2A6B

166 

	)

170 
	#GATT_UNITLESS_UUID
 0x2700

171 
	#GATT_UNIT_LENGTH_METER_UUID
 0x2701

172 
	#GATT_UNIT_MASS_KGRAM_UUID
 0x2702

173 
	#GATT_UNIT_TIME_SECOND_UUID
 0x2703

174 
	#GATT_UNIT_ELECTRIC_CURRENT_A_UUID
 0x2704

175 
	#GATT_UNIT_THERMODYN_TEMP_K_UUID
 0x2705

176 
	#GATT_UNIT_AMOUNT_SUBSTANCE_M_UUID
 0x2706

177 
	#GATT_UNIT_LUMINOUS_INTENSITY_C_UUID
 0x2707

178 

	)

179 
	#GATT_UNIT_AREA_SQ_MTR_UUID
 0x2710

180 
	#GATT_UNIT_VOLUME_CUBIC_MTR_UUID
 0x2711

181 
	#GATT_UNIT_VELOCITY_MPS_UUID
 0x2712

182 
	#GATT_UNIT_ACCELERATION_MPS_SQ_UUID
 0x2713

183 
	#GATT_UNIT_WAVENUMBER_RM_UUID
 0x2714

184 
	#GATT_UNIT_DENSITY_KGPCM_UUID
 0x2715

185 
	#GATT_UNIT_SURFACE_DENSITY_KGPSM_UUID
 0x2716

186 
	#GATT_UNIT_SPECIFIC_VOLUME_CMPKG_UUID
 0x2717

187 
	#GATT_UNIT_CURRENT_DENSITY_APSM_UUID
 0x2718

188 
	#GATT_UNIT_MAG_FIELD_STRENGTH_UUID
 0x2719

189 
	#GATT_UNIT_AMOUNT_CONC_MPCM_UUID
 0x271A

190 
	#GATT_UNIT_MASS_CONC_KGPCM_UUID
 0x271B

191 
	#GATT_UNIT_LUMINANCE_CPSM_UUID
 0x271C

192 
	#GATT_UNIT_REFRACTIVE_INDEX_UUID
 0x271D

193 
	#GATT_UNIT_RELATIVE_PERMEABLILTY_UUID
 0x271E

194 
	#GATT_UNIT_PLANE_ANGLE_RAD_UUID
 0x2720

195 
	#GATT_UNIT_SOLID_ANGLE_STERAD_UUID
 0x2721

196 
	#GATT_UNIT_FREQUENCY_HTZ_UUID
 0x2722

197 
	#GATT_UNIT_FORCE_NEWTON_UUID
 0x2723

198 
	#GATT_UNIT_PRESSURE_PASCAL_UUID
 0x2724

199 
	#GATT_UNIT_ENERGY_JOULE_UUID
 0x2725

200 
	#GATT_UNIT_POWER_WATT_UUID
 0x2726

201 
	#GATT_UNIT_E_CHARGE_C_UUID
 0x2727

202 
	#GATT_UNIT_E_POTENTIAL_DIF_V_UUID
 0x2728

203 

	)

204 
	#GATT_UNIT_CELSIUS_TEMP_DC_UUID
 0x272F

205 

	)

206 
	#GATT_UNIT_TIME_MINUTE_UUID
 0x2760

207 
	#GATT_UNIT_TIME_HOUR_UUID
 0x2761

208 
	#GATT_UNIT_TIME_DAY_UUID
 0x2762

209 
	#GATT_UNIT_PLANE_ANGLE_DEGREE_UUID
 0x2763

210 
	#GATT_UNIT_PLANE_ANGLE_MINUTE_UUID
 0x2764

211 
	#GATT_UNIT_PLANE_ANGLE_SECOND_UUID
 0x2765

212 
	#GATT_UNIT_AREA_HECTARE_UUID
 0x2766

213 
	#GATT_UNIT_VOLUME_LITRE_UUID
 0x2767

214 
	#GATT_UNIT_MASS_TONNE_UUID
 0x2768

215 

	)

216 
	#GATT_UINT_LENGTH_YARD_UUID
 0x27A0

217 
	#GATT_UNIT_LENGTH_PARSEC_UUID
 0x27A1

218 
	#GATT_UNIT_LENGTH_INCH_UUID
 0x27A2

219 
	#GATT_UNIT_LENGTH_FOOT_UUID
 0x27A3

220 
	#GATT_UNIT_LENGTH_MILE_UUID
 0x27A4

221 
	#GATT_UNIT_PRESSURE_PFPSI_UUID
 0x27A5

222 
	#GATT_UNIT_VELOCITY_KMPH_UUID
 0x27A6

223 
	#GATT_UNIT_VELOCITY_MPH_UUID
 0x27A7

224 
	#GATT_UNIT_ANGULAR_VELOCITY_RPM_UUID
 0x27A8

225 
	#GATT_UNIT_ENERGY_GCAL_UUID
 0x27A9

226 
	#GATT_UNIT_ENERGY_KCAL_UUID
 0x27AA

227 
	#GATT_UNIT_ENERGY_KWH_UUID
 0x27AB

228 
	#GATT_UNIT_THERMODYN_TEMP_DF_UUID
 0x27AC

229 
	#GATT_UNIT_PERCENTAGE_UUID
 0x27AD

230 
	#GATT_UNIT_PER_MILE_UUID
 0x27AE

231 
	#GATT_UNIT_PERIOD_BPM_UUID
 0x27AF

232 
	#GATT_UNIT_E_CHARGE_AH_UUID
 0x27B0

233 
	#GATT_UNIT_MASS_DENSITY_MGPD_UUID
 0x27B1

234 
	#GATT_UNIT_MASS_DENSITY_MMPL_UUID
 0x27B2

235 
	#GATT_UNIT_TIME_YEAR_UUID
 0x27B3

236 
	#GATT_UNIT_TIME_MONTH_UUID
 0x27B4

237 

	)

257 #ifde‡
__˝lu•lus


	@../../Include/gattservapp.h

81 #i‚de‡
GATTSERVAPP_H


82 
	#GATTSERVAPP_H


	)

84 #ifde‡
__˝lu•lus


92 
	~"bcomdef.h
"

93 
	~"OSAL.h
"

103 
	#GATT_CLIENT_CHAR_CFG_UPDATED_EVENT
 0x00

104 

	)

112 
	#GATT_PROP_BCAST
 0x01

113 
	#GATT_PROP_READ
 0x02

114 
	#GATT_PROP_WRITE_NO_RSP
 0x04

115 
	#GATT_PROP_WRITE
 0x08

116 
	#GATT_PROP_NOTIFY
 0x10

117 
	#GATT_PROP_INDICATE
 0x20

118 
	#GATT_PROP_AUTHEN
 0x40

119 
	#GATT_PROP_EXTENDED
 0x80

120 

	)

127 
	#GATT_EXT_PROP_RELIABLE_WRITE
 0x0001

128 
	#GATT_EXT_PROP_WRITABLE_AUX
 0x0002

129 

	)

136 
	#GATT_CLIENT_CFG_NOTIFY
 0x0001

137 
	#GATT_CLIENT_CFG_INDICATE
 0x0002

138 

	)

145 
	#GATT_SERV_CFG_BCAST
 0x0001

146 

	)

149 
	#GATT_CFG_NO_OPERATION
 0x0000

150 

	)

155 
	#GATT_FORMAT_BOOL
 0x01

156 
	#GATT_FORMAT_2BIT
 0x02

157 
	#GATT_FORMAT_NIBBLE
 0x03

158 
	#GATT_FORMAT_UINT8
 0x04

159 
	#GATT_FORMAT_UINT12
 0x05

160 
	#GATT_FORMAT_UINT16
 0x06

161 
	#GATT_FORMAT_UINT24
 0x07

162 
	#GATT_FORMAT_UINT32
 0x08

163 
	#GATT_FORMAT_UINT48
 0x09

164 
	#GATT_FORMAT_UINT64
 0x0a

165 
	#GATT_FORMAT_UINT128
 0x0b

166 
	#GATT_FORMAT_SINT8
 0x0c

167 
	#GATT_FORMAT_SINT12
 0x0d

168 
	#GATT_FORMAT_SINT16
 0x0e

169 
	#GATT_FORMAT_SINT24
 0x0f

170 
	#GATT_FORMAT_SINT32
 0x10

171 
	#GATT_FORMAT_SINT48
 0x11

172 
	#GATT_FORMAT_SINT64
 0x12

173 
	#GATT_FORMAT_SINT128
 0x13

174 
	#GATT_FORMAT_FLOAT32
 0x14

175 
	#GATT_FORMAT_FLOAT64
 0x15

176 
	#GATT_FORMAT_SFLOAT
 0x16

177 
	#GATT_FORMAT_FLOAT
 0x17

178 
	#GATT_FORMAT_DUINT16
 0x18

179 
	#GATT_FORMAT_UTF8S
 0x19

180 
	#GATT_FORMAT_UTF16S
 0x1a

181 
	#GATT_FORMAT_STRUCT
 0x1b

182 

	)

189 
	#GATT_NS_NONE
 0x00

190 
	#GATT_NS_BT_SIG
 0x01

191 

	)

198 
	#GATT_NS_BT_DESC_UNKNOWN
 0x0000

199 

	)

203 
	#GATT_ALL_SERVICES
 0xFFFFFFFF

	)

206 
	#GATT_SERVICE
 0x00000001

	)

208 #i‡
deföed
 ( 
TESTMODES
 )

210 
	#GATT_TESTMODE_OFF
 0

211 
	#GATT_TESTMODE_NO_RSP
 1

212 
	#GATT_TESTMODE_PREPARE_WRITE
 2

213 
	#GATT_TESTMODE_MAX_MTU_SIZE
 3

214 
	#GATT_TESTMODE_CORRUPT_PW_DATA
 4

216 

	)

218 
	#GATT_PARAM_NUM_PREPARE_WRITES
 0

219 

	)

229 
	#GATT_NUM_ATTRS
–
©ås
 ) ( –©å†Ë/ –
g©tAâribuã_t
 ) )

	)

232 
	#GATT_SERVICE_HANDLE
–
©ås
 ) ( (©ås)[0].
h™dÀ
 )

	)

235 
	#GATT_INCLUDED_HANDLE
–
©ås
, 
i
 ) ( *((
uöt16
 *)(◊ârs)[(i)].
pVÆue
)Ë)

	)

260 
bSètus_t
 (*
	tp‚GATTRódAârCB_t
)–
	tuöt16
 
	tc⁄nH™dÀ
, 
	tg©tAâribuã_t
 *
	tpAâr
,

261 
	tuöt8
 *
	tpVÆue
, uöt8 *
	tpLí
, 
	tuöt16
 
	toff£t
,

262 
	tuöt8
 
	tmaxLí
 );

275 
bSètus_t
 (*
	tp‚GATTWrôeAârCB_t
)–
	tuöt16
 
	tc⁄nH™dÀ
, 
	tg©tAâribuã_t
 *
	tpAâr
,

276 
	tuöt8
 *
	tpVÆue
, uöt8 
	tÀn
, 
	tuöt16
 
	toff£t
 );

288 
bSètus_t
 (*
	tp‚GATTAuth‹izeAârCB_t
)–
	tuöt16
 
	tc⁄nH™dÀ
, 
	tg©tAâribuã_t
 *
	tpAâr
,

289 
	tuöt8
 
	t›code
 );

299 
uöt8
 
f‹m©
;

300 
öt8
 
exp⁄ít
;

301 
uöt16
 
unô
;

302 
uöt8
 
«meS∑˚
;

303 
uöt16
 
desc
;

304 } 
	tg©tCh¨F‹m©_t
;

311 
uöt16
 
c⁄nH™dÀ
;

312 
uöt8
 
vÆue
;

313 } 
	tg©tCh¨Cfg_t
;

321 
p‚GATTRódAârCB_t
 
p‚RódAârCB
;

322 
p‚GATTWrôeAârCB_t
 
p‚WrôeAârCB
;

323 
p‚GATTAuth‹izeAârCB_t
 
p‚Auth‹izeAârCB
;

324 } 
	tg©tSîvi˚CBs_t
;

331 
oßl_evít_hdr_t
 
hdr
;

332 
uöt16
 
c⁄nH™dÀ
;

333 
uöt8
 
mëhod
;

334 } 
	tg©tEvítHdr_t
;

342 
oßl_evít_hdr_t
 
hdr
;

343 
uöt16
 
c⁄nH™dÀ
;

344 
uöt8
 
mëhod
;

345 
uöt16
 
©åH™dÀ
;

346 
uöt16
 
vÆue
;

347 } 
	tg©tClõ¡Ch¨CfgUpd©edEvít_t
;

372 
GATTSîvAµ_Regi°îF‹Msg
–
uöt8
 
èskID
 );

387 
bSètus_t
 
GATTSîvAµ_Regi°îSîvi˚
–
g©tAâribuã_t
 *
pAârs
, 
uöt16
 
numAârs
,

388 
CONST
 
g©tSîvi˚CBs_t
 *
pSîvi˚CBs
 );

402 
bSètus_t
 
GATTSîvAµ_Dîegi°îSîvi˚
–
uöt16
 
h™dÀ
, 
g©tAâribuã_t
 **
p2pAârs
 );

414 
g©tAâribuã_t
 *
GATTSîvAµ_FödAâr
–g©tAâribuã_à*
pAârTbl
,

415 
uöt16
 
numAârs
, 
uöt8
 *
pVÆue
 );

427 
bSètus_t
 
GATTSîvAµ_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

438 
bSètus_t
 
GATTSîvAµ_DñSîvi˚
–
uöt32
 
£rvi˚s
 );

456 
bSètus_t
 
GATTSîvAµ_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
pVÆue
 );

470 
bSètus_t
 
GATTSîvAµ_GëP¨amëî
–
uöt8
 
∑øm
, *
pVÆue
 );

485 
bSètus_t
 
GATTSîvAµ_Upd©eCh¨Cfg
–
uöt16
 
c⁄nH™dÀ
, uöt16 
©åH™dÀ
, uöt16 
vÆue
 );

500 
GATTSîvAµ_InôCh¨Cfg
–
uöt16
 
c⁄nH™dÀ
, 
g©tCh¨Cfg_t
 *
ch¨CfgTbl
 );

516 
uöt16
 
GATTSîvAµ_RódCh¨Cfg
–uöt16 
c⁄nH™dÀ
, 
g©tCh¨Cfg_t
 *
ch¨CfgTbl
 );

533 
uöt8
 
GATTSîvAµ_WrôeCh¨Cfg
–
uöt16
 
c⁄nH™dÀ
, 
g©tCh¨Cfg_t
 *
ch¨CfgTbl
, uöt16 
vÆue
 );

548 
bSètus_t
 
GATTSîvAµ_Pro˚ssCCCWrôeReq
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

549 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
,

550 
uöt16
 
vÆidCfg
 );

564 
bSètus_t
 
GATTSîvAµ_Pro˚ssCh¨Cfg
–
g©tCh¨Cfg_t
 *
ch¨CfgTbl
, 
uöt8
 *
pVÆue
,

565 
uöt8
 
authítiˇãd
, 
g©tAâribuã_t
 *
©åTbl
,

566 
uöt16
 
numAârs
, 
uöt8
 
èskId
 );

578 
GATTSîvAµ_SídCCCUpd©edEvít
–
uöt16
 
c⁄nH™dÀ
, uöt16 
©åH™dÀ
, uöt16 
vÆue
 );

593 
bSètus_t
 
GATTSîvAµ_SídSîvi˚Ch™gedInd
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
èskId
 );

610 
uöt8
 
GATTSîvAµ_RódAâr
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

611 
uöt16
 
£rvi˚
, 
uöt8
 *
pVÆue
, uöt8 *
pLí
,

612 
uöt16
 
off£t
, 
uöt8
 
maxLí
 );

625 
uöt8
 
GATTSîvAµ_WrôeAâr
–
uöt16
 
c⁄nH™dÀ
, uöt16 
h™dÀ
,

626 
uöt8
 *
pVÆue
, 
uöt16
 
Àn
, uöt16 
off£t
 );

640 
GATTSîvAµ_SëP¨amVÆue
–
uöt16
 
vÆue
 );

649 
uöt16
 
GATTSîvAµ_GëP¨amVÆue
( );

665 
GATTSîvAµ_Inô
–
uöt8
 
èskId
 );

680 
uöt16
 
GATTSîvAµ_Pro˚ssEvít
–
uöt8
 
èskId
, uöt16 
evíts
 );

686 #ifde‡
__˝lu•lus


	@../../Profiles/Accelerometer/accelerometer.c

43 
	~"bcomdef.h
"

44 
	~"OSAL.h
"

45 
	~"lökdb.h
"

46 
	~"©t.h
"

47 
	~"g©t.h
"

48 
	~"g©t_uuid.h
"

49 
	~"g©t£rv≠p.h
"

51 
	~"ac˚Àromëî.h
"

61 
	#SERVAPP_NUM_ATTR_SUPPORTED
 19

	)

72 
CONST
 
uöt8
 
	gaccSîvUUID
[
ATT_BT_UUID_SIZE
] =

74 
LO_UINT16
(
ACCEL_SERVICE_UUID
), 
HI_UINT16
(ACCEL_SERVICE_UUID)

78 
CONST
 
uöt8
 
	gaccE«bÀrUUID
[
ATT_BT_UUID_SIZE
] =

80 
LO_UINT16
(
ACCEL_ENABLER_UUID
), 
HI_UINT16
(ACCEL_ENABLER_UUID)

84 
CONST
 
uöt8
 
	gøngeUUID
[
ATT_BT_UUID_SIZE
] =

86 
LO_UINT16
(
ACCEL_RANGE_UUID
), 
HI_UINT16
(ACCEL_RANGE_UUID)

90 
CONST
 
uöt8
 
	gxUUID
[
ATT_BT_UUID_SIZE
] =

92 
LO_UINT16
(
ACCEL_X_UUID
), 
HI_UINT16
(ACCEL_X_UUID)

96 
CONST
 
uöt8
 
	gyUUID
[
ATT_BT_UUID_SIZE
] =

98 
LO_UINT16
(
ACCEL_Y_UUID
), 
HI_UINT16
(ACCEL_Y_UUID)

102 
CONST
 
uöt8
 
	gzUUID
[
ATT_BT_UUID_SIZE
] =

104 
LO_UINT16
(
ACCEL_Z_UUID
), 
HI_UINT16
(ACCEL_Z_UUID)

118 
ac˚lCBs_t
 *
	gac˚l_AµCBs
 = 
NULL
;

126 
CONST
 
g©tAârTy≥_t
 
	gac˚lSîvi˚
 = { 
ATT_BT_UUID_SIZE
, 
accSîvUUID
 };

130 
uöt8
 
	gac˚lE«bÀdCh¨Pr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

133 
uöt8
 
	gac˚lE«bÀd
 = 
FALSE
;

136 
uöt8
 
	gac˚lE«bÀdU£rDesc
[14] = "Accel Enable\0";

140 
uöt8
 
	gac˚lR™geCh¨Pr›s
 = 
GATT_PROP_READ
;

143 
uöt16
 
	gac˚lR™ge
 = 
ACCEL_RANGE_2G
;

146 
uöt8
 
	gac˚lR™geU£rDesc
[13] = "Accel Range\0";

150 
uöt8
 
	gac˚lXCh¨Pr›s
 = 
GATT_PROP_NOTIFY
;

151 
uöt8
 
	gac˚lYCh¨Pr›s
 = 
GATT_PROP_NOTIFY
;

152 
uöt8
 
	gac˚lZCh¨Pr›s
 = 
GATT_PROP_NOTIFY
;

155 
öt8
 
	gac˚lXCo‹dö©es
 = 0;

156 
öt8
 
	gac˚lYCo‹dö©es
 = 0;

157 
öt8
 
	gac˚lZCo‹dö©es
 = 0;

165 
g©tCh¨Cfg_t
 
	gac˚lXC⁄figCo‹dö©es
[
GATT_MAX_NUM_CONN
];

166 
g©tCh¨Cfg_t
 
	gac˚lYC⁄figCo‹dö©es
[
GATT_MAX_NUM_CONN
];

167 
g©tCh¨Cfg_t
 
	gac˚lZC⁄figCo‹dö©es
[
GATT_MAX_NUM_CONN
];

170 
uöt8
 
	gac˚lXCh¨U£rDesc
[20] = "Accel X-Coordinate\0";

171 
uöt8
 
	gac˚lYCh¨U£rDesc
[20] = "Accel Y-Coordinate\0";

172 
uöt8
 
	gac˚lZCh¨U£rDesc
[20] = "Accel Z-Coordinate\0";

178 
g©tAâribuã_t
 
	gac˚lAârTbl
[
SERVAPP_NUM_ATTR_SUPPORTED
] =

182 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

183 
GATT_PERMIT_READ
,

185 (
uöt8
 *)&
ac˚lSîvi˚


190 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

191 
GATT_PERMIT_READ
,

193 &
ac˚lE«bÀdCh¨Pr›s


198 { 
ATT_BT_UUID_SIZE
, 
accE«bÀrUUID
 },

199 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

201 &
ac˚lE«bÀd


206 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

207 
GATT_PERMIT_READ
,

209 (
uöt8
*)&
ac˚lE«bÀdU£rDesc


214 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

215 
GATT_PERMIT_READ
,

217 &
ac˚lR™geCh¨Pr›s


222 { 
ATT_BT_UUID_SIZE
, 
øngeUUID
 },

223 
GATT_PERMIT_READ
,

225 (
uöt8
*)&
ac˚lR™ge


230 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

231 
GATT_PERMIT_READ
,

233 
ac˚lR™geU£rDesc


238 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

239 
GATT_PERMIT_READ
,

241 &
ac˚lXCh¨Pr›s


246 { 
ATT_BT_UUID_SIZE
, 
xUUID
 },

249 (
uöt8
 *)&
ac˚lXCo‹dö©es


254 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

255 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

257 (
uöt8
 *)
ac˚lXC⁄figCo‹dö©es


262 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

263 
GATT_PERMIT_READ
,

265 
ac˚lXCh¨U£rDesc


270 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

271 
GATT_PERMIT_READ
,

273 &
ac˚lYCh¨Pr›s


278 { 
ATT_BT_UUID_SIZE
, 
yUUID
 },

281 (
uöt8
 *)&
ac˚lYCo‹dö©es


286 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

287 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

289 (
uöt8
 *)
ac˚lYC⁄figCo‹dö©es


294 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

295 
GATT_PERMIT_READ
,

297 
ac˚lYCh¨U£rDesc


302 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

303 
GATT_PERMIT_READ
,

305 &
ac˚lZCh¨Pr›s


310 { 
ATT_BT_UUID_SIZE
, 
zUUID
 },

313 (
uöt8
 *)&
ac˚lZCo‹dö©es


318 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

319 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

321 (
uöt8
 *)
ac˚lZC⁄figCo‹dö©es


326 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

327 
GATT_PERMIT_READ
,

329 
ac˚lZCh¨U£rDesc


338 
uöt8
 
ac˚l_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

339 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

340 
bSètus_t
 
ac˚l_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

341 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

343 
ac˚l_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

349 
CONST
 
g©tSîvi˚CBs_t
 
	gac˚lCBs
 =

351 
ac˚l_RódAârCB
,

352 
ac˚l_WrôeAârCB
,

353 
NULL


372 
bSètus_t
 
	$Ac˚l_AddSîvi˚
–
uöt32
 
£rvi˚s
 )

374 
uöt8
 
°©us
 = 
SUCCESS
;

377 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
ac˚lXC⁄figCo‹dö©es
 );

378 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
ac˚lYC⁄figCo‹dö©es
 );

379 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
ac˚lZC⁄figCo‹dö©es
 );

382 
VOID
 
	`lökDB_Regi°î
–
ac˚l_H™dÀC⁄nSètusCB
 );

384 i‡–
£rvi˚s
 & 
ACCEL_SERVICE
 )

387 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
ac˚lAârTbl
,

388 
	`GATT_NUM_ATTRS
–
ac˚lAârTbl
 ),

389 &
ac˚lCBs
 );

392  ( 
°©us
 );

393 
	}
}

405 
bSètus_t
 
	$Ac˚l_Regi°îAµCBs
–
ac˚lCBs_t
 *
≠pCÆlbacks
 )

407 i‡–
≠pCÆlbacks
 )

409 
ac˚l_AµCBs
 = 
≠pCÆlbacks
;

411  ( 
SUCCESS
 );

415  ( 
bÀAÃódyInReque°edMode
 );

417 
	}
}

434 
bSètus_t
 
	$Ac˚l_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 )

436 
bSètus_t
 
ªt
 = 
SUCCESS
;

438  
∑øm
 )

440 
ACCEL_ENABLER
:

441 i‡–
Àn
 = ( 
uöt8
 ) )

443 
ac˚lE«bÀd
 = *((
uöt8
*)
vÆue
);

447 
ªt
 = 
bÀInvÆidR™ge
;

451 
ACCEL_RANGE
:

452 i‡–(
Àn
 = ( 
uöt16
 )Ë&& ((*((
uöt8
*)
vÆue
)Ë<
ACCEL_RANGE_8G
) )

454 
ac˚lR™ge
 = *((
uöt16
*)
vÆue
);

458 
ªt
 = 
bÀInvÆidR™ge
;

462 
ACCEL_X_ATTR
:

463 i‡–
Àn
 = ( 
öt8
 ) )

465 
ac˚lXCo‹dö©es
 = *((
öt8
*)
vÆue
);

468 
	`GATTSîvAµ_Pro˚ssCh¨Cfg
–
ac˚lXC⁄figCo‹dö©es
, (
uöt8
 *)&
ac˚lXCo‹dö©es
,

469 
FALSE
, 
ac˚lAârTbl
, 
	`GATT_NUM_ATTRS
(áccelAttrTbl ),

470 
INVALID_TASK_ID
 );

474 
ªt
 = 
bÀInvÆidR™ge
;

478 
ACCEL_Y_ATTR
:

479 i‡–
Àn
 = ( 
öt8
 ) )

481 
ac˚lYCo‹dö©es
 = *((
öt8
*)
vÆue
);

484 
	`GATTSîvAµ_Pro˚ssCh¨Cfg
–
ac˚lYC⁄figCo‹dö©es
, (
uöt8
 *)&
ac˚lYCo‹dö©es
,

485 
FALSE
, 
ac˚lAârTbl
, 
	`GATT_NUM_ATTRS
(áccelAttrTbl ),

486 
INVALID_TASK_ID
 );

490 
ªt
 = 
bÀInvÆidR™ge
;

494 
ACCEL_Z_ATTR
:

495 i‡–
Àn
 = ( 
öt8
 ) )

497 
ac˚lZCo‹dö©es
 = *((
öt8
*)
vÆue
);

500 
	`GATTSîvAµ_Pro˚ssCh¨Cfg
–
ac˚lZC⁄figCo‹dö©es
, (
uöt8
 *)&
ac˚lZCo‹dö©es
,

501 
FALSE
, 
ac˚lAârTbl
, 
	`GATT_NUM_ATTRS
(áccelAttrTbl ),

502 
INVALID_TASK_ID
 );

506 
ªt
 = 
bÀInvÆidR™ge
;

511 
ªt
 = 
INVALIDPARAMETER
;

515  ( 
ªt
 );

516 
	}
}

531 
bSètus_t
 
	$Ac˚l_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

533 
bSètus_t
 
ªt
 = 
SUCCESS
;

534  
∑øm
 )

536 
ACCEL_ENABLER
:

537 *((
uöt8
*)
vÆue
Ë
ac˚lE«bÀd
;

540 
ACCEL_RANGE
:

541 *((
uöt16
*)
vÆue
Ë
ac˚lR™ge
;

544 
ACCEL_X_ATTR
:

545 *((
öt8
*)
vÆue
Ë
ac˚lXCo‹dö©es
;

548 
ACCEL_Y_ATTR
:

549 *((
öt8
*)
vÆue
Ë
ac˚lYCo‹dö©es
;

552 
ACCEL_Z_ATTR
:

553 *((
öt8
*)
vÆue
Ë
ac˚lZCo‹dö©es
;

557 
ªt
 = 
INVALIDPARAMETER
;

561  ( 
ªt
 );

562 
	}
}

576 
uöt8
 
	$ac˚l_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

577 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

579 
uöt16
 
uuid
;

580 
bSètus_t
 
°©us
 = 
SUCCESS
;

583 i‡–
off£t
 > 0 )

585  ( 
ATT_ERR_ATTR_NOT_LONG
 );

588 i‡–
pAâr
->
ty≥
.
Àn
 =
ATT_BT_UUID_SIZE
 )

591 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

592  
uuid
 )

596 
ACCEL_RANGE_UUID
:

597 *
pLí
 = 2;

598 
pVÆue
[0] = 
	`LO_UINT16
–*((
uöt16
 *)
pAâr
->pValue) );

599 
pVÆue
[1] = 
	`HI_UINT16
–*((
uöt16
 *)
pAâr
->pValue) );

602 
ACCEL_ENABLER_UUID
:

603 
ACCEL_X_UUID
:

604 
ACCEL_Y_UUID
:

605 
ACCEL_Z_UUID
:

606 *
pLí
 = 1;

607 
pVÆue
[0] = *
pAâr
->pValue;

612 *
pLí
 = 0;

613 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

620 *
pLí
 = 0;

621 
°©us
 = 
ATT_ERR_INVALID_HANDLE
;

625  ( 
°©us
 );

626 
	}
}

638 
bSètus_t
 
	$ac˚l_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

639 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

641 
bSètus_t
 
°©us
 = 
SUCCESS
;

642 
uöt8
 
nŸify
 = 0xFF;

644 i‡–
pAâr
->
ty≥
.
Àn
 =
ATT_BT_UUID_SIZE
 )

647 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

648  
uuid
 )

650 
ACCEL_ENABLER_UUID
:

653 i‡–
off£t
 == 0 )

655 i‡–
Àn
 > 1 )

656 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

657 i‡–
pVÆue
[0] !
FALSE
 &&ÖVÆue[0] !
TRUE
 )

658 
°©us
 = 
ATT_ERR_INVALID_VALUE
;

662 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

666 i‡–
°©us
 =
SUCCESS
 )

668 
uöt8
 *
pCurVÆue
 = (uöt8 *)
pAâr
->
pVÆue
;

670 *
pCurVÆue
 = 
pVÆue
[0];

671 
nŸify
 = 
ACCEL_ENABLER
;

676 
GATT_CLIENT_CHAR_CFG_UUID
:

677 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

678 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

683 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

689 
°©us
 = 
ATT_ERR_INVALID_HANDLE
;

693 i‡–(
nŸify
 !0xFFË&& 
ac˚l_AµCBs
 &&ác˚l_AµCBs->
p‚Ac˚lE«bÀr
 )

694 
ac˚l_AµCBs
->
	`p‚Ac˚lE«bÀr
();

696  ( 
°©us
 );

697 
	}
}

709 
	$ac˚l_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

712 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

715 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

716 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

717 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

719 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
ac˚lXC⁄figCo‹dö©es
 );

720 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
ac˚lYC⁄figCo‹dö©es
 );

721 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
ac˚lZC⁄figCo‹dö©es
 );

724 
	}
}

	@../../Profiles/Accelerometer/accelerometer.h

40 #i‚de‡
ACCELEROMETER_H


41 
	#ACCELEROMETER_H


	)

43 #ifde‡
__˝lu•lus


57 
	#ACCEL_ENABLER
 0

58 
	#ACCEL_X_ATTR
 1

59 
	#ACCEL_Y_ATTR
 2

60 
	#ACCEL_Z_ATTR
 3

61 
	#ACCEL_RANGE
 4

62 

	)

64 
	#ACCEL_ENABLER_UUID
 0xFFA1

	)

65 
	#ACCEL_RANGE_UUID
 0xFFA2

	)

66 
	#ACCEL_X_UUID
 0xFFA3

	)

67 
	#ACCEL_Y_UUID
 0xFFA4

	)

68 
	#ACCEL_Z_UUID
 0xFFA5

	)

71 
	#ACCEL_SERVICE_UUID
 0xFFA0

	)

74 
	#ACCEL_RANGE_2G
 20

	)

75 
	#ACCEL_RANGE_8G
 80

	)

78 
	#ACCEL_SERVICE
 0x00000001

	)

93 (*
ac˚lE«bÀr_t
)( );

97 
ac˚lE«bÀr_t
 
p‚Ac˚lE«bÀr
;

98 } 
	tac˚lCBs_t
;

111 
bSètus_t
 
Ac˚l_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

119 
bSètus_t
 
Ac˚l_Regi°îAµCBs
–
ac˚lCBs_t
 *
≠pCÆlbacks
 );

132 
bSètus_t
 
Ac˚l_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

143 
bSètus_t
 
Ac˚l_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

149 #ifde‡
__˝lu•lus


	@../../Profiles/Batt/battservice.c

42 
	~"bcomdef.h
"

43 
	~"OSAL.h
"

44 
	~"hÆ_adc.h
"

45 
	~"lökdb.h
"

46 
	~"©t.h
"

47 
	~"g©t.h
"

48 
	~"g©t_uuid.h
"

49 
	~"g©t_¥ofûe_uuid.h
"

50 
	~"g©t£rv≠p.h
"

51 
	~"hiddev.h
"

53 
	~"b©t£rvi˚.h
"

64 
	#BATT_ADC_LEVEL_3V
 409

	)

65 
	#BATT_ADC_LEVEL_2V
 273

	)

67 
	#BATT_LEVEL_VALUE_IDX
 2

68 
	#BATT_LEVEL_VALUE_CCCD_IDX
 3

69 

	)

78 
CONST
 
uöt8
 
	gb©tSîvUUID
[
ATT_BT_UUID_SIZE
] =

80 
LO_UINT16
(
BATT_SERV_UUID
), 
HI_UINT16
(BATT_SERV_UUID)

84 
CONST
 
uöt8
 
	gb©tLevñUUID
[
ATT_BT_UUID_SIZE
] =

86 
LO_UINT16
(
BATT_LEVEL_UUID
), 
HI_UINT16
(BATT_LEVEL_UUID)

102 
b©tSîvi˚CB_t
 
	gb©tSîvi˚CB
;

105 
b©tSîvi˚SëupCB_t
 
	gb©tSîvi˚SëupCB
 = 
NULL
;

108 
b©tSîvi˚TórdownCB_t
 
	gb©tSîvi˚TórdownCB
 = 
NULL
;

111 
b©tSîvi˚CÆcCB_t
 
	gb©tSîvi˚CÆcCB
 = 
NULL
;

113 
uöt16
 
	gb©tMöLevñ
 = 
BATT_ADC_LEVEL_2V
;

114 
uöt16
 
	gb©tMaxLevñ
 = 
BATT_ADC_LEVEL_3V
;

117 
uöt8
 
	gb©tCrôiˇlLevñ
;

120 
uöt8
 
	gb©tSîvi˚AdcCh
 = 
HAL_ADC_CHANNEL_VDD
;

127 
CONST
 
g©tAârTy≥_t
 
	gb©tSîvi˚
 = { 
ATT_BT_UUID_SIZE
, 
b©tSîvUUID
 };

130 
uöt8
 
	gb©tLevñPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_NOTIFY
;

131 
uöt8
 
	gb©tLevñ
 = 100;

132 
g©tCh¨Cfg_t
 
	gb©tLevñClõ¡Ch¨Cfg
[
GATT_MAX_NUM_CONN
];

135 
uöt8
 
	ghidRï‹tRefB©tLevñ
[
HID_REPORT_REF_LEN
] =

136 { 
HID_RPT_ID_BATT_LEVEL_IN
, 
HID_REPORT_TYPE_INPUT
 };

142 
g©tAâribuã_t
 
	gb©tAârTbl
[] =

146 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

147 
GATT_PERMIT_READ
,

149 (
uöt8
 *)&
b©tSîvi˚


154 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

155 
GATT_PERMIT_READ
,

157 &
b©tLevñPr›s


162 { 
ATT_BT_UUID_SIZE
, 
b©tLevñUUID
 },

163 
GATT_PERMIT_READ
,

165 &
b©tLevñ


170 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

171 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

173 (
uöt8
 *Ë&
b©tLevñClõ¡Ch¨Cfg


178 { 
ATT_BT_UUID_SIZE
, 
ªp‹tRefUUID
 },

179 
GATT_PERMIT_READ
,

181 
hidRï‹tRefB©tLevñ


189 
uöt8
 
b©tRódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

190 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

191 
bSètus_t
 
b©tWrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

192 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

193 
b©tNŸifyCB
–
lökDBIãm_t
 *
pLökIãm
 );

194 
uöt8
 
b©tMósuª
( );

195 
b©tNŸifyLevñ
( );

201 
CONST
 
g©tSîvi˚CBs_t
 
	gb©tCBs
 =

203 
b©tRódAârCB
,

204 
b©tWrôeAârCB
,

205 
NULL


220 
bSètus_t
 
	$B©t_AddSîvi˚
( )

222 
uöt8
 
°©us
 = 
SUCCESS
;

225 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
b©tLevñClõ¡Ch¨Cfg
 );

228 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
b©tAârTbl
,

229 
	`GATT_NUM_ATTRS
–
b©tAârTbl
 ),

230 &
b©tCBs
 );

232  ( 
°©us
 );

233 
	}
}

244 
	$B©t_Regi°î
–
b©tSîvi˚CB_t
 
p‚Sîvi˚CB
 )

246 
b©tSîvi˚CB
 = 
p‚Sîvi˚CB
;

247 
	}
}

263 
bSètus_t
 
	$B©t_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 )

265 
bSètus_t
 
ªt
 = 
SUCCESS
;

267  
∑øm
 )

269 
BATT_PARAM_CRITICAL_LEVEL
:

270 
b©tCrôiˇlLevñ
 = *((
uöt8
*)
vÆue
);

273 i‡–
b©tLevñ
 < 
b©tCrôiˇlLevñ
 )

275 
	`b©tNŸifyLevñ
();

280 
ªt
 = 
INVALIDPARAMETER
;

284  ( 
ªt
 );

285 
	}
}

300 
bSètus_t
 
	$B©t_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

302 
bSètus_t
 
ªt
 = 
SUCCESS
;

303  
∑øm
 )

305 
BATT_PARAM_LEVEL
:

306 *((
uöt8
*)
vÆue
Ë
b©tLevñ
;

309 
BATT_PARAM_CRITICAL_LEVEL
:

310 *((
uöt8
*)
vÆue
Ë
b©tCrôiˇlLevñ
;

313 
BATT_PARAM_SERVICE_HANDLE
:

314 *((
uöt16
*)
vÆue
Ë
	`GATT_SERVICE_HANDLE
–
b©tAârTbl
 );

317 
BATT_PARAM_BATT_LEVEL_IN_REPORT
:

319 
hidR±M≠_t
 *
pR±
 = (hidR±M≠_à*)
vÆue
;

321 
pR±
->
id
 = 
hidRï‹tRefB©tLevñ
[0];

322 
pR±
->
ty≥
 = 
hidRï‹tRefB©tLevñ
[1];

323 
pR±
->
h™dÀ
 = 
b©tAârTbl
[
BATT_LEVEL_VALUE_IDX
].handle;

324 
pR±
->
cccdH™dÀ
 = 
b©tAârTbl
[
BATT_LEVEL_VALUE_CCCD_IDX
].
h™dÀ
;

325 
pR±
->
mode
 = 
HID_PROTOCOL_MODE_REPORT
;

330 
ªt
 = 
INVALIDPARAMETER
;

334  ( 
ªt
 );

335 
	}
}

349 
bSètus_t
 
	$B©t_MósLevñ
( )

351 
uöt8
 
Àvñ
;

353 
Àvñ
 = 
	`b©tMósuª
();

356 i‡(
Àvñ
 < 
b©tLevñ
)

359 
b©tLevñ
 = 
Àvñ
;

362 
	`b©tNŸifyLevñ
();

365  
SUCCESS
;

366 
	}
}

382 
	$B©t_Sëup
–
uöt8
 
adc_ch
, 
uöt16
 
möVÆ
, uöt16 
maxVÆ
,

383 
b©tSîvi˚SëupCB_t
 
sCB
, 
b©tSîvi˚TórdownCB_t
 
tCB
,

384 
b©tSîvi˚CÆcCB_t
 
cCB
 )

386 
b©tSîvi˚AdcCh
 = 
adc_ch
;

387 
b©tMöLevñ
 = 
möVÆ
;

388 
b©tMaxLevñ
 = 
maxVÆ
;

390 
b©tSîvi˚SëupCB
 = 
sCB
;

391 
b©tSîvi˚TórdownCB
 = 
tCB
;

392 
b©tSîvi˚CÆcCB
 = 
cCB
;

393 
	}
}

409 
uöt8
 
	$b©tRódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

410 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

412 
bSètus_t
 
°©us
 = 
SUCCESS
;

415 i‡–
off£t
 > 0 )

417  ( 
ATT_ERR_ATTR_NOT_LONG
 );

420 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1] );

423 i‡–
uuid
 =
BATT_LEVEL_UUID
 )

425 
uöt8
 
Àvñ
;

427 
Àvñ
 = 
	`b©tMósuª
();

430 i‡(
Àvñ
 < 
b©tLevñ
)

433 
b©tLevñ
 = 
Àvñ
;

436 *
pLí
 = 1;

437 
pVÆue
[0] = 
b©tLevñ
;

439 i‡–
uuid
 =
GATT_REPORT_REF_UUID
 )

441 *
pLí
 = 
HID_REPORT_REF_LEN
;

442 
	`oßl_mem˝y
–
pVÆue
, 
pAâr
->pVÆue, 
HID_REPORT_REF_LEN
 );

446 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

449  ( 
°©us
 );

450 
	}
}

465 
bSètus_t
 
	$b©tWrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

466 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

468 
bSètus_t
 
°©us
 = 
SUCCESS
;

470 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

471  
uuid
 )

473 
GATT_CLIENT_CHAR_CFG_UUID
:

474 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

475 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

476 i‡–
°©us
 =
SUCCESS
 )

478 
uöt16
 
ch¨Cfg
 = 
	`BUILD_UINT16
–
pVÆue
[0],ÖValue[1] );

480 i‡–
b©tSîvi˚CB
 )

482 (*
b©tSîvi˚CB
)–(
ch¨Cfg
 =
GATT_CFG_NO_OPERATION
) ?

483 
BATT_LEVEL_NOTI_DISABLED
 :

484 
BATT_LEVEL_NOTI_ENABLED
);

490 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

494  ( 
°©us
 );

495 
	}
}

506 
	$b©tNŸifyCB
–
lökDBIãm_t
 *
pLökIãm
 )

508 i‡–
pLökIãm
->
°©eFœgs
 & 
LINK_CONNECTED
 )

510 
uöt16
 
vÆue
 = 
	`GATTSîvAµ_RódCh¨Cfg
–
pLökIãm
->
c⁄√˘i⁄H™dÀ
,

511 
b©tLevñClõ¡Ch¨Cfg
 );

512 i‡–
vÆue
 & 
GATT_CLIENT_CFG_NOTIFY
 )

514 
©tH™dÀVÆueNŸi_t
 
nŸi
;

516 
nŸi
.
h™dÀ
 = 
b©tAârTbl
[
BATT_LEVEL_VALUE_IDX
].handle;

517 
nŸi
.
Àn
 = 1;

518 
nŸi
.
vÆue
[0] = 
b©tLevñ
;

520 
	`GATT_NŸifiˇti⁄
–
pLökIãm
->
c⁄√˘i⁄H™dÀ
, &
nŸi
, 
FALSE
 );

523 
	}
}

533 
uöt8
 
	$b©tMósuª
( )

535 
uöt16
 
adc
;

536 
uöt8
 
≥r˚¡
;

571 i‡(
b©tSîvi˚SëupCB
 !
NULL
)

573 
	`b©tSîvi˚SëupCB
();

577 
	`HÆAdcSëRe„ªn˚
–
HAL_ADC_REF_125V
 );

578 
adc
 = 
	`HÆAdcRód
–
b©tSîvi˚AdcCh
, 
HAL_ADC_RESOLUTION_10
 );

581 i‡(
b©tSîvi˚TórdownCB
 !
NULL
)

583 
	`b©tSîvi˚TórdownCB
();

586 i‡(
adc
 >
b©tMaxLevñ
)

588 
≥r˚¡
 = 100;

590 i‡(
adc
 <
b©tMöLevñ
)

592 
≥r˚¡
 = 0;

596 i‡(
b©tSîvi˚CÆcCB
 !
NULL
)

598 
≥r˚¡
 = 
	`b©tSîvi˚CÆcCB
(
adc
);

602 
uöt16
 
ønge
 = 
b©tMaxLevñ
 - 
b©tMöLevñ
 + 1;

606 
ønge
 >>= 2;

608 
≥r˚¡
 = (
uöt8
Ë((((
adc
 - 
b©tMöLevñ
Ë* 25Ë+ (
ønge
 - 1)) /Ñange);

612  
≥r˚¡
;

613 
	}
}

623 
	$b©tNŸifyLevñ
( )

626 
	`lökDB_Pîf‹mFunc
–
b©tNŸifyCB
 );

627 
	}
}

639 
	$B©t_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

642 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

645 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

646 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

647 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

649 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
b©tLevñClõ¡Ch¨Cfg
 );

652 
	}
}

	@../../Profiles/Batt/battservice.h

40 #i‚de‡
BATTSERVICE_H


41 
	#BATTSERVICE_H


	)

43 #ifde‡
__˝lu•lus


57 
	#BATT_PARAM_LEVEL
 0

	)

58 
	#BATT_PARAM_CRITICAL_LEVEL
 1

	)

59 
	#BATT_PARAM_SERVICE_HANDLE
 2

	)

60 
	#BATT_PARAM_BATT_LEVEL_IN_REPORT
 3

	)

63 
	#BATT_LEVEL_NOTI_ENABLED
 1

	)

64 
	#BATT_LEVEL_NOTI_DISABLED
 2

	)

67 
	#HID_RPT_ID_BATT_LEVEL_IN
 4

68 

	)

74 (*
b©tSîvi˚CB_t
)(
	tuöt8
 
	tevít
);

77 (*
b©tSîvi˚SëupCB_t
)();

80 
uöt8
 (*
	tb©tSîvi˚CÆcCB_t
)(
	tuöt16
 
	tadcVÆ
);

83 (*
b©tSîvi˚TórdownCB_t
)();

106 
bSètus_t
 
B©t_AddSîvi˚
( );

117 
B©t_Regi°î
–
b©tSîvi˚CB_t
 
p‚Sîvi˚CB
 );

133 
bSètus_t
 
B©t_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

148 
bSètus_t
 
B©t_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

162 
bSètus_t
 
B©t_MósLevñ
( );

178 
B©t_Sëup
–
uöt8
 
adc_ch
, 
uöt16
 
möVÆ
, uöt16 
maxVÆ
,

179 
b©tSîvi˚SëupCB_t
 
sCB
, 
b©tSîvi˚TórdownCB_t
 
tCB
,

180 
b©tSîvi˚CÆcCB_t
 
cCB
 );

192 
B©t_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

197 #ifde‡
__˝lu•lus


	@../../Profiles/BloodPressure/bpservice.c

43 
	~"bcomdef.h
"

44 
	~"OSAL.h
"

45 
	~"lökdb.h
"

46 
	~"©t.h
"

47 
	~"g©t.h
"

48 
	~"g©t_uuid.h
"

49 
	~"g©t_¥ofûe_uuid.h
"

50 
	~"g©t£rv≠p.h
"

51 
	~"g≠b⁄dmgr.h
"

52 
	~"bp£rvi˚.h
"

63 
	#BLOODPRESSURE_MEAS_VALUE_POS
 2

	)

64 
	#BLOODPRESSURE_MEAS_CONFIG_POS
 3

	)

65 
	#BLOODPRESSURE_IMEAS_VALUE_POS
 5

	)

66 
	#BLOODPRESSURE_IMEAS_CONFIG_POS
 6

	)

76 
CONST
 
uöt8
 
	gbloodPªssuªSîvUUID
[
ATT_BT_UUID_SIZE
] =

78 
LO_UINT16
(
BLOODPRESSURE_SERV_UUID
), 
HI_UINT16
(BLOODPRESSURE_SERV_UUID)

82 
CONST
 
uöt8
 
	gbloodPªssuªTempUUID
[
ATT_BT_UUID_SIZE
] =

84 
LO_UINT16
(
BLOODPRESSURE_MEAS_UUID
), 
HI_UINT16
(BLOODPRESSURE_MEAS_UUID)

88 
CONST
 
uöt8
 
	gbloodPªssuªImósUUID
[
ATT_BT_UUID_SIZE
] =

90 
LO_UINT16
(
IMEDIATE_CUFF_PRESSURE_UUID
), 
HI_UINT16
(IMEDIATE_CUFF_PRESSURE_UUID)

94 
CONST
 
uöt8
 
	gbpFótuªUUID
[
ATT_BT_UUID_SIZE
] =

96 
LO_UINT16
(
BLOODPRESSURE_FEATURE_UUID
), 
HI_UINT16
(BLOODPRESSURE_FEATURE_UUID)

112 
bloodPªssuªSîvi˚CB_t
 
	gbloodPªssuªSîvi˚CB
;

119 
CONST
 
g©tAârTy≥_t
 
	gbloodPªssuªSîvi˚
 = { 
ATT_BT_UUID_SIZE
, 
bloodPªssuªSîvUUID
 };

122 
uöt8
 
	gbloodPªssuªTempPr›s
 = 
GATT_PROP_INDICATE
;

123 
g©tCh¨Cfg_t
 
	gbloodPªssuªMósC⁄fig
[
GATT_MAX_NUM_CONN
];

124 
uöt8
 
	gbloodPªssuªTemp
 = 0;

127 
uöt8
 
	gbloodPªssuªImósPr›s
 = 
GATT_PROP_NOTIFY
;

128 
uöt8
 
	gbloodPªssuªImós
=0;

129 
g©tCh¨Cfg_t
 
	gbloodPªssuªIMósC⁄fig
[
GATT_MAX_NUM_CONN
];

141 
uöt8
 
	gbpFótuªPr›s
 = 
GATT_PROP_READ
;

142 
uöt16
 
	gbpFótuª
 = 0;

148 
g©tAâribuã_t
 
	gbloodPªssuªAârTbl
[] =

152 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

153 
GATT_PERMIT_READ
,

155 (
uöt8
 *)&
bloodPªssuªSîvi˚


164 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

165 
GATT_PERMIT_READ
,

167 &
bloodPªssuªTempPr›s


172 { 
ATT_BT_UUID_SIZE
, 
bloodPªssuªTempUUID
 },

175 &
bloodPªssuªTemp


180 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

181 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

183 (
uöt8
 *)&
bloodPªssuªMósC⁄fig


192 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

193 
GATT_PERMIT_READ
,

195 &
bloodPªssuªImósPr›s


200 { 
ATT_BT_UUID_SIZE
, 
bloodPªssuªImósUUID
 },

203 &
bloodPªssuªImós


208 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

209 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

211 (
uöt8
 *)&
bloodPªssuªIMósC⁄fig


220 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

221 
GATT_PERMIT_READ
,

223 &
bpFótuªPr›s


228 { 
ATT_BT_UUID_SIZE
, 
bpFótuªUUID
 },

229 
GATT_PERMIT_READ
,

231 (
uöt8
 *)&
bpFótuª


238 
uöt8
 
bloodPªssuª_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

239 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

240 
bSètus_t
 
bloodPªssuª_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

241 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

243 
bloodPªssuª_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

248 
CONST
 
g©tSîvi˚CBs_t
 
	gbloodPªssuªCBs
 =

250 
bloodPªssuª_RódAârCB
,

251 
bloodPªssuª_WrôeAârCB
,

252 
NULL


270 
bSètus_t
 
	$BloodPªssuª_AddSîvi˚
–
uöt32
 
£rvi˚s
 )

272 
uöt8
 
°©us
 = 
SUCCESS
;

275 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
bloodPªssuªMósC⁄fig
 );

276 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
bloodPªssuªIMósC⁄fig
 );

279 
VOID
 
	`lökDB_Regi°î
–
bloodPªssuª_H™dÀC⁄nSètusCB
 );

281 i‡–
£rvi˚s
 & 
BLOODPRESSURE_SERVICE
 )

284 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
bloodPªssuªAârTbl
,

285 
	`GATT_NUM_ATTRS
–
bloodPªssuªAârTbl
 ),

286 &
bloodPªssuªCBs
 );

289  ( 
°©us
 );

290 
	}
}

301 
	$BloodPªssuª_Regi°î
–
bloodPªssuªSîvi˚CB_t
 
p‚Sîvi˚CB
 )

303 
bloodPªssuªSîvi˚CB
 = 
p‚Sîvi˚CB
;

304 
	}
}

320 
bSètus_t
 
	$BloodPªssuª_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 )

322 
bSètus_t
 
ªt
 = 
SUCCESS
;

323  
∑øm
 )

327 
ªt
 = 
INVALIDPARAMETER
;

331  ( 
ªt
 );

332 
	}
}

347 
bSètus_t
 
	$BloodPªssuª_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

349 
bSètus_t
 
ªt
 = 
SUCCESS
;

350  
∑øm
 )

353 
ªt
 = 
INVALIDPARAMETER
;

357  ( 
ªt
 );

358 
	}
}

371 
bSètus_t
 
	$BloodPªssuª_MósIndiˇã
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueInd_t
 *
pNŸi
,
uöt8
 
èskId
 )

373 
uöt16
 
vÆue
 = 
	`GATTSîvAµ_RódCh¨Cfg
–
c⁄nH™dÀ
, 
bloodPªssuªMósC⁄fig
 );

376 i‡–
vÆue
 & 
GATT_CLIENT_CFG_INDICATE
 )

379 
pNŸi
->
h™dÀ
 = 
bloodPªssuªAârTbl
[
BLOODPRESSURE_MEAS_VALUE_POS
].handle;

382  
	`GATT_Indiˇti⁄
–
c⁄nH™dÀ
, 
pNŸi
, 
FALSE
, 
èskId
 );

385  
bÀInc‹ª˘Mode
;

386 
	}
}

400 
bSètus_t
 
	$BloodPªssuª_IMósNŸify
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueNŸi_t
 *
pNŸi
, 
uöt8
 
èskId
 )

402 
uöt16
 
vÆue
 = 
	`GATTSîvAµ_RódCh¨Cfg
–
c⁄nH™dÀ
, 
bloodPªssuªIMósC⁄fig
 );

405 i‡–
vÆue
 & 
GATT_CLIENT_CFG_NOTIFY
 )

408 
pNŸi
->
h™dÀ
 = 
bloodPªssuªAârTbl
[
BLOODPRESSURE_IMEAS_VALUE_POS
].handle;

411  
	`GATT_NŸifiˇti⁄
–
c⁄nH™dÀ
, 
pNŸi
, 
FALSE
);

414  
bÀInc‹ª˘Mode
;

416 
	}
}

432 
uöt8
 
	$bloodPªssuª_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

433 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

435 
bSètus_t
 
°©us
 = 
SUCCESS
;

438 i‡–
	`g©tPîmôAuth‹Ród
–
pAâr
->
≥rmissi⁄s
 ) )

441  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

445 i‡–
off£t
 > 0 )

447  ( 
ATT_ERR_ATTR_NOT_LONG
 );

450 i‡–
pAâr
->
ty≥
.
Àn
 =
ATT_BT_UUID_SIZE
 )

453 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

454  
uuid
 )

457 
BLOODPRESSURE_FEATURE_UUID
:

459 *
pLí
 = 2;

460 
pVÆue
[0] = 0;

461 
pVÆue
[1] = 0;

466 *
pLí
 = 0;

467 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

471  ( 
°©us
 );

472 
	}
}

487 
bSètus_t
 
	$bloodPªssuª_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

488 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

490 
bSètus_t
 
°©us
 = 
SUCCESS
;

492 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

493  
uuid
 )

495 
GATT_CLIENT_CHAR_CFG_UUID
:

496 i‡–
pAâr
->
h™dÀ
 =
bloodPªssuªAârTbl
[
BLOODPRESSURE_MEAS_CONFIG_POS
].handle )

499 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

500 
off£t
, 
GATT_CLIENT_CFG_INDICATE
 );

501 i‡–
°©us
 =
SUCCESS
 )

503 
uöt16
 
vÆue
 = 
	`BUILD_UINT16
–
pVÆue
[0],ÖValue[1] );

505 (*
bloodPªssuªSîvi˚CB
)–(
vÆue
 =
GATT_CFG_NO_OPERATION
) ?

506 
BLOODPRESSURE_MEAS_NOTI_DISABLED
 :

507 
BLOODPRESSURE_MEAS_NOTI_ENABLED
);

510 i‡–
pAâr
->
h™dÀ
 =
bloodPªssuªAârTbl
[
BLOODPRESSURE_IMEAS_CONFIG_POS
].handle )

513 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

514 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

515 i‡–
°©us
 =
SUCCESS
 )

517 
uöt16
 
vÆue
 = 
	`BUILD_UINT16
–
pVÆue
[0],ÖValue[1] );

519 (*
bloodPªssuªSîvi˚CB
)–(
vÆue
 =
GATT_CFG_NO_OPERATION
) ?

520 
BLOODPRESSURE_IMEAS_NOTI_DISABLED
 :

521 
BLOODPRESSURE_IMEAS_NOTI_ENABLED
 );

526 
°©us
 = 
ATT_ERR_INVALID_HANDLE
;

531 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

535  ( 
°©us
 );

537 
	}
}

550 
	$bloodPªssuª_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

553 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

556 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

557 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

558 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

560 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
bloodPªssuªMósC⁄fig
 );

561 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
bloodPªssuªIMósC⁄fig
 );

564 
	}
}

	@../../Profiles/BloodPressure/bpservice.h

40 #i‚de‡
BLOODPRESSURESERVICE_H


41 
	#BLOODPRESSURESERVICE_H


	)

43 #ifde‡
__˝lu•lus


57 
	#BLOODPRESSURE_MEAS
 0

	)

58 
	#BLOODPRESSURE_MEAS_CHAR_CFG
 1

	)

59 
	#BLOODPRESSURE_IMEAS_CHAR_CFG
 2

	)

60 
	#BLOODPRESSURE_TIMESTAMP
 3

	)

61 
	#BLOODPRESSURE_PULSE
 4

	)

62 
	#BLOODPRESSURE_INTERVAL
 5

	)

65 
	#BLOODPRESSURE_TIMESTAMP_LEN
 7

66 
	#BLOODPRESSURE_TIME_LEN
 7

67 
	#BLOODPRESSURE_INTERVAL_LEN
 1

	)

70 
	#BLOODPRESSURE_MEAS_MAX
 (
ATT_MTU_SIZE
 -5)

	)

73 
	#BLOODPRESSURE_FLAGS_MMHG
 0x00

	)

74 
	#BLOODPRESSURE_FLAGS_KPA
 0x01

	)

75 
	#BLOODPRESSURE_FLAGS_TIMESTAMP
 0x02

	)

76 
	#BLOODPRESSURE_FLAGS_PULSE
 0x04

	)

77 
	#BLOODPRESSURE_FLAGS_USER
 0x08

	)

78 
	#BLOODPRESSURE_FLAGS_STATUS
 0x10

	)

82 
	#BLOODPRESSURE_SITE_ARMPIT
 0x01

	)

83 
	#BLOODPRESSURE_SITE_BODY
 0x02

	)

84 
	#BLOODPRESSURE_SITE_EAR
 0x03

	)

85 
	#BLOODPRESSURE_SITE_FINGER
 0x04

	)

86 
	#BLOODPRESSURE_SITE_GASTRO
 0x05

	)

87 
	#BLOODPRESSURE_SITE_MOUTH
 0x06

	)

88 
	#BLOODPRESSURE_SITE_RECTUM
 0x07

	)

89 
	#BLOODPRESSURE_SITE_TOE
 0x08

	)

90 
	#BLOODPRESSURE_SITE_TYMPNUM
 0x09

	)

93 
	#BLOODPRESSURE_SERVICE
 0x00000001

	)

96 
	#BLOODPRESSURE_MEAS_NOTI_ENABLED
 1

	)

97 
	#BLOODPRESSURE_MEAS_NOTI_DISABLED
 2

	)

98 
	#BLOODPRESSURE_IMEAS_NOTI_ENABLED
 3

	)

99 
	#BLOODPRESSURE_IMEAS_NOTI_DISABLED
 4

	)

100 
	#BLOODPRESSURE_TIME_SET
 5

	)

107 (*
bloodPªssuªSîvi˚CB_t
)(
	tuöt8
 
	tevít
);

129 
bSètus_t
 
BloodPªssuª_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

138 
BloodPªssuª_Regi°î
–
bloodPªssuªSîvi˚CB_t
 
p‚Sîvi˚CB
 );

150 
bSètus_t
 
BloodPªssuª_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

161 
bSètus_t
 
BloodPªssuª_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

174 
bSètus_t
 
BloodPªssuª_MósIndiˇã
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueInd_t
 *
pNŸi
, 
uöt8
 
èskId
 );

190 
bSètus_t
 
BloodPªssuª_IMósNŸify
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueNŸi_t
 *
pNŸi
, 
uöt8
 
èskId
 );

195 #ifde‡
__˝lu•lus


	@../../Profiles/CSC/cyclingservice.c

44 
	~"bcomdef.h
"

45 
	~"OSAL.h
"

46 
	~"lökdb.h
"

47 
	~"©t.h
"

48 
	~"g©t.h
"

49 
	~"g©t_uuid.h
"

50 
	~"g©t£rv≠p.h
"

51 
	~"g©t_¥ofûe_uuid.h
"

52 
	~"cy˛ög£rvi˚.h
"

66 
	#CSC_CMD_IND_SEND_EVT
 0x0001

	)

68 
	#CSC_MEAS_VALUE_POS
 2

	)

69 
	#CSC_MEAS_CFG_POS
 3

	)

70 
	#CSC_COMMAND_VALUE_POS
 9

	)

71 
	#CSC_COMMAND_CFG_POS
 10

	)

72 
	#COMMAND_IND_LENGTH
 2

	)

79 
CONST
 
uöt8
 
	gcy˛ögSîvUUID
[
ATT_BT_UUID_SIZE
] =

81 
LO_UINT16
(
CSC_SERV_UUID
), 
HI_UINT16
(CSC_SERV_UUID)

85 
CONST
 
uöt8
 
	gcy˛ögMósUUID
[
ATT_BT_UUID_SIZE
] =

87 
LO_UINT16
(
CSC_MEAS_UUID
), 
HI_UINT16
(CSC_MEAS_UUID)

91 
CONST
 
uöt8
 
	gcy˛ögFótuªUUID
[
ATT_BT_UUID_SIZE
] =

93 
LO_UINT16
(
CSC_FEATURE_UUID
), 
HI_UINT16
(CSC_FEATURE_UUID)

97 
CONST
 
uöt8
 
	gcy˛ögSísLocUUID
[
ATT_BT_UUID_SIZE
] =

99 
LO_UINT16
(
SENSOR_LOC_UUID
), 
HI_UINT16
(SENSOR_LOC_UUID)

103 
CONST
 
uöt8
 
	gcy˛ögComm™dUUID
[
ATT_BT_UUID_SIZE
] =

105 
LO_UINT16
(
SC_CTRL_PT_UUID
), 
HI_UINT16
(SC_CTRL_PT_UUID)

120 
cy˛ögSîvi˚CB_t
 
	gcy˛ögSîvi˚CB
 = 
NULL
;

122 
uöt8
 
	gsuµ‹ãdSís‹s
 = 0;

123 
boﬁ
 
	gscOpInProgªss
 = 
FALSE
;

126 
uöt16
 
	gc⁄√˘i⁄H™dÀ
;

127 
©tH™dÀVÆueInd_t
 
	gcscCmdInd
;

134 
uöt8
 
	gcy˛ögSîvi˚_TaskID
 = 0;

137 
CONST
 
g©tAârTy≥_t
 
	gcy˛ögSîvi˚
 = { 
ATT_BT_UUID_SIZE
, 
cy˛ögSîvUUID
 };

140 
uöt8
 
	gsuµ‹ãdSís‹Loˇti⁄s
[
CSC_MAX_SENSOR_LOCS
];

144 
uöt8
 
	gcy˛ögMósPr›s
 = 
GATT_PROP_NOTIFY
;

145 
uöt8
 
	gcy˛ögMós
 = 0;

146 
g©tCh¨Cfg_t
 
	gcy˛ögMósClõ¡Ch¨Cfg
[
GATT_MAX_NUM_CONN
];

149 
uöt8
 
	gcy˛ögFótuªPr›s
 = 
GATT_PROP_READ
;

150 
uöt16
 
	gcy˛ögFótuªs
 = 
CSC_NO_SUPPORT
;

154 
uöt8
 
	gcy˛ögSísLocPr›s
 = 
GATT_PROP_READ
;

155 
uöt8
 
	gcy˛ögSísLoc
 = 
CSC_SENSOR_LOC_TOP_OF_SHOE
;

158 
uöt8
 
	gcy˛ögComm™dPr›s
 = 
GATT_PROP_WRITE
 | 
GATT_PROP_INDICATE
;

159 
uöt8
 
	gcy˛ögComm™d
 = 0;

160 
g©tCh¨Cfg_t
 
	gcy˛ögComm™dClõ¡Ch¨Cfg
[
GATT_MAX_NUM_CONN
];

166 
g©tAâribuã_t
 
	gcy˛ögAârTbl
[] =

170 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

171 
GATT_PERMIT_READ
,

173 (
uöt8
 *)&
cy˛ögSîvi˚


178 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

179 
GATT_PERMIT_READ
,

181 &
cy˛ögMósPr›s


186 { 
ATT_BT_UUID_SIZE
, 
cy˛ögMósUUID
 },

189 &
cy˛ögMós


194 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

195 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

197 (
uöt8
 *Ë&
cy˛ögMósClõ¡Ch¨Cfg


202 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

203 
GATT_PERMIT_READ
,

205 &
cy˛ögFótuªPr›s


210 { 
ATT_BT_UUID_SIZE
, 
cy˛ögFótuªUUID
 },

211 
GATT_PERMIT_READ
,

213 (
uöt8
 *Ë&
cy˛ögFótuªs


218 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

219 
GATT_PERMIT_READ
,

221 &
cy˛ögSísLocPr›s


226 { 
ATT_BT_UUID_SIZE
, 
cy˛ögSísLocUUID
 },

227 
GATT_PERMIT_READ
,

229 &
cy˛ögSísLoc


234 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

235 
GATT_PERMIT_READ
,

237 &
cy˛ögComm™dPr›s


242 { 
ATT_BT_UUID_SIZE
, 
cy˛ögComm™dUUID
 },

243 
GATT_PERMIT_WRITE
,

245 &
cy˛ögComm™d


250 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

251 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

253 (
uöt8
 *Ë&
cy˛ögComm™dClõ¡Ch¨Cfg


261 
uöt8
 
cy˛ög_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

262 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

263 
bSètus_t
 
cy˛ög_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

264 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

265 
cy˛ög_Pro˚ssOSALMsg
–
oßl_evít_hdr_t
 *
pMsg
 );

266 
cy˛ög_Pro˚ssGATTMsg
–
g©tMsgEvít_t
 *
pMsg
 );

267 
boﬁ
 
cy˛ög_Sís‹LocSuµ‹ãd
–
uöt8
 
£ns‹Loc
 );

268 
cy˛ög_Pro˚ssCSCCmd
–
uöt16
 
©åH™dÀ
, 
uöt8
 *
pVÆue
, uöt8 
Àn
 );

275 
CONST
 
g©tSîvi˚CBs_t
 
	gcy˛ögCBs
 =

277 
cy˛ög_RódAârCB
,

278 
cy˛ög_WrôeAârCB
,

279 
NULL


295 
	$Cy˛ögSîvi˚_Inô
–
uöt8
 
èsk_id
 )

298 
cy˛ögSîvi˚_TaskID
 = 
èsk_id
;

299 
	}
}

312 
uöt16
 
	$Cy˛ögSîvi˚_Pro˚ssEvít
–
uöt8
 
èsk_id
, 
uöt16
 
evíts
 )

314 
VOID
 
èsk_id
;

316 i‡–
evíts
 & 
SYS_EVENT_MSG
 )

318 
uöt8
 *
pMsg
;

320 i‡–(
pMsg
 = 
	`oßl_msg_ª˚ive
–
cy˛ögSîvi˚_TaskID
 )Ë!
NULL
 )

322 
	`cy˛ög_Pro˚ssOSALMsg
–(
oßl_evít_hdr_t
 *)
pMsg
 );

325 
VOID
 
	`oßl_msg_dóŒoˇã
–
pMsg
 );

329  (
evíts
 ^ 
SYS_EVENT_MSG
);

332 i‡–
evíts
 & 
CSC_CMD_IND_SEND_EVT
 )

334 
	`GATT_Indiˇti⁄
–
c⁄√˘i⁄H™dÀ
, &
cscCmdInd
, 
FALSE
, 
cy˛ögSîvi˚_TaskID
 );

337 
scOpInProgªss
 = 
FALSE
;

339  ( 
evíts
 ^ 
CSC_CMD_IND_SEND_EVT
 );

343 
	}
}

354 
	$cy˛ög_Pro˚ssOSALMsg
–
oßl_evít_hdr_t
 *
pMsg
 )

356  
pMsg
->
evít
 )

358 
GATT_MSG_EVENT
:

359 
	`cy˛ög_Pro˚ssGATTMsg
–(
g©tMsgEvít_t
 *Ë
pMsg
 );

365 
	}
}

376 
	$cy˛ög_Pro˚ssGATTMsg
–
g©tMsgEvít_t
 *
pMsg
 )

378 i‡–
pMsg
->
mëhod
 =
ATT_HANDLE_VALUE_CFM
 )

383 
	}
}

394 
boﬁ
 
	$cy˛ög_Sís‹LocSuµ‹ãd
–
uöt8
 
£ns‹Loc
 )

396 
uöt8
 
i
;

397 
i
 = 0; i <
suµ‹ãdSís‹s
; i++)

399 i‡(
suµ‹ãdSís‹Loˇti⁄s
[
i
] =
£ns‹Loc
)

401  
TRUE
;

404  
FALSE
;

405 
	}
}

418 
bSètus_t
 
	$Cy˛ög_AddSîvi˚
–
uöt32
 
£rvi˚s
 )

420 
uöt8
 
°©us
 = 
SUCCESS
;

423 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
cy˛ögMósClõ¡Ch¨Cfg
 );

424 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
cy˛ögComm™dClõ¡Ch¨Cfg
);

426 i‡–
£rvi˚s
 & 
CYCLING_SERVICE
 )

429 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
cy˛ögAârTbl
,

430 
	`GATT_NUM_ATTRS
–
cy˛ögAârTbl
 ),

431 &
cy˛ögCBs
 );

434  ( 
°©us
 );

435 
	}
}

446 
	$Cy˛ög_Regi°î
–
cy˛ögSîvi˚CB_t
 
p‚Sîvi˚CB
 )

448 
cy˛ögSîvi˚CB
 = 
p‚Sîvi˚CB
;

449 
	}
}

466 
bSètus_t
 
	$Cy˛ög_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
pVÆue
 )

468 
bSètus_t
 
ªt
 = 
SUCCESS
;

470  
∑øm
 )

472 
CSC_SENS_LOC
:

473 
cy˛ögSísLoc
 = *((
uöt8
*)
pVÆue
);

476 
CSC_FEATURE
:

477 
cy˛ögFótuªs
 = *((
uöt8
*)
pVÆue
);

480 
CSC_AVAIL_SENS_LOCS
:

481 i‡(
suµ‹ãdSís‹s
 < 
CSC_MAX_SENSOR_LOCS
)

483 
suµ‹ãdSís‹Loˇti⁄s
[
suµ‹ãdSís‹s
++] = *((
uöt8
*)
pVÆue
);

488 
ªt
 = 
INVALIDPARAMETER
;

492  ( 
ªt
 );

493 
	}
}

508 
bSètus_t
 
	$Cy˛ög_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

510 
bSètus_t
 
ªt
 = 
SUCCESS
;

512  
∑øm
 )

514 
CSC_FEATURE
:

515 *((
uöt8
*)
vÆue
Ë
cy˛ögFótuªs
;

517 
CSC_SENS_LOC
:

518 *((
uöt8
*)
vÆue
Ë
cy˛ögSísLoc
;

521 
CSC_COMMAND
:

522 *((
uöt8
*)
vÆue
Ë
cy˛ögComm™d
;

526 
ªt
 = 
INVALIDPARAMETER
;

530  ( 
ªt
 );

531 
	}
}

544 
bSètus_t
 
	$Cy˛ög_MósNŸify
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueNŸi_t
 *
pNŸi
 )

546 
uöt16
 
vÆue
 = 
	`GATTSîvAµ_RódCh¨Cfg
–
c⁄nH™dÀ
, 
cy˛ögMósClõ¡Ch¨Cfg
 );

549 i‡–
vÆue
 & 
GATT_CLIENT_CFG_NOTIFY
 )

552 
pNŸi
->
h™dÀ
 = 
cy˛ögAârTbl
[
CSC_MEAS_VALUE_POS
].handle;

555  
	`GATT_NŸifiˇti⁄
–
c⁄nH™dÀ
, 
pNŸi
, 
FALSE
 );

558  
bÀInc‹ª˘Mode
;

559 
	}
}

572 
	$cy˛ög_Pro˚ssCSCCmd
–
uöt16
 
©åH™dÀ
, 
uöt8
 *
pVÆue
, uöt8 
Àn
 )

574 
uöt8
 
cscSètus
 = 
CSC_SUCCESS
;

577 
scOpInProgªss
 = 
TRUE
;

580 
cscCmdInd
.
h™dÀ
 = 
©åH™dÀ
;

582 
cscCmdInd
.
Àn
 = 3;

583 
cscCmdInd
.
vÆue
[0] = 
CSC_COMMAND_RSP
;

584 
cscCmdInd
.
vÆue
[1] = 
pVÆue
[0];

586  
pVÆue
[0] )

588 
CSC_SET_CUMM_VAL
:

590 i‡––
Àn
 <5 ) && ( 
cy˛ögFótuªs
 & 
CSC_WHEEL_REV_SUPP
 ) )

592 
uöt32
 
cummWhìlRevﬁuti⁄s
;

595 i‡(–
Àn
 - 1 ) == 4)

597 
cummWhìlRevﬁuti⁄s
 = 
	`BUILD_UINT32
–
pVÆue
[1],ÖValue[2],ÖValue[3],ÖValue[4]);

601 
cummWhìlRevﬁuti⁄s
 = 0;

604  
i
 = 0; i < (
Àn
 - 1); ++i )

606 
cummWhìlRevﬁuti⁄s
 +
pVÆue
[
i
 + 1] << (i*8);

611 i‡–
cy˛ögSîvi˚CB
 !
NULL
 )

613 (*
cy˛ögSîvi˚CB
)–
CSC_CMD_SET_CUMM_VAL
, &
cummWhìlRevﬁuti⁄s
 );

618 
cscSètus
 = 
CSC_INVALID_PARAMETER
;

622 
CSC_UPDATE_SENS_LOC
:

624 i‡––
Àn
 == 2 ) &&

625 –
cy˛ögFótuªs
 & 
CSC_MULTI_SENS_SUPP
 ) &&

626 –
	`cy˛ög_Sís‹LocSuµ‹ãd
–
pVÆue
[1] ) =
TRUE
 ) )

629 
cy˛ögSísLoc
 = 
pVÆue
[1];

632 i‡–
cy˛ögSîvi˚CB
 !
NULL
 )

634 (*
cy˛ögSîvi˚CB
)–
CSC_CMD_UPDATE_SENS_LOC
, 
NULL
 );

639 
cscSètus
 = 
CSC_INVALID_PARAMETER
;

643 
CSC_REQ_SUPP_SENS_LOC
:

645 i‡––
Àn
 =1 ) && ( 
cy˛ögFótuªs
 & 
CSC_MULTI_SENS_SUPP
 ) )

647 
cscCmdInd
.
Àn
 +
suµ‹ãdSís‹s
;

648 
	`oßl_mem˝y
–&(
cscCmdInd
.
vÆue
[3]), 
suµ‹ãdSís‹Loˇti⁄s
, 
suµ‹ãdSís‹s
 );

653 
cscSètus
 = 
CSC_INVALID_PARAMETER
;

659 
cscSètus
 = 
CSC_OPCODE_NOT_SUPPORTED
;

664 
cscCmdInd
.
vÆue
[2] = 
cscSètus
;

667 
	`oßl_£t_evít
–
cy˛ögSîvi˚_TaskID
, 
CSC_CMD_IND_SEND_EVT
 );

668 
	}
}

680 
	$Cy˛ög_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

683 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

686 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

687 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

688 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

690 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
cy˛ögMósClõ¡Ch¨Cfg
 );

691 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
cy˛ögComm™dClõ¡Ch¨Cfg
 );

694 
	}
}

710 
uöt8
 
	$cy˛ög_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

711 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

714 i‡–
off£t
 > 0 )

716  ( 
ATT_ERR_ATTR_NOT_LONG
 );

719 
bSètus_t
 
°©us
 = 
SUCCESS
;

720 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

722  
uuid
 )

724 
SENSOR_LOC_UUID
:

727 *
pLí
 = 1;

728 
pVÆue
[0] = 
pAâr
->pValue[0];

732 
CSC_FEATURE_UUID
:

735 *
pLí
 = 2;

736 
pVÆue
[0] = 
	`LO_UINT16
(
pAâr
->pValue[0]);

737 
pVÆue
[1] = 
	`HI_UINT16
(
pAâr
->pValue[0]);

741 
GATT_CLIENT_CHAR_CFG_UUID
:

744 i‡–
pAâr
->
pVÆue
 =(
uöt8
*)
cy˛ögMósClõ¡Ch¨Cfg
 )

746 *
pLí
 = 1;

747 
pVÆue
[0] = 
	`GATTSîvAµ_RódCh¨Cfg
(
c⁄nH™dÀ
, 
cy˛ögMósClõ¡Ch¨Cfg
 );

749 i‡–
pAâr
->
pVÆue
 =(
uöt8
*)
cy˛ögComm™dClõ¡Ch¨Cfg
 )

751 *
pLí
 = 1;

752 
pVÆue
[0] = 
	`GATTSîvAµ_RódCh¨Cfg
(
c⁄nH™dÀ
, 
cy˛ögComm™dClõ¡Ch¨Cfg
 );

756 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

762 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

767 i‡–
cy˛ögSîvi˚CB
 !
NULL
 )

769 (*
cy˛ögSîvi˚CB
)–
CSC_READ_ATTR
, 
NULL
 );

772  ( 
°©us
 );

773 
	}
}

789 
bSètus_t
 
	$cy˛ög_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

790 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

792 
bSètus_t
 
°©us
 = 
SUCCESS
;

793 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

795 i‡–
off£t
 > 0 )

797  (
ATT_ERR_ATTR_NOT_LONG
);

800  
uuid
 )

802 
SC_CTRL_PT_UUID
:

804 i‡–
scOpInProgªss
 =
TRUE
 )

806 
°©us
 = 
CSC_ERR_PROC_IN_PROGRESS
;

809 i‡–(
cy˛ögComm™dClõ¡Ch¨Cfg
[
c⁄nH™dÀ
].
vÆue
 & 
GATT_CLIENT_CFG_INDICATE
Ë=
FALSE
 )

811 
°©us
 = 
CSC_ERR_CCC_IMPROPER_CFG
;

816 
	`cy˛ög_Pro˚ssCSCCmd
–
pAâr
->
h™dÀ
, 
pVÆue
, 
Àn
 );

817 
c⁄√˘i⁄H™dÀ
 = 
c⁄nH™dÀ
;

822 
GATT_CLIENT_CHAR_CFG_UUID
:

823 i‡–
pAâr
->
h™dÀ
 =
cy˛ögAârTbl
[
CSC_COMMAND_CFG_POS
].handle )

825 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

826 
off£t
, 
GATT_CLIENT_CFG_INDICATE
 );

828 i‡–
cy˛ögSîvi˚CB
 !
NULL
 )

830 (*
cy˛ögSîvi˚CB
)–
CSC_WRITE_ATTR
, 
NULL
 );

833 i‡–
pAâr
->
h™dÀ
 =
cy˛ögAârTbl
[
CSC_MEAS_CFG_POS
].handle )

835 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

836 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

837 i‡–
°©us
 =
SUCCESS
 )

840 i‡–
cy˛ögSîvi˚CB
 !
NULL
 )

842 
uöt16
 
ch¨Cfg
 = 
	`BUILD_UINT16
–
pVÆue
[0],ÖValue[1] );

844 (*
cy˛ögSîvi˚CB
)–((
ch¨Cfg
 =
GATT_CFG_NO_OPERATION
) ?

845 
CSC_MEAS_NOTI_DISABLED
 :

846 
CSC_MEAS_NOTI_ENABLED
 ), 
NULL
 );

853 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

857  ( 
°©us
 );

858 
	}
}

	@../../Profiles/CSC/cyclingservice.h

41 #i‚de‡
CYCLINGSERVICE_H


42 
	#CYCLINGSERVICE_H


	)

44 #ifde‡
__˝lu•lus


57 
	#CYCLING_SERVICE
 0x00000001

	)

60 
	#CSC_ERR_PROC_IN_PROGRESS
 0x80

	)

61 
	#CSC_ERR_CCC_IMPROPER_CFG
 0x81

	)

63 
	#CSC_SUCCESS
 1

	)

64 
	#CSC_OPCODE_NOT_SUPPORTED
 2

	)

65 
	#CSC_INVALID_PARAMETER
 3

	)

68 
	#CSC_MEAS
 1

	)

69 
	#CSC_MEAS_CHAR_CFG
 2

	)

70 
	#CSC_FEATURE
 3

	)

71 
	#CSC_SENS_LOC
 4

	)

72 
	#CSC_COMMAND
 5

	)

73 
	#CSC_COMMAND_CHAR_CFG
 6

	)

74 
	#CSC_AVAIL_SENS_LOCS
 7

	)

77 
	#CSC_WHEEL_REV_PRESENT
 0x01

	)

78 
	#CSC_CRANK_REV_PRESENT
 0x02

	)

81 
	#CSC_NO_SUPPORT
 0x00

	)

82 
	#CSC_WHEEL_REV_SUPP
 0x01

	)

83 
	#CSC_CRANK_REV_SUPP
 0x02

	)

84 
	#CSC_MULTI_SENS_SUPP
 0x04

	)

85 
	#CSC_FULL_SUPPORT
 0x07

	)

88 
	#CSC_SENSOR_LOC_OTHER
 0

	)

89 
	#CSC_SENSOR_LOC_TOP_OF_SHOE
 1

	)

90 
	#CSC_SENSOR_LOC_IN_SHOE
 2

	)

91 
	#CSC_SENSOR_LOC_HIP
 3

	)

92 
	#CSC_SENSOR_LOC_FRONT_WHEEL
 4

	)

93 
	#CSC_SENSOR_LOC_LEFT_CRANK
 5

	)

94 
	#CSC_SENSOR_LOC_RIGHT_CRANK
 6

	)

95 
	#CSC_SENSOR_LOC_LEFT_PEDAL
 7

	)

96 
	#CSC_SENSOR_LOC_RIGHT_PEDAL
 8

	)

97 
	#CSC_SENSOR_LOC_FRONT_HUB
 9

	)

98 
	#CSC_SENSOR_LOC_REAR_DROPOUT
 10

	)

99 
	#CSC_SENSOR_LOC_CHAINSTAY
 11

	)

100 
	#CSC_SENSOR_LOC_REAR_WHEEL
 12

	)

101 
	#CSC_SENSOR_LOC_REAR_HUB
 13

	)

104 
	#CSC_MAX_SENSOR_LOCS
 14

	)

107 
	#CSC_SET_CUMM_VAL
 1

	)

108 
	#CSC_START_SENS_CALIB
 2

	)

109 
	#CSC_UPDATE_SENS_LOC
 3

	)

110 
	#CSC_REQ_SUPP_SENS_LOC
 4

	)

111 
	#CSC_COMMAND_RSP
 16

	)

114 
	#CSC_FLAGS_AT_REST
 0x00

	)

115 
	#CSC_FLAGS_SPEED
 0x01

	)

116 
	#CSC_FLAGS_CADENCE
 0x02

	)

117 
	#CSC_FLAGS_SPEED_CADENCE
 0x03

	)

120 
	#DEFAULT_NOTI_INTERVAL
 1000

121 

	)

122 
	#VALUE_ROLL_OVER
 64000

123 

	)

125 
	#CSC_CMD_SET_CUMM_VAL
 1

	)

126 
	#CSC_CMD_START_SENS_CALIB
 2

	)

127 
	#CSC_CMD_UPDATE_SENS_LOC
 3

	)

128 
	#CSC_MEAS_NOTI_ENABLED
 4

	)

129 
	#CSC_MEAS_NOTI_DISABLED
 5

	)

130 
	#CSC_READ_ATTR
 6

	)

131 
	#CSC_WRITE_ATTR
 7

	)

138 (*
cy˛ögSîvi˚CB_t
)–
	tuöt8
 
	tevít
, 
	tuöt32
 *
	tpNewCummVÆ
 );

162 
Cy˛ögSîvi˚_Inô
–
uöt8
 
èsk_id
 );

175 
uöt16
 
Cy˛ögSîvi˚_Pro˚ssEvít
–
uöt8
 
èsk_id
, uöt16 
evíts
 );

186 
bSètus_t
 
Cy˛ög_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

199 
Cy˛ög_Regi°î
–
cy˛ögSîvi˚CB_t
 
p‚Sîvi˚CB
 );

213 
bSètus_t
 
Cy˛ög_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

228 
bSètus_t
 
Cy˛ög_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

241 
bSètus_t
 
Cy˛ög_MósNŸify
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueNŸi_t
 *
pNŸi
 );

253 
Cy˛ög_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

258 #ifde‡
__˝lu•lus


	@../../Profiles/DevInfo/devinfoservice.c

43 
	~"bcomdef.h
"

44 
	~"OSAL.h
"

45 
	~"lökdb.h
"

46 
	~"©t.h
"

47 
	~"g©t.h
"

48 
	~"g©t_uuid.h
"

49 
	~"g©t_¥ofûe_uuid.h
"

50 
	~"g©t£rv≠p.h
"

52 
	~"devöfo£rvi˚.h
"

70 
CONST
 
uöt8
 
	gdevInfoSîvUUID
[
ATT_BT_UUID_SIZE
] =

72 
LO_UINT16
(
DEVINFO_SERV_UUID
), 
HI_UINT16
(DEVINFO_SERV_UUID)

76 
CONST
 
uöt8
 
	gdevInfoSy°emIdUUID
[
ATT_BT_UUID_SIZE
] =

78 
LO_UINT16
(
SYSTEM_ID_UUID
), 
HI_UINT16
(SYSTEM_ID_UUID)

82 
CONST
 
uöt8
 
	gdevInfoModñNumbîUUID
[
ATT_BT_UUID_SIZE
] =

84 
LO_UINT16
(
MODEL_NUMBER_UUID
), 
HI_UINT16
(MODEL_NUMBER_UUID)

88 
CONST
 
uöt8
 
	gdevInfoSîülNumbîUUID
[
ATT_BT_UUID_SIZE
] =

90 
LO_UINT16
(
SERIAL_NUMBER_UUID
), 
HI_UINT16
(SERIAL_NUMBER_UUID)

94 
CONST
 
uöt8
 
	gdevInfoFúmw¨eRevUUID
[
ATT_BT_UUID_SIZE
] =

96 
LO_UINT16
(
FIRMWARE_REV_UUID
), 
HI_UINT16
(FIRMWARE_REV_UUID)

100 
CONST
 
uöt8
 
	gdevInfoH¨dw¨eRevUUID
[
ATT_BT_UUID_SIZE
] =

102 
LO_UINT16
(
HARDWARE_REV_UUID
), 
HI_UINT16
(HARDWARE_REV_UUID)

106 
CONST
 
uöt8
 
	gdevInfoSo·w¨eRevUUID
[
ATT_BT_UUID_SIZE
] =

108 
LO_UINT16
(
SOFTWARE_REV_UUID
), 
HI_UINT16
(SOFTWARE_REV_UUID)

112 
CONST
 
uöt8
 
	gdevInfoM‰NameUUID
[
ATT_BT_UUID_SIZE
] =

114 
LO_UINT16
(
MANUFACTURER_NAME_UUID
), 
HI_UINT16
(MANUFACTURER_NAME_UUID)

118 
CONST
 
uöt8
 
	gdevInfo11073CîtUUID
[
ATT_BT_UUID_SIZE
] =

120 
LO_UINT16
(
IEEE_11073_CERT_DATA_UUID
), 
HI_UINT16
(IEEE_11073_CERT_DATA_UUID)

124 
CONST
 
uöt8
 
	gdevInfoP≈IdUUID
[
ATT_BT_UUID_SIZE
] =

126 
LO_UINT16
(
PNP_ID_UUID
), 
HI_UINT16
(PNP_ID_UUID)

147 
CONST
 
g©tAârTy≥_t
 
	gdevInfoSîvi˚
 = { 
ATT_BT_UUID_SIZE
, 
devInfoSîvUUID
 };

150 
uöt8
 
	gdevInfoSy°emIdPr›s
 = 
GATT_PROP_READ
;

151 
uöt8
 
	gdevInfoSy°emId
[
DEVINFO_SYSTEM_ID_LEN
] = {0, 0, 0, 0, 0, 0, 0, 0};

154 
uöt8
 
	gdevInfoModñNumbîPr›s
 = 
GATT_PROP_READ
;

155 c⁄° 
uöt8
 
	gdevInfoModñNumbî
[] = "Model Number";

158 
uöt8
 
	gdevInfoSîülNumbîPr›s
 = 
GATT_PROP_READ
;

159 c⁄° 
uöt8
 
	gdevInfoSîülNumbî
[] = "Serial Number";

162 
uöt8
 
	gdevInfoFúmw¨eRevPr›s
 = 
GATT_PROP_READ
;

163 c⁄° 
uöt8
 
	gdevInfoFúmw¨eRev
[] = "Firmware Revision";

166 
uöt8
 
	gdevInfoH¨dw¨eRevPr›s
 = 
GATT_PROP_READ
;

167 c⁄° 
uöt8
 
	gdevInfoH¨dw¨eRev
[] = "Hardware Revision";

170 
uöt8
 
	gdevInfoSo·w¨eRevPr›s
 = 
GATT_PROP_READ
;

171 c⁄° 
uöt8
 
	gdevInfoSo·w¨eRev
[] = "Software Revision";

174 
uöt8
 
	gdevInfoM‰NamePr›s
 = 
GATT_PROP_READ
;

175 c⁄° 
uöt8
 
	gdevInfoM‰Name
[] = "Manufacturer Name";

178 
uöt8
 
	gdevInfo11073CîtPr›s
 = 
GATT_PROP_READ
;

179 c⁄° 
uöt8
 
	gdevInfo11073Cît
[] =

181 
DEVINFO_11073_BODY_EXP
,

188 
uöt8
 
	gdevInfoP≈IdPr›s
 = 
GATT_PROP_READ
;

189 
uöt8
 
	gdevInfoP≈Id
[
DEVINFO_PNP_ID_LEN
] =

192 
LO_UINT16
(0x000D), 
HI_UINT16
(0x000D),

193 
LO_UINT16
(0x0000), 
HI_UINT16
(0x0000),

194 
LO_UINT16
(0x0110), 
HI_UINT16
(0x0110)

201 
g©tAâribuã_t
 
	gdevInfoAârTbl
[] =

205 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

206 
GATT_PERMIT_READ
,

208 (
uöt8
 *)&
devInfoSîvi˚


213 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

214 
GATT_PERMIT_READ
,

216 &
devInfoSy°emIdPr›s


221 { 
ATT_BT_UUID_SIZE
, 
devInfoSy°emIdUUID
 },

222 
GATT_PERMIT_READ
,

224 (
uöt8
 *Ë
devInfoSy°emId


229 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

230 
GATT_PERMIT_READ
,

232 &
devInfoModñNumbîPr›s


237 { 
ATT_BT_UUID_SIZE
, 
devInfoModñNumbîUUID
 },

238 
GATT_PERMIT_READ
,

240 (
uöt8
 *Ë
devInfoModñNumbî


245 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

246 
GATT_PERMIT_READ
,

248 &
devInfoSîülNumbîPr›s


253 { 
ATT_BT_UUID_SIZE
, 
devInfoSîülNumbîUUID
 },

254 
GATT_PERMIT_READ
,

256 (
uöt8
 *Ë
devInfoSîülNumbî


261 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

262 
GATT_PERMIT_READ
,

264 &
devInfoFúmw¨eRevPr›s


269 { 
ATT_BT_UUID_SIZE
, 
devInfoFúmw¨eRevUUID
 },

270 
GATT_PERMIT_READ
,

272 (
uöt8
 *Ë
devInfoFúmw¨eRev


277 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

278 
GATT_PERMIT_READ
,

280 &
devInfoH¨dw¨eRevPr›s


285 { 
ATT_BT_UUID_SIZE
, 
devInfoH¨dw¨eRevUUID
 },

286 
GATT_PERMIT_READ
,

288 (
uöt8
 *Ë
devInfoH¨dw¨eRev


293 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

294 
GATT_PERMIT_READ
,

296 &
devInfoSo·w¨eRevPr›s


301 { 
ATT_BT_UUID_SIZE
, 
devInfoSo·w¨eRevUUID
 },

302 
GATT_PERMIT_READ
,

304 (
uöt8
 *Ë
devInfoSo·w¨eRev


309 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

310 
GATT_PERMIT_READ
,

312 &
devInfoM‰NamePr›s


317 { 
ATT_BT_UUID_SIZE
, 
devInfoM‰NameUUID
 },

318 
GATT_PERMIT_READ
,

320 (
uöt8
 *Ë
devInfoM‰Name


325 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

326 
GATT_PERMIT_READ
,

328 &
devInfo11073CîtPr›s


333 { 
ATT_BT_UUID_SIZE
, 
devInfo11073CîtUUID
 },

334 
GATT_PERMIT_READ
,

336 (
uöt8
 *Ë
devInfo11073Cît


341 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

342 
GATT_PERMIT_READ
,

344 &
devInfoP≈IdPr›s


349 { 
ATT_BT_UUID_SIZE
, 
devInfoP≈IdUUID
 },

350 
GATT_PERMIT_READ
,

352 (
uöt8
 *Ë
devInfoP≈Id


360 
uöt8
 
devInfo_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

361 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

367 
CONST
 
g©tSîvi˚CBs_t
 
	gdevInfoCBs
 =

369 
devInfo_RódAârCB
,

370 
NULL
,

371 
NULL


390 
bSètus_t
 
	$DevInfo_AddSîvi˚
( )

393  
	`GATTSîvAµ_Regi°îSîvi˚
–
devInfoAârTbl
,

394 
	`GATT_NUM_ATTRS
–
devInfoAârTbl
 ),

395 &
devInfoCBs
 );

396 
	}
}

412 
bSètus_t
 
	$DevInfo_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 )

414 
bSètus_t
 
ªt
 = 
SUCCESS
;

416  
∑øm
 )

418 
DEVINFO_SYSTEM_ID
:

419 
	`oßl_mem˝y
(
devInfoSy°emId
, 
vÆue
, 
Àn
);

423 
ªt
 = 
INVALIDPARAMETER
;

427  ( 
ªt
 );

428 
	}
}

443 
bSètus_t
 
	$DevInfo_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

445 
bSètus_t
 
ªt
 = 
SUCCESS
;

447  
∑øm
 )

449 
DEVINFO_SYSTEM_ID
:

450 
	`oßl_mem˝y
(
vÆue
, 
devInfoSy°emId
, (devInfoSystemId));

453 
DEVINFO_MODEL_NUMBER
:

454 
	`oßl_mem˝y
(
vÆue
, 
devInfoModñNumbî
, (devInfoModelNumber));

456 
DEVINFO_SERIAL_NUMBER
:

457 
	`oßl_mem˝y
(
vÆue
, 
devInfoSîülNumbî
, (devInfoSerialNumber));

460 
DEVINFO_FIRMWARE_REV
:

461 
	`oßl_mem˝y
(
vÆue
, 
devInfoFúmw¨eRev
, (devInfoFirmwareRev));

464 
DEVINFO_HARDWARE_REV
:

465 
	`oßl_mem˝y
(
vÆue
, 
devInfoH¨dw¨eRev
, (devInfoHardwareRev));

468 
DEVINFO_SOFTWARE_REV
:

469 
	`oßl_mem˝y
(
vÆue
, 
devInfoSo·w¨eRev
, (devInfoSoftwareRev));

472 
DEVINFO_MANUFACTURER_NAME
:

473 
	`oßl_mem˝y
(
vÆue
, 
devInfoM‰Name
, (devInfoMfrName));

476 
DEVINFO_11073_CERT_DATA
:

477 
	`oßl_mem˝y
(
vÆue
, 
devInfo11073Cît
, (devInfo11073Cert));

480 
DEVINFO_PNP_ID
:

481 
	`oßl_mem˝y
(
vÆue
, 
devInfoP≈Id
, (devInfoPnpId));

485 
ªt
 = 
INVALIDPARAMETER
;

489  ( 
ªt
 );

490 
	}
}

506 
uöt8
 
	$devInfo_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

507 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

509 
bSètus_t
 
°©us
 = 
SUCCESS
;

510 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

512 
uuid
)

514 
SYSTEM_ID_UUID
:

516 i‡(
off£t
 >(
devInfoSy°emId
))

518 
°©us
 = 
ATT_ERR_INVALID_OFFSET
;

523 *
pLí
 = 
	`MIN
(
maxLí
, ((
devInfoSy°emId
Ë- 
off£t
));

526 
	`oßl_mem˝y
(
pVÆue
, &
devInfoSy°emId
[
off£t
], *
pLí
);

530 
MODEL_NUMBER_UUID
:

532 i‡(
off£t
 >((
devInfoModñNumbî
) - 1))

534 
°©us
 = 
ATT_ERR_INVALID_OFFSET
;

539 *
pLí
 = 
	`MIN
(
maxLí
, (((
devInfoModñNumbî
Ë- 1Ë- 
off£t
));

542 
	`oßl_mem˝y
(
pVÆue
, &
devInfoModñNumbî
[
off£t
], *
pLí
);

546 
SERIAL_NUMBER_UUID
:

548 i‡(
off£t
 >((
devInfoSîülNumbî
) - 1))

550 
°©us
 = 
ATT_ERR_INVALID_OFFSET
;

555 *
pLí
 = 
	`MIN
(
maxLí
, (((
devInfoSîülNumbî
Ë- 1Ë- 
off£t
));

558 
	`oßl_mem˝y
(
pVÆue
, &
devInfoSîülNumbî
[
off£t
], *
pLí
);

562 
FIRMWARE_REV_UUID
:

564 i‡(
off£t
 >((
devInfoFúmw¨eRev
) - 1))

566 
°©us
 = 
ATT_ERR_INVALID_OFFSET
;

571 *
pLí
 = 
	`MIN
(
maxLí
, (((
devInfoFúmw¨eRev
Ë- 1Ë- 
off£t
));

574 
	`oßl_mem˝y
(
pVÆue
, &
devInfoFúmw¨eRev
[
off£t
], *
pLí
);

578 
HARDWARE_REV_UUID
:

580 i‡(
off£t
 >((
devInfoH¨dw¨eRev
) - 1))

582 
°©us
 = 
ATT_ERR_INVALID_OFFSET
;

587 *
pLí
 = 
	`MIN
(
maxLí
, (((
devInfoH¨dw¨eRev
Ë- 1Ë- 
off£t
));

590 
	`oßl_mem˝y
(
pVÆue
, &
devInfoH¨dw¨eRev
[
off£t
], *
pLí
);

594 
SOFTWARE_REV_UUID
:

596 i‡(
off£t
 >((
devInfoSo·w¨eRev
) - 1))

598 
°©us
 = 
ATT_ERR_INVALID_OFFSET
;

603 *
pLí
 = 
	`MIN
(
maxLí
, (((
devInfoSo·w¨eRev
Ë- 1Ë- 
off£t
));

606 
	`oßl_mem˝y
(
pVÆue
, &
devInfoSo·w¨eRev
[
off£t
], *
pLí
);

610 
MANUFACTURER_NAME_UUID
:

612 i‡(
off£t
 >((
devInfoM‰Name
) - 1))

614 
°©us
 = 
ATT_ERR_INVALID_OFFSET
;

619 *
pLí
 = 
	`MIN
(
maxLí
, (((
devInfoM‰Name
Ë- 1Ë- 
off£t
));

622 
	`oßl_mem˝y
(
pVÆue
, &
devInfoM‰Name
[
off£t
], *
pLí
);

626 
IEEE_11073_CERT_DATA_UUID
:

628 i‡(
off£t
 >(
devInfo11073Cît
))

630 
°©us
 = 
ATT_ERR_INVALID_OFFSET
;

635 *
pLí
 = 
	`MIN
(
maxLí
, ((
devInfo11073Cît
Ë- 
off£t
));

638 
	`oßl_mem˝y
(
pVÆue
, &
devInfo11073Cît
[
off£t
], *
pLí
);

642 
PNP_ID_UUID
:

644 i‡(
off£t
 >(
devInfoP≈Id
))

646 
°©us
 = 
ATT_ERR_INVALID_OFFSET
;

651 *
pLí
 = 
	`MIN
(
maxLí
, ((
devInfoP≈Id
Ë- 
off£t
));

654 
	`oßl_mem˝y
(
pVÆue
, &
devInfoP≈Id
[
off£t
], *
pLí
);

659 *
pLí
 = 0;

660 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

664  ( 
°©us
 );

665 
	}
}

	@../../Profiles/DevInfo/devinfoservice.h

41 #i‚de‡
DEVINFOSERVICE_H


42 
	#DEVINFOSERVICE_H


	)

44 #ifde‡
__˝lu•lus


58 
	#DEVINFO_SYSTEM_ID
 0

	)

59 
	#DEVINFO_MODEL_NUMBER
 1

	)

60 
	#DEVINFO_SERIAL_NUMBER
 2

	)

61 
	#DEVINFO_FIRMWARE_REV
 3

	)

62 
	#DEVINFO_HARDWARE_REV
 4

	)

63 
	#DEVINFO_SOFTWARE_REV
 5

	)

64 
	#DEVINFO_MANUFACTURER_NAME
 6

	)

65 
	#DEVINFO_11073_CERT_DATA
 7

	)

66 
	#DEVINFO_PNP_ID
 8

	)

69 
	#DEVINFO_11073_BODY_EMPTY
 0

	)

70 
	#DEVINFO_11073_BODY_IEEE
 1

	)

71 
	#DEVINFO_11073_BODY_CONTINUA
 2

	)

72 
	#DEVINFO_11073_BODY_EXP
 254

	)

75 
	#DEVINFO_SYSTEM_ID_LEN
 8

	)

78 
	#DEVINFO_PNP_ID_LEN
 7

	)

103 
bSètus_t
 
DevInfo_AddSîvi˚
( );

119 
bSètus_t
 
DevInfo_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

130 
bSètus_t
 
DevInfo_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

135 #ifde‡
__˝lu•lus


	@../../Profiles/Glucose/glucservice.c

43 
	~"bcomdef.h
"

44 
	~"OSAL.h
"

45 
	~"lökdb.h
"

46 
	~"©t.h
"

47 
	~"g©t.h
"

48 
	~"g©t_uuid.h
"

49 
	~"g©t_¥ofûe_uuid.h
"

50 
	~"g©t£rv≠p.h
"

51 
	~"g≠b⁄dmgr.h
"

52 
	~"gluc£rvi˚.h
"

63 
	#GLUCOSE_MEAS_VALUE_POS
 2

	)

64 
	#GLUCOSE_MEAS_CONFIG_POS
 3

	)

65 
	#GLUCOSE_CONTEXT_VALUE_POS
 5

	)

66 
	#GLUCOSE_CONTEXT_CONFIG_POS
 6

	)

67 
	#GLUCOSE_CTL_PNT_VALUE_POS
 10

	)

68 
	#GLUCOSE_CTL_PNT_CONFIG_POS
 11

	)

79 
CONST
 
uöt8
 
	ggluco£SîvUUID
[
ATT_BT_UUID_SIZE
] =

81 
LO_UINT16
(
GLUCOSE_SERV_UUID
), 
HI_UINT16
(GLUCOSE_SERV_UUID)

85 
CONST
 
uöt8
 
	ggluco£MósUUID
[
ATT_BT_UUID_SIZE
] =

87 
LO_UINT16
(
GLUCOSE_MEAS_UUID
), 
HI_UINT16
(GLUCOSE_MEAS_UUID)

91 
CONST
 
uöt8
 
	ggluco£C⁄ãxtUUID
[
ATT_BT_UUID_SIZE
] =

93 
LO_UINT16
(
GLUCOSE_CONTEXT_UUID
), 
HI_UINT16
(GLUCOSE_CONTEXT_UUID)

97 
CONST
 
uöt8
 
	ggluco£FótuªUUID
[
ATT_BT_UUID_SIZE
] =

99 
LO_UINT16
(
GLUCOSE_FEATURE_UUID
), 
HI_UINT16
(GLUCOSE_FEATURE_UUID)

103 
CONST
 
uöt8
 
	gªc‹dC⁄åﬁPoötUUID
[
ATT_BT_UUID_SIZE
] =

105 
LO_UINT16
(
RECORD_CTRL_PT_UUID
), 
HI_UINT16
(RECORD_CTRL_PT_UUID)

113 
boﬁ
 
gluco£SídAŒRec‹ds
;

123 
gluco£Sîvi˚CB_t
 
	ggluco£Sîvi˚CB
;

130 
CONST
 
g©tAârTy≥_t
 
	ggluco£Sîvi˚
 = { 
ATT_BT_UUID_SIZE
, 
gluco£SîvUUID
 };

133 
uöt8
 
	ggluco£Pr›s
 = 
GATT_PROP_NOTIFY
;

134 
g©tCh¨Cfg_t
 
	ggluco£MósC⁄fig
[
GATT_MAX_NUM_CONN
];

135 
uöt8
 
	ggluco£Mós
 = 0;

138 
uöt8
 
	ggluco£C⁄ãxtPr›s
 = 
GATT_PROP_NOTIFY
;

139 
uöt8
 
	ggluco£C⁄ãxt
=0;

140 
g©tCh¨Cfg_t
 
	ggluco£C⁄ãxtC⁄fig
[
GATT_MAX_NUM_CONN
];

143 
uöt8
 
	ggluco£FótuªPr›s
 = 
GATT_PROP_READ
;

144 
uöt16
 
	ggluco£Fótuª
 = 
GLUCOSE_FEAT_ALL
;

147 
uöt8
 
	ggluco£C⁄åﬁPr›s
 = 
GATT_PROP_INDICATE
 | 
GATT_PROP_WRITE
;

148 
uöt8
 
	ggluco£C⁄åﬁ
=0;

149 
g©tCh¨Cfg_t
 
	ggluco£C⁄åﬁC⁄fig
[
GATT_MAX_NUM_CONN
];

155 
g©tAâribuã_t
 
	ggluco£AârTbl
[] =

159 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

160 
GATT_PERMIT_READ
,

162 (
uöt8
 *)&
gluco£Sîvi˚


167 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

168 
GATT_PERMIT_READ
,

170 &
gluco£Pr›s


175 { 
ATT_BT_UUID_SIZE
, 
gluco£MósUUID
 },

178 &
gluco£Mós


183 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

184 
GATT_PERMIT_READ
 | 
GATT_PERMIT_ENCRYPT_WRITE
,

186 (
uöt8
 *)&
gluco£MósC⁄fig


195 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

196 
GATT_PERMIT_READ
,

198 &
gluco£C⁄ãxtPr›s


203 { 
ATT_BT_UUID_SIZE
, 
gluco£C⁄ãxtUUID
 },

206 &
gluco£C⁄ãxt


211 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

212 
GATT_PERMIT_READ
 | 
GATT_PERMIT_ENCRYPT_WRITE
,

214 (
uöt8
 *)&
gluco£C⁄ãxtC⁄fig


223 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

224 
GATT_PERMIT_READ
,

226 &
gluco£FótuªPr›s


231 { 
ATT_BT_UUID_SIZE
, 
gluco£FótuªUUID
 },

232 
GATT_PERMIT_ENCRYPT_READ
,

234 (
uöt8
 *Ë&
gluco£Fótuª


243 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

244 
GATT_PERMIT_READ
,

246 &
gluco£C⁄åﬁPr›s


251 { 
ATT_BT_UUID_SIZE
, 
ªc‹dC⁄åﬁPoötUUID
 },

252 
GATT_PERMIT_AUTHEN_WRITE
,

254 &
gluco£C⁄åﬁ


259 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

260 
GATT_PERMIT_READ
 | 
GATT_PERMIT_ENCRYPT_WRITE
,

262 (
uöt8
 *)&
gluco£C⁄åﬁC⁄fig


269 
uöt8
 
gluco£_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

270 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

271 
bSètus_t
 
gluco£_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

272 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

274 
gluco£_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

280 
CONST
 
g©tSîvi˚CBs_t
 
	ggluco£CBs
 =

282 
gluco£_RódAârCB
,

283 
gluco£_WrôeAârCB
,

284 
NULL


303 
bSètus_t
 
	$Gluco£_AddSîvi˚
–
uöt32
 
£rvi˚s
 )

305 
uöt8
 
°©us
 = 
SUCCESS
;

308 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
gluco£MósC⁄fig
 );

309 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
gluco£C⁄ãxtC⁄fig
 );

310 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
gluco£C⁄åﬁC⁄fig
 );

313 
VOID
 
	`lökDB_Regi°î
–
gluco£_H™dÀC⁄nSètusCB
 );

315 i‡–
£rvi˚s
 & 
GLUCOSE_SERVICE
 )

318 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
gluco£AârTbl
, 
	`GATT_NUM_ATTRS
( glucoseAttrTbl ),

319 &
gluco£CBs
 );

321  ( 
°©us
 );

322 
	}
}

334 
	$Gluco£_Regi°î
–
gluco£Sîvi˚CB_t
 
p‚Sîvi˚CB
)

336 
gluco£Sîvi˚CB
 = 
p‚Sîvi˚CB
;

337 
	}
}

353 
bSètus_t
 
	$Gluco£_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 )

355 
bSètus_t
 
ªt
 = 
SUCCESS
;

356  
∑øm
 )

358 
GLUCOSE_FEATURE_PARAM
:

359 
gluco£Fótuª
 = *((
uöt16
*)
vÆue
);

363 
ªt
 = 
INVALIDPARAMETER
;

367  ( 
ªt
 );

368 
	}
}

383 
bSètus_t
 
	$Gluco£_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

385 
bSètus_t
 
ªt
 = 
SUCCESS
;

386  
∑øm
 )

388 
GLUCOSE_FEATURE_PARAM
:

389 *((
uöt16
*)
vÆue
Ë
gluco£Fótuª
;

393 
ªt
 = 
INVALIDPARAMETER
;

397  ( 
ªt
 );

398 
	}
}

410 
bSètus_t
 
	$Gluco£_MósSíd
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueNŸi_t
 *
pNŸi
, 
uöt8
 
èskId
 )

412 
uöt16
 
vÆue
 = 
	`GATTSîvAµ_RódCh¨Cfg
–
c⁄nH™dÀ
, 
gluco£MósC⁄fig
 );

415 i‡–
vÆue
 & 
GATT_CLIENT_CFG_NOTIFY
 )

418 
pNŸi
->
h™dÀ
 = 
gluco£AârTbl
[
GLUCOSE_MEAS_VALUE_POS
].handle;

421  
	`GATT_NŸifiˇti⁄
–
c⁄nH™dÀ
, 
pNŸi
, 
FALSE
 );

424  
bÀNŸRódy
;

425 
	}
}

438 
bSètus_t
 
	$Gluco£_C⁄ãxtSíd
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueNŸi_t
 *
pNŸi
, 
uöt8
 
èskId
 )

440 
uöt16
 
vÆue
 = 
	`GATTSîvAµ_RódCh¨Cfg
–
c⁄nH™dÀ
, 
gluco£C⁄ãxtC⁄fig
 );

443 i‡–
vÆue
 & 
GATT_CLIENT_CFG_NOTIFY
 )

446 
pNŸi
->
h™dÀ
 = 
gluco£AârTbl
[
GLUCOSE_CONTEXT_VALUE_POS
].handle;

449  
	`GATT_NŸifiˇti⁄
–
c⁄nH™dÀ
, 
pNŸi
, 
FALSE
 );

452  
bÀNŸRódy
;

453 
	}
}

466 
bSètus_t
 
	$Gluco£_CéP¡Indiˇã
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueInd_t
 *
pInd
, 
uöt8
 
èskId
 )

468 
uöt16
 
vÆue
 = 
	`GATTSîvAµ_RódCh¨Cfg
–
c⁄nH™dÀ
, 
gluco£C⁄åﬁC⁄fig
 );

471 i‡–
vÆue
 & 
GATT_CLIENT_CFG_INDICATE
 )

474 
pInd
->
h™dÀ
 = 
gluco£AârTbl
[
GLUCOSE_CTL_PNT_VALUE_POS
].handle;

477  
	`GATT_Indiˇti⁄
–
c⁄nH™dÀ
, 
pInd
, 
FALSE
, 
èskId
 );

480  
bÀNŸRódy
;

481 
	}
}

497 
uöt8
 
	$gluco£_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

498 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

500 
bSètus_t
 
°©us
 = 
SUCCESS
;

503 i‡–
off£t
 > 0 )

505  ( 
ATT_ERR_ATTR_NOT_LONG
 );

508 i‡–
pAâr
->
ty≥
.
Àn
 =
ATT_BT_UUID_SIZE
 )

511 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

512  
uuid
 )

517 
GLUCOSE_FEATURE_UUID
:

518 *
pLí
 = 2;

519 
pVÆue
[0] = 
	`LO_UINT16
–
gluco£Fótuª
 );

520 
pVÆue
[1] = 
	`HI_UINT16
–
gluco£Fótuª
 );

525 *
pLí
 = 0;

526 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

531  ( 
°©us
 );

532 
	}
}

547 
bSètus_t
 
	$gluco£_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

548 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

550 
bSètus_t
 
°©us
 = 
SUCCESS
;

553 i‡–
off£t
 > 0 )

555  ( 
ATT_ERR_ATTR_NOT_LONG
 );

558 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

560  
uuid
 )

563 
GATT_CLIENT_CHAR_CFG_UUID
:

565 i‡((
pAâr
->
h™dÀ
 =
gluco£AârTbl
[
GLUCOSE_MEAS_CONFIG_POS
].handle ||

566 
pAâr
->
h™dÀ
 =
gluco£AârTbl
[
GLUCOSE_CONTEXT_CONFIG_POS
].handle))

568 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

569 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

570 i‡–
°©us
 =
SUCCESS
 )

572 
uöt16
 
ch¨Cfg
 = 
	`BUILD_UINT16
–
pVÆue
[0],ÖValue[1] );

574 if(
pAâr
->
h™dÀ
 =
gluco£AârTbl
[
GLUCOSE_MEAS_CONFIG_POS
].handle)

576 (*
gluco£Sîvi˚CB
)((
ch¨Cfg
 =0Ë? 
GLUCOSE_MEAS_NTF_DISABLED
 :

577 
GLUCOSE_MEAS_NTF_ENABLED
, 
NULL
, NULL);

581 (*
gluco£Sîvi˚CB
)((
ch¨Cfg
 =0Ë? 
GLUCOSE_CONTEXT_NTF_DISABLED
 :

582 
GLUCOSE_CONTEXT_NTF_ENABLED
, 
NULL
, NULL);

587 i‡–
pAâr
->
h™dÀ
 =
gluco£AârTbl
[
GLUCOSE_CTL_PNT_CONFIG_POS
].handle )

589 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

590 
off£t
, 
GATT_CLIENT_CFG_INDICATE
 );

591 i‡–
°©us
 =
SUCCESS
 )

593 
uöt16
 
ch¨Cfg
 = 
	`BUILD_UINT16
–
pVÆue
[0],ÖValue[1] );

595 (*
gluco£Sîvi˚CB
)((
ch¨Cfg
 =0Ë? 
GLUCOSE_CTL_PNT_IND_DISABLED
 :

596 
GLUCOSE_CTL_PNT_IND_ENABLED
, 
NULL
, NULL);

601 
°©us
 = 
ATT_ERR_INVALID_VALUE
;

605 
RECORD_CTRL_PT_UUID
:

606 if(
Àn
 >
GLUCOSE_CTL_PNT_MIN_SIZE
 &&Üí <
GLUCOSE_CTL_PNT_MAX_SIZE
)

608 
uöt8
 
›code
 = 
pVÆue
[0];

611 i‡(
›code
 !
CTL_PNT_OP_ABORT
 && 
gluco£SídAŒRec‹ds
)

613 
°©us
 = 
GLUCOSE_ERR_IN_PROGRESS
;

616 i‡–
›code
 =
CTL_PNT_OP_REQ
 &&

617 !–
	`GATTSîvAµ_RódCh¨Cfg
–
c⁄nH™dÀ
, 
gluco£MósC⁄fig
 ) & 
GATT_CLIENT_CFG_NOTIFY
 ) )

619 
°©us
 = 
GLUCOSE_ERR_CCC_CONFIG
;

623 (*
gluco£Sîvi˚CB
)(
GLUCOSE_CTL_PNT_CMD
, 
pVÆue
, 
Àn
);

628 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

633 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

637  ( 
°©us
 );

638 
	}
}

650 
	$gluco£_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

653 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

656 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

657 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

658 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

660 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
gluco£MósC⁄fig
 );

661 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
gluco£C⁄ãxtC⁄fig
 );

662 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
gluco£C⁄åﬁC⁄fig
 );

665 
	}
}

	@../../Profiles/Glucose/glucservice.h

40 #i‚de‡
GLUCOSESERVICE_H


41 
	#GLUCOSESERVICE_H


	)

43 #ifde‡
__˝lu•lus


51 
	~"OSAL_˛ock.h
"

58 
	#GLUCOSE_FEATURE_PARAM
 3

	)

61 
	#GLUCOSE_CTL_PNT_MIN_SIZE
 2

	)

62 
	#GLUCOSE_CTL_PNT_MAX_SIZE
 20

	)

66 
	#GLUCOSE_MEAS_FLAG_TIME_OFFSET
 0x01

	)

67 
	#GLUCOSE_MEAS_FLAG_CONCENTRATION
 0x02

	)

68 
	#GLUCOSE_MEAS_FLAG_UNITS
 0x04

	)

69 
	#GLUCOSE_MEAS_FLAG_STATUS_ANNUNCIATION
 0x08

	)

70 
	#GLUCOSE_MEAS_FLAG_CONTEXT_INFO
 0x10

	)

72 
	#GLUCOSE_MEAS_FLAG_ALL
 (
GLUCOSE_MEAS_FLAG_TIME_OFFSET
 | 
GLUCOSE_MEAS_FLAG_CONCENTRATION
 | 
GLUCOSE_MEAS_FLAG_UNITS
 | 
GLUCOSE_MEAS_FLAG_STATUS_ANNUNCIATION
 | 
GLUCOSE_MEAS_FLAG_CONTEXT_INFO
)

	)

75 
	#GLUCOSE_TYPE_CAPILLARY_WHOLE
 0x1

	)

76 
	#GLUCOSE_TYPE_CAPILLARY_PLASMA
 0x2

	)

77 
	#GLUCOSE_TYPE_VENOUS_WHOLE
 0x3

	)

78 
	#GLUCOSE_TYPE_VENOUS_PLASMA
 0x4

	)

79 
	#GLUCOSE_TYPE_ARTERIAL_WHOLE
 0x5

	)

80 
	#GLUCOSE_TYPE_ARTERIAL_PLASMA
 0x6

	)

81 
	#GLUCOSE_TYPE_UNDETER_WHOLE
 0x7

	)

82 
	#GLUCOSE_TYPE_UNDETER_PLASMA
 0x8

	)

83 
	#GLUCOSE_TYPE_ISF
 0x9

	)

84 
	#GLUCOSE_TYPE_CONTROL
 0xA

	)

87 
	#GLUCOSE_LOCATION_FINGER
 0x10

	)

88 
	#GLUCOSE_LOCATION_AST
 0x20

	)

89 
	#GLUCOSE_LOCATION_EARLOBE
 0x30

	)

90 
	#GLUCOSE_LOCATION_CONTROL
 0x40

	)

91 
	#GLUCOSE_LOCATION_NOT_AVAIL
 0xF0

	)

94 
	#GLUCOSE_ANNUNCIATION_BATT_LOW
 0x0001

	)

95 
	#GLUCOSE_ANNUNCIATION_SENS_BAD
 0x0002

	)

96 
	#GLUCOSE_ANNUNCIATION_SAMP_SIZE
 0x0004

	)

97 
	#GLUCOSE_ANNUNCIATION_INSERT
 0x0008

	)

98 
	#GLUCOSE_ANNUNCIATION_STRIP
 0x0010

	)

99 
	#GLUCOSE_ANNUNCIATION_TOO_HIGH
 0x0020

	)

100 
	#GLUCOSE_ANNUNCIATION_TOO_LOW
 0x0040

	)

101 
	#GLUCOSE_ANNUNCIATION_TEMP_HIGH
 0x0080

	)

102 
	#GLUCOSE_ANNUNCIATION_TEMP_LOW
 0x0100

	)

103 
	#GLUCOSE_ANNUNCIATION_INTERRUPTED
 0x0200

	)

104 
	#GLUCOSE_ANNUNCIATION_GENERAL
 0x0400

	)

105 
	#GLUCOSE_ANNUNCIATION_TIME
 0x0800

	)

108 
	#GLUCOSE_CONTEXT_FLAG_CARBO
 0x01

	)

109 
	#GLUCOSE_CONTEXT_FLAG_MEAL
 0x02

	)

110 
	#GLUCOSE_CONTEXT_FLAG_TESTER_HEALTH
 0x04

	)

111 
	#GLUCOSE_CONTEXT_FLAG_EXERCISE
 0x08

	)

112 
	#GLUCOSE_CONTEXT_FLAG_MEDICATION
 0x10

	)

113 
	#GLUCOSE_CONTEXT_FLAG_MEDICATION_UNITS
 0x20

	)

114 
	#GLUCOSE_CONTEXT_FLAG_HbA1c
 0x40

	)

115 
	#GLUCOSE_CONTEXT_FLAG_EXTENDED
 0x80

	)

118 
	#GLUCOSE_CONTEXT_FLAG_ALL
 (
GLUCOSE_CONTEXT_FLAG_CARBO
 | 
GLUCOSE_CONTEXT_FLAG_MEAL
 | 
GLUCOSE_CONTEXT_FLAG_TESTER_HEALTH
 | 
GLUCOSE_CONTEXT_FLAG_EXERCISE
 | 
GLUCOSE_CONTEXT_FLAG_MEDICATION
 | 
GLUCOSE_CONTEXT_FLAG_MEDICATION_UNITS
 | 
GLUCOSE_CONTEXT_FLAG_HbA1c
)

	)

121 
	#GLUCOSE_CARBO_BREAKFAST
 0x01

	)

122 
	#GLUCOSE_CARBO_LUNCH
 0x02

	)

123 
	#GLUCOSE_CARBO_DINNER
 0x03

	)

124 
	#GLUCOSE_CARBO_SNACK
 0x04

	)

125 
	#GLUCOSE_CARBO_DRINK
 0x05

	)

126 
	#GLUCOSE_CARBO_SUPPER
 0x06

	)

127 
	#GLUCOSE_CARBO_BRUNCH
 0x07

	)

130 
	#GLUCOSE_MEAL_PREPRANDIAL
 0x1

	)

131 
	#GLUCOSE_MEAL_POSTPRANDIAL
 0x2

	)

132 
	#GLUCOSE_MEAL_FASTING
 0x3

	)

133 
	#GLUCOSE_MEAL_CASUAL
 0x4

	)

136 
	#GLUCOSE_TESTER_SELF
 0x1

	)

137 
	#GLUCOSE_TESTER_PROFESSIONAL
 0x2

	)

138 
	#GLUCOSE_TESTER_LAB_TEST
 0x3

	)

139 
	#GLUCOSE_TESTER_UNAVAILABLE
 0xF

	)

142 
	#GLUCOSE_HEALTH_MINOR
 0x10

	)

143 
	#GLUCOSE_HEALTH_MAJOR
 0x20

	)

144 
	#GLUCOSE_HEALTH_MENSES
 0x30

	)

145 
	#GLUCOSE_HEALTH_STRESS
 0x40

	)

146 
	#GLUCOSE_HEALTH_NONE
 0x50

	)

147 
	#GLUCOSE_HEALTH_UNAVAILABLE
 0xF0

	)

150 
	#GLUCOSE_MEDICATION_RAPID
 0x1

	)

151 
	#GLUCOSE_MEDICATION_SHORT
 0x2

	)

152 
	#GLUCOSE_MEDICATION_INTERMEDIATE
 0x3

	)

153 
	#GLUCOSE_MEDICATION_LONG
 0x4

	)

154 
	#GLUCOSE_MEDICATION_PRE_MIXED
 0x5

	)

157 
	#GLUCOSE_FEAT_LOW_BAT_SUP
 0x0001

	)

158 
	#GLUCOSE_FEAT_MALFUNC_SUP
 0x0002

	)

159 
	#GLUCOSE_FEAT_SAMPLE_SIZE_SUP
 0x0004

	)

160 
	#GLUCOSE_FEAT_INSERT_ERR_SUP
 0x0008

	)

161 
	#GLUCOSE_FEAT_TYPE_ERR_SUP
 0x0010

	)

162 
	#GLUCOSE_FEAT_RESULT_DET_SUP
 0x0020

	)

163 
	#GLUCOSE_FEAT_TEMP_DET_SUP
 0x0040

	)

164 
	#GLUCOSE_FEAT_READ_INT_SUP
 0x0080

	)

165 
	#GLUCOSE_FEAT_GENERAL_FAULT_SUP
 0x0100

	)

166 
	#GLUCOSE_FEAT_TIME_FAULT_SUP
 0x0200

	)

167 
	#GLUCOSE_FEAT_MULTIPLE_BOND_SUP
 0x0400

	)

169 
	#GLUCOSE_FEAT_ALL
 (
GLUCOSE_FEAT_LOW_BAT_SUP
 | 
GLUCOSE_FEAT_MALFUNC_SUP
 | 
GLUCOSE_FEAT_SAMPLE_SIZE_SUP
 | \

170 
GLUCOSE_FEAT_INSERT_ERR_SUP
 | 
GLUCOSE_FEAT_TYPE_ERR_SUP
 | 
GLUCOSE_FEAT_RESULT_DET_SUP
 | \

171 
GLUCOSE_FEAT_TEMP_DET_SUP
 | 
GLUCOSE_FEAT_READ_INT_SUP
 | 
GLUCOSE_FEAT_GENERAL_FAULT_SUP
 | \

172 
GLUCOSE_FEAT_TIME_FAULT_SUP
 | 
GLUCOSE_FEAT_MULTIPLE_BOND_SUP
)

	)

175 
	#GLUCOSE_SERVICE
 0x00000001

	)

178 
	#CTL_PNT_OP_REQ
 0x01

	)

179 
	#CTL_PNT_OP_CLR
 0x02

	)

180 
	#CTL_PNT_OP_ABORT
 0x03

	)

181 
	#CTL_PNT_OP_GET_NUM
 0x04

	)

182 
	#CTL_PNT_OP_NUM_RSP
 0x05

	)

183 
	#CTL_PNT_OP_REQ_RSP
 0x06

	)

186 
	#CTL_PNT_OPER_NULL
 0x00

	)

187 
	#CTL_PNT_OPER_ALL
 0x01

	)

188 
	#CTL_PNT_OPER_LESS_EQUAL
 0x02

	)

189 
	#CTL_PNT_OPER_GREATER_EQUAL
 0x03

	)

190 
	#CTL_PNT_OPER_RANGE
 0x04

	)

191 
	#CTL_PNT_OPER_FIRST
 0x05

	)

192 
	#CTL_PNT_OPER_LAST
 0x06

	)

195 
	#CTL_PNT_RSP_SUCCESS
 0x01

	)

196 
	#CTL_PNT_RSP_OPCODE_NOT_SUPPORTED
 0x02

	)

197 
	#CTL_PNT_RSP_OPER_INVALID
 0x03

	)

198 
	#CTL_PNT_RSP_OPER_NOT_SUPPORTED
 0x04

	)

199 
	#CTL_PNT_RSP_OPERAND_INVALID
 0x05

	)

200 
	#CTL_PNT_RSP_NO_RECORDS
 0x06

	)

201 
	#CTL_PNT_RSP_ABORT_FAILED
 0x07

	)

202 
	#CTL_PNT_RSP_PROC_NOT_CMPL
 0x08

	)

203 
	#CTL_PNT_RSP_FILTER_NOT_SUPPORTED
 0x09

	)

206 
	#CTL_PNT_FILTER_SEQNUM
 0x01

	)

207 
	#CTL_PNT_FILTER_TIME
 0x02

	)

210 
	#GLUCOSE_MEAS_NTF_ENABLED
 1

	)

211 
	#GLUCOSE_MEAS_NTF_DISABLED
 2

	)

212 
	#GLUCOSE_CONTEXT_NTF_ENABLED
 3

	)

213 
	#GLUCOSE_CONTEXT_NTF_DISABLED
 4

	)

214 
	#GLUCOSE_CTL_PNT_IND_ENABLED
 5

	)

215 
	#GLUCOSE_CTL_PNT_IND_DISABLED
 6

	)

216 
	#GLUCOSE_CTL_PNT_CMD
 7

	)

219 
	#GLUCOSE_PROCEDURE_TIMEOUT
 30000

	)

222 
	#GLUCOSE_ERR_IN_PROGRESS
 0x80

	)

223 
	#GLUCOSE_ERR_CCC_CONFIG
 0x81

	)

230 (*
gluco£Sîvi˚CB_t
)(
	tuöt8
 
	tevít
, uöt8* 
	td©a
, uöt8 
	td©aLí
);

252 
bSètus_t
 
Gluco£_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

261 
Gluco£_Regi°î
–
gluco£Sîvi˚CB_t
 
p‚Sîvi˚CB
);

273 
bSètus_t
 
Gluco£_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

284 
bSètus_t
 
Gluco£_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

296 
bSètus_t
 
Gluco£_MósSíd
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueNŸi_t
 *
pNŸi
, 
uöt8
 
èskId
 );

308 
bSètus_t
 
Gluco£_C⁄ãxtSíd
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueNŸi_t
 *
pNŸi
, 
uöt8
 
èskId
 );

321 
bSètus_t
 
Gluco£_CéP¡Indiˇã
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueInd_t
 *
pInd
, 
uöt8
 
èskId
 );

327 #ifde‡
__˝lu•lus


	@../../Profiles/HIDDev/hiddev.c

46 
	~"bcomdef.h
"

47 
	~"OSAL.h
"

48 
	~"OnBﬂrd.h
"

49 
	~"g©t.h
"

50 
	~"hci.h
"

51 
	~"g≠g©t£rvî.h
"

52 
	~"g©t£rv≠p.h
"

53 
	~"g©t_uuid.h
"

54 
	~"g©t_¥ofûe_uuid.h
"

55 
	~"lökdb.h
"

56 
	~"≥rùhîÆ.h
"

57 
	~"g≠b⁄dmgr.h
"

58 
	~"devöfo£rvi˚.h
"

59 
	~"b©t£rvi˚.h
"

60 
	~"sˇ≈¨am£rvi˚.h
"

61 
	~"hiddev.h
"

68 
	#DEFAULT_BATT_PERIOD
 15000

	)

71 
	#DEFAULT_SCAN_PARAM_NOTIFY_TEST
 
TRUE


	)

74 
	#HID_INITIAL_ADV_INT_MIN
 48

	)

75 
	#HID_INITIAL_ADV_INT_MAX
 80

	)

76 
	#HID_HIGH_ADV_INT_MIN
 32

	)

77 
	#HID_HIGH_ADV_INT_MAX
 48

	)

78 
	#HID_LOW_ADV_INT_MIN
 1600

	)

79 
	#HID_LOW_ADV_INT_MAX
 1600

	)

82 
	#HID_INITIAL_ADV_TIMEOUT
 60

	)

83 
	#HID_HIGH_ADV_TIMEOUT
 5

	)

84 
	#HID_LOW_ADV_TIMEOUT
 0

	)

87 
	#START_DEVICE_EVT
 0x0001

	)

88 
	#BATT_PERIODIC_EVT
 0x0002

	)

89 
	#HID_IDLE_EVT
 0x0004

	)

90 
	#HID_SEND_REPORT_EVT
 0x0008

	)

92 
	#ªp‹tQEm±y
(Ë–
fú°QIdx
 =
œ°QIdx
 )

	)

98 
	#HID_DEV_DATA_LEN
 8

	)

100 #ifde‡
HID_DEV_RPT_QUEUE_LEN


101 
	#HID_DEV_REPORT_Q_SIZE
 (
HID_DEV_RPT_QUEUE_LEN
+1)

	)

103 
	#HID_DEV_REPORT_Q_SIZE
 (10+1)

	)

112 
uöt8
 
	mid
;

113 
uöt8
 
	mty≥
;

114 
uöt8
 
	mÀn
;

115 
uöt8
 
	md©a
[
HID_DEV_DATA_LEN
];

116 } 
	thidDevRï‹t_t
;

123 
uöt8
 
	ghidDevTaskId
;

138 
g≠rﬁe_Sèãs_t
 
	ghidDevG≠Sèã
 = 
GAPROLE_INIT
;

141 
uöt8
 
	ghidDevC⁄nSecuª
 = 
FALSE
;

144 
uöt16
 
	gg≠C⁄nH™dÀ
;

147 
uöt8
 
	ghidDevPaúögSèπed
 = 
FALSE
;

150 
uöt8
 
	g∑úögSètus
 = 
SUCCESS
;

152 
hidR±M≠_t
 *
	gpHidDevR±Tbl
;

154 
uöt8
 
	ghidDevR±TblLí
;

156 
hidDevCB_t
 *
	gpHidDevCB
;

158 
hidDevCfg_t
 *
	gpHidDevCfg
;

161 
uöt8
 
	gupd©eC⁄nP¨ams
 = 
TRUE
;

164 
uöt8
 
	gfú°QIdx
 = 0;

165 
uöt8
 
	gœ°QIdx
 = 0;

166 
hidDevRï‹t_t
 
	ghidDevRï‹tQ
[
HID_DEV_REPORT_Q_SIZE
];

169 
©tH™dÀVÆueNŸi_t
 
	gœ°NŸi
 = { 0 };

175 
hidDev_Pro˚ssOSALMsg
–
oßl_evít_hdr_t
 *
pMsg
 );

176 
hidDevPro˚ssG©tMsg
–
g©tMsgEvít_t
 *
pMsg
 );

177 
hidDevDisc⁄√˘ed
( );

178 
hidDevG≠SèãCB
–
g≠rﬁe_Sèãs_t
 
√wSèã
 );

179 
hidDevPaúSèãCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
°©e
, uöt8 
°©us
 );

180 
hidDevPasscodeCB
–
uöt8
 *
devi˚Addr
, 
uöt16
 
c⁄√˘i⁄H™dÀ
,

181 
uöt8
 
uiI≈uts
, uöt8 
uiOuçuts
 );

182 
hidDevB©tCB
–
uöt8
 
evít
 );

183 
hidDevSˇnP¨amCB
–
uöt8
 
evít
 );

184 
hidDevB©tPîiodicTask
( );

185 
hidR±M≠_t
 *
hidDevR±ByH™dÀ
–
uöt16
 
h™dÀ
 );

186 
hidR±M≠_t
 *
hidDevR±ById
–
uöt8
 
id
, uöt8 
ty≥
 );

187 
hidR±M≠_t
 *
hidDevR±ByCccdH™dÀ
–
uöt16
 
h™dÀ
 );

188 
hidDevEnqueueRï‹t
–
uöt8
 
id
, uöt8 
ty≥
, uöt8 
Àn
, uöt8 *
pD©a
 );

189 
hidDevRï‹t_t
 *
hidDevDequeueRï‹t
( );

190 
hidDevSídRï‹t
–
uöt8
 
id
, uöt8 
ty≥
, uöt8 
Àn
, uöt8 *
pD©a
 );

191 
hidDevHighAdvîtisög
( );

192 
hidDevLowAdvîtisög
( );

193 
hidDevInôülAdvîtisög
( );

194 
uöt8
 
hidDevB⁄dCou¡
( );

195 
hidDevSèπIdÀTimî
( );

196 
hidDevSt›IdÀTimî
( );

203 
g≠RﬁesCBs_t
 
	ghidDev_PîùhîÆCBs
 =

205 
hidDevG≠SèãCB
,

206 
NULL


210 c⁄° 
g≠B⁄dCBs_t
 
	ghidDevB⁄dCB
 =

212 
hidDevPasscodeCB
,

213 
hidDevPaúSèãCB


234 
	$HidDev_Inô
–
uöt8
 
èsk_id
 )

236 
hidDevTaskId
 = 
èsk_id
;

240 
uöt8
 
syncWL
 = 
TRUE
;

246 
VOID
 
	`GAPB⁄dMgr_SëP¨amëî
–
GAPBOND_AUTO_SYNC_WL
, –
uöt8
 ), &
syncWL
 );

250 
	`GGS_AddSîvi˚
–
GATT_ALL_SERVICES
 );

251 
	`GATTSîvAµ_AddSîvi˚
–
GATT_ALL_SERVICES
 );

252 
	`DevInfo_AddSîvi˚
( );

253 
	`B©t_AddSîvi˚
( );

254 
	`SˇnP¨am_AddSîvi˚
( );

257 
	`B©t_Regi°î
–
hidDevB©tCB
 );

260 
	`SˇnP¨am_Regi°î
–
hidDevSˇnP¨amCB
 );

263 
	`oßl_£t_evít
–
hidDevTaskId
, 
START_DEVICE_EVT
 );

264 
	}
}

279 
uöt16
 
	$HidDev_Pro˚ssEvít
–
uöt8
 
èsk_id
, 
uöt16
 
evíts
 )

282 
VOID
 
èsk_id
;

284 i‡–
evíts
 & 
SYS_EVENT_MSG
 )

286 
uöt8
 *
pMsg
;

288 i‡–(
pMsg
 = 
	`oßl_msg_ª˚ive
–
hidDevTaskId
 )Ë!
NULL
 )

290 
	`hidDev_Pro˚ssOSALMsg
–(
oßl_evít_hdr_t
 *)
pMsg
 );

293 
VOID
 
	`oßl_msg_dóŒoˇã
–
pMsg
 );

297  (
evíts
 ^ 
SYS_EVENT_MSG
);

300 i‡–
evíts
 & 
START_DEVICE_EVT
 )

303 
VOID
 
	`GAPRﬁe_SèπDevi˚
–&
hidDev_PîùhîÆCBs
 );

306 
	`GAPB⁄dMgr_Regi°î
–(
g≠B⁄dCBs_t
 *Ë&
hidDevB⁄dCB
 );

308  ( 
evíts
 ^ 
START_DEVICE_EVT
 );

311 i‡–
evíts
 & 
HID_IDLE_EVT
 )

313 i‡–
hidDevG≠Sèã
 =
GAPROLE_CONNECTED
 )

316 i‡–
hidDevPaúögSèπed
 )

318 
	`hidDevSèπIdÀTimî
();

323 
	`GAPRﬁe_Tîmö©eC⁄√˘i⁄
();

327  ( 
evíts
 ^ 
HID_IDLE_EVT
 );

330 i‡–
evíts
 & 
BATT_PERIODIC_EVT
 )

333 
	`hidDevB©tPîiodicTask
();

335  ( 
evíts
 ^ 
BATT_PERIODIC_EVT
 );

338 i‡–
evíts
 & 
HID_SEND_REPORT_EVT
 )

341 i‡–
hidDevC⁄nSecuª
 )

343 
hidDevRï‹t_t
 *
pRï‹t
 = 
	`hidDevDequeueRï‹t
();

345 i‡–
pRï‹t
 !
NULL
 )

348 
	`hidDevSídRï‹t
–
pRï‹t
->
id
,ÖRï‹t->
ty≥
,ÖRï‹t->
Àn
,ÖRï‹t->
d©a
 );

351  ( 
	`ªp‹tQEm±y
(Ë? 
evíts
 ^ 
HID_SEND_REPORT_EVT
 :Évents );

354  ( 
evíts
 ^ 
HID_SEND_REPORT_EVT
 );

358 
	}
}

370 
	$HidDev_Regi°î
–
hidDevCfg_t
 *
pCfg
, 
hidDevCB_t
 *
pCBs
 )

372 
pHidDevCB
 = 
pCBs
;

373 
pHidDevCfg
 = 
pCfg
;

374 
	}
}

386 
	$HidDev_Regi°îRï‹ts
–
uöt8
 
numRï‹ts
, 
hidR±M≠_t
 *
pR±
 )

388 
pHidDevR±Tbl
 = 
pR±
;

389 
hidDevR±TblLí
 = 
numRï‹ts
;

390 
	}
}

404 
	$HidDev_Rï‹t
–
uöt8
 
id
, uöt8 
ty≥
, uöt8 
Àn
, uöt8*
pD©a
 )

407 i‡–
hidDevG≠Sèã
 =
GAPROLE_CONNECTED
 )

410 i‡–
hidDevC⁄nSecuª
 )

413 i‡–
	`ªp‹tQEm±y
() )

416 
	`hidDevSídRï‹t
–
id
, 
ty≥
, 
Àn
, 
pD©a
 );

423 i‡–
hidDevG≠Sèã
 !
GAPROLE_ADVERTISING
 )

426 i‡–
	`hidDevB⁄dCou¡
() > 0 )

429 
	`hidDevHighAdvîtisög
();

435 
	`hidDevInôülAdvîtisög
();

440 
	`hidDevEnqueueRï‹t
–
id
, 
ty≥
, 
Àn
, 
pD©a
 );

441 
	}
}

450 
	$HidDev_Clo£
( )

452 
uöt8
 
∑øm
;

455 i‡–
hidDevG≠Sèã
 =
GAPROLE_CONNECTED
 )

457 
	`GAPRﬁe_Tîmö©eC⁄√˘i⁄
();

462 
∑øm
 = 
FALSE
;

463 
	`GAPRﬁe_SëP¨amëî
–
GAPROLE_ADVERT_ENABLED
, –
uöt8
 ), &
∑øm
 );

465 
	}
}

481 
bSètus_t
 
	$HidDev_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
pVÆue
 )

483 
bSètus_t
 
ªt
 = 
SUCCESS
;

485  
∑øm
 )

487 
HIDDEV_ERASE_ALLBONDS
:

488 i‡–
Àn
 == 0 )

491 i‡–
	`oßl_isbuf£t
–
œ°NŸi
.
vÆue
, 0x00,Üa°NŸi.
Àn
 ) =
FALSE
 )

495 
	`oßl_mem£t
–
œ°NŸi
.
vÆue
, 0x00,Üa°NŸi.
Àn
 );

497 
	`GATT_NŸifiˇti⁄
–
g≠C⁄nH™dÀ
, &
œ°NŸi
, 
FALSE
 );

501 i‡–
hidDevG≠Sèã
 =
GAPROLE_CONNECTED
 )

503 
	`GAPRﬁe_Tîmö©eC⁄√˘i⁄
();

507 
fú°QIdx
 = 
œ°QIdx
 = 0;

510 
	`GAPB⁄dMgr_SëP¨amëî
–
GAPBOND_ERASE_ALLBONDS
, 0, 
NULL
 );

514 
ªt
 = 
bÀInvÆidR™ge
;

519 
ªt
 = 
INVALIDPARAMETER
;

523  ( 
ªt
 );

524 
	}
}

539 
bSètus_t
 
	$HidDev_GëP¨amëî
–
uöt8
 
∑øm
, *
pVÆue
 )

541 
bSètus_t
 
ªt
 = 
SUCCESS
;

543  
∑øm
 )

547 
ªt
 = 
INVALIDPARAMETER
;

551  ( 
ªt
 );

552 
	}
}

565 
	$HidDev_PasscodeR•
–
uöt8
 
°©us
, 
uöt32
 
∑sscode
 )

568 
	`GAPB⁄dMgr_PasscodeR•
–
g≠C⁄nH™dÀ
, 
°©us
, 
∑sscode
 );

569 
	}
}

585 
uöt8
 
	$HidDev_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

586 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

588 
bSètus_t
 
°©us
 = 
SUCCESS
;

589 
hidR±M≠_t
 *
pR±
;

591 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

594 i‡–
off£t
 > 0 && 
uuid
 !
REPORT_MAP_UUID
 )

596  ( 
ATT_ERR_ATTR_NOT_LONG
 );

599 i‡–
uuid
 =
REPORT_UUID
 ||

600 
uuid
 =
BOOT_KEY_INPUT_UUID
 ||

601 
uuid
 =
BOOT_KEY_OUTPUT_UUID
 ||

602 
uuid
 =
BOOT_MOUSE_INPUT_UUID
 )

605 i‡–(
pR±
 = 
	`hidDevR±ByH™dÀ
(
pAâr
->
h™dÀ
)Ë!
NULL
 )

608 
°©us
 = (*
pHidDevCB
->
ªp‹tCB
)–
pR±
->
id
,ÖR±->
ty≥
, 
uuid
,

609 
HID_DEV_OPER_READ
, 
pLí
, 
pVÆue
 );

613 *
pLí
 = 0;

616 i‡–
uuid
 =
REPORT_MAP_UUID
 )

619 i‡–
off£t
 >
hidRï‹tM≠Lí
 )

621 
°©us
 = 
ATT_ERR_INVALID_OFFSET
;

626 *
pLí
 = 
	`MIN
–
maxLí
, (
hidRï‹tM≠Lí
 - 
off£t
) );

629 
	`oßl_mem˝y
–
pVÆue
, 
pAâr
->pVÆuê+ 
off£t
, *
pLí
 );

632 i‡–
uuid
 =
HID_INFORMATION_UUID
 )

634 *
pLí
 = 
HID_INFORMATION_LEN
;

635 
	`oßl_mem˝y
–
pVÆue
, 
pAâr
->pVÆue, 
HID_INFORMATION_LEN
 );

637 i‡–
uuid
 =
GATT_REPORT_REF_UUID
 )

639 *
pLí
 = 
HID_REPORT_REF_LEN
;

640 
	`oßl_mem˝y
–
pVÆue
, 
pAâr
->pVÆue, 
HID_REPORT_REF_LEN
 );

642 i‡–
uuid
 =
PROTOCOL_MODE_UUID
 )

644 *
pLí
 = 
HID_PROTOCOL_MODE_LEN
;

645 
pVÆue
[0] = 
pAâr
->pValue[0];

647 i‡–
uuid
 =
GATT_EXT_REPORT_REF_UUID
 )

649 *
pLí
 = 
HID_EXT_REPORT_REF_LEN
;

650 
	`oßl_mem˝y
–
pVÆue
, 
pAâr
->pVÆue, 
HID_EXT_REPORT_REF_LEN
 );

654 i‡–
°©us
 =
SUCCESS
 )

656 
	`hidDevSèπIdÀTimî
();

659  ( 
°©us
 );

660 
	}
}

675 
bSètus_t
 
	$HidDev_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

676 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

678 
bSètus_t
 
°©us
 = 
SUCCESS
;

679 
hidR±M≠_t
 *
pR±
;

682 i‡–
off£t
 > 0 )

684  ( 
ATT_ERR_ATTR_NOT_LONG
 );

687 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

689 i‡–
uuid
 =
REPORT_UUID
 ||

690 
uuid
 =
BOOT_KEY_OUTPUT_UUID
 )

693 i‡((
pR±
 = 
	`hidDevR±ByH™dÀ
(
pAâr
->
h™dÀ
)Ë!
NULL
)

696 
°©us
 = (*
pHidDevCB
->
ªp‹tCB
)–
pR±
->
id
,ÖR±->
ty≥
, 
uuid
,

697 
HID_DEV_OPER_WRITE
, &
Àn
, 
pVÆue
 );

700 i‡–
uuid
 =
HID_CTRL_PT_UUID
 )

703 i‡–
Àn
 == 1 )

705 i‡–
pVÆue
[0] =
HID_CMD_SUSPEND
 ||ÖVÆue[0] =
HID_CMD_EXIT_SUSPEND
 )

708 (*
pHidDevCB
->
evtCB
)–(
pVÆue
[0] =
HID_CMD_SUSPEND
) ?

709 
HID_DEV_SUSPEND_EVT
 : 
HID_DEV_EXIT_SUSPEND_EVT
 );

713 
°©us
 = 
ATT_ERR_INVALID_VALUE
;

718 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

721 i‡–
uuid
 =
GATT_CLIENT_CHAR_CFG_UUID
 )

723 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

724 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

725 i‡–
°©us
 =
SUCCESS
 )

727 
uöt16
 
ch¨Cfg
 = 
	`BUILD_UINT16
–
pVÆue
[0],ÖValue[1] );

730 i‡–(
pR±
 = 
	`hidDevR±ByCccdH™dÀ
(
pAâr
->
h™dÀ
)Ë!
NULL
 )

733 (*
pHidDevCB
->
ªp‹tCB
)–
pR±
->
id
,ÖR±->
ty≥
, 
uuid
,

734 (
ch¨Cfg
 =
GATT_CLIENT_CFG_NOTIFY
) ?

735 
HID_DEV_OPER_ENABLE
 : 
HID_DEV_OPER_DISABLE
,

736 &
Àn
, 
pVÆue
 );

740 i‡–
uuid
 =
PROTOCOL_MODE_UUID
 )

742 i‡–
Àn
 =
HID_PROTOCOL_MODE_LEN
 )

744 i‡–
pVÆue
[0] =
HID_PROTOCOL_MODE_BOOT
 ||

745 
pVÆue
[0] =
HID_PROTOCOL_MODE_REPORT
 )

747 
pAâr
->
pVÆue
[0] =ÖValue[0];

750 (*
pHidDevCB
->
evtCB
)–(
pVÆue
[0] =
HID_PROTOCOL_MODE_BOOT
) ?

751 
HID_DEV_SET_BOOT_EVT
 : 
HID_DEV_SET_REPORT_EVT
 );

755 
°©us
 = 
ATT_ERR_INVALID_VALUE
;

760 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

765 i‡(
°©us
 =
SUCCESS
)

767 
	`hidDevSèπIdÀTimî
();

770  ( 
°©us
 );

771 
	}
}

782 
	$hidDev_Pro˚ssOSALMsg
–
oßl_evít_hdr_t
 *
pMsg
 )

784  
pMsg
->
evít
 )

786 
GATT_MSG_EVENT
:

787 
	`hidDevPro˚ssG©tMsg
–(
g©tMsgEvít_t
 *Ë
pMsg
 );

793 
	}
}

802 
	$hidDevPro˚ssG©tMsg
–
g©tMsgEvít_t
 *
pMsg
 )

805 
	}
}

817 
	$hidDevH™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

819 
uöt8
 
i
;

820 
hidR±M≠_t
 *
p
 = 
pHidDevR±Tbl
;

821 
uöt16
 
ªtH™dÀ
;

822 
g©tAâribuã_t
 *
pAâr
;

825 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

827 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

828 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

829 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

831  
i
 = 
hidDevR±TblLí
; i > 0; i--, 
p
++ )

833 i‡–
p
->
cccdH™dÀ
 != 0 )

835 i‡–(
pAâr
 = 
	`GATT_FödH™dÀ
(
p
->
cccdH™dÀ
, &
ªtH™dÀ
)Ë!
NULL
 )

837 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, (
g©tCh¨Cfg_t
 *Ë
pAâr
->
pVÆue
 );

843 
	}
}

852 
	$hidDevDisc⁄√˘ed
( )

855 
	`hidDevSt›IdÀTimî
();

858 
	`B©t_H™dÀC⁄nSètusCB
–
g≠C⁄nH™dÀ
, 
LINKDB_STATUS_UPDATE_REMOVED
 );

859 
	`SˇnP¨am_H™dÀC⁄nSètusCB
–
g≠C⁄nH™dÀ
, 
LINKDB_STATUS_UPDATE_REMOVED
 );

860 
	`hidDevH™dÀC⁄nSètusCB
–
g≠C⁄nH™dÀ
, 
LINKDB_STATUS_UPDATE_REMOVED
 );

863 
hidDevC⁄nSecuª
 = 
FALSE
;

864 
hidPrŸocﬁMode
 = 
HID_PROTOCOL_MODE_REPORT
;

865 
hidDevPaúögSèπed
 = 
FALSE
;

868 
	`oßl_mem£t
–&
œ°NŸi
, 0, –
©tH™dÀVÆueNŸi_t
 ) );

871 i‡––
	`hidDevB⁄dCou¡
() > 0 ) &&

872 –
pHidDevCfg
->
hidFœgs
 & 
HID_FLAGS_NORMALLY_CONNECTABLE
 ) )

874 
	`hidDevLowAdvîtisög
();

876 
	}
}

887 
	$hidDevG≠SèãCB
–
g≠rﬁe_Sèãs_t
 
√wSèã
 )

890 i‡–
√wSèã
 =
GAPROLE_CONNECTED
 )

893 
	`GAPRﬁe_GëP¨amëî
–
GAPROLE_CONNHANDLE
, &
g≠C⁄nH™dÀ
 );

896 
hidDevC⁄nSecuª
 = 
FALSE
;

899 
uöt8
 
∑øm
 = 
FALSE
;

900 
	`GAPRﬁe_SëP¨amëî
–
GAPROLE_ADVERT_ENABLED
, –
uöt8
 ), &
∑øm
 );

903 
	`hidDevSèπIdÀTimî
();

906 i‡–
hidDevG≠Sèã
 =
GAPROLE_CONNECTED
 &&

907 
√wSèã
 !
GAPROLE_CONNECTED
 )

909 
	`hidDevDisc⁄√˘ed
();

910 
upd©eC⁄nP¨ams
 = 
TRUE
;

912 i‡–
∑úögSètus
 =
SMP_PAIRING_FAILED_CONFIRM_VALUE
 )

915 
	`hidDevInôülAdvîtisög
();

917 
∑úögSètus
 = 
SUCCESS
;

921 i‡–
√wSèã
 =
GAPROLE_STARTED
 )

926 
hidDevG≠Sèã
 = 
√wSèã
;

927 
	}
}

936 
	$hidDevPaúSèãCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
°©e
, uöt8 
°©us
 )

938 i‡–
°©e
 =
GAPBOND_PAIRING_STATE_STARTED
 )

940 
hidDevPaúögSèπed
 = 
TRUE
;

942 i‡–
°©e
 =
GAPBOND_PAIRING_STATE_COMPLETE
 )

944 
hidDevPaúögSèπed
 = 
FALSE
;

946 i‡–
°©us
 =
SUCCESS
 )

948 
hidDevC⁄nSecuª
 = 
TRUE
;

951 
∑úögSètus
 = 
°©us
;

953 i‡–
°©e
 =
GAPBOND_PAIRING_STATE_BONDED
 )

955 i‡–
°©us
 =
SUCCESS
 )

957 
hidDevC⁄nSecuª
 = 
TRUE
;

959 #i‡
DEFAULT_SCAN_PARAM_NOTIFY_TEST
 =
TRUE


960 
	`SˇnP¨am_Re‰eshNŸify
–
g≠C⁄nH™dÀ
 );

965 i‡–!
	`ªp‹tQEm±y
(Ë&& 
hidDevC⁄nSecuª
 )

968 
	`oßl_£t_evít
–
hidDevTaskId
, 
HID_SEND_REPORT_EVT
 );

970 
	}
}

984 
	$hidDevPasscodeCB
–
uöt8
 *
devi˚Addr
, 
uöt16
 
c⁄√˘i⁄H™dÀ
,

985 
uöt8
 
uiI≈uts
, uöt8 
uiOuçuts
 )

987 i‡–
pHidDevCB
 &&ÖHidDevCB->
∑sscodeCB
 )

990 (*
pHidDevCB
->
∑sscodeCB
)–
devi˚Addr
, 
c⁄√˘i⁄H™dÀ
, 
uiI≈uts
, 
uiOuçuts
 );

995 
	`GAPB⁄dMgr_PasscodeR•
–
c⁄√˘i⁄H™dÀ
, 
SUCCESS
, 0 );

997 
	}
}

1008 
	$hidDevB©tCB
–
uöt8
 
evít
 )

1010 i‡–
evít
 =
BATT_LEVEL_NOTI_ENABLED
 )

1013 i‡–
hidDevG≠Sèã
 =
GAPROLE_CONNECTED
 )

1015 
	`oßl_°¨t_timîEx
–
hidDevTaskId
, 
BATT_PERIODIC_EVT
, 
DEFAULT_BATT_PERIOD
 );

1018 i‡–
evít
 =
BATT_LEVEL_NOTI_DISABLED
 )

1021 
	`oßl_°›_timîEx
–
hidDevTaskId
, 
BATT_PERIODIC_EVT
 );

1023 
	}
}

1034 
	$hidDevSˇnP¨amCB
–
uöt8
 
evít
 )

1037 
	}
}

1048 
	$hidDevB©tPîiodicTask
( )

1050 i‡–
hidDevG≠Sèã
 =
GAPROLE_CONNECTED
 )

1053 
	`B©t_MósLevñ
( );

1056 
	`oßl_°¨t_timîEx
–
hidDevTaskId
, 
BATT_PERIODIC_EVT
, 
DEFAULT_BATT_PERIOD
 );

1058 
	}
}

1069 
hidR±M≠_t
 *
	$hidDevR±ByH™dÀ
–
uöt16
 
h™dÀ
 )

1071 
uöt8
 
i
;

1072 
hidR±M≠_t
 *
p
 = 
pHidDevR±Tbl
;

1074  
i
 = 
hidDevR±TblLí
; i > 0; i--, 
p
++ )

1076 i‡–
p
->
h™dÀ
 =h™dÀ &&Ö->
mode
 =
hidPrŸocﬁMode
)

1078  
p
;

1082  
NULL
;

1083 
	}
}

1094 
hidR±M≠_t
 *
	$hidDevR±ByCccdH™dÀ
–
uöt16
 
h™dÀ
 )

1096 
uöt8
 
i
;

1097 
hidR±M≠_t
 *
p
 = 
pHidDevR±Tbl
;

1099  
i
 = 
hidDevR±TblLí
; i > 0; i--, 
p
++ )

1101 i‡–
p
->
cccdH™dÀ
 =
h™dÀ
)

1103  
p
;

1107  
NULL
;

1108 
	}
}

1120 
hidR±M≠_t
 *
	$hidDevR±ById
–
uöt8
 
id
, uöt8 
ty≥
 )

1122 
uöt8
 
i
;

1123 
hidR±M≠_t
 *
p
 = 
pHidDevR±Tbl
;

1125  
i
 = 
hidDevR±TblLí
; i > 0; i--, 
p
++ )

1127 i‡–
p
->
id
 =id &&Ö->
ty≥
 =ty≥ &&Ö->
mode
 =
hidPrŸocﬁMode
 )

1129  
p
;

1133  
NULL
;

1134 
	}
}

1148 
	$hidDevSídRï‹t
–
uöt8
 
id
, uöt8 
ty≥
, uöt8 
Àn
, uöt8 *
pD©a
 )

1150 
hidR±M≠_t
 *
pR±
;

1151 
g©tAâribuã_t
 *
pAâr
;

1152 
uöt16
 
ªtH™dÀ
;

1155 i‡–(
pR±
 = 
	`hidDevR±ById
(
id
, 
ty≥
)Ë!
NULL
 )

1158 i‡–(
pAâr
 = 
	`GATT_FödH™dÀ
(
pR±
->
cccdH™dÀ
, &
ªtH™dÀ
)Ë!
NULL
 )

1160 
uöt16
 
vÆue
;

1162 
vÆue
 = 
	`GATTSîvAµ_RódCh¨Cfg
–
g≠C⁄nH™dÀ
, (
g©tCh¨Cfg_t
 *Ë
pAâr
->
pVÆue
 );

1163 i‡–
vÆue
 & 
GATT_CLIENT_CFG_NOTIFY
 )

1167 i‡–
upd©eC⁄nP¨ams
 )

1169 
	`GAPRﬁe_SëP¨amëî
–
GAPROLE_PARAM_UPDATE_REQ
, –
uöt8
 ), &
upd©eC⁄nP¨ams
 );

1170 
upd©eC⁄nP¨ams
 = 
FALSE
;

1174 
œ°NŸi
.
h™dÀ
 = 
pR±
->handle;

1175 
œ°NŸi
.
Àn
 =Üen;

1176 
	`oßl_mem˝y
(
œ°NŸi
.
vÆue
, 
pD©a
, 
Àn
);

1178 
	`GATT_NŸifiˇti⁄
–
g≠C⁄nH™dÀ
, &
œ°NŸi
, 
FALSE
 );

1181 
	`hidDevSèπIdÀTimî
();

1185 
	}
}

1199 
	$hidDevEnqueueRï‹t
–
uöt8
 
id
, uöt8 
ty≥
, uöt8 
Àn
, uöt8 *
pD©a
 )

1202 i‡–
	`hidDevB⁄dCou¡
() > 0 )

1205 
œ°QIdx
 = (Üa°QIdx + 1 ) % 
HID_DEV_REPORT_Q_SIZE
;

1207 i‡–
œ°QIdx
 =
fú°QIdx
 )

1210 
fú°QIdx
 = ( fú°QIdx + 1 ) % 
HID_DEV_REPORT_Q_SIZE
;

1214 
hidDevRï‹tQ
[
œ°QIdx
].
id
 = id;

1215 
hidDevRï‹tQ
[
œ°QIdx
].
ty≥
 =Åype;

1216 
hidDevRï‹tQ
[
œ°QIdx
].
Àn
 =Üen;

1217 
	`oßl_mem˝y
–
hidDevRï‹tQ
[
œ°QIdx
].
d©a
, 
pD©a
, 
Àn
 );

1219 i‡–
hidDevC⁄nSecuª
 )

1222 
	`oßl_£t_evít
–
hidDevTaskId
, 
HID_SEND_REPORT_EVT
 );

1225 
	}
}

1239 
hidDevRï‹t_t
 *
	$hidDevDequeueRï‹t
( )

1241 i‡–
	`ªp‹tQEm±y
() )

1243  
NULL
;

1247 
fú°QIdx
 = ( fú°QIdx + 1 ) % 
HID_DEV_REPORT_Q_SIZE
;

1249  ( &(
hidDevRï‹tQ
[
fú°QIdx
]) );

1250 
	}
}

1261 
	$hidDevHighAdvîtisög
( )

1263 
uöt8
 
∑øm
;

1265 
VOID
 
	`GAP_SëP¨amVÆue
–
TGAP_LIM_DISC_ADV_INT_MIN
, 
HID_HIGH_ADV_INT_MIN
 );

1266 
VOID
 
	`GAP_SëP¨amVÆue
–
TGAP_LIM_DISC_ADV_INT_MAX
, 
HID_HIGH_ADV_INT_MAX
 );

1267 
VOID
 
	`GAP_SëP¨amVÆue
–
TGAP_LIM_ADV_TIMEOUT
, 
HID_HIGH_ADV_TIMEOUT
 );

1270 
∑øm
 = 
GAP_FILTER_POLICY_WHITE
;

1271 
VOID
 
	`GAPRﬁe_SëP¨amëî
–
GAPROLE_ADV_FILTER_POLICY
, –
uöt8
 ), &
∑øm
 );

1273 
∑øm
 = 
TRUE
;

1274 
	`GAPRﬁe_SëP¨amëî
–
GAPROLE_ADVERT_ENABLED
, –
uöt8
 ), &
∑øm
 );

1275 
	}
}

1286 
	$hidDevLowAdvîtisög
( )

1288 
uöt8
 
∑øm
;

1290 
VOID
 
	`GAP_SëP¨amVÆue
–
TGAP_LIM_DISC_ADV_INT_MIN
, 
HID_LOW_ADV_INT_MIN
 );

1291 
VOID
 
	`GAP_SëP¨amVÆue
–
TGAP_LIM_DISC_ADV_INT_MAX
, 
HID_LOW_ADV_INT_MAX
 );

1292 
VOID
 
	`GAP_SëP¨amVÆue
–
TGAP_LIM_ADV_TIMEOUT
, 
HID_LOW_ADV_TIMEOUT
 );

1295 
∑øm
 = 
GAP_FILTER_POLICY_WHITE
;

1296 
VOID
 
	`GAPRﬁe_SëP¨amëî
–
GAPROLE_ADV_FILTER_POLICY
, –
uöt8
 ), &
∑øm
 );

1298 
∑øm
 = 
TRUE
;

1299 
VOID
 
	`GAPRﬁe_SëP¨amëî
–
GAPROLE_ADVERT_ENABLED
, –
uöt8
 ), &
∑øm
 );

1300 
	}
}

1309 
	$hidDevInôülAdvîtisög
( )

1311 
uöt8
 
∑øm
;

1313 
VOID
 
	`GAP_SëP¨amVÆue
–
TGAP_LIM_DISC_ADV_INT_MIN
, 
HID_INITIAL_ADV_INT_MIN
 );

1314 
VOID
 
	`GAP_SëP¨amVÆue
–
TGAP_LIM_DISC_ADV_INT_MAX
, 
HID_INITIAL_ADV_INT_MAX
 );

1315 
VOID
 
	`GAP_SëP¨amVÆue
–
TGAP_LIM_ADV_TIMEOUT
, 
HID_INITIAL_ADV_TIMEOUT
 );

1318 
∑øm
 = 
GAP_FILTER_POLICY_ALL
;

1319 
VOID
 
	`GAPRﬁe_SëP¨amëî
–
GAPROLE_ADV_FILTER_POLICY
, –
uöt8
 ), &
∑øm
 );

1321 
∑øm
 = 
TRUE
;

1322 
VOID
 
	`GAPRﬁe_SëP¨amëî
–
GAPROLE_ADVERT_ENABLED
, –
uöt8
 ), &
∑øm
 );

1323 
	}
}

1334 
uöt8
 
	$hidDevB⁄dCou¡
( )

1336 
uöt8
 
b⁄dC¡
 = 0;

1338 
VOID
 
	`GAPB⁄dMgr_GëP¨amëî
–
GAPBOND_BOND_COUNT
, &
b⁄dC¡
 );

1340  ( 
b⁄dC¡
 );

1341 
	}
}

1350 
	$hidDevSèπIdÀTimî
( )

1352 i‡–
pHidDevCfg
->
idÀTimeout
 > 0 )

1354 
	`oßl_°¨t_timîEx
–
hidDevTaskId
, 
HID_IDLE_EVT
, 
pHidDevCfg
->
idÀTimeout
 );

1356 
	}
}

1365 
	$hidDevSt›IdÀTimî
( )

1367 
	`oßl_°›_timîEx
–
hidDevTaskId
, 
HID_IDLE_EVT
 );

1368 
	}
}

	@../../Profiles/HIDDev/hiddev.h

39 #i‚de‡
HIDDEV_H


40 
	#HIDDEV_H


	)

43 #ifde‡
__˝lu•lus


61 
	#HIDDEV_ERASE_ALLBONDS
 0

62 

	)

64 
	#HID_DEV_OPER_WRITE
 0

65 
	#HID_DEV_OPER_READ
 1

66 
	#HID_DEV_OPER_ENABLE
 2

67 
	#HID_DEV_OPER_DISABLE
 3

68 

	)

70 
	#HID_DEV_SUSPEND_EVT
 0

71 
	#HID_DEV_EXIT_SUSPEND_EVT
 1

72 
	#HID_DEV_SET_BOOT_EVT
 2

73 
	#HID_DEV_SET_REPORT_EVT
 3

74 

	)

76 
	#HID_REPORT_TYPE_INPUT
 1

	)

77 
	#HID_REPORT_TYPE_OUTPUT
 2

	)

78 
	#HID_REPORT_TYPE_FEATURE
 3

	)

81 
	#HID_FLAGS_REMOTE_WAKE
 0x01

82 
	#HID_FLAGS_NORMALLY_CONNECTABLE
 0x02

83 

	)

85 
	#HID_CMD_SUSPEND
 0x00

86 
	#HID_CMD_EXIT_SUSPEND
 0x01

87 

	)

89 
	#HID_PROTOCOL_MODE_BOOT
 0x00

90 
	#HID_PROTOCOL_MODE_REPORT
 0x01

91 

	)

93 
	#HID_PROTOCOL_MODE_LEN
 1

94 
	#HID_INFORMATION_LEN
 4

95 
	#HID_REPORT_REF_LEN
 2

96 
	#HID_EXT_REPORT_REF_LEN
 2

97 

	)

99 
	#HID_KEYBOARD_RESERVED
 0

100 
	#HID_KEYBOARD_A
 4

101 
	#HID_KEYBOARD_B
 5

102 
	#HID_KEYBOARD_C
 6

103 
	#HID_KEYBOARD_D
 7

104 
	#HID_KEYBOARD_E
 8

105 
	#HID_KEYBOARD_F
 9

106 
	#HID_KEYBOARD_G
 10

107 
	#HID_KEYBOARD_H
 11

108 
	#HID_KEYBOARD_I
 12

109 
	#HID_KEYBOARD_J
 13

110 
	#HID_KEYBOARD_K
 14

111 
	#HID_KEYBOARD_L
 15

112 
	#HID_KEYBOARD_M
 16

113 
	#HID_KEYBOARD_N
 17

114 
	#HID_KEYBOARD_O
 18

115 
	#HID_KEYBOARD_P
 19

116 
	#HID_KEYBOARD_Q
 20

117 
	#HID_KEYBOARD_R
 21

118 
	#HID_KEYBOARD_S
 22

119 
	#HID_KEYBOARD_T
 23

120 
	#HID_KEYBOARD_U
 24

121 
	#HID_KEYBOARD_V
 25

122 
	#HID_KEYBOARD_W
 26

123 
	#HID_KEYBOARD_X
 27

124 
	#HID_KEYBOARD_Y
 28

125 
	#HID_KEYBOARD_Z
 29

126 
	#HID_KEYBOARD_1
 30

127 
	#HID_KEYBOARD_2
 31

128 
	#HID_KEYBOARD_3
 32

129 
	#HID_KEYBOARD_4
 33

130 
	#HID_KEYBOARD_5
 34

131 
	#HID_KEYBOARD_6
 35

132 
	#HID_KEYBOARD_7
 36

133 
	#HID_KEYBOARD_8
 37

134 
	#HID_KEYBOARD_9
 38

135 
	#HID_KEYBOARD_0
 39

136 
	#HID_KEYBOARD_RETURN
 40

137 
	#HID_KEYBOARD_ESCAPE
 41

138 
	#HID_KEYBOARD_DELETE
 42

139 
	#HID_KEYBOARD_TAB
 43

140 
	#HID_KEYBOARD_SPACEBAR
 44

141 
	#HID_KEYBOARD_MINUS
 45

142 
	#HID_KEYBOARD_EQUAL
 46

143 
	#HID_KEYBOARD_LEFT_BRKT
 47

144 
	#HID_KEYBOARD_RIGHT_BRKT
 48

145 
	#HID_KEYBOARD_BACK_SLASH
 49

146 
	#HID_KEYBOARD_SEMI_COLON
 51

147 
	#HID_KEYBOARD_SGL_QUOTE
 52

148 
	#HID_KEYBOARD_GRV_ACCENT
 53

149 
	#HID_KEYBOARD_COMMA
 54

150 
	#HID_KEYBOARD_DOT
 55

151 
	#HID_KEYBOARD_FWD_SLASH
 56

152 
	#HID_KEYBOARD_CAPS_LOCK
 57

153 
	#HID_KEYBOARD_F1
 58

154 
	#HID_KEYBOARD_F2
 59

155 
	#HID_KEYBOARD_F3
 60

156 
	#HID_KEYBOARD_F4
 61

157 
	#HID_KEYBOARD_F5
 62

158 
	#HID_KEYBOARD_F6
 63

159 
	#HID_KEYBOARD_F7
 64

160 
	#HID_KEYBOARD_F8
 65

161 
	#HID_KEYBOARD_F9
 66

162 
	#HID_KEYBOARD_F10
 67

163 
	#HID_KEYBOARD_F11
 68

164 
	#HID_KEYBOARD_F12
 69

165 
	#HID_KEYBOARD_PRNT_SCREEN
 70

166 
	#HID_KEYBOARD_SCROLL_LOCK
 71

167 
	#HID_KEYBOARD_PAUSE
 72

168 
	#HID_KEYBOARD_INSERT
 73

169 
	#HID_KEYBOARD_HOME
 74

170 
	#HID_KEYBOARD_PAGE_UP
 75

171 
	#HID_KEYBOARD_DELETE_FWD
 76

172 
	#HID_KEYBOARD_END
 77

173 
	#HID_KEYBOARD_PAGE_DOWN
 78

174 
	#HID_KEYBOARD_RIGHT_ARROW
 79

175 
	#HID_KEYBOARD_LEFT_ARROW
 80

176 
	#HID_KEYBOARD_DOWN_ARROW
 81

177 
	#HID_KEYBOARD_UP_ARROW
 82

178 
	#HID_KEYBPAD_NUM_LOCK
 83

179 
	#HID_KEYBPAD_DIVIDE
 84

180 
	#HID_KEYBOARD_MULTIPLY
 85

181 
	#HID_KEYBOARD_SUBTRACT
 86

182 
	#HID_KEYBPAD_ADD
 87

183 
	#HID_KEYBPAD_ENTER
 88

184 
	#HID_KEYBPAD_1
 89

185 
	#HID_KEYBPAD_2
 90

186 
	#HID_KEYBPAD_3
 91

187 
	#HID_KEYBPAD_4
 92

188 
	#HID_KEYBPAD_5
 93

189 
	#HID_KEYBPAD_6
 94

190 
	#HID_KEYBPAD_7
 95

191 
	#HID_KEYBPAD_8
 96

192 
	#HID_KEYBPAD_9
 97

193 
	#HID_KEYBPAD_0
 98

194 
	#HID_KEYBPAD_DOT
 99

195 
	#HID_KEYBOARD_MUTE
 127

196 
	#HID_KEYBOARD_VOLUME_UP
 128

197 
	#HID_KEYBOARD_VOLUME_DOWN
 129

198 
	#HID_KEYBOARD_LEFT_CTRL
 224

199 
	#HID_KEYBOARD_LEFT_SHIFT
 225

200 
	#HID_KEYBOARD_LEFT_ALT
 226

201 
	#HID_KEYBOARD_LEFT_GUI
 227

202 
	#HID_KEYBOARD_RIGHT_CTRL
 228

203 
	#HID_KEYBOARD_RIGHT_SHIFT
 229

204 
	#HID_KEYBOARD_RIGHT_ALT
 230

205 
	#HID_KEYBOARD_RIGHT_GUI
 231

206 

	)

207 
	#HID_MOUSE_BUTTON_LEFT
 253

	)

208 
	#HID_MOUSE_BUTTON_MIDDLE
 254

	)

209 
	#HID_MOUSE_BUTTON_RIGHT
 255

	)

212 
	#HID_CONSUMER_POWER
 48

213 
	#HID_CONSUMER_RESET
 49

214 
	#HID_CONSUMER_SLEEP
 50

215 

	)

216 
	#HID_CONSUMER_MENU
 64

217 
	#HID_CONSUMER_SELECTION
 128

218 
	#HID_CONSUMER_ASSIGN_SEL
 129

219 
	#HID_CONSUMER_MODE_STEP
 130

220 
	#HID_CONSUMER_RECALL_LAST
 131

221 
	#HID_CONSUMER_QUIT
 148

222 
	#HID_CONSUMER_HELP
 149

223 
	#HID_CONSUMER_CHANNEL_UP
 156

224 
	#HID_CONSUMER_CHANNEL_DOWN
 157

225 

	)

226 
	#HID_CONSUMER_PLAY
 176

227 
	#HID_CONSUMER_PAUSE
 177

228 
	#HID_CONSUMER_RECORD
 178

229 
	#HID_CONSUMER_FAST_FORWARD
 179

230 
	#HID_CONSUMER_REWIND
 180

231 
	#HID_CONSUMER_SCAN_NEXT_TRK
 181

232 
	#HID_CONSUMER_SCAN_PREV_TRK
 182

233 
	#HID_CONSUMER_STOP
 183

234 
	#HID_CONSUMER_EJECT
 184

235 
	#HID_CONSUMER_RANDOM_PLAY
 185

236 
	#HID_CONSUMER_SELECT_DISC
 186

237 
	#HID_CONSUMER_ENTER_DISC
 187

238 
	#HID_CONSUMER_REPEAT
 188

239 
	#HID_CONSUMER_STOP_EJECT
 204

240 
	#HID_CONSUMER_PLAY_PAUSE
 205

241 
	#HID_CONSUMER_PLAY_SKIP
 206

242 

	)

243 
	#HID_CONSUMER_VOLUME
 224

244 
	#HID_CONSUMER_BALANCE
 225

245 
	#HID_CONSUMER_MUTE
 226

246 
	#HID_CONSUMER_BASS
 227

247 
	#HID_CONSUMER_VOLUME_UP
 233

248 
	#HID_CONSUMER_VOLUME_DOWN
 234

249 

	)

257 
uöt16
 
h™dÀ
;

258 
uöt16
 
cccdH™dÀ
;

259 
uöt8
 
id
;

260 
uöt8
 
ty≥
;

261 
uöt8
 
mode
;

262 } 
	thidR±M≠_t
;

267 
uöt32
 
idÀTimeout
;

268 
uöt8
 
hidFœgs
;

270 } 
	thidDevCfg_t
;

279 
uöt8
 
hidRï‹tM≠Lí
;

282 
uöt8
 
hidPrŸocﬁMode
;

289 
uöt8
 (*
	thidDevRï‹tCB_t
)–
	tuöt8
 
	tid
, uöt8 
	tty≥
, 
	tuöt16
 
	tuuid
,

290 
	tuöt8
 
	t›î
, uöt8 *
	tpLí
, uöt8 *
	tpD©a
 );

293 (*
	ghidDevEvtCB_t
)–
	tuöt8
 
	tevt
 );

296 (*
	ghidDevPasscodeCB_t
)–
	tuöt8
 *
	tdevi˚Addr
, 
	tuöt16
 
	tc⁄√˘i⁄H™dÀ
,

297 
	tuöt8
 
	tuiI≈uts
, uöt8 
	tuiOuçuts
 );

301 
hidDevRï‹tCB_t
 
	gªp‹tCB
;

302 
hidDevEvtCB_t
 
	gevtCB
;

303 
hidDevPasscodeCB_t
 
	g∑sscodeCB
;

304 } 
	thidDevCB_t
;

320 
HidDev_Inô
–
uöt8
 
èsk_id
 );

335 
uöt16
 
HidDev_Pro˚ssEvít
–
uöt8
 
èsk_id
, uöt16 
evíts
 );

347 
HidDev_Regi°î
–
hidDevCfg_t
 *
pCfg
, 
hidDevCB_t
 *
pCBs
 );

359 
HidDev_Regi°îRï‹ts
–
uöt8
 
numRï‹ts
, 
hidR±M≠_t
 *
pR±
 );

373 
HidDev_Rï‹t
–
uöt8
 
id
, uöt8 
ty≥
, uöt8 
Àn
, uöt8 *
pD©a
 );

382 
HidDev_Clo£
( );

398 
bSètus_t
 
HidDev_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
pVÆue
 );

413 
bSètus_t
 
HidDev_GëP¨amëî
–
uöt8
 
∑øm
, *
pVÆue
 );

426 
HidDev_PasscodeR•
–
uöt8
 
°©us
, 
uöt32
 
∑sscode
 );

442 
uöt8
 
HidDev_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

443 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

458 
bSètus_t
 
HidDev_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

459 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

464 #ifde‡
__˝lu•lus


	@../../Profiles/HIDDevKbM/hidkbmservice.c

42 
	~"bcomdef.h
"

43 
	~"OSAL.h
"

44 
	~"©t.h
"

45 
	~"g©t.h
"

46 
	~"g©t_uuid.h
"

47 
	~"lökdb.h
"

48 
	~"g©t£rv≠p.h
"

49 
	~"hidkbm£rvi˚.h
"

50 
	~"g©t_¥ofûe_uuid.h
"

51 
	~"hiddev.h
"

52 
	~"b©t£rvi˚.h
"

70 
CONST
 
uöt8
 
	ghidSîvUUID
[
ATT_BT_UUID_SIZE
] =

72 
LO_UINT16
(
HID_SERV_UUID
), 
HI_UINT16
(HID_SERV_UUID)

76 
CONST
 
uöt8
 
	ghidBoŸKeyI≈utUUID
[
ATT_BT_UUID_SIZE
] =

78 
LO_UINT16
(
BOOT_KEY_INPUT_UUID
), 
HI_UINT16
(BOOT_KEY_INPUT_UUID)

82 
CONST
 
uöt8
 
	ghidBoŸMou£I≈utUUID
[
ATT_BT_UUID_SIZE
] =

84 
LO_UINT16
(
BOOT_MOUSE_INPUT_UUID
), 
HI_UINT16
(BOOT_MOUSE_INPUT_UUID)

88 
CONST
 
uöt8
 
	ghidBoŸKeyOuçutUUID
[
ATT_BT_UUID_SIZE
] =

90 
LO_UINT16
(
BOOT_KEY_OUTPUT_UUID
), 
HI_UINT16
(BOOT_KEY_OUTPUT_UUID)

94 
CONST
 
uöt8
 
	ghidInfoUUID
[
ATT_BT_UUID_SIZE
] =

96 
LO_UINT16
(
HID_INFORMATION_UUID
), 
HI_UINT16
(HID_INFORMATION_UUID)

100 
CONST
 
uöt8
 
	ghidRï‹tM≠UUID
[
ATT_BT_UUID_SIZE
] =

102 
LO_UINT16
(
REPORT_MAP_UUID
), 
HI_UINT16
(REPORT_MAP_UUID)

106 
CONST
 
uöt8
 
	ghidC⁄åﬁPoötUUID
[
ATT_BT_UUID_SIZE
] =

108 
LO_UINT16
(
HID_CTRL_PT_UUID
), 
HI_UINT16
(HID_CTRL_PT_UUID)

112 
CONST
 
uöt8
 
	ghidRï‹tUUID
[
ATT_BT_UUID_SIZE
] =

114 
LO_UINT16
(
REPORT_UUID
), 
HI_UINT16
(REPORT_UUID)

118 
CONST
 
uöt8
 
	ghidPrŸocﬁModeUUID
[
ATT_BT_UUID_SIZE
] =

120 
LO_UINT16
(
PROTOCOL_MODE_UUID
), 
HI_UINT16
(PROTOCOL_MODE_UUID)

136 
CONST
 
uöt8
 
	ghidInfo
[
HID_INFORMATION_LEN
] =

138 
LO_UINT16
(0x0111), 
HI_UINT16
(0x0111),

140 
HID_KBD_FLAGS


145 
CONST
 
uöt8
 
	ghidRï‹tM≠
[] =

282 
uöt8
 
	ghidRï‹tM≠Lí
 = (
hidRï‹tM≠
);

285 
hidR±M≠_t
 
	ghidR±M≠
[
HID_NUM_REPORTS
];

292 
CONST
 
g©tAârTy≥_t
 
	ghidSîvi˚
 = { 
ATT_BT_UUID_SIZE
, 
hidSîvUUID
 };

295 
uöt16
 
	gö˛ude
 = 
GATT_INVALID_HANDLE
;

298 
uöt8
 
	ghidInfoPr›s
 = 
GATT_PROP_READ
;

301 
uöt8
 
	ghidRï‹tM≠Pr›s
 = 
GATT_PROP_READ
;

304 
uöt8
 
	ghidExtRï‹tRefDesc
[
ATT_BT_UUID_SIZE
] =

305 { 
LO_UINT16
(
BATT_LEVEL_UUID
), 
HI_UINT16
(BATT_LEVEL_UUID) };

308 
uöt8
 
	ghidC⁄åﬁPoötPr›s
 = 
GATT_PROP_WRITE_NO_RSP
;

309 
uöt8
 
	ghidC⁄åﬁPoöt
;

312 
uöt8
 
	ghidPrŸocﬁModePr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE_NO_RSP
;

313 
uöt8
 
	ghidPrŸocﬁMode
 = 
HID_PROTOCOL_MODE_REPORT
;

316 
uöt8
 
	ghidRï‹tMou£InPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_NOTIFY
;

317 
uöt8
 
	ghidRï‹tMou£In
;

318 
g©tCh¨Cfg_t
 
	ghidRï‹tMou£InClõ¡Ch¨Cfg
[
GATT_MAX_NUM_CONN
];

321 
uöt8
 
	ghidRï‹tRefMou£In
[
HID_REPORT_REF_LEN
] =

322 { 
HID_RPT_ID_MOUSE_IN
, 
HID_REPORT_TYPE_INPUT
 };

325 
uöt8
 
	ghidRï‹tKeyInPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_NOTIFY
;

326 
uöt8
 
	ghidRï‹tKeyIn
;

327 
g©tCh¨Cfg_t
 
	ghidRï‹tKeyInClõ¡Ch¨Cfg
[
GATT_MAX_NUM_CONN
];

330 
uöt8
 
	ghidRï‹tRefKeyIn
[
HID_REPORT_REF_LEN
] =

331 { 
HID_RPT_ID_KEY_IN
, 
HID_REPORT_TYPE_INPUT
 };

334 
uöt8
 
	ghidRï‹tCCInPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_NOTIFY
;

335 
uöt8
 
	ghidRï‹tCCIn
;

336 
g©tCh¨Cfg_t
 
	ghidRï‹tCCInClõ¡Ch¨Cfg
[
GATT_MAX_NUM_CONN
];

339 
uöt8
 
	ghidRï‹tRefCCIn
[
HID_REPORT_REF_LEN
] =

340 { 
HID_RPT_ID_CC_IN
, 
HID_REPORT_TYPE_INPUT
 };

343 
uöt8
 
	ghidRï‹tLedOutPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
 | 
GATT_PROP_WRITE_NO_RSP
;

344 
uöt8
 
	ghidRï‹tLedOut
;

347 
uöt8
 
	ghidRï‹tRefLedOut
[
HID_REPORT_REF_LEN
] =

348 { 
HID_RPT_ID_LED_OUT
, 
HID_REPORT_TYPE_OUTPUT
 };

351 
uöt8
 
	ghidRï‹tBoŸKeyInPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_NOTIFY
;

352 
uöt8
 
	ghidRï‹tBoŸKeyIn
;

353 
g©tCh¨Cfg_t
 
	ghidRï‹tBoŸKeyInClõ¡Ch¨Cfg
[
GATT_MAX_NUM_CONN
];

356 
uöt8
 
	ghidRï‹tBoŸKeyOutPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
 | 
GATT_PROP_WRITE_NO_RSP
;

357 
uöt8
 
	ghidRï‹tBoŸKeyOut
;

360 
uöt8
 
	ghidRï‹tBoŸMou£InPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_NOTIFY
;

361 
uöt8
 
	ghidRï‹tBoŸMou£In
;

362 
g©tCh¨Cfg_t
 
	ghidRï‹tBoŸMou£InClõ¡Ch¨Cfg
[
GATT_MAX_NUM_CONN
];

365 
uöt8
 
	ghidRï‹tFótuªPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

366 
uöt8
 
	ghidRï‹tFótuª
;

369 
uöt8
 
	ghidRï‹tRefFótuª
[
HID_REPORT_REF_LEN
] =

370 { 
HID_RPT_ID_FEATURE
, 
HID_REPORT_TYPE_FEATURE
 };

376 
g©tAâribuã_t
 
	ghidAârTbl
[] =

380 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

381 
GATT_PERMIT_READ
,

383 (
uöt8
 *Ë&
hidSîvi˚


388 { 
ATT_BT_UUID_SIZE
, 
ö˛udeUUID
 },

389 
GATT_PERMIT_READ
,

391 (
uöt8
 *)&
ö˛ude


396 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

397 
GATT_PERMIT_READ
,

399 &
hidInfoPr›s


404 { 
ATT_BT_UUID_SIZE
, 
hidInfoUUID
 },

405 
GATT_PERMIT_ENCRYPT_READ
,

407 (
uöt8
 *Ë
hidInfo


412 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

413 
GATT_PERMIT_READ
,

415 &
hidC⁄åﬁPoötPr›s


420 { 
ATT_BT_UUID_SIZE
, 
hidC⁄åﬁPoötUUID
 },

421 
GATT_PERMIT_ENCRYPT_WRITE
,

423 &
hidC⁄åﬁPoöt


428 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

429 
GATT_PERMIT_READ
,

431 &
hidPrŸocﬁModePr›s


436 { 
ATT_BT_UUID_SIZE
, 
hidPrŸocﬁModeUUID
 },

437 
GATT_PERMIT_ENCRYPT_READ
 | 
GATT_PERMIT_ENCRYPT_WRITE
,

439 &
hidPrŸocﬁMode


445 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

446 
GATT_PERMIT_READ
,

448 &
hidRï‹tM≠Pr›s


453 { 
ATT_BT_UUID_SIZE
, 
hidRï‹tM≠UUID
 },

454 
GATT_PERMIT_ENCRYPT_READ
,

456 (
uöt8
 *Ë
hidRï‹tM≠


461 { 
ATT_BT_UUID_SIZE
, 
extRï‹tRefUUID
 },

462 
GATT_PERMIT_READ
,

464 
hidExtRï‹tRefDesc


469 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

470 
GATT_PERMIT_READ
,

472 &
hidRï‹tMou£InPr›s


477 { 
ATT_BT_UUID_SIZE
, 
hidRï‹tUUID
 },

478 
GATT_PERMIT_ENCRYPT_READ
,

480 &
hidRï‹tMou£In


485 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

486 
GATT_PERMIT_READ
 | 
GATT_PERMIT_ENCRYPT_WRITE
,

488 (
uöt8
 *Ë&
hidRï‹tMou£InClõ¡Ch¨Cfg


493 { 
ATT_BT_UUID_SIZE
, 
ªp‹tRefUUID
 },

494 
GATT_PERMIT_READ
,

496 
hidRï‹tRefMou£In


501 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

502 
GATT_PERMIT_READ
,

504 &
hidRï‹tKeyInPr›s


509 { 
ATT_BT_UUID_SIZE
, 
hidRï‹tUUID
 },

510 
GATT_PERMIT_ENCRYPT_READ
,

512 &
hidRï‹tKeyIn


517 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

518 
GATT_PERMIT_READ
 | 
GATT_PERMIT_ENCRYPT_WRITE
,

520 (
uöt8
 *Ë&
hidRï‹tKeyInClõ¡Ch¨Cfg


525 { 
ATT_BT_UUID_SIZE
, 
ªp‹tRefUUID
 },

526 
GATT_PERMIT_READ
,

528 
hidRï‹tRefKeyIn


533 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

534 
GATT_PERMIT_READ
,

536 &
hidRï‹tCCInPr›s


541 { 
ATT_BT_UUID_SIZE
, 
hidRï‹tUUID
 },

542 
GATT_PERMIT_ENCRYPT_READ
,

544 &
hidRï‹tCCIn


549 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

550 
GATT_PERMIT_READ
 | 
GATT_PERMIT_ENCRYPT_WRITE
,

552 (
uöt8
 *Ë&
hidRï‹tCCInClõ¡Ch¨Cfg


557 { 
ATT_BT_UUID_SIZE
, 
ªp‹tRefUUID
 },

558 
GATT_PERMIT_READ
,

560 
hidRï‹tRefCCIn


565 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

566 
GATT_PERMIT_READ
,

568 &
hidRï‹tLedOutPr›s


573 { 
ATT_BT_UUID_SIZE
, 
hidRï‹tUUID
 },

574 
GATT_PERMIT_ENCRYPT_READ
 | 
GATT_PERMIT_ENCRYPT_WRITE
,

576 &
hidRï‹tLedOut


581 { 
ATT_BT_UUID_SIZE
, 
ªp‹tRefUUID
 },

582 
GATT_PERMIT_READ
,

584 
hidRï‹tRefLedOut


589 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

590 
GATT_PERMIT_READ
,

592 &
hidRï‹tBoŸKeyInPr›s


597 { 
ATT_BT_UUID_SIZE
, 
hidBoŸKeyI≈utUUID
 },

598 
GATT_PERMIT_ENCRYPT_READ
,

600 &
hidRï‹tBoŸKeyIn


605 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

606 
GATT_PERMIT_READ
 | 
GATT_PERMIT_ENCRYPT_WRITE
,

608 (
uöt8
 *Ë&
hidRï‹tBoŸKeyInClõ¡Ch¨Cfg


613 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

614 
GATT_PERMIT_READ
,

616 &
hidRï‹tBoŸKeyOutPr›s


621 { 
ATT_BT_UUID_SIZE
, 
hidBoŸKeyOuçutUUID
 },

622 
GATT_PERMIT_ENCRYPT_READ
 | 
GATT_PERMIT_ENCRYPT_WRITE
,

624 &
hidRï‹tBoŸKeyOut


629 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

630 
GATT_PERMIT_READ
,

632 &
hidRï‹tBoŸMou£InPr›s


637 { 
ATT_BT_UUID_SIZE
, 
hidBoŸMou£I≈utUUID
 },

638 
GATT_PERMIT_ENCRYPT_READ
,

640 &
hidRï‹tBoŸMou£In


645 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

646 
GATT_PERMIT_READ
 | 
GATT_PERMIT_ENCRYPT_WRITE
,

648 (
uöt8
 *Ë&
hidRï‹tBoŸMou£InClõ¡Ch¨Cfg


653 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

654 
GATT_PERMIT_READ
,

656 &
hidRï‹tFótuªPr›s


661 { 
ATT_BT_UUID_SIZE
, 
hidRï‹tUUID
},

662 
GATT_PERMIT_ENCRYPT_READ
 | 
GATT_PERMIT_ENCRYPT_WRITE
,

664 &
hidRï‹tFótuª


669 { 
ATT_BT_UUID_SIZE
, 
ªp‹tRefUUID
 },

670 
GATT_PERMIT_READ
,

672 
hidRï‹tRefFótuª


679 
	mHID_SERVICE_IDX
,

680 
	mHID_INCLUDED_SERVICE_IDX
,

681 
	mHID_INFO_DECL_IDX
,

682 
	mHID_INFO_IDX
,

683 
	mHID_CONTROL_POINT_DECL_IDX
,

684 
	mHID_CONTROL_POINT_IDX
,

685 
	mHID_PROTOCOL_MODE_DECL_IDX
,

686 
	mHID_PROTOCOL_MODE_IDX
,

687 
	mHID_REPORT_MAP_DECL_IDX
,

688 
	mHID_REPORT_MAP_IDX
,

689 
	mHID_EXT_REPORT_REF_DESC_IDX
,

690 
	mHID_REPORT_MOUSE_IN_DECL_IDX
,

691 
	mHID_REPORT_MOUSE_IN_IDX
,

692 
	mHID_REPORT_MOUSE_IN_CCCD_IDX
,

693 
	mHID_REPORT_REF_MOUSE_IN_IDX
,

694 
	mHID_REPORT_KEY_IN_DECL_IDX
,

695 
	mHID_REPORT_KEY_IN_IDX
,

696 
	mHID_REPORT_KEY_IN_CCCD_IDX
,

697 
	mHID_REPORT_REF_KEY_IN_IDX
,

698 
	mHID_REPORT_CC_IN_DECL_IDX
,

699 
	mHID_REPORT_CC_IN_IDX
,

700 
	mHID_REPORT_CC_IN_CCCD_IDX
,

701 
	mHID_REPORT_REF_CC_IN_IDX
,

702 
	mHID_REPORT_LED_OUT_DECL_IDX
,

703 
	mHID_REPORT_LED_OUT_IDX
,

704 
	mHID_REPORT_REF_LED_OUT_IDX
,

705 
	mHID_BOOT_KEY_IN_DECL_IDX
,

706 
	mHID_BOOT_KEY_IN_IDX
,

707 
	mHID_BOOT_KEY_IN_CCCD_IDX
,

708 
	mHID_BOOT_KEY_OUT_DECL_IDX
,

709 
	mHID_BOOT_KEY_OUT_IDX
,

710 
	mHID_BOOT_MOUSE_IN_DECL_IDX
,

711 
	mHID_BOOT_MOUSE_IN_IDX
,

712 
	mHID_BOOT_MOUSE_IN_CCCD_IDX
,

713 
	mHID_FEATURE_DECL_IDX
,

714 
	mHID_FEATURE_IDX
,

715 
	mHID_REPORT_REF_FEATURE_IDX


727 
CONST
 
g©tSîvi˚CBs_t
 
	ghidKbdMsCBs
 =

729 
HidDev_RódAârCB
,

730 
HidDev_WrôeAârCB
,

731 
NULL


746 
bSètus_t
 
	$HidKbM_AddSîvi˚
( )

748 
uöt8
 
°©us
 = 
SUCCESS
;

751 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
hidRï‹tMou£InClõ¡Ch¨Cfg
 );

752 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
hidRï‹tKeyInClõ¡Ch¨Cfg
 );

753 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
hidRï‹tCCInClõ¡Ch¨Cfg
 );

754 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
hidRï‹tBoŸKeyInClõ¡Ch¨Cfg
 );

755 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
hidRï‹tBoŸMou£InClõ¡Ch¨Cfg
 );

758 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
hidAârTbl
, 
	`GATT_NUM_ATTRS
–hidAârTb»), &
hidKbdMsCBs
 );

761 
	`B©t_GëP¨amëî
–
BATT_PARAM_SERVICE_HANDLE
,

762 &
	`GATT_INCLUDED_HANDLE
–
hidAârTbl
, 
HID_INCLUDED_SERVICE_IDX
 ) );

768 
hidR±M≠
[0].
id
 = 
hidRï‹tRefMou£In
[0];

769 
hidR±M≠
[0].
ty≥
 = 
hidRï‹tRefMou£In
[1];

770 
hidR±M≠
[0].
h™dÀ
 = 
hidAârTbl
[
HID_REPORT_MOUSE_IN_IDX
].handle;

771 
hidR±M≠
[0].
cccdH™dÀ
 = 
hidAârTbl
[
HID_REPORT_MOUSE_IN_CCCD_IDX
].
h™dÀ
;

772 
hidR±M≠
[0].
mode
 = 
HID_PROTOCOL_MODE_REPORT
;

775 
hidR±M≠
[1].
id
 = 
hidRï‹tRefKeyIn
[0];

776 
hidR±M≠
[1].
ty≥
 = 
hidRï‹tRefKeyIn
[1];

777 
hidR±M≠
[1].
h™dÀ
 = 
hidAârTbl
[
HID_REPORT_KEY_IN_IDX
].handle;

778 
hidR±M≠
[1].
cccdH™dÀ
 = 
hidAârTbl
[
HID_REPORT_KEY_IN_CCCD_IDX
].
h™dÀ
;

779 
hidR±M≠
[1].
mode
 = 
HID_PROTOCOL_MODE_REPORT
;

782 
hidR±M≠
[2].
id
 = 
hidRï‹tRefCCIn
[0];

783 
hidR±M≠
[2].
ty≥
 = 
hidRï‹tRefCCIn
[1];

784 
hidR±M≠
[2].
h™dÀ
 = 
hidAârTbl
[
HID_REPORT_CC_IN_IDX
].handle;

785 
hidR±M≠
[2].
cccdH™dÀ
 = 
hidAârTbl
[
HID_REPORT_CC_IN_CCCD_IDX
].
h™dÀ
;

786 
hidR±M≠
[2].
mode
 = 
HID_PROTOCOL_MODE_REPORT
;

789 
hidR±M≠
[3].
id
 = 
hidRï‹tRefLedOut
[0];

790 
hidR±M≠
[3].
ty≥
 = 
hidRï‹tRefLedOut
[1];

791 
hidR±M≠
[3].
h™dÀ
 = 
hidAârTbl
[
HID_REPORT_LED_OUT_IDX
].handle;

792 
hidR±M≠
[3].
cccdH™dÀ
 = 0;

793 
hidR±M≠
[3].
mode
 = 
HID_PROTOCOL_MODE_REPORT
;

797 
hidR±M≠
[4].
id
 = 
hidRï‹tRefKeyIn
[0];

798 
hidR±M≠
[4].
ty≥
 = 
hidRï‹tRefKeyIn
[1];

799 
hidR±M≠
[4].
h™dÀ
 = 
hidAârTbl
[
HID_BOOT_KEY_IN_IDX
].handle;

800 
hidR±M≠
[4].
cccdH™dÀ
 = 
hidAârTbl
[
HID_BOOT_KEY_IN_CCCD_IDX
].
h™dÀ
;

801 
hidR±M≠
[4].
mode
 = 
HID_PROTOCOL_MODE_BOOT
;

805 
hidR±M≠
[5].
id
 = 
hidRï‹tRefLedOut
[0];

806 
hidR±M≠
[5].
ty≥
 = 
hidRï‹tRefLedOut
[1];

807 
hidR±M≠
[5].
h™dÀ
 = 
hidAârTbl
[
HID_BOOT_KEY_OUT_IDX
].handle;

808 
hidR±M≠
[5].
cccdH™dÀ
 = 0;

809 
hidR±M≠
[5].
mode
 = 
HID_PROTOCOL_MODE_BOOT
;

813 
hidR±M≠
[6].
id
 = 
hidRï‹tRefMou£In
[0];

814 
hidR±M≠
[6].
ty≥
 = 
hidRï‹tRefMou£In
[1];

815 
hidR±M≠
[6].
h™dÀ
 = 
hidAârTbl
[
HID_BOOT_MOUSE_IN_IDX
].handle;

816 
hidR±M≠
[6].
cccdH™dÀ
 = 
hidAârTbl
[
HID_BOOT_MOUSE_IN_CCCD_IDX
].
h™dÀ
;

817 
hidR±M≠
[6].
mode
 = 
HID_PROTOCOL_MODE_BOOT
;

820 
hidR±M≠
[7].
id
 = 
hidRï‹tRefFótuª
[0];

821 
hidR±M≠
[7].
ty≥
 = 
hidRï‹tRefFótuª
[1];

822 
hidR±M≠
[7].
h™dÀ
 = 
hidAârTbl
[
HID_FEATURE_IDX
].handle;

823 
hidR±M≠
[7].
cccdH™dÀ
 = 0;

824 
hidR±M≠
[7].
mode
 = 
HID_PROTOCOL_MODE_REPORT
;

827 
VOID
 
	`B©t_GëP¨amëî
–
BATT_PARAM_BATT_LEVEL_IN_REPORT
, &(
hidR±M≠
[8]) );

830 
	`HidDev_Regi°îRï‹ts
–
HID_NUM_REPORTS
, 
hidR±M≠
 );

832  ( 
°©us
 );

833 
	}
}

851 
uöt8
 
	$HidKbM_SëP¨amëî
–
uöt8
 
id
, uöt8 
ty≥
, 
uöt16
 
uuid
, uöt8 
Àn
, *
pVÆue
 )

853 
bSètus_t
 
ªt
 = 
SUCCESS
;

855  
uuid
 )

857 
REPORT_UUID
:

858 i‡–
ty≥
 =
HID_REPORT_TYPE_OUTPUT
 )

860 i‡–
Àn
 == 1 )

862 
hidRï‹tLedOut
 = *((
uöt8
 *)
pVÆue
);

866 
ªt
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

869 i‡–
ty≥
 =
HID_REPORT_TYPE_FEATURE
 )

871 i‡–
Àn
 == 1 )

873 
hidRï‹tFótuª
 = *((
uöt8
 *)
pVÆue
);

877 
ªt
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

882 
ªt
 = 
ATT_ERR_ATTR_NOT_FOUND
;

886 
BOOT_KEY_OUTPUT_UUID
:

887 i‡–
Àn
 == 1 )

889 
hidRï‹tBoŸKeyOut
 = *((
uöt8
 *)
pVÆue
);

893 
ªt
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

902  ( 
ªt
 );

903 
	}
}

921 
uöt8
 
	$HidKbM_GëP¨amëî
–
uöt8
 
id
, uöt8 
ty≥
, 
uöt16
 
uuid
, uöt8 *
pLí
, *
pVÆue
 )

923  
uuid
 )

925 
REPORT_UUID
:

926 i‡–
ty≥
 =
HID_REPORT_TYPE_OUTPUT
 )

928 *((
uöt8
 *)
pVÆue
Ë
hidRï‹tLedOut
;

929 *
pLí
 = 1;

931 i‡–
ty≥
 =
HID_REPORT_TYPE_FEATURE
 )

933 *((
uöt8
 *)
pVÆue
Ë
hidRï‹tFótuª
;

934 *
pLí
 = 1;

938 *
pLí
 = 0;

942 
BOOT_KEY_OUTPUT_UUID
:

943 *((
uöt8
 *)
pVÆue
Ë
hidRï‹tBoŸKeyOut
;

944 *
pLí
 = 1;

948 *
pLí
 = 0;

952  ( 
SUCCESS
 );

953 
	}
}

	@../../Profiles/HIDDevKbM/hidkbmservice.h

39 #i‚de‡
HIDKBMSERVICE_H


40 
	#HIDKBMSERVICE_H


	)

42 #ifde‡
__˝lu•lus


56 
	#HID_NUM_REPORTS
 9

	)

59 
	#HID_RPT_ID_MOUSE_IN
 1

60 
	#HID_RPT_ID_KEY_IN
 2

61 
	#HID_RPT_ID_CC_IN
 3

62 
	#HID_RPT_ID_LED_OUT
 0

63 
	#HID_RPT_ID_FEATURE
 0

64 

	)

66 
	#HID_KBD_FLAGS
 
HID_FLAGS_REMOTE_WAKE


	)

93 
bSètus_t
 
HidKbM_AddSîvi˚
( );

111 
uöt8
 
HidKbM_SëP¨amëî
–uöt8 
id
, uöt8 
ty≥
, 
uöt16
 
uuid
, uöt8 
Àn
, *
pVÆue
 );

129 
uöt8
 
HidKbM_GëP¨amëî
–uöt8 
id
, uöt8 
ty≥
, 
uöt16
 
uuid
, uöt8 *
pLí
, *
pVÆue
 );

134 #ifde‡
__˝lu•lus


	@../../Profiles/HIDDevKbd/hidkbdservice.c

42 
	~"bcomdef.h
"

43 
	~"OSAL.h
"

44 
	~"©t.h
"

45 
	~"g©t.h
"

46 
	~"g©t_uuid.h
"

47 
	~"g©t_¥ofûe_uuid.h
"

48 
	~"lökdb.h
"

49 
	~"g©t£rv≠p.h
"

50 
	~"hidkbd£rvi˚.h
"

51 
	~"hiddev.h
"

52 
	~"b©t£rvi˚.h
"

70 
CONST
 
uöt8
 
	ghidSîvUUID
[
ATT_BT_UUID_SIZE
] =

72 
LO_UINT16
(
HID_SERV_UUID
), 
HI_UINT16
(HID_SERV_UUID)

76 
CONST
 
uöt8
 
	ghidBoŸKeyI≈utUUID
[
ATT_BT_UUID_SIZE
] =

78 
LO_UINT16
(
BOOT_KEY_INPUT_UUID
), 
HI_UINT16
(BOOT_KEY_INPUT_UUID)

82 
CONST
 
uöt8
 
	ghidBoŸMou£I≈utUUID
[
ATT_BT_UUID_SIZE
] =

84 
LO_UINT16
(
BOOT_MOUSE_INPUT_UUID
), 
HI_UINT16
(BOOT_MOUSE_INPUT_UUID)

88 
CONST
 
uöt8
 
	ghidBoŸKeyOuçutUUID
[
ATT_BT_UUID_SIZE
] =

90 
LO_UINT16
(
BOOT_KEY_OUTPUT_UUID
), 
HI_UINT16
(BOOT_KEY_OUTPUT_UUID)

94 
CONST
 
uöt8
 
	ghidInfoUUID
[
ATT_BT_UUID_SIZE
] =

96 
LO_UINT16
(
HID_INFORMATION_UUID
), 
HI_UINT16
(HID_INFORMATION_UUID)

100 
CONST
 
uöt8
 
	ghidRï‹tM≠UUID
[
ATT_BT_UUID_SIZE
] =

102 
LO_UINT16
(
REPORT_MAP_UUID
), 
HI_UINT16
(REPORT_MAP_UUID)

106 
CONST
 
uöt8
 
	ghidC⁄åﬁPoötUUID
[
ATT_BT_UUID_SIZE
] =

108 
LO_UINT16
(
HID_CTRL_PT_UUID
), 
HI_UINT16
(HID_CTRL_PT_UUID)

112 
CONST
 
uöt8
 
	ghidRï‹tUUID
[
ATT_BT_UUID_SIZE
] =

114 
LO_UINT16
(
REPORT_UUID
), 
HI_UINT16
(REPORT_UUID)

118 
CONST
 
uöt8
 
	ghidPrŸocﬁModeUUID
[
ATT_BT_UUID_SIZE
] =

120 
LO_UINT16
(
PROTOCOL_MODE_UUID
), 
HI_UINT16
(PROTOCOL_MODE_UUID)

136 
CONST
 
uöt8
 
	ghidInfo
[
HID_INFORMATION_LEN
] =

138 
LO_UINT16
(0x0111), 
HI_UINT16
(0x0111),

140 
HID_KBD_FLAGS


145 
CONST
 
uöt8
 
	ghidRï‹tM≠
[] =

194 
uöt8
 
	ghidRï‹tM≠Lí
 = (
hidRï‹tM≠
);

197 
hidR±M≠_t
 
	ghidR±M≠
[
HID_NUM_REPORTS
];

204 
CONST
 
g©tAârTy≥_t
 
	ghidSîvi˚
 = { 
ATT_BT_UUID_SIZE
, 
hidSîvUUID
 };

207 
uöt16
 
	gö˛ude
 = 
GATT_INVALID_HANDLE
;

210 
uöt8
 
	ghidInfoPr›s
 = 
GATT_PROP_READ
;

213 
uöt8
 
	ghidRï‹tM≠Pr›s
 = 
GATT_PROP_READ
;

216 
uöt8
 
	ghidExtRï‹tRefDesc
[
ATT_BT_UUID_SIZE
] =

217 { 
LO_UINT16
(
BATT_LEVEL_UUID
), 
HI_UINT16
(BATT_LEVEL_UUID) };

220 
uöt8
 
	ghidC⁄åﬁPoötPr›s
 = 
GATT_PROP_WRITE_NO_RSP
;

221 
uöt8
 
	ghidC⁄åﬁPoöt
;

224 
uöt8
 
	ghidPrŸocﬁModePr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE_NO_RSP
;

225 
uöt8
 
	ghidPrŸocﬁMode
 = 
HID_PROTOCOL_MODE_REPORT
;

228 
uöt8
 
	ghidRï‹tKeyInPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_NOTIFY
;

229 
uöt8
 
	ghidRï‹tKeyIn
;

230 
g©tCh¨Cfg_t
 
	ghidRï‹tKeyInClõ¡Ch¨Cfg
[
GATT_MAX_NUM_CONN
];

233 
uöt8
 
	ghidRï‹tRefKeyIn
[
HID_REPORT_REF_LEN
] =

234 { 
HID_RPT_ID_KEY_IN
, 
HID_REPORT_TYPE_INPUT
 };

237 
uöt8
 
	ghidRï‹tLedOutPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
 | 
GATT_PROP_WRITE_NO_RSP
;

238 
uöt8
 
	ghidRï‹tLedOut
;

241 
uöt8
 
	ghidRï‹tRefLedOut
[
HID_REPORT_REF_LEN
] =

242 { 
HID_RPT_ID_LED_OUT
, 
HID_REPORT_TYPE_OUTPUT
 };

245 
uöt8
 
	ghidRï‹tBoŸKeyInPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_NOTIFY
;

246 
uöt8
 
	ghidRï‹tBoŸKeyIn
;

247 
g©tCh¨Cfg_t
 
	ghidRï‹tBoŸKeyInClõ¡Ch¨Cfg
[
GATT_MAX_NUM_CONN
];

250 
uöt8
 
	ghidRï‹tBoŸKeyOutPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
 | 
GATT_PROP_WRITE_NO_RSP
;

251 
uöt8
 
	ghidRï‹tBoŸKeyOut
;

254 
uöt8
 
	ghidRï‹tBoŸMou£InPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_NOTIFY
;

255 
uöt8
 
	ghidRï‹tBoŸMou£In
;

256 
g©tCh¨Cfg_t
 
	ghidRï‹tBoŸMou£InClõ¡Ch¨Cfg
[
GATT_MAX_NUM_CONN
];

259 
uöt8
 
	ghidRï‹tFótuªPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

260 
uöt8
 
	ghidRï‹tFótuª
;

263 
uöt8
 
	ghidRï‹tRefFótuª
[
HID_REPORT_REF_LEN
] =

264 { 
HID_RPT_ID_FEATURE
, 
HID_REPORT_TYPE_FEATURE
 };

270 
g©tAâribuã_t
 
	ghidAârTbl
[] =

274 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

275 
GATT_PERMIT_READ
,

277 (
uöt8
 *Ë&
hidSîvi˚


282 { 
ATT_BT_UUID_SIZE
, 
ö˛udeUUID
 },

283 
GATT_PERMIT_READ
,

285 (
uöt8
 *)&
ö˛ude


290 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

291 
GATT_PERMIT_READ
,

293 &
hidInfoPr›s


298 { 
ATT_BT_UUID_SIZE
, 
hidInfoUUID
 },

299 
GATT_PERMIT_ENCRYPT_READ
,

301 (
uöt8
 *Ë
hidInfo


306 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

307 
GATT_PERMIT_READ
,

309 &
hidC⁄åﬁPoötPr›s


314 { 
ATT_BT_UUID_SIZE
, 
hidC⁄åﬁPoötUUID
 },

315 
GATT_PERMIT_ENCRYPT_WRITE
,

317 &
hidC⁄åﬁPoöt


322 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

323 
GATT_PERMIT_READ
,

325 &
hidPrŸocﬁModePr›s


330 { 
ATT_BT_UUID_SIZE
, 
hidPrŸocﬁModeUUID
 },

331 
GATT_PERMIT_ENCRYPT_READ
 | 
GATT_PERMIT_ENCRYPT_WRITE
,

333 &
hidPrŸocﬁMode


339 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

340 
GATT_PERMIT_READ
,

342 &
hidRï‹tM≠Pr›s


347 { 
ATT_BT_UUID_SIZE
, 
hidRï‹tM≠UUID
 },

348 
GATT_PERMIT_ENCRYPT_READ
,

350 (
uöt8
 *Ë
hidRï‹tM≠


355 { 
ATT_BT_UUID_SIZE
, 
extRï‹tRefUUID
 },

356 
GATT_PERMIT_READ
,

358 
hidExtRï‹tRefDesc


363 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

364 
GATT_PERMIT_READ
,

366 &
hidRï‹tKeyInPr›s


371 { 
ATT_BT_UUID_SIZE
, 
hidRï‹tUUID
 },

372 
GATT_PERMIT_ENCRYPT_READ
,

374 &
hidRï‹tKeyIn


379 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

380 
GATT_PERMIT_READ
 | 
GATT_PERMIT_ENCRYPT_WRITE
,

382 (
uöt8
 *Ë&
hidRï‹tKeyInClõ¡Ch¨Cfg


387 { 
ATT_BT_UUID_SIZE
, 
ªp‹tRefUUID
 },

388 
GATT_PERMIT_READ
,

390 
hidRï‹tRefKeyIn


395 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

396 
GATT_PERMIT_READ
,

398 &
hidRï‹tLedOutPr›s


403 { 
ATT_BT_UUID_SIZE
, 
hidRï‹tUUID
 },

404 
GATT_PERMIT_ENCRYPT_READ
 | 
GATT_PERMIT_ENCRYPT_WRITE
,

406 &
hidRï‹tLedOut


411 { 
ATT_BT_UUID_SIZE
, 
ªp‹tRefUUID
 },

412 
GATT_PERMIT_READ
,

414 
hidRï‹tRefLedOut


419 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

420 
GATT_PERMIT_READ
,

422 &
hidRï‹tBoŸKeyInPr›s


427 { 
ATT_BT_UUID_SIZE
, 
hidBoŸKeyI≈utUUID
 },

428 
GATT_PERMIT_ENCRYPT_READ
,

430 &
hidRï‹tBoŸKeyIn


435 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

436 
GATT_PERMIT_READ
 | 
GATT_PERMIT_ENCRYPT_WRITE
,

438 (
uöt8
 *Ë&
hidRï‹tBoŸKeyInClõ¡Ch¨Cfg


443 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

444 
GATT_PERMIT_READ
,

446 &
hidRï‹tBoŸKeyOutPr›s


451 { 
ATT_BT_UUID_SIZE
, 
hidBoŸKeyOuçutUUID
 },

452 
GATT_PERMIT_ENCRYPT_READ
 | 
GATT_PERMIT_ENCRYPT_WRITE
,

454 &
hidRï‹tBoŸKeyOut


459 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

460 
GATT_PERMIT_READ
,

462 &
hidRï‹tBoŸMou£InPr›s


467 { 
ATT_BT_UUID_SIZE
, 
hidBoŸMou£I≈utUUID
 },

468 
GATT_PERMIT_ENCRYPT_READ
,

470 &
hidRï‹tBoŸMou£In


475 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

476 
GATT_PERMIT_READ
 | 
GATT_PERMIT_ENCRYPT_WRITE
,

478 (
uöt8
 *Ë&
hidRï‹tBoŸMou£InClõ¡Ch¨Cfg


483 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

484 
GATT_PERMIT_READ
,

486 &
hidRï‹tFótuªPr›s


491 { 
ATT_BT_UUID_SIZE
, 
hidRï‹tUUID
},

492 
GATT_PERMIT_ENCRYPT_READ
 | 
GATT_PERMIT_ENCRYPT_WRITE
,

494 &
hidRï‹tFótuª


499 { 
ATT_BT_UUID_SIZE
, 
ªp‹tRefUUID
 },

500 
GATT_PERMIT_READ
,

502 
hidRï‹tRefFótuª


509 
	mHID_SERVICE_IDX
,

510 
	mHID_INCLUDED_SERVICE_IDX
,

511 
	mHID_INFO_DECL_IDX
,

512 
	mHID_INFO_IDX
,

513 
	mHID_CONTROL_POINT_DECL_IDX
,

514 
	mHID_CONTROL_POINT_IDX
,

515 
	mHID_PROTOCOL_MODE_DECL_IDX
,

516 
	mHID_PROTOCOL_MODE_IDX
,

517 
	mHID_REPORT_MAP_DECL_IDX
,

518 
	mHID_REPORT_MAP_IDX
,

519 
	mHID_EXT_REPORT_REF_DESC_IDX
,

520 
	mHID_REPORT_KEY_IN_DECL_IDX
,

521 
	mHID_REPORT_KEY_IN_IDX
,

522 
	mHID_REPORT_KEY_IN_CCCD_IDX
,

523 
	mHID_REPORT_REF_KEY_IN_IDX
,

524 
	mHID_REPORT_LED_OUT_DECL_IDX
,

525 
	mHID_REPORT_LED_OUT_IDX
,

526 
	mHID_REPORT_REF_LED_OUT_IDX
,

527 
	mHID_BOOT_KEY_IN_DECL_IDX
,

528 
	mHID_BOOT_KEY_IN_IDX
,

529 
	mHID_BOOT_KEY_IN_CCCD_IDX
,

530 
	mHID_BOOT_KEY_OUT_DECL_IDX
,

531 
	mHID_BOOT_KEY_OUT_IDX
,

532 
	mHID_BOOT_MOUSE_IN_DECL_IDX
,

533 
	mHID_BOOT_MOUSE_IN_IDX
,

534 
	mHID_BOOT_MOUSE_IN_CCCD_IDX
,

535 
	mHID_FEATURE_DECL_IDX
,

536 
	mHID_FEATURE_IDX
,

537 
	mHID_REPORT_REF_FEATURE_IDX


549 
CONST
 
g©tSîvi˚CBs_t
 
	ghidKbdCBs
 =

551 
HidDev_RódAârCB
,

552 
HidDev_WrôeAârCB
,

553 
NULL


568 
bSètus_t
 
	$HidKbd_AddSîvi˚
( )

570 
uöt8
 
°©us
 = 
SUCCESS
;

573 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
hidRï‹tKeyInClõ¡Ch¨Cfg
 );

574 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
hidRï‹tBoŸKeyInClõ¡Ch¨Cfg
 );

575 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
hidRï‹tBoŸMou£InClõ¡Ch¨Cfg
 );

578 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
hidAârTbl
, 
	`GATT_NUM_ATTRS
–hidAârTb»), &
hidKbdCBs
 );

581 
	`B©t_GëP¨amëî
–
BATT_PARAM_SERVICE_HANDLE
,

582 &
	`GATT_INCLUDED_HANDLE
–
hidAârTbl
, 
HID_INCLUDED_SERVICE_IDX
 ) );

588 
hidR±M≠
[0].
id
 = 
hidRï‹tRefKeyIn
[0];

589 
hidR±M≠
[0].
ty≥
 = 
hidRï‹tRefKeyIn
[1];

590 
hidR±M≠
[0].
h™dÀ
 = 
hidAârTbl
[
HID_REPORT_KEY_IN_IDX
].handle;

591 
hidR±M≠
[0].
cccdH™dÀ
 = 
hidAârTbl
[
HID_REPORT_KEY_IN_CCCD_IDX
].
h™dÀ
;

592 
hidR±M≠
[0].
mode
 = 
HID_PROTOCOL_MODE_REPORT
;

595 
hidR±M≠
[1].
id
 = 
hidRï‹tRefLedOut
[0];

596 
hidR±M≠
[1].
ty≥
 = 
hidRï‹tRefLedOut
[1];

597 
hidR±M≠
[1].
h™dÀ
 = 
hidAârTbl
[
HID_REPORT_LED_OUT_IDX
].handle;

598 
hidR±M≠
[1].
cccdH™dÀ
 = 0;

599 
hidR±M≠
[1].
mode
 = 
HID_PROTOCOL_MODE_REPORT
;

603 
hidR±M≠
[2].
id
 = 
hidRï‹tRefKeyIn
[0];

604 
hidR±M≠
[2].
ty≥
 = 
hidRï‹tRefKeyIn
[1];

605 
hidR±M≠
[2].
h™dÀ
 = 
hidAârTbl
[
HID_BOOT_KEY_IN_IDX
].handle;

606 
hidR±M≠
[2].
cccdH™dÀ
 = 
hidAârTbl
[
HID_BOOT_KEY_IN_CCCD_IDX
].
h™dÀ
;

607 
hidR±M≠
[2].
mode
 = 
HID_PROTOCOL_MODE_BOOT
;

611 
hidR±M≠
[3].
id
 = 
hidRï‹tRefLedOut
[0];

612 
hidR±M≠
[3].
ty≥
 = 
hidRï‹tRefLedOut
[1];

613 
hidR±M≠
[3].
h™dÀ
 = 
hidAârTbl
[
HID_BOOT_KEY_OUT_IDX
].handle;

614 
hidR±M≠
[3].
cccdH™dÀ
 = 0;

615 
hidR±M≠
[3].
mode
 = 
HID_PROTOCOL_MODE_BOOT
;

618 
hidR±M≠
[4].
id
 = 
HID_RPT_ID_MOUSE_IN
;

619 
hidR±M≠
[4].
ty≥
 = 
HID_REPORT_TYPE_INPUT
;

620 
hidR±M≠
[4].
h™dÀ
 = 
hidAârTbl
[
HID_BOOT_MOUSE_IN_IDX
].handle;

621 
hidR±M≠
[4].
cccdH™dÀ
 = 
hidAârTbl
[
HID_BOOT_MOUSE_IN_CCCD_IDX
].
h™dÀ
;

622 
hidR±M≠
[4].
mode
 = 
HID_PROTOCOL_MODE_BOOT
;

625 
hidR±M≠
[5].
id
 = 
hidRï‹tRefFótuª
[0];

626 
hidR±M≠
[5].
ty≥
 = 
hidRï‹tRefFótuª
[1];

627 
hidR±M≠
[5].
h™dÀ
 = 
hidAârTbl
[
HID_FEATURE_IDX
].handle;

628 
hidR±M≠
[5].
cccdH™dÀ
 = 0;

629 
hidR±M≠
[5].
mode
 = 
HID_PROTOCOL_MODE_REPORT
;

632 
VOID
 
	`B©t_GëP¨amëî
–
BATT_PARAM_BATT_LEVEL_IN_REPORT
, &(
hidR±M≠
[6]) );

635 
	`HidDev_Regi°îRï‹ts
–
HID_NUM_REPORTS
, 
hidR±M≠
 );

637  ( 
°©us
 );

638 
	}
}

656 
uöt8
 
	$HidKbd_SëP¨amëî
–
uöt8
 
id
, uöt8 
ty≥
, 
uöt16
 
uuid
, uöt8 
Àn
, *
pVÆue
 )

658 
bSètus_t
 
ªt
 = 
SUCCESS
;

660  
uuid
 )

662 
REPORT_UUID
:

663 i‡–
ty≥
 =
HID_REPORT_TYPE_OUTPUT
 )

665 i‡–
Àn
 == 1 )

667 
hidRï‹tLedOut
 = *((
uöt8
 *)
pVÆue
);

671 
ªt
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

674 i‡–
ty≥
 =
HID_REPORT_TYPE_FEATURE
 )

676 i‡–
Àn
 == 1 )

678 
hidRï‹tFótuª
 = *((
uöt8
 *)
pVÆue
);

682 
ªt
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

687 
ªt
 = 
ATT_ERR_ATTR_NOT_FOUND
;

691 
BOOT_KEY_OUTPUT_UUID
:

692 i‡–
Àn
 == 1 )

694 
hidRï‹tBoŸKeyOut
 = *((
uöt8
 *)
pVÆue
);

698 
ªt
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

707  ( 
ªt
 );

708 
	}
}

726 
uöt8
 
	$HidKbd_GëP¨amëî
–
uöt8
 
id
, uöt8 
ty≥
, 
uöt16
 
uuid
, uöt8 *
pLí
, *
pVÆue
 )

728  
uuid
 )

730 
REPORT_UUID
:

731 i‡–
ty≥
 =
HID_REPORT_TYPE_OUTPUT
 )

733 *((
uöt8
 *)
pVÆue
Ë
hidRï‹tLedOut
;

734 *
pLí
 = 1;

736 i‡–
ty≥
 =
HID_REPORT_TYPE_FEATURE
 )

738 *((
uöt8
 *)
pVÆue
Ë
hidRï‹tFótuª
;

739 *
pLí
 = 1;

743 *
pLí
 = 0;

747 
BOOT_KEY_OUTPUT_UUID
:

748 *((
uöt8
 *)
pVÆue
Ë
hidRï‹tBoŸKeyOut
;

749 *
pLí
 = 1;

753 *
pLí
 = 0;

757  ( 
SUCCESS
 );

758 
	}
}

	@../../Profiles/HIDDevKbd/hidkbdservice.h

39 #i‚de‡
HIDKBDSERVICE_H


40 
	#HIDKBDSERVICE_H


	)

42 #ifde‡
__˝lu•lus


56 
	#HID_NUM_REPORTS
 7

	)

59 
	#HID_RPT_ID_KEY_IN
 0

60 
	#HID_RPT_ID_MOUSE_IN
 1

61 
	#HID_RPT_ID_LED_OUT
 0

62 
	#HID_RPT_ID_FEATURE
 0

63 

	)

65 
	#HID_KBD_FLAGS
 
HID_FLAGS_REMOTE_WAKE


	)

92 
bSètus_t
 
HidKbd_AddSîvi˚
( );

110 
uöt8
 
HidKbd_SëP¨amëî
–uöt8 
id
, uöt8 
ty≥
, 
uöt16
 
uuid
, uöt8 
Àn
, *
pVÆue
 );

128 
uöt8
 
HidKbd_GëP¨amëî
–uöt8 
id
, uöt8 
ty≥
, 
uöt16
 
uuid
, uöt8 *
pLí
, *
pVÆue
 );

133 #ifde‡
__˝lu•lus


	@../../Profiles/HeartRate/heartrateservice.c

43 
	~"bcomdef.h
"

44 
	~"OSAL.h
"

45 
	~"lökdb.h
"

46 
	~"©t.h
"

47 
	~"g©t.h
"

48 
	~"g©t_uuid.h
"

49 
	~"g©t_¥ofûe_uuid.h
"

50 
	~"g©t£rv≠p.h
"

52 
	~"hóπøã£rvi˚.h
"

63 
	#HEARTRATE_MEAS_VALUE_POS
 2

	)

73 
CONST
 
uöt8
 
	ghóπR©eSîvUUID
[
ATT_BT_UUID_SIZE
] =

75 
LO_UINT16
(
HEARTRATE_SERV_UUID
), 
HI_UINT16
(HEARTRATE_SERV_UUID)

79 
CONST
 
uöt8
 
	ghóπR©eMósUUID
[
ATT_BT_UUID_SIZE
] =

81 
LO_UINT16
(
HEARTRATE_MEAS_UUID
), 
HI_UINT16
(HEARTRATE_MEAS_UUID)

85 
CONST
 
uöt8
 
	ghóπR©eSísLocUUID
[
ATT_BT_UUID_SIZE
] =

87 
LO_UINT16
(
BODY_SENSOR_LOC_UUID
), 
HI_UINT16
(BODY_SENSOR_LOC_UUID)

91 
CONST
 
uöt8
 
	ghóπR©eComm™dUUID
[
ATT_BT_UUID_SIZE
] =

93 
LO_UINT16
(
HEARTRATE_CTRL_PT_UUID
), 
HI_UINT16
(HEARTRATE_CTRL_PT_UUID)

108 
hóπR©eSîvi˚CB_t
 
	ghóπR©eSîvi˚CB
;

115 
CONST
 
g©tAârTy≥_t
 
	ghóπR©eSîvi˚
 = { 
ATT_BT_UUID_SIZE
, 
hóπR©eSîvUUID
 };

119 
uöt8
 
	ghóπR©eMósPr›s
 = 
GATT_PROP_NOTIFY
;

120 
uöt8
 
	ghóπR©eMós
 = 0;

121 
g©tCh¨Cfg_t
 
	ghóπR©eMósClõ¡Ch¨Cfg
[
GATT_MAX_NUM_CONN
];

124 
uöt8
 
	ghóπR©eSísLocPr›s
 = 
GATT_PROP_READ
;

125 
uöt8
 
	ghóπR©eSísLoc
 = 0;

128 
uöt8
 
	ghóπR©eComm™dPr›s
 = 
GATT_PROP_WRITE
;

129 
uöt8
 
	ghóπR©eComm™d
 = 0;

135 
g©tAâribuã_t
 
	ghóπR©eAârTbl
[] =

139 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

140 
GATT_PERMIT_READ
,

142 (
uöt8
 *)&
hóπR©eSîvi˚


147 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

148 
GATT_PERMIT_READ
,

150 &
hóπR©eMósPr›s


155 { 
ATT_BT_UUID_SIZE
, 
hóπR©eMósUUID
 },

158 &
hóπR©eMós


163 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

164 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

166 (
uöt8
 *Ë&
hóπR©eMósClõ¡Ch¨Cfg


171 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

172 
GATT_PERMIT_READ
,

174 &
hóπR©eSísLocPr›s


179 { 
ATT_BT_UUID_SIZE
, 
hóπR©eSísLocUUID
 },

180 
GATT_PERMIT_READ
,

182 &
hóπR©eSísLoc


187 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

188 
GATT_PERMIT_READ
,

190 &
hóπR©eComm™dPr›s


195 { 
ATT_BT_UUID_SIZE
, 
hóπR©eComm™dUUID
 },

196 
GATT_PERMIT_WRITE
,

198 &
hóπR©eComm™d


206 
uöt8
 
hóπR©e_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

207 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

208 
bSètus_t
 
hóπR©e_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

209 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

215 
CONST
 
g©tSîvi˚CBs_t
 
	ghóπR©eCBs
 =

217 
hóπR©e_RódAârCB
,

218 
hóπR©e_WrôeAârCB
,

219 
NULL


237 
bSètus_t
 
	$HóπR©e_AddSîvi˚
–
uöt32
 
£rvi˚s
 )

239 
uöt8
 
°©us
 = 
SUCCESS
;

242 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
hóπR©eMósClõ¡Ch¨Cfg
 );

244 i‡–
£rvi˚s
 & 
HEARTRATE_SERVICE
 )

247 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
hóπR©eAârTbl
,

248 
	`GATT_NUM_ATTRS
–
hóπR©eAârTbl
 ),

249 &
hóπR©eCBs
 );

252  ( 
°©us
 );

253 
	}
}

264 
	$HóπR©e_Regi°î
–
hóπR©eSîvi˚CB_t
 
p‚Sîvi˚CB
 )

266 
hóπR©eSîvi˚CB
 = 
p‚Sîvi˚CB
;

267 
	}
}

283 
bSètus_t
 
	$HóπR©e_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 )

285 
bSètus_t
 
ªt
 = 
SUCCESS
;

286  
∑øm
 )

288 
HEARTRATE_MEAS_CHAR_CFG
:

293 
HEARTRATE_SENS_LOC
:

294 
hóπR©eSísLoc
 = *((
uöt8
*)
vÆue
);

298 
ªt
 = 
INVALIDPARAMETER
;

302  ( 
ªt
 );

303 
	}
}

318 
bSètus_t
 
	$HóπR©e_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

320 
bSètus_t
 
ªt
 = 
SUCCESS
;

321  
∑øm
 )

323 
HEARTRATE_MEAS_CHAR_CFG
:

328 
HEARTRATE_SENS_LOC
:

329 *((
uöt8
*)
vÆue
Ë
hóπR©eSísLoc
;

332 
HEARTRATE_COMMAND
:

333 *((
uöt8
*)
vÆue
Ë
hóπR©eComm™d
;

337 
ªt
 = 
INVALIDPARAMETER
;

341  ( 
ªt
 );

342 
	}
}

355 
bSètus_t
 
	$HóπR©e_MósNŸify
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueNŸi_t
 *
pNŸi
 )

357 
uöt16
 
vÆue
 = 
	`GATTSîvAµ_RódCh¨Cfg
–
c⁄nH™dÀ
, 
hóπR©eMósClõ¡Ch¨Cfg
 );

360 i‡–
vÆue
 & 
GATT_CLIENT_CFG_NOTIFY
 )

363 
pNŸi
->
h™dÀ
 = 
hóπR©eAârTbl
[
HEARTRATE_MEAS_VALUE_POS
].handle;

366  
	`GATT_NŸifiˇti⁄
–
c⁄nH™dÀ
, 
pNŸi
, 
FALSE
 );

369  
bÀInc‹ª˘Mode
;

370 
	}
}

386 
uöt8
 
	$hóπR©e_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

387 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

389 
bSètus_t
 
°©us
 = 
SUCCESS
;

392 i‡–
off£t
 > 0 )

394  ( 
ATT_ERR_ATTR_NOT_LONG
 );

397 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

399 i‡(
uuid
 =
BODY_SENSOR_LOC_UUID
)

401 *
pLí
 = 1;

402 
pVÆue
[0] = *
pAâr
->pValue;

406 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

409  ( 
°©us
 );

410 
	}
}

425 
bSètus_t
 
	$hóπR©e_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

426 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

428 
bSètus_t
 
°©us
 = 
SUCCESS
;

430 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

431  
uuid
 )

433 
HEARTRATE_CTRL_PT_UUID
:

434 i‡–
off£t
 > 0 )

436 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

438 i‡(
Àn
 != 1)

440 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

442 i‡(*
pVÆue
 !
HEARTRATE_COMMAND_ENERGY_EXP
)

444 
°©us
 = 
HEARTRATE_ERR_NOT_SUP
;

448 *(
pAâr
->
pVÆue
) =ÖValue[0];

450 (*
hóπR©eSîvi˚CB
)(
HEARTRATE_COMMAND_SET
);

455 
GATT_CLIENT_CHAR_CFG_UUID
:

456 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

457 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

458 i‡–
°©us
 =
SUCCESS
 )

460 
uöt16
 
ch¨Cfg
 = 
	`BUILD_UINT16
–
pVÆue
[0],ÖValue[1] );

462 (*
hóπR©eSîvi˚CB
)–(
ch¨Cfg
 =
GATT_CFG_NO_OPERATION
) ?

463 
HEARTRATE_MEAS_NOTI_DISABLED
 :

464 
HEARTRATE_MEAS_NOTI_ENABLED
 );

469 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

473  ( 
°©us
 );

474 
	}
}

486 
	$HóπR©e_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

489 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

492 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

493 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

494 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

496 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
hóπR©eMósClõ¡Ch¨Cfg
 );

499 
	}
}

	@../../Profiles/HeartRate/heartrateservice.h

40 #i‚de‡
HEARTRATESERVICE_H


41 
	#HEARTRATESERVICE_H


	)

43 #ifde‡
__˝lu•lus


58 
	#HEARTRATE_MEAS
 0

	)

59 
	#HEARTRATE_MEAS_CHAR_CFG
 1

	)

60 
	#HEARTRATE_SENS_LOC
 2

	)

61 
	#HEARTRATE_COMMAND
 3

	)

64 
	#HEARTRATE_MEAS_MAX
 (
ATT_MTU_SIZE
 -5)

	)

67 
	#HEARTRATE_FLAGS_FORMAT_UINT16
 0x01

	)

68 
	#HEARTRATE_FLAGS_CONTACT_NOT_SUP
 0x00

	)

69 
	#HEARTRATE_FLAGS_CONTACT_NOT_DET
 0x04

	)

70 
	#HEARTRATE_FLAGS_CONTACT_DET
 0x06

	)

71 
	#HEARTRATE_FLAGS_ENERGY_EXP
 0x08

	)

72 
	#HEARTRATE_FLAGS_RR
 0x10

	)

75 
	#HEARTRATE_SENS_LOC_OTHER
 0x00

	)

76 
	#HEARTRATE_SENS_LOC_CHEST
 0x01

	)

77 
	#HEARTRATE_SENS_LOC_WRIST
 0x02

	)

78 
	#HEARTRATE_SENS_LOC_FINGER
 0x03

	)

79 
	#HEARTRATE_SENS_LOC_HAND
 0x04

	)

80 
	#HEARTRATE_SENS_LOC_EARLOBE
 0x05

	)

81 
	#HEARTRATE_SENS_LOC_FOOT
 0x06

	)

84 
	#HEARTRATE_COMMAND_ENERGY_EXP
 0x01

	)

88 
	#HEARTRATE_ERR_NOT_SUP
 0x80

	)

91 
	#HEARTRATE_SERVICE
 0x00000001

	)

94 
	#HEARTRATE_MEAS_NOTI_ENABLED
 1

	)

95 
	#HEARTRATE_MEAS_NOTI_DISABLED
 2

	)

96 
	#HEARTRATE_COMMAND_SET
 3

	)

103 (*
hóπR©eSîvi˚CB_t
)(
	tuöt8
 
	tevít
);

126 
bSètus_t
 
HóπR©e_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

135 
HóπR©e_Regi°î
–
hóπR©eSîvi˚CB_t
 
p‚Sîvi˚CB
 );

147 
bSètus_t
 
HóπR©e_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

158 
bSètus_t
 
HóπR©e_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

171 
bSètus_t
 
HóπR©e_MósNŸify
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueNŸi_t
 *
pNŸi
 );

183 
HóπR©e_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

188 #ifde‡
__˝lu•lus


	@../../Profiles/Keys/simplekeys.c

43 
	~"bcomdef.h
"

44 
	~"OSAL.h
"

45 
	~"lökdb.h
"

46 
	~"©t.h
"

47 
	~"g©t.h
"

48 
	~"g©t_uuid.h
"

49 
	~"g©t£rv≠p.h
"

50 
	~"g≠b⁄dmgr.h
"

52 
	~"sim∂ekeys.h
"

62 
	#SERVAPP_NUM_ATTR_SUPPORTED
 5

	)

72 
CONST
 
uöt8
 
	gskSîvUUID
[
ATT_BT_UUID_SIZE
] =

74 
LO_UINT16
(
SK_SERV_UUID
), 
HI_UINT16
(SK_SERV_UUID)

78 
CONST
 
uöt8
 
	gkeyPªs£dUUID
[
ATT_BT_UUID_SIZE
] =

80 
LO_UINT16
(
SK_KEYPRESSED_UUID
), 
HI_UINT16
(SK_KEYPRESSED_UUID)

100 
CONST
 
g©tAârTy≥_t
 
	gskSîvi˚
 = { 
ATT_BT_UUID_SIZE
, 
skSîvUUID
 };

103 
uöt8
 
	gskCh¨Pr›s
 = 
GATT_PROP_NOTIFY
;

106 
uöt8
 
	gskKeyPªs£d
 = 0;

109 
g©tCh¨Cfg_t
 
	gskC⁄fig
[
GATT_MAX_NUM_CONN
];

112 
uöt8
 
	gskCh¨U£rDe•
[16] = "Key Press State\0";

119 
g©tAâribuã_t
 
	gsim∂ekeysAârTbl
[
SERVAPP_NUM_ATTR_SUPPORTED
] =

123 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

124 
GATT_PERMIT_READ
,

126 (
uöt8
 *)&
skSîvi˚


131 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

132 
GATT_PERMIT_READ
,

134 &
skCh¨Pr›s


139 { 
ATT_BT_UUID_SIZE
, 
keyPªs£dUUID
 },

142 &
skKeyPªs£d


147 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

148 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

150 (
uöt8
 *)
skC⁄fig


155 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

156 
GATT_PERMIT_READ
,

158 
skCh¨U£rDe•


166 
uöt8
 
sk_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

167 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

168 
bSètus_t
 
sk_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

169 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

171 
sk_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

177 
CONST
 
g©tSîvi˚CBs_t
 
	gskCBs
 =

179 
sk_RódAârCB
,

180 
sk_WrôeAârCB
,

181 
NULL


199 
bSètus_t
 
	$SK_AddSîvi˚
–
uöt32
 
£rvi˚s
 )

201 
uöt8
 
°©us
 = 
SUCCESS
;

204 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
skC⁄fig
 );

207 
VOID
 
	`lökDB_Regi°î
–
sk_H™dÀC⁄nSètusCB
 );

210 i‡–
£rvi˚s
 & 
SK_SERVICE
 )

213 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
sim∂ekeysAârTbl
,

214 
	`GATT_NUM_ATTRS
–
sim∂ekeysAârTbl
 ),

215 &
skCBs
 );

218  ( 
°©us
 );

219 
	}
}

235 
bSètus_t
 
	$SK_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
pVÆue
 )

237 
bSètus_t
 
ªt
 = 
SUCCESS
;

238  
∑øm
 )

240 
SK_KEY_ATTR
:

241 i‡–
Àn
 = ( 
uöt8
 ) )

243 
skKeyPªs£d
 = *((
uöt8
*)
pVÆue
);

246 
	`GATTSîvAµ_Pro˚ssCh¨Cfg
–
skC⁄fig
, &
skKeyPªs£d
, 
FALSE
,

247 
sim∂ekeysAârTbl
, 
	`GATT_NUM_ATTRS
( simplekeysAttrTbl ),

248 
INVALID_TASK_ID
 );

252 
ªt
 = 
bÀInvÆidR™ge
;

257 
ªt
 = 
INVALIDPARAMETER
;

261  ( 
ªt
 );

262 
	}
}

277 
bSètus_t
 
	$SK_GëP¨amëî
–
uöt8
 
∑øm
, *
pVÆue
 )

279 
bSètus_t
 
ªt
 = 
SUCCESS
;

280  
∑øm
 )

282 
SK_KEY_ATTR
:

283 *((
uöt8
*)
pVÆue
Ë
skKeyPªs£d
;

287 
ªt
 = 
INVALIDPARAMETER
;

291  ( 
ªt
 );

292 
	}
}

308 
uöt8
 
	$sk_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

309 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

311 
bSètus_t
 
°©us
 = 
SUCCESS
;

314 i‡–
off£t
 > 0 )

316  ( 
ATT_ERR_ATTR_NOT_LONG
 );

319 i‡–
pAâr
->
ty≥
.
Àn
 =
ATT_BT_UUID_SIZE
 )

322 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

323  
uuid
 )

330 
SK_KEYPRESSED_UUID
:

331 *
pLí
 = 1;

332 
pVÆue
[0] = *
pAâr
->pValue;

337 *
pLí
 = 0;

338 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

345 *
pLí
 = 0;

346 
°©us
 = 
ATT_ERR_INVALID_HANDLE
;

349  ( 
°©us
 );

350 
	}
}

365 
bSètus_t
 
	$sk_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

366 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

368 
bSètus_t
 
°©us
 = 
SUCCESS
;

370 i‡–
pAâr
->
ty≥
.
Àn
 =
ATT_BT_UUID_SIZE
 )

373 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

374  
uuid
 )

376 
GATT_CLIENT_CHAR_CFG_UUID
:

377 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

378 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

383 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

390 
°©us
 = 
ATT_ERR_INVALID_HANDLE
;

393  ( 
°©us
 );

394 
	}
}

406 
	$sk_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

409 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

412 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

413 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

414 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

416 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
skC⁄fig
 );

419 
	}
}

	@../../Profiles/Keys/simplekeys.h

40 #i‚de‡
SIMPLEKEYS_H


41 
	#SIMPLEKEYS_H


	)

43 #ifde‡
__˝lu•lus


57 
	#SK_KEY_ATTR
 0

58 

	)

60 
	#SK_SERV_UUID
 0xFFE0

	)

63 
	#SK_KEYPRESSED_UUID
 0xFFE1

	)

66 
	#SK_KEY_LEFT
 0x01

	)

67 
	#SK_KEY_RIGHT
 0x02

	)

70 
	#SK_SERVICE
 0x00000001

	)

99 
bSètus_t
 
SK_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

111 
bSètus_t
 
SK_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
pVÆue
 );

122 
bSètus_t
 
SK_GëP¨amëî
–
uöt8
 
∑øm
, *
pVÆue
 );

128 #ifde‡
__˝lu•lus


	@../../Profiles/OAD/oad.h

39 #i‚de‡
OAD_H


40 
	#OAD_H


	)

42 #ifde‡
__˝lu•lus


51 
	~"hÆ_´s.h
"

52 
	~"hÆ_ty≥s.h
"

58 
	#OAD_SERVICE_UUID
 0xFFC0

	)

59 
	#OAD_IMG_IDENTIFY_UUID
 0xFFC1

	)

60 
	#OAD_IMG_BLOCK_UUID
 0xFFC2

	)

62 
	#OAD_IMG_CRC_OSET
 0x0000

	)

63 #i‡
deföed
 
FEATURE_OAD_SECURE


64 
	#OAD_IMG_HDR_OSET
 0x0000

	)

66 
	#OAD_IMG_HDR_OSET
 0x0002

	)

69 
	#OAD_CHAR_CNT
 2

	)

72 
	#OAD_CHAR_IMG_IDENTIFY
 0

	)

73 
	#OAD_CHAR_IMG_BLOCK
 1

	)

76 
	#OAD_IMG_ID_SIZE
 4

	)

79 
	#OAD_IMG_HDR_SIZE
 ( 2 + 2 + 
OAD_IMG_ID_SIZE
 )

	)

82 
	#OAD_BLOCK_SIZE
 16

	)

83 
	#OAD_BLOCKS_PER_PAGE
 (
HAL_FLASH_PAGE_SIZE
 / 
OAD_BLOCK_SIZE
)

	)

84 
	#OAD_BLOCK_MAX
 (
OAD_BLOCKS_PER_PAGE
 * 
OAD_IMG_D_AREA
)

	)

91 
	#OAD_IMG_ID
–
vî
 ) ( (vîË& 0x01 )

	)

92 
	#OAD_VER_NUM
–
vî
 ) ( (vîË>> 0x01 )

	)

95 #i‡
deföed
 (
HAL_IMAGE_A
)

96 
	#OAD_IMG_VER
–
vî
 ) ( (
uöt16
)( (ver) << 0x01 ) )

97 #ñ£

	)

98 
	#OAD_IMG_VER
–
vî
 ) ( (
uöt16
)( ( (ver) << 0x01 ) | 0x01 ) )

100 

	)

111 #i‡
deföed
 
FEATURE_OAD_SECURE


114 
uöt16
 
¸c0
;

116 
uöt16
 
¸c1
;

118 
uöt16
 
vî
;

119 
uöt16
 
Àn
;

120 
uöt8
 
uid
[4];

121 
uöt8
 
ªs
[4];

122 } 
	timg_hdr_t
;

124 #i‡
deföed
 
FEATURE_OAD_SECURE


125 
°©ic_as£π
(((
img_hdr_t
) == 16), "Bad SBL_ADDR_AES_HDR definition.");

126 
°©ic_as£π
((((
img_hdr_t
Ë% 
KEY_BLENGTH
) == 0),

132 
uöt8
 
sig«tuª
[
KEY_BLENGTH
];

133 
uöt8
 
n⁄˚12
[12];

134 
uöt8
 
•¨e
[4];

135 } 
	t´s_hdr_t
;

140 #ifde‡
__˝lu•lus


	@../../Profiles/OAD/oad_target.c

44 
	~"bcomdef.h
"

45 
	~"©t.h
"

46 
	~"g©t.h
"

47 
	~"g©t_uuid.h
"

48 
	~"g©t£rv≠p.h
"

49 
	~"hÆ_´s.h
"

50 
	~"hÆ_¸c.h
"

51 
	~"hÆ_Êash.h
"

52 
	~"hÆ_dma.h
"

53 #i‡(
deföed
 
HAL_LCD
Ë&& (HAL_LCD =
TRUE
)

54 
	~"hÆ_lcd.h
"

56 
	~"hÆ_ty≥s.h
"

57 
	~"lökdb.h
"

58 
	~"ﬂd.h
"

59 
	~"ﬂd_èrgë.h
"

60 
	~"OSAL.h
"

66 
	#OAD_FLASH_PAGE_MULT
 ((
uöt16
)(
HAL_FLASH_PAGE_SIZE
 / 
HAL_FLASH_WORD_SIZE
))

	)

68 #i‡
deföed
 (
FEATURE_OAD_SECURE
Ë&& deföed (
HAL_IMAGE_A
)

71 
	#BOOTP_E_IMAGE_A


	)

74 #i‡!
deföed
 (
OAD_IMAGE_VERSION
)

75 
	#OAD_IMAGE_VERSION
 0x0000

	)

78 #i‡!
deföed
 (
OAD_IMAGE_A_USER_ID
)

79 
	#OAD_IMAGE_A_USER_ID
 {'A', 'A', 'A', 'A'}

	)

82 #i‡!
deföed
 (
OAD_IMAGE_B_USER_ID
)

83 
	#OAD_IMAGE_B_USER_ID
 {'B', 'B', 'B', 'B'}

	)

95 
CONST
 
uöt8
 
	gﬂdSîvUUID
[
ATT_UUID_SIZE
] =

97 
TI_BASE_UUID_128
–
OAD_SERVICE_UUID
 )

100 
CONST
 
uöt8
 
	gﬂdCh¨UUID
[
OAD_CHAR_CNT
][
ATT_UUID_SIZE
] =

103 
TI_BASE_UUID_128
–
OAD_IMG_IDENTIFY_UUID
 ),

106 
TI_BASE_UUID_128
–
OAD_IMG_BLOCK_UUID
 )

114 
CONST
 
g©tAârTy≥_t
 
	gﬂdSîvi˚
 = { 
ATT_UUID_SIZE
, 
ﬂdSîvUUID
 };

117 
uöt8
 
	gﬂdCh¨VÆs
[
OAD_CHAR_CNT
];

120 
uöt8
 
	gﬂdCh¨Pr›s
 = 
GATT_PROP_WRITE_NO_RSP
 | 
GATT_PROP_WRITE
 | 
GATT_PROP_NOTIFY
;

123 
g©tCh¨Cfg_t
 
	gﬂdImgIdítifyC⁄fig
[
GATT_MAX_NUM_CONN
];

124 
g©tCh¨Cfg_t
 
	gﬂdImgBlockC⁄fig
[
GATT_MAX_NUM_CONN
];

127 
CONST
 
uöt8
 
	gﬂdImgIdítifyDesc
[] = "Img Identify";

128 
CONST
 
uöt8
 
	gﬂdImgBlockDesc
[] = "Img Block";

134 
g©tAâribuã_t
 
	gﬂdAârTbl
[] =

138 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

139 
GATT_PERMIT_READ
,

141 (
uöt8
 *)&
ﬂdSîvi˚


146 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

147 
GATT_PERMIT_READ
,

149 &
ﬂdCh¨Pr›s


154 { 
ATT_UUID_SIZE
, 
ﬂdCh¨UUID
[0] },

155 
GATT_PERMIT_WRITE
,

157 
ﬂdCh¨VÆs
+0

162 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

163 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

165 (
uöt8
 *)
ﬂdImgIdítifyC⁄fig


170 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

171 
GATT_PERMIT_READ
,

173 (
uöt8
 *)
ﬂdImgIdítifyDesc


178 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

179 
GATT_PERMIT_READ
,

181 &
ﬂdCh¨Pr›s


186 { 
ATT_UUID_SIZE
, 
ﬂdCh¨UUID
[1] },

187 
GATT_PERMIT_WRITE
,

189 
ﬂdCh¨VÆs
+1

194 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

195 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

197 (
uöt8
 *)
ﬂdImgBlockC⁄fig


202 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

203 
GATT_PERMIT_READ
,

205 (
uöt8
 *)
ﬂdImgBlockDesc


209 #¥agm®
loˇti⁄
="IMAGE_HEADER"

210 c⁄° 
__code
 
img_hdr_t
 
	g_imgHdr
 = {

211 #i‡
deföed
 
FEATURE_OAD_SECURE


214 #i‡
deföed
 (
BOOTP_E_IMAGE_A
)

220 
OAD_IMG_VER
–
OAD_IMAGE_VERSION
 ),

221 
OAD_IMG_R_AREA
 * 
OAD_FLASH_PAGE_MULT
,

222 #i‡
deföed
 
HAL_IMAGE_A


223 
OAD_IMAGE_A_USER_ID
,

225 
OAD_IMAGE_B_USER_ID
,

229 #¥agm®
ªquúed
=
_imgHdr


231 #¥agm®
loˇti⁄
="AES_HEADER"

232 c⁄° 
__code
 
´s_hdr_t
 
	g_´sHdr
 = {

237 #¥agm®
ªquúed
=
_´sHdr


243 
uöt16
 
	gﬂdBlkNum
 = 0, 
	gﬂdBlkTŸ
 = 0xFFFF;

249 
uöt8
 
ﬂdRódAârCB
(
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

250 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
);

252 
bSètus_t
 
ﬂdWrôeAârCB
(
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

253 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
);

255 
CONST
 
g©tSîvi˚CBs_t
 
	gﬂdCBs
 =

257 
ﬂdRódAârCB
,

258 
ﬂdWrôeAârCB
,

259 
NULL


262 
ﬂdImgBlockReq
(
uöt16
 
c⁄nH™dÀ
, uöt16 
blkNum
);

264 
ﬂdImgIdítifyReq
(
uöt16
 
c⁄nH™dÀ
, 
img_hdr_t
 *
pImgHdr
);

266 
bSètus_t
 
ﬂdImgIdítifyWrôe
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 *
pVÆue
 );

268 
bSètus_t
 
ﬂdImgBlockWrôe
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 *
pVÆue
 );

270 
ﬂdH™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

272 #i‡!
deföed
 
FEATURE_OAD_SECURE


273 
DMAExecCrc
(
uöt8
 
∑ge
, 
uöt16
 
off£t
, uöt16 
Àn
);

274 
uöt8
 
checkDL
();

285 
bSètus_t
 
	$OADT¨gë_AddSîvi˚
()

288 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
ﬂdImgIdítifyC⁄fig
 );

289 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
ﬂdImgBlockC⁄fig
 );

292 
VOID
 
	`lökDB_Regi°î
–
ﬂdH™dÀC⁄nSètusCB
 );

294  
	`GATTSîvAµ_Regi°îSîvi˚
(
ﬂdAârTbl
, 
	`GATT_NUM_ATTRS
(ﬂdAârTbl), &
ﬂdCBs
);

295 
	}
}

311 
uöt8
 
	$ﬂdRódAârCB
(
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

312 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
)

314 
bSètus_t
 
°©us
 = 
SUCCESS
;

317 *
pLí
 = 0;

318 
°©us
 = 
ATT_ERR_INVALID_HANDLE
;

320  
°©us
;

321 
	}
}

336 
bSètus_t
 
	$ﬂdWrôeAârCB
(
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

337 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
)

339 
bSètus_t
 
°©us
 = 
SUCCESS
;

341 i‡–
pAâr
->
ty≥
.
Àn
 =
ATT_BT_UUID_SIZE
 )

344 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

345 i‡–
uuid
 =
GATT_CLIENT_CHAR_CFG_UUID
)

347 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

348 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

352 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

358 i‡(
	`oßl_memcmp
(
pAâr
->
ty≥
.
uuid
, 
ﬂdCh¨UUID
[
OAD_CHAR_IMG_IDENTIFY
], 
ATT_UUID_SIZE
))

360 
°©us
 = 
	`ﬂdImgIdítifyWrôe
–
c⁄nH™dÀ
, 
pVÆue
 );

362 i‡(
	`oßl_memcmp
(
pAâr
->
ty≥
.
uuid
, 
ﬂdCh¨UUID
[
OAD_CHAR_IMG_BLOCK
], 
ATT_UUID_SIZE
))

364 
°©us
 = 
	`ﬂdImgBlockWrôe
–
c⁄nH™dÀ
, 
pVÆue
 );

368 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

372  
°©us
;

373 
	}
}

385 
bSètus_t
 
	$ﬂdImgIdítifyWrôe
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 *
pVÆue
 )

387 
img_hdr_t
 
rxHdr
;

388 
img_hdr_t
 
ImgHdr
;

390 
rxHdr
.
vî
 = 
	`BUILD_UINT16
–
pVÆue
[0],ÖValue[1] );

391 
rxHdr
.
Àn
 = 
	`BUILD_UINT16
–
pVÆue
[2],ÖValue[3] );

393 ()
	`oßl_mem˝y
(
rxHdr
.
uid
, 
pVÆue
+4, (rxHdr.uid));

395 
	`HÆFœshRód
(
OAD_IMG_R_PAGE
, 
OAD_IMG_HDR_OSET
, (
uöt8
 *)&
ImgHdr
, (
img_hdr_t
));

397 
ﬂdBlkTŸ
 = 
rxHdr
.
Àn
 / (
OAD_BLOCK_SIZE
 / 
HAL_FLASH_WORD_SIZE
);

399 i‡–(
	`OAD_IMG_ID
–
ImgHdr
.
vî
 ) !OAD_IMG_ID–
rxHdr
.ver )) &&

400 (
ﬂdBlkTŸ
 <
OAD_BLOCK_MAX
) &&

401 (
ﬂdBlkTŸ
 != 0) )

403 
ﬂdBlkNum
 = 0;

404 
	`ﬂdImgBlockReq
(
c⁄nH™dÀ
, 0);

408 
	`ﬂdImgIdítifyReq
(
c⁄nH™dÀ
, &
ImgHdr
);

411  ( 
SUCCESS
 );

412 
	}
}

424 
bSètus_t
 
	$ﬂdImgBlockWrôe
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 *
pVÆue
 )

426 
uöt16
 
blkNum
 = 
	`BUILD_UINT16
–
pVÆue
[0],ÖValue[1] );

429 i‡–
blkNum
 == 0 )

431 
img_hdr_t
 
ImgHdr
;

432 
uöt16
 
vî
 = 
	`BUILD_UINT16
–
pVÆue
[6],ÖValue[7] );

433 
uöt16
 
blkTŸ
 = 
	`BUILD_UINT16
–
pVÆue
[8],ÖVÆue[9] ) / (
OAD_BLOCK_SIZE
 / 
HAL_FLASH_WORD_SIZE
);

435 
	`HÆFœshRód
(
OAD_IMG_R_PAGE
, 
OAD_IMG_HDR_OSET
, (
uöt8
 *)&
ImgHdr
, (
img_hdr_t
));

437 i‡––
ﬂdBlkNum
 !
blkNum
 ) ||

438 –
ﬂdBlkTŸ
 !
blkTŸ
 ) ||

439 –
	`OAD_IMG_ID
–
ImgHdr
.
vî
 ) == OAD_IMG_ID( ver ) ) )

441  ( 
ATT_ERR_WRITE_NOT_PERMITTED
 );

445 i‡(
ﬂdBlkNum
 =
blkNum
)

447 
uöt16
 
addr
 = 
ﬂdBlkNum
 * (
OAD_BLOCK_SIZE
 / 
HAL_FLASH_WORD_SIZE
) +

448 (
OAD_IMG_D_PAGE
 * 
OAD_FLASH_PAGE_MULT
);

449 
ﬂdBlkNum
++;

451 #i‡
deföed
 
FEATURE_OAD_SECURE


452 i‡(
blkNum
 == 0)

455 
pVÆue
[4] = 0xFF;

456 
pVÆue
[5] = 0xFF;

460 #i‡
deföed
 
HAL_IMAGE_B


462 i‡(
addr
 >(
OAD_IMG_B_PAGE
 * 
OAD_FLASH_PAGE_MULT
))

464 
addr
 +
OAD_IMG_B_AREA
 * 
OAD_FLASH_PAGE_MULT
;

467 i‡((
addr
 % 
OAD_FLASH_PAGE_MULT
) == 0)

469 
	`HÆFœshEø£
(
addr
 / 
OAD_FLASH_PAGE_MULT
);

472 
	`HÆFœshWrôe
(
addr
, 
pVÆue
+2, (
OAD_BLOCK_SIZE
 / 
HAL_FLASH_WORD_SIZE
));

475 i‡(
ﬂdBlkNum
 =
ﬂdBlkTŸ
)

477 #i‡
deföed
 
FEATURE_OAD_SECURE


478 
	`HAL_SYSTEM_RESET
();

480 i‡(
	`checkDL
())

482 #i‡!
deföed
 
HAL_IMAGE_A


485 
uöt16
 
¸c
[2] = { 0x0000, 0xFFFF };

486 
uöt16
 
addr
 = 
OAD_IMG_R_PAGE
 * 
OAD_FLASH_PAGE_MULT
 + 
OAD_IMG_CRC_OSET
 / 
HAL_FLASH_WORD_SIZE
;

487 
	`HÆFœshWrôe
(
addr
, (
uöt8
 *)
¸c
, 1);

489 
	`HAL_SYSTEM_RESET
();

495 
	`ﬂdImgBlockReq
(
c⁄nH™dÀ
, 
ﬂdBlkNum
);

498  ( 
SUCCESS
 );

499 
	}
}

511 
	$ﬂdImgBlockReq
(
uöt16
 
c⁄nH™dÀ
, uöt16 
blkNum
)

513 
uöt16
 
vÆue
 = 
	`GATTSîvAµ_RódCh¨Cfg
–
c⁄nH™dÀ
, 
ﬂdImgBlockC⁄fig
 );

516 i‡–
vÆue
 & 
GATT_CLIENT_CFG_NOTIFY
 )

518 
©tH™dÀVÆueNŸi_t
 
nŸi
;

519 
g©tAâribuã_t
 *
pAâr
 = 
	`GATTSîvAµ_FödAâr
(
ﬂdAârTbl
, 
	`GATT_NUM_ATTRS
(oadAttrTbl),

520 
ﬂdCh¨VÆs
+
OAD_CHAR_IMG_BLOCK
);

521 
nŸi
.
h™dÀ
 = 
pAâr
->handle;

522 
nŸi
.
Àn
 = 2;

523 
nŸi
.
vÆue
[0] = 
	`LO_UINT16
(
blkNum
);

524 
nŸi
.
vÆue
[1] = 
	`HI_UINT16
(
blkNum
);

526 
VOID
 
	`GATT_NŸifiˇti⁄
(
c⁄nH™dÀ
, &
nŸi
, 
FALSE
);

528 
	}
}

540 
	$ﬂdImgIdítifyReq
(
uöt16
 
c⁄nH™dÀ
, 
img_hdr_t
 *
pImgHdr
)

542 
uöt16
 
vÆue
 = 
	`GATTSîvAµ_RódCh¨Cfg
–
c⁄nH™dÀ
, 
ﬂdImgIdítifyC⁄fig
 );

545 i‡–
vÆue
 & 
GATT_CLIENT_CFG_NOTIFY
 )

547 
©tH™dÀVÆueNŸi_t
 
nŸi
;

548 
g©tAâribuã_t
 *
pAâr
 = 
	`GATTSîvAµ_FödAâr
(
ﬂdAârTbl
, 
	`GATT_NUM_ATTRS
(oadAttrTbl),

549 
ﬂdCh¨VÆs
+
OAD_CHAR_IMG_IDENTIFY
);

550 
nŸi
.
h™dÀ
 = 
pAâr
->handle;

551 
nŸi
.
Àn
 = 
OAD_IMG_HDR_SIZE
;

552 
nŸi
.
vÆue
[0] = 
	`LO_UINT16
(
pImgHdr
->
vî
);

553 
nŸi
.
vÆue
[1] = 
	`HI_UINT16
(
pImgHdr
->
vî
);

555 
nŸi
.
vÆue
[2] = 
	`LO_UINT16
(
pImgHdr
->
Àn
);

556 
nŸi
.
vÆue
[3] = 
	`HI_UINT16
(
pImgHdr
->
Àn
);

558 ()
	`oßl_mem˝y
(
nŸi
.
vÆue
+4, 
pImgHdr
->
uid
, (pImgHdr->uid));

560 
VOID
 
	`GATT_NŸifiˇti⁄
(
c⁄nH™dÀ
, &
nŸi
, 
FALSE
);

562 
	}
}

564 #i‡!
deföed
 
FEATURE_OAD_SECURE


583 
uöt16
 
	$¸cCÆcDL
()

585 
uöt8
 
∑geEnd
 = 
ﬂdBlkTŸ
 / 
OAD_BLOCKS_PER_PAGE
;

586 
uöt16
 
o£tEnd
 = (
ﬂdBlkTŸ
 - (
∑geEnd
 * 
OAD_BLOCKS_PER_PAGE
)Ë* 
OAD_BLOCK_SIZE
;

588 #i‡
deföed
 
HAL_IMAGE_B


589 
∑geEnd
 +
OAD_IMG_D_PAGE
 + 
OAD_IMG_B_AREA
;

591 
∑geEnd
 +
OAD_IMG_D_PAGE
;

594 
	`HÆCRCInô
(0x0000);

596 
uöt8
 
∑ge
 = 
OAD_IMG_D_PAGE
; ;Öage++)

598 #i‡
deföed
 
HAL_IMAGE_B


600 i‡(
∑ge
 =
OAD_IMG_B_PAGE
)

602 
∑ge
 +
OAD_IMG_B_AREA
;

606 
uöt16
 
o£t
 = 0; o£à< 
HAL_FLASH_PAGE_SIZE
; o£à+
HAL_FLASH_WORD_SIZE
)

608 i‡((
∑ge
 =
OAD_IMG_D_PAGE
Ë&& (
o£t
 =
OAD_IMG_CRC_OSET
))

612 i‡((
∑ge
 =
∑geEnd
Ë&& (
o£t
 =
o£tEnd
))

614  
	`HÆCRCCÆc
();

618 
uöt8
 
buf
[
HAL_FLASH_WORD_SIZE
];

619 
	`HÆFœshRód
(
∑ge
, 
o£t
, 
buf
, 
HAL_FLASH_WORD_SIZE
);

621 
uöt8
 
idx
 = 0; idx < 
HAL_FLASH_WORD_SIZE
; idx++)

623 
	`HÆCRCExec
(
buf
[
idx
]);

628 
	}
}

648 
uöt16
 
	$¸cCÆcDLDMA
()

650 
uöt8
 
∑geBeg
 = 
OAD_IMG_D_PAGE
;

651 
uöt8
 
∑geEnd
 = 
ﬂdBlkTŸ
 / 
OAD_BLOCKS_PER_PAGE
;

653 #i‡
deföed
 
HAL_IMAGE_B


654 
∑geEnd
 +
OAD_IMG_D_PAGE
 + 
OAD_IMG_B_AREA
;

656 
∑geEnd
 +
OAD_IMG_D_PAGE
;

659 
	`HÆCRCInô
(0x0000);

662 
	`DMAExecCrc
(
∑geBeg
, 4, 
HAL_FLASH_PAGE_SIZE
-4);

665 
uöt8
 
pg
 = 
∑geBeg
 + 1;Ög < 
∑geEnd
;Ög++)

667 #i‡
deföed
 
HAL_IMAGE_B


668 i‡(
pg
 =
OAD_IMG_B_PAGE
)

670 
pg
 +
OAD_IMG_B_AREA
;

674 
	`DMAExecCrc
(
pg
, 0, 
HAL_FLASH_PAGE_SIZE
);

677  
	`HÆCRCCÆc
();

678 
	}
}

697 
	$DMAExecCrc
(
uöt8
 
∑ge
, 
uöt16
 
off£t
, uöt16 
Àn
) {

699 
uöt8
 
mem˘r
 = 
MEMCTR
;

702 
uöt16
 
addªss
 = (
off£t
 + 
HAL_FLASH_PAGE_MAP
) +

703 ((
∑ge
 % 
HAL_FLASH_PAGE_PER_BANK
Ë* 
HAL_FLASH_PAGE_SIZE
);

706 
hÆDMADesc_t
 *
dmaCh0_p
 = 
	`HAL_DMA_GET_DESC0
();

708 #i‡!
deföed
 
HAL_OAD_BOOT_CODE


709 
hÆI¡Sèã_t
 
is
;

712 
∑ge
 /
HAL_FLASH_PAGE_PER_BANK
;

714 #i‡!
deföed
 
HAL_OAD_BOOT_CODE


715 
	`HAL_ENTER_CRITICAL_SECTION
(
is
);

719 
MEMCTR
 = (MEMCTR & 0xF8Ë| 
∑ge
;

723 
	`HAL_DMA_SET_SOURCE
(
dmaCh0_p
, 
addªss
);

726 
	`HAL_DMA_SET_DEST
(
dmaCh0_p
, 0x70BD);

729 
	`HAL_DMA_SET_LEN
(
dmaCh0_p
, 
Àn
);

732 
	`HAL_DMA_SET_WORD_SIZE
(
dmaCh0_p
, 
HAL_DMA_WORDSIZE_BYTE
);

733 
	`HAL_DMA_SET_TRIG_MODE
(
dmaCh0_p
, 
HAL_DMA_TMODE_BLOCK
);

734 
	`HAL_DMA_SET_TRIG_SRC
(
dmaCh0_p
, 
HAL_DMA_TRIG_NONE
);

737 
	`HAL_DMA_SET_SRC_INC
(
dmaCh0_p
, 
HAL_DMA_SRCINC_1
);

738 
	`HAL_DMA_SET_DST_INC
(
dmaCh0_p
, 
HAL_DMA_DSTINC_0
);

739 
	`HAL_DMA_SET_IRQ
(
dmaCh0_p
, 
HAL_DMA_IRQMASK_DISABLE
);

740 
	`HAL_DMA_SET_M8
(
dmaCh0_p
, 
HAL_DMA_M8_USE_8_BITS
);

741 
	`HAL_DMA_SET_PRIORITY
(
dmaCh0_p
, 
HAL_DMA_PRI_HIGH
);

744 
	`HAL_DMA_ARM_CH
(0);

747 
	`asm
("nop");ásm("nop");ásm("nop");ásm("nop");ásm("nop");ásm("nop");

748 
	`asm
("nop");ásm("nop");ásm("nop");ásm("nop");ásm("nop");

751 
	`HAL_DMA_MAN_TRIGGER
(0);

754 
DMAREQ
 & 0x1);

757 
MEMCTR
 = 
mem˘r
;

759 #i‡!
deföed
 
HAL_OAD_BOOT_CODE


760 
	`HAL_EXIT_CRITICAL_SECTION
(
is
);

762 
	}
}

780 
uöt8
 
	$checkDL
()

782 
uöt16
 
¸c
[2];

784 
	`HÆFœshRód
(
OAD_IMG_D_PAGE
, 
OAD_IMG_CRC_OSET
, (
uöt8
 *)
¸c
, (crc));

786 i‡((
¸c
[0] == 0xFFFF) || (crc[0] == 0x0000))

788  
FALSE
;

791 i‡(
¸c
[1] == 0xFFFF)

800 
¸c
[1] = 
	`¸cCÆcDLDMA
();

803 #i‡
deföed
 
FEATURE_OAD_BIM


804 
uöt16
 
addr
 = 
OAD_IMG_D_PAGE
 * 
OAD_FLASH_PAGE_MULT
 + 
OAD_IMG_CRC_OSET
 / 
HAL_FLASH_WORD_SIZE
;

805 
¸c
[0] = 0xFFFF;

806 
	`HÆFœshWrôe
(
addr
, (
uöt8
 *)
¸c
, 1);

807 
	`HÆFœshRód
(
OAD_IMG_D_PAGE
, 
OAD_IMG_CRC_OSET
, (
uöt8
 *)
¸c
, (crc));

811  (
¸c
[0] == crc[1]);

812 
	}
}

825 
	$ﬂdH™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

828 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

831 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

832 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

833 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

835 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
ﬂdImgIdítifyC⁄fig
 );

836 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
ﬂdImgBlockC⁄fig
 );

839 
	}
}

	@../../Profiles/OAD/oad_target.h

39 #i‚de‡
OAD_TARGET_H


40 
	#OAD_TARGET_H


	)

42 #ifde‡
__˝lu•lus


51 
	~"hÆ_´s.h
"

52 
	~"hÆ_ty≥s.h
"

58 #i‡!
deföed
 
OAD_IMG_A_PAGE


59 
	#OAD_IMG_A_PAGE
 1

	)

60 
	#OAD_IMG_A_AREA
 62

	)

63 #i‡!
deföed
 
OAD_IMG_B_PAGE


65 #i‡
deföed
 
FEATURE_OAD_BIM


66 
	#OAD_IMG_B_PAGE
 8

	)

68 
	#OAD_IMG_B_PAGE
 63

	)

70 
	#OAD_IMG_B_AREA
 (124 - 
OAD_IMG_A_AREA
)

	)

73 #i‡
deföed
 
HAL_IMAGE_B


74 
	#OAD_IMG_D_PAGE
 
OAD_IMG_A_PAGE


	)

75 
	#OAD_IMG_D_AREA
 
OAD_IMG_A_AREA


	)

76 
	#OAD_IMG_R_PAGE
 
OAD_IMG_B_PAGE


	)

77 
	#OAD_IMG_R_AREA
 
OAD_IMG_B_AREA


	)

79 
	#OAD_IMG_D_PAGE
 
OAD_IMG_B_PAGE


	)

80 
	#OAD_IMG_D_AREA
 
OAD_IMG_B_AREA


	)

81 
	#OAD_IMG_R_PAGE
 
OAD_IMG_A_PAGE


	)

82 
	#OAD_IMG_R_AREA
 
OAD_IMG_A_AREA


	)

94 c⁄° 
__code
 
img_hdr_t
 
_imgHdr
;

108 
bSètus_t
 
OADT¨gë_AddSîvi˚
( );

113 #ifde‡
__˝lu•lus


	@../../Profiles/Proximity/proxreporter.c

43 
	~"bcomdef.h
"

44 
	~"OSAL.h
"

45 
	~"lökdb.h
"

46 
	~"©t.h
"

47 
	~"g©t.h
"

48 
	~"g©t_uuid.h
"

49 
	~"g©t_¥ofûe_uuid.h
"

50 
	~"g©t£rv≠p.h
"

51 
	~"g≠b⁄dmgr.h
"

53 
	~"¥oxªp‹ãr.h
"

62 
	#PP_DEFAULT_TX_POWER
 0

	)

63 
	#PP_DEFAULT_PATH_LOSS
 0x7F

	)

65 
	#SERVAPP_NUM_ATTR_SUPPORTED
 5

	)

76 
CONST
 
uöt8
 
	glökLossSîvUUID
[
ATT_BT_UUID_SIZE
] =

78 
LO_UINT16
–
LINK_LOSS_SERV_UUID
 ), 
HI_UINT16
( LINK_LOSS_SERV_UUID )

82 
CONST
 
uöt8
 
	gimAÀπSîvUUID
[
ATT_BT_UUID_SIZE
] =

84 
LO_UINT16
–
IMMEDIATE_ALERT_SERV_UUID
 ), 
HI_UINT16
( IMMEDIATE_ALERT_SERV_UUID )

88 
CONST
 
uöt8
 
	gtxPwrLevñSîvUUID
[
ATT_BT_UUID_SIZE
] =

90 
LO_UINT16
–
TX_PWR_LEVEL_SERV_UUID
 ), 
HI_UINT16
( TX_PWR_LEVEL_SERV_UUID )

94 
CONST
 
uöt8
 
	gÆîtLevñUUID
[
ATT_BT_UUID_SIZE
] =

96 
LO_UINT16
–
ALERT_LEVEL_UUID
 ), 
HI_UINT16
( ALERT_LEVEL_UUID )

100 
CONST
 
uöt8
 
	gtxPwrLevñUUID
[
ATT_BT_UUID_SIZE
] =

102 
LO_UINT16
–
TX_PWR_LEVEL_UUID
 ), 
HI_UINT16
( TX_PWR_LEVEL_UUID )

116 
¥oxRï‹ãrCBs_t
 *
	gµ_AµCBs
 = 
NULL
;

123 
CONST
 
g©tAârTy≥_t
 
	glökLossSîvi˚
 = { 
ATT_BT_UUID_SIZE
, 
lökLossSîvUUID
 };

126 
uöt8
 
	gŒAÀπLevñCh¨Pr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

130 
uöt8
 
	gŒAÀπLevñ
 = 
PP_ALERT_LEVEL_NO
;

133 
CONST
 
g©tAârTy≥_t
 
	gimAÀπSîvi˚
 = { 
ATT_BT_UUID_SIZE
, 
imAÀπSîvUUID
 };

136 
uöt8
 
	gimAÀπLevñCh¨Pr›s
 = 
GATT_PROP_WRITE_NO_RSP
;

140 
uöt8
 
	gimAÀπLevñ
 = 
PP_ALERT_LEVEL_NO
;

143 
CONST
 
g©tAârTy≥_t
 
	gtxPwrLevñSîvi˚
 = { 
ATT_BT_UUID_SIZE
, 
txPwrLevñSîvUUID
 };

146 
uöt8
 
	gtxPwrLevñCh¨Pr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_NOTIFY
;

151 
öt8
 
	gtxPwrLevñ
 = 
PP_DEFAULT_TX_POWER
;

154 
g©tCh¨Cfg_t
 
	gtxPwrLevñC⁄fig
[
GATT_MAX_NUM_CONN
];

161 
g©tAâribuã_t
 
	glökLossAârTbl
[] =

165 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

166 
GATT_PERMIT_READ
,

168 (
uöt8
 *)&
lökLossSîvi˚


173 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

174 
GATT_PERMIT_READ
,

176 &
ŒAÀπLevñCh¨Pr›s


181 { 
ATT_BT_UUID_SIZE
, 
ÆîtLevñUUID
 },

182 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

184 &
ŒAÀπLevñ


189 
g©tAâribuã_t
 
	gimAÀπAârTbl
[] =

193 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

194 
GATT_PERMIT_READ
,

196 (
uöt8
 *)&
imAÀπSîvi˚


201 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

202 
GATT_PERMIT_READ
,

204 &
imAÀπLevñCh¨Pr›s


209 { 
ATT_BT_UUID_SIZE
, 
ÆîtLevñUUID
 },

210 
GATT_PERMIT_WRITE
,

212 &
imAÀπLevñ


217 
g©tAâribuã_t
 
	gtxPwrLevñAârTbl
[] =

221 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

222 
GATT_PERMIT_READ
,

224 (
uöt8
 *)&
txPwrLevñSîvi˚


229 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

230 
GATT_PERMIT_READ
,

232 &
txPwrLevñCh¨Pr›s


237 { 
ATT_BT_UUID_SIZE
, 
txPwrLevñUUID
 },

238 
GATT_PERMIT_READ
,

240 (
uöt8
 *)&
txPwrLevñ


245 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

246 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

248 (
uöt8
 *)
txPwrLevñC⁄fig


256 
uöt8
 
¥oxRï‹ãr_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

257 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

258 
bSètus_t
 
¥oxRï‹ãr_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

259 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

261 
¥oxRï‹ãr_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

267 
CONST
 
g©tSîvi˚CBs_t
 
	g¥oxRï‹ãrCBs
 =

269 
¥oxRï‹ãr_RódAârCB
,

270 
¥oxRï‹ãr_WrôeAârCB
,

271 
NULL


290 
bSètus_t
 
	$ProxRï‹ãr_AddSîvi˚
–
uöt32
 
£rvi˚s
 )

292 
uöt8
 
°©us
 = 
SUCCESS
;

294 i‡–
£rvi˚s
 & 
PP_LINK_LOSS_SERVICE
 )

297 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
lökLossAârTbl
,

298 
	`GATT_NUM_ATTRS
–
lökLossAârTbl
 ),

299 &
¥oxRï‹ãrCBs
 );

302 i‡––
°©us
 =
SUCCESS
 ) && ( 
£rvi˚s
 & 
PP_IM_ALETR_SERVICE
 ) )

305 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
imAÀπAârTbl
,

306 
	`GATT_NUM_ATTRS
–
imAÀπAârTbl
 ),

307 &
¥oxRï‹ãrCBs
 );

310 i‡––
°©us
 =
SUCCESS
 ) && ( 
£rvi˚s
 & 
PP_TX_PWR_LEVEL_SERVICE
 ) )

314 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
txPwrLevñC⁄fig
 );

317 
VOID
 
	`lökDB_Regi°î
–
¥oxRï‹ãr_H™dÀC⁄nSètusCB
 );

321 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
txPwrLevñAârTbl
,

322 
	`GATT_NUM_ATTRS
–
txPwrLevñAârTbl
 ),

323 &
¥oxRï‹ãrCBs
 );

326  ( 
°©us
 );

327 
	}
}

340 
bSètus_t
 
	$ProxRï‹ãr_Regi°îAµCBs
–
¥oxRï‹ãrCBs_t
 *
≠pCÆlbacks
 )

342 i‡–
≠pCÆlbacks
 )

344 
µ_AµCBs
 = 
≠pCÆlbacks
;

346  ( 
SUCCESS
 );

350  ( 
bÀAÃódyInReque°edMode
 );

352 
	}
}

369 
bSètus_t
 
	$ProxRï‹ãr_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 )

371 
bSètus_t
 
ªt
 = 
SUCCESS
;

372  
∑øm
 )

375 
PP_LINK_LOSS_ALERT_LEVEL
:

376 i‡–(
Àn
 = ( 
uöt8
 )Ë&& ((*((uöt8*)
vÆue
Ë<
PP_ALERT_LEVEL_HIGH
)) )

378 
ŒAÀπLevñ
 = *((
uöt8
*)
vÆue
);

382 
ªt
 = 
bÀInvÆidR™ge
;

386 
PP_IM_ALERT_LEVEL
:

387 i‡–
Àn
 = ( 
uöt8
 ) )

389 
imAÀπLevñ
 = *((
uöt8
*)
vÆue
);

393 
ªt
 = 
bÀInvÆidR™ge
;

397 
PP_TX_POWER_LEVEL
:

398 i‡–
Àn
 = ( 
öt8
 ) )

400 
txPwrLevñ
 = *((
öt8
*)
vÆue
);

403 
	`GATTSîvAµ_Pro˚ssCh¨Cfg
–
txPwrLevñC⁄fig
, (
uöt8
 *)&
txPwrLevñ
, 
FALSE
,

404 
txPwrLevñAârTbl
, 
	`GATT_NUM_ATTRS
(ÅxPwrLevelAttrTbl ),

405 
INVALID_TASK_ID
 );

409 
ªt
 = 
bÀInvÆidR™ge
;

414 
ªt
 = 
INVALIDPARAMETER
;

418  ( 
ªt
 );

419 
	}
}

434 
bSètus_t
 
	$ProxRï‹ãr_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

436 
bSètus_t
 
ªt
 = 
SUCCESS
;

437  
∑øm
 )

439 
PP_LINK_LOSS_ALERT_LEVEL
:

440 *((
uöt8
*)
vÆue
Ë
ŒAÀπLevñ
;

443 
PP_IM_ALERT_LEVEL
:

444 *((
uöt8
*)
vÆue
Ë
imAÀπLevñ
;

447 
PP_TX_POWER_LEVEL
:

448 *((
öt8
*)
vÆue
Ë
txPwrLevñ
;

452 
ªt
 = 
INVALIDPARAMETER
;

456  ( 
ªt
 );

457 
	}
}

468 
uöt8
 
	$¥oxRï‹ãr_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

469 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

471 
uöt16
 
uuid
;

472 
bSètus_t
 
°©us
 = 
SUCCESS
;

475 i‡–
off£t
 > 0 )

477  ( 
ATT_ERR_ATTR_NOT_LONG
 );

480 i‡–
pAâr
->
ty≥
.
Àn
 =
ATT_BT_UUID_SIZE
 )

483 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

485  
uuid
 )

489 
ALERT_LEVEL_UUID
:

490 
TX_PWR_LEVEL_UUID
:

491 *
pLí
 = 1;

492 
pVÆue
[0] = *
pAâr
->pValue;

497 *
pLí
 = 0;

498 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

505 *
pLí
 = 0;

506 
°©us
 = 
ATT_ERR_INVALID_HANDLE
;

509  ( 
°©us
 );

510 
	}
}

522 
bSètus_t
 
	$¥oxRï‹ãr_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

523 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

525 
bSètus_t
 
°©us
 = 
SUCCESS
;

526 
uöt8
 
nŸify
 = 0xFF;

528 i‡–
pAâr
->
ty≥
.
Àn
 =
ATT_BT_UUID_SIZE
 )

531 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

532  
uuid
 )

534 
ALERT_LEVEL_UUID
:

537 i‡–
off£t
 == 0 )

539 i‡–
Àn
 > 1 )

540 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

543 i‡–
pVÆue
[0] > 
PP_ALERT_LEVEL_HIGH
 )

544 
°©us
 = 
ATT_ERR_INVALID_VALUE
;

549 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

553 i‡–
°©us
 =
SUCCESS
 )

555 
uöt8
 *
pCurVÆue
 = (uöt8 *)
pAâr
->
pVÆue
;

557 *
pCurVÆue
 = 
pVÆue
[0];

558 if–
pAâr
->
pVÆue
 =&
ŒAÀπLevñ
 )

559 
nŸify
 = 
PP_LINK_LOSS_ALERT_LEVEL
;

561 
nŸify
 = 
PP_IM_ALERT_LEVEL
;

566 
GATT_CLIENT_CHAR_CFG_UUID
:

567 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

568 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

573 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

580 
°©us
 = 
ATT_ERR_INVALID_HANDLE
;

584 i‡–(
nŸify
 !0xFFË&& 
µ_AµCBs
 &&Öp_AµCBs->
p‚AârCh™ge
 )

585 
µ_AµCBs
->
	`p‚AârCh™ge
–
nŸify
 );

587  ( 
°©us
 );

588 
	}
}

600 
	$¥oxRï‹ãr_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

603 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

606 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

607 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

608 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

610 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
txPwrLevñC⁄fig
 );

613 
	}
}

	@../../Profiles/Proximity/proxreporter.h

40 #i‚de‡
PROXIMITYREPORTER_H


41 
	#PROXIMITYREPORTER_H


	)

43 #ifde‡
__˝lu•lus


57 
	#PP_LINK_LOSS_ALERT_LEVEL
 0

58 
	#PP_IM_ALERT_LEVEL
 1

59 
	#PP_TX_POWER_LEVEL
 2

60 

	)

62 
	#PP_ALERT_LEVEL_NO
 0x00

	)

63 
	#PP_ALERT_LEVEL_LOW
 0x01

	)

64 
	#PP_ALERT_LEVEL_HIGH
 0x02

	)

67 
	#PP_LINK_LOSS_SERVICE
 0x00000001

68 
	#PP_IM_ALETR_SERVICE
 0x00000002

69 
	#PP_TX_PWR_LEVEL_SERVICE
 0x00000004

70 

	)

85 (*
µAârCh™ge_t
)–
	tuöt8
 
	t©åP¨amID
 );

89 
µAârCh™ge_t
 
p‚AârCh™ge
;

90 } 
	t¥oxRï‹ãrCBs_t
;

104 
bSètus_t
 
ProxRï‹ãr_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

112 
bSètus_t
 
ProxRï‹ãr_Regi°îAµCBs
–
¥oxRï‹ãrCBs_t
 *
≠pCÆlbacks
 );

125 
bSètus_t
 
ProxRï‹ãr_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

136 
bSètus_t
 
ProxRï‹ãr_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

141 #ifde‡
__˝lu•lus


	@../../Profiles/RSC/runningservice.c

44 
	~"bcomdef.h
"

45 
	~"OSAL.h
"

46 
	~"lökdb.h
"

47 
	~"©t.h
"

48 
	~"g©t.h
"

49 
	~"g©t_uuid.h
"

50 
	~"g©t£rv≠p.h
"

51 
	~"g©t_¥ofûe_uuid.h
"

52 
	~"ru¬ög£rvi˚.h
"

63 
	#RSC_CMD_IND_SEND_EVT
 0x0001

	)

65 
	#RSC_MEAS_VALUE_POS
 2

	)

66 
	#RSC_MEAS_CFG_POS
 3

	)

67 
	#RSC_COMMAND_VALUE_POS
 9

	)

68 
	#RSC_COMMAND_CFG_POS
 10

	)

69 
	#COMMAND_IND_LENGTH
 2

	)

80 
CONST
 
uöt8
 
	gru¬ögSîvUUID
[
ATT_BT_UUID_SIZE
] =

82 
LO_UINT16
(
RSC_SERV_UUID
), 
HI_UINT16
(RSC_SERV_UUID)

86 
CONST
 
uöt8
 
	gru¬ögMósUUID
[
ATT_BT_UUID_SIZE
] =

88 
LO_UINT16
(
RSC_MEAS_UUID
), 
HI_UINT16
(RSC_MEAS_UUID)

92 
CONST
 
uöt8
 
	gru¬ögFótuªUUID
[
ATT_BT_UUID_SIZE
] =

94 
LO_UINT16
(
RSC_FEATURE_UUID
), 
HI_UINT16
(RSC_FEATURE_UUID)

98 
CONST
 
uöt8
 
	gru¬ögSísLocUUID
[
ATT_BT_UUID_SIZE
] =

100 
LO_UINT16
(
SENSOR_LOC_UUID
), 
HI_UINT16
(SENSOR_LOC_UUID)

104 
CONST
 
uöt8
 
	gru¬ögComm™dUUID
[
ATT_BT_UUID_SIZE
] =

106 
LO_UINT16
(
SC_CTRL_PT_UUID
), 
HI_UINT16
(SC_CTRL_PT_UUID)

121 
ru¬ögSîvi˚CB_t
 
	gru¬ögSîvi˚CB
 = 
NULL
;

123 
uöt8
 
	gsuµ‹ãdSís‹s
 = 0;

124 
boﬁ
 
	gscOpInProgªss
 = 
FALSE
;

127 
uöt16
 
	gc⁄√˘i⁄H™dÀ
;

128 
©tH™dÀVÆueInd_t
 
	grscCmdInd
;

135 
uöt8
 
	gru¬ögSîvi˚_TaskID
 = 0;

138 
CONST
 
g©tAârTy≥_t
 
	gru¬ögSîvi˚
 = { 
ATT_BT_UUID_SIZE
, 
ru¬ögSîvUUID
 };

141 
uöt8
 
	gsuµ‹ãdSís‹Loˇti⁄s
[
RSC_MAX_SENSOR_LOCS
] = { 
RSC_NO_SENSOR_LOC
 };

145 
uöt8
 
	gru¬ögMósPr›s
 = 
GATT_PROP_NOTIFY
;

146 
uöt8
 
	gru¬ögMós
 = 0;

147 
g©tCh¨Cfg_t
 
	gru¬ögMósClõ¡Ch¨Cfg
[
GATT_MAX_NUM_CONN
];

150 
uöt8
 
	gru¬ögFótuªPr›s
 = 
GATT_PROP_READ
;

151 
uöt16
 
	gru¬ögFótuªs
 = 
RSC_NO_SUPPORT
;

154 
uöt8
 
	gru¬ögSísLocPr›s
 = 
GATT_PROP_READ
;

155 
uöt8
 
	gru¬ögSísLoc
 = 
RSC_NO_SENSOR_LOC
;

158 
uöt8
 
	gru¬ögComm™dPr›s
 = 
GATT_PROP_WRITE
 | 
GATT_PROP_INDICATE
;

159 
uöt8
 
	gru¬ögComm™d
 = 0;

160 
g©tCh¨Cfg_t
 
	gru¬ögComm™dClõ¡Ch¨Cfg
[
GATT_MAX_NUM_CONN
];

166 
g©tAâribuã_t
 
	gru¬ögAârTbl
[] =

170 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

171 
GATT_PERMIT_READ
,

173 (
uöt8
 *)&
ru¬ögSîvi˚


178 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

179 
GATT_PERMIT_READ
,

181 &
ru¬ögMósPr›s


186 { 
ATT_BT_UUID_SIZE
, 
ru¬ögMósUUID
 },

189 &
ru¬ögMós


194 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

195 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

197 (
uöt8
 *Ë&
ru¬ögMósClõ¡Ch¨Cfg


202 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

203 
GATT_PERMIT_READ
,

205 &
ru¬ögFótuªPr›s


210 { 
ATT_BT_UUID_SIZE
, 
ru¬ögFótuªUUID
 },

211 
GATT_PERMIT_READ
,

213 (
uöt8
 *)&
ru¬ögFótuªs


218 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

219 
GATT_PERMIT_READ
,

221 &
ru¬ögSísLocPr›s


226 { 
ATT_BT_UUID_SIZE
, 
ru¬ögSísLocUUID
 },

227 
GATT_PERMIT_READ
,

229 &
ru¬ögSísLoc


234 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

235 
GATT_PERMIT_READ
,

237 &
ru¬ögComm™dPr›s


242 { 
ATT_BT_UUID_SIZE
, 
ru¬ögComm™dUUID
 },

243 
GATT_PERMIT_WRITE
,

245 &
ru¬ögComm™d


250 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

251 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

253 (
uöt8
 *Ë&
ru¬ögComm™dClõ¡Ch¨Cfg


261 
uöt8
 
ru¬ög_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

262 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

263 
bSètus_t
 
ru¬ög_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

264 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

266 
ru¬ög_Pro˚ssOSALMsg
–
oßl_evít_hdr_t
 *
pMsg
 );

267 
ru¬ög_Pro˚ssGATTMsg
–
g©tMsgEvít_t
 *
pMsg
 );

268 
boﬁ
 
ru¬ög_Sís‹LocSuµ‹ãd
–
uöt8
 
£ns‹Loc
 );

269 
ru¬ög_Pro˚ssRSCCmd
–
uöt16
 
©åH™dÀ
, 
uöt8
 *
pVÆue
, uöt8 
Àn
 );

276 
CONST
 
g©tSîvi˚CBs_t
 
	gru¬ögCBs
 =

278 
ru¬ög_RódAârCB
,

279 
ru¬ög_WrôeAârCB
,

280 
NULL


296 
	$Ru¬ögSîvi˚_Inô
–
uöt8
 
èsk_id
 )

299 
ru¬ögSîvi˚_TaskID
 = 
èsk_id
;

300 
	}
}

313 
uöt16
 
	$Ru¬ögSîvi˚_Pro˚ssEvít
–
uöt8
 
èsk_id
, 
uöt16
 
evíts
 )

315 
VOID
 
èsk_id
;

317 i‡–
evíts
 & 
SYS_EVENT_MSG
 )

319 
uöt8
 *
pMsg
;

321 i‡–(
pMsg
 = 
	`oßl_msg_ª˚ive
–
ru¬ögSîvi˚_TaskID
 )Ë!
NULL
 )

323 
	`ru¬ög_Pro˚ssOSALMsg
–(
oßl_evít_hdr_t
 *)
pMsg
 );

326 
VOID
 
	`oßl_msg_dóŒoˇã
–
pMsg
 );

330  (
evíts
 ^ 
SYS_EVENT_MSG
);

333 i‡–
evíts
 & 
RSC_CMD_IND_SEND_EVT
 )

335 
	`GATT_Indiˇti⁄
–
c⁄√˘i⁄H™dÀ
, &
rscCmdInd
, 
FALSE
, 
ru¬ögSîvi˚_TaskID
 );

338 
scOpInProgªss
 = 
FALSE
;

340  ( 
evíts
 ^ 
RSC_CMD_IND_SEND_EVT
 );

344 
	}
}

355 
	$ru¬ög_Pro˚ssOSALMsg
–
oßl_evít_hdr_t
 *
pMsg
 )

357  
pMsg
->
evít
 )

359 
GATT_MSG_EVENT
:

360 
	`ru¬ög_Pro˚ssGATTMsg
–(
g©tMsgEvít_t
 *Ë
pMsg
 );

366 
	}
}

377 
	$ru¬ög_Pro˚ssGATTMsg
–
g©tMsgEvít_t
 *
pMsg
 )

379 i‡–
pMsg
->
mëhod
 =
ATT_HANDLE_VALUE_CFM
 )

384 
	}
}

395 
boﬁ
 
	$ru¬ög_Sís‹LocSuµ‹ãd
–
uöt8
 
£ns‹Loc
 )

397 
uöt8
 
i
;

399 
i
 = 0; i < 
suµ‹ãdSís‹s
; i++)

401 i‡(
suµ‹ãdSís‹Loˇti⁄s
[
i
] =
£ns‹Loc
)

403  
TRUE
;

407  
FALSE
;

408 
	}
}

421 
bSètus_t
 
	$Ru¬ög_AddSîvi˚
–
uöt32
 
£rvi˚s
 )

423 
uöt8
 
°©us
 = 
SUCCESS
;

426 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
ru¬ögMósClõ¡Ch¨Cfg
 );

427 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
ru¬ögComm™dClõ¡Ch¨Cfg
);

429 i‡–
£rvi˚s
 & 
RUNNING_SERVICE
 )

432 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
ru¬ögAârTbl
,

433 
	`GATT_NUM_ATTRS
–
ru¬ögAârTbl
 ),

434 &
ru¬ögCBs
 );

437  ( 
°©us
 );

438 
	}
}

449 
	$Ru¬ög_Regi°î
–
ru¬ögSîvi˚CB_t
 
p‚Sîvi˚CB
 )

451 
ru¬ögSîvi˚CB
 = 
p‚Sîvi˚CB
;

452 
	}
}

468 
bSètus_t
 
	$Ru¬ög_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
pVÆue
 )

470 
bSètus_t
 
ªt
 = 
SUCCESS
;

472  
∑øm
 )

474 
RSC_SENS_LOC
:

476 
ru¬ögSísLoc
 = *((
uöt8
*)
pVÆue
);

480 
RSC_FEATURE
:

482 
ru¬ögFótuªs
 = *((
uöt16
*)
pVÆue
);

486 
RSC_AVAIL_SENS_LOCS
:

487 i‡–
suµ‹ãdSís‹s
 < 
RSC_MAX_SENSOR_LOCS
 )

489 
suµ‹ãdSís‹Loˇti⁄s
[
suµ‹ãdSís‹s
++] = *((
uöt8
*)
pVÆue
);

494 
ªt
 = 
INVALIDPARAMETER
;

498  ( 
ªt
 );

499 
	}
}

514 
bSètus_t
 
	$Ru¬ög_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

516 
bSètus_t
 
ªt
 = 
SUCCESS
;

518  
∑øm
 )

520 
RSC_FEATURE
:

521 *((
uöt16
*)
vÆue
Ë
ru¬ögFótuªs
;

524 
RSC_SENS_LOC
:

525 *((
uöt8
*)
vÆue
Ë
ru¬ögSísLoc
;

528 
RSC_COMMAND
:

529 *((
uöt8
*)
vÆue
Ë
ru¬ögComm™d
;

533 
ªt
 = 
INVALIDPARAMETER
;

537  ( 
ªt
 );

538 
	}
}

551 
bSètus_t
 
	$Ru¬ög_MósNŸify
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueNŸi_t
 *
pNŸi
 )

553 
uöt16
 
vÆue
 = 
	`GATTSîvAµ_RódCh¨Cfg
–
c⁄nH™dÀ
, 
ru¬ögMósClõ¡Ch¨Cfg
 );

556 i‡–
vÆue
 & 
GATT_CLIENT_CFG_NOTIFY
 )

559 
pNŸi
->
h™dÀ
 = 
ru¬ögAârTbl
[
RSC_MEAS_VALUE_POS
].handle;

562  
	`GATT_NŸifiˇti⁄
–
c⁄nH™dÀ
, 
pNŸi
, 
FALSE
 );

565  
bÀInc‹ª˘Mode
;

566 
	}
}

579 
	$ru¬ög_Pro˚ssRSCCmd
–
uöt16
 
©åH™dÀ
, 
uöt8
 *
pVÆue
, uöt8 
Àn
 )

581 
uöt8
 
rscSètus
 = 
RSC_SUCCESS
;

584 
scOpInProgªss
 = 
TRUE
;

587 
rscCmdInd
.
h™dÀ
 = 
©åH™dÀ
;

589 
rscCmdInd
.
Àn
 = 3;

590 
rscCmdInd
.
vÆue
[0] = 
RSC_COMMAND_RSP
;

591 
rscCmdInd
.
vÆue
[1] = 
pVÆue
[0];

593  
pVÆue
[0] )

595 
RSC_SET_CUMM_VAL
:

597 i‡––
Àn
 <5 ) && ( 
ru¬ögFótuªs
 & 
RSC_TOTAL_DIST_SUPP
 ) )

599 
uöt32
 
tŸÆDi°™˚
;

602 i‡––
Àn
 - 1 ) == 4 )

604 
tŸÆDi°™˚
 = 
	`BUILD_UINT32
–
pVÆue
[1],ÖValue[2],ÖValue[3],ÖValue[4]);

608 
tŸÆDi°™˚
 = 0;

611  
i
 = 0; i < (
Àn
 - 1); ++i )

613 
tŸÆDi°™˚
 +
pVÆue
[
i
 + 1] << (i*8);

618 i‡–
ru¬ögSîvi˚CB
 !
NULL
 )

620 
	`VOID
 (*
ru¬ögSîvi˚CB
)–
RSC_CMD_SET_CUMM_VAL
, &
tŸÆDi°™˚
 );

625 
rscSètus
 = 
RSC_INVALID_PARAMETER
;

629 
RSC_START_SENS_CALIB
:

631 i‡––
Àn
 =1 ) && ( 
ru¬ögFótuªs
 & 
RSC_SENSOR_CALIB_SUPP
 ) )

634 i‡–
ru¬ögSîvi˚CB
 !
NULL
 )

636 i‡–(*
ru¬ögSîvi˚CB
)–
RSC_CMD_START_SENS_CALIB
, 
NULL
 ) !
SUCCESS
 )

639 
rscSètus
 = 
RSC_OPERATION_FAILED
;

646 
rscSètus
 = 
RSC_INVALID_PARAMETER
;

650 
RSC_UPDATE_SENS_LOC
:

652 i‡––
Àn
 == 2 ) &&

653 –
ru¬ögFótuªs
 & 
RSC_MULTI_SENS_SUPP
 ) &&

654 –
	`ru¬ög_Sís‹LocSuµ‹ãd
–
pVÆue
[1] ) =
TRUE
 ) )

657 
ru¬ögSísLoc
 = 
pVÆue
[1];

660 i‡–
ru¬ögSîvi˚CB
 !
NULL
 )

662 
	`VOID
 (*
ru¬ögSîvi˚CB
)–
RSC_CMD_UPDATE_SENS_LOC
, 
NULL
 );

667 
rscSètus
 = 
RSC_INVALID_PARAMETER
;

671 
RSC_REQ_SUPP_SENS_LOC
:

673 i‡––
Àn
 =1 ) && ( 
ru¬ögFótuªs
 & 
RSC_MULTI_SENS_SUPP
 ) )

675 
rscCmdInd
.
Àn
 +
suµ‹ãdSís‹s
;

676 
	`oßl_mem˝y
–&(
rscCmdInd
.
vÆue
[3]), 
suµ‹ãdSís‹Loˇti⁄s
, 
suµ‹ãdSís‹s
 );

681 
rscSètus
 = 
RSC_INVALID_PARAMETER
;

687 
rscSètus
 = 
RSC_OPCODE_NOT_SUPPORTED
;

692 
rscCmdInd
.
vÆue
[2] = 
rscSètus
;

695 
	`oßl_£t_evít
–
ru¬ögSîvi˚_TaskID
, 
RSC_CMD_IND_SEND_EVT
 );

696 
	}
}

708 
	$Ru¬ög_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

711 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

714 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

715 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

716 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

718 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
ru¬ögMósClõ¡Ch¨Cfg
 );

719 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
ru¬ögComm™dClõ¡Ch¨Cfg
 );

722 
	}
}

738 
uöt8
 
	$ru¬ög_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

739 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

741 
bSètus_t
 
°©us
 = 
SUCCESS
;

744 i‡–
off£t
 > 0 )

746  ( 
ATT_ERR_ATTR_NOT_LONG
 );

749 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

751  
uuid
 )

754 
SENSOR_LOC_UUID
:

756 *
pLí
 = 1;

757 
pVÆue
[0] = *
pAâr
->pValue;

762 
RSC_FEATURE_UUID
:

764 *
pLí
 = 2;

765 
pVÆue
[0] = 
	`LO_UINT16
–
ru¬ögFótuªs
 );

766 
pVÆue
[1] = 
	`HI_UINT16
–
ru¬ögFótuªs
 );

771 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

776 i‡–
ru¬ögSîvi˚CB
 !
NULL
 )

778 
	`VOID
 (*
ru¬ögSîvi˚CB
)–
RSC_READ_ATTR
, 
NULL
 );

781  ( 
°©us
 );

782 
	}
}

797 
bSètus_t
 
	$ru¬ög_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

798 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

800 
bSètus_t
 
°©us
 = 
SUCCESS
;

801 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

803 i‡–
off£t
 > 0 )

805  (
ATT_ERR_ATTR_NOT_LONG
);

808  
uuid
 )

810 
SC_CTRL_PT_UUID
:

812 i‡–
scOpInProgªss
 =
TRUE
 )

814 
°©us
 = 
RSC_ERR_PROC_IN_PROGRESS
;

817 i‡–(
ru¬ögComm™dClõ¡Ch¨Cfg
[
c⁄nH™dÀ
].
vÆue
 & 
GATT_CLIENT_CFG_INDICATE
Ë=
FALSE
 )

819 
°©us
 = 
RSC_ERR_CCC_IMPROPER_CFG
;

824 
	`ru¬ög_Pro˚ssRSCCmd
–
pAâr
->
h™dÀ
, 
pVÆue
, 
Àn
 );

825 
c⁄√˘i⁄H™dÀ
 = 
c⁄nH™dÀ
;

830 
GATT_CLIENT_CHAR_CFG_UUID
:

831 i‡–
pAâr
->
h™dÀ
 =
ru¬ögAârTbl
[
RSC_COMMAND_CFG_POS
].handle )

833 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

834 
off£t
, 
GATT_CLIENT_CFG_INDICATE
 );

836 i‡–
ru¬ögSîvi˚CB
 !
NULL
 )

838 
	`VOID
 (*
ru¬ögSîvi˚CB
)–
RSC_WRITE_ATTR
, 
NULL
 );

841 i‡–
pAâr
->
h™dÀ
 =
ru¬ögAârTbl
[
RSC_MEAS_CFG_POS
].handle )

843 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

844 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

845 i‡–
°©us
 =
SUCCESS
 )

848 i‡–
ru¬ögSîvi˚CB
 !
NULL
 )

850 
uöt16
 
ch¨Cfg
 = 
	`BUILD_UINT16
–
pVÆue
[0],ÖValue[1] );

852 
	`VOID
 (*
ru¬ögSîvi˚CB
)–((
ch¨Cfg
 =
GATT_CFG_NO_OPERATION
) ?

853 
RSC_MEAS_NOTI_DISABLED
 :

854 
RSC_MEAS_NOTI_ENABLED
 ), 
NULL
 );

861 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

865  ( 
°©us
 );

866 
	}
}

	@../../Profiles/RSC/runningservice.h

40 #i‚de‡
RUNNINGSERVICE_H


41 
	#RUNNINGSERVICE_H


	)

43 #ifde‡
__˝lu•lus


56 
	#RUNNING_SERVICE
 0x00000001

	)

59 
	#RSC_ERR_PROC_IN_PROGRESS
 0x80

	)

60 
	#RSC_ERR_CCC_IMPROPER_CFG
 0x81

	)

62 
	#RSC_SUCCESS
 1

	)

63 
	#RSC_OPCODE_NOT_SUPPORTED
 2

	)

64 
	#RSC_INVALID_PARAMETER
 3

	)

65 
	#RSC_OPERATION_FAILED
 4

	)

68 
	#RSC_MEAS
 1

	)

69 
	#RSC_MEAS_CHAR_CFG
 2

	)

70 
	#RSC_FEATURE
 3

	)

71 
	#RSC_SENS_LOC
 4

	)

72 
	#RSC_COMMAND
 5

	)

73 
	#RSC_COMMAND_CHAR_CFG
 6

	)

74 
	#RSC_AVAIL_SENS_LOCS
 7

	)

77 
	#RSC_INST_STRIDE_PRESENT
 0x01

	)

78 
	#RSC_TOTAL_DIST_PRESENT
 0x02

	)

79 
	#RSC_WALKING_OR_RUNNING
 0x04

	)

82 
	#RSC_NO_SUPPORT
 0x00

	)

83 
	#RSC_STRIDE_SUPP
 0x01

	)

84 
	#RSC_TOTAL_DIST_SUPP
 0x02

	)

85 
	#RSC_WALKING_RUNNING_SUPP
 0x04

	)

86 
	#RSC_SENSOR_CALIB_SUPP
 0x08

	)

87 
	#RSC_MULTI_SENS_SUPP
 0x10

	)

88 
	#RSC_FULL_SUPPORT
 0x1F

	)

91 
	#RSC_NO_SENSOR_LOC
 0x00

	)

92 
	#RSC_SENSOR_LOC_0
 0x01

	)

93 
	#RSC_SENSOR_LOC_1
 0x02

	)

94 
	#RSC_SENSOR_LOC_2
 0x04

	)

95 
	#RSC_SENSOR_LOC_3
 0x08

	)

96 
	#RSC_ALL_SENSORS
 0xFF

	)

99 
	#RSC_MAX_SENSOR_LOCS
 8

	)

102 
	#RSC_SET_CUMM_VAL
 1

	)

103 
	#RSC_START_SENS_CALIB
 2

	)

104 
	#RSC_UPDATE_SENS_LOC
 3

	)

105 
	#RSC_REQ_SUPP_SENS_LOC
 4

	)

106 
	#RSC_COMMAND_RSP
 16

	)

109 
	#RSC_FLAGS_AT_REST
 0x00

	)

110 
	#RSC_FLAGS_STRIDE
 0x01

	)

111 
	#RSC_FLAGS_DIST
 0x02

	)

112 
	#RSC_FLAGS_ALL
 0x03

	)

115 
	#DEFAULT_NOTI_INTERVAL
 1000

116 

	)

117 
	#VALUE_ROLL_OVER
 64000

118 

	)

120 
	#RSC_CMD_SET_CUMM_VAL
 1

	)

121 
	#RSC_CMD_START_SENS_CALIB
 2

	)

122 
	#RSC_CMD_UPDATE_SENS_LOC
 3

	)

123 
	#RSC_MEAS_NOTI_ENABLED
 4

	)

124 
	#RSC_MEAS_NOTI_DISABLED
 5

	)

125 
	#RSC_READ_ATTR
 6

	)

126 
	#RSC_WRITE_ATTR
 7

	)

133 
bSètus_t
 (*
	tru¬ögSîvi˚CB_t
)(
	tuöt8
 
	tevít
, 
	tuöt32
 *
	tpNewCummVÆ
);

156 
Ru¬ögSîvi˚_Inô
–
uöt8
 
èsk_id
 );

169 
uöt16
 
Ru¬ögSîvi˚_Pro˚ssEvít
–
uöt8
 
èsk_id
, uöt16 
evíts
 );

181 
bSètus_t
 
Ru¬ög_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

193 
Ru¬ög_Regi°î
–
ru¬ögSîvi˚CB_t
 
p‚Sîvi˚CB
 );

209 
bSètus_t
 
Ru¬ög_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

224 
bSètus_t
 
Ru¬ög_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

237 
bSètus_t
 
Ru¬ög_MósNŸify
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueNŸi_t
 *
pNŸi
 );

249 
Ru¬ög_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

254 #ifde‡
__˝lu•lus


	@../../Profiles/Roles/broadcaster.c

43 
	~"bcomdef.h
"

44 
	~"OSAL.h
"

45 
	~"hci_é.h
"

47 
	~"g≠.h
"

49 
	~"brﬂdˇ°î.h
"

59 
	#START_ADVERTISING_EVT
 0x0001

	)

61 
	#DEFAULT_ADVERT_OFF_TIME
 30000

62 

	)

82 
uöt8
 
	gg≠Rﬁe_TaskID
;

84 
g≠rﬁe_Sèãs_t
 
	gg≠Rﬁe_°©e
;

91 
uöt8
 
	gg≠Rﬁe_¥ofûeRﬁe
;

92 
uöt8
 
	gg≠Rﬁe_bdAddr
[
B_ADDR_LEN
];

93 
uöt8
 
	gg≠Rﬁe_AdvE«bÀd
 = 
TRUE
;

94 
uöt16
 
	gg≠Rﬁe_AdvîtOffTime
 = 
DEFAULT_ADVERT_OFF_TIME
;

95 
uöt8
 
	gg≠Rﬁe_AdvîtD©aLí
 = 3;

96 
uöt8
 
	gg≠Rﬁe_AdvîtD©a
[
B_MAX_ADV_LEN
] =

99 
GAP_ADTYPE_FLAGS
,

101 
GAP_ADTYPE_FLAGS_BREDR_NOT_SUPPORTED
,

104 
uöt8
 
	gg≠Rﬁe_SˇnR•D©aLí
 = 0;

105 
uöt8
 
	gg≠Rﬁe_SˇnR•D©a
[
B_MAX_ADV_LEN
] = {0};

106 
uöt8
 
	gg≠Rﬁe_AdvEvítTy≥
;

107 
uöt8
 
	gg≠Rﬁe_AdvDúe˘Ty≥
;

108 
uöt8
 
	gg≠Rﬁe_AdvDúe˘Addr
[
B_ADDR_LEN
] = {0};

109 
uöt8
 
	gg≠Rﬁe_AdvCh™M≠
;

110 
uöt8
 
	gg≠Rﬁe_AdvFûãrPﬁicy
;

113 
g≠RﬁesCBs_t
 *
	gpG≠Rﬁes_AµCGs
 = 
NULL
;

126 
g≠Rﬁe_Pro˚ssOSALMsg
–
oßl_evít_hdr_t
 *
pMsg
 );

127 
g≠Rﬁe_Pro˚ssGAPMsg
–
g≠EvítHdr_t
 *
pMsg
 );

128 
g≠Rﬁe_SëupGAP
( );

143 
bSètus_t
 
	$GAPRﬁe_SëP¨amëî
–
uöt16
 
∑øm
, 
uöt8
 
Àn
, *
pVÆue
 )

145 
bSètus_t
 
ªt
 = 
SUCCESS
;

146  
∑øm
 )

148 
GAPROLE_ADVERT_ENABLED
:

149 i‡–
Àn
 =–
uöt8
 ) )

151 
uöt8
 
ﬁdAdvE«bÀd
 = 
g≠Rﬁe_AdvE«bÀd
;

152 
g≠Rﬁe_AdvE«bÀd
 = *((
uöt8
*)
pVÆue
);

154 i‡–(
ﬁdAdvE«bÀd
Ë&& (
g≠Rﬁe_AdvE«bÀd
 =
FALSE
) )

157 i‡–
g≠Rﬁe_°©e
 =
GAPROLE_ADVERTISING
 )

159 
VOID
 
	`GAP_EndDiscovîabÀ
–
g≠Rﬁe_TaskID
 );

162 i‡–(
ﬁdAdvE«bÀd
 =
FALSE
Ë&& (
g≠Rﬁe_AdvE«bÀd
) )

165 i‡–(
g≠Rﬁe_°©e
 =
GAPROLE_STARTED
)

166 || (
g≠Rﬁe_°©e
 =
GAPROLE_WAITING
) )

168 
VOID
 
	`oßl_£t_evít
–
g≠Rﬁe_TaskID
, 
START_ADVERTISING_EVT
 );

174 
ªt
 = 
bÀInvÆidR™ge
;

178 
GAPROLE_ADVERT_OFF_TIME
:

179 i‡–
Àn
 = ( 
uöt16
 ) )

181 
g≠Rﬁe_AdvîtOffTime
 = *((
uöt16
*)
pVÆue
);

185 
ªt
 = 
bÀInvÆidR™ge
;

189 
GAPROLE_ADVERT_DATA
:

190 i‡–
Àn
 <
B_MAX_ADV_LEN
 )

192 
VOID
 
	`oßl_mem£t
–
g≠Rﬁe_AdvîtD©a
, 0, 
B_MAX_ADV_LEN
 );

193 
VOID
 
	`oßl_mem˝y
–
g≠Rﬁe_AdvîtD©a
, 
pVÆue
, 
Àn
 );

194 
g≠Rﬁe_AdvîtD©aLí
 = 
Àn
;

198 
ªt
 = 
bÀInvÆidR™ge
;

202 
GAPROLE_SCAN_RSP_DATA
:

203 i‡–
Àn
 <
B_MAX_ADV_LEN
 )

205 
VOID
 
	`oßl_mem£t
–
g≠Rﬁe_SˇnR•D©a
, 0, 
B_MAX_ADV_LEN
 );

206 
VOID
 
	`oßl_mem˝y
–
g≠Rﬁe_SˇnR•D©a
, 
pVÆue
, 
Àn
 );

207 
g≠Rﬁe_SˇnR•D©aLí
 = 
Àn
;

211 
ªt
 = 
bÀInvÆidR™ge
;

215 
GAPROLE_ADV_EVENT_TYPE
:

216 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
GAP_ADTYPE_ADV_LDC_DIRECT_IND
) )

218 
g≠Rﬁe_AdvEvítTy≥
 = *((
uöt8
*)
pVÆue
);

222 
ªt
 = 
bÀInvÆidR™ge
;

226 
GAPROLE_ADV_DIRECT_TYPE
:

227 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
ADDRTYPE_PRIVATE_RESOLVE
) )

229 
g≠Rﬁe_AdvDúe˘Ty≥
 = *((
uöt8
*)
pVÆue
);

233 
ªt
 = 
bÀInvÆidR™ge
;

237 
GAPROLE_ADV_DIRECT_ADDR
:

238 i‡–
Àn
 =
B_ADDR_LEN
 )

240 
VOID
 
	`oßl_mem˝y
–
g≠Rﬁe_AdvDúe˘Addr
, 
pVÆue
, 
B_ADDR_LEN
 ) ;

244 
ªt
 = 
bÀInvÆidR™ge
;

248 
GAPROLE_ADV_CHANNEL_MAP
:

249 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
) <= 0x07) )

251 
g≠Rﬁe_AdvCh™M≠
 = *((
uöt8
*)
pVÆue
);

255 
ªt
 = 
bÀInvÆidR™ge
;

259 
GAPROLE_ADV_FILTER_POLICY
:

260 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
GAP_FILTER_POLICY_WHITE
) )

262 
g≠Rﬁe_AdvFûãrPﬁicy
 = *((
uöt8
*)
pVÆue
);

266 
ªt
 = 
bÀInvÆidR™ge
;

272 i‡–(
∑øm
 < 
TGAP_PARAMID_MAX
Ë&& (
Àn
 = ( 
uöt16
 )) )

274 
ªt
 = 
	`GAP_SëP¨amVÆue
–
∑øm
, *((
uöt16
*)
pVÆue
) );

278 
ªt
 = 
INVALIDPARAMETER
;

283  ( 
ªt
 );

284 
	}
}

291 
bSètus_t
 
	$GAPRﬁe_GëP¨amëî
–
uöt16
 
∑øm
, *
pVÆue
 )

293 
bSètus_t
 
ªt
 = 
SUCCESS
;

294  
∑øm
 )

296 
GAPROLE_PROFILEROLE
:

297 *((
uöt8
*)
pVÆue
Ë
g≠Rﬁe_¥ofûeRﬁe
;

300 
GAPROLE_BD_ADDR
:

301 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠Rﬁe_bdAddr
, 
B_ADDR_LEN
 ) ;

304 
GAPROLE_ADVERT_ENABLED
:

305 *((
uöt8
*)
pVÆue
Ë
g≠Rﬁe_AdvE«bÀd
;

308 
GAPROLE_ADVERT_OFF_TIME
:

309 *((
uöt16
*)
pVÆue
Ë
g≠Rﬁe_AdvîtOffTime
;

312 
GAPROLE_ADVERT_DATA
:

313 
VOID
 
	`oßl_mem˝y
–
pVÆue
 , 
g≠Rﬁe_AdvîtD©a
, 
g≠Rﬁe_AdvîtD©aLí
 );

316 
GAPROLE_SCAN_RSP_DATA
:

317 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠Rﬁe_SˇnR•D©a
, 
g≠Rﬁe_SˇnR•D©aLí
 ) ;

320 
GAPROLE_ADV_EVENT_TYPE
:

321 *((
uöt8
*)
pVÆue
Ë
g≠Rﬁe_AdvEvítTy≥
;

324 
GAPROLE_ADV_DIRECT_TYPE
:

325 *((
uöt8
*)
pVÆue
Ë
g≠Rﬁe_AdvDúe˘Ty≥
;

328 
GAPROLE_ADV_DIRECT_ADDR
:

329 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠Rﬁe_AdvDúe˘Addr
, 
B_ADDR_LEN
 ) ;

332 
GAPROLE_ADV_CHANNEL_MAP
:

333 *((
uöt8
*)
pVÆue
Ë
g≠Rﬁe_AdvCh™M≠
;

336 
GAPROLE_ADV_FILTER_POLICY
:

337 *((
uöt8
*)
pVÆue
Ë
g≠Rﬁe_AdvFûãrPﬁicy
;

342 i‡–
∑øm
 < 
TGAP_PARAMID_MAX
 )

344 *((
uöt16
*)
pVÆue
Ë
	`GAP_GëP¨amVÆue
–
∑øm
 );

348 
ªt
 = 
INVALIDPARAMETER
;

353  ( 
ªt
 );

354 
	}
}

361 
bSètus_t
 
	$GAPRﬁe_SèπDevi˚
–
g≠RﬁesCBs_t
 *
pAµCÆlbacks
 )

363 i‡–
g≠Rﬁe_°©e
 =
GAPROLE_INIT
 )

366 i‡–
pAµCÆlbacks
 )

368 
pG≠Rﬁes_AµCGs
 = 
pAµCÆlbacks
;

372 
	`g≠Rﬁe_SëupGAP
();

374  ( 
SUCCESS
 );

378  ( 
bÀAÃódyInReque°edMode
 );

380 
	}
}

391 
	$GAPRﬁe_Inô
–
uöt8
 
èsk_id
 )

393 
g≠Rﬁe_TaskID
 = 
èsk_id
;

395 
g≠Rﬁe_°©e
 = 
GAPROLE_INIT
;

397 
	`GAP_Regi°îF‹HCIMsgs
–
g≠Rﬁe_TaskID
 );

400 
g≠Rﬁe_¥ofûeRﬁe
 = 
GAP_PROFILE_BROADCASTER
;

402 
g≠Rﬁe_AdvEvítTy≥
 = 
GAP_ADTYPE_ADV_NONCONN_IND
;

403 
g≠Rﬁe_AdvDúe˘Ty≥
 = 
ADDRTYPE_PUBLIC
;

404 
g≠Rﬁe_AdvCh™M≠
 = 
GAP_ADVCHAN_ALL
;

405 
g≠Rﬁe_AdvFûãrPﬁicy
 = 
GAP_FILTER_POLICY_ALL
;

406 
	}
}

413 
uöt16
 
	$GAPRﬁe_Pro˚ssEvít
–
uöt8
 
èsk_id
, 
uöt16
 
evíts
 )

415 
VOID
 
èsk_id
;

417 i‡–
evíts
 & 
SYS_EVENT_MSG
 )

419 
uöt8
 *
pMsg
;

421 i‡–(
pMsg
 = 
	`oßl_msg_ª˚ive
–
g≠Rﬁe_TaskID
 )Ë!
NULL
 )

423 
	`g≠Rﬁe_Pro˚ssOSALMsg
–(
oßl_evít_hdr_t
 *)
pMsg
 );

426 
VOID
 
	`oßl_msg_dóŒoˇã
–
pMsg
 );

430  (
evíts
 ^ 
SYS_EVENT_MSG
);

433 i‡–
evíts
 & 
START_ADVERTISING_EVT
 )

435 i‡–
g≠Rﬁe_AdvE«bÀd
 )

437 
g≠AdvîtisögP¨ams_t
 
∑øms
;

440 
∑øms
.
evítTy≥
 = 
g≠Rﬁe_AdvEvítTy≥
;

441 
∑øms
.
öôüt‹AddrTy≥
 = 
g≠Rﬁe_AdvDúe˘Ty≥
;

442 
VOID
 
	`oßl_mem˝y
–
∑øms
.
öôüt‹Addr
, 
g≠Rﬁe_AdvDúe˘Addr
, 
B_ADDR_LEN
 );

443 
∑øms
.
ch™√lM≠
 = 
g≠Rﬁe_AdvCh™M≠
;

444 
∑øms
.
fûãrPﬁicy
 = 
g≠Rﬁe_AdvFûãrPﬁicy
;

446 i‡–
	`GAP_MakeDiscovîabÀ
–
g≠Rﬁe_TaskID
, &
∑øms
 ) !
SUCCESS
 )

448 
g≠Rﬁe_°©e
 = 
GAPROLE_ERROR
;

449 i‡–
pG≠Rﬁes_AµCGs
 &&ÖG≠Rﬁes_AµCGs->
p‚SèãCh™ge
 )

451 
pG≠Rﬁes_AµCGs
->
	`p‚SèãCh™ge
–
g≠Rﬁe_°©e
 );

456  ( 
evíts
 ^ 
START_ADVERTISING_EVT
 );

461 
	}
}

472 
	$g≠Rﬁe_Pro˚ssOSALMsg
–
oßl_evít_hdr_t
 *
pMsg
 )

474  
pMsg
->
evít
 )

476 
HCI_GAP_EVENT_EVENT
:

477 i‡–
pMsg
->
°©us
 =
HCI_COMMAND_COMPLETE_EVENT_CODE
 )

483 
GAP_MSG_EVENT
:

484 
	`g≠Rﬁe_Pro˚ssGAPMsg
–(
g≠EvítHdr_t
 *)
pMsg
 );

490 
	}
}

501 
	$g≠Rﬁe_Pro˚ssGAPMsg
–
g≠EvítHdr_t
 *
pMsg
 )

503 
uöt8
 
nŸify
 = 
FALSE
;

505  
pMsg
->
›code
 )

507 
GAP_DEVICE_INIT_DONE_EVENT
:

509 
g≠Devi˚InôD⁄eEvít_t
 *
pPkt
 = (g≠Devi˚InôD⁄eEvít_à*)
pMsg
;

510 
bSètus_t
 
°©
 = 
pPkt
->
hdr
.
°©us
;

512 i‡–
°©
 =
SUCCESS
 )

515 
VOID
 
	`oßl_mem˝y
–
g≠Rﬁe_bdAddr
, 
pPkt
->
devAddr
, 
B_ADDR_LEN
 );

517 
g≠Rﬁe_°©e
 = 
GAPROLE_STARTED
;

520 
°©
 = 
	`GAP_Upd©eAdvîtisögD©a
–
g≠Rﬁe_TaskID
, 
TRUE
,

521 
g≠Rﬁe_AdvîtD©aLí
,

522 
g≠Rﬁe_AdvîtD©a
 );

525 i‡–
°©
 !
SUCCESS
 )

527 
g≠Rﬁe_°©e
 = 
GAPROLE_ERROR
;

530 
nŸify
 = 
TRUE
;

534 
GAP_ADV_DATA_UPDATE_DONE_EVENT
:

536 
g≠AdvD©aUpd©eEvít_t
 *
pPkt
 = (g≠AdvD©aUpd©eEvít_à*)
pMsg
;

538 i‡–
pPkt
->
hdr
.
°©us
 =
SUCCESS
 )

540 i‡–
pPkt
->
adTy≥
 )

543 
pPkt
->
hdr
.
°©us
 = 
	`GAP_Upd©eAdvîtisögD©a
–
g≠Rﬁe_TaskID
,

544 
FALSE
, 
g≠Rﬁe_SˇnR•D©aLí
, 
g≠Rﬁe_SˇnR•D©a
 );

549 
VOID
 
	`oßl_£t_evít
–
g≠Rﬁe_TaskID
, 
START_ADVERTISING_EVT
 );

553 i‡–
pPkt
->
hdr
.
°©us
 !
SUCCESS
 )

556 
g≠Rﬁe_°©e
 = 
GAPROLE_ERROR
;

557 
nŸify
 = 
TRUE
;

562 
GAP_MAKE_DISCOVERABLE_DONE_EVENT
:

563 
GAP_END_DISCOVERABLE_DONE_EVENT
:

565 
g≠MakeDiscovîabÀR•Evít_t
 *
pPkt
 = (g≠MakeDiscovîabÀR•Evít_à*)
pMsg
;

567 i‡–
pPkt
->
hdr
.
°©us
 =
SUCCESS
 )

569 i‡–
pMsg
->
›code
 =
GAP_MAKE_DISCOVERABLE_DONE_EVENT
 )

571 
g≠Rﬁe_°©e
 = 
GAPROLE_ADVERTISING
;

576 i‡–
g≠Rﬁe_AdvîtOffTime
 != 0 )

578 i‡––
g≠Rﬁe_AdvE«bÀd
 ) )

580 
VOID
 
	`oßl_°¨t_timîEx
–
g≠Rﬁe_TaskID
, 
START_ADVERTISING_EVT
, 
g≠Rﬁe_AdvîtOffTime
 );

589 
g≠Rﬁe_AdvE«bÀd
 = 
FALSE
;

593 
g≠Rﬁe_°©e
 = 
GAPROLE_WAITING
;

599 
g≠Rﬁe_°©e
 = 
GAPROLE_ERROR
;

601 
nŸify
 = 
TRUE
;

609 i‡–
nŸify
 =
TRUE
 )

612 i‡–
pG≠Rﬁes_AµCGs
 &&ÖG≠Rﬁes_AµCGs->
p‚SèãCh™ge
 )

614 
pG≠Rﬁes_AµCGs
->
	`p‚SèãCh™ge
–
g≠Rﬁe_°©e
 );

617 
	}
}

629 
	$g≠Rﬁe_SëupGAP
( )

631 
VOID
 
	`GAP_Devi˚Inô
–
g≠Rﬁe_TaskID
,

632 
g≠Rﬁe_¥ofûeRﬁe
, 0,

633 
NULL
, NULL, NULL );

634 
	}
}

	@../../Profiles/Roles/broadcaster.h

41 #i‚de‡
BROADCASTER_H


42 
	#BROADCASTER_H


	)

44 #ifde‡
__˝lu•lus


60 
	#GAPROLE_PROFILEROLE
 0x300

61 
	#GAPROLE_BD_ADDR
 0x301

62 
	#GAPROLE_ADVERT_ENABLED
 0x302

63 
	#GAPROLE_ADVERT_OFF_TIME
 0x303

64 
	#GAPROLE_ADVERT_DATA
 0x304

65 
	#GAPROLE_SCAN_RSP_DATA
 0x305

66 
	#GAPROLE_ADV_EVENT_TYPE
 0x306

67 
	#GAPROLE_ADV_DIRECT_TYPE
 0x307

68 
	#GAPROLE_ADV_DIRECT_ADDR
 0x308

69 
	#GAPROLE_ADV_CHANNEL_MAP
 0x309

70 
	#GAPROLE_ADV_FILTER_POLICY
 0x30A

71 

	)

82 
GAPROLE_INIT
 = 0,

83 
GAPROLE_STARTED
,

84 
GAPROLE_ADVERTISING
,

85 
GAPROLE_WAITING
,

86 
GAPROLE_ERROR


87 } 
	tg≠rﬁe_Sèãs_t
;

101 (*
g≠RﬁesSèãNŸify_t
)–
	tg≠rﬁe_Sèãs_t
 
	t√wSèã
 );

106 (*
g≠RﬁesRssiRód_t
)–
	töt8
 
	t√wRSSI
 );

113 
g≠RﬁesSèãNŸify_t
 
p‚SèãCh™ge
;

114 
g≠RﬁesRssiRód_t
 
p‚RssiRód
;

115 } 
	tg≠RﬁesCBs_t
;

144 
bSètus_t
 
GAPRﬁe_SëP¨amëî
–
uöt16
 
∑øm
, 
uöt8
 
Àn
, *
pVÆue
 );

161 
bSètus_t
 
GAPRﬁe_GëP¨amëî
–
uöt16
 
∑øm
, *
pVÆue
 );

170 
bSètus_t
 
GAPRﬁe_SèπDevi˚
–
g≠RﬁesCBs_t
 *
pAµCÆlbacks
 );

195 
GAPRﬁe_Inô
–
uöt8
 
èsk_id
 );

211 
uöt16
 
GAPRﬁe_Pro˚ssEvít
–
uöt8
 
èsk_id
, uöt16 
evíts
 );

216 #ifde‡
__˝lu•lus


	@../../Profiles/Roles/central.c

43 
	~"bcomdef.h
"

44 
	~"OSAL.h
"

45 
	~"oßl_cbTimî.h
"

46 
	~"oßl_¢v.h
"

47 
	~"hci_é.h
"

48 
	~"l2ˇp.h
"

49 
	~"lökdb.h
"

50 
	~"g≠.h
"

51 
	~"g≠b⁄dmgr.h
"

52 
	~"˚¡øl.h
"

63 
	#START_ADVERTISING_EVT
 0x0001

	)

64 
	#RSSI_READ_EVT
 0x0002

	)

65 
	#UPDATE_PARAMS_TIMEOUT_EVT
 0x0004

	)

68 
	#GAPCENTRALROLE_RSSI_MSG_EVT
 0xE0

	)

77 
uöt16
 
	m≥riod
;

78 
uöt16
 
	mc⁄nH™dÀ
;

79 
uöt8
 
	mtimîId
;

80 } 
	tg≠CíåÆRﬁeRssi_t
;

85 
oßl_evít_hdr_t
 
	mhdr
;

86 
g≠CíåÆRﬁeRssi_t
 *
	mpRssi
;

87 } 
	tg≠CíåÆRﬁeRssiEvít_t
;

106 
uöt8
 
	gg≠CíåÆRﬁeTaskId
;

109 
g≠CíåÆRﬁeCB_t
 *
	gpG≠CíåÆRﬁeCB
;

112 
g≠CíåÆRﬁeRssi_t
 
	gg≠CíåÆRﬁeRssi
[
GAPCENTRALROLE_NUM_RSSI_LINKS
];

119 
uöt8
 
	gg≠CíåÆRﬁeIRK
[
KEYLEN
];

120 
uöt8
 
	gg≠CíåÆRﬁeSRK
[
KEYLEN
];

121 
uöt32
 
	gg≠CíåÆRﬁeSignCou¡î
;

122 
uöt8
 
	gg≠CíåÆRﬁeBdAddr
[
B_ADDR_LEN
];

123 
uöt8
 
	gg≠CíåÆRﬁeMaxSˇnRes
 = 0;

128 
g≠CíåÆRﬁe_Pro˚ssOSALMsg
–
oßl_evít_hdr_t
 *
pMsg
 );

129 
g≠CíåÆRﬁe_Pro˚ssGAPMsg
–
g≠EvítHdr_t
 *
pMsg
 );

130 
g≠CíåÆRﬁeRssi_t
 *
g≠CíåÆRﬁe_RssiAŒoc
–
uöt16
 
c⁄nH™dÀ
 );

131 
g≠CíåÆRﬁeRssi_t
 *
g≠CíåÆRﬁe_RssiFöd
–
uöt16
 
c⁄nH™dÀ
 );

132 
g≠CíåÆRﬁe_RssiFªe
–
uöt16
 
c⁄nH™dÀ
 );

133 
g≠CíåÆRﬁe_timîCB
–
uöt8
 *
pD©a
 );

145 
bSètus_t
 
	$GAPCíåÆRﬁe_SèπDevi˚
–
g≠CíåÆRﬁeCB_t
 *
pAµCÆlbacks
 )

147 i‡–
pAµCÆlbacks
 )

149 
pG≠CíåÆRﬁeCB
 = 
pAµCÆlbacks
;

152  
	`GAP_Devi˚Inô
–
g≠CíåÆRﬁeTaskId
, 
GAP_PROFILE_CENTRAL
,

153 
g≠CíåÆRﬁeMaxSˇnRes
, 
g≠CíåÆRﬁeIRK
,

154 
g≠CíåÆRﬁeSRK
, &
g≠CíåÆRﬁeSignCou¡î
 );

155 
	}
}

162 
bSètus_t
 
	$GAPCíåÆRﬁe_SëP¨amëî
–
uöt16
 
∑øm
, 
uöt8
 
Àn
, *
pVÆue
 )

164 
bSètus_t
 
ªt
 = 
SUCCESS
;

166  
∑øm
 )

168 
GAPCENTRALROLE_IRK
:

169 i‡–
Àn
 =
KEYLEN
 )

171 
VOID
 
	`oßl_mem˝y
–
g≠CíåÆRﬁeIRK
, 
pVÆue
, 
KEYLEN
 ) ;

175 
ªt
 = 
bÀInvÆidR™ge
;

179 
GAPCENTRALROLE_SRK
:

180 i‡–
Àn
 =
KEYLEN
 )

182 
VOID
 
	`oßl_mem˝y
–
g≠CíåÆRﬁeSRK
, 
pVÆue
, 
KEYLEN
 ) ;

186 
ªt
 = 
bÀInvÆidR™ge
;

190 
GAPCENTRALROLE_SIGNCOUNTER
:

191 i‡–
Àn
 = ( 
uöt32
 ) )

193 
g≠CíåÆRﬁeSignCou¡î
 = *((
uöt32
*)
pVÆue
);

197 
ªt
 = 
bÀInvÆidR™ge
;

201 
GAPCENTRALROLE_MAX_SCAN_RES
:

202 i‡–
Àn
 = ( 
uöt8
 ) )

204 
g≠CíåÆRﬁeMaxSˇnRes
 = *((
uöt8
*)
pVÆue
);

208 
ªt
 = 
bÀInvÆidR™ge
;

213 
ªt
 = 
INVALIDPARAMETER
;

217  
ªt
;

218 
	}
}

225 
bSètus_t
 
	$GAPCíåÆRﬁe_GëP¨amëî
–
uöt16
 
∑øm
, *
pVÆue
 )

227 
bSètus_t
 
ªt
 = 
SUCCESS
;

229  
∑øm
 )

231 
GAPCENTRALROLE_IRK
:

232 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠CíåÆRﬁeIRK
, 
KEYLEN
 ) ;

235 
GAPCENTRALROLE_SRK
:

236 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠CíåÆRﬁeSRK
, 
KEYLEN
 ) ;

239 
GAPCENTRALROLE_SIGNCOUNTER
:

240 *((
uöt32
*)
pVÆue
Ë
g≠CíåÆRﬁeSignCou¡î
;

243 
GAPCENTRALROLE_BD_ADDR
:

244 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠CíåÆRﬁeBdAddr
, 
B_ADDR_LEN
 ) ;

247 
GAPCENTRALROLE_MAX_SCAN_RES
:

248 *((
uöt8
*)
pVÆue
Ë
g≠CíåÆRﬁeMaxSˇnRes
;

252 
ªt
 = 
INVALIDPARAMETER
;

256  
ªt
;

257 
	}
}

264 
bSètus_t
 
	$GAPCíåÆRﬁe_Tîmö©eLök
–
uöt16
 
c⁄nH™dÀ
 )

266  
	`GAP_Tîmö©eLökReq
–
g≠CíåÆRﬁeTaskId
, 
c⁄nH™dÀ
, 
HCI_DISCONNECT_REMOTE_USER_TERM
 ) ;

267 
	}
}

274 
bSètus_t
 
	$GAPCíåÆRﬁe_E°ablishLök
–
uöt8
 
highDutyCy˛e
, uöt8 
whôeLi°
,

275 
uöt8
 
addrTy≥Pìr
, uöt8 *
≥îAddr
 )

277 
g≠E°LökReq_t
 
∑øms
;

279 
∑øms
.
èskID
 = 
g≠CíåÆRﬁeTaskId
;

280 
∑øms
.
highDutyCy˛e
 = highDutyCycle;

281 
∑øms
.
whôeLi°
 = whiteList;

282 
∑øms
.
addrTy≥Pìr
 =áddrTypePeer;

283 
VOID
 
	`oßl_mem˝y
–
∑øms
.
≥îAddr
,ÖìrAddr, 
B_ADDR_LEN
 );

285  
	`GAP_E°ablishLökReq
–&
∑øms
 );

286 
	}
}

293 
bSètus_t
 
	$GAPCíåÆRﬁe_Upd©eLök
–
uöt16
 
c⁄nH™dÀ
, uöt16 
c⁄nI¡îvÆMö
,

294 
uöt16
 
c⁄nI¡îvÆMax
, uöt16 
c⁄nL©ícy
,

295 
uöt16
 
c⁄nTimeout
 )

297  (
bSètus_t
Ë
	`HCI_LE_C⁄nUpd©eCmd
–
c⁄nH™dÀ
, 
c⁄nI¡îvÆMö
,

298 
c⁄nI¡îvÆMax
, 
c⁄nL©ícy
,

299 
c⁄nTimeout
, 0, 0 );

300 
	}
}

307 
bSètus_t
 
	$GAPCíåÆRﬁe_SèπDiscovîy
–
uöt8
 
mode
, uöt8 
a˘iveSˇn
, uöt8 
whôeLi°
 )

309 
g≠DevDiscReq_t
 
∑øms
;

311 
∑øms
.
èskID
 = 
g≠CíåÆRﬁeTaskId
;

312 
∑øms
.
mode
 = mode;

313 
∑øms
.
a˘iveSˇn
 =áctiveScan;

314 
∑øms
.
whôeLi°
 = whiteList;

316  
	`GAP_Devi˚DiscovîyReque°
–&
∑øms
 );

317 
	}
}

324 
bSètus_t
 
	$GAPCíåÆRﬁe_C™˚lDiscovîy
( )

326  
	`GAP_Devi˚DiscovîyC™˚l
–
g≠CíåÆRﬁeTaskId
 );

327 
	}
}

334 
bSètus_t
 
	$GAPCíåÆRﬁe_SèπRssi
–
uöt16
 
c⁄nH™dÀ
, uöt16 
≥riod
 )

336 
g≠CíåÆRﬁeRssi_t
 *
pRssi
;

339 i‡(!
	`lökDB_Up
(
c⁄nH™dÀ
))

341  
bÀInc‹ª˘Mode
;

345 i‡((
pRssi
 = 
	`g≠CíåÆRﬁe_RssiFöd
–
c⁄nH™dÀ
 )Ë!
NULL
)

348 
	`oßl_CbTimîSt›
–
pRssi
->
timîId
 );

351 i‡((
pRssi
 = 
	`g≠CíåÆRﬁe_RssiAŒoc
–
c⁄nH™dÀ
 )Ë!
NULL
)

353 
pRssi
->
≥riod
 =Öeriod;

358  
bÀNoResour˚s
;

362 
	`oßl_CbTimîSèπ
–
g≠CíåÆRﬁe_timîCB
, (
uöt8
 *Ë
pRssi
,

363 
≥riod
, &
pRssi
->
timîId
 );

365  
SUCCESS
;

366 
	}
}

373 
bSètus_t
 
	$GAPCíåÆRﬁe_C™˚lRssi
(
uöt16
 
c⁄nH™dÀ
 )

375 
g≠CíåÆRﬁeRssi_t
 *
pRssi
;

377 i‡((
pRssi
 = 
	`g≠CíåÆRﬁe_RssiFöd
–
c⁄nH™dÀ
 )Ë!
NULL
)

380 
	`oßl_CbTimîSt›
–
pRssi
->
timîId
 );

383 
	`g≠CíåÆRﬁe_RssiFªe
–
c⁄nH™dÀ
 );

385  
SUCCESS
;

389  
bÀInc‹ª˘Mode
;

390 
	}
}

399 
	$GAPCíåÆRﬁe_Inô
–
uöt8
 
èskId
 )

401 
uöt8
 
i
;

403 
g≠CíåÆRﬁeTaskId
 = 
èskId
;

406  
i
 = 0; i < 
GAPCENTRALROLE_NUM_RSSI_LINKS
; i++ )

408 
g≠CíåÆRﬁeRssi
[
i
].
c⁄nH™dÀ
 = 
GAP_CONNHANDLE_ALL
;

409 
g≠CíåÆRﬁeRssi
[
i
].
timîId
 = 
INVALID_TIMER_ID
;

415 
VOID
 
	`oßl_¢v_ªad
–
BLE_NVID_IRK
, 
KEYLEN
, 
g≠CíåÆRﬁeIRK
 );

416 
VOID
 
	`oßl_¢v_ªad
–
BLE_NVID_CSRK
, 
KEYLEN
, 
g≠CíåÆRﬁeSRK
 );

417 
VOID
 
	`oßl_¢v_ªad
–
BLE_NVID_SIGNCOUNTER
, –
uöt32
 ), &
g≠CíåÆRﬁeSignCou¡î
 );

420 
	`GAP_Regi°îF‹HCIMsgs
–
èskId
 );

421 
	}
}

431 
uöt16
 
	$GAPCíåÆRﬁe_Pro˚ssEvít
–
uöt8
 
èskId
, 
uöt16
 
evíts
 )

433 i‡–
evíts
 & 
SYS_EVENT_MSG
 )

435 
uöt8
 *
pMsg
;

437 i‡–(
pMsg
 = 
	`oßl_msg_ª˚ive
–
g≠CíåÆRﬁeTaskId
 )Ë!
NULL
 )

439 
	`g≠CíåÆRﬁe_Pro˚ssOSALMsg
–(
oßl_evít_hdr_t
 *Ë
pMsg
 );

442 
VOID
 
	`oßl_msg_dóŒoˇã
–
pMsg
 );

446  (
evíts
 ^ 
SYS_EVENT_MSG
);

449 i‡–
evíts
 & 
GAP_EVENT_SIGN_COUNTER_CHANGED
 )

452 
VOID
 
	`oßl_¢v_wrôe
–
BLE_NVID_SIGNCOUNTER
, –
uöt32
 ), &
g≠CíåÆRﬁeSignCou¡î
 );

454  ( 
evíts
 ^ 
GAP_EVENT_SIGN_COUNTER_CHANGED
 );

459 
	}
}

470 
	$g≠CíåÆRﬁe_Pro˚ssOSALMsg
–
oßl_evít_hdr_t
 *
pMsg
 )

472  
pMsg
->
evít
 )

474 
HCI_GAP_EVENT_EVENT
:

475 i‡–
pMsg
->
°©us
 =
HCI_COMMAND_COMPLETE_EVENT_CODE
 )

477 
hciEvt_CmdCom∂ëe_t
 *
pPkt
 = (hciEvt_CmdCom∂ëe_à*Ë
pMsg
;

479 i‡–
pPkt
->
cmdOpcode
 =
HCI_READ_RSSI
 )

481 
uöt16
 
c⁄nH™dÀ
 = 
	`BUILD_UINT16
–
pPkt
->
pRëu∫P¨am
[1],ÖPkt->pReturnParam[2] );

482 
öt8
 
rssi
 = (öt8Ë
pPkt
->
pRëu∫P¨am
[3];

485 i‡–
pG≠CíåÆRﬁeCB
 &&ÖG≠CíåÆRﬁeCB->
rssiCB
 )

487 
pG≠CíåÆRﬁeCB
->
	`rssiCB
–
c⁄nH™dÀ
, 
rssi
 );

493 
GAP_MSG_EVENT
:

494 
	`g≠CíåÆRﬁe_Pro˚ssGAPMsg
–(
g≠EvítHdr_t
 *Ë
pMsg
 );

497 
GAPCENTRALROLE_RSSI_MSG_EVT
:

499 
g≠CíåÆRﬁeRssi_t
 *
pRssi
 = ((
g≠CíåÆRﬁeRssiEvít_t
 *Ë
pMsg
)->pRssi;

502 i‡(
pRssi
->
c⁄nH™dÀ
 !
GAP_CONNHANDLE_ALL
 &&

503 
	`lökDB_Up
(
pRssi
->
c⁄nH™dÀ
))

506 
	`oßl_CbTimîSèπ
–
g≠CíåÆRﬁe_timîCB
, (
uöt8
 *Ë
pRssi
,

507 
pRssi
->
≥riod
, &pRssi->
timîId
 );

510 
VOID
 
	`HCI_RódRssiCmd
–
pRssi
->
c⁄nH™dÀ
 );

518 
	}
}

529 
	$g≠CíåÆRﬁe_Pro˚ssGAPMsg
–
g≠EvítHdr_t
 *
pMsg
 )

531  
pMsg
->
›code
 )

533 
GAP_DEVICE_INIT_DONE_EVENT
:

535 
g≠Devi˚InôD⁄eEvít_t
 *
pPkt
 = (g≠Devi˚InôD⁄eEvít_à*Ë
pMsg
;

537 i‡–
pPkt
->
hdr
.
°©us
 =
SUCCESS
 )

540 
VOID
 
	`oßl_¢v_wrôe
–
BLE_NVID_IRK
, 
KEYLEN
, 
g≠CíåÆRﬁeIRK
 );

541 
VOID
 
	`oßl_¢v_wrôe
–
BLE_NVID_CSRK
, 
KEYLEN
, 
g≠CíåÆRﬁeSRK
 );

544 
VOID
 
	`oßl_mem˝y
–
g≠CíåÆRﬁeBdAddr
, 
pPkt
->
devAddr
, 
B_ADDR_LEN
 );

549 
GAP_LINK_ESTABLISHED_EVENT
:

551 
g≠E°LökReqEvít_t
 *
pPkt
 = (g≠E°LökReqEvít_à*Ë
pMsg
;

553 i‡(
pPkt
->
hdr
.
°©us
 =
SUCCESS
)

556 
VOID
 
	`GAPB⁄dMgr_LökE°
–
pPkt
->
devAddrTy≥
,ÖPkt->
devAddr
,

557 
pPkt
->
c⁄√˘i⁄H™dÀ
, 
GAP_PROFILE_CENTRAL
 );

562 
GAP_LINK_TERMINATED_EVENT
:

564 
uöt16
 
c⁄nH™dÀ
 = ((
g≠Tîmö©eLökEvít_t
 *Ë
pMsg
)->
c⁄√˘i⁄H™dÀ
;

566 
VOID
 
	`GAPB⁄dMgr_Pro˚ssGAPMsg
–(
g≠EvítHdr_t
 *)
pMsg
 );

569 
	`GAPCíåÆRﬁe_C™˚lRssi
–
c⁄nH™dÀ
 );

574 
GAP_SLAVE_REQUESTED_SECURITY_EVENT
:

575 
VOID
 
	`GAPB⁄dMgr_Pro˚ssGAPMsg
–
pMsg
 );

583 i‡–
pG≠CíåÆRﬁeCB
 &&ÖG≠CíåÆRﬁeCB->
evítCB
 )

585 
pG≠CíåÆRﬁeCB
->
	`evítCB
–(
g≠CíåÆRﬁeEvít_t
 *Ë
pMsg
 );

587 
	}
}

598 
g≠CíåÆRﬁeRssi_t
 *
	$g≠CíåÆRﬁe_RssiAŒoc
–
uöt16
 
c⁄nH™dÀ
 )

600 
uöt8
 
i
;

603  
i
 = 0; i < 
GAPCENTRALROLE_NUM_RSSI_LINKS
; i++ )

605 i‡–
g≠CíåÆRﬁeRssi
[
i
].
c⁄nH™dÀ
 =
GAP_CONNHANDLE_ALL
 )

607 
g≠CíåÆRﬁeRssi
[
i
].
c⁄nH™dÀ
 = connHandle;

608  &
g≠CíåÆRﬁeRssi
[
i
];

613  
NULL
;

614 
	}
}

625 
g≠CíåÆRﬁeRssi_t
 *
	$g≠CíåÆRﬁe_RssiFöd
–
uöt16
 
c⁄nH™dÀ
 )

627 
uöt8
 
i
;

630  
i
 = 0; i < 
GAPCENTRALROLE_NUM_RSSI_LINKS
; i++ )

632 i‡–
g≠CíåÆRﬁeRssi
[
i
].
c⁄nH™dÀ
 == connHandle )

634  &
g≠CíåÆRﬁeRssi
[
i
];

639  
NULL
;

640 
	}
}

651 
	$g≠CíåÆRﬁe_RssiFªe
–
uöt16
 
c⁄nH™dÀ
 )

653 
uöt8
 
i
;

656  
i
 = 0; i < 
GAPCENTRALROLE_NUM_RSSI_LINKS
; i++ )

658 i‡–
g≠CíåÆRﬁeRssi
[
i
].
c⁄nH™dÀ
 == connHandle )

660 
g≠CíåÆRﬁeRssi
[
i
].
c⁄nH™dÀ
 = 
GAP_CONNHANDLE_ALL
;

664 
	}
}

675 
	$g≠CíåÆRﬁe_timîCB
–
uöt8
 *
pD©a
 )

677 
g≠CíåÆRﬁeRssiEvít_t
 *
pMsg
;

680 ((
g≠CíåÆRﬁeRssi_t
 *Ë
pD©a
)->
timîId
 = 
INVALID_TIMER_ID
;

683 
pMsg
 = (
g≠CíåÆRﬁeRssiEvít_t
 *Ë
	`oßl_msg_Æloˇã
( (gapCentralRoleRssiEvent_t) );

684 i‡–
pMsg
 )

686 
pMsg
->
hdr
.
evít
 = 
GAPCENTRALROLE_RSSI_MSG_EVT
;

687 
pMsg
->
pRssi
 = (
g≠CíåÆRﬁeRssi_t
 *Ë
pD©a
;

689 
	`oßl_msg_£nd
 ( 
g≠CíåÆRﬁeTaskId
, (
uöt8
 *Ë
pMsg
 );

691 
	}
}

	@../../Profiles/Roles/central.h

41 #i‚de‡
CENTRAL_H


42 
	#CENTRAL_H


	)

44 #ifde‡
__˝lu•lus


52 
	~"bcomdef.h
"

53 
	~"OSAL.h
"

54 
	~"g≠.h
"

63 
	#GAPCENTRALROLE_IRK
 0x400

64 
	#GAPCENTRALROLE_SRK
 0x401

65 
	#GAPCENTRALROLE_SIGNCOUNTER
 0x402

66 
	#GAPCENTRALROLE_BD_ADDR
 0x403

67 
	#GAPCENTRALROLE_MAX_SCAN_RES
 0x404

68 

	)

73 #i‚de‡
GAPCENTRALROLE_NUM_RSSI_LINKS


74 
	#GAPCENTRALROLE_NUM_RSSI_LINKS
 4

	)

94 
g≠EvítHdr_t
 
g≠
;

95 
g≠Devi˚InôD⁄eEvít_t
 
öôD⁄e
;

96 
g≠Devi˚InfoEvít_t
 
devi˚Info
;

97 
g≠DevDiscEvít_t
 
discCm∂
;

98 
g≠E°LökReqEvít_t
 
lökCm∂
;

99 
g≠LökUpd©eEvít_t
 
lökUpd©e
;

100 
g≠Tîmö©eLökEvít_t
 
lökTîmö©e
;

101 } 
	tg≠CíåÆRﬁeEvít_t
;

106 (*
p‚G≠CíåÆRﬁeRssiCB_t
)

108 
	tuöt16
 
	tc⁄nH™dÀ
,

109 
	töt8
 
	trssi


115 (*
p‚G≠CíåÆRﬁeEvítCB_t
)

117 
	tg≠CíåÆRﬁeEvít_t
 *
	tpEvít


125 
p‚G≠CíåÆRﬁeRssiCB_t
 
rssiCB
;

126 
p‚G≠CíåÆRﬁeEvítCB_t
 
evítCB
;

127 } 
	tg≠CíåÆRﬁeCB_t
;

156 
bSètus_t
 
GAPCíåÆRﬁe_SèπDevi˚
–
g≠CíåÆRﬁeCB_t
 *
pAµCÆlbacks
 );

170 
bSètus_t
 
GAPCíåÆRﬁe_SëP¨amëî
–
uöt16
 
∑øm
, 
uöt8
 
Àn
, *
pVÆue
 );

181 
bSètus_t
 
GAPCíåÆRﬁe_GëP¨amëî
–
uöt16
 
∑øm
, *
pVÆue
 );

192 
bSètus_t
 
GAPCíåÆRﬁe_Tîmö©eLök
–
uöt16
 
c⁄nH™dÀ
 );

208 
bSètus_t
 
GAPCíåÆRﬁe_E°ablishLök
–
uöt8
 
highDutyCy˛e
, uöt8 
whôeLi°
,

209 
uöt8
 
addrTy≥Pìr
, uöt8 *
≥îAddr
 );

223 
bSètus_t
 
GAPCíåÆRﬁe_Upd©eLök
–
uöt16
 
c⁄nH™dÀ
, uöt16 
c⁄nI¡îvÆMö
,

224 
uöt16
 
c⁄nI¡îvÆMax
, uöt16 
c⁄nL©ícy
,

225 
uöt16
 
c⁄nTimeout
 );

237 
bSètus_t
 
GAPCíåÆRﬁe_SèπDiscovîy
–
uöt8
 
mode
, uöt8 
a˘iveSˇn
, uöt8 
whôeLi°
 );

246 
bSètus_t
 
GAPCíåÆRﬁe_C™˚lDiscovîy
( );

258 
bSètus_t
 
GAPCíåÆRﬁe_SèπRssi
–
uöt16
 
c⁄nH™dÀ
, uöt16 
≥riod
 );

268 
bSètus_t
 
GAPCíåÆRﬁe_C™˚lRssi
(
uöt16
 
c⁄nH™dÀ
 );

287 
GAPCíåÆRﬁe_Inô
–
uöt8
 
èskId
 );

299 
uöt16
 
GAPCíåÆRﬁe_Pro˚ssEvít
–
uöt8
 
èskId
, uöt16 
evíts
 );

304 #ifde‡
__˝lu•lus


	@../../Profiles/Roles/gap.c

40 
	~"bcomdef.h
"

41 
	~"g≠.h
"

42 
	~"sm.h
"

81 
bSètus_t
 
	$GAP_Devi˚Inô
–
uöt8
 
èskID
,

82 
uöt8
 
¥ofûeRﬁe
,

83 
uöt8
 
maxSˇnRe•⁄£s
,

84 
uöt8
 *
pIRK
,

85 
uöt8
 *
pSRK
,

86 
uöt32
 *
pSignCou¡î
 )

88 
bSètus_t
 
°©
 = 
INVALIDPARAMETER
;

91  
¥ofûeRﬁe
 )

93 
GAP_PROFILE_BROADCASTER
:

94 #i‡–
HOST_CONFIG
 & ( 
BROADCASTER_CFG
 | 
PERIPHERAL_CFG
 ) )

96 
°©
 = 
SUCCESS
;

101 
GAP_PROFILE_OBSERVER
:

102 #i‡–
HOST_CONFIG
 & ( 
OBSERVER_CFG
 | 
CENTRAL_CFG
 ) )

104 
°©
 = 
SUCCESS
;

109 
GAP_PROFILE_PERIPHERAL
:

110 #i‡–
HOST_CONFIG
 & 
PERIPHERAL_CFG
 )

112 
°©
 = 
SUCCESS
;

117 
GAP_PROFILE_CENTRAL
:

118 #i‡–
HOST_CONFIG
 & 
CENTRAL_CFG
 )

120 
°©
 = 
SUCCESS
;

125 (
GAP_PROFILE_BROADCASTER
 | 
GAP_PROFILE_OBSERVER
):

126 #i‡––
HOST_CONFIG
 & ( 
BROADCASTER_CFG
 | 
PERIPHERAL_CFG
 ) ) && \

127 –
HOST_CONFIG
 & ( 
OBSERVER_CFG
 | 
CENTRAL_CFG
 ) ) )

129 
°©
 = 
SUCCESS
;

134 (
GAP_PROFILE_PERIPHERAL
 | 
GAP_PROFILE_OBSERVER
):

135 #i‡––
HOST_CONFIG
 & 
PERIPHERAL_CFG
 ) && \

136 –
HOST_CONFIG
 & ( 
OBSERVER_CFG
 | 
CENTRAL_CFG
 ) ) )

138 
°©
 = 
SUCCESS
;

143 (
GAP_PROFILE_CENTRAL
 | 
GAP_PROFILE_BROADCASTER
):

144 #i‡––
HOST_CONFIG
 & 
CENTRAL_CFG
 ) && \

145 –
HOST_CONFIG
 & ( 
BROADCASTER_CFG
 | 
PERIPHERAL_CFG
 ) ) )

147 
°©
 = 
SUCCESS
;

154 
°©
 = 
INVALIDPARAMETER
;

158 i‡–
°©
 =
SUCCESS
 )

161 
°©
 = 
	`GAP_P¨amsInô
–
èskID
, 
¥ofûeRﬁe
 );

162 i‡–
°©
 =
SUCCESS
 )

164 #i‡–
HOST_CONFIG
 & ( 
CENTRAL_CFG
 | 
PERIPHERAL_CFG
 ) )

166 
	`GAP_SecP¨amsInô
–
pIRK
, 
pSRK
, 
pSignCou¡î
 );

170 #i‡–
HOST_CONFIG
 & ( 
CENTRAL_CFG
 | 
OBSERVER_CFG
 ) )

172 i‡–(
¥ofûeRﬁe
 =
GAP_PROFILE_BROADCASTER
) ||

173 (
¥ofûeRﬁe
 =
GAP_PROFILE_PERIPHERAL
) )

175 
maxSˇnRe•⁄£s
 = 0;

179 
VOID
 
	`GAP_CítDevMgrInô
–
maxSˇnRe•⁄£s
 );

181 #i‡–
HOST_CONFIG
 & 
CENTRAL_CFG
 )

184 
	`GAP_CítC⁄nRegi°î
();

187 
VOID
 
	`SM_Inôüt‹Inô
();

193 #i‡–
HOST_CONFIG
 & ( 
PERIPHERAL_CFG
 | 
BROADCASTER_CFG
 ) )

196 
VOID
 
	`GAP_PîiDevMgrInô
();

198 #i‡–
HOST_CONFIG
 & 
PERIPHERAL_CFG
 )

201 
VOID
 
	`SM_Re•⁄dîInô
();

209  ( 
°©
 );

210 
	}
}

	@../../Profiles/Roles/gapbondmgr.c

40 #i‡–
HOST_CONFIG
 & ( 
CENTRAL_CFG
 | 
PERIPHERAL_CFG
 ) )

45 
	~"bcomdef.h
"

46 
	~"OSAL.h
"

47 
	~"oßl_¢v.h
"

48 
	~"g≠.h
"

49 
	~"lökdb.h
"

50 
	~"g©t.h
"

51 
	~"g©t_uuid.h
"

52 
	~"hci.h
"

53 
	~"g©t£rv≠p.h
"

54 
	~"g≠g©t£rvî.h
"

55 
	~"g≠b⁄dmgr.h
"

65 
	#GAP_BOND_SYNC_CC_EVT
 0x0001

66 
	#GAP_BOND_SAVE_REC_EVT
 0x0002

67 

	)

69 
	#NV_COMPACT_THRESHOLD
 80

	)

72 
	#GAP_BONDED_STATE_AUTHENTICATED
 0x0001

	)

73 
	#GAP_BONDED_STATE_SERVICE_CHANGED
 0x0002

	)

99 
	#GAP_BOND_REC_ID_OFFSET
 0

100 
	#GAP_BOND_LOCAL_LTK_OFFSET
 1

101 
	#GAP_BOND_DEV_LTK_OFFSET
 2

102 
	#GAP_BOND_DEV_IRK_OFFSET
 3

103 
	#GAP_BOND_DEV_CSRK_OFFSET
 4

104 
	#GAP_BOND_DEV_SIGN_COUNTER_OFFSET
 5

105 

	)

106 
	#GAP_BOND_REC_IDS
 6

	)

109 
	#ˇlcNvID
(
Idx
, 
off£t
Ë(((((IdxË* 
GAP_BOND_REC_IDS
Ë+ (off£t))Ë+ 
BLE_NVID_GAP_BOND_START
)

	)

110 
	#maöRec‹dNvID
(
b⁄dIdx
Ë(
	`ˇlcNvID
((b⁄dIdx), 
GAP_BOND_REC_ID_OFFSET
))

	)

111 
	#loˇlLTKNvID
(
b⁄dIdx
Ë(
	`ˇlcNvID
((b⁄dIdx), 
GAP_BOND_LOCAL_LTK_OFFSET
))

	)

112 
	#devLTKNvID
(
b⁄dIdx
Ë(
	`ˇlcNvID
((b⁄dIdx), 
GAP_BOND_DEV_LTK_OFFSET
))

	)

113 
	#devIRKNvID
(
b⁄dIdx
Ë(
	`ˇlcNvID
((b⁄dIdx), 
GAP_BOND_DEV_IRK_OFFSET
))

	)

114 
	#devCSRKNvID
(
b⁄dIdx
Ë(
	`ˇlcNvID
((b⁄dIdx), 
GAP_BOND_DEV_CSRK_OFFSET
))

	)

115 
	#devSignCou¡îNvID
(
b⁄dIdx
Ë(
	`ˇlcNvID
((b⁄dIdx), 
GAP_BOND_DEV_SIGN_COUNTER_OFFSET
))

	)

118 
	#g©tCfgNvID
(
Idx
Ë((IdxË+ 
BLE_NVID_GATT_CFG_START
)

	)

121 
	#MIN_ENC_KEYSIZE
 7

122 
	#MAX_ENC_KEYSIZE
 16

123 

	)

131 
uöt8
 
	mLTK
[
KEYLEN
];

132 
uöt16
 
	mdiv
;

133 
uöt8
 
	mønd
[
B_RANDOM_NUM_SIZE
];

134 
uöt8
 
	mkeySize
;

135 } 
	tg≠B⁄dLTK_t
;

140 
uöt8
 
	mpublicAddr
[
B_ADDR_LEN
];

141 
uöt8
 
	mªc⁄√˘Addr
[
B_ADDR_LEN
];

142 
uöt16
 
	m°©eFœgs
;

143 } 
	tg≠B⁄dRec_t
;

148 
uöt16
 
	m©åH™dÀ
;

149 
uöt8
 
	mvÆue
;

150 } 
	tg≠B⁄dCh¨Cfg_t
;

167 
uöt8
 
	gg≠B⁄dMgr_TaskID
;

170 
uöt8
 
	gg≠B⁄d_PaúögMode
 = 
GAPBOND_PAIRING_MODE_WAIT_FOR_REQ
;

171 
uöt16
 
	gg≠B⁄d_InôüãWaô
 = 1000;

172 
uöt8
 
	gg≠B⁄d_MITM
 = 
FALSE
;

173 
uöt8
 
	gg≠B⁄d_IOC≠
 = 
GAPBOND_IO_CAP_DISPLAY_ONLY
;

174 
uöt8
 
	gg≠B⁄d_OOBD©aFœg
 = 
FALSE
;

175 
uöt8
 
	gg≠B⁄d_OOBD©a
[
KEYLEN
] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

176 
uöt8
 
	gg≠B⁄d_B⁄dög
 = 
FALSE
;

177 
uöt8
 
	gg≠B⁄d_AutoFaû
 = 
FALSE
;

178 
uöt8
 
	gg≠B⁄d_AutoFaûRós⁄
 = 
SMP_PAIRING_FAILED_NOT_SUPPORTED
;

179 
uöt8
 
	gg≠B⁄d_KeyDi°Li°
 =

181 
GAPBOND_KEYDIST_SENCKEY


182 | 
GAPBOND_KEYDIST_SIDKEY


183 | 
GAPBOND_KEYDIST_SSIGN


184 | 
GAPBOND_KEYDIST_MENCKEY


185 | 
GAPBOND_KEYDIST_MIDKEY


186 | 
GAPBOND_KEYDIST_MSIGN


188 
uöt32
 
	gg≠B⁄d_Passcode
 = 0;

189 
uöt8
 
	gg≠B⁄d_KeySize
 = 
MAX_ENC_KEYSIZE
;

191 #i‡–
HOST_CONFIG
 & 
CENTRAL_CFG
 )

192 
uöt8
 
	gg≠B⁄d_B⁄dFaûO±i⁄
 = 
GAPBOND_FAIL_TERMINATE_LINK
;

195 c⁄° 
g≠B⁄dCBs_t
 *
	gpG≠B⁄dCB
 = 
NULL
;

198 
g≠B⁄dRec_t
 
	gb⁄ds
[
GAP_BONDINGS_MAX
] = {0};

200 
uöt8
 
	gautoSyncWhôeLi°
 = 
FALSE
;

202 
uöt8
 
	gîa£AŒB⁄ds
 = 
FALSE
;

204 
uöt8
 
	gb⁄dsToDñëe
[
GAP_BONDINGS_MAX
] = {
FALSE
};

207 
uöt8
 
	gb⁄dIdx
 = 
GAP_BONDINGS_MAX
;

208 
g≠AuthCom∂ëeEvít_t
 *
	gpAuthEvt
 = 
NULL
;

213 
uöt8
 
g≠B⁄dMgrCh™geSèã
–uöt8 
idx
, 
uöt16
 
°©e
, uöt8 
£t
 );

214 
uöt8
 
g≠B⁄dMgrUpd©eCh¨Cfg
–uöt8 
idx
, 
uöt16
 
©åH™dÀ
, uöt16 
vÆue
 );

215 
g≠B⁄dCh¨Cfg_t
 *
g≠B⁄dMgrFödCh¨CfgIãm
–
uöt16
 
©åH™dÀ
,

216 
g≠B⁄dCh¨Cfg_t
 *
ch¨CfgTbl
 );

217 
g≠B⁄dMgrInvîtCh¨CfgIãm
–
g≠B⁄dCh¨Cfg_t
 *
ch¨CfgTbl
 );

218 
uöt8
 
g≠B⁄dMgrAddB⁄d
–
g≠B⁄dRec_t
 *
pB⁄dRec
, 
g≠AuthCom∂ëeEvít_t
 *
pPkt
 );

219 
uöt8
 
g≠B⁄dMgrGëSèãFœgs
–uöt8 
idx
 );

220 
bSètus_t
 
g≠B⁄dMgrGëPublicAddr
–
uöt8
 
idx
, uöt8 *
pAddr
 );

221 
uöt8
 
g≠B⁄dMgrFödRec⁄√˘Addr
–uöt8 *
pRec⁄√˘Addr
 );

222 
uöt8
 
g≠B⁄dMgrFödAddr
–uöt8 *
pDevAddr
 );

223 
uöt8
 
g≠B⁄dMgrResﬁvePriv©eAddr
–uöt8 *
pAddr
 );

224 
g≠B⁄dMgrRódB⁄ds
( );

225 
uöt8
 
g≠B⁄dMgrFödEm±y
( );

226 
uöt8
 
g≠B⁄dMgrB⁄dTŸÆ
( );

227 
bSètus_t
 
g≠B⁄dMgrEø£AŒB⁄dögs
( );

228 
bSètus_t
 
g≠B⁄dMgrEø£B⁄dög
–
uöt8
 
idx
 );

229 
uöt8
 
g≠B⁄dMgr_Pro˚ssOSALMsg
–
oßl_evít_hdr_t
 *
pMsg
 );

230 
g≠B⁄dMgrSídSîvi˚Ch™ge
–
lökDBIãm_t
 *
pLökIãm
 );

231 
g≠B⁄dMgr_Pro˚ssGATTMsg
–
g©tMsgEvít_t
 *
pMsg
 );

232 
g≠B⁄dMgr_Pro˚ssGATTSîvMsg
–
g©tEvítHdr_t
 *
pMsg
 );

233 
g≠B⁄dSëupPrivFœg
( );

234 
g≠B⁄dMgrB⁄dReq
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
idx
, uöt8 
°©eFœgs
,

235 
uöt8
 
rﬁe
, uöt8 
°¨tEn¸y±i⁄
 );

236 
g≠B⁄dMgrAuthítiˇã
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
addrTy≥
,

237 
g≠PaúögReq_t
 *
pPaúReq
 );

238 
g≠B⁄dMgr_SyncWhôeLi°
( );

239 
uöt8
 
g≠B⁄dMgr_SyncCh¨Cfg
–
uöt16
 
c⁄nH™dÀ
 );

240 
g≠B⁄dFªeAuthEvt
( );

242 #i‡–
HOST_CONFIG
 & 
PERIPHERAL_CFG
 )

243 
g≠B⁄dMgrSœveSecurôyReq
–
uöt16
 
c⁄nH™dÀ
 );

259 
bSètus_t
 
	$GAPB⁄dMgr_SëP¨amëî
–
uöt16
 
∑øm
, 
uöt8
 
Àn
, *
pVÆue
 )

261 
bSètus_t
 
ªt
 = 
SUCCESS
;

263  
∑øm
 )

265 
GAPBOND_PAIRING_MODE
:

266 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
GAPBOND_PAIRING_MODE_INITIATE
) )

268 
g≠B⁄d_PaúögMode
 = *((
uöt8
*)
pVÆue
);

272 
ªt
 = 
bÀInvÆidR™ge
;

276 
GAPBOND_INITIATE_WAIT
:

277 i‡–
Àn
 = ( 
uöt16
 ) )

279 
g≠B⁄d_InôüãWaô
 = *((
uöt16
*)
pVÆue
);

283 
ªt
 = 
bÀInvÆidR™ge
;

287 
GAPBOND_MITM_PROTECTION
:

288 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
TRUE
) )

290 
g≠B⁄d_MITM
 = *((
uöt8
*)
pVÆue
);

294 
ªt
 = 
bÀInvÆidR™ge
;

298 
GAPBOND_IO_CAPABILITIES
:

299 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
GAPBOND_IO_CAP_KEYBOARD_DISPLAY
) )

301 
g≠B⁄d_IOC≠
 = *((
uöt8
*)
pVÆue
);

305 
ªt
 = 
bÀInvÆidR™ge
;

309 
GAPBOND_OOB_ENABLED
:

310 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
TRUE
) )

312 
g≠B⁄d_OOBD©aFœg
 = *((
uöt8
*)
pVÆue
);

316 
ªt
 = 
bÀInvÆidR™ge
;

320 
GAPBOND_OOB_DATA
:

321 i‡–
Àn
 =
KEYLEN
 )

323 
VOID
 
	`oßl_mem˝y
–
g≠B⁄d_OOBD©a
, 
pVÆue
, 
KEYLEN
 ) ;

327 
ªt
 = 
bÀInvÆidR™ge
;

331 
GAPBOND_BONDING_ENABLED
:

332 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
TRUE
) )

334 
g≠B⁄d_B⁄dög
 = *((
uöt8
*)
pVÆue
);

338 
ªt
 = 
bÀInvÆidR™ge
;

342 
GAPBOND_KEY_DIST_LIST
:

343 i‡–
Àn
 = ( 
uöt8
 ) )

345 
g≠B⁄d_KeyDi°Li°
 = *((
uöt8
*)
pVÆue
);

349 
ªt
 = 
bÀInvÆidR™ge
;

353 
GAPBOND_DEFAULT_PASSCODE
:

354 i‡–(
Àn
 = ( 
uöt32
 ))

355 && (*((
uöt32
*)
pVÆue
Ë<
GAP_PASSCODE_MAX
) )

357 
g≠B⁄d_Passcode
 = *((
uöt32
*)
pVÆue
);

361 
ªt
 = 
bÀInvÆidR™ge
;

365 
GAPBOND_ERASE_ALLBONDS
:

366 i‡–
Àn
 == 0 )

369 i‡–
	`GAP_NumA˘iveC⁄√˘i⁄s
() == 0 )

372 
VOID
 
	`g≠B⁄dMgrEø£AŒB⁄dögs
();

375 
VOID
 
	`oßl_¢v_com∑˘
–
NV_COMPACT_THRESHOLD
 );

378 
	`g≠B⁄dMgrRódB⁄ds
();

382 
îa£AŒB⁄ds
 = 
TRUE
;

387 
ªt
 = 
bÀInvÆidR™ge
;

391 
GAPBOND_ERASE_SINGLEBOND
:

392 i‡–
Àn
 =(1 + 
B_ADDR_LEN
) )

394 
uöt8
 
idx
;

395 
uöt8
 
devAddr
[
B_ADDR_LEN
];

398 
VOID
 
	`oßl_ªvmem˝y
–
devAddr
, (
uöt8
 *)
pVÆue
+1, 
B_ADDR_LEN
 );

401 
idx
 = 
	`GAPB⁄dMgr_ResﬁveAddr
–*((
uöt8
 *)
pVÆue
), 
devAddr
, 
NULL
 );

402 i‡–
idx
 < 
GAP_BONDINGS_MAX
 )

405 i‡–
	`GAP_NumA˘iveC⁄√˘i⁄s
() == 0 )

408 
VOID
 
	`g≠B⁄dMgrEø£B⁄dög
–
idx
 );

411 
VOID
 
	`oßl_¢v_com∑˘
–
NV_COMPACT_THRESHOLD
 );

414 
	`g≠B⁄dMgrRódB⁄ds
();

419 
b⁄dsToDñëe
[
idx
] = 
TRUE
;

424 
ªt
 = 
INVALIDPARAMETER
;

430 
ªt
 = 
bÀInvÆidR™ge
;

434 
GAPBOND_AUTO_FAIL_PAIRING
:

435 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
TRUE
) )

437 
g≠B⁄d_AutoFaû
 = *((
uöt8
*)
pVÆue
);

441 
ªt
 = 
bÀInvÆidR™ge
;

445 
GAPBOND_AUTO_FAIL_REASON
:

446 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
SMP_PAIRING_FAILED_REPEATED_ATTEMPTS
) )

448 
g≠B⁄d_AutoFaûRós⁄
 = *((
uöt8
*)
pVÆue
);

452 
ªt
 = 
bÀInvÆidR™ge
;

456 
GAPBOND_KEYSIZE
:

457 i‡–(
Àn
 = ( 
uöt8
 ))

458 && ((*((
uöt8
*)
pVÆue
Ë>
MIN_ENC_KEYSIZE
Ë&& (*((uöt8*ÌVÆueË<
MAX_ENC_KEYSIZE
)) )

460 
g≠B⁄d_KeySize
 = *((
uöt8
*)
pVÆue
);

464 
ªt
 = 
bÀInvÆidR™ge
;

468 
GAPBOND_AUTO_SYNC_WL
:

469 i‡–
Àn
 =–
uöt8
 ) )

471 
uöt8
 
ﬁdVÆ
 = 
autoSyncWhôeLi°
;

473 
autoSyncWhôeLi°
 = *((
uöt8
 *)
pVÆue
);

476 i‡––
ﬁdVÆ
 =
FALSE
 ) && ( 
autoSyncWhôeLi°
 =
TRUE
 ) )

479 
	`g≠B⁄dMgrRódB⁄ds
();

484 
ªt
 = 
bÀInvÆidR™ge
;

488 #i‡–
HOST_CONFIG
 & 
CENTRAL_CFG
 )

489 
GAPBOND_BOND_FAIL_ACTION
:

490 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
GAPBOND_FAIL_TERMINATE_ERASE_BONDS
) )

492 
g≠B⁄d_B⁄dFaûO±i⁄
 = *((
uöt8
*)
pVÆue
);

496 
ªt
 = 
bÀInvÆidR™ge
;

503 i‡–(
∑øm
 < 
TGAP_PARAMID_MAX
Ë&& (
Àn
 = ( 
uöt16
 )) )

505 
ªt
 = 
	`GAP_SëP¨amVÆue
–
∑øm
, *((
uöt16
*)
pVÆue
) );

509 
ªt
 = 
INVALIDPARAMETER
;

514  ( 
ªt
 );

515 
	}
}

522 
bSètus_t
 
	$GAPB⁄dMgr_GëP¨amëî
–
uöt16
 
∑øm
, *
pVÆue
 )

524 
bSètus_t
 
ªt
 = 
SUCCESS
;

526  
∑øm
 )

528 
GAPBOND_PAIRING_MODE
:

529 *((
uöt8
*)
pVÆue
Ë
g≠B⁄d_PaúögMode
;

532 
GAPBOND_INITIATE_WAIT
:

533 *((
uöt16
*)
pVÆue
Ë
g≠B⁄d_InôüãWaô
;

536 
GAPBOND_MITM_PROTECTION
:

537 *((
uöt8
*)
pVÆue
Ë
g≠B⁄d_MITM
;

540 
GAPBOND_IO_CAPABILITIES
:

541 *((
uöt8
*)
pVÆue
Ë
g≠B⁄d_IOC≠
;

544 
GAPBOND_OOB_ENABLED
:

545 *((
uöt8
*)
pVÆue
Ë
g≠B⁄d_OOBD©aFœg
;

548 
GAPBOND_OOB_DATA
:

549 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠B⁄d_OOBD©a
, 
KEYLEN
 ) ;

552 
GAPBOND_BONDING_ENABLED
:

553 *((
uöt8
*)
pVÆue
Ë
g≠B⁄d_B⁄dög
;

556 
GAPBOND_KEY_DIST_LIST
:

557 *((
uöt8
*)
pVÆue
Ë
g≠B⁄d_KeyDi°Li°
;

560 
GAPBOND_DEFAULT_PASSCODE
:

561 *((
uöt32
*)
pVÆue
Ë
g≠B⁄d_Passcode
;

564 
GAPBOND_AUTO_FAIL_PAIRING
:

565 *((
uöt8
*)
pVÆue
Ë
g≠B⁄d_AutoFaû
;

568 
GAPBOND_AUTO_FAIL_REASON
:

569 *((
uöt8
*)
pVÆue
Ë
g≠B⁄d_AutoFaûRós⁄
;

572 
GAPBOND_KEYSIZE
:

573 *((
uöt8
*)
pVÆue
Ë
g≠B⁄d_KeySize
;

576 
GAPBOND_AUTO_SYNC_WL
:

577 *((
uöt8
*)
pVÆue
Ë
autoSyncWhôeLi°
;

580 
GAPBOND_BOND_COUNT
:

581 *((
uöt8
*)
pVÆue
Ë
	`g≠B⁄dMgrB⁄dTŸÆ
();

586 i‡–
∑øm
 < 
TGAP_PARAMID_MAX
 )

588 *((
uöt16
*)
pVÆue
Ë
	`GAP_GëP¨amVÆue
–
∑øm
 );

592 
ªt
 = 
INVALIDPARAMETER
;

597  ( 
ªt
 );

598 
	}
}

605 
bSètus_t
 
	$GAPB⁄dMgr_LökE°
–
uöt8
 
addrTy≥
, uöt8 *
pDevAddr
, 
uöt16
 
c⁄nH™dÀ
, uöt8 
rﬁe
 )

607 
uöt8
 
idx
;

608 
uöt8
 
publicAddr
[
B_ADDR_LEN
]

611 
idx
 = 
	`GAPB⁄dMgr_ResﬁveAddr
–
addrTy≥
, 
pDevAddr
, 
publicAddr
 );

612 i‡–
idx
 < 
GAP_BONDINGS_MAX
 )

614 
uöt8
 
°©eFœgs
 = 
	`g≠B⁄dMgrGëSèãFœgs
–
idx
 );

615 
smSignögInfo_t
 
signögInfo
;

616 
g≠B⁄dCh¨Cfg_t
 
ch¨Cfg
[
GAP_CHAR_CFG_MAX
];

620 
	`g≠B⁄dMgrB⁄dReq
–
c⁄nH™dÀ
, 
idx
, 
°©eFœgs
, 
rﬁe
,

621 ((
g≠B⁄d_PaúögMode
 =
GAPBOND_PAIRING_MODE_INITIATE
 ) ? 
TRUE
 : 
FALSE
) );

624 
VOID
 
	`oßl_mem£t
–&
signögInfo
, 0,  ( 
smSignögInfo_t
 ) );

625 i‡–
	`oßl_¢v_ªad
–
	`devCSRKNvID
(
idx
), 
KEYLEN
, 
signögInfo
.
§k
 ) =
SUCCESS
 )

627 i‡–
	`oßl_isbuf£t
–
signögInfo
.
§k
, 0xFF, 
KEYLEN
 ) =
FALSE
 )

630 
VOID
 
	`oßl_¢v_ªad
–
	`devSignCou¡îNvID
(
idx
),  ( 
uöt32
 ), &(
signögInfo
.
signCou¡î
) );

631 
VOID
 
	`GAP_Sig«bÀ
–
c⁄nH™dÀ
,

632 ((
°©eFœgs
 & 
GAP_BONDED_STATE_AUTHENTICATED
Ë? 
TRUE
 : 
FALSE
),

633 &
signögInfo
 );

638 i‡–
	`oßl_¢v_ªad
–
	`g©tCfgNvID
(
idx
),  ( 
ch¨Cfg
 ), ch¨Cfg ) =
SUCCESS
 )

640 
	`g≠B⁄dMgrInvîtCh¨CfgIãm
–
ch¨Cfg
 );

642  
uöt8
 
i
 = 0; i < 
GAP_CHAR_CFG_MAX
; i++ )

644 
g≠B⁄dCh¨Cfg_t
 *
pIãm
 = &(
ch¨Cfg
[
i
]);

647 i‡–
pIãm
->
©åH™dÀ
 !
GATT_INVALID_HANDLE
 )

649 
VOID
 
	`GATTSîvAµ_Upd©eCh¨Cfg
–
c⁄nH™dÀ
, 
pIãm
->
©åH™dÀ
,

650 (
uöt16
)(
pIãm
->
vÆue
) );

656 i‡–
°©eFœgs
 & 
GAP_BONDED_STATE_SERVICE_CHANGED
 )

658 
VOID
 
	`GATTSîvAµ_SídSîvi˚Ch™gedInd
–
c⁄nH™dÀ
, 
g≠B⁄dMgr_TaskID
 );

661 #i‡–
HOST_CONFIG
 & 
CENTRAL_CFG
 )

662 i‡–
rﬁe
 =
GAP_PROFILE_CENTRAL
 &&

663 
g≠B⁄d_PaúögMode
 =
GAPBOND_PAIRING_MODE_INITIATE
 )

666 
	`g≠B⁄dMgrAuthítiˇã
–
c⁄nH™dÀ
, 
addrTy≥
, 
NULL
 );

669 i‡–
pG≠B⁄dCB
 &&ÖG≠B⁄dCB->
∑úSèãCB
 )

671 
pG≠B⁄dCB
->
	`∑úSèãCB
–
c⁄nH™dÀ
, 
GAPBOND_PAIRING_STATE_STARTED
, 
SUCCESS
 );

676 #i‡–
HOST_CONFIG
 & 
PERIPHERAL_CFG
 )

679 i‡–
rﬁe
 =
GAP_PROFILE_PERIPHERAL
 &&

680 
g≠B⁄d_PaúögMode
 =
GAPBOND_PAIRING_MODE_INITIATE
 )

682 
	`g≠B⁄dMgrSœveSecurôyReq
–
c⁄nH™dÀ
 );

686  ( 
SUCCESS
 );

687 
	}
}

694 
uöt8
 
	$GAPB⁄dMgr_ResﬁveAddr
–
uöt8
 
addrTy≥
, uöt8 *
pDevAddr
, uöt8 *
pResﬁvedAddr
 )

696 
uöt8
 
idx
 = 
GAP_BONDINGS_MAX
;

698  
addrTy≥
 )

700 
ADDRTYPE_PUBLIC
:

701 
ADDRTYPE_STATIC
:

702 
idx
 = 
	`g≠B⁄dMgrFödAddr
–
pDevAddr
 );

703 i‡–(
idx
 < 
GAP_BONDINGS_MAX
Ë&& (
pResﬁvedAddr
) )

705 
VOID
 
	`oßl_mem˝y
–
pResﬁvedAddr
, 
pDevAddr
, 
B_ADDR_LEN
 );

709 
ADDRTYPE_PRIVATE_NONRESOLVE
:

711 
idx
 = 
	`g≠B⁄dMgrFödRec⁄√˘Addr
–
pDevAddr
 );

712 i‡–(
idx
 < 
GAP_BONDINGS_MAX
Ë&& (
pResﬁvedAddr
) )

714 
VOID
 
	`g≠B⁄dMgrGëPublicAddr
–
idx
, 
pResﬁvedAddr
 );

718 
ADDRTYPE_PRIVATE_RESOLVE
:

720 
idx
 = 
	`g≠B⁄dMgrResﬁvePriv©eAddr
–
pDevAddr
 );

721 i‡–(
idx
 < 
GAP_BONDINGS_MAX
Ë&& (
pResﬁvedAddr
) )

723 
VOID
 
	`g≠B⁄dMgrGëPublicAddr
–
idx
, 
pResﬁvedAddr
 );

731  ( 
idx
 );

732 
	}
}

739 
bSètus_t
 
	$GAPB⁄dMgr_Sîvi˚Ch™geInd
–
uöt16
 
c⁄√˘i⁄H™dÀ
, 
uöt8
 
£tP¨am
 )

741 
bSètus_t
 
ªt
 = 
bÀNoResour˚s
;

743 i‡–
c⁄√˘i⁄H™dÀ
 == 0xFFFF )

745 
uöt8
 
idx
;

748  
idx
 = 0; idx < 
GAP_BONDINGS_MAX
; idx++ )

750 i‡–
	`g≠B⁄dMgrCh™geSèã
–
idx
, 
GAP_BONDED_STATE_SERVICE_CHANGED
, 
£tP¨am
 ) )

752 
ªt
 = 
SUCCESS
;

757 i‡–
£tP¨am
 )

760 
	`lökDB_Pîf‹mFunc
–
g≠B⁄dMgrSídSîvi˚Ch™ge
 );

766 
lökDBIãm_t
 *
pLökIãm
 = 
	`lökDB_Föd
–
c⁄√˘i⁄H™dÀ
 );

767 i‡–
pLökIãm
 )

769 
uöt8
 
idx
;

770 
idx
 = 
	`GAPB⁄dMgr_ResﬁveAddr
–
pLökIãm
->
addrTy≥
,ÖLökIãm->
addr
, 
NULL
 );

771 i‡–
idx
 < 
GAP_BONDINGS_MAX
 )

774 
VOID
 
	`g≠B⁄dMgrCh™geSèã
–
idx
, 
GAP_BONDED_STATE_SERVICE_CHANGED
, 
£tP¨am
 );

775 
ªt
 = 
SUCCESS
;

779 i‡–
£tP¨am
 )

781 
	`g≠B⁄dMgrSídSîvi˚Ch™ge
–
pLökIãm
 );

786 
ªt
 = 
bÀNŸC⁄√˘ed
;

790  ( 
ªt
 );

791 
	}
}

798 
bSètus_t
 
	$GAPB⁄dMgr_Upd©eCh¨Cfg
–
uöt16
 
c⁄√˘i⁄H™dÀ
, uöt16 
©åH™dÀ
, uöt16 
vÆue
 )

800 
bSètus_t
 
ªt
 = 
bÀNoResour˚s
;

802 i‡–
c⁄√˘i⁄H™dÀ
 =
INVALID_CONNHANDLE
 )

804 
uöt8
 
idx
;

807  
idx
 = 0; idx < 
GAP_BONDINGS_MAX
; idx++ )

809 i‡–
	`g≠B⁄dMgrUpd©eCh¨Cfg
–
idx
, 
©åH™dÀ
, 
vÆue
 ) )

811 
ªt
 = 
SUCCESS
;

818 
lökDBIãm_t
 *
pLökIãm
 = 
	`lökDB_Föd
–
c⁄√˘i⁄H™dÀ
 );

819 i‡–
pLökIãm
 )

821 
uöt8
 
idx
 = 
	`GAPB⁄dMgr_ResﬁveAddr
–
pLökIãm
->
addrTy≥
,ÖLökIãm->
addr
, 
NULL
 );

822 i‡–
idx
 < 
GAP_BONDINGS_MAX
 )

825 
VOID
 
	`g≠B⁄dMgrUpd©eCh¨Cfg
–
idx
, 
©åH™dÀ
, 
vÆue
 );

826 
ªt
 = 
SUCCESS
;

831 
ªt
 = 
bÀNŸC⁄√˘ed
;

835  ( 
ªt
 );

836 
	}
}

843 
	$GAPB⁄dMgr_Regi°î
–
g≠B⁄dCBs_t
 *
pCB
 )

845 
pG≠B⁄dCB
 = 
pCB
;

848 
VOID
 
	`GAP_SëP¨amVÆue
–
TGAP_AUTH_TASK_ID
, 
g≠B⁄dMgr_TaskID
 );

851 
	`GATTSîvAµ_Regi°îF‹Msg
–
g≠B⁄dMgr_TaskID
 );

852 
	}
}

859 
bSètus_t
 
	$GAPB⁄dMgr_PasscodeR•
–
uöt16
 
c⁄√˘i⁄H™dÀ
, 
uöt8
 
°©us
, 
uöt32
 
∑sscode
 )

861 
bSètus_t
 
ªt
 = 
SUCCESS
;

863 i‡–
°©us
 =
SUCCESS
 )

866 
∑sscode
 =Öasscodê% (
GAP_PASSCODE_MAX
 + 1);

868 
ªt
 = 
	`GAP_PasscodeUpd©e
–
∑sscode
, 
c⁄√˘i⁄H™dÀ
 );

869 i‡–
ªt
 !
SUCCESS
 )

871 
VOID
 
	`GAP_Tîmö©eAuth
–
c⁄√˘i⁄H™dÀ
, 
SMP_PAIRING_FAILED_PASSKEY_ENTRY_FAILED
 );

876 
VOID
 
	`GAP_Tîmö©eAuth
–
c⁄√˘i⁄H™dÀ
, 
°©us
 );

879  
ªt
;

880 
	}
}

888 
uöt8
 
	$GAPB⁄dMgr_Pro˚ssGAPMsg
–
g≠EvítHdr_t
 *
pMsg
 )

890  
pMsg
->
›code
 )

892 
GAP_PASSKEY_NEEDED_EVENT
:

894 
g≠PasskeyNìdedEvít_t
 *
pPkt
 = (g≠PasskeyNìdedEvít_à*)
pMsg
;

896 i‡–
pG≠B⁄dCB
 &&ÖG≠B⁄dCB->
∑sscodeCB
 )

899 
pG≠B⁄dCB
->
	`∑sscodeCB
–
pPkt
->
devi˚Addr
,ÖPkt->
c⁄√˘i⁄H™dÀ
,ÖPkt->
uiI≈uts
,ÖPkt->
uiOuçuts
 );

904 i‡–
	`GAP_PasscodeUpd©e
–
g≠B⁄d_Passcode
, 
pPkt
->
c⁄√˘i⁄H™dÀ
 ) !
SUCCESS
 )

906 
VOID
 
	`GAP_Tîmö©eAuth
–
pPkt
->
c⁄√˘i⁄H™dÀ
, 
SMP_PAIRING_FAILED_PASSKEY_ENTRY_FAILED
 );

912 
GAP_AUTHENTICATION_COMPLETE_EVENT
:

914 
g≠AuthCom∂ëeEvít_t
 *
pPkt
 = (g≠AuthCom∂ëeEvít_à*)
pMsg
;

917 i‡–(
pPkt
->
hdr
.
°©us
 =
SUCCESS
) &&

918 (
pPkt
->
authSèã
 & 
SM_AUTH_STATE_BONDING
) &&

919 (
pAuthEvt
 =
NULL
) )

921 
g≠B⁄dRec_t
 
b⁄dRec
;

923 
VOID
 
	`oßl_mem£t
–&
b⁄dRec
, 0,  ( 
g≠B⁄dRec_t
 ) ) ;

926 i‡–
pPkt
->
pIdítôyInfo
 )

928 
VOID
 
	`oßl_mem˝y
–
b⁄dRec
.
publicAddr
, 
pPkt
->
pIdítôyInfo
->
bd_addr
, 
B_ADDR_LEN
 );

932 
lökDBIãm_t
 *
pLökIãm
 = 
	`lökDB_Föd
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

933 i‡–
pLökIãm
 )

935 
VOID
 
	`oßl_mem˝y
–
b⁄dRec
.
publicAddr
, 
pLökIãm
->
addr
, 
B_ADDR_LEN
 );

945 
b⁄dRec
.
°©eFœgs
 |(
pPkt
->
authSèã
 & 
SM_AUTH_STATE_AUTHENTICATED
Ë? 
GAP_BONDED_STATE_AUTHENTICATED
 : 0;

947 i‡–!
	`g≠B⁄dMgrAddB⁄d
–&
b⁄dRec
, 
pPkt
 ) )

950 
	`oßl_£t_evít
–
g≠B⁄dMgr_TaskID
, 
GAP_BOND_SAVE_REC_EVT
 );

953  ( 
FALSE
 );

958 i‡–
pG≠B⁄dCB
 &&ÖG≠B⁄dCB->
∑úSèãCB
 )

960 
pG≠B⁄dCB
->
	`∑úSèãCB
–
pPkt
->
c⁄√˘i⁄H™dÀ
, 
GAPBOND_PAIRING_STATE_COMPLETE
,ÖPkt->
hdr
.
°©us
 );

965 
GAP_BOND_COMPLETE_EVENT
:

970 
g≠B⁄dCom∂ëeEvít_t
 *
pPkt
 = (g≠B⁄dCom∂ëeEvít_à*)
pMsg
;

972 #i‡–
HOST_CONFIG
 & 
CENTRAL_CFG
 )

973 i‡–
pPkt
->
hdr
.
°©us
 =
LL_ENC_KEY_REQ_REJECTED
 )

977 
lökDBIãm_t
 *
pLökIãm
 = 
	`lökDB_Föd
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

978 i‡–
pLökIãm
 )

980  
g≠B⁄d_B⁄dFaûO±i⁄
 )

982 
GAPBOND_FAIL_INITIATE_PAIRING
:

984 
	`g≠B⁄dMgrAuthítiˇã
–
pPkt
->
c⁄√˘i⁄H™dÀ
, 
pLökIãm
->
addrTy≥
, 
NULL
 );

987 
GAPBOND_FAIL_TERMINATE_LINK
:

989 
	`GAP_Tîmö©eLökReq
–
pLökIãm
->
èskID
, 
pPkt
->
c⁄√˘i⁄H™dÀ
, 
HCI_DISCONNECT_AUTH_FAILURE
 );

992 
GAPBOND_FAIL_TERMINATE_ERASE_BONDS
:

994 
VOID
 
	`GAPB⁄dMgr_SëP¨amëî
–
GAPBOND_ERASE_ALLBONDS
, 0, 
NULL
 );

997 
	`GAP_Tîmö©eLökReq
–
pLökIãm
->
èskID
, 
pPkt
->
c⁄√˘i⁄H™dÀ
, 
HCI_DISCONNECT_AUTH_FAILURE
 );

1000 
GAPBOND_FAIL_NO_ACTION
:

1009 i‡–
pG≠B⁄dCB
 &&ÖG≠B⁄dCB->
∑úSèãCB
 )

1011 
pG≠B⁄dCB
->
	`∑úSèãCB
–
pPkt
->
c⁄√˘i⁄H™dÀ
, 
GAPBOND_PAIRING_STATE_BONDED
, 
pMsg
->
hdr
.
°©us
 );

1016 
GAP_SIGNATURE_UPDATED_EVENT
:

1018 
uöt8
 
idx
;

1019 
g≠SignUpd©eEvít_t
 *
pPkt
 = (g≠SignUpd©eEvít_à*)
pMsg
;

1021 
idx
 = 
	`GAPB⁄dMgr_ResﬁveAddr
–
pPkt
->
addrTy≥
,ÖPkt->
devAddr
, 
NULL
 );

1022 i‡–
idx
 < 
GAP_BONDINGS_MAX
 )

1025 
VOID
 
	`oßl_¢v_wrôe
–
	`devSignCou¡îNvID
(
idx
),  ( 
uöt32
 ), &(
pPkt
->
signCou¡î
) );

1030 #i‡–
HOST_CONFIG
 & 
PERIPHERAL_CFG
 )

1031 
GAP_PAIRING_REQ_EVENT
:

1033 
g≠PaúögReqEvít_t
 *
pPkt
 = (g≠PaúögReqEvít_à*)
pMsg
;

1035 i‡–
g≠B⁄d_AutoFaû
 !
FALSE
 )

1038 
VOID
 
	`GAP_Tîmö©eAuth
–
pPkt
->
c⁄√˘i⁄H™dÀ
, 
g≠B⁄d_AutoFaûRós⁄
 );

1040 i‡–
g≠B⁄d_PaúögMode
 =
GAPBOND_PAIRING_MODE_NO_PAIRING
 )

1043 
VOID
 
	`GAP_Tîmö©eAuth
–
pPkt
->
c⁄√˘i⁄H™dÀ
, 
SMP_PAIRING_FAILED_NOT_SUPPORTED
 );

1047 
lökDBIãm_t
 *
pLökIãm
 = 
	`lökDB_Föd
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

1050 i‡–
pPkt
->
∑úReq
.
authReq
 & 
SM_AUTH_STATE_BONDING
 )

1052 i‡–
pLökIãm
 )

1054 i‡–(
pLökIãm
->
addrTy≥
 !
ADDRTYPE_PUBLIC
Ë&& (
pPkt
->
∑úReq
.
keyDi°
.
mIdKey
 =
FALSE
) )

1056 
uöt8
 
publicAddr
[
B_ADDR_LEN
];

1059 i‡–
	`GAPB⁄dMgr_ResﬁveAddr
(
pLökIãm
->
addrTy≥
,ÖLökIãm->
addr
, 
publicAddr
 ) =
FALSE
 )

1062 
VOID
 
	`GAP_Tîmö©eAuth
–
pPkt
->
c⁄√˘i⁄H™dÀ
, 
SMP_PAIRING_FAILED_AUTH_REQ
 );

1075 
	`g≠B⁄dMgrAuthítiˇã
–
pPkt
->
c⁄√˘i⁄H™dÀ
, 
pLökIãm
->
addrTy≥
, &’Pkt->
∑úReq
) );

1078 i‡–
pG≠B⁄dCB
 &&ÖG≠B⁄dCB->
∑úSèãCB
 )

1080 
pG≠B⁄dCB
->
	`∑úSèãCB
–
pPkt
->
c⁄√˘i⁄H™dÀ
, 
GAPBOND_PAIRING_STATE_STARTED
, 
SUCCESS
 );

1087 #i‡–
HOST_CONFIG
 & 
CENTRAL_CFG
 )

1088 
GAP_SLAVE_REQUESTED_SECURITY_EVENT
:

1090 
uöt16
 
c⁄nH™dÀ
 = ((
g≠SœveSecurôyReqEvít_t
 *)
pMsg
)->
c⁄√˘i⁄H™dÀ
;

1091 
uöt8
 
idx
;

1092 
uöt8
 
publicAddr
[
B_ADDR_LEN
] = {0, 0, 0, 0, 0, 0};

1093 
lökDBIãm_t
 *
pLök
 = 
	`lökDB_Föd
–
c⁄nH™dÀ
 );

1096 i‡(
pLök
 !
NULL
 && 
g≠B⁄d_PaúögMode
 !
GAPBOND_PAIRING_MODE_INITIATE
)

1099 
idx
 = 
	`GAPB⁄dMgr_ResﬁveAddr
–
pLök
->
addrTy≥
,ÖLök->
addr
, 
publicAddr
 );

1100 i‡–
idx
 < 
GAP_BONDINGS_MAX
 )

1102 
	`g≠B⁄dMgrB⁄dReq
–
c⁄nH™dÀ
, 
idx
, 
	`g≠B⁄dMgrGëSèãFœgs
( idx ),

1103 
GAP_PROFILE_CENTRAL
, 
TRUE
 );

1106 i‡–
g≠B⁄d_PaúögMode
 =
GAPBOND_PAIRING_MODE_NO_PAIRING
 )

1109 
VOID
 
	`GAP_Tîmö©eAuth
–
c⁄nH™dÀ
, 
SMP_PAIRING_FAILED_NOT_SUPPORTED
 );

1112 i‡(
g≠B⁄d_PaúögMode
 =
GAPBOND_PAIRING_MODE_WAIT_FOR_REQ
)

1115 
	`g≠B⁄dMgrAuthítiˇã
–
c⁄nH™dÀ
, 
pLök
->
addrTy≥
, 
NULL
 );

1122 
GAP_LINK_TERMINATED_EVENT
:

1123 i‡–
	`GAP_NumA˘iveC⁄√˘i⁄s
() == 0 )

1126 i‡–
îa£AŒB⁄ds
 =
TRUE
 )

1128 
VOID
 
	`g≠B⁄dMgrEø£AŒB⁄dögs
();

1129 
îa£AŒB⁄ds
 = 
FALSE
;

1132 
	`oßl_mem£t
–
b⁄dsToDñëe
, 
FALSE
, ( bondsToDelete ) );

1137 
uöt8
 
idx
 = 0; idx < 
GAP_BONDINGS_MAX
; idx++)

1139 i‡–
b⁄dsToDñëe
[
idx
] =
TRUE
 )

1141 
VOID
 
	`g≠B⁄dMgrEø£B⁄dög
–
idx
 );

1142 
b⁄dsToDñëe
[
idx
] = 
FALSE
;

1148 
VOID
 
	`oßl_¢v_com∑˘
–
NV_COMPACT_THRESHOLD
 );

1151 
	`g≠B⁄dMgrRódB⁄ds
();

1159  ( 
TRUE
 );

1160 
	}
}

1177 
uöt8
 
	$g≠B⁄dMgrCh™geSèã
–
uöt8
 
idx
, 
uöt16
 
°©e
, uöt8 
£t
 )

1179 
g≠B⁄dRec_t
 
b⁄dRec
;

1182 i‡–(
	`oßl_¢v_ªad
–
	`maöRec‹dNvID
(
idx
),  ( 
g≠B⁄dRec_t
 ), &
b⁄dRec
 ) =
SUCCESS
)

1183 && (
	`oßl_isbuf£t
–
b⁄dRec
.
publicAddr
, 0xFF, 
B_ADDR_LEN
 ) =
FALSE
) )

1186 
uöt8
 
°©eFœgs
 = 
b⁄dRec
.stateFlags;

1187 i‡–
£t
 )

1189 
°©eFœgs
 |
°©e
;

1193 
°©eFœgs
 &~(
°©e
);

1196 i‡–
°©eFœgs
 !
b⁄dRec
.stateFlags )

1198 
b⁄dRec
.
°©eFœgs
 = stateFlags;

1199 
VOID
 
	`oßl_¢v_wrôe
–
	`maöRec‹dNvID
(
idx
),  ( 
g≠B⁄dRec_t
 ), &
b⁄dRec
 );

1201  ( 
TRUE
 );

1203  ( 
FALSE
 );

1204 
	}
}

1217 
uöt8
 
	$g≠B⁄dMgrUpd©eCh¨Cfg
–
uöt8
 
idx
, 
uöt16
 
©åH™dÀ
, uöt16 
vÆue
 )

1219 
g≠B⁄dRec_t
 
b⁄dRec
;

1222 i‡––
	`oßl_¢v_ªad
–
	`maöRec‹dNvID
(
idx
),  ( 
g≠B⁄dRec_t
 ), &
b⁄dRec
 ) =
SUCCESS
 )

1223 && ( 
	`oßl_isbuf£t
–
b⁄dRec
.
publicAddr
, 0xFF, 
B_ADDR_LEN
 ) =
FALSE
 ) )

1225 
g≠B⁄dCh¨Cfg_t
 
ch¨Cfg
[
GAP_CHAR_CFG_MAX
];

1227 i‡–
	`oßl_¢v_ªad
–
	`g©tCfgNvID
(
idx
),  ( 
ch¨Cfg
 ), ch¨Cfg ) =
SUCCESS
 )

1229 
uöt8
 
upd©e
 = 
FALSE
;

1231 
	`g≠B⁄dMgrInvîtCh¨CfgIãm
–
ch¨Cfg
 );

1233 i‡–
©åH™dÀ
 =
GATT_INVALID_HANDLE
 )

1235 i‡–
	`oßl_isbuf£t
–(
uöt8
 *)
ch¨Cfg
, 0x00,  ( ch¨Cfg ) ) =
FALSE
 )

1238 
VOID
 
	`oßl_mem£t
–(*)
ch¨Cfg
, 0x00,  ( charCfg ) );

1239 
upd©e
 = 
TRUE
;

1244 
g≠B⁄dCh¨Cfg_t
 *
pIãm
 = 
	`g≠B⁄dMgrFödCh¨CfgIãm
–
©åH™dÀ
, 
ch¨Cfg
 );

1245 i‡–
pIãm
 =
NULL
 )

1248 i‡––
vÆue
 =
GATT_CFG_NO_OPERATION
 ) ||

1249 ––
pIãm
 = 
	`g≠B⁄dMgrFödCh¨CfgIãm
–
GATT_INVALID_HANDLE
, 
ch¨Cfg
 ) ) =
NULL
 ) )

1251  ( 
FALSE
 );

1254 
pIãm
->
©åH™dÀ
 =áttrHandle;

1257 i‡–
pIãm
->
vÆue
 != value )

1260 
pIãm
->
vÆue
 = (
uöt8
)value;

1261 i‡–
vÆue
 =
GATT_CFG_NO_OPERATION
 )

1264 
pIãm
->
©åH™dÀ
 = 
GATT_INVALID_HANDLE
;

1267 
upd©e
 = 
TRUE
;

1272 i‡–
upd©e
 )

1274 
	`g≠B⁄dMgrInvîtCh¨CfgIãm
–
ch¨Cfg
 );

1275 
VOID
 
	`oßl_¢v_wrôe
–
	`g©tCfgNvID
(
idx
), –
ch¨Cfg
 ), charCfg );

1279  ( 
TRUE
 );

1282  ( 
FALSE
 );

1283 
	}
}

1297 
g≠B⁄dCh¨Cfg_t
 *
	$g≠B⁄dMgrFödCh¨CfgIãm
–
uöt16
 
©åH™dÀ
,

1298 
g≠B⁄dCh¨Cfg_t
 *
ch¨CfgTbl
 )

1300  
uöt8
 
i
 = 0; i < 
GAP_CHAR_CFG_MAX
; i++ )

1302 i‡–
ch¨CfgTbl
[
i
].
©åH™dÀ
 ==áttrHandle )

1304  ( &(
ch¨CfgTbl
[
i
]) );

1308  ( (
g≠B⁄dCh¨Cfg_t
 *)
NULL
 );

1309 
	}
}

1320 
	$g≠B⁄dMgrInvîtCh¨CfgIãm
–
g≠B⁄dCh¨Cfg_t
 *
ch¨CfgTbl
 )

1322  
uöt8
 
i
 = 0; i < 
GAP_CHAR_CFG_MAX
; i++ )

1324 
ch¨CfgTbl
[
i
].
©åH™dÀ
 = ~(charCfgTbl[i].attrHandle);

1325 
ch¨CfgTbl
[
i
].
vÆue
 = ~(charCfgTbl[i].value);

1327 
	}
}

1343 
uöt8
 
	$g≠B⁄dMgrAddB⁄d
–
g≠B⁄dRec_t
 *
pB⁄dRec
, 
g≠AuthCom∂ëeEvít_t
 *
pPkt
 )

1346 i‡–
pAuthEvt
 =
NULL
 )

1349 i‡––
pB⁄dRec
 =
NULL
 ) || ( 
pPkt
 == NULL ) )

1351  ( 
TRUE
 );

1355 
b⁄dIdx
 = 
	`g≠B⁄dMgrFödAddr
–
pB⁄dRec
->
publicAddr
 );

1356 i‡–
b⁄dIdx
 >
GAP_BONDINGS_MAX
 )

1358 
b⁄dIdx
 = 
	`g≠B⁄dMgrFödEm±y
();

1362 i‡–
b⁄dIdx
 < 
GAP_BONDINGS_MAX
 )

1365 i‡–
pAuthEvt
 =
NULL
 )

1367 
g≠B⁄dCh¨Cfg_t
 
ch¨Cfg
[
GAP_CHAR_CFG_MAX
];

1370 
VOID
 
	`oßl_¢v_wrôe
–
	`maöRec‹dNvID
(
b⁄dIdx
),  ( 
g≠B⁄dRec_t
 ), 
pB⁄dRec
 );

1374 
VOID
 
	`oßl_mem£t
–
ch¨Cfg
, 0xFF,  ( charCfg ) );

1376 
VOID
 
	`oßl_¢v_wrôe
–
	`g©tCfgNvID
(
b⁄dIdx
),  ( 
ch¨Cfg
 ), charCfg );

1379 
VOID
 
	`oßl_mem˝y
–&(
b⁄ds
[
b⁄dIdx
]), 
pB⁄dRec
,  ( 
g≠B⁄dRec_t
 ) );

1382 
pAuthEvt
 = 
pPkt
;

1387 i‡–
pAuthEvt
->
pSecurôyInfo
 )

1389 
VOID
 
	`oßl_¢v_wrôe
–
	`loˇlLTKNvID
(
b⁄dIdx
),  ( 
g≠B⁄dLTK_t
 ), 
pAuthEvt
->
pSecurôyInfo
 );

1390 
pAuthEvt
->
pSecurôyInfo
 = 
NULL
;

1393 i‡–
pAuthEvt
->
pDevSecInfo
 )

1395 
VOID
 
	`oßl_¢v_wrôe
–
	`devLTKNvID
(
b⁄dIdx
),  ( 
g≠B⁄dLTK_t
 ), 
pAuthEvt
->
pDevSecInfo
 );

1396 
pAuthEvt
->
pDevSecInfo
 = 
NULL
;

1399 i‡–
pAuthEvt
->
pIdítôyInfo
 )

1401 
VOID
 
	`oßl_¢v_wrôe
–
	`devIRKNvID
(
b⁄dIdx
), 
KEYLEN
, 
pAuthEvt
->
pIdítôyInfo
->
úk
 );

1402 
pAuthEvt
->
pIdítôyInfo
 = 
NULL
;

1405 i‡–
pAuthEvt
->
pSignögInfo
 )

1407 
VOID
 
	`oßl_¢v_wrôe
–
	`devCSRKNvID
(
b⁄dIdx
), 
KEYLEN
, 
pAuthEvt
->
pSignögInfo
->
§k
 );

1408 
VOID
 
	`oßl_¢v_wrôe
–
	`devSignCou¡îNvID
(
b⁄dIdx
),  ( 
uöt32
 ), &(
pAuthEvt
->
pSignögInfo
->
signCou¡î
) );

1409 
pAuthEvt
->
pSignögInfo
 = 
NULL
;

1413 i‡–
autoSyncWhôeLi°
 )

1415 
	`g≠B⁄dMgr_SyncWhôeLi°
();

1419 
	`g≠B⁄dSëupPrivFœg
();

1421  ( 
TRUE
 );

1426  ( 
FALSE
 );

1429  ( 
TRUE
 );

1430 
	}
}

1441 
uöt8
 
	$g≠B⁄dMgrGëSèãFœgs
–
uöt8
 
idx
 )

1443 
g≠B⁄dRec_t
 
b⁄dRec
;

1445 i‡–
	`oßl_¢v_ªad
–
	`maöRec‹dNvID
(
idx
),  ( 
g≠B⁄dRec_t
 ), &
b⁄dRec
 ) =
SUCCESS
 )

1447  ( 
b⁄dRec
.
°©eFœgs
 );

1451 
	}
}

1464 
bSètus_t
 
	$g≠B⁄dMgrGëPublicAddr
–
uöt8
 
idx
, uöt8 *
pAddr
 )

1466 
bSètus_t
 
°©
;

1467 
g≠B⁄dRec_t
 
b⁄dRec
;

1470 i‡–(
idx
 >
GAP_BONDINGS_MAX
Ë|| (
pAddr
 =
NULL
) )

1472  ( 
INVALIDPARAMETER
 );

1475 
°©
 = 
	`oßl_¢v_ªad
–
	`maöRec‹dNvID
(
idx
),  ( 
g≠B⁄dRec_t
 ), &
b⁄dRec
 );

1477 i‡–
°©
 =
SUCCESS
 )

1479 
VOID
 
	`oßl_mem˝y
–
pAddr
, 
b⁄dRec
.
publicAddr
, 
B_ADDR_LEN
 );

1482  ( 
°©
 );

1483 
	}
}

1496 
uöt8
 
	$g≠B⁄dMgrFödRec⁄√˘Addr
–
uöt8
 *
pRec⁄√˘Addr
 )

1499  
uöt8
 
idx
 = 0; idx < 
GAP_BONDINGS_MAX
; idx++ )

1502 i‡–
	`oßl_memcmp
–
b⁄ds
[
idx
].
ªc⁄√˘Addr
, 
pRec⁄√˘Addr
, 
B_ADDR_LEN
 ) )

1504  ( 
idx
 );

1508  ( 
GAP_BONDINGS_MAX
 );

1509 
	}
}

1521 
uöt8
 
	$g≠B⁄dMgrFödAddr
–
uöt8
 *
pDevAddr
 )

1524  
uöt8
 
idx
 = 0; idx < 
GAP_BONDINGS_MAX
; idx++ )

1527 i‡–
	`oßl_memcmp
–
b⁄ds
[
idx
].
publicAddr
, 
pDevAddr
, 
B_ADDR_LEN
 ) )

1529  ( 
idx
 );

1533  ( 
GAP_BONDINGS_MAX
 );

1534 
	}
}

1547 
uöt8
 
	$g≠B⁄dMgrResﬁvePriv©eAddr
–
uöt8
 *
pDevAddr
 )

1549  
uöt8
 
idx
 = 0; idx < 
GAP_BONDINGS_MAX
; idx++ )

1551 
uöt8
 
IRK
[
KEYLEN
];

1554 i‡–
	`oßl_¢v_ªad
–
	`devIRKNvID
(
idx
), 
KEYLEN
, 
IRK
 ) =
SUCCESS
 )

1556 i‡––
	`oßl_isbuf£t
–
IRK
, 0xFF, 
KEYLEN
 ) =
FALSE
 ) &&

1557 –
	`GAP_ResﬁvePriv©eAddr
–
IRK
, 
pDevAddr
 ) =
SUCCESS
 ) )

1559  ( 
idx
 );

1564  ( 
GAP_BONDINGS_MAX
 );

1565 
	}
}

1576 
	$g≠B⁄dMgrRódB⁄ds
( )

1578  
uöt8
 
idx
 = 0; idx < 
GAP_BONDINGS_MAX
; idx++ )

1581 i‡–
	`oßl_¢v_ªad
–
	`maöRec‹dNvID
(
idx
), –
g≠B⁄dRec_t
 ), &(
b⁄ds
[idx]ËË!
SUCCESS
 )

1584 
VOID
 
	`oßl_mem£t
–
b⁄ds
[
idx
].
publicAddr
, 0xFF, 
B_ADDR_LEN
 );

1585 
VOID
 
	`oßl_mem£t
–
b⁄ds
[
idx
].
ªc⁄√˘Addr
, 0xFF, 
B_ADDR_LEN
 );

1586 
b⁄ds
[
idx
].
°©eFœgs
 = 0;

1590 i‡–
autoSyncWhôeLi°
 )

1592 
	`g≠B⁄dMgr_SyncWhôeLi°
();

1596 
	`g≠B⁄dSëupPrivFœg
();

1597 
	}
}

1609 
uöt8
 
	$g≠B⁄dMgrFödEm±y
( )

1612  
uöt8
 
idx
 = 0; idx < 
GAP_BONDINGS_MAX
; idx++ )

1615 i‡–
	`oßl_isbuf£t
–
b⁄ds
[
idx
].
publicAddr
, 0xFF, 
B_ADDR_LEN
 ) )

1617  ( 
idx
 );

1621  ( 
GAP_BONDINGS_MAX
 );

1622 
	}
}

1634 
uöt8
 
	$g≠B⁄dMgrB⁄dTŸÆ
( )

1636 
uöt8
 
numB⁄ds
 = 0;

1639  
uöt8
 
idx
 = 0; idx < 
GAP_BONDINGS_MAX
; idx++ )

1642 i‡–
	`oßl_isbuf£t
–
b⁄ds
[
idx
].
publicAddr
, 0xFF, 
B_ADDR_LEN
 ) =
FALSE
 )

1644 
numB⁄ds
++;

1648  ( 
numB⁄ds
 );

1649 
	}
}

1661 
bSètus_t
 
	$g≠B⁄dMgrEø£AŒB⁄dögs
( )

1663 
bSètus_t
 
°©
 = 
SUCCESS
;

1666  
uöt8
 
idx
 = 0; (idx < 
GAP_BONDINGS_MAX
Ë&& (
°©
 =
SUCCESS
); idx++ )

1669 
°©
 = 
	`g≠B⁄dMgrEø£B⁄dög
–
idx
 );

1672  ( 
°©
 );

1673 
	}
}

1685 
bSètus_t
 
	$g≠B⁄dMgrEø£B⁄dög
–
uöt8
 
idx
 )

1687 
bSètus_t
 
ªt
;

1688 
g≠B⁄dRec_t
 
b⁄dRec
;

1690 i‡–
idx
 =
b⁄dIdx
 )

1693 
	`oßl_˛ór_evít
–
g≠B⁄dMgr_TaskID
, 
GAP_BOND_SYNC_CC_EVT
 );

1694 
	`oßl_˛ór_evít
–
g≠B⁄dMgr_TaskID
, 
GAP_BOND_SAVE_REC_EVT
 );

1696 
	`g≠B⁄dFªeAuthEvt
();

1700 i‡––
	`oßl_¢v_ªad
–
	`maöRec‹dNvID
(
idx
),  ( 
g≠B⁄dRec_t
 ), &
b⁄dRec
 ) =
SUCCESS
 )

1701 && (
	`oßl_isbuf£t
–
b⁄dRec
.
publicAddr
, 0xFF, 
B_ADDR_LEN
 ) =
FALSE
) )

1703 
g≠B⁄dLTK_t
 
…k
;

1704 
g≠B⁄dCh¨Cfg_t
 
ch¨Cfg
[
GAP_CHAR_CFG_MAX
];

1706 
VOID
 
	`oßl_mem£t
–&
b⁄dRec
, 0xFF,  ( 
g≠B⁄dRec_t
 ) );

1707 
VOID
 
	`oßl_mem£t
–&
…k
, 0xFF,  ( 
g≠B⁄dLTK_t
 ) );

1709 
VOID
 
	`oßl_mem£t
–
ch¨Cfg
, 0xFF,  ( charCfg ) );

1712 
ªt
 = 
	`oßl_¢v_wrôe
–
	`maöRec‹dNvID
(
idx
),  ( 
g≠B⁄dRec_t
 ), &
b⁄dRec
 );

1713 
ªt
 |
	`oßl_¢v_wrôe
–
	`loˇlLTKNvID
(
idx
),  ( 
g≠B⁄dLTK_t
 ), &
…k
 );

1714 
ªt
 |
	`oßl_¢v_wrôe
–
	`devLTKNvID
(
idx
),  ( 
g≠B⁄dLTK_t
 ), &
…k
 );

1715 
ªt
 |
	`oßl_¢v_wrôe
–
	`devIRKNvID
(
idx
), 
KEYLEN
, 
…k
.
LTK
 );

1716 
ªt
 |
	`oßl_¢v_wrôe
–
	`devCSRKNvID
(
idx
), 
KEYLEN
, 
…k
.
LTK
 );

1717 
ªt
 |
	`oßl_¢v_wrôe
–
	`devSignCou¡îNvID
(
idx
),  ( 
uöt32
 ), 
…k
.
LTK
 );

1720 
ªt
 |
	`oßl_¢v_wrôe
–
	`g©tCfgNvID
(
idx
),  ( 
ch¨Cfg
 ), charCfg );

1724 
ªt
 = 
SUCCESS
;

1727  ( 
ªt
 );

1728 
	}
}

1735 
	$GAPB⁄dMgr_Inô
–
uöt8
 
èsk_id
 )

1737 
g≠B⁄dMgr_TaskID
 = 
èsk_id
;

1740 
	`g≠B⁄dMgrRódB⁄ds
();

1741 
	}
}

1748 
uöt16
 
	$GAPB⁄dMgr_Pro˚ssEvít
–
uöt8
 
èsk_id
, 
uöt16
 
evíts
 )

1750 
VOID
 
èsk_id
;

1752 i‡–
evíts
 & 
SYS_EVENT_MSG
 )

1754 
uöt8
 *
pMsg
;

1756 i‡–(
pMsg
 = 
	`oßl_msg_ª˚ive
–
g≠B⁄dMgr_TaskID
 )Ë!
NULL
 )

1758 i‡–
	`g≠B⁄dMgr_Pro˚ssOSALMsg
–(
oßl_evít_hdr_t
 *)
pMsg
 ) )

1761 
VOID
 
	`oßl_msg_dóŒoˇã
–
pMsg
 );

1766  (
evíts
 ^ 
SYS_EVENT_MSG
);

1769 i‡–
evíts
 & 
GAP_BOND_SAVE_REC_EVT
 )

1772 i‡–
	`g≠B⁄dMgrAddB⁄d
–
NULL
, NULL ) )

1775 
	`oßl_£t_evít
–
g≠B⁄dMgr_TaskID
, 
GAP_BOND_SYNC_CC_EVT
 );

1777  (
evíts
 ^ 
GAP_BOND_SAVE_REC_EVT
);

1780  ( 
GAP_BOND_SAVE_REC_EVT
 );

1783 i‡–
evíts
 & 
GAP_BOND_SYNC_CC_EVT
 )

1787 i‡–
	`g≠B⁄dMgr_SyncCh¨Cfg
–
pAuthEvt
->
c⁄√˘i⁄H™dÀ
 ) )

1789 i‡–
pG≠B⁄dCB
 &&ÖG≠B⁄dCB->
∑úSèãCB
 )

1792 
pG≠B⁄dCB
->
	`∑úSèãCB
–
pAuthEvt
->
c⁄√˘i⁄H™dÀ
, 
GAPBOND_PAIRING_STATE_COMPLETE
, 
SUCCESS
 );

1796 
	`g≠B⁄dFªeAuthEvt
();

1798  (
evíts
 ^ 
GAP_BOND_SYNC_CC_EVT
);

1801  ( 
GAP_BOND_SYNC_CC_EVT
 );

1806 
	}
}

1817 
uöt8
 
	$g≠B⁄dMgr_Pro˚ssOSALMsg
–
oßl_evít_hdr_t
 *
pMsg
 )

1819 
uöt8
 
ß„ToDóŒoc
 = 
TRUE
;

1821  
pMsg
->
evít
 )

1823 
GAP_MSG_EVENT
:

1824 
ß„ToDóŒoc
 = 
	`GAPB⁄dMgr_Pro˚ssGAPMsg
–(
g≠EvítHdr_t
 *)
pMsg
 );

1827 
GATT_MSG_EVENT
:

1828 
	`g≠B⁄dMgr_Pro˚ssGATTMsg
–(
g©tMsgEvít_t
 *)
pMsg
 );

1831 
GATT_SERV_MSG_EVENT
:

1832 
	`g≠B⁄dMgr_Pro˚ssGATTSîvMsg
–(
g©tEvítHdr_t
 *)
pMsg
 );

1839  ( 
ß„ToDóŒoc
 );

1840 
	}
}

1852 
uöt8
 
	$GAPB⁄dMgr_CheckNVLí
–
uöt8
 
id
, uöt8 
Àn
 )

1854 
uöt8
 
°©
 = 
FAILURE
;

1857  (
id
 - 
BLE_NVID_GAP_BOND_START
Ë% 
GAP_BOND_REC_IDS
 )

1859 
GAP_BOND_REC_ID_OFFSET
:

1860 i‡–
Àn
 = ( 
g≠B⁄dRec_t
 ) )

1862 
°©
 = 
SUCCESS
;

1866 
GAP_BOND_LOCAL_LTK_OFFSET
:

1867 
GAP_BOND_DEV_LTK_OFFSET
:

1868 i‡–
Àn
 = ( 
g≠B⁄dLTK_t
 ) )

1870 
°©
 = 
SUCCESS
;

1874 
GAP_BOND_DEV_IRK_OFFSET
:

1875 
GAP_BOND_DEV_CSRK_OFFSET
:

1876 i‡–
Àn
 =
KEYLEN
 )

1878 
°©
 = 
SUCCESS
;

1882 
GAP_BOND_DEV_SIGN_COUNTER_OFFSET
:

1883 i‡–
Àn
 = ( 
uöt32
 ) )

1885 
°©
 = 
SUCCESS
;

1893  ( 
°©
 );

1894 
	}
}

1905 
	$g≠B⁄dMgr_Pro˚ssGATTMsg
–
g©tMsgEvít_t
 *
pMsg
 )

1908  
pMsg
->
mëhod
 )

1910 
ATT_HANDLE_VALUE_CFM
:

1912 
VOID
 
	`GAPB⁄dMgr_Sîvi˚Ch™geInd
–
pMsg
->
c⁄nH™dÀ
, 0x00 );

1919 
	}
}

1930 
	$g≠B⁄dMgr_Pro˚ssGATTSîvMsg
–
g©tEvítHdr_t
 *
pMsg
 )

1933  
pMsg
->
mëhod
 )

1935 
GATT_CLIENT_CHAR_CFG_UPDATED_EVENT
:

1937 
g©tClõ¡Ch¨CfgUpd©edEvít_t
 *
pEvít
 = (g©tClõ¡Ch¨CfgUpd©edEvít_à*)
pMsg
;

1939 
VOID
 
	`GAPB⁄dMgr_Upd©eCh¨Cfg
–
pEvít
->
c⁄nH™dÀ
,ÖEvít->
©åH™dÀ
,ÖEvít->
vÆue
 );

1947 
	}
}

1958 
	$g≠B⁄dMgrSídSîvi˚Ch™ge
–
lökDBIãm_t
 *
pLökIãm
 )

1960 
VOID
 
	`GATTSîvAµ_SídSîvi˚Ch™gedInd
–
pLökIãm
->
c⁄√˘i⁄H™dÀ
,

1961 
g≠B⁄dMgr_TaskID
 );

1962 
	}
}

1973 
	$g≠B⁄dSëupPrivFœg
( )

1975 
uöt8
 
¥ivFœgPr›
;

1977 i‡–
	`g≠B⁄dMgrB⁄dTŸÆ
() > 1 )

1979 
¥ivFœgPr›
 = 
GATT_PROP_READ
;

1983 
¥ivFœgPr›
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

1987 
VOID
 
	`GGS_SëP¨amëî
–
GGS_PERI_PRIVACY_FLAG_PROPS
,  ( 
uöt8
 ), &
¥ivFœgPr›
 );

1988 
	}
}

2002 
	$g≠B⁄dMgrAuthítiˇã
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
addrTy≥
,

2003 
g≠PaúögReq_t
 *
pPaúReq
 )

2005 
g≠AuthP¨ams_t
 
∑øms
;

2007 
VOID
 
	`oßl_mem£t
–&
∑øms
, 0,  ( 
g≠AuthP¨ams_t
 ) );

2010 
∑øms
.
c⁄√˘i⁄H™dÀ
 = 
c⁄nH™dÀ
;

2011 
∑øms
.
£cReqs
.
ioC≠s
 = 
g≠B⁄d_IOC≠
;

2012 
∑øms
.
£cReqs
.
oobAvaûabÀ
 = 
g≠B⁄d_OOBD©aFœg
;

2013 
∑øms
.
£cReqs
.
maxEncKeySize
 = 
g≠B⁄d_KeySize
;

2015 
∑øms
.
£cReqs
.
keyDi°
.
sEncKey
 = (
g≠B⁄d_KeyDi°Li°
 & 
GAPBOND_KEYDIST_SENCKEY
Ë? 
TRUE
 : 
FALSE
;

2016 
∑øms
.
£cReqs
.
keyDi°
.
sIdKey
 = (
g≠B⁄d_KeyDi°Li°
 & 
GAPBOND_KEYDIST_SIDKEY
Ë? 
TRUE
 : 
FALSE
;

2017 
∑øms
.
£cReqs
.
keyDi°
.
mEncKey
 = (
g≠B⁄d_KeyDi°Li°
 & 
GAPBOND_KEYDIST_MENCKEY
Ë? 
TRUE
 : 
FALSE
;

2018 
∑øms
.
£cReqs
.
keyDi°
.
mIdKey
 = (
g≠B⁄d_KeyDi°Li°
 & 
GAPBOND_KEYDIST_MIDKEY
Ë? 
TRUE
 : 
FALSE
;

2019 
∑øms
.
£cReqs
.
keyDi°
.
mSign
 = (
g≠B⁄d_KeyDi°Li°
 & 
GAPBOND_KEYDIST_MSIGN
Ë? 
TRUE
 : 
FALSE
;

2020 
∑øms
.
£cReqs
.
keyDi°
.
sSign
 = (
g≠B⁄d_KeyDi°Li°
 & 
GAPBOND_KEYDIST_SSIGN
Ë? 
TRUE
 : 
FALSE
;

2023 i‡–
g≠B⁄d_OOBD©aFœg
 )

2025 
VOID
 
	`oßl_mem˝y
–
∑øms
.
£cReqs
.
oob
, 
g≠B⁄d_OOBD©a
, 
KEYLEN
 );

2028 i‡–
g≠B⁄d_B⁄dög
 && 
addrTy≥
 !
ADDRTYPE_PUBLIC
 )

2031 
∑øms
.
£cReqs
.
keyDi°
.
sIdKey
 = 
TRUE
;

2034 
∑øms
.
£cReqs
.
authReq
 |(
g≠B⁄d_B⁄dög
Ë? 
SM_AUTH_STATE_BONDING
 : 0;

2035 
∑øms
.
£cReqs
.
authReq
 |(
g≠B⁄d_MITM
Ë? 
SM_AUTH_STATE_AUTHENTICATED
 : 0;

2037 
VOID
 
	`GAP_Authítiˇã
–&
∑øms
, 
pPaúReq
 );

2038 
	}
}

2040 #i‡–
HOST_CONFIG
 & 
PERIPHERAL_CFG
 )

2050 
	$g≠B⁄dMgrSœveSecurôyReq
–
uöt16
 
c⁄nH™dÀ
 )

2052 
uöt8
 
authReq
 = 0;

2054 
authReq
 |(
g≠B⁄d_B⁄dög
Ë? 
SM_AUTH_STATE_BONDING
 : 0;

2055 
authReq
 |(
g≠B⁄d_MITM
Ë? 
SM_AUTH_STATE_AUTHENTICATED
 : 0;

2057 
VOID
 
	`GAP_SídSœveSecurôyReque°
–
c⁄nH™dÀ
, 
authReq
 );

2058 
	}
}

2074 
	$g≠B⁄dMgrB⁄dReq
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
idx
, uöt8 
°©eFœgs
,

2075 
uöt8
 
rﬁe
, uöt8 
°¨tEn¸y±i⁄
 )

2077 
smSecurôyInfo_t
 
…k
;

2078 
oßlSnvId_t
 
nvId
;

2080 i‡–
rﬁe
 =
GAP_PROFILE_CENTRAL
 )

2082 
nvId
 = 
	`devLTKNvID
–
idx
 );

2086 
nvId
 = 
	`loˇlLTKNvID
–
idx
 );

2090 
VOID
 
	`oßl_mem£t
–&
…k
, 0,  ( 
smSecurôyInfo_t
 ) );

2092 i‡–
	`oßl_¢v_ªad
–
nvId
,  ( 
smSecurôyInfo_t
 ), &
…k
 ) =
SUCCESS
 )

2094 i‡–(
…k
.
keySize
 >
MIN_ENC_KEYSIZE
Ë&& (…k.keySizê<
MAX_ENC_KEYSIZE
) )

2096 
VOID
 
	`GAP_B⁄d
–
c⁄nH™dÀ
,

2097 ((
°©eFœgs
 & 
GAP_BONDED_STATE_AUTHENTICATED
Ë? 
TRUE
 : 
FALSE
),

2098 &
…k
, 
°¨tEn¸y±i⁄
 );

2101 
	}
}

2112 
	$g≠B⁄dMgr_SyncWhôeLi°
( )

2115 
VOID
 
	`HCI_LE_CÀ¨WhôeLi°Cmd
();

2118  
uöt8
 
i
 = 0; i < 
GAP_BONDINGS_MAX
; i++)

2121 i‡–
	`oßl_isbuf£t
–
b⁄ds
[
i
].
publicAddr
, 0xFF, 
B_ADDR_LEN
 ) =
FALSE
 )

2123 
VOID
 
	`HCI_LE_AddWhôeLi°Cmd
–
HCI_PUBLIC_DEVICE_ADDRESS
, 
b⁄ds
[
i
].
publicAddr
 );

2126 
	}
}

2138 
uöt8
 
	$g≠B⁄dMgr_SyncCh¨Cfg
–
uöt16
 
c⁄nH™dÀ
 )

2140 
g©tAâribuã_t
 *
pAâr
 = 
NULL
;

2141 
uöt16
 
£rvi˚
;

2150 i‡–
pAâr
 =
NULL
 )

2152 
pAâr
 = 
	`GATT_FödH™dÀUUID
–
GATT_MIN_HANDLE
, 
GATT_MAX_HANDLE
,

2153 
˛õ¡Ch¨CfgUUID
, 
ATT_BT_UUID_SIZE
, &
£rvi˚
 );

2156 i‡–
pAâr
 !
NULL
 )

2158 
uöt8
 
Àn
;

2159 
uöt8
 
©åVÆ
[
ATT_BT_UUID_SIZE
];

2163 i‡–
	`GATTSîvAµ_RódAâr
–
c⁄nH™dÀ
, 
pAâr
, 
£rvi˚
, 
©åVÆ
,

2164 &
Àn
, 0, 
ATT_BT_UUID_SIZE
 ) =
SUCCESS
 )

2166 
uöt16
 
vÆue
 = 
	`BUILD_UINT16
(
©åVÆ
[0],áttrVal[1]);

2168 i‡–
vÆue
 !
GATT_CFG_NO_OPERATION
 )

2171 
VOID
 
	`GAPB⁄dMgr_Upd©eCh¨Cfg
–
c⁄nH™dÀ
, 
pAâr
->
h™dÀ
, 
vÆue
 );

2176 
pAâr
 = 
	`GATT_FödNextAâr
–pAâr, 
GATT_MAX_HANDLE
, 
£rvi˚
, 
NULL
 );

2179  ( 
pAâr
 =
NULL
 );

2180 
	}
}

2191 
	$g≠B⁄dFªeAuthEvt
( )

2193 i‡–
pAuthEvt
 !
NULL
 )

2196 
VOID
 
	`oßl_msg_dóŒoˇã
–(
uöt8
 *)
pAuthEvt
 );

2197 
pAuthEvt
 = 
NULL
;

2200 
b⁄dIdx
 = 
GAP_BONDINGS_MAX
;

2201 
	}
}

	@../../Profiles/Roles/gapbondmgr.h

59 #i‚de‡
GAPBONDMGR_H


60 
	#GAPBONDMGR_H


	)

62 #ifde‡
__˝lu•lus


70 
	~"g≠.h
"

76 #i‡!
deföed
 ( 
GAP_BONDINGS_MAX
 )

77 
	#GAP_BONDINGS_MAX
 10

79 

	)

80 #i‡!
deföed
 ( 
GAP_CHAR_CFG_MAX
 )

81 
	#GAP_CHAR_CFG_MAX
 4

83 

	)

92 
	#GAPBOND_PAIRING_MODE
 0x400

93 
	#GAPBOND_INITIATE_WAIT
 0x401

94 
	#GAPBOND_MITM_PROTECTION
 0x402

95 
	#GAPBOND_IO_CAPABILITIES
 0x403

96 
	#GAPBOND_OOB_ENABLED
 0x404

97 
	#GAPBOND_OOB_DATA
 0x405

98 
	#GAPBOND_BONDING_ENABLED
 0x406

99 
	#GAPBOND_KEY_DIST_LIST
 0x407

100 
	#GAPBOND_DEFAULT_PASSCODE
 0x408

101 
	#GAPBOND_ERASE_ALLBONDS
 0x409

102 
	#GAPBOND_AUTO_FAIL_PAIRING
 0x40A

103 
	#GAPBOND_AUTO_FAIL_REASON
 0x40B

104 
	#GAPBOND_KEYSIZE
 0x40C

105 
	#GAPBOND_AUTO_SYNC_WL
 0x40D

106 
	#GAPBOND_BOND_COUNT
 0x40E

107 
	#GAPBOND_BOND_FAIL_ACTION
 0x40F

108 
	#GAPBOND_ERASE_SINGLEBOND
 0x410

109 

	)

114 
	#GAPBOND_PAIRING_MODE_NO_PAIRING
 0x00

115 
	#GAPBOND_PAIRING_MODE_WAIT_FOR_REQ
 0x01

116 
	#GAPBOND_PAIRING_MODE_INITIATE
 0x02

117 

	)

122 
	#GAPBOND_IO_CAP_DISPLAY_ONLY
 0x00

123 
	#GAPBOND_IO_CAP_DISPLAY_YES_NO
 0x01

124 
	#GAPBOND_IO_CAP_KEYBOARD_ONLY
 0x02

125 
	#GAPBOND_IO_CAP_NO_INPUT_NO_OUTPUT
 0x03

126 
	#GAPBOND_IO_CAP_KEYBOARD_DISPLAY
 0x04

127 

	)

132 
	#GAPBOND_KEYDIST_SENCKEY
 0x01

133 
	#GAPBOND_KEYDIST_SIDKEY
 0x02

134 
	#GAPBOND_KEYDIST_SSIGN
 0x04

135 
	#GAPBOND_KEYDIST_MENCKEY
 0x08

136 
	#GAPBOND_KEYDIST_MIDKEY
 0x10

137 
	#GAPBOND_KEYDIST_MSIGN
 0x20

138 

	)

144 
	#GAPBOND_PAIRING_STATE_STARTED
 0x00

145 
	#GAPBOND_PAIRING_STATE_COMPLETE
 0x01

146 
	#GAPBOND_PAIRING_STATE_BONDED
 0x02

147 

	)

152 
	#SMP_PAIRING_FAILED_PASSKEY_ENTRY_FAILED
 0x01

153 
	#SMP_PAIRING_FAILED_OOB_NOT_AVAIL
 0x02

154 
	#SMP_PAIRING_FAILED_AUTH_REQ
 0x03

155 
	#SMP_PAIRING_FAILED_CONFIRM_VALUE
 0x04

156 
	#SMP_PAIRING_FAILED_NOT_SUPPORTED
 0x05

157 
	#SMP_PAIRING_FAILED_ENC_KEY_SIZE
 0x06

158 
	#SMP_PAIRING_FAILED_CMD_NOT_SUPPORTED
 0x07

159 
	#SMP_PAIRING_FAILED_UNSPECIFIED
 0x08

160 
	#SMP_PAIRING_FAILED_REPEATED_ATTEMPTS
 0x09

161 

	)

166 
	#GAPBOND_FAIL_NO_ACTION
 0x00

167 
	#GAPBOND_FAIL_INITIATE_PAIRING
 0x01

168 
	#GAPBOND_FAIL_TERMINATE_LINK
 0x02

169 
	#GAPBOND_FAIL_TERMINATE_ERASE_BONDS
 0x03

170 

	)

180 (*
p‚PasscodeCB_t
)

182 
	tuöt8
 *
	tdevi˚Addr
,

183 
	tuöt16
 
	tc⁄√˘i⁄H™dÀ
,

184 
	tuöt8
 
	tuiI≈uts
,

185 
	tuöt8
 
	tuiOuçuts


191 (*
p‚PaúSèãCB_t
)

193 
	tuöt16
 
	tc⁄√˘i⁄H™dÀ
,

194 
	tuöt8
 
	t°©e
,

195 
	tuöt8
 
	t°©us


203 
p‚PasscodeCB_t
 
∑sscodeCB
;

204 
p‚PaúSèãCB_t
 
∑úSèãCB
;

205 } 
	tg≠B⁄dCBs_t
;

238 
bSètus_t
 
GAPB⁄dMgr_SëP¨amëî
–
uöt16
 
∑øm
, 
uöt8
 
Àn
, *
pVÆue
 );

255 
bSètus_t
 
GAPB⁄dMgr_GëP¨amëî
–
uöt16
 
∑øm
, *
pVÆue
 );

270 
bSètus_t
 
GAPB⁄dMgr_LökE°
–
uöt8
 
addrTy≥
, uöt8 *
pDevAddr
, 
uöt16
 
c⁄nH™dÀ
, uöt8 
rﬁe
 );

282 
uöt8
 
GAPB⁄dMgr_ResﬁveAddr
–uöt8 
addrTy≥
, uöt8 *
pDevAddr
, uöt8 *
pResﬁvedAddr
 );

295 
bSètus_t
 
GAPB⁄dMgr_Sîvi˚Ch™geInd
–
uöt16
 
c⁄√˘i⁄H™dÀ
, 
uöt8
 
£tP¨am
 );

309 
bSètus_t
 
GAPB⁄dMgr_Upd©eCh¨Cfg
–
uöt16
 
c⁄√˘i⁄H™dÀ
, uöt16 
©åH™dÀ
, uöt16 
vÆue
 );

321 
GAPB⁄dMgr_Regi°î
–
g≠B⁄dCBs_t
 *
pCB
 );

334 
bSètus_t
 
GAPB⁄dMgr_PasscodeR•
–
uöt16
 
c⁄√˘i⁄H™dÀ
, 
uöt8
 
°©us
, 
uöt32
 
∑sscode
 );

347 
uöt8
 
GAPB⁄dMgr_Pro˚ssGAPMsg
–
g≠EvítHdr_t
 *
pMsg
 );

357 
uöt8
 
GAPB⁄dMgr_CheckNVLí
–uöt8 
id
, uöt8 
Àn
 );

383 
GAPB⁄dMgr_Inô
–
uöt8
 
èsk_id
 );

399 
uöt16
 
GAPB⁄dMgr_Pro˚ssEvít
–
uöt8
 
èsk_id
, uöt16 
evíts
 );

404 #ifde‡
__˝lu•lus


	@../../Profiles/Roles/gapperiphbondmgr.c

43 
	~"bcomdef.h
"

44 
	~"OSAL.h
"

45 
	~"oßl_¢v.h
"

46 
	~"g≠.h
"

47 
	~"lökdb.h
"

48 
	~"g©t.h
"

50 
	~"g©t£rv≠p.h
"

51 
	~"g≠g©t£rvî.h
"

52 
	~"g≠≥rùhb⁄dmgr.h
"

64 
	#GAP_BONDED_STATE_AUTHENTICATED
 0x0001

	)

65 
	#GAP_BONDED_STATE_SERVICE_CHANGED
 0x0002

	)

91 
	#GAP_BOND_REC_ID_OFFSET
 0

92 
	#GAP_BOND_LOCAL_LTK_OFFSET
 1

93 
	#GAP_BOND_DEV_LTK_OFFSET
 2

94 
	#GAP_BOND_DEV_IRK_OFFSET
 3

95 
	#GAP_BOND_DEV_CSRK_OFFSET
 4

96 
	#GAP_BOND_DEV_SIGN_COUNTER_OFFSET
 5

97 

	)

98 
	#GAP_BOND_REC_IDS
 6

	)

101 
	#ˇlcNvID
(
Idx
, 
off£t
Ë(((((IdxË* 
GAP_BOND_REC_IDS
Ë+ (off£t))Ë+ 
BLE_NVID_GAP_BOND_START
)

	)

102 
	#maöRec‹dNvID
(
b⁄dIdx
Ë(
	`ˇlcNvID
((b⁄dIdx), 
GAP_BOND_REC_ID_OFFSET
))

	)

103 
	#loˇlLTKNvID
(
b⁄dIdx
Ë(
	`ˇlcNvID
((b⁄dIdx), 
GAP_BOND_LOCAL_LTK_OFFSET
))

	)

104 
	#devLTKNvID
(
b⁄dIdx
Ë(
	`ˇlcNvID
((b⁄dIdx), 
GAP_BOND_DEV_LTK_OFFSET
))

	)

105 
	#devIRKNvID
(
b⁄dIdx
Ë(
	`ˇlcNvID
((b⁄dIdx), 
GAP_BOND_DEV_IRK_OFFSET
))

	)

106 
	#devCSRKNvID
(
b⁄dIdx
Ë(
	`ˇlcNvID
((b⁄dIdx), 
GAP_BOND_DEV_CSRK_OFFSET
))

	)

107 
	#devSignCou¡îNvID
(
b⁄dIdx
Ë(
	`ˇlcNvID
((b⁄dIdx), 
GAP_BOND_DEV_SIGN_COUNTER_OFFSET
))

	)

110 
	#MIN_ENC_KEYSIZE
 7

111 
	#MAX_ENC_KEYSIZE
 16

112 

	)

121 
uöt8
 
	mLTK
[
KEYLEN
];

122 
uöt16
 
	mdiv
;

123 
uöt8
 
	mønd
[
B_RANDOM_NUM_SIZE
];

124 
uöt8
 
	mkeySize
;

125 } 
	tg≠B⁄dLTK_t
;

130 
uöt8
 
	mpublicAddr
[
B_ADDR_LEN
];

131 
uöt8
 
	mªc⁄√˘Addr
[
B_ADDR_LEN
];

132 
uöt16
 
	m°©eFœgs
;

133 } 
	tg≠B⁄dRec_t
;

150 
uöt8
 
	gg≠B⁄dMgr_TaskID
;

153 
uöt8
 
	gg≠B⁄d_PaúögMode
 = 
GAPBOND_PAIRING_MODE_WAIT_FOR_REQ
;

154 
uöt16
 
	gg≠B⁄d_InôüãWaô
 = 1000;

155 
uöt8
 
	gg≠B⁄d_MITM
 = 
FALSE
;

156 
uöt8
 
	gg≠B⁄d_IOC≠
 = 
GAPBOND_IO_CAP_DISPLAY_ONLY
;

157 
uöt8
 
	gg≠B⁄d_OOBD©aFœg
 = 
FALSE
;

158 
uöt8
 
	gg≠B⁄d_OOBD©a
[
KEYLEN
] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

159 
uöt8
 
	gg≠B⁄d_B⁄dög
 = 
FALSE
;

160 
uöt8
 
	gg≠B⁄d_AutoFaû
 = 
FALSE
;

161 
uöt8
 
	gg≠B⁄d_AutoFaûRós⁄
 = 
SMP_PAIRING_FAILED_NOT_SUPPORTED
;

162 
uöt8
 
	gg≠B⁄d_KeyDi°Li°
 =

164 
GAPBOND_KEYDIST_SENCKEY


165 | 
GAPBOND_KEYDIST_SIDKEY


168 | 
GAPBOND_KEYDIST_MIDKEY


169 | 
GAPBOND_KEYDIST_MSIGN


171 
uöt32
 
	gg≠B⁄d_Passcode
 = 0;

172 
uöt8
 
	gg≠B⁄d_KeySize
 = 
MAX_ENC_KEYSIZE
;

174 
g≠B⁄dCBs_t
 *
	gpG≠B⁄dCB
 = 
NULL
;

179 
uöt8
 
g≠B⁄dMgrCh™geSèã
–uöt8 
idx
, 
uöt16
 
°©e
, uöt8 
£t
 );

180 
uöt8
 
g≠B⁄dMgrAddB⁄d
–
g≠B⁄dRec_t
 *
pB⁄dRec
,

181 
g≠B⁄dLTK_t
 *
pLoˇlLTK
, g≠B⁄dLTK_à*
pDevLTK
,

182 
uöt8
 *
pIRK
, uöt8 *
pSRK
, 
uöt32
 
signCou¡î
 );

183 
uöt8
 
g≠B⁄dMgrGëSèãFœgs
–uöt8 
idx
 );

184 
bSètus_t
 
g≠B⁄dMgrGëPublicAddr
–
uöt8
 
idx
, uöt8 *
pAddr
 );

185 
uöt8
 
g≠B⁄dMgrFödRec⁄√˘Addr
–uöt8 *
pRec⁄√˘Addr
 );

186 
uöt8
 
g≠B⁄dMgrFödAddr
–uöt8 *
pDevAddr
 );

187 
uöt8
 
g≠B⁄dMgrFödEm±y
( );

188 
uöt8
 
g≠B⁄dMgrB⁄dTŸÆ
( );

189 
bSètus_t
 
g≠B⁄dMgrEø£AŒB⁄dögs
( );

190 
bSètus_t
 
g≠B⁄dMgrEø£B⁄dög
–
uöt8
 
idx
 );

191 
g≠B⁄dMgr_Pro˚ssOSALMsg
–
oßl_evít_hdr_t
 *
pMsg
 );

192 
g≠B⁄dMgrSídSîvi˚Ch™ge
–
lökDBIãm_t
 *
pLökIãm
 );

193 
g≠B⁄dMgr_Pro˚ssGATTMsg
–
g©tMsgEvít_t
 *
pMsg
 );

194 
g≠B⁄dSëupPrivFœg
( );

209 
bSètus_t
 
	$GAPB⁄dMgr_SëP¨amëî
–
uöt16
 
∑øm
, 
uöt8
 
Àn
, *
pVÆue
 )

211 
bSètus_t
 
ªt
 = 
SUCCESS
;

213  
∑øm
 )

215 
GAPBOND_PAIRING_MODE
:

216 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
GAPBOND_PAIRING_MODE_INITIATE
) )

218 
g≠B⁄d_PaúögMode
 = *((
uöt8
*)
pVÆue
);

222 
ªt
 = 
bÀInvÆidR™ge
;

226 
GAPBOND_INITIATE_WAIT
:

227 i‡–
Àn
 = ( 
uöt16
 ) )

229 
g≠B⁄d_InôüãWaô
 = *((
uöt8
*)
pVÆue
);

233 
ªt
 = 
bÀInvÆidR™ge
;

237 
GAPBOND_MITM_PROTECTION
:

238 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
TRUE
) )

240 
g≠B⁄d_MITM
 = *((
uöt8
*)
pVÆue
);

244 
ªt
 = 
bÀInvÆidR™ge
;

248 
GAPBOND_IO_CAPABILITIES
:

249 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
GAPBOND_IO_CAP_KEYBOARD_DISPLAY
) )

251 
g≠B⁄d_IOC≠
 = *((
uöt8
*)
pVÆue
);

255 
ªt
 = 
bÀInvÆidR™ge
;

259 
GAPBOND_OOB_ENABLED
:

260 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
TRUE
) )

262 
g≠B⁄d_OOBD©aFœg
 = *((
uöt8
*)
pVÆue
);

266 
ªt
 = 
bÀInvÆidR™ge
;

270 
GAPBOND_OOB_DATA
:

271 i‡–
Àn
 =
KEYLEN
 )

273 
VOID
 
	`oßl_mem˝y
–
g≠B⁄d_OOBD©a
, 
pVÆue
, 
KEYLEN
 ) ;

277 
ªt
 = 
bÀInvÆidR™ge
;

281 
GAPBOND_BONDING_ENABLED
:

282 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
TRUE
) )

284 
g≠B⁄d_B⁄dög
 = *((
uöt8
*)
pVÆue
);

288 
ªt
 = 
bÀInvÆidR™ge
;

292 
GAPBOND_KEY_DIST_LIST
:

293 i‡–
Àn
 = ( 
uöt8
 ) )

295 
g≠B⁄d_KeyDi°Li°
 = *((
uöt8
*)
pVÆue
);

299 
ªt
 = 
bÀInvÆidR™ge
;

303 
GAPBOND_DEFAULT_PASSCODE
:

304 i‡–(
Àn
 = ( 
uöt32
 ))

305 && (*((
uöt32
*)
pVÆue
Ë<
GAP_PASSCODE_MAX
) )

307 
g≠B⁄d_Passcode
 = *((
uöt32
*)
pVÆue
);

311 
ªt
 = 
bÀInvÆidR™ge
;

315 
GAPBOND_ERASE_ALLBONDS
:

316 i‡–
Àn
 == 0 )

318 
VOID
 
	`g≠B⁄dMgrEø£AŒB⁄dögs
();

322 
ªt
 = 
bÀInvÆidR™ge
;

326 
GAPBOND_AUTO_FAIL_PAIRING
:

327 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
TRUE
) )

329 
g≠B⁄d_AutoFaû
 = *((
uöt8
*)
pVÆue
);

333 
ªt
 = 
bÀInvÆidR™ge
;

337 
GAPBOND_AUTO_FAIL_REASON
:

338 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
SMP_PAIRING_FAILED_REPEATED_ATTEMPTS
) )

340 
g≠B⁄d_AutoFaûRós⁄
 = *((
uöt8
*)
pVÆue
);

344 
ªt
 = 
bÀInvÆidR™ge
;

348 
GAPBOND_KEYSIZE
:

349 i‡–(
Àn
 = ( 
uöt8
 ))

350 && ((*((
uöt8
*)
pVÆue
Ë>
MIN_ENC_KEYSIZE
Ë&& (*((uöt8*ÌVÆueË<
MAX_ENC_KEYSIZE
)) )

352 
g≠B⁄d_KeySize
 = *((
uöt8
*)
pVÆue
);

356 
ªt
 = 
bÀInvÆidR™ge
;

362 i‡–(
∑øm
 < 
TGAP_PARAMID_MAX
Ë&& (
Àn
 = ( 
uöt16
 )) )

364 
ªt
 = 
	`GAP_SëP¨amVÆue
–
∑øm
, *((
uöt16
*)
pVÆue
) );

368 
ªt
 = 
INVALIDPARAMETER
;

373  ( 
ªt
 );

374 
	}
}

381 
bSètus_t
 
	$GAPB⁄dMgr_GëP¨amëî
–
uöt16
 
∑øm
, *
pVÆue
 )

383 
bSètus_t
 
ªt
 = 
SUCCESS
;

385  
∑øm
 )

387 
GAPBOND_PAIRING_MODE
:

388 *((
uöt8
*)
pVÆue
Ë
g≠B⁄d_PaúögMode
;

391 
GAPBOND_INITIATE_WAIT
:

392 *((
uöt16
*)
pVÆue
Ë
g≠B⁄d_InôüãWaô
;

395 
GAPBOND_MITM_PROTECTION
:

396 *((
uöt8
*)
pVÆue
Ë
g≠B⁄d_MITM
;

399 
GAPBOND_IO_CAPABILITIES
:

400 *((
uöt8
*)
pVÆue
Ë
g≠B⁄d_IOC≠
;

403 
GAPBOND_OOB_ENABLED
:

404 *((
uöt8
*)
pVÆue
Ë
g≠B⁄d_OOBD©aFœg
;

407 
GAPBOND_OOB_DATA
:

408 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠B⁄d_OOBD©a
, 
KEYLEN
 ) ;

411 
GAPBOND_BONDING_ENABLED
:

412 *((
uöt8
*)
pVÆue
Ë
g≠B⁄d_B⁄dög
;

415 
GAPBOND_KEY_DIST_LIST
:

416 *((
uöt8
*)
pVÆue
Ë
g≠B⁄d_KeyDi°Li°
;

419 
GAPBOND_DEFAULT_PASSCODE
:

420 *((
uöt32
*)
pVÆue
Ë
g≠B⁄d_Passcode
;

423 
GAPBOND_AUTO_FAIL_PAIRING
:

424 *((
uöt8
*)
pVÆue
Ë
g≠B⁄d_AutoFaû
;

427 
GAPBOND_AUTO_FAIL_REASON
:

428 *((
uöt8
*)
pVÆue
Ë
g≠B⁄d_AutoFaûRós⁄
;

431 
GAPBOND_KEYSIZE
:

432 *((
uöt8
*)
pVÆue
Ë
g≠B⁄d_KeySize
;

437 i‡–
∑øm
 < 
TGAP_PARAMID_MAX
 )

439 *((
uöt16
*)
pVÆue
Ë
	`GAP_GëP¨amVÆue
–
∑øm
 );

443 
ªt
 = 
INVALIDPARAMETER
;

448  ( 
ªt
 );

449 
	}
}

456 
bSètus_t
 
	$GAPB⁄dMgr_LökE°
–
uöt8
 
addrTy≥
, uöt8 *
pDevAddr
, 
uöt16
 
c⁄nH™dÀ
 )

458 
uöt8
 
idx
;

459 
uöt8
 
publicAddr
[
B_ADDR_LEN
]

462 
idx
 = 
	`GAPB⁄dMgr_ResﬁveAddr
–
addrTy≥
, 
pDevAddr
, 
publicAddr
 );

463 i‡–
idx
 < 
GAP_BONDINGS_MAX
 )

466 
uöt8
 
°©eFœgs
;

467 
smSecurôyInfo_t
 
loˇlLTK
;

468 
smSignögInfo_t
 
signögInfo
;

471 
	`oßl_mem£t
–&
loˇlLTK
, 0,  ( 
smSecurôyInfo_t
 ) );

472 
	`oßl_mem£t
–&
signögInfo
, 0,  ( 
smSignögInfo_t
 ) );

475 
°©eFœgs
 = 
	`g≠B⁄dMgrGëSèãFœgs
–
idx
 );

476 i‡–
	`oßl_¢v_ªad
–
	`loˇlLTKNvID
(
idx
),  ( 
smSecurôyInfo_t
 ), &
loˇlLTK
 ) =
SUCCESS
 )

478 i‡–(
loˇlLTK
.
keySize
 >
MIN_ENC_KEYSIZE
Ë&& (loˇlLTK.keySizê<
MAX_ENC_KEYSIZE
) )

481 
VOID
 
	`GAP_B⁄d
–
c⁄nH™dÀ
,

482 ((
°©eFœgs
 & 
GAP_BONDED_STATE_AUTHENTICATED
Ë? 
TRUE
 : 
FALSE
),

483 &
loˇlLTK
 );

488 i‡–
	`oßl_¢v_ªad
–
	`devCSRKNvID
(
idx
), 
KEYLEN
, 
signögInfo
.
§k
 ) =
SUCCESS
 )

490 i‡–
	`oßl_isbuf£t
–
signögInfo
.
§k
, 0xFF, 
KEYLEN
 ) =
FALSE
 )

493 
VOID
 
	`oßl_¢v_ªad
–
	`devSignCou¡îNvID
(
idx
),  ( 
uöt32
 ), &(
signögInfo
.
signCou¡î
) );

494 
VOID
 
	`GAP_Sig«bÀ
–
c⁄nH™dÀ
,

495 ((
°©eFœgs
 & 
GAP_BONDED_STATE_AUTHENTICATED
Ë? 
TRUE
 : 
FALSE
),

496 &
signögInfo
 );

501 i‡–
°©eFœgs
 & 
GAP_BONDED_STATE_SERVICE_CHANGED
 )

503 
VOID
 
	`GATT_Sîvi˚Ch™gedInd
–
c⁄nH™dÀ
, 
g≠B⁄dMgr_TaskID
 );

509 i‡–
g≠B⁄d_PaúögMode
 =
GAPBOND_PAIRING_MODE_INITIATE
 )

516  ( 
SUCCESS
 );

517 
	}
}

524 
uöt8
 
	$GAPB⁄dMgr_ResﬁveAddr
–
uöt8
 
addrTy≥
, uöt8 *
pDevAddr
, uöt8 *
pResﬁvedAddr
 )

526 
uöt8
 
idx
 = 
GAP_BONDINGS_MAX
;

528  
addrTy≥
 )

530 
ADDRTYPE_PUBLIC
:

531 
ADDRTYPE_STATIC
:

532 
idx
 = 
	`g≠B⁄dMgrFödAddr
–
pDevAddr
 );

533 i‡–(
idx
 < 
GAP_BONDINGS_MAX
Ë&& (
pResﬁvedAddr
) )

535 
VOID
 
	`oßl_mem˝y
–
pResﬁvedAddr
, 
pDevAddr
, 
B_ADDR_LEN
 );

539 
ADDRTYPE_PRIVATE_NONRESOLVE
:

541 
idx
 = 
	`g≠B⁄dMgrFödRec⁄√˘Addr
–
pDevAddr
 );

542 i‡–(
idx
 < 
GAP_BONDINGS_MAX
Ë&& (
pResﬁvedAddr
) )

544 
VOID
 
	`g≠B⁄dMgrGëPublicAddr
–
idx
, 
pResﬁvedAddr
 );

548 
ADDRTYPE_PRIVATE_RESOLVE
:

556  ( 
idx
 );

557 
	}
}

564 
bSètus_t
 
	$GAPB⁄dMgr_Sîvi˚Ch™geInd
–
uöt16
 
c⁄√˘i⁄H™dÀ
, 
uöt8
 
£tP¨am
 )

566 
bSètus_t
 
ªt
 = 
bÀNoResour˚s
;

568 i‡–
c⁄√˘i⁄H™dÀ
 == 0xFFFF )

570 
uöt8
 
idx
;

573  
idx
 = 0; idx < 
GAP_BONDINGS_MAX
; idx++ )

575 i‡–
	`g≠B⁄dMgrCh™geSèã
–
idx
, 
GAP_BONDED_STATE_SERVICE_CHANGED
, 
£tP¨am
 ) )

577 
ªt
 = 
SUCCESS
;

582 i‡–
£tP¨am
 )

585 
	`lökDB_Pîf‹mFunc
–
g≠B⁄dMgrSídSîvi˚Ch™ge
 );

591 
lökDBIãm_t
 *
pLökIãm
 = 
	`lökDB_Föd
–
c⁄√˘i⁄H™dÀ
 );

592 i‡–
pLökIãm
 )

594 
uöt8
 
idx
;

595 
idx
 = 
	`GAPB⁄dMgr_ResﬁveAddr
–
pLökIãm
->
addrTy≥
,ÖLökIãm->
addr
, 
NULL
 );

596 i‡–
idx
 < 
GAP_BONDINGS_MAX
 )

599 
VOID
 
	`g≠B⁄dMgrCh™geSèã
–
idx
, 
GAP_BONDED_STATE_SERVICE_CHANGED
, 
£tP¨am
 );

600 
ªt
 = 
SUCCESS
;

604 i‡–
£tP¨am
 )

606 
	`g≠B⁄dMgrSídSîvi˚Ch™ge
–
pLökIãm
 );

611 
ªt
 = 
bÀNŸC⁄√˘ed
;

615  ( 
ªt
 );

616 
	}
}

628 
	$GAPB⁄dMgr_Regi°î
–
g≠B⁄dCBs_t
 *
pCB
 )

630 
pG≠B⁄dCB
 = 
pCB
;

631 
	}
}

644 
bSètus_t
 
	$GAPB⁄dMgr_PasscodeR•
–
uöt16
 
c⁄√˘i⁄H™dÀ
, 
uöt8
 
°©us
, 
uöt32
 
∑sscode
 )

646 
bSètus_t
 
ªt
 = 
SUCCESS
;

648 i‡–
°©us
 =
SUCCESS
 )

651 
∑sscode
 =Öasscodê% (
GAP_PASSCODE_MAX
 + 1);

653 
ªt
 = 
	`GAP_PasscodeUpd©e
–
∑sscode
, 
c⁄√˘i⁄H™dÀ
 );

654 i‡–
ªt
 !
SUCCESS
 )

656 
VOID
 
	`GAP_Tîmö©eAuth
–
c⁄√˘i⁄H™dÀ
, 
SMP_PAIRING_FAILED_PASSKEY_ENTRY_FAILED
 );

661 
VOID
 
	`GAP_Tîmö©eAuth
–
c⁄√˘i⁄H™dÀ
, 
°©us
 );

664  
ªt
;

665 
	}
}

682 
uöt8
 
	$g≠B⁄dMgrCh™geSèã
–
uöt8
 
idx
, 
uöt16
 
°©e
, uöt8 
£t
 )

684 
g≠B⁄dRec_t
 
b⁄dRec
;

687 i‡–(
	`oßl_¢v_ªad
–
	`maöRec‹dNvID
(
idx
),  ( 
g≠B⁄dRec_t
 ), &
b⁄dRec
 ) =
SUCCESS
)

688 && (
	`oßl_isbuf£t
–
b⁄dRec
.
publicAddr
, 0xFF, 
B_ADDR_LEN
 ) =
FALSE
) )

691 
uöt8
 
°©eFœgs
 = 
b⁄dRec
.stateFlags;

692 i‡–
£t
 )

694 
°©eFœgs
 |
°©e
;

698 
°©eFœgs
 &~(
°©e
);

701 i‡–
°©eFœgs
 !
b⁄dRec
.stateFlags )

703 
b⁄dRec
.
°©eFœgs
 = stateFlags;

704 
VOID
 
	`oßl_¢v_wrôe
–
	`maöRec‹dNvID
(
idx
),  ( 
g≠B⁄dRec_t
 ), &
b⁄dRec
 );

706  ( 
TRUE
 );

708  ( 
FALSE
 );

709 
	}
}

725 
uöt8
 
	$g≠B⁄dMgrAddB⁄d
–
g≠B⁄dRec_t
 *
pB⁄dRec
,

726 
g≠B⁄dLTK_t
 *
pLoˇlLTK
, g≠B⁄dLTK_à*
pDevLTK
,

727 
uöt8
 *
pIRK
, uöt8 *
pSRK
, 
uöt32
 
signCou¡î
 )

729 
uöt8
 
idx
;

731 i‡–
pB⁄dRec
 =
NULL
 )

733  ( 
GAP_BONDINGS_MAX
 );

737 
idx
 = 
	`g≠B⁄dMgrFödAddr
–
pB⁄dRec
->
publicAddr
 );

738 i‡–
idx
 >
GAP_BONDINGS_MAX
 )

740 
idx
 = 
	`g≠B⁄dMgrFödEm±y
();

743 i‡–
idx
 < 
GAP_BONDINGS_MAX
 )

746 
VOID
 
	`oßl_¢v_wrôe
–
	`maöRec‹dNvID
(
idx
),  ( 
g≠B⁄dRec_t
 ), 
pB⁄dRec
 );

749 i‡–
pLoˇlLTK
 )

751 
VOID
 
	`oßl_¢v_wrôe
–
	`loˇlLTKNvID
(
idx
),  ( 
g≠B⁄dLTK_t
 ), 
pLoˇlLTK
 );

756 i‡–
pDevLTK
 )

758 
VOID
 
	`oßl_¢v_wrôe
–
	`devLTKNvID
(
idx
),  ( 
g≠B⁄dLTK_t
 ), 
pDevLTK
 );

762 i‡–
pIRK
 )

764 
VOID
 
	`oßl_¢v_wrôe
–
	`devIRKNvID
(
idx
), 
KEYLEN
, 
pIRK
 );

768 i‡–
pSRK
 )

770 
VOID
 
	`oßl_¢v_wrôe
–
	`devCSRKNvID
(
idx
), 
KEYLEN
, 
pSRK
 );

771 
VOID
 
	`oßl_¢v_wrôe
–
	`devSignCou¡îNvID
(
idx
),  ( 
uöt32
 ), &
signCou¡î
 );

776 
	`g≠B⁄dSëupPrivFœg
();

778  ( 
idx
 );

779 
	}
}

790 
uöt8
 
	$g≠B⁄dMgrGëSèãFœgs
–
uöt8
 
idx
 )

792 
g≠B⁄dRec_t
 
b⁄dRec
;

794 
VOID
 
	`oßl_¢v_ªad
–
	`maöRec‹dNvID
(
idx
),  ( 
g≠B⁄dRec_t
 ), &
b⁄dRec
 );

796  ( 
b⁄dRec
.
°©eFœgs
 );

798 
	}
}

811 
bSètus_t
 
	$g≠B⁄dMgrGëPublicAddr
–
uöt8
 
idx
, uöt8 *
pAddr
 )

813 
bSètus_t
 
°©
;

814 
g≠B⁄dRec_t
 
b⁄dRec
;

817 i‡–(
idx
 >
GAP_BONDINGS_MAX
Ë|| (
pAddr
 =
NULL
) )

819  ( 
INVALIDPARAMETER
 );

822 
°©
 = 
	`oßl_¢v_ªad
–
	`maöRec‹dNvID
(
idx
),  ( 
g≠B⁄dRec_t
 ), &
b⁄dRec
 );

824 i‡–
°©
 =
SUCCESS
 )

826 
VOID
 
	`oßl_mem˝y
–
pAddr
, 
b⁄dRec
.
publicAddr
, 
KEYLEN
 );

829  ( 
°©
 );

830 
	}
}

843 
uöt8
 
	$g≠B⁄dMgrFödRec⁄√˘Addr
–
uöt8
 *
pRec⁄√˘Addr
 )

846  
uöt8
 
idx
 = 0; idx < 
GAP_BONDINGS_MAX
; idx++ )

848 
g≠B⁄dRec_t
 
b⁄dRec
;

851 i‡–(
	`oßl_¢v_ªad
–
	`maöRec‹dNvID
(
idx
),  ( 
g≠B⁄dRec_t
 ), &
b⁄dRec
 ) =
SUCCESS
)

852 && (
	`oßl_memcmp
–
b⁄dRec
.
ªc⁄√˘Addr
, 
pRec⁄√˘Addr
, 
KEYLEN
 )) )

854  ( 
idx
 );

858  ( 
GAP_BONDINGS_MAX
 );

859 
	}
}

871 
uöt8
 
	$g≠B⁄dMgrFödAddr
–
uöt8
 *
pDevAddr
 )

874  
uöt8
 
idx
 = 0; idx < 
GAP_BONDINGS_MAX
; idx++ )

876 
g≠B⁄dRec_t
 
b⁄dRec
;

879 i‡–(
	`oßl_¢v_ªad
–
	`maöRec‹dNvID
(
idx
),  ( 
g≠B⁄dRec_t
 ), &
b⁄dRec
 ) =
SUCCESS
)

880 && (
	`oßl_memcmp
–
b⁄dRec
.
publicAddr
, 
pDevAddr
, 
B_ADDR_LEN
 )) )

882  ( 
idx
 );

886  ( 
GAP_BONDINGS_MAX
 );

887 
	}
}

899 
uöt8
 
	$g≠B⁄dMgrFödEm±y
( )

902  
uöt8
 
idx
 = 0; idx < 
GAP_BONDINGS_MAX
; idx++ )

904 
g≠B⁄dRec_t
 
b⁄dRec
;

907 i‡–(
	`oßl_¢v_ªad
–
	`maöRec‹dNvID
(
idx
),  ( 
g≠B⁄dRec_t
 ), &
b⁄dRec
 ) =
SUCCESS
)

908 && (
	`oßl_isbuf£t
–
b⁄dRec
.
publicAddr
, 0xFF, 
B_ADDR_LEN
 )) )

910  ( 
idx
 );

914  ( 
GAP_BONDINGS_MAX
 );

915 
	}
}

927 
uöt8
 
	$g≠B⁄dMgrB⁄dTŸÆ
( )

929 
uöt8
 
b⁄ds
 = 0;

932  
uöt8
 
idx
 = 0; idx < 
GAP_BONDINGS_MAX
; idx++ )

934 
g≠B⁄dRec_t
 
b⁄dRec
;

937 i‡–(
	`oßl_¢v_ªad
–
	`maöRec‹dNvID
(
idx
),  ( 
g≠B⁄dRec_t
 ), &
b⁄dRec
 ) =
SUCCESS
)

938 && (
	`oßl_isbuf£t
–
b⁄dRec
.
publicAddr
, 0xFF, 
B_ADDR_LEN
 ) =
FALSE
) )

940 
b⁄ds
++;

944  ( 
b⁄ds
 );

945 
	}
}

957 
bSètus_t
 
	$g≠B⁄dMgrEø£AŒB⁄dögs
( )

959 
bSètus_t
 
°©
 = 
SUCCESS
;

962  
uöt8
 
idx
 = 0; (idx < 
GAP_BONDINGS_MAX
Ë&& (
°©
 =
SUCCESS
); idx++ )

965 
°©
 = 
	`g≠B⁄dMgrEø£B⁄dög
–
idx
 );

969 
	`g≠B⁄dSëupPrivFœg
();

971  ( 
°©
 );

972 
	}
}

984 
bSètus_t
 
	$g≠B⁄dMgrEø£B⁄dög
–
uöt8
 
idx
 )

986 
bSètus_t
 
ªt
;

987 
g≠B⁄dRec_t
 
b⁄dRec
;

988 
g≠B⁄dLTK_t
 
…k
;

990 
VOID
 
	`oßl_mem£t
–&
b⁄dRec
, 0xFF,  ( 
g≠B⁄dRec_t
 ) );

991 
VOID
 
	`oßl_mem£t
–&
…k
, 0xFF,  ( 
g≠B⁄dLTK_t
 ) );

994 
ªt
 = 
	`oßl_¢v_wrôe
–
	`maöRec‹dNvID
(
idx
),  ( 
g≠B⁄dRec_t
 ), &
b⁄dRec
 );

995 
ªt
 |
	`oßl_¢v_wrôe
–
	`loˇlLTKNvID
(
idx
),  ( 
g≠B⁄dLTK_t
 ), &
…k
 );

996 
ªt
 |
	`oßl_¢v_wrôe
–
	`devLTKNvID
(
idx
),  ( 
g≠B⁄dLTK_t
 ), &
…k
 );

997 
ªt
 |
	`oßl_¢v_wrôe
–
	`devIRKNvID
(
idx
), 
KEYLEN
, 
…k
.
LTK
 );

998 
ªt
 |
	`oßl_¢v_wrôe
–
	`devCSRKNvID
(
idx
), 
KEYLEN
, 
…k
.
LTK
 );

999 
ªt
 |
	`oßl_¢v_wrôe
–
	`devSignCou¡îNvID
(
idx
),  ( 
uöt32
 ), 
…k
.
LTK
 );

1002 
	`g≠B⁄dSëupPrivFœg
();

1004  ( 
ªt
 );

1005 
	}
}

1012 
	$GAPB⁄dMgr_Inô
–
uöt8
 
èsk_id
 )

1014 
g≠B⁄dRec_t
 
b⁄dRec
;

1015 
g≠B⁄dMgr_TaskID
 = 
èsk_id
;

1018 i‡–
	`oßl_¢v_ªad
–
	`maöRec‹dNvID
(0),  ( 
g≠B⁄dRec_t
 ), &
b⁄dRec
 ) !
SUCCESS
 )

1022 
VOID
 
	`g≠B⁄dMgrEø£AŒB⁄dögs
();

1026 
VOID
 
	`GAP_SëP¨amVÆue
–
TGAP_AUTH_TASK_ID
, 
g≠B⁄dMgr_TaskID
 );

1029 
	`g≠B⁄dSëupPrivFœg
();

1030 
	}
}

1037 
uöt16
 
	$GAPB⁄dMgr_Pro˚ssEvít
–
uöt8
 
èsk_id
, 
uöt16
 
evíts
 )

1039 
VOID
 
èsk_id
;

1041 i‡–
evíts
 & 
SYS_EVENT_MSG
 )

1043 
uöt8
 *
pMsg
;

1045 i‡–(
pMsg
 = 
	`oßl_msg_ª˚ive
–
g≠B⁄dMgr_TaskID
 )Ë!
NULL
 )

1047 
	`g≠B⁄dMgr_Pro˚ssOSALMsg
–(
oßl_evít_hdr_t
 *)
pMsg
 );

1050 
VOID
 
	`oßl_msg_dóŒoˇã
–
pMsg
 );

1054  (
evíts
 ^ 
SYS_EVENT_MSG
);

1059 
	}
}

1070 
	$g≠B⁄dMgr_Pro˚ssOSALMsg
–
oßl_evít_hdr_t
 *
pMsg
 )

1072  
pMsg
->
evít
 )

1074 
GAP_MSG_EVENT
:

1075 
	`g≠B⁄dMgr_Pro˚ssGAPMsg
–(
g≠EvítHdr_t
 *)
pMsg
 );

1078 
GATT_MSG_EVENT
:

1079 
	`g≠B⁄dMgr_Pro˚ssGATTMsg
–(
g©tMsgEvít_t
 *)
pMsg
 );

1085 
	}
}

1096 
	$g≠B⁄dMgr_Pro˚ssGAPMsg
–
g≠EvítHdr_t
 *
pMsg
 )

1098  
pMsg
->
›code
 )

1100 
GAP_PASSKEY_NEEDED_EVENT
:

1102 
g≠PasskeyNìdedEvít_t
 *
pPkt
 = (g≠PasskeyNìdedEvít_à*)
pMsg
;

1104 i‡–
pG≠B⁄dCB
 &&ÖG≠B⁄dCB->
∑sscodeCB
 )

1107 
pG≠B⁄dCB
->
	`∑sscodeCB
–
pPkt
->
devi˚Addr
,ÖPkt->
c⁄√˘i⁄H™dÀ
,ÖPkt->
uiI≈uts
,ÖPkt->
uiOuçuts
 );

1112 i‡–
	`GAP_PasscodeUpd©e
–
g≠B⁄d_Passcode
, 
pPkt
->
c⁄√˘i⁄H™dÀ
 ) !
SUCCESS
 )

1114 
VOID
 
	`GAP_Tîmö©eAuth
–
pPkt
->
c⁄√˘i⁄H™dÀ
, 
SMP_PAIRING_FAILED_PASSKEY_ENTRY_FAILED
 );

1120 
GAP_AUTHENTICATION_COMPLETE_EVENT
:

1122 
g≠AuthCom∂ëeEvít_t
 *
pPkt
 = (g≠AuthCom∂ëeEvít_à*)
pMsg
;

1125 i‡–(
pPkt
->
hdr
.
°©us
 =
SUCCESS
Ë&& (pPkt->
authSèã
 & 
SM_AUTH_STATE_BONDING
) )

1127 
g≠B⁄dRec_t
 
b⁄dRec
;

1129 
VOID
 
	`oßl_mem£t
–&
b⁄dRec
, 0,  ( 
g≠B⁄dRec_t
 ) ) ;

1132 i‡–
pPkt
->
pIdítôyInfo
 )

1134 
VOID
 
	`oßl_mem˝y
–
b⁄dRec
.
publicAddr
, 
pPkt
->
pIdítôyInfo
->
bd_addr
, 
B_ADDR_LEN
 );

1138 
lökDBIãm_t
 *
pLökIãm
 = 
	`lökDB_Föd
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

1139 i‡–
pLökIãm
 )

1141 
VOID
 
	`oßl_mem˝y
–
b⁄dRec
.
publicAddr
, 
pLökIãm
->
addr
, 
B_ADDR_LEN
 );

1151 
b⁄dRec
.
°©eFœgs
 |(
pPkt
->
authSèã
 & 
SM_AUTH_STATE_AUTHENTICATED
Ë? 
GAP_BONDED_STATE_AUTHENTICATED
 : 0;

1153 
VOID
 
	`g≠B⁄dMgrAddB⁄d
–&
b⁄dRec
,

1154 (
g≠B⁄dLTK_t
 *)
pPkt
->
pSecurôyInfo
,

1155 (
g≠B⁄dLTK_t
 *)
pPkt
->
pDevSecInfo
,

1156 ((
uöt8
 *)((
pPkt
->
pIdítôyInfo
Ë?ÖPkt->pIdítôyInfo->
úk
 : 
NULL
 )),

1157 ((
uöt8
 *)((
pPkt
->
pSignögInfo
Ë?ÖPkt->pSignögInfo->
§k
 : 
NULL
 )),

1158 ((
uöt32
)((
pPkt
->
pSignögInfo
Ë?ÖPkt->pSignögInfo->
signCou¡î
 : 
GAP_INIT_SIGN_COUNTER
 )) );

1163 i‡–
pG≠B⁄dCB
 &&ÖG≠B⁄dCB->
∑úSèãCB
 )

1165 
pG≠B⁄dCB
->
	`∑úSèãCB
–
GAPBOND_PAIRING_STATE_COMPLETE
, 
pPkt
->
hdr
.
°©us
 );

1170 
GAP_BOND_COMPLETE_EVENT
:

1174 i‡–
pG≠B⁄dCB
 &&ÖG≠B⁄dCB->
∑úSèãCB
 && 
pMsg
->
hdr
.
°©us
 =
SUCCESS
 )

1176 
pG≠B⁄dCB
->
	`∑úSèãCB
–
GAPBOND_PAIRING_STATE_BONDED
, 
pMsg
->
hdr
.
°©us
 );

1180 
GAP_SIGNATURE_UPDATED_EVENT
:

1182 
uöt8
 
idx
;

1183 
g≠SignUpd©eEvít_t
 *
pPkt
 = (g≠SignUpd©eEvít_à*)
pMsg
;

1185 
idx
 = 
	`GAPB⁄dMgr_ResﬁveAddr
–
pPkt
->
addrTy≥
,ÖPkt->
devAddr
, 
NULL
 );

1186 i‡–
idx
 < 
GAP_BONDINGS_MAX
 )

1189 
VOID
 
	`oßl_¢v_wrôe
–
	`devSignCou¡îNvID
(
idx
),  ( 
uöt32
 ), &(
pPkt
->
signCou¡î
) );

1194 
GAP_PAIRING_REQ_EVENT
:

1196 
g≠PaúögReqEvít_t
 *
pPkt
 = (g≠PaúögReqEvít_à*)
pMsg
;

1198 i‡–
g≠B⁄d_AutoFaû
 !
FALSE
 )

1201 
VOID
 
	`GAP_Tîmö©eAuth
–
pPkt
->
c⁄√˘i⁄H™dÀ
, 
g≠B⁄d_AutoFaûRós⁄
 );

1203 i‡–
g≠B⁄d_PaúögMode
 =
GAPBOND_PAIRING_MODE_NO_PAIRING
 )

1206 
VOID
 
	`GAP_Tîmö©eAuth
–
pPkt
->
c⁄√˘i⁄H™dÀ
, 
SMP_PAIRING_FAILED_NOT_SUPPORTED
 );

1210 
g≠AuthP¨ams_t
 
∑øms
;

1211 
lökDBIãm_t
 *
pLökIãm
 = 
	`lökDB_Föd
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

1214 i‡–
pPkt
->
∑úReq
.
authReq
 & 
SM_AUTH_STATE_BONDING
 )

1216 i‡–
pLökIãm
 )

1218 i‡–(
pLökIãm
->
addrTy≥
 !
ADDRTYPE_PUBLIC
Ë&& (
pPkt
->
∑úReq
.
keyDi°
.
mIdKey
 =
FALSE
) )

1220 
uöt8
 
publicAddr
[
B_ADDR_LEN
];

1223 i‡–
	`GAPB⁄dMgr_ResﬁveAddr
(
pLökIãm
->
addrTy≥
,ÖLökIãm->
addr
, 
publicAddr
 ) =
FALSE
 )

1226 
VOID
 
	`GAP_Tîmö©eAuth
–
pPkt
->
c⁄√˘i⁄H™dÀ
, 
SMP_PAIRING_FAILED_AUTH_REQ
 );

1238 
VOID
 
	`oßl_mem£t
–&
∑øms
, 0,  ( 
g≠AuthP¨ams_t
 ) );

1241 
∑øms
.
c⁄√˘i⁄H™dÀ
 = 
pPkt
->connectionHandle;

1242 
∑øms
.
£cReqs
.
ioC≠s
 = 
g≠B⁄d_IOC≠
;

1243 
∑øms
.
£cReqs
.
oobAvaûabÀ
 = 
g≠B⁄d_OOBD©aFœg
;

1244 
∑øms
.
£cReqs
.
maxEncKeySize
 = 
g≠B⁄d_KeySize
;

1247 
∑øms
.
£cReqs
.
keyDi°
.
sEncKey
 = (
g≠B⁄d_KeyDi°Li°
 | 
GAPBOND_KEYDIST_SENCKEY
Ë? 
TRUE
 : 
FALSE
;

1248 
∑øms
.
£cReqs
.
keyDi°
.
sIdKey
 = (
g≠B⁄d_KeyDi°Li°
 | 
GAPBOND_KEYDIST_SIDKEY
Ë? 
TRUE
 : 
FALSE
;

1249 
∑øms
.
£cReqs
.
keyDi°
.
mEncKey
 = (
g≠B⁄d_KeyDi°Li°
 | 
GAPBOND_KEYDIST_MENCKEY
Ë? 
TRUE
 : 
FALSE
;

1250 
∑øms
.
£cReqs
.
keyDi°
.
mIdKey
 = (
g≠B⁄d_KeyDi°Li°
 | 
GAPBOND_KEYDIST_MIDKEY
Ë? 
TRUE
 : 
FALSE
;

1251 
∑øms
.
£cReqs
.
keyDi°
.
mSign
 = (
g≠B⁄d_KeyDi°Li°
 | 
GAPBOND_KEYDIST_MSIGN
Ë? 
TRUE
 : 
FALSE
;

1252 
∑øms
.
£cReqs
.
keyDi°
.
sSign
 = (
g≠B⁄d_KeyDi°Li°
 | 
GAPBOND_KEYDIST_SSIGN
Ë? 
TRUE
 : 
FALSE
;

1255 i‡–
g≠B⁄d_OOBD©aFœg
 )

1257 
VOID
 
	`oßl_mem˝y
–
∑øms
.
£cReqs
.
oob
, 
g≠B⁄d_OOBD©a
, 
KEYLEN
 );

1260 i‡–(
pPkt
->
∑úReq
.
authReq
 & 
SM_AUTH_STATE_BONDING
Ë&& (
g≠B⁄d_B⁄dög
) )

1262 
∑øms
.
£cReqs
.
authReq
 |
SM_AUTH_STATE_BONDING
;

1263 i‡–
pLökIãm
->
addrTy≥
 !
ADDRTYPE_PUBLIC
 )

1266 
∑øms
.
£cReqs
.
keyDi°
.
mIdKey
 = 
TRUE
;

1271 i‡–
g≠B⁄d_MITM
 )

1273 
∑øms
.
£cReqs
.
authReq
 |
SM_AUTH_STATE_AUTHENTICATED
;

1276 
VOID
 
	`GAP_Authítiˇã
–&
∑øms
, &(
pPkt
->
∑úReq
) );

1280 i‡–
pG≠B⁄dCB
 &&ÖG≠B⁄dCB->
∑úSèãCB
 )

1282 
pG≠B⁄dCB
->
	`∑úSèãCB
–
GAPBOND_PAIRING_STATE_STARTED
, 
pPkt
->
hdr
.
°©us
 );

1290 
	}
}

1302 
uöt8
 
	$GAPB⁄dMgr_CheckNVLí
–
uöt8
 
id
, uöt8 
Àn
 )

1304 
uöt8
 
°©
 = 
FAILURE
;

1307  (
id
 - 
BLE_NVID_GAP_BOND_START
Ë% 
GAP_BOND_REC_IDS
 )

1309 
GAP_BOND_REC_ID_OFFSET
:

1310 i‡–
Àn
 = ( 
g≠B⁄dRec_t
 ) )

1312 
°©
 = 
SUCCESS
;

1316 
GAP_BOND_LOCAL_LTK_OFFSET
:

1317 
GAP_BOND_DEV_LTK_OFFSET
:

1318 i‡–
Àn
 = ( 
g≠B⁄dLTK_t
 ) )

1320 
°©
 = 
SUCCESS
;

1324 
GAP_BOND_DEV_IRK_OFFSET
:

1325 
GAP_BOND_DEV_CSRK_OFFSET
:

1326 i‡–
Àn
 =
KEYLEN
 )

1328 
°©
 = 
SUCCESS
;

1332 
GAP_BOND_DEV_SIGN_COUNTER_OFFSET
:

1333 i‡–
Àn
 = ( 
uöt32
 ) )

1335 
°©
 = 
SUCCESS
;

1340  ( 
°©
 );

1341 
	}
}

1352 
	$g≠B⁄dMgr_Pro˚ssGATTMsg
–
g©tMsgEvít_t
 *
pMsg
 )

1355  
pMsg
->
mëhod
 )

1357 
ATT_HANDLE_VALUE_CFM
:

1359 
VOID
 
	`GAPB⁄dMgr_Sîvi˚Ch™geInd
–
pMsg
->
c⁄nH™dÀ
, 0x00 );

1366 
	}
}

1377 
	$g≠B⁄dMgrSídSîvi˚Ch™ge
–
lökDBIãm_t
 *
pLökIãm
 )

1379 
VOID
 
	`GATT_Sîvi˚Ch™gedInd
–
pLökIãm
->
c⁄√˘i⁄H™dÀ
, 
g≠B⁄dMgr_TaskID
 );

1380 
	}
}

1391 
	$g≠B⁄dSëupPrivFœg
( )

1393 
uöt8
 
¥ivFœgPr›
;

1395 i‡–
	`g≠B⁄dMgrB⁄dTŸÆ
() > 1 )

1397 
¥ivFœgPr›
 = 
GATT_PROP_READ
;

1401 
¥ivFœgPr›
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

1405 
	`GGS_SëP¨amëî
–
GGS_PERI_PRIVACY_FLAG_PROPS
,  ( 
uöt8
 ), &
¥ivFœgPr›
 );

1406 
	}
}

	@../../Profiles/Roles/gapperiphbondmgr.h

56 #i‚de‡
GAPPERIPHBONDMGR_H


57 
	#GAPPERIPHBONDMGR_H


	)

59 #ifde‡
__˝lu•lus


67 
	~"g≠.h
"

73 #i‡!
deföed
 ( 
GAP_BONDINGS_MAX
 )

74 
	#GAP_BONDINGS_MAX
 10

76 

	)

86 
	#GAPBOND_PAIRING_MODE
 0x400

87 
	#GAPBOND_INITIATE_WAIT
 0x401

88 
	#GAPBOND_MITM_PROTECTION
 0x402

89 
	#GAPBOND_IO_CAPABILITIES
 0x403

90 
	#GAPBOND_OOB_ENABLED
 0x404

91 
	#GAPBOND_OOB_DATA
 0x405

92 
	#GAPBOND_BONDING_ENABLED
 0x406

93 
	#GAPBOND_KEY_DIST_LIST
 0x407

94 
	#GAPBOND_DEFAULT_PASSCODE
 0x408

95 
	#GAPBOND_ERASE_ALLBONDS
 0x409

96 
	#GAPBOND_AUTO_FAIL_PAIRING
 0x40A

97 
	#GAPBOND_AUTO_FAIL_REASON
 0x40B

98 
	#GAPBOND_KEYSIZE
 0x40C

99 

	)

104 
	#GAPBOND_PAIRING_MODE_NO_PAIRING
 0x00

105 
	#GAPBOND_PAIRING_MODE_WAIT_FOR_REQ
 0x01

106 
	#GAPBOND_PAIRING_MODE_INITIATE
 0x02

107 

	)

112 
	#GAPBOND_IO_CAP_DISPLAY_ONLY
 0x00

113 
	#GAPBOND_IO_CAP_DISPLAY_YES_NO
 0x01

114 
	#GAPBOND_IO_CAP_KEYBOARD_ONLY
 0x02

115 
	#GAPBOND_IO_CAP_NO_INPUT_NO_OUTPUT
 0x03

116 
	#GAPBOND_IO_CAP_KEYBOARD_DISPLAY
 0x04

117 

	)

122 
	#GAPBOND_KEYDIST_SENCKEY
 0x01

123 
	#GAPBOND_KEYDIST_SIDKEY
 0x02

124 
	#GAPBOND_KEYDIST_SSIGN
 0x04

125 
	#GAPBOND_KEYDIST_MENCKEY
 0x08

126 
	#GAPBOND_KEYDIST_MIDKEY
 0x10

127 
	#GAPBOND_KEYDIST_MSIGN
 0x20

128 

	)

134 
	#GAPBOND_PAIRING_STATE_STARTED
 0x00

135 
	#GAPBOND_PAIRING_STATE_COMPLETE
 0x01

136 
	#GAPBOND_PAIRING_STATE_BONDED
 0x02

137 

	)

142 
	#SMP_PAIRING_FAILED_PASSKEY_ENTRY_FAILED
 0x01

143 
	#SMP_PAIRING_FAILED_OOB_NOT_AVAIL
 0x02

144 
	#SMP_PAIRING_FAILED_AUTH_REQ
 0x03

145 
	#SMP_PAIRING_FAILED_CONFIRM_VALUE
 0x04

146 
	#SMP_PAIRING_FAILED_NOT_SUPPORTED
 0x05

147 
	#SMP_PAIRING_FAILED_ENC_KEY_SIZE
 0x06

148 
	#SMP_PAIRING_FAILED_CMD_NOT_SUPPORTED
 0x07

149 
	#SMP_PAIRING_FAILED_UNSPECIFIED
 0x08

150 
	#SMP_PAIRING_FAILED_REPEATED_ATTEMPTS
 0x09

151 

	)

156 (*
p‚PasscodeCB_t
)

158 
	tuöt8
 *
	tdevi˚Addr
,

159 
	tuöt16
 
	tc⁄√˘i⁄H™dÀ
,

160 
	tuöt8
 
	tuiI≈uts
,

161 
	tuöt8
 
	tuiOuçuts


164 (*
p‚PaúSèãCB_t
)

166 
	tuöt8
 
	t°©e
,

167 
	tuöt8
 
	t°©us


175 
p‚PasscodeCB_t
 
∑sscodeCB
;

176 
p‚PaúSèãCB_t
 
∑úSèãCB
;

177 } 
	tg≠B⁄dCBs_t
;

210 
bSètus_t
 
GAPB⁄dMgr_SëP¨amëî
–
uöt16
 
∑øm
, 
uöt8
 
Àn
, *
pVÆue
 );

227 
bSètus_t
 
GAPB⁄dMgr_GëP¨amëî
–
uöt16
 
∑øm
, *
pVÆue
 );

241 
bSètus_t
 
GAPB⁄dMgr_LökE°
–
uöt8
 
addrTy≥
, uöt8 *
pDevAddr
, 
uöt16
 
c⁄nH™dÀ
 );

253 
uöt8
 
GAPB⁄dMgr_ResﬁveAddr
–uöt8 
addrTy≥
, uöt8 *
pDevAddr
, uöt8 *
pResﬁvedAddr
 );

266 
bSètus_t
 
GAPB⁄dMgr_Sîvi˚Ch™geInd
–
uöt16
 
c⁄√˘i⁄H™dÀ
, 
uöt8
 
£tP¨am
 );

278 
GAPB⁄dMgr_Regi°î
–
g≠B⁄dCBs_t
 *
pCB
 );

291 
bSètus_t
 
GAPB⁄dMgr_PasscodeR•
–
uöt16
 
c⁄√˘i⁄H™dÀ
, 
uöt8
 
°©us
, 
uöt32
 
∑sscode
 );

304 
g≠B⁄dMgr_Pro˚ssGAPMsg
–
g≠EvítHdr_t
 *
pMsg
 );

314 
uöt8
 
GAPB⁄dMgr_CheckNVLí
–uöt8 
id
, uöt8 
Àn
 );

340 
GAPB⁄dMgr_Inô
–
uöt8
 
èsk_id
 );

356 
uöt16
 
GAPB⁄dMgr_Pro˚ssEvít
–
uöt8
 
èsk_id
, uöt16 
evíts
 );

361 #ifde‡
__˝lu•lus


	@../../Profiles/Roles/observer.c

43 
	~"bcomdef.h
"

44 
	~"OSAL.h
"

45 
	~"oßl_cbTimî.h
"

46 
	~"oßl_¢v.h
"

47 
	~"hci_é.h
"

48 
	~"g≠.h
"

50 
	~"ob£rvî.h
"

81 
uöt8
 
	gg≠Ob£rvîRﬁeTaskId
;

84 
g≠Ob£rvîRﬁeCB_t
 *
	gpG≠Ob£rvîRﬁeCB
;

91 
uöt8
 
	gg≠Ob£rvîRﬁeBdAddr
[
B_ADDR_LEN
];

92 
uöt8
 
	gg≠Ob£rvîRﬁeMaxSˇnRes
 = 0;

97 
g≠Ob£rvîRﬁe_Pro˚ssOSALMsg
–
oßl_evít_hdr_t
 *
pMsg
 );

98 
g≠Ob£rvîRﬁe_Pro˚ssGAPMsg
–
g≠EvítHdr_t
 *
pMsg
 );

110 
bSètus_t
 
	$GAPOb£rvîRﬁe_SèπDevi˚
–
g≠Ob£rvîRﬁeCB_t
 *
pAµCÆlbacks
 )

112 i‡–
pAµCÆlbacks
 )

114 
pG≠Ob£rvîRﬁeCB
 = 
pAµCÆlbacks
;

117  
	`GAP_Devi˚Inô
–
g≠Ob£rvîRﬁeTaskId
, 
GAP_PROFILE_OBSERVER
,

118 
g≠Ob£rvîRﬁeMaxSˇnRes
, 
NULL
, NULL, NULL );

119 
	}
}

126 
bSètus_t
 
	$GAPOb£rvîRﬁe_SëP¨amëî
–
uöt16
 
∑øm
, 
uöt8
 
Àn
, *
pVÆue
 )

128 
bSètus_t
 
ªt
 = 
SUCCESS
;

130  
∑øm
 )

132 
GAPOBSERVERROLE_MAX_SCAN_RES
:

133 i‡–
Àn
 = ( 
uöt8
 ) )

135 
g≠Ob£rvîRﬁeMaxSˇnRes
 = *((
uöt8
*)
pVÆue
);

139 
ªt
 = 
bÀInvÆidR™ge
;

144 
ªt
 = 
INVALIDPARAMETER
;

148  
ªt
;

149 
	}
}

156 
bSètus_t
 
	$GAPOb£rvîRﬁe_GëP¨amëî
–
uöt16
 
∑øm
, *
pVÆue
 )

158 
bSètus_t
 
ªt
 = 
SUCCESS
;

160  
∑øm
 )

162 
GAPOBSERVERROLE_BD_ADDR
:

163 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠Ob£rvîRﬁeBdAddr
, 
B_ADDR_LEN
 ) ;

166 
GAPOBSERVERROLE_MAX_SCAN_RES
:

167 *((
uöt8
*)
pVÆue
Ë
g≠Ob£rvîRﬁeMaxSˇnRes
;

171 
ªt
 = 
INVALIDPARAMETER
;

175  
ªt
;

176 
	}
}

183 
bSètus_t
 
	$GAPOb£rvîRﬁe_SèπDiscovîy
–
uöt8
 
mode
, uöt8 
a˘iveSˇn
, uöt8 
whôeLi°
 )

185 
g≠DevDiscReq_t
 
∑øms
;

187 
∑øms
.
èskID
 = 
g≠Ob£rvîRﬁeTaskId
;

188 
∑øms
.
mode
 = mode;

189 
∑øms
.
a˘iveSˇn
 =áctiveScan;

190 
∑øms
.
whôeLi°
 = whiteList;

192  
	`GAP_Devi˚DiscovîyReque°
–&
∑øms
 );

193 
	}
}

200 
bSètus_t
 
	$GAPOb£rvîRﬁe_C™˚lDiscovîy
( )

202  
	`GAP_Devi˚DiscovîyC™˚l
–
g≠Ob£rvîRﬁeTaskId
 );

203 
	}
}

212 
	$GAPOb£rvîRﬁe_Inô
–
uöt8
 
èskId
 )

214 
g≠Ob£rvîRﬁeTaskId
 = 
èskId
;

217 
	`GAP_Regi°îF‹HCIMsgs
–
èskId
 );

218 
	}
}

228 
uöt16
 
	$GAPOb£rvîRﬁe_Pro˚ssEvít
–
uöt8
 
èskId
, 
uöt16
 
evíts
 )

230 i‡–
evíts
 & 
SYS_EVENT_MSG
 )

232 
uöt8
 *
pMsg
;

234 i‡–(
pMsg
 = 
	`oßl_msg_ª˚ive
–
g≠Ob£rvîRﬁeTaskId
 )Ë!
NULL
 )

236 
	`g≠Ob£rvîRﬁe_Pro˚ssOSALMsg
–(
oßl_evít_hdr_t
 *Ë
pMsg
 );

239 
VOID
 
	`oßl_msg_dóŒoˇã
–
pMsg
 );

243  (
evíts
 ^ 
SYS_EVENT_MSG
);

248 
	}
}

259 
	$g≠Ob£rvîRﬁe_Pro˚ssOSALMsg
–
oßl_evít_hdr_t
 *
pMsg
 )

261  
pMsg
->
evít
 )

263 
HCI_GAP_EVENT_EVENT
:

264 i‡–
pMsg
->
°©us
 =
HCI_COMMAND_COMPLETE_EVENT_CODE
 )

270 
GAP_MSG_EVENT
:

271 
	`g≠Ob£rvîRﬁe_Pro˚ssGAPMsg
–(
g≠EvítHdr_t
 *Ë
pMsg
 );

277 
	}
}

288 
	$g≠Ob£rvîRﬁe_Pro˚ssGAPMsg
–
g≠EvítHdr_t
 *
pMsg
 )

290  
pMsg
->
›code
 )

292 
GAP_DEVICE_INIT_DONE_EVENT
:

294 
g≠Devi˚InôD⁄eEvít_t
 *
pPkt
 = (g≠Devi˚InôD⁄eEvít_à*Ë
pMsg
;

296 i‡–
pPkt
->
hdr
.
°©us
 =
SUCCESS
 )

299 
VOID
 
	`oßl_mem˝y
–
g≠Ob£rvîRﬁeBdAddr
, 
pPkt
->
devAddr
, 
B_ADDR_LEN
 );

309 i‡–
pG≠Ob£rvîRﬁeCB
 &&ÖG≠Ob£rvîRﬁeCB->
evítCB
 )

311 
pG≠Ob£rvîRﬁeCB
->
	`evítCB
–(
g≠Ob£rvîRﬁeEvít_t
 *Ë
pMsg
 );

313 
	}
}

	@../../Profiles/Roles/observer.h

41 #i‚de‡
OBSERVER_H


42 
	#OBSERVER_H


	)

44 #ifde‡
__˝lu•lus


52 
	~"bcomdef.h
"

53 
	~"OSAL.h
"

54 
	~"g≠.h
"

63 
	#GAPOBSERVERROLE_BD_ADDR
 0x400

64 
	#GAPOBSERVERROLE_MAX_SCAN_RES
 0x401

65 

	)

84 
g≠EvítHdr_t
 
g≠
;

85 
g≠Devi˚InôD⁄eEvít_t
 
öôD⁄e
;

86 
g≠Devi˚InfoEvít_t
 
devi˚Info
;

87 
g≠DevDiscEvít_t
 
discCm∂
;

88 } 
	tg≠Ob£rvîRﬁeEvít_t
;

93 (*
p‚G≠Ob£rvîRﬁeRssiCB_t
)

95 
	tuöt16
 
	tc⁄nH™dÀ
,

96 
	töt8
 
	trssi


102 (*
p‚G≠Ob£rvîRﬁeEvítCB_t
)

104 
	tg≠Ob£rvîRﬁeEvít_t
 *
	tpEvít


112 
p‚G≠Ob£rvîRﬁeRssiCB_t
 
rssiCB
;

113 
p‚G≠Ob£rvîRﬁeEvítCB_t
 
evítCB
;

114 } 
	tg≠Ob£rvîRﬁeCB_t
;

143 
bSètus_t
 
GAPOb£rvîRﬁe_SèπDevi˚
–
g≠Ob£rvîRﬁeCB_t
 *
pAµCÆlbacks
 );

157 
bSètus_t
 
GAPOb£rvîRﬁe_SëP¨amëî
–
uöt16
 
∑øm
, 
uöt8
 
Àn
, *
pVÆue
 );

168 
bSètus_t
 
GAPOb£rvîRﬁe_GëP¨amëî
–
uöt16
 
∑øm
, *
pVÆue
 );

181 
bSètus_t
 
GAPOb£rvîRﬁe_SèπDiscovîy
–
uöt8
 
mode
, uöt8 
a˘iveSˇn
, uöt8 
whôeLi°
 );

190 
bSètus_t
 
GAPOb£rvîRﬁe_C™˚lDiscovîy
( );

209 
GAPOb£rvîRﬁe_Inô
–
uöt8
 
èskId
 );

221 
uöt16
 
GAPOb£rvîRﬁe_Pro˚ssEvít
–
uöt8
 
èskId
, uöt16 
evíts
 );

226 #ifde‡
__˝lu•lus


	@../../Profiles/Roles/peripheral.c

43 
	~"bcomdef.h
"

44 
	~"OSAL.h
"

45 
	~"hci_é.h
"

46 
	~"l2ˇp.h
"

47 
	~"g≠.h
"

48 
	~"lökdb.h
"

49 
	~"©t.h
"

50 
	~"g©t.h
"

51 
	~"oßl_¢v.h
"

53 
	~"≥rùhîÆ.h
"

54 
	~"g≠b⁄dmgr.h
"

64 
	#START_ADVERTISING_EVT
 0x0001

65 
	#RSSI_READ_EVT
 0x0002

66 
	#START_CONN_UPDATE_EVT
 0x0004

67 
	#CONN_PARAM_TIMEOUT_EVT
 0x0008

68 

	)

69 
	#DEFAULT_ADVERT_OFF_TIME
 30000

70 

	)

71 
	#RSSI_NOT_AVAILABLE
 127

	)

73 
	#DEFAULT_MIN_CONN_INTERVAL
 0x0006

74 
	#DEFAULT_MAX_CONN_INTERVAL
 0x0C80

75 

	)

76 
	#MIN_CONN_INTERVAL
 0x0006

	)

77 
	#MAX_CONN_INTERVAL
 0x0C80

	)

79 
	#DEFAULT_TIMEOUT_MULTIPLIER
 1000

	)

81 
	#CONN_INTERVAL_MULTIPLIER
 6

	)

83 
	#MIN_SLAVE_LATENCY
 0

	)

84 
	#MAX_SLAVE_LATENCY
 500

	)

86 
	#MIN_TIMEOUT_MULTIPLIER
 0x000a

	)

87 
	#MAX_TIMEOUT_MULTIPLIER
 0x0c80

	)

89 
	#MAX_TIMEOUT_VALUE
 0xFFFF

	)

110 
uöt8
 
	gg≠Rﬁe_TaskID
;

112 
g≠rﬁe_Sèãs_t
 
	gg≠Rﬁe_°©e
;

119 
uöt8
 
	gg≠Rﬁe_¥ofûeRﬁe
;

120 
uöt8
 
	gg≠Rﬁe_IRK
[
KEYLEN
];

121 
uöt8
 
	gg≠Rﬁe_SRK
[
KEYLEN
];

122 
uöt32
 
	gg≠Rﬁe_signCou¡î
;

123 
uöt8
 
	gg≠Rﬁe_bdAddr
[
B_ADDR_LEN
];

124 
uöt8
 
	gg≠Rﬁe_AdvE«bÀd
 = 
TRUE
;

125 
uöt16
 
	gg≠Rﬁe_AdvîtOffTime
 = 
DEFAULT_ADVERT_OFF_TIME
;

126 
uöt8
 
	gg≠Rﬁe_AdvîtD©aLí
 = 3;

127 
uöt8
 
	gg≠Rﬁe_AdvîtD©a
[
B_MAX_ADV_LEN
] =

130 
GAP_ADTYPE_FLAGS
,

132 (
GAP_ADTYPE_FLAGS_GENERAL
 | 
GAP_ADTYPE_FLAGS_BREDR_NOT_SUPPORTED
),

135 
uöt8
 
	gg≠Rﬁe_SˇnR•D©aLí
 = 0;

136 
uöt8
 
	gg≠Rﬁe_SˇnR•D©a
[
B_MAX_ADV_LEN
] = {0};

137 
uöt8
 
	gg≠Rﬁe_AdvEvítTy≥
;

138 
uöt8
 
	gg≠Rﬁe_AdvDúe˘Ty≥
;

139 
uöt8
 
	gg≠Rﬁe_AdvDúe˘Addr
[
B_ADDR_LEN
] = {0};

140 
uöt8
 
	gg≠Rﬁe_AdvCh™M≠
;

141 
uöt8
 
	gg≠Rﬁe_AdvFûãrPﬁicy
;

143 
uöt16
 
	gg≠Rﬁe_C⁄√˘i⁄H™dÀ
 = 
INVALID_CONNHANDLE
;

144 
uöt16
 
	gg≠Rﬁe_RSSIRódR©e
 = 0;

146 
uöt8
 
	gg≠Rﬁe_C⁄√˘edDevAddr
[
B_ADDR_LEN
] = {0};

148 
uöt8
 
	gg≠Rﬁe_P¨amUpd©eE«bÀ
 = 
FALSE
;

149 
uöt16
 
	gg≠Rﬁe_MöC⁄nI¡îvÆ
 = 
DEFAULT_MIN_CONN_INTERVAL
;

150 
uöt16
 
	gg≠Rﬁe_MaxC⁄nI¡îvÆ
 = 
DEFAULT_MAX_CONN_INTERVAL
;

151 
uöt16
 
	gg≠Rﬁe_SœveL©ícy
 = 
MIN_SLAVE_LATENCY
;

152 
uöt16
 
	gg≠Rﬁe_TimeoutMu…ùlõr
 = 
DEFAULT_TIMEOUT_MULTIPLIER
;

154 
uöt16
 
	gg≠Rﬁe_C⁄nI¡îvÆ
 = 0;

155 
uöt16
 
	gg≠Rﬁe_C⁄nSœveL©ícy
 = 0;

156 
uöt16
 
	gg≠Rﬁe_C⁄nTimeout
 = 0;

158 
uöt8
 
	g∑ømUpd©eNoSuc˚ssO±i⁄
 = 
GAPROLE_NO_ACTION
;

161 
g≠RﬁesCBs_t
 *
	gpG≠Rﬁes_AµCGs
 = 
NULL
;

162 
g≠RﬁesP¨amUpd©eCB_t
 *
	gpG≠Rﬁes_P¨amUpd©eCB
 = 
NULL
;

175 
g≠Rﬁe_Pro˚ssOSALMsg
–
oßl_evít_hdr_t
 *
pMsg
 );

176 
g≠Rﬁe_Pro˚ssGAPMsg
–
g≠EvítHdr_t
 *
pMsg
 );

177 
g≠Rﬁe_SëupGAP
( );

178 
g≠Rﬁe_H™dÀP¨amUpd©eNoSuc˚ss
( );

179 
g≠Rﬁe_°¨tC⁄nUpd©e
–
uöt8
 
h™dÀFaûuª
 );

194 
bSètus_t
 
	$GAPRﬁe_SëP¨amëî
–
uöt16
 
∑øm
, 
uöt8
 
Àn
, *
pVÆue
 )

196 
bSètus_t
 
ªt
 = 
SUCCESS
;

197  
∑øm
 )

199 
GAPROLE_IRK
:

200 i‡–
Àn
 =
KEYLEN
 )

202 
VOID
 
	`oßl_mem˝y
–
g≠Rﬁe_IRK
, 
pVÆue
, 
KEYLEN
 ) ;

206 
ªt
 = 
bÀInvÆidR™ge
;

210 
GAPROLE_SRK
:

211 i‡–
Àn
 =
KEYLEN
 )

213 
VOID
 
	`oßl_mem˝y
–
g≠Rﬁe_SRK
, 
pVÆue
, 
KEYLEN
 ) ;

217 
ªt
 = 
bÀInvÆidR™ge
;

221 
GAPROLE_SIGNCOUNTER
:

222 i‡–
Àn
 = ( 
uöt32
 ) )

224 
g≠Rﬁe_signCou¡î
 = *((
uöt32
*)
pVÆue
);

228 
ªt
 = 
bÀInvÆidR™ge
;

232 
GAPROLE_ADVERT_ENABLED
:

233 i‡–
Àn
 =–
uöt8
 ) )

235 
uöt8
 
ﬁdAdvE«bÀd
 = 
g≠Rﬁe_AdvE«bÀd
;

236 
g≠Rﬁe_AdvE«bÀd
 = *((
uöt8
*)
pVÆue
);

238 i‡–(
ﬁdAdvE«bÀd
Ë&& (
g≠Rﬁe_AdvE«bÀd
 =
FALSE
) )

241 i‡––
g≠Rﬁe_°©e
 =
GAPROLE_ADVERTISING
 )

242 || ( 
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED_ADV
 )

243 || ( 
g≠Rﬁe_°©e
 =
GAPROLE_WAITING_AFTER_TIMEOUT
 ) )

245 
VOID
 
	`GAP_EndDiscovîabÀ
–
g≠Rﬁe_TaskID
 );

248 i‡–(
ﬁdAdvE«bÀd
 =
FALSE
Ë&& (
g≠Rﬁe_AdvE«bÀd
) )

251 i‡–(
g≠Rﬁe_°©e
 =
GAPROLE_STARTED
)

252 || (
g≠Rﬁe_°©e
 =
GAPROLE_WAITING
)

253 || (
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED
)

254 || (
g≠Rﬁe_°©e
 =
GAPROLE_WAITING_AFTER_TIMEOUT
) )

256 
VOID
 
	`oßl_£t_evít
–
g≠Rﬁe_TaskID
, 
START_ADVERTISING_EVT
 );

262 
ªt
 = 
bÀInvÆidR™ge
;

266 
GAPROLE_ADVERT_OFF_TIME
:

267 i‡–
Àn
 = ( 
uöt16
 ) )

269 
g≠Rﬁe_AdvîtOffTime
 = *((
uöt16
*)
pVÆue
);

273 
ªt
 = 
bÀInvÆidR™ge
;

277 
GAPROLE_ADVERT_DATA
:

278 i‡–
Àn
 <
B_MAX_ADV_LEN
 )

280 
VOID
 
	`oßl_mem£t
–
g≠Rﬁe_AdvîtD©a
, 0, 
B_MAX_ADV_LEN
 );

281 
VOID
 
	`oßl_mem˝y
–
g≠Rﬁe_AdvîtD©a
, 
pVÆue
, 
Àn
 );

282 
g≠Rﬁe_AdvîtD©aLí
 = 
Àn
;

285 
ªt
 = 
	`GAP_Upd©eAdvîtisögD©a
–
g≠Rﬁe_TaskID
,

286 
TRUE
, 
g≠Rﬁe_AdvîtD©aLí
, 
g≠Rﬁe_AdvîtD©a
 );

290 
ªt
 = 
bÀInvÆidR™ge
;

294 
GAPROLE_SCAN_RSP_DATA
:

295 i‡–
Àn
 <
B_MAX_ADV_LEN
 )

297 
VOID
 
	`oßl_mem£t
–
g≠Rﬁe_SˇnR•D©a
, 0, 
B_MAX_ADV_LEN
 );

298 
VOID
 
	`oßl_mem˝y
–
g≠Rﬁe_SˇnR•D©a
, 
pVÆue
, 
Àn
 );

299 
g≠Rﬁe_SˇnR•D©aLí
 = 
Àn
;

302 
ªt
 = 
	`GAP_Upd©eAdvîtisögD©a
–
g≠Rﬁe_TaskID
,

303 
FALSE
, 
g≠Rﬁe_SˇnR•D©aLí
, 
g≠Rﬁe_SˇnR•D©a
 );

307 
ªt
 = 
bÀInvÆidR™ge
;

311 
GAPROLE_ADV_EVENT_TYPE
:

312 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
GAP_ADTYPE_ADV_LDC_DIRECT_IND
) )

314 
g≠Rﬁe_AdvEvítTy≥
 = *((
uöt8
*)
pVÆue
);

318 
ªt
 = 
bÀInvÆidR™ge
;

322 
GAPROLE_ADV_DIRECT_TYPE
:

323 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
ADDRTYPE_PRIVATE_RESOLVE
) )

325 
g≠Rﬁe_AdvDúe˘Ty≥
 = *((
uöt8
*)
pVÆue
);

329 
ªt
 = 
bÀInvÆidR™ge
;

333 
GAPROLE_ADV_DIRECT_ADDR
:

334 i‡–
Àn
 =
B_ADDR_LEN
 )

336 
VOID
 
	`oßl_mem˝y
–
g≠Rﬁe_AdvDúe˘Addr
, 
pVÆue
, 
B_ADDR_LEN
 ) ;

340 
ªt
 = 
bÀInvÆidR™ge
;

344 
GAPROLE_ADV_CHANNEL_MAP
:

345 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
) <= 0x07) )

347 
g≠Rﬁe_AdvCh™M≠
 = *((
uöt8
*)
pVÆue
);

351 
ªt
 = 
bÀInvÆidR™ge
;

355 
GAPROLE_ADV_FILTER_POLICY
:

356 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
GAP_FILTER_POLICY_WHITE
) )

358 
g≠Rﬁe_AdvFûãrPﬁicy
 = *((
uöt8
*)
pVÆue
);

362 
ªt
 = 
bÀInvÆidR™ge
;

366 
GAPROLE_RSSI_READ_RATE
:

367 i‡–
Àn
 = ( 
uöt16
 ) )

369 
g≠Rﬁe_RSSIRódR©e
 = *((
uöt16
*)
pVÆue
);

371 i‡–(
g≠Rﬁe_RSSIRódR©e
Ë&& (
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED
) )

374 
VOID
 
	`oßl_°¨t_timîEx
–
g≠Rﬁe_TaskID
, 
RSSI_READ_EVT
, 
g≠Rﬁe_RSSIRódR©e
 );

379 
ªt
 = 
bÀInvÆidR™ge
;

383 
GAPROLE_PARAM_UPDATE_ENABLE
:

384 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
TRUE
) )

386 
g≠Rﬁe_P¨amUpd©eE«bÀ
 = *((
uöt8
*)
pVÆue
);

390 
ªt
 = 
bÀInvÆidR™ge
;

394 
GAPROLE_MIN_CONN_INTERVAL
:

396 
uöt16
 
√wI¡îvÆ
 = *((uöt16*)
pVÆue
);

397 i‡–
Àn
 = ( 
uöt16
 ) &&

398 –
√wI¡îvÆ
 >
MIN_CONN_INTERVAL
 ) &&

399 –
√wI¡îvÆ
 <
MAX_CONN_INTERVAL
 ) )

401 
g≠Rﬁe_MöC⁄nI¡îvÆ
 = 
√wI¡îvÆ
;

405 
ªt
 = 
bÀInvÆidR™ge
;

410 
GAPROLE_MAX_CONN_INTERVAL
:

412 
uöt16
 
√wI¡îvÆ
 = *((uöt16*)
pVÆue
);

413 i‡–
Àn
 = ( 
uöt16
 ) &&

414 –
√wI¡îvÆ
 >
MIN_CONN_INTERVAL
) &&

415 –
√wI¡îvÆ
 <
MAX_CONN_INTERVAL
) )

417 
g≠Rﬁe_MaxC⁄nI¡îvÆ
 = 
√wI¡îvÆ
;

421 
ªt
 = 
bÀInvÆidR™ge
;

426 
GAPROLE_SLAVE_LATENCY
:

428 
uöt16
 
œãncy
 = *((uöt16*)
pVÆue
);

429 i‡–
Àn
 = ( 
uöt16
 ) && (
œãncy
 < 
MAX_SLAVE_LATENCY
) )

431 
g≠Rﬁe_SœveL©ícy
 = 
œãncy
;

435 
ªt
 = 
bÀInvÆidR™ge
;

440 
GAPROLE_TIMEOUT_MULTIPLIER
:

442 
uöt16
 
√wTimeout
 = *((uöt16*)
pVÆue
);

443 i‡–
Àn
 = ( 
uöt16
 )

444 && (
√wTimeout
 >
MIN_TIMEOUT_MULTIPLIER
Ë&& (√wTimeouà<
MAX_TIMEOUT_MULTIPLIER
) )

446 
g≠Rﬁe_TimeoutMu…ùlõr
 = 
√wTimeout
;

450 
ªt
 = 
bÀInvÆidR™ge
;

455 
GAPROLE_PARAM_UPDATE_REQ
:

457 
uöt8
 
ªq
 = *((uöt8*)
pVÆue
);

458 i‡–
Àn
 = ( 
uöt8
 ) && (
ªq
 =
TRUE
) )

463 i‡–
	`oßl_gë_timeoutEx
–
g≠Rﬁe_TaskID
, 
CONN_PARAM_TIMEOUT_EVT
 ) == 0 )

466 
	`g≠Rﬁe_°¨tC⁄nUpd©e
–
GAPROLE_NO_ACTION
 );

469 
VOID
 
	`oßl_°›_timîEx
–
g≠Rﬁe_TaskID
, 
START_CONN_UPDATE_EVT
 );

473 
ªt
 = 
bÀPídög
;

478 
ªt
 = 
bÀInvÆidR™ge
;

485 i‡–(
∑øm
 < 
TGAP_PARAMID_MAX
Ë&& (
Àn
 = ( 
uöt16
 )) )

487 
ªt
 = 
	`GAP_SëP¨amVÆue
–
∑øm
, *((
uöt16
*)
pVÆue
) );

491 
ªt
 = 
INVALIDPARAMETER
;

496  ( 
ªt
 );

497 
	}
}

504 
bSètus_t
 
	$GAPRﬁe_GëP¨amëî
–
uöt16
 
∑øm
, *
pVÆue
 )

506 
bSètus_t
 
ªt
 = 
SUCCESS
;

507  
∑øm
 )

509 
GAPROLE_PROFILEROLE
:

510 *((
uöt8
*)
pVÆue
Ë
g≠Rﬁe_¥ofûeRﬁe
;

513 
GAPROLE_IRK
:

514 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠Rﬁe_IRK
, 
KEYLEN
 ) ;

517 
GAPROLE_SRK
:

518 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠Rﬁe_SRK
, 
KEYLEN
 ) ;

521 
GAPROLE_SIGNCOUNTER
:

522 *((
uöt32
*)
pVÆue
Ë
g≠Rﬁe_signCou¡î
;

525 
GAPROLE_BD_ADDR
:

526 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠Rﬁe_bdAddr
, 
B_ADDR_LEN
 ) ;

529 
GAPROLE_ADVERT_ENABLED
:

530 *((
uöt8
*)
pVÆue
Ë
g≠Rﬁe_AdvE«bÀd
;

533 
GAPROLE_ADVERT_OFF_TIME
:

534 *((
uöt16
*)
pVÆue
Ë
g≠Rﬁe_AdvîtOffTime
;

537 
GAPROLE_ADVERT_DATA
:

538 
VOID
 
	`oßl_mem˝y
–
pVÆue
 , 
g≠Rﬁe_AdvîtD©a
, 
g≠Rﬁe_AdvîtD©aLí
 );

541 
GAPROLE_SCAN_RSP_DATA
:

542 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠Rﬁe_SˇnR•D©a
, 
g≠Rﬁe_SˇnR•D©aLí
 ) ;

545 
GAPROLE_ADV_EVENT_TYPE
:

546 *((
uöt8
*)
pVÆue
Ë
g≠Rﬁe_AdvEvítTy≥
;

549 
GAPROLE_ADV_DIRECT_TYPE
:

550 *((
uöt8
*)
pVÆue
Ë
g≠Rﬁe_AdvDúe˘Ty≥
;

553 
GAPROLE_ADV_DIRECT_ADDR
:

554 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠Rﬁe_AdvDúe˘Addr
, 
B_ADDR_LEN
 ) ;

557 
GAPROLE_ADV_CHANNEL_MAP
:

558 *((
uöt8
*)
pVÆue
Ë
g≠Rﬁe_AdvCh™M≠
;

561 
GAPROLE_ADV_FILTER_POLICY
:

562 *((
uöt8
*)
pVÆue
Ë
g≠Rﬁe_AdvFûãrPﬁicy
;

565 
GAPROLE_CONNHANDLE
:

566 *((
uöt16
*)
pVÆue
Ë
g≠Rﬁe_C⁄√˘i⁄H™dÀ
;

569 
GAPROLE_RSSI_READ_RATE
:

570 *((
uöt16
*)
pVÆue
Ë
g≠Rﬁe_RSSIRódR©e
;

573 
GAPROLE_PARAM_UPDATE_ENABLE
:

574 *((
uöt16
*)
pVÆue
Ë
g≠Rﬁe_P¨amUpd©eE«bÀ
;

577 
GAPROLE_MIN_CONN_INTERVAL
:

578 *((
uöt16
*)
pVÆue
Ë
g≠Rﬁe_MöC⁄nI¡îvÆ
;

581 
GAPROLE_MAX_CONN_INTERVAL
:

582 *((
uöt16
*)
pVÆue
Ë
g≠Rﬁe_MaxC⁄nI¡îvÆ
;

585 
GAPROLE_SLAVE_LATENCY
:

586 *((
uöt16
*)
pVÆue
Ë
g≠Rﬁe_SœveL©ícy
;

589 
GAPROLE_TIMEOUT_MULTIPLIER
:

590 *((
uöt16
*)
pVÆue
Ë
g≠Rﬁe_TimeoutMu…ùlõr
;

593 
GAPROLE_CONN_BD_ADDR
:

594 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠Rﬁe_C⁄√˘edDevAddr
, 
B_ADDR_LEN
 ) ;

597 
GAPROLE_CONN_INTERVAL
:

598 *((
uöt16
*)
pVÆue
Ë
g≠Rﬁe_C⁄nI¡îvÆ
;

601 
GAPROLE_CONN_LATENCY
:

602 *((
uöt16
*)
pVÆue
Ë
g≠Rﬁe_C⁄nSœveL©ícy
;

605 
GAPROLE_CONN_TIMEOUT
:

606 *((
uöt16
*)
pVÆue
Ë
g≠Rﬁe_C⁄nTimeout
;

609 
GAPROLE_STATE
:

610 *((
uöt8
*)
pVÆue
Ë
g≠Rﬁe_°©e
;

615 i‡–
∑øm
 < 
TGAP_PARAMID_MAX
 )

617 *((
uöt16
*)
pVÆue
Ë
	`GAP_GëP¨amVÆue
–
∑øm
 );

621 
ªt
 = 
INVALIDPARAMETER
;

626  ( 
ªt
 );

627 
	}
}

634 
bSètus_t
 
	$GAPRﬁe_SèπDevi˚
–
g≠RﬁesCBs_t
 *
pAµCÆlbacks
 )

636 i‡–
g≠Rﬁe_°©e
 =
GAPROLE_INIT
 )

639 i‡–
pAµCÆlbacks
 )

641 
pG≠Rﬁes_AµCGs
 = 
pAµCÆlbacks
;

645 
	`g≠Rﬁe_SëupGAP
();

647  ( 
SUCCESS
 );

651  ( 
bÀAÃódyInReque°edMode
 );

653 
	}
}

660 
	$GAPRﬁe_Regi°îAµCBs
–
g≠RﬁesP¨amUpd©eCB_t
 *
pP¨amUpd©eCB
 )

662 i‡–
pP¨amUpd©eCB
 !
NULL
 )

664 
pG≠Rﬁes_P¨amUpd©eCB
 = 
pP¨amUpd©eCB
;

666 
	}
}

673 
bSètus_t
 
	$GAPRﬁe_Tîmö©eC⁄√˘i⁄
( )

675 i‡–
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED
 )

677  ( 
	`GAP_Tîmö©eLökReq
–
g≠Rﬁe_TaskID
, 
g≠Rﬁe_C⁄√˘i⁄H™dÀ
,

678 
HCI_DISCONNECT_REMOTE_USER_TERM
 ) );

682  ( 
bÀInc‹ª˘Mode
 );

684 
	}
}

695 
	$GAPRﬁe_Inô
–
uöt8
 
èsk_id
 )

697 
g≠Rﬁe_TaskID
 = 
èsk_id
;

699 
g≠Rﬁe_°©e
 = 
GAPROLE_INIT
;

700 
g≠Rﬁe_C⁄√˘i⁄H™dÀ
 = 
INVALID_CONNHANDLE
;

702 
	`GAP_Regi°îF‹HCIMsgs
–
g≠Rﬁe_TaskID
 );

705 
g≠Rﬁe_¥ofûeRﬁe
 = 
GAP_PROFILE_PERIPHERAL
;

706 
VOID
 
	`oßl_mem£t
–
g≠Rﬁe_IRK
, 0, 
KEYLEN
 );

707 
VOID
 
	`oßl_mem£t
–
g≠Rﬁe_SRK
, 0, 
KEYLEN
 );

708 
g≠Rﬁe_signCou¡î
 = 0;

709 
g≠Rﬁe_AdvEvítTy≥
 = 
GAP_ADTYPE_ADV_IND
;

710 
g≠Rﬁe_AdvDúe˘Ty≥
 = 
ADDRTYPE_PUBLIC
;

711 
g≠Rﬁe_AdvCh™M≠
 = 
GAP_ADVCHAN_ALL
;

712 
g≠Rﬁe_AdvFûãrPﬁicy
 = 
GAP_FILTER_POLICY_ALL
;

715 
VOID
 
	`oßl_¢v_ªad
–
BLE_NVID_IRK
, 
KEYLEN
, 
g≠Rﬁe_IRK
 );

716 
VOID
 
	`oßl_¢v_ªad
–
BLE_NVID_CSRK
, 
KEYLEN
, 
g≠Rﬁe_SRK
 );

717 
VOID
 
	`oßl_¢v_ªad
–
BLE_NVID_SIGNCOUNTER
, –
uöt32
 ), &
g≠Rﬁe_signCou¡î
 );

718 
	}
}

725 
uöt16
 
	$GAPRﬁe_Pro˚ssEvít
–
uöt8
 
èsk_id
, 
uöt16
 
evíts
 )

727 
VOID
 
èsk_id
;

729 i‡–
evíts
 & 
SYS_EVENT_MSG
 )

731 
uöt8
 *
pMsg
;

733 i‡–(
pMsg
 = 
	`oßl_msg_ª˚ive
–
g≠Rﬁe_TaskID
 )Ë!
NULL
 )

735 
	`g≠Rﬁe_Pro˚ssOSALMsg
–(
oßl_evít_hdr_t
 *)
pMsg
 );

738 
VOID
 
	`oßl_msg_dóŒoˇã
–
pMsg
 );

742  (
evíts
 ^ 
SYS_EVENT_MSG
);

745 i‡–
evíts
 & 
GAP_EVENT_SIGN_COUNTER_CHANGED
 )

748 
VOID
 
	`oßl_¢v_wrôe
–
BLE_NVID_SIGNCOUNTER
, –
uöt32
 ), &
g≠Rﬁe_signCou¡î
 );

750  ( 
evíts
 ^ 
GAP_EVENT_SIGN_COUNTER_CHANGED
 );

753 i‡–
evíts
 & 
START_ADVERTISING_EVT
 )

755 i‡–
g≠Rﬁe_AdvE«bÀd
 )

757 
g≠AdvîtisögP¨ams_t
 
∑øms
;

760 i‡–
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED
 )

763 
∑øms
.
evítTy≥
 = 
GAP_ADTYPE_ADV_NONCONN_IND
;

767 
∑øms
.
evítTy≥
 = 
g≠Rﬁe_AdvEvítTy≥
;

768 
∑øms
.
öôüt‹AddrTy≥
 = 
g≠Rﬁe_AdvDúe˘Ty≥
;

769 
VOID
 
	`oßl_mem˝y
–
∑øms
.
öôüt‹Addr
, 
g≠Rﬁe_AdvDúe˘Addr
, 
B_ADDR_LEN
 );

771 
∑øms
.
ch™√lM≠
 = 
g≠Rﬁe_AdvCh™M≠
;

772 
∑øms
.
fûãrPﬁicy
 = 
g≠Rﬁe_AdvFûãrPﬁicy
;

774 i‡–
	`GAP_MakeDiscovîabÀ
–
g≠Rﬁe_TaskID
, &
∑øms
 ) !
SUCCESS
 )

776 
g≠Rﬁe_°©e
 = 
GAPROLE_ERROR
;

779 i‡–
pG≠Rﬁes_AµCGs
 &&ÖG≠Rﬁes_AµCGs->
p‚SèãCh™ge
 )

781 
pG≠Rﬁes_AµCGs
->
	`p‚SèãCh™ge
–
g≠Rﬁe_°©e
 );

785  ( 
evíts
 ^ 
START_ADVERTISING_EVT
 );

788 i‡–
evíts
 & 
RSSI_READ_EVT
 )

791 i‡–
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED
 )

794 
VOID
 
	`HCI_RódRssiCmd
–
g≠Rﬁe_C⁄√˘i⁄H™dÀ
 );

797 i‡–
g≠Rﬁe_RSSIRódR©e
 )

799 
VOID
 
	`oßl_°¨t_timîEx
–
g≠Rﬁe_TaskID
, 
RSSI_READ_EVT
, 
g≠Rﬁe_RSSIRódR©e
 );

802  ( 
evíts
 ^ 
RSSI_READ_EVT
 );

805 i‡–
evíts
 & 
START_CONN_UPDATE_EVT
 )

808 
	`g≠Rﬁe_°¨tC⁄nUpd©e
–
GAPROLE_NO_ACTION
 );

810  ( 
evíts
 ^ 
START_CONN_UPDATE_EVT
 );

813 i‡–
evíts
 & 
CONN_PARAM_TIMEOUT_EVT
 )

816 
	`g≠Rﬁe_H™dÀP¨amUpd©eNoSuc˚ss
();

818  ( 
evíts
 ^ 
CONN_PARAM_TIMEOUT_EVT
 );

823 
	}
}

834 
	$g≠Rﬁe_Pro˚ssOSALMsg
–
oßl_evít_hdr_t
 *
pMsg
 )

836  
pMsg
->
evít
 )

838 
HCI_GAP_EVENT_EVENT
:

839 i‡–
pMsg
->
°©us
 =
HCI_COMMAND_COMPLETE_EVENT_CODE
 )

841 
hciEvt_CmdCom∂ëe_t
 *
pPkt
 = (hciEvt_CmdCom∂ëe_à*)
pMsg
;

843 i‡–
pPkt
->
cmdOpcode
 =
HCI_READ_RSSI
 )

845 
öt8
 
rssi
 = (öt8)
pPkt
->
pRëu∫P¨am
[3];

847 i‡–(
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED
Ë&& (
rssi
 !
RSSI_NOT_AVAILABLE
) )

850 i‡–
pG≠Rﬁes_AµCGs
 &&ÖG≠Rﬁes_AµCGs->
p‚RssiRód
 )

852 
pG≠Rﬁes_AµCGs
->
	`p‚RssiRód
–
rssi
 );

859 
GAP_MSG_EVENT
:

860 
	`g≠Rﬁe_Pro˚ssGAPMsg
–(
g≠EvítHdr_t
 *)
pMsg
 );

863 
L2CAP_SIGNAL_EVENT
:

865 
l2ˇpSig«lEvít_t
 *
pPkt
 = (l2ˇpSig«lEvít_à*)
pMsg
;

868 i‡–
pPkt
->
›code
 =
L2CAP_PARAM_UPDATE_RSP
 )

870 
l2ˇpP¨amUpd©eR•_t
 *
pR•
 = (l2ˇpP¨amUpd©eR•_à*)&(
pPkt
->
cmd
.
upd©eR•
);

872 i‡––
pR•
->
ªsu…
 =
L2CAP_CONN_PARAMS_REJECTED
 ) &&

873 –
∑ømUpd©eNoSuc˚ssO±i⁄
 =
GAPROLE_TERMINATE_LINK
 ) )

876 
VOID
 
	`oßl_°›_timîEx
–
g≠Rﬁe_TaskID
, 
CONN_PARAM_TIMEOUT_EVT
 );

879 
	`GAPRﬁe_Tîmö©eC⁄√˘i⁄
();

883 
uöt16
 
timeout
 = 
	`GAP_GëP¨amVÆue
–
TGAP_CONN_PARAM_TIMEOUT
 );

887 
VOID
 
	`oßl_°¨t_timîEx
–
g≠Rﬁe_TaskID
, 
CONN_PARAM_TIMEOUT_EVT
, 
timeout
 );

896 
	}
}

907 
	$g≠Rﬁe_Pro˚ssGAPMsg
–
g≠EvítHdr_t
 *
pMsg
 )

909 
uöt8
 
nŸify
 = 
FALSE
;

911  
pMsg
->
›code
 )

913 
GAP_DEVICE_INIT_DONE_EVENT
:

915 
g≠Devi˚InôD⁄eEvít_t
 *
pPkt
 = (g≠Devi˚InôD⁄eEvít_à*)
pMsg
;

916 
bSètus_t
 
°©
 = 
pPkt
->
hdr
.
°©us
;

918 i‡–
°©
 =
SUCCESS
 )

921 
VOID
 
	`oßl_¢v_wrôe
–
BLE_NVID_IRK
, 
KEYLEN
, 
g≠Rﬁe_IRK
 );

922 
VOID
 
	`oßl_¢v_wrôe
–
BLE_NVID_CSRK
, 
KEYLEN
, 
g≠Rﬁe_SRK
 );

925 
VOID
 
	`oßl_mem˝y
–
g≠Rﬁe_bdAddr
, 
pPkt
->
devAddr
, 
B_ADDR_LEN
 );

927 
g≠Rﬁe_°©e
 = 
GAPROLE_STARTED
;

930 
°©
 = 
	`GAP_Upd©eAdvîtisögD©a
–
g≠Rﬁe_TaskID
,

931 
TRUE
, 
g≠Rﬁe_AdvîtD©aLí
, 
g≠Rﬁe_AdvîtD©a
 );

934 i‡–
°©
 !
SUCCESS
 )

936 
g≠Rﬁe_°©e
 = 
GAPROLE_ERROR
;

939 
nŸify
 = 
TRUE
;

943 
GAP_ADV_DATA_UPDATE_DONE_EVENT
:

945 
g≠AdvD©aUpd©eEvít_t
 *
pPkt
 = (g≠AdvD©aUpd©eEvít_à*)
pMsg
;

947 i‡–
pPkt
->
hdr
.
°©us
 =
SUCCESS
 )

949 i‡–
pPkt
->
adTy≥
 )

952 
pPkt
->
hdr
.
°©us
 = 
	`GAP_Upd©eAdvîtisögD©a
–
g≠Rﬁe_TaskID
,

953 
FALSE
, 
g≠Rﬁe_SˇnR•D©aLí
, 
g≠Rﬁe_SˇnR•D©a
 );

955 i‡––
g≠Rﬁe_°©e
 !
GAPROLE_ADVERTISING
 ) &&

956 –
	`oßl_gë_timeoutEx
–
g≠Rﬁe_TaskID
, 
START_ADVERTISING_EVT
 ) == 0 ) )

959 
VOID
 
	`oßl_£t_evít
–
g≠Rﬁe_TaskID
, 
START_ADVERTISING_EVT
 );

963 i‡–
pPkt
->
hdr
.
°©us
 !
SUCCESS
 )

966 
g≠Rﬁe_°©e
 = 
GAPROLE_ERROR
;

967 
nŸify
 = 
TRUE
;

972 
GAP_MAKE_DISCOVERABLE_DONE_EVENT
:

973 
GAP_END_DISCOVERABLE_DONE_EVENT
:

975 
g≠MakeDiscovîabÀR•Evít_t
 *
pPkt
 = (g≠MakeDiscovîabÀR•Evít_à*)
pMsg
;

977 i‡–
pPkt
->
hdr
.
°©us
 =
SUCCESS
 )

979 i‡–
pMsg
->
›code
 =
GAP_MAKE_DISCOVERABLE_DONE_EVENT
 )

981 i‡(
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED
)

983 
g≠Rﬁe_°©e
 = 
GAPROLE_CONNECTED_ADV
;

987 
g≠Rﬁe_°©e
 = 
GAPROLE_ADVERTISING
;

993 i‡–
g≠Rﬁe_AdvîtOffTime
 != 0 )

995 i‡––
g≠Rﬁe_AdvE«bÀd
 ) )

997 
VOID
 
	`oßl_°¨t_timîEx
–
g≠Rﬁe_TaskID
, 
START_ADVERTISING_EVT
, 
g≠Rﬁe_AdvîtOffTime
 );

1006 
g≠Rﬁe_AdvE«bÀd
 = 
FALSE
;

1009 i‡(
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED_ADV
)

1012 
g≠Rﬁe_°©e
 = 
GAPROLE_CONNECTED
;

1014 i‡(
g≠Rﬁe_°©e
 =
GAPROLE_WAITING_AFTER_TIMEOUT
)

1018 
g≠Rﬁe_AdvE«bÀd
 = 
TRUE
;

1021 
VOID
 
	`oßl_£t_evít
–
g≠Rﬁe_TaskID
, 
START_ADVERTISING_EVT
 );

1026 
g≠Rﬁe_°©e
 = 
GAPROLE_WAITING
;

1033 
g≠Rﬁe_°©e
 = 
GAPROLE_ERROR
;

1035 
nŸify
 = 
TRUE
;

1039 
GAP_LINK_ESTABLISHED_EVENT
:

1041 
g≠E°LökReqEvít_t
 *
pPkt
 = (g≠E°LökReqEvít_à*)
pMsg
;

1043 i‡–
pPkt
->
hdr
.
°©us
 =
SUCCESS
 )

1045 
VOID
 
	`oßl_mem˝y
–
g≠Rﬁe_C⁄√˘edDevAddr
, 
pPkt
->
devAddr
, 
B_ADDR_LEN
 );

1046 
g≠Rﬁe_C⁄√˘i⁄H™dÀ
 = 
pPkt
->
c⁄√˘i⁄H™dÀ
;

1047 
g≠Rﬁe_°©e
 = 
GAPROLE_CONNECTED
;

1049 i‡–
g≠Rﬁe_RSSIRódR©e
 )

1052 
VOID
 
	`oßl_°¨t_timîEx
–
g≠Rﬁe_TaskID
, 
RSSI_READ_EVT
, 
g≠Rﬁe_RSSIRódR©e
 );

1056 
g≠Rﬁe_C⁄nI¡îvÆ
 = 
pPkt
->
c⁄nI¡îvÆ
;

1057 
g≠Rﬁe_C⁄nSœveL©ícy
 = 
pPkt
->
c⁄nL©ícy
;

1058 
g≠Rﬁe_C⁄nTimeout
 = 
pPkt
->
c⁄nTimeout
;

1061 i‡–
g≠Rﬁe_P¨amUpd©eE«bÀ
 =
TRUE
 )

1065 
uöt16
 
timeout
 = 
	`GAP_GëP¨amVÆue
–
TGAP_CONN_PAUSE_PERIPHERAL
 );

1067 
	`oßl_°¨t_timîEx
–
g≠Rﬁe_TaskID
, 
START_CONN_UPDATE_EVT
, 
timeout
*1000 );

1071 
VOID
 
	`GAPB⁄dMgr_LökE°
–
pPkt
->
devAddrTy≥
,ÖPkt->
devAddr
,ÖPkt->
c⁄√˘i⁄H™dÀ
, 
GAP_PROFILE_PERIPHERAL
 );

1075 
g≠Rﬁe_AdvE«bÀd
 = 
FALSE
;

1077 i‡–
pPkt
->
hdr
.
°©us
 =
bÀGAPC⁄nNŸAc˚±abÀ
 )

1081 
g≠Rﬁe_AdvE«bÀd
 = 
FALSE
;

1084 
g≠Rﬁe_°©e
 = 
GAPROLE_WAITING
;

1088 
g≠Rﬁe_°©e
 = 
GAPROLE_ERROR
;

1090 
nŸify
 = 
TRUE
;

1094 
GAP_LINK_TERMINATED_EVENT
:

1096 
g≠Tîmö©eLökEvít_t
 *
pPkt
 = (g≠Tîmö©eLökEvít_à*)
pMsg
;

1098 
VOID
 
	`GAPB⁄dMgr_Pro˚ssGAPMsg
–(
g≠EvítHdr_t
 *)
pMsg
 );

1099 
	`oßl_mem£t
–
g≠Rﬁe_C⁄√˘edDevAddr
, 0, 
B_ADDR_LEN
 );

1102 
g≠Rﬁe_C⁄nI¡îvÆ
 = 0;

1103 
g≠Rﬁe_C⁄nSœveL©ícy
 = 0;

1104 
g≠Rﬁe_C⁄nTimeout
 = 0;

1107 
VOID
 
	`oßl_°›_timîEx
–
g≠Rﬁe_TaskID
, 
START_CONN_UPDATE_EVT
 );

1108 
VOID
 
	`oßl_°›_timîEx
–
g≠Rﬁe_TaskID
, 
CONN_PARAM_TIMEOUT_EVT
 );

1111 if–
pPkt
->
ªas⁄
 =
LL_SUPERVISION_TIMEOUT_TERM
 )

1113 
g≠Rﬁe_°©e
 = 
GAPROLE_WAITING_AFTER_TIMEOUT
;

1117 
g≠Rﬁe_°©e
 = 
GAPROLE_WAITING
;

1120 
nŸify
 = 
TRUE
;

1123 i‡–
g≠Rﬁe_AdvE«bÀd
)

1127 
VOID
 
	`GAP_EndDiscovîabÀ
–
g≠Rﬁe_TaskID
 );

1131 
g≠Rﬁe_AdvE«bÀd
 = 
TRUE
;

1132 
VOID
 
	`oßl_£t_evít
–
g≠Rﬁe_TaskID
, 
START_ADVERTISING_EVT
);

1135 
g≠Rﬁe_C⁄√˘i⁄H™dÀ
 = 
INVALID_CONNHANDLE
;

1139 
GAP_LINK_PARAM_UPDATE_EVENT
:

1141 
g≠LökUpd©eEvít_t
 *
pPkt
 = (g≠LökUpd©eEvít_à*)
pMsg
;

1144 
VOID
 
	`oßl_°›_timîEx
–
g≠Rﬁe_TaskID
, 
CONN_PARAM_TIMEOUT_EVT
 );

1146 i‡–
pPkt
->
hdr
.
°©us
 =
SUCCESS
 )

1149 
g≠Rﬁe_C⁄nI¡îvÆ
 = 
pPkt
->
c⁄nI¡îvÆ
;

1150 
g≠Rﬁe_C⁄nSœveL©ícy
 = 
pPkt
->
c⁄nL©ícy
;

1151 
g≠Rﬁe_C⁄nTimeout
 = 
pPkt
->
c⁄nTimeout
;

1154 i‡–
	`oßl_gë_timeoutEx
–
g≠Rﬁe_TaskID
, 
START_CONN_UPDATE_EVT
 ) == 0 )

1157 i‡–
pG≠Rﬁes_P¨amUpd©eCB
 !
NULL
 )

1159 (*
pG≠Rﬁes_P¨amUpd©eCB
)–
g≠Rﬁe_C⁄nI¡îvÆ
,

1160 
g≠Rﬁe_C⁄nSœveL©ícy
,

1161 
g≠Rﬁe_C⁄nTimeout
 );

1172 i‡–
nŸify
 =
TRUE
 )

1175 i‡–
pG≠Rﬁes_AµCGs
 &&ÖG≠Rﬁes_AµCGs->
p‚SèãCh™ge
 )

1177 
pG≠Rﬁes_AµCGs
->
	`p‚SèãCh™ge
–
g≠Rﬁe_°©e
 );

1180 
	}
}

1192 
	$g≠Rﬁe_SëupGAP
( )

1194 
VOID
 
	`GAP_Devi˚Inô
–
g≠Rﬁe_TaskID
,

1195 
g≠Rﬁe_¥ofûeRﬁe
, 0,

1196 
g≠Rﬁe_IRK
, 
g≠Rﬁe_SRK
,

1197 &
g≠Rﬁe_signCou¡î
 );

1198 
	}
}

1209 
	$g≠Rﬁe_H™dÀP¨amUpd©eNoSuc˚ss
( )

1212  
∑ømUpd©eNoSuc˚ssO±i⁄
 )

1214 
GAPROLE_RESEND_PARAM_UPDATE
:

1215 
	`GAPRﬁe_SídUpd©eP¨am
–
g≠Rﬁe_MöC⁄nI¡îvÆ
, 
g≠Rﬁe_MaxC⁄nI¡îvÆ
,

1216 
g≠Rﬁe_SœveL©ícy
, 
g≠Rﬁe_TimeoutMu…ùlõr
,

1217 
GAPROLE_RESEND_PARAM_UPDATE
 );

1220 
GAPROLE_TERMINATE_LINK
:

1221 
	`GAPRﬁe_Tîmö©eC⁄√˘i⁄
();

1224 
GAPROLE_NO_ACTION
:

1230 
	}
}

1242 
	$g≠Rﬁe_°¨tC⁄nUpd©e
–
uöt8
 
h™dÀFaûuª
 )

1245 i‡–(
g≠Rﬁe_C⁄nI¡îvÆ
 < 
g≠Rﬁe_MöC⁄nI¡îvÆ
) ||

1246 (
g≠Rﬁe_C⁄nI¡îvÆ
 > 
g≠Rﬁe_MaxC⁄nI¡îvÆ
) ||

1247 (
g≠Rﬁe_C⁄nSœveL©ícy
 !
g≠Rﬁe_SœveL©ícy
) ||

1248 (
g≠Rﬁe_C⁄nTimeout
 !
g≠Rﬁe_TimeoutMu…ùlõr
) )

1250 
l2ˇpP¨amUpd©eReq_t
 
upd©eReq
;

1251 
uöt16
 
timeout
 = 
	`GAP_GëP¨amVÆue
–
TGAP_CONN_PARAM_TIMEOUT
 );

1253 
upd©eReq
.
öãrvÆMö
 = 
g≠Rﬁe_MöC⁄nI¡îvÆ
;

1254 
upd©eReq
.
öãrvÆMax
 = 
g≠Rﬁe_MaxC⁄nI¡îvÆ
;

1255 
upd©eReq
.
¶aveL©ícy
 = 
g≠Rﬁe_SœveL©ícy
;

1256 
upd©eReq
.
timeoutMu…ùlõr
 = 
g≠Rﬁe_TimeoutMu…ùlõr
;

1258 
VOID
 
	`L2CAP_C⁄nP¨amUpd©eReq
–
g≠Rﬁe_C⁄√˘i⁄H™dÀ
, &
upd©eReq
, 
g≠Rﬁe_TaskID
 );

1260 
∑ømUpd©eNoSuc˚ssO±i⁄
 = 
h™dÀFaûuª
;

1263 
VOID
 
	`oßl_°¨t_timîEx
–
g≠Rﬁe_TaskID
, 
CONN_PARAM_TIMEOUT_EVT
, 
timeout
 );

1265 
	}
}

1281 
bSètus_t
 
	$GAPRﬁe_SídUpd©eP¨am
–
uöt16
 
möC⁄nI¡îvÆ
, uöt16 
maxC⁄nI¡îvÆ
,

1282 
uöt16
 
œãncy
, uöt16 
c⁄nTimeout
, 
uöt8
 
h™dÀFaûuª
 )

1285 i‡–
g≠Rﬁe_°©e
 !
GAPROLE_CONNECTED
 )

1287  ( 
bÀNŸC⁄√˘ed
 );

1291 i‡––
möC⁄nI¡îvÆ
 >
DEFAULT_MIN_CONN_INTERVAL
 ) &&

1292 –
möC⁄nI¡îvÆ
 < 
DEFAULT_MAX_CONN_INTERVAL
 ) &&

1293 –
maxC⁄nI¡îvÆ
 >
DEFAULT_MIN_CONN_INTERVAL
 ) &&

1294 –
maxC⁄nI¡îvÆ
 < 
DEFAULT_MAX_CONN_INTERVAL
 ) &&

1295 –
œãncy
 < 
MAX_SLAVE_LATENCY
 ) &&

1296 –
c⁄nTimeout
 >
MIN_TIMEOUT_MULTIPLIER
 ) &&

1297 –
c⁄nTimeout
 < 
MAX_TIMEOUT_MULTIPLIER
 ) )

1299 
g≠Rﬁe_MöC⁄nI¡îvÆ
 = 
möC⁄nI¡îvÆ
;

1300 
g≠Rﬁe_MaxC⁄nI¡îvÆ
 = 
maxC⁄nI¡îvÆ
;

1301 
g≠Rﬁe_SœveL©ícy
 = 
œãncy
;

1302 
g≠Rﬁe_TimeoutMu…ùlõr
 = 
c⁄nTimeout
;

1305 
	`g≠Rﬁe_°¨tC⁄nUpd©e
–
h™dÀFaûuª
 );

1308 
VOID
 
	`oßl_°›_timîEx
–
g≠Rﬁe_TaskID
, 
START_CONN_UPDATE_EVT
 );

1310  ( 
SUCCESS
 );

1313  ( 
bÀInvÆidR™ge
 );

1314 
	}
}

	@../../Profiles/Roles/peripheral.h

41 #i‚de‡
PERIPHERAL_H


42 
	#PERIPHERAL_H


	)

44 #ifde‡
__˝lu•lus


60 
	#GAPROLE_PROFILEROLE
 0x300

61 
	#GAPROLE_IRK
 0x301

62 
	#GAPROLE_SRK
 0x302

63 
	#GAPROLE_SIGNCOUNTER
 0x303

64 
	#GAPROLE_BD_ADDR
 0x304

65 
	#GAPROLE_ADVERT_ENABLED
 0x305

66 
	#GAPROLE_ADVERT_OFF_TIME
 0x306

67 
	#GAPROLE_ADVERT_DATA
 0x307

68 
	#GAPROLE_SCAN_RSP_DATA
 0x308

69 
	#GAPROLE_ADV_EVENT_TYPE
 0x309

70 
	#GAPROLE_ADV_DIRECT_TYPE
 0x30A

71 
	#GAPROLE_ADV_DIRECT_ADDR
 0x30B

72 
	#GAPROLE_ADV_CHANNEL_MAP
 0x30C

73 
	#GAPROLE_ADV_FILTER_POLICY
 0x30D

74 
	#GAPROLE_CONNHANDLE
 0x30E

75 
	#GAPROLE_RSSI_READ_RATE
 0x30F

76 
	#GAPROLE_PARAM_UPDATE_ENABLE
 0x310

77 
	#GAPROLE_MIN_CONN_INTERVAL
 0x311

78 
	#GAPROLE_MAX_CONN_INTERVAL
 0x312

79 
	#GAPROLE_SLAVE_LATENCY
 0x313

80 
	#GAPROLE_TIMEOUT_MULTIPLIER
 0x314

81 
	#GAPROLE_CONN_BD_ADDR
 0x315

82 
	#GAPROLE_CONN_INTERVAL
 0x316

83 
	#GAPROLE_CONN_LATENCY
 0x317

84 
	#GAPROLE_CONN_TIMEOUT
 0x318

85 
	#GAPROLE_PARAM_UPDATE_REQ
 0x319

86 
	#GAPROLE_STATE
 0x31A

87 

	)

98 
GAPROLE_INIT
 = 0,

99 
GAPROLE_STARTED
,

100 
GAPROLE_ADVERTISING
,

101 
GAPROLE_WAITING
,

102 
GAPROLE_WAITING_AFTER_TIMEOUT
,

103 
GAPROLE_CONNECTED
,

104 
GAPROLE_CONNECTED_ADV
,

105 
GAPROLE_ERROR


106 } 
	tg≠rﬁe_Sèãs_t
;

115 
	#GAPROLE_NO_ACTION
 0

116 
	#GAPROLE_RESEND_PARAM_UPDATE
 1

117 
	#GAPROLE_TERMINATE_LINK
 2

118 

	)

130 (*
g≠RﬁesP¨amUpd©eCB_t
)–
	tuöt16
 
	tc⁄nI¡îvÆ
,

131 
	tuöt16
 
	tc⁄nSœveL©ícy
,

132 
	tuöt16
 
	tc⁄nTimeout
 );

138 (*
g≠RﬁesSèãNŸify_t
)–
	tg≠rﬁe_Sèãs_t
 
	t√wSèã
 );

143 (*
g≠RﬁesRssiRód_t
)–
	töt8
 
	t√wRSSI
 );

150 
g≠RﬁesSèãNŸify_t
 
p‚SèãCh™ge
;

151 
g≠RﬁesRssiRód_t
 
p‚RssiRód
;

152 } 
	tg≠RﬁesCBs_t
;

181 
bSètus_t
 
GAPRﬁe_SëP¨amëî
–
uöt16
 
∑øm
, 
uöt8
 
Àn
, *
pVÆue
 );

198 
bSètus_t
 
GAPRﬁe_GëP¨amëî
–
uöt16
 
∑øm
, *
pVÆue
 );

207 
bSètus_t
 
GAPRﬁe_SèπDevi˚
–
g≠RﬁesCBs_t
 *
pAµCÆlbacks
 );

214 
bSètus_t
 
GAPRﬁe_Tîmö©eC⁄√˘i⁄
( );

227 
bSètus_t
 
GAPRﬁe_SídUpd©eP¨am
–
uöt16
 
möC⁄nI¡îvÆ
, uöt16 
maxC⁄nI¡îvÆ
,

228 
uöt16
 
œãncy
, uöt16 
c⁄nTimeout
, 
uöt8
 
h™dÀFaûuª
 );

237 
GAPRﬁe_Regi°îAµCBs
–
g≠RﬁesP¨amUpd©eCB_t
 *
pP¨amUpd©eCB
 );

262 
GAPRﬁe_Inô
–
uöt8
 
èsk_id
 );

278 
uöt16
 
GAPRﬁe_Pro˚ssEvít
–
uöt8
 
èsk_id
, uöt16 
evíts
 );

283 #ifde‡
__˝lu•lus


	@../../Profiles/Roles/peripheralBroadcaster.c

43 
	~"bcomdef.h
"

44 
	~"OSAL.h
"

45 
	~"hci.h
"

46 
	~"l2ˇp.h
"

47 
	~"g≠.h
"

48 
	~"lökdb.h
"

49 
	~"©t.h
"

50 
	~"g©t.h
"

51 
	~"oßl_¢v.h
"

53 
	~"≥rùhîÆBrﬂdˇ°î.h
"

54 
	~"g≠b⁄dmgr.h
"

64 
	#START_ADVERTISING_EVT
 0x0001

	)

65 
	#RSSI_READ_EVT
 0x0002

	)

66 
	#UPDATE_PARAMS_TIMEOUT_EVT
 0x0004

	)

68 
	#DEFAULT_ADVERT_OFF_TIME
 30000

69 

	)

70 
	#RSSI_NOT_AVAILABLE
 127

	)

72 
	#DEFAULT_MIN_CONN_INTERVAL
 0x0006

73 
	#DEFAULT_MAX_CONN_INTERVAL
 0x0C80

74 

	)

75 
	#MIN_CONN_INTERVAL
 0x0006

	)

76 
	#MAX_CONN_INTERVAL
 0x0C80

	)

78 
	#DEFAULT_SLAVE_LATENCY
 0

	)

79 
	#DEFAULT_TIMEOUT_MULTIPLIER
 1000

	)

81 
	#CONN_INTERVAL_MULTIPLIER
 6

	)

83 
	#MAX_SLAVE_LATENCY
 500

	)

84 
	#MIN_TIMEOUT_MULTIPLIER
 0x000a

	)

85 
	#MAX_TIMEOUT_MULTIPLIER
 0x0c80

	)

87 
	#MAX_TIMEOUT_VALUE
 0xFFFF

	)

108 
uöt8
 
	gg≠Rﬁe_TaskID
;

110 
g≠rﬁe_Sèãs_t
 
	gg≠Rﬁe_°©e
;

117 
uöt8
 
	gg≠Rﬁe_¥ofûeRﬁe
;

118 
uöt8
 
	gg≠Rﬁe_IRK
[
KEYLEN
];

119 
uöt8
 
	gg≠Rﬁe_SRK
[
KEYLEN
];

120 
uöt32
 
	gg≠Rﬁe_signCou¡î
;

121 
uöt8
 
	gg≠Rﬁe_bdAddr
[
B_ADDR_LEN
];

122 
uöt8
 
	gg≠Rﬁe_AdvE«bÀd
 = 
TRUE
;

123 
uöt16
 
	gg≠Rﬁe_AdvîtOffTime
 = 
DEFAULT_ADVERT_OFF_TIME
;

124 
uöt8
 
	gg≠Rﬁe_AdvîtD©aLí
 = 3;

125 
uöt8
 
	gg≠Rﬁe_AdvîtD©a
[
B_MAX_ADV_LEN
] =

128 
GAP_ADTYPE_FLAGS
,

130 (
GAP_ADTYPE_FLAGS_GENERAL
 | 
GAP_ADTYPE_FLAGS_BREDR_NOT_SUPPORTED
),

133 
uöt8
 
	gg≠Rﬁe_SˇnR•D©aLí
 = 0;

134 
uöt8
 
	gg≠Rﬁe_SˇnR•D©a
[
B_MAX_ADV_LEN
] = {0};

135 
uöt8
 
	gg≠Rﬁe_AdvEvítTy≥
;

136 
uöt8
 
	gg≠Rﬁe_AdvDúe˘Ty≥
;

137 
uöt8
 
	gg≠Rﬁe_AdvDúe˘Addr
[
B_ADDR_LEN
] = {0};

138 
uöt8
 
	gg≠Rﬁe_AdvCh™M≠
;

139 
uöt8
 
	gg≠Rﬁe_AdvFûãrPﬁicy
;

141 
uöt16
 
	gg≠Rﬁe_C⁄√˘i⁄H™dÀ
 = 
INVALID_CONNHANDLE
;

142 
uöt16
 
	gg≠Rﬁe_RSSIRódR©e
 = 0;

144 
g≠RﬁesCBs_t
 *
	gpG≠Rﬁes_AµCGs
 = 
NULL
;

145 
uöt8
 
	gg≠Rﬁe_C⁄√˘edDevAddr
[
B_ADDR_LEN
] = {0};

147 
uöt8
 
	gg≠Rﬁe_P¨amUpd©eE«bÀ
 = 
FALSE
;

148 
uöt16
 
	gg≠Rﬁe_MöC⁄nI¡îvÆ
 = 
DEFAULT_MIN_CONN_INTERVAL
;

149 
uöt16
 
	gg≠Rﬁe_MaxC⁄nI¡îvÆ
 = 
DEFAULT_MAX_CONN_INTERVAL
;

150 
uöt16
 
	gg≠Rﬁe_SœveL©ícy
 = 
DEFAULT_SLAVE_LATENCY
;

151 
uöt16
 
	gg≠Rﬁe_TimeoutMu…ùlõr
 = 
DEFAULT_TIMEOUT_MULTIPLIER
;

165 
g≠Rﬁe_Pro˚ssOSALMsg
–
oßl_evít_hdr_t
 *
pMsg
 );

166 
g≠Rﬁe_Pro˚ssGAPMsg
–
g≠EvítHdr_t
 *
pMsg
 );

167 
g≠Rﬁe_SëupGAP
( );

168 
g≠Rﬁe_SídUpd©eP¨am
–
uöt16
 
c⁄nI¡îvÆ
, uöt16 
c⁄nL©ícy
 );

183 
bSètus_t
 
	$GAPRﬁe_SëP¨amëî
–
uöt16
 
∑øm
, 
uöt8
 
Àn
, *
pVÆue
 )

185 
bSètus_t
 
ªt
 = 
SUCCESS
;

186  
∑øm
 )

188 
GAPROLE_IRK
:

189 i‡–
Àn
 =
KEYLEN
 )

191 
VOID
 
	`oßl_mem˝y
–
g≠Rﬁe_IRK
, 
pVÆue
, 
KEYLEN
 ) ;

195 
ªt
 = 
bÀInvÆidR™ge
;

199 
GAPROLE_SRK
:

200 i‡–
Àn
 =
KEYLEN
 )

202 
VOID
 
	`oßl_mem˝y
–
g≠Rﬁe_SRK
, 
pVÆue
, 
KEYLEN
 ) ;

206 
ªt
 = 
bÀInvÆidR™ge
;

210 
GAPROLE_SIGNCOUNTER
:

211 i‡–
Àn
 = ( 
uöt32
 ) )

213 
g≠Rﬁe_signCou¡î
 = *((
uöt32
*)
pVÆue
);

217 
ªt
 = 
bÀInvÆidR™ge
;

221 
GAPROLE_ADVERT_ENABLED
:

222 i‡–
Àn
 =–
uöt8
 ) )

224 i‡–(
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED
Ë|| (g≠Rﬁe_°©ê=
GAPROLE_CONNECTED_ADV
) )

226 
uöt8
 
advE«bÀd
 = *((uöt8*)
pVÆue
);

228 i‡–(
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED
Ë&& (
advE«bÀd
 =
TRUE
) )

231 
	`oßl_£t_evít
–
g≠Rﬁe_TaskID
, 
START_ADVERTISING_EVT
 );

233 i‡–(
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED_ADV
Ë&& (
advE«bÀd
 =
FALSE
) )

236 
	`GAP_EndDiscovîabÀ
–
g≠Rﬁe_TaskID
 );

241 
uöt8
 
ﬁdAdvE«bÀd
 = 
g≠Rﬁe_AdvE«bÀd
;

242 
g≠Rﬁe_AdvE«bÀd
 = *((
uöt8
*)
pVÆue
);

244 i‡–(
ﬁdAdvE«bÀd
Ë&& (
g≠Rﬁe_AdvE«bÀd
 =
FALSE
) )

247 
VOID
 
	`GAP_EndDiscovîabÀ
–
g≠Rﬁe_TaskID
 );

249 i‡–(
ﬁdAdvE«bÀd
 =
FALSE
Ë&& (
g≠Rﬁe_AdvE«bÀd
) )

252 i‡–(
g≠Rﬁe_°©e
 =
GAPROLE_STARTED
)

253 || (
g≠Rﬁe_°©e
 =
GAPROLE_WAITING
 )

254 || (
g≠Rﬁe_°©e
 =
GAPROLE_WAITING_AFTER_TIMEOUT
) )

256 
VOID
 
	`oßl_£t_evít
–
g≠Rﬁe_TaskID
, 
START_ADVERTISING_EVT
 );

263 
ªt
 = 
bÀInvÆidR™ge
;

267 
GAPROLE_ADVERT_OFF_TIME
:

268 i‡–
Àn
 = ( 
uöt16
 ) )

270 
g≠Rﬁe_AdvîtOffTime
 = *((
uöt16
*)
pVÆue
);

274 
ªt
 = 
bÀInvÆidR™ge
;

278 
GAPROLE_ADVERT_DATA
:

279 i‡–
Àn
 <
B_MAX_ADV_LEN
 )

281 
VOID
 
	`oßl_mem£t
–
g≠Rﬁe_AdvîtD©a
, 0, 
B_MAX_ADV_LEN
 );

282 
VOID
 
	`oßl_mem˝y
–
g≠Rﬁe_AdvîtD©a
, 
pVÆue
, 
Àn
 );

283 
g≠Rﬁe_AdvîtD©aLí
 = 
Àn
;

287 
ªt
 = 
bÀInvÆidR™ge
;

291 
GAPROLE_SCAN_RSP_DATA
:

292 i‡–
Àn
 <
B_MAX_ADV_LEN
 )

294 
VOID
 
	`oßl_mem£t
–
g≠Rﬁe_SˇnR•D©a
, 0, 
B_MAX_ADV_LEN
 );

295 
VOID
 
	`oßl_mem˝y
–
g≠Rﬁe_SˇnR•D©a
, 
pVÆue
, 
Àn
 );

296 
g≠Rﬁe_SˇnR•D©aLí
 = 
Àn
;

300 
ªt
 = 
bÀInvÆidR™ge
;

304 
GAPROLE_ADV_EVENT_TYPE
:

305 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
GAP_ADTYPE_ADV_LDC_DIRECT_IND
) )

307 
g≠Rﬁe_AdvEvítTy≥
 = *((
uöt8
*)
pVÆue
);

311 
ªt
 = 
bÀInvÆidR™ge
;

315 
GAPROLE_ADV_DIRECT_TYPE
:

316 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
ADDRTYPE_PRIVATE_RESOLVE
) )

318 
g≠Rﬁe_AdvDúe˘Ty≥
 = *((
uöt8
*)
pVÆue
);

322 
ªt
 = 
bÀInvÆidR™ge
;

326 
GAPROLE_ADV_DIRECT_ADDR
:

327 i‡–
Àn
 =
B_ADDR_LEN
 )

329 
VOID
 
	`oßl_mem˝y
–
g≠Rﬁe_AdvDúe˘Addr
, 
pVÆue
, 
B_ADDR_LEN
 ) ;

333 
ªt
 = 
bÀInvÆidR™ge
;

337 
GAPROLE_ADV_CHANNEL_MAP
:

338 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
) <= 0x07) )

340 
g≠Rﬁe_AdvCh™M≠
 = *((
uöt8
*)
pVÆue
);

344 
ªt
 = 
bÀInvÆidR™ge
;

348 
GAPROLE_ADV_FILTER_POLICY
:

349 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
GAP_FILTER_POLICY_WHITE
) )

351 
g≠Rﬁe_AdvFûãrPﬁicy
 = *((
uöt8
*)
pVÆue
);

355 
ªt
 = 
bÀInvÆidR™ge
;

359 
GAPROLE_RSSI_READ_RATE
:

360 i‡–
Àn
 = ( 
uöt16
 ) )

362 
g≠Rﬁe_RSSIRódR©e
 = *((
uöt16
*)
pVÆue
);

364 i‡–(
g≠Rﬁe_RSSIRódR©e
Ë&& (
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED
) )

367 
VOID
 
	`oßl_°¨t_timîEx
–
g≠Rﬁe_TaskID
, 
RSSI_READ_EVT
, 
g≠Rﬁe_RSSIRódR©e
 );

372 
ªt
 = 
bÀInvÆidR™ge
;

376 
GAPROLE_PARAM_UPDATE_ENABLE
:

377 i‡–(
Àn
 = ( 
uöt8
 )Ë&& (*((uöt8*)
pVÆue
Ë<
TRUE
) )

379 
g≠Rﬁe_P¨amUpd©eE«bÀ
 = *((
uöt8
*)
pVÆue
);

383 
ªt
 = 
bÀInvÆidR™ge
;

387 
GAPROLE_MIN_CONN_INTERVAL
:

389 
uöt16
 
√wI¡îvÆ
 = *((uöt16*)
pVÆue
);

390 i‡–
Àn
 = ( 
uöt16
 ) &&

391 –
√wI¡îvÆ
 >
MIN_CONN_INTERVAL
 ) &&

392 –
√wI¡îvÆ
 <
MAX_CONN_INTERVAL
 ) )

394 
g≠Rﬁe_MöC⁄nI¡îvÆ
 = 
√wI¡îvÆ
;

398 
ªt
 = 
bÀInvÆidR™ge
;

403 
GAPROLE_MAX_CONN_INTERVAL
:

405 
uöt16
 
√wI¡îvÆ
 = *((uöt16*)
pVÆue
);

406 i‡–
Àn
 = ( 
uöt16
 ) &&

407 –
√wI¡îvÆ
 >
MIN_CONN_INTERVAL
) &&

408 –
√wI¡îvÆ
 <
MAX_CONN_INTERVAL
) )

410 
g≠Rﬁe_MaxC⁄nI¡îvÆ
 = 
√wI¡îvÆ
;

414 
ªt
 = 
bÀInvÆidR™ge
;

419 
GAPROLE_SLAVE_LATENCY
:

421 
uöt16
 
œãncy
 = *((uöt16*)
pVÆue
);

422 i‡–
Àn
 = ( 
uöt16
 ) && (
œãncy
 < 
MAX_SLAVE_LATENCY
) )

424 
g≠Rﬁe_SœveL©ícy
 = 
œãncy
;

428 
ªt
 = 
bÀInvÆidR™ge
;

433 
GAPROLE_TIMEOUT_MULTIPLIER
:

435 
uöt16
 
√wTimeout
 = *((uöt16*)
pVÆue
);

436 i‡–
Àn
 = ( 
uöt16
 )

437 && (
√wTimeout
 >
MIN_TIMEOUT_MULTIPLIER
Ë&& (√wTimeouà<
MAX_TIMEOUT_MULTIPLIER
) )

439 
g≠Rﬁe_TimeoutMu…ùlõr
 = 
√wTimeout
;

443 
ªt
 = 
bÀInvÆidR™ge
;

450 i‡–(
∑øm
 < 
TGAP_PARAMID_MAX
Ë&& (
Àn
 = ( 
uöt16
 )) )

452 
ªt
 = 
	`GAP_SëP¨amVÆue
–
∑øm
, *((
uöt16
*)
pVÆue
) );

456 
ªt
 = 
INVALIDPARAMETER
;

461  ( 
ªt
 );

462 
	}
}

469 
bSètus_t
 
	$GAPRﬁe_GëP¨amëî
–
uöt16
 
∑øm
, *
pVÆue
 )

471 
bSètus_t
 
ªt
 = 
SUCCESS
;

472  
∑øm
 )

474 
GAPROLE_PROFILEROLE
:

475 *((
uöt8
*)
pVÆue
Ë
g≠Rﬁe_¥ofûeRﬁe
;

478 
GAPROLE_IRK
:

479 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠Rﬁe_IRK
, 
KEYLEN
 ) ;

482 
GAPROLE_SRK
:

483 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠Rﬁe_SRK
, 
KEYLEN
 ) ;

486 
GAPROLE_SIGNCOUNTER
:

487 *((
uöt32
*)
pVÆue
Ë
g≠Rﬁe_signCou¡î
;

490 
GAPROLE_BD_ADDR
:

491 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠Rﬁe_bdAddr
, 
B_ADDR_LEN
 ) ;

494 
GAPROLE_ADVERT_ENABLED
:

495 *((
uöt8
*)
pVÆue
Ë
g≠Rﬁe_AdvE«bÀd
;

498 
GAPROLE_ADVERT_OFF_TIME
:

499 *((
uöt16
*)
pVÆue
Ë
g≠Rﬁe_AdvîtOffTime
;

502 
GAPROLE_ADVERT_DATA
:

503 
VOID
 
	`oßl_mem˝y
–
pVÆue
 , 
g≠Rﬁe_AdvîtD©a
, 
g≠Rﬁe_AdvîtD©aLí
 );

506 
GAPROLE_SCAN_RSP_DATA
:

507 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠Rﬁe_SˇnR•D©a
, 
g≠Rﬁe_SˇnR•D©aLí
 ) ;

510 
GAPROLE_ADV_EVENT_TYPE
:

511 *((
uöt8
*)
pVÆue
Ë
g≠Rﬁe_AdvEvítTy≥
;

514 
GAPROLE_ADV_DIRECT_TYPE
:

515 *((
uöt8
*)
pVÆue
Ë
g≠Rﬁe_AdvDúe˘Ty≥
;

518 
GAPROLE_ADV_DIRECT_ADDR
:

519 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠Rﬁe_AdvDúe˘Addr
, 
B_ADDR_LEN
 ) ;

522 
GAPROLE_ADV_CHANNEL_MAP
:

523 *((
uöt8
*)
pVÆue
Ë
g≠Rﬁe_AdvCh™M≠
;

526 
GAPROLE_ADV_FILTER_POLICY
:

527 *((
uöt8
*)
pVÆue
Ë
g≠Rﬁe_AdvFûãrPﬁicy
;

530 
GAPROLE_CONNHANDLE
:

531 *((
uöt16
*)
pVÆue
Ë
g≠Rﬁe_C⁄√˘i⁄H™dÀ
;

534 
GAPROLE_RSSI_READ_RATE
:

535 *((
uöt16
*)
pVÆue
Ë
g≠Rﬁe_RSSIRódR©e
;

538 
GAPROLE_PARAM_UPDATE_ENABLE
:

539 *((
uöt16
*)
pVÆue
Ë
g≠Rﬁe_P¨amUpd©eE«bÀ
;

542 
GAPROLE_MIN_CONN_INTERVAL
:

543 *((
uöt16
*)
pVÆue
Ë
g≠Rﬁe_MöC⁄nI¡îvÆ
;

546 
GAPROLE_MAX_CONN_INTERVAL
:

547 *((
uöt16
*)
pVÆue
Ë
g≠Rﬁe_MaxC⁄nI¡îvÆ
;

550 
GAPROLE_SLAVE_LATENCY
:

551 *((
uöt16
*)
pVÆue
Ë
g≠Rﬁe_SœveL©ícy
;

554 
GAPROLE_TIMEOUT_MULTIPLIER
:

555 *((
uöt16
*)
pVÆue
Ë
g≠Rﬁe_TimeoutMu…ùlõr
;

558 
GAPROLE_CONN_BD_ADDR
:

559 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
g≠Rﬁe_C⁄√˘edDevAddr
, 
B_ADDR_LEN
 ) ;

564 i‡–
∑øm
 < 
TGAP_PARAMID_MAX
 )

566 *((
uöt16
*)
pVÆue
Ë
	`GAP_GëP¨amVÆue
–
∑øm
 );

570 
ªt
 = 
INVALIDPARAMETER
;

575  ( 
ªt
 );

576 
	}
}

583 
bSètus_t
 
	$GAPRﬁe_SèπDevi˚
–
g≠RﬁesCBs_t
 *
pAµCÆlbacks
 )

585 i‡–
g≠Rﬁe_°©e
 =
GAPROLE_INIT
 )

588 i‡–
pAµCÆlbacks
 )

590 
pG≠Rﬁes_AµCGs
 = 
pAµCÆlbacks
;

594 
	`g≠Rﬁe_SëupGAP
();

596  ( 
SUCCESS
 );

600  ( 
bÀAÃódyInReque°edMode
 );

602 
	}
}

609 
bSètus_t
 
	$GAPRﬁe_Tîmö©eC⁄√˘i⁄
( )

611 i‡–(
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED
)

612 || (
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED_ADV
) )

614  ( 
	`GAP_Tîmö©eLökReq
–
g≠Rﬁe_TaskID
, 
g≠Rﬁe_C⁄√˘i⁄H™dÀ
,

615 
HCI_DISCONNECT_REMOTE_USER_TERM
 ) );

619  ( 
bÀInc‹ª˘Mode
 );

621 
	}
}

632 
	$GAPRﬁe_Inô
–
uöt8
 
èsk_id
 )

634 
g≠Rﬁe_TaskID
 = 
èsk_id
;

636 
g≠Rﬁe_°©e
 = 
GAPROLE_INIT
;

637 
g≠Rﬁe_C⁄√˘i⁄H™dÀ
 = 
INVALID_CONNHANDLE
;

639 
	`GAP_Regi°îF‹HCIMsgs
–
g≠Rﬁe_TaskID
 );

642 
g≠Rﬁe_¥ofûeRﬁe
 = (
GAP_PROFILE_PERIPHERAL
 | 
GAP_PROFILE_BROADCASTER
);

643 
VOID
 
	`oßl_mem£t
–
g≠Rﬁe_IRK
, 0, 
KEYLEN
 );

644 
VOID
 
	`oßl_mem£t
–
g≠Rﬁe_SRK
, 0, 
KEYLEN
 );

645 
g≠Rﬁe_signCou¡î
 = 0;

646 
g≠Rﬁe_AdvEvítTy≥
 = 
GAP_ADTYPE_ADV_IND
;

647 
g≠Rﬁe_AdvDúe˘Ty≥
 = 
ADDRTYPE_PUBLIC
;

648 
g≠Rﬁe_AdvCh™M≠
 = 
GAP_ADVCHAN_ALL
;

649 
g≠Rﬁe_AdvFûãrPﬁicy
 = 
GAP_FILTER_POLICY_ALL
;

652 
VOID
 
	`oßl_¢v_ªad
–
BLE_NVID_IRK
, 
KEYLEN
, 
g≠Rﬁe_IRK
 );

653 
VOID
 
	`oßl_¢v_ªad
–
BLE_NVID_CSRK
, 
KEYLEN
, 
g≠Rﬁe_SRK
 );

654 
VOID
 
	`oßl_¢v_ªad
–
BLE_NVID_SIGNCOUNTER
, –
uöt32
 ), &
g≠Rﬁe_signCou¡î
 );

655 
	}
}

662 
uöt16
 
	$GAPRﬁe_Pro˚ssEvít
–
uöt8
 
èsk_id
, 
uöt16
 
evíts
 )

664 
VOID
 
èsk_id
;

666 i‡–
evíts
 & 
SYS_EVENT_MSG
 )

668 
uöt8
 *
pMsg
;

670 i‡–(
pMsg
 = 
	`oßl_msg_ª˚ive
–
g≠Rﬁe_TaskID
 )Ë!
NULL
 )

672 
	`g≠Rﬁe_Pro˚ssOSALMsg
–(
oßl_evít_hdr_t
 *)
pMsg
 );

675 
VOID
 
	`oßl_msg_dóŒoˇã
–
pMsg
 );

679  (
evíts
 ^ 
SYS_EVENT_MSG
);

682 i‡–
evíts
 & 
GAP_EVENT_SIGN_COUNTER_CHANGED
 )

685 
VOID
 
	`oßl_¢v_wrôe
–
BLE_NVID_SIGNCOUNTER
, –
uöt32
 ), &
g≠Rﬁe_signCou¡î
 );

687  ( 
evíts
 ^ 
GAP_EVENT_SIGN_COUNTER_CHANGED
 );

690 i‡–
evíts
 & 
START_ADVERTISING_EVT
 )

692 i‡–
g≠Rﬁe_AdvE«bÀd
 )

694 
g≠AdvîtisögP¨ams_t
 
∑øms
;

697 i‡–
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED
 )

700 
∑øms
.
evítTy≥
 = 
GAP_ADTYPE_ADV_NONCONN_IND
;

704 
∑øms
.
evítTy≥
 = 
g≠Rﬁe_AdvEvítTy≥
;

705 
∑øms
.
öôüt‹AddrTy≥
 = 
g≠Rﬁe_AdvDúe˘Ty≥
;

706 
VOID
 
	`oßl_mem˝y
–
∑øms
.
öôüt‹Addr
, 
g≠Rﬁe_AdvDúe˘Addr
, 
B_ADDR_LEN
 );

708 
∑øms
.
ch™√lM≠
 = 
g≠Rﬁe_AdvCh™M≠
;

709 
∑øms
.
fûãrPﬁicy
 = 
g≠Rﬁe_AdvFûãrPﬁicy
;

711 i‡–
	`GAP_MakeDiscovîabÀ
–
g≠Rﬁe_TaskID
, &
∑øms
 ) !
SUCCESS
 )

713 
g≠Rﬁe_°©e
 = 
GAPROLE_ERROR
;

714 i‡–
pG≠Rﬁes_AµCGs
 &&ÖG≠Rﬁes_AµCGs->
p‚SèãCh™ge
 )

716 
pG≠Rﬁes_AµCGs
->
	`p‚SèãCh™ge
–
g≠Rﬁe_°©e
 );

720  ( 
evíts
 ^ 
START_ADVERTISING_EVT
 );

723 i‡–
evíts
 & 
RSSI_READ_EVT
 )

726 i‡–(
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED
)

727 || (
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED_ADV
) )

730 
VOID
 
	`HCI_RódRssiCmd
–
g≠Rﬁe_C⁄√˘i⁄H™dÀ
 );

733 i‡–
g≠Rﬁe_RSSIRódR©e
 )

735 
VOID
 
	`oßl_°¨t_timîEx
–
g≠Rﬁe_TaskID
, 
RSSI_READ_EVT
, 
g≠Rﬁe_RSSIRódR©e
 );

738  ( 
evíts
 ^ 
RSSI_READ_EVT
 );

741 i‡–
evíts
 & 
UPDATE_PARAMS_TIMEOUT_EVT
 )

744 i‡–
	`oßl_gë_timeoutEx
–
g≠Rﬁe_TaskID
, 
UPDATE_PARAMS_TIMEOUT_EVT
 ) )

746 
VOID
 
	`oßl_°›_timîEx
–
g≠Rﬁe_TaskID
, 
UPDATE_PARAMS_TIMEOUT_EVT
 );

750 
VOID
 
	`GAP_Tîmö©eLökReq
–
g≠Rﬁe_TaskID
, 
g≠Rﬁe_C⁄√˘i⁄H™dÀ
,

751 
HCI_DISCONNECT_REMOTE_USER_TERM
 );

753  ( 
evíts
 ^ 
UPDATE_PARAMS_TIMEOUT_EVT
 );

758 
	}
}

769 
	$g≠Rﬁe_Pro˚ssOSALMsg
–
oßl_evít_hdr_t
 *
pMsg
 )

771  
pMsg
->
evít
 )

773 
HCI_GAP_EVENT_EVENT
:

774 i‡–
pMsg
->
°©us
 =
HCI_COMMAND_COMPLETE_EVENT_CODE
 )

776 
hciEvt_CmdCom∂ëe_t
 *
pPkt
 = (hciEvt_CmdCom∂ëe_à*)
pMsg
;

778 i‡–
pPkt
->
cmdOpcode
 =
HCI_READ_RSSI
 )

780 
öt8
 
rssi
 = (öt8)
pPkt
->
pRëu∫P¨am
[3];

782 i‡–((
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED
)

783 || (
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED_ADV
))

784 && (
rssi
 !
RSSI_NOT_AVAILABLE
) )

787 i‡–
pG≠Rﬁes_AµCGs
 &&ÖG≠Rﬁes_AµCGs->
p‚RssiRód
 )

789 
pG≠Rﬁes_AµCGs
->
	`p‚RssiRód
–
rssi
 );

796 
GAP_MSG_EVENT
:

797 
	`g≠Rﬁe_Pro˚ssGAPMsg
–(
g≠EvítHdr_t
 *)
pMsg
 );

800 
L2CAP_SIGNAL_EVENT
:

802 
l2ˇpSig«lEvít_t
 *
pPkt
 = (l2ˇpSig«lEvít_à*)
pMsg
;

805 i‡–
pPkt
->
›code
 =
L2CAP_PARAM_UPDATE_RSP
 )

807 
l2ˇpP¨amUpd©eR•_t
 *
pR•
 = (l2ˇpP¨amUpd©eR•_à*)&(
pPkt
->
cmd
.
upd©eR•
);

808 i‡–
pR•
->
ªsu…
 =
SUCCESS
 )

811 
VOID
 
	`oßl_°›_timîEx
–
g≠Rﬁe_TaskID
, 
UPDATE_PARAMS_TIMEOUT_EVT
 );

820 
	}
}

831 
	$g≠Rﬁe_Pro˚ssGAPMsg
–
g≠EvítHdr_t
 *
pMsg
 )

833 
uöt8
 
nŸify
 = 
FALSE
;

835  
pMsg
->
›code
 )

837 
GAP_DEVICE_INIT_DONE_EVENT
:

839 
g≠Devi˚InôD⁄eEvít_t
 *
pPkt
 = (g≠Devi˚InôD⁄eEvít_à*)
pMsg
;

840 
bSètus_t
 
°©
 = 
pPkt
->
hdr
.
°©us
;

842 i‡–
°©
 =
SUCCESS
 )

845 
VOID
 
	`oßl_¢v_wrôe
–
BLE_NVID_IRK
, 
KEYLEN
, 
g≠Rﬁe_IRK
 );

846 
VOID
 
	`oßl_¢v_wrôe
–
BLE_NVID_CSRK
, 
KEYLEN
, 
g≠Rﬁe_SRK
 );

849 
VOID
 
	`oßl_mem˝y
–
g≠Rﬁe_bdAddr
, 
pPkt
->
devAddr
, 
B_ADDR_LEN
 );

851 
g≠Rﬁe_°©e
 = 
GAPROLE_STARTED
;

854 
°©
 = 
	`GAP_Upd©eAdvîtisögD©a
–
g≠Rﬁe_TaskID
,

855 
TRUE
, 
g≠Rﬁe_AdvîtD©aLí
, 
g≠Rﬁe_AdvîtD©a
 );

858 i‡–
°©
 !
SUCCESS
 )

860 
g≠Rﬁe_°©e
 = 
GAPROLE_ERROR
;

863 
nŸify
 = 
TRUE
;

867 
GAP_ADV_DATA_UPDATE_DONE_EVENT
:

869 
g≠AdvD©aUpd©eEvít_t
 *
pPkt
 = (g≠AdvD©aUpd©eEvít_à*)
pMsg
;

871 i‡–
pPkt
->
hdr
.
°©us
 =
SUCCESS
 )

873 i‡–
pPkt
->
adTy≥
 )

876 
pPkt
->
hdr
.
°©us
 = 
	`GAP_Upd©eAdvîtisögD©a
–
g≠Rﬁe_TaskID
,

877 
FALSE
, 
g≠Rﬁe_SˇnR•D©aLí
, 
g≠Rﬁe_SˇnR•D©a
 );

882 
VOID
 
	`oßl_£t_evít
–
g≠Rﬁe_TaskID
, 
START_ADVERTISING_EVT
 );

886 i‡–
pPkt
->
hdr
.
°©us
 !
SUCCESS
 )

889 
g≠Rﬁe_°©e
 = 
GAPROLE_ERROR
;

890 
nŸify
 = 
TRUE
;

895 
GAP_MAKE_DISCOVERABLE_DONE_EVENT
:

896 
GAP_END_DISCOVERABLE_DONE_EVENT
:

898 
g≠MakeDiscovîabÀR•Evít_t
 *
pPkt
 = (g≠MakeDiscovîabÀR•Evít_à*)
pMsg
;

900 i‡–
pPkt
->
hdr
.
°©us
 =
SUCCESS
 )

902 i‡–
pMsg
->
›code
 =
GAP_MAKE_DISCOVERABLE_DONE_EVENT
 )

904 i‡–
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED
 )

906 
g≠Rﬁe_°©e
 = 
GAPROLE_CONNECTED_ADV
;

910 
g≠Rﬁe_°©e
 = 
GAPROLE_ADVERTISING
;

916 i‡–
g≠Rﬁe_AdvîtOffTime
 != 0 )

918 i‡––
g≠Rﬁe_AdvE«bÀd
 ) )

920 
VOID
 
	`oßl_°¨t_timîEx
–
g≠Rﬁe_TaskID
, 
START_ADVERTISING_EVT
, 
g≠Rﬁe_AdvîtOffTime
 );

929 
g≠Rﬁe_AdvE«bÀd
 = 
FALSE
;

933 
g≠Rﬁe_°©e
 = 
GAPROLE_WAITING
;

939 
g≠Rﬁe_°©e
 = 
GAPROLE_ERROR
;

941 
nŸify
 = 
TRUE
;

945 
GAP_LINK_ESTABLISHED_EVENT
:

947 
g≠E°LökReqEvít_t
 *
pPkt
 = (g≠E°LökReqEvít_à*)
pMsg
;

949 i‡–
pPkt
->
hdr
.
°©us
 =
SUCCESS
 )

951 
VOID
 
	`oßl_mem˝y
–
g≠Rﬁe_C⁄√˘edDevAddr
, 
pPkt
->
devAddr
, 
B_ADDR_LEN
 );

952 
g≠Rﬁe_C⁄√˘i⁄H™dÀ
 = 
pPkt
->
c⁄√˘i⁄H™dÀ
;

953 
g≠Rﬁe_°©e
 = 
GAPROLE_CONNECTED
;

955 i‡–
g≠Rﬁe_RSSIRódR©e
 )

958 
VOID
 
	`oßl_°¨t_timîEx
–
g≠Rﬁe_TaskID
, 
RSSI_READ_EVT
, 
g≠Rﬁe_RSSIRódR©e
 );

962 i‡––
g≠Rﬁe_P¨amUpd©eE«bÀ
 =
TRUE
 ) &&

963 –(
pPkt
->
c⁄nI¡îvÆ
 < 
g≠Rﬁe_MöC⁄nI¡îvÆ
) ||

964 (
pPkt
->
c⁄nI¡îvÆ
 > 
g≠Rﬁe_MaxC⁄nI¡îvÆ
) ||

965 (
pPkt
->
c⁄nL©ícy
 !
g≠Rﬁe_SœveL©ícy
) ||

966 (
pPkt
->
c⁄nTimeout
 !
g≠Rﬁe_TimeoutMu…ùlõr
) ))

968 
	`g≠Rﬁe_SídUpd©eP¨am
–
pPkt
->
c⁄nI¡îvÆ
,ÖPkt->
c⁄nL©ícy
 );

972 
VOID
 
	`GAPB⁄dMgr_LökE°
–
pPkt
->
devAddrTy≥
,ÖPkt->
devAddr
,ÖPkt->
c⁄√˘i⁄H™dÀ
, 
GAP_PROFILE_PERIPHERAL
 );

976 
g≠Rﬁe_°©e
 = 
GAPROLE_ERROR
;

978 
nŸify
 = 
TRUE
;

982 
GAP_LINK_TERMINATED_EVENT
:

984 
VOID
 
	`GAPB⁄dMgr_Pro˚ssGAPMsg
–(
g≠EvítHdr_t
 *)
pMsg
 );

985 
	`oßl_mem£t
–
g≠Rﬁe_C⁄√˘edDevAddr
, 0, 
B_ADDR_LEN
 );

987 i‡–
g≠Rﬁe_°©e
 =
GAPROLE_CONNECTED_ADV
 )

990 
	`GAP_EndDiscovîabÀ
–
g≠Rﬁe_TaskID
 );

991 
g≠Rﬁe_°©e
 = 
GAPROLE_CONNECTED
;

995 
g≠Tîmö©eLökEvít_t
 *
pPkt
 = (g≠Tîmö©eLökEvít_à*)
pMsg
;

996 if–
pPkt
->
ªas⁄
 =
LL_SUPERVISION_TIMEOUT_TERM
 )

998 
g≠Rﬁe_°©e
 = 
GAPROLE_WAITING_AFTER_TIMEOUT
;

1002 
g≠Rﬁe_°©e
 = 
GAPROLE_WAITING
;

1005 
nŸify
 = 
TRUE
;

1007 
VOID
 
	`oßl_£t_evít
–
g≠Rﬁe_TaskID
, 
START_ADVERTISING_EVT
 );

1010 
g≠Rﬁe_C⁄√˘i⁄H™dÀ
 = 
INVALID_CONNHANDLE
;

1014 
GAP_LINK_PARAM_UPDATE_EVENT
:

1016 
g≠LökUpd©eEvít_t
 *
pPkt
 = (g≠LökUpd©eEvít_à*)
pMsg
;

1018 i‡–(
pPkt
->
hdr
.
°©us
 !
SUCCESS
)

1019 || (
pPkt
->
c⁄nI¡îvÆ
 < 
g≠Rﬁe_MöC⁄nI¡îvÆ
)

1020 || (
pPkt
->
c⁄nI¡îvÆ
 > 
g≠Rﬁe_MaxC⁄nI¡îvÆ
) )

1023 
	`g≠Rﬁe_SídUpd©eP¨am
–
pPkt
->
c⁄nI¡îvÆ
,ÖPkt->
c⁄nL©ícy
 );

1028 
VOID
 
	`oßl_°›_timîEx
–
g≠Rﬁe_TaskID
, 
UPDATE_PARAMS_TIMEOUT_EVT
 );

1037 i‡–
nŸify
 =
TRUE
 )

1040 i‡–
pG≠Rﬁes_AµCGs
 &&ÖG≠Rﬁes_AµCGs->
p‚SèãCh™ge
 )

1042 
pG≠Rﬁes_AµCGs
->
	`p‚SèãCh™ge
–
g≠Rﬁe_°©e
 );

1045 
	}
}

1057 
	$g≠Rﬁe_SëupGAP
( )

1059 
VOID
 
	`GAP_Devi˚Inô
–
g≠Rﬁe_TaskID
,

1060 
g≠Rﬁe_¥ofûeRﬁe
, 0,

1061 
g≠Rﬁe_IRK
, 
g≠Rﬁe_SRK
,

1062 &
g≠Rﬁe_signCou¡î
 );

1063 
	}
}

1075 
	$g≠Rﬁe_SídUpd©eP¨am
–
uöt16
 
c⁄nI¡îvÆ
, uöt16 
c⁄nL©ícy
 )

1077 
l2ˇpP¨amUpd©eReq_t
 
upd©eReq
;

1078 
uöt32
 
timeout
;

1081 
uöt16
 
ef„˘iveOldI¡îvÆ
 = (
c⁄nI¡îvÆ
 * (
c⁄nL©ícy
 + 1));

1084 
uöt16
 
ef„˘iveNewMaxI¡îvÆ
 = (
g≠Rﬁe_MaxC⁄nI¡îvÆ
 * (
g≠Rﬁe_SœveL©ícy
 + 1));

1087 
upd©eReq
.
öãrvÆMö
 = 
g≠Rﬁe_MöC⁄nI¡îvÆ
;

1088 
upd©eReq
.
öãrvÆMax
 = 
g≠Rﬁe_MaxC⁄nI¡îvÆ
;

1089 
upd©eReq
.
¶aveL©ícy
 = 
g≠Rﬁe_SœveL©ícy
;

1090 
upd©eReq
.
timeoutMu…ùlõr
 = 
g≠Rﬁe_TimeoutMu…ùlõr
;

1092 
VOID
 
	`L2CAP_C⁄nP¨amUpd©eReq
–
g≠Rﬁe_C⁄√˘i⁄H™dÀ
, &
upd©eReq
, 
g≠Rﬁe_TaskID
 );

1095 if–
ef„˘iveOldI¡îvÆ
 > 
ef„˘iveNewMaxI¡îvÆ
 )

1097 
timeout
 = (
uöt32
)(
ef„˘iveOldI¡îvÆ
Ë* 
CONN_INTERVAL_MULTIPLIER
;

1101 
timeout
 = (
uöt32
)(
ef„˘iveNewMaxI¡îvÆ
Ë* 
CONN_INTERVAL_MULTIPLIER
;

1104 if–
timeout
 > 
MAX_TIMEOUT_VALUE
 )

1106 
timeout
 = 
MAX_TIMEOUT_VALUE
;

1109 
VOID
 
	`oßl_°¨t_timîEx
–
g≠Rﬁe_TaskID
, 
UPDATE_PARAMS_TIMEOUT_EVT
, (
uöt16
)(
timeout
) );

1110 
	}
}

	@../../Profiles/Roles/peripheralBroadcaster.h

42 #i‚de‡
PERIPHERAL_BROADCASTER_H


43 
	#PERIPHERAL_BROADCASTER_H


	)

45 #ifde‡
__˝lu•lus


61 
	#GAPROLE_PROFILEROLE
 0x300

62 
	#GAPROLE_IRK
 0x301

63 
	#GAPROLE_SRK
 0x302

64 
	#GAPROLE_SIGNCOUNTER
 0x303

65 
	#GAPROLE_BD_ADDR
 0x304

66 
	#GAPROLE_ADVERT_ENABLED
 0x305

67 
	#GAPROLE_ADVERT_OFF_TIME
 0x306

68 
	#GAPROLE_ADVERT_DATA
 0x307

69 
	#GAPROLE_SCAN_RSP_DATA
 0x308

70 
	#GAPROLE_ADV_EVENT_TYPE
 0x309

71 
	#GAPROLE_ADV_DIRECT_TYPE
 0x30A

72 
	#GAPROLE_ADV_DIRECT_ADDR
 0x30B

73 
	#GAPROLE_ADV_CHANNEL_MAP
 0x30C

74 
	#GAPROLE_ADV_FILTER_POLICY
 0x30D

75 
	#GAPROLE_CONNHANDLE
 0x30E

76 
	#GAPROLE_RSSI_READ_RATE
 0x30F

77 
	#GAPROLE_PARAM_UPDATE_ENABLE
 0x310

78 
	#GAPROLE_MIN_CONN_INTERVAL
 0x311

79 
	#GAPROLE_MAX_CONN_INTERVAL
 0x312

80 
	#GAPROLE_SLAVE_LATENCY
 0x313

81 
	#GAPROLE_TIMEOUT_MULTIPLIER
 0x314

82 
	#GAPROLE_CONN_BD_ADDR
 0x315

83 

	)

94 
GAPROLE_INIT
 = 0,

95 
GAPROLE_STARTED
,

96 
GAPROLE_ADVERTISING
,

97 
GAPROLE_WAITING
,

98 
GAPROLE_WAITING_AFTER_TIMEOUT
,

99 
GAPROLE_CONNECTED
,

100 
GAPROLE_CONNECTED_ADV
,

101 
GAPROLE_ERROR


102 } 
	tg≠rﬁe_Sèãs_t
;

116 (*
g≠RﬁesSèãNŸify_t
)–
	tg≠rﬁe_Sèãs_t
 
	t√wSèã
 );

121 (*
g≠RﬁesRssiRód_t
)–
	töt8
 
	t√wRSSI
 );

128 
g≠RﬁesSèãNŸify_t
 
p‚SèãCh™ge
;

129 
g≠RﬁesRssiRód_t
 
p‚RssiRód
;

130 } 
	tg≠RﬁesCBs_t
;

159 
bSètus_t
 
GAPRﬁe_SëP¨amëî
–
uöt16
 
∑øm
, 
uöt8
 
Àn
, *
pVÆue
 );

176 
bSètus_t
 
GAPRﬁe_GëP¨amëî
–
uöt16
 
∑øm
, *
pVÆue
 );

185 
bSètus_t
 
GAPRﬁe_SèπDevi˚
–
g≠RﬁesCBs_t
 *
pAµCÆlbacks
 );

192 
bSètus_t
 
GAPRﬁe_Tîmö©eC⁄√˘i⁄
( );

217 
GAPRﬁe_Inô
–
uöt8
 
èsk_id
 );

233 
uöt16
 
GAPRﬁe_Pro˚ssEvít
–
uöt8
 
èsk_id
, uöt16 
evíts
 );

238 #ifde‡
__˝lu•lus


	@../../Profiles/ScanParam/scanparamservice.c

42 
	~"bcomdef.h
"

43 
	~"OSAL.h
"

44 
	~"©t.h
"

45 
	~"g©t.h
"

46 
	~"g©t_uuid.h
"

47 
	~"g©t£rv≠p.h
"

48 
	~"g©t_¥ofûe_uuid.h
"

49 
	~"g≠b⁄dmgr.h
"

50 
	~"lökdb.h
"

51 
	~"sˇ≈¨am£rvi˚.h
"

69 
CONST
 
uöt8
 
	gsˇnP¨amSîvUUID
[
ATT_BT_UUID_SIZE
] =

71 
LO_UINT16
(
SCAN_PARAM_SERV_UUID
), 
HI_UINT16
(SCAN_PARAM_SERV_UUID)

75 
CONST
 
uöt8
 
	gsˇnI¡îvÆWödowUUID
[
ATT_BT_UUID_SIZE
] =

77 
LO_UINT16
(
SCAN_INTERVAL_WINDOW_UUID
), 
HI_UINT16
(SCAN_INTERVAL_WINDOW_UUID)

81 
CONST
 
uöt8
 
	gsˇnP¨amRe‰eshUUID
[
ATT_BT_UUID_SIZE
] =

83 
LO_UINT16
(
SCAN_REFRESH_UUID
), 
HI_UINT16
(SCAN_REFRESH_UUID)

100 
sˇnP¨amSîvi˚CB_t
 
	gsˇnP¨amSîvi˚CB
;

107 
CONST
 
g©tAârTy≥_t
 
	gsˇnP¨amSîvi˚
 = { 
ATT_BT_UUID_SIZE
, 
sˇnP¨amSîvUUID
 };

110 
uöt8
 
	gsˇnI¡îvÆWödowPr›s
 = 
GATT_PROP_WRITE_NO_RSP
;

111 
uöt8
 
	gsˇnI¡îvÆWödow
[
SCAN_INTERVAL_WINDOW_CHAR_LEN
];

114 
uöt8
 
	gsˇnP¨amRe‰eshPr›s
 = 
GATT_PROP_NOTIFY
;

115 
uöt8
 
	gsˇnP¨amRe‰esh
[
SCAN_PARAM_REFRESH_LEN
];

116 
g©tCh¨Cfg_t
 
	gsˇnP¨amRe‰eshClõ¡Ch¨Cfg
[
GATT_MAX_NUM_CONN
];

122 
g©tAâribuã_t
 
	gsˇnP¨amAârTbl
[] =

126 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

127 
GATT_PERMIT_READ
,

129 (
uöt8
 *)&
sˇnP¨amSîvi˚


134 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

135 
GATT_PERMIT_READ
,

137 &
sˇnI¡îvÆWödowPr›s


142 { 
ATT_BT_UUID_SIZE
, 
sˇnI¡îvÆWödowUUID
 },

143 
GATT_PERMIT_ENCRYPT_WRITE
,

145 
sˇnI¡îvÆWödow


150 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

151 
GATT_PERMIT_READ
,

153 &
sˇnP¨amRe‰eshPr›s


158 { 
ATT_BT_UUID_SIZE
, 
sˇnP¨amRe‰eshUUID
 },

161 
sˇnP¨amRe‰esh


166 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

167 
GATT_PERMIT_READ
 | 
GATT_PERMIT_ENCRYPT_WRITE
,

169 (
uöt8
 *Ë&
sˇnP¨amRe‰eshClõ¡Ch¨Cfg


176 
	mSCAN_PARAM_SERVICE_IDX
,

177 
	mSCAN_PARAM_INTERVAL_DECL_IDX
,

178 
	mSCAN_PARAM_INTERVAL_IDX
,

179 
	mSCAN_PARAM_REFRESH_DECL_IDX
,

180 
	mSCAN_PARAM_REFRESH_IDX
,

181 
	mSCAN_PARAM_REFRESH_CCCD_IDX


188 
bSètus_t
 
sˇnP¨amWrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

189 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

190 
uöt8
 
sˇnP¨amRódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

191 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

198 
CONST
 
g©tSîvi˚CBs_t
 
	gsˇnP¨amCBs
 =

200 
sˇnP¨amRódAârCB
,

201 
sˇnP¨amWrôeAârCB
,

202 
NULL


217 
bSètus_t
 
	$SˇnP¨am_AddSîvi˚
( )

219 
uöt8
 
°©us
 = 
SUCCESS
;

222 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
sˇnP¨amRe‰eshClõ¡Ch¨Cfg
 );

225 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
sˇnP¨amAârTbl
, 
	`GATT_NUM_ATTRS
( scanParamAttrTbl ),

226 &
sˇnP¨amCBs
 );

228  ( 
°©us
 );

229 
	}
}

240 
	$SˇnP¨am_Regi°î
–
sˇnP¨amSîvi˚CB_t
 
p‚Sîvi˚CB
 )

242 
sˇnP¨amSîvi˚CB
 = 
p‚Sîvi˚CB
;

243 
	}
}

259 
bSètus_t
 
	$SˇnP¨am_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 )

261 
bSètus_t
 
ªt
 = 
SUCCESS
;

263  
∑øm
 )

266 
ªt
 = 
INVALIDPARAMETER
;

270  ( 
ªt
 );

271 
	}
}

286 
bSètus_t
 
	$SˇnP¨am_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

288 
bSètus_t
 
ªt
 = 
SUCCESS
;

289  
∑øm
 )

291 
SCAN_PARAM_PARAM_INTERVAL
:

292 *((
uöt16
*)
vÆue
Ë
	`BUILD_UINT16
(
sˇnI¡îvÆWödow
[0],

293 
sˇnI¡îvÆWödow
[1]);

296 
SCAN_PARAM_PARAM_WINDOW
:

297 *((
uöt16
*)
vÆue
Ë
	`BUILD_UINT16
(
sˇnI¡îvÆWödow
[2],

298 
sˇnI¡îvÆWödow
[3]);

302 
ªt
 = 
INVALIDPARAMETER
;

306  ( 
ªt
 );

307 
	}
}

318 
	$SˇnP¨am_Re‰eshNŸify
–
uöt16
 
c⁄nH™dÀ
 )

320 
©tH™dÀVÆueNŸi_t
 
nŸi
;

321 
uöt16
 
vÆue
;

323 
vÆue
 = 
	`GATTSîvAµ_RódCh¨Cfg
–
c⁄nH™dÀ
, 
sˇnP¨amRe‰eshClõ¡Ch¨Cfg
 );

325 i‡–
vÆue
 & 
GATT_CLIENT_CFG_NOTIFY
 )

328 
nŸi
.
h™dÀ
 = 
sˇnP¨amAârTbl
[
SCAN_PARAM_REFRESH_CCCD_IDX
].handle;

329 
nŸi
.
Àn
 = 
SCAN_PARAM_REFRESH_LEN
;

330 
nŸi
.
vÆue
[0] = 
SCAN_PARAM_REFRESH_REQ
;

331 
	`GATT_NŸifiˇti⁄
–
c⁄nH™dÀ
, &
nŸi
, 
FALSE
 );

333 
	}
}

349 
uöt8
 
	$sˇnP¨amRódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

350 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

352 
bSètus_t
 
°©us
 = 
SUCCESS
;

354  ( 
°©us
 );

355 
	}
}

370 
bSètus_t
 
	$sˇnP¨amWrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

371 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

373 
bSètus_t
 
°©us
 = 
SUCCESS
;

376 i‡–
off£t
 > 0 )

378  ( 
ATT_ERR_ATTR_NOT_LONG
 );

381 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

384 i‡–
uuid
 =
SCAN_INTERVAL_WINDOW_UUID
 )

386 i‡–
Àn
 =
SCAN_INTERVAL_WINDOW_CHAR_LEN
 )

388 
uöt16
 
öãrvÆ
 = 
	`BUILD_UINT16
–
pVÆue
[0],ÖValue[1] );

389 
uöt16
 
wödow
 = 
	`BUILD_UINT16
–
pVÆue
[0],ÖValue[1] );

392 i‡–
wödow
 <
öãrvÆ
 )

394 
	`oßl_mem˝y
–
pAâr
->
pVÆue
,ÖVÆue, 
Àn
 );

396 (*
sˇnP¨amSîvi˚CB
)–
SCAN_INTERVAL_WINDOW_SET
 );

400 
°©us
 = 
ATT_ERR_INVALID_VALUE
;

405 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

408 i‡–
uuid
 =
GATT_CLIENT_CHAR_CFG_UUID
 )

410 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

411 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

415 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

418  ( 
°©us
 );

419 
	}
}

431 
	$SˇnP¨am_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

434 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

437 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

438 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

439 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

441 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
sˇnP¨amRe‰eshClõ¡Ch¨Cfg
 );

444 
	}
}

	@../../Profiles/ScanParam/scanparamservice.h

40 #i‚de‡
SCANPARAMSERVICE_H


41 
	#SCANPARAMSERVICE_H


	)

43 #ifde‡
__˝lu•lus


57 
	#SCAN_INTERVAL_WINDOW_CHAR_LEN
 4

	)

58 
	#SCAN_PARAM_REFRESH_LEN
 1

	)

61 
	#SCAN_PARAM_REFRESH_REQ
 0x00

	)

64 
	#SCAN_INTERVAL_WINDOW_SET
 1

	)

67 
	#SCAN_PARAM_PARAM_INTERVAL
 0

	)

68 
	#SCAN_PARAM_PARAM_WINDOW
 1

	)

83 (*
sˇnP¨amSîvi˚CB_t
)–
	tuöt8
 
	tevít
 );

97 
bSètus_t
 
SˇnP¨am_AddSîvi˚
( );

108 
SˇnP¨am_Regi°î
–
sˇnP¨amSîvi˚CB_t
 
p‚Sîvi˚CB
 );

124 
bSètus_t
 
SˇnP¨am_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

139 
bSètus_t
 
SˇnP¨am_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

150 
SˇnP¨am_Re‰eshNŸify
–
uöt16
 
c⁄nH™dÀ
 );

162 
SˇnP¨am_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

167 #ifde‡
__˝lu•lus


	@../../Profiles/SensorProfile/accelerometerservice.c

43 
	~"bcomdef.h
"

44 
	~"lökdb.h
"

45 
	~"g©t.h
"

46 
	~"g©t_uuid.h
"

47 
	~"g©t£rv≠p.h
"

49 
	~"ac˚Àromëî£rvi˚.h
"

50 
	~"°_utû.h
"

61 
	#SENSOR_SERVICE_UUID
 
ACCELEROMETER_SERV_UUID


	)

62 
	#SENSOR_DATA_UUID
 
ACCELEROMETER_DATA_UUID


	)

63 
	#SENSOR_CONFIG_UUID
 
ACCELEROMETER_CONF_UUID


	)

64 
	#SENSOR_PERIOD_UUID
 
ACCELEROMETER_PERI_UUID


	)

66 
	#SENSOR_SERVICE
 
ACCELEROMETER_SERVICE


	)

67 
	#SENSOR_DATA_LEN
 
ACCELEROMETER_DATA_LEN


	)

69 
	#SENSOR_DATA_DESCR
 "Ac˚l. D©a"

	)

70 
	#SENSOR_CONFIG_DESCR
 "Ac˚l. C⁄f."

	)

71 
	#SENSOR_PERIOD_DESCR
 "Ac˚l. Pîiod"

	)

82 
CONST
 
uöt8
 
	g£ns‹Sîvi˚UUID
[
TI_UUID_SIZE
] =

84 
TI_UUID
(
SENSOR_SERVICE_UUID
),

88 
CONST
 
uöt8
 
	g£ns‹D©aUUID
[
TI_UUID_SIZE
] =

90 
TI_UUID
(
SENSOR_DATA_UUID
),

94 
CONST
 
uöt8
 
	g£ns‹CfgUUID
[
TI_UUID_SIZE
] =

96 
TI_UUID
(
SENSOR_CONFIG_UUID
),

100 
CONST
 
uöt8
 
	g£ns‹PîiodUUID
[
TI_UUID_SIZE
] =

102 
TI_UUID
(
SENSOR_PERIOD_UUID
),

118 
£ns‹CBs_t
 *
	g£ns‹_AµCBs
 = 
NULL
;

125 
CONST
 
g©tAârTy≥_t
 
	g£ns‹Sîvi˚
 = { 
TI_UUID_SIZE
, 
£ns‹Sîvi˚UUID
 };

128 
uöt8
 
	g£ns‹D©a
[
SENSOR_DATA_LEN
] = { 0, 0, 0};

131 
uöt8
 
	g£ns‹D©aPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_NOTIFY
;

134 
g©tCh¨Cfg_t
 
	g£ns‹D©aC⁄fig
[
GATT_MAX_NUM_CONN
];

137 
uöt8
 
	g£ns‹D©aU£rDes¸
[] = 
SENSOR_DATA_DESCR
;

140 
uöt8
 
	g£ns‹CfgPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

143 
uöt8
 
	g£ns‹Cfg
 = 0;

146 
uöt8
 
	g£ns‹CfgU£rDes¸
[] = 
SENSOR_CONFIG_DESCR
;

149 
uöt8
 
	g£ns‹PîiodPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

152 
uöt8
 
	g£ns‹Pîiod
 = 
SENSOR_MIN_UPDATE_PERIOD
 / 
SENSOR_PERIOD_RESOLUTION
;

155 
uöt8
 
	g£ns‹PîiodU£rDes¸
[] = 
SENSOR_PERIOD_DESCR
;

161 
g©tAâribuã_t
 
	g£ns‹AârTabÀ
[] =

164 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

165 
GATT_PERMIT_READ
,

167 (
uöt8
 *)&
£ns‹Sîvi˚


172 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

173 
GATT_PERMIT_READ
,

175 &
£ns‹D©aPr›s


180 { 
TI_UUID_SIZE
, 
£ns‹D©aUUID
 },

181 
GATT_PERMIT_READ
,

183 
£ns‹D©a


188 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

189 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

191 (
uöt8
 *)
£ns‹D©aC⁄fig


196 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

197 
GATT_PERMIT_READ
,

199 
£ns‹D©aU£rDes¸


204 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

205 
GATT_PERMIT_READ
,

207 &
£ns‹CfgPr›s


212 { 
TI_UUID_SIZE
, 
£ns‹CfgUUID
 },

213 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

215 &
£ns‹Cfg


220 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

221 
GATT_PERMIT_READ
,

223 
£ns‹CfgU£rDes¸


227 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

228 
GATT_PERMIT_READ
,

230 &
£ns‹PîiodPr›s


235 { 
TI_UUID_SIZE
, 
£ns‹PîiodUUID
 },

236 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

238 &
£ns‹Pîiod


243 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

244 
GATT_PERMIT_READ
,

246 
£ns‹PîiodU£rDes¸


254 
uöt8
 
£ns‹_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

255 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

256 
bSètus_t
 
£ns‹_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

257 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

258 
£ns‹_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

265 
CONST
 
g©tSîvi˚CBs_t
 
	g£ns‹CBs
 =

267 
£ns‹_RódAârCB
,

268 
£ns‹_WrôeAârCB
,

269 
NULL


287 
bSètus_t
 
	$Ac˚l_AddSîvi˚
–
uöt32
 
£rvi˚s
 )

289 
uöt8
 
°©us
 = 
SUCCESS
;

292 
VOID
 
	`lökDB_Regi°î
–
£ns‹_H™dÀC⁄nSètusCB
 );

293 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
£ns‹D©aC⁄fig
 );

295 i‡(
£rvi˚s
 & 
SENSOR_SERVICE
 )

298 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
£ns‹AârTabÀ
,

299 
	`GATT_NUM_ATTRS
–
£ns‹AârTabÀ
 ),

300 &
£ns‹CBs
 );

303  ( 
°©us
 );

304 
	}
}

317 
bSètus_t
 
	$Ac˚l_Regi°îAµCBs
–
£ns‹CBs_t
 *
≠pCÆlbacks
 )

319 i‡–
£ns‹_AµCBs
 =
NULL
 )

321 i‡–
≠pCÆlbacks
 !
NULL
 )

323 
£ns‹_AµCBs
 = 
≠pCÆlbacks
;

326  ( 
SUCCESS
 );

329  ( 
bÀAÃódyInReque°edMode
 );

330 
	}
}

346 
bSètus_t
 
	$Ac˚l_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 )

348 
bSètus_t
 
ªt
 = 
SUCCESS
;

350  
∑øm
 )

352 
SENSOR_DATA
:

353 i‡–
Àn
 =
SENSOR_DATA_LEN
 )

355 
VOID
 
	`oßl_mem˝y
–
£ns‹D©a
, 
vÆue
, 
SENSOR_DATA_LEN
 );

357 
	`GATTSîvAµ_Pro˚ssCh¨Cfg
–
£ns‹D©aC⁄fig
, 
£ns‹D©a
, 
FALSE
,

358 
£ns‹AârTabÀ
, 
	`GATT_NUM_ATTRS
( sensorAttrTable ),

359 
INVALID_TASK_ID
 );

363 
ªt
 = 
bÀInvÆidR™ge
;

367 
SENSOR_CONF
:

368 i‡–
Àn
 = ( 
uöt8
 ) )

370 
£ns‹Cfg
 = *((
uöt8
*)
vÆue
);

374 
ªt
 = 
bÀInvÆidR™ge
;

378 
SENSOR_PERI
:

379 i‡–
Àn
 = ( 
uöt8
 ) )

381 
£ns‹Pîiod
 = *((
uöt8
*)
vÆue
);

385 
ªt
 = 
bÀInvÆidR™ge
;

390 
ªt
 = 
INVALIDPARAMETER
;

394  ( 
ªt
 );

395 
	}
}

410 
bSètus_t
 
	$Ac˚l_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

412 
bSètus_t
 
ªt
 = 
SUCCESS
;

414  
∑øm
 )

416 
SENSOR_DATA
:

417 
VOID
 
	`oßl_mem˝y
–
vÆue
, 
£ns‹D©a
, 
SENSOR_DATA_LEN
 );

420 
SENSOR_CONF
:

421 *((
uöt8
*)
vÆue
Ë
£ns‹Cfg
;

424 
SENSOR_PERI
:

425 *((
uöt8
*)
vÆue
Ë
£ns‹Pîiod
;

429 
ªt
 = 
INVALIDPARAMETER
;

433  ( 
ªt
 );

434 
	}
}

450 
uöt8
 
	$£ns‹_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

451 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

453 
uöt16
 
uuid
;

454 
bSètus_t
 
°©us
 = 
SUCCESS
;

457 i‡–
	`g©tPîmôAuth‹Ród
–
pAâr
->
≥rmissi⁄s
 ) )

460  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

464 i‡–
off£t
 > 0 )

466  ( 
ATT_ERR_ATTR_NOT_LONG
 );

469 i‡(
	`utûExåa˘Uuid16
(
pAâr
,&
uuid
Ë=
FAILURE
) {

471 *
pLí
 = 0;

472  
ATT_ERR_INVALID_HANDLE
;

475  
uuid
 )

479 
SENSOR_DATA_UUID
:

480 *
pLí
 = 
SENSOR_DATA_LEN
;

481 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
pAâr
->pVÆue, 
SENSOR_DATA_LEN
 );

484 
SENSOR_CONFIG_UUID
:

485 
SENSOR_PERIOD_UUID
:

486 *
pLí
 = 1;

487 
pVÆue
[0] = *
pAâr
->pValue;

491 *
pLí
 = 0;

492 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

496  ( 
°©us
 );

497 
	}
}

512 
bSètus_t
 
	$£ns‹_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

513 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

515 
bSètus_t
 
°©us
 = 
SUCCESS
;

516 
uöt8
 
nŸifyAµ
 = 0xFF;

517 
uöt16
 
uuid
;

520 i‡–
	`g©tPîmôAuth‹Wrôe
–
pAâr
->
≥rmissi⁄s
 ) )

523  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

526 i‡(
	`utûExåa˘Uuid16
(
pAâr
,&
uuid
Ë=
FAILURE
) {

528  
ATT_ERR_INVALID_HANDLE
;

531  
uuid
 )

533 
SENSOR_DATA_UUID
:

537 
SENSOR_CONFIG_UUID
:

540 i‡–
off£t
 == 0 )

542 i‡–
Àn
 != 1 )

544 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

549 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

553 i‡–
°©us
 =
SUCCESS
 )

555 
uöt8
 *
pCurVÆue
 = (uöt8 *)
pAâr
->
pVÆue
;

557 *
pCurVÆue
 = 
pVÆue
[0];

559 if–
pAâr
->
pVÆue
 =&
£ns‹Cfg
 )

561 
nŸifyAµ
 = 
SENSOR_CONF
;

566 
SENSOR_PERIOD_UUID
:

569 i‡–
off£t
 == 0 )

571 i‡–
Àn
 != 1 )

573 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

578 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

581 i‡–
°©us
 =
SUCCESS
 )

583 i‡(
pVÆue
[0]>=(
SENSOR_MIN_UPDATE_PERIOD
/
SENSOR_PERIOD_RESOLUTION
))

586 
uöt8
 *
pCurVÆue
 = (uöt8 *)
pAâr
->
pVÆue
;

587 *
pCurVÆue
 = 
pVÆue
[0];

589 if–
pAâr
->
pVÆue
 =&
£ns‹Pîiod
 )

591 
nŸifyAµ
 = 
SENSOR_PERI
;

596 
°©us
 = 
ATT_ERR_INVALID_VALUE
;

601 
GATT_CLIENT_CHAR_CFG_UUID
:

602 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

603 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

608 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

613 i‡–(
nŸifyAµ
 !0xFF ) && 
£ns‹_AµCBs
 && sís‹_AµCBs->
p‚Sís‹Ch™ge
 )

615 
£ns‹_AµCBs
->
	`p‚Sís‹Ch™ge
–
nŸifyAµ
 );

618  ( 
°©us
 );

619 
	}
}

631 
	$£ns‹_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

634 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

637 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

638 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

639 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

641 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
£ns‹D©aC⁄fig
 );

644 
	}
}

	@../../Profiles/SensorProfile/accelerometerservice.h

40 #i‚de‡
ACCELEROMETERSERVICE_H


41 
	#ACCELEROMETERSERVICE_H


	)

43 #ifde‡
__˝lu•lus


51 
	~"°_utû.h
"

58 
	#ACCELEROMETER_SERV_UUID
 0xAA10

59 
	#ACCELEROMETER_DATA_UUID
 0xAA11

	)

60 
	#ACCELEROMETER_CONF_UUID
 0xAA12

	)

61 
	#ACCELEROMETER_PERI_UUID
 0xAA13

	)

64 
	#ACCELEROMETER_SERVICE
 0x00000002

	)

67 
	#ACCELEROMETER_DATA_LEN
 3

	)

90 
bSètus_t
 
Ac˚l_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

98 
bSètus_t
 
Ac˚l_Regi°îAµCBs
–
£ns‹CBs_t
 *
≠pCÆlbacks
 );

110 
bSètus_t
 
Ac˚l_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

121 
bSètus_t
 
Ac˚l_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

127 #ifde‡
__˝lu•lus


	@../../Profiles/SensorProfile/barometerservice.c

43 
	~"bcomdef.h
"

44 
	~"OSAL.h
"

45 
	~"lökdb.h
"

46 
	~"©t.h
"

47 
	~"g©t.h
"

48 
	~"g©t_uuid.h
"

49 
	~"g©t£rv≠p.h
"

50 
	~"g≠b⁄dmgr.h
"

52 
	~"b¨omëî£rvi˚.h
"

53 
	~"°_utû.h
"

64 
	#SENSOR_SERVICE_UUID
 
BAROMETER_SERV_UUID


	)

65 
	#SENSOR_DATA_UUID
 
BAROMETER_DATA_UUID


	)

66 
	#SENSOR_CONFIG_UUID
 
BAROMETER_CONF_UUID


	)

67 
	#SENSOR_PERIOD_UUID
 
BAROMETER_PERI_UUID


	)

68 
	#SENSOR_CALIBR_UUID
 
BAROMETER_CALI_UUID


	)

70 
	#SENSOR_SERVICE
 
BAROMETER_SERVICE


	)

71 
	#SENSOR_DATA_LEN
 
BAROMETER_DATA_LEN


	)

72 
	#SENSOR_CALI_LEN
 
BAROMETER_CALI_LEN


	)

74 
	#SENSOR_DATA_DESCR
 "B¨om. D©a"

	)

75 
	#SENSOR_CONFIG_DESCR
 "B¨om. C⁄f."

	)

76 
	#SENSOR_PERIOD_DESCR
 "B¨om. Pîiod"

	)

77 
	#SENSOR_CALIBR_DESCR
 "B¨om. CÆibr."

	)

88 
CONST
 
uöt8
 
	g£ns‹Sîvi˚UUID
[
TI_UUID_SIZE
] =

90 
TI_UUID
(
SENSOR_SERVICE_UUID
),

94 
CONST
 
uöt8
 
	g£ns‹D©aUUID
[
TI_UUID_SIZE
] =

96 
TI_UUID
(
SENSOR_DATA_UUID
),

100 
CONST
 
uöt8
 
	g£ns‹CfgUUID
[
TI_UUID_SIZE
] =

102 
TI_UUID
(
SENSOR_CONFIG_UUID
),

106 
CONST
 
uöt8
 
	g£ns‹CÆUUID
[
TI_UUID_SIZE
] =

108 
TI_UUID
(
SENSOR_CALIBR_UUID
),

112 
CONST
 
uöt8
 
	g£ns‹PîiodUUID
[
TI_UUID_SIZE
] =

114 
TI_UUID
(
SENSOR_PERIOD_UUID
),

130 
£ns‹CBs_t
 *
	g£ns‹_AµCBs
 = 
NULL
;

137 
CONST
 
g©tAârTy≥_t
 
	g£ns‹Sîvi˚
 = { 
TI_UUID_SIZE
, 
£ns‹Sîvi˚UUID
 };

140 
uöt8
 
	g£ns‹D©a
[
SENSOR_DATA_LEN
] = { 0, 0, 0, 0};

143 
uöt8
 
	g£ns‹D©aPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_NOTIFY
;

146 
g©tCh¨Cfg_t
 
	g£ns‹D©aC⁄fig
[
GATT_MAX_NUM_CONN
];

149 
uöt8
 
	g£ns‹D©aU£rDes¸
[] = 
SENSOR_DATA_DESCR
;

152 
uöt8
 
	g£ns‹CfgPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

155 
uöt8
 
	g£ns‹Cfg
 = 0;

158 
uöt8
 
	g£ns‹CfgU£rDes¸
[] = 
SENSOR_CONFIG_DESCR
;

161 
uöt8
 
	g£ns‹CÆPr›s
 = 
GATT_PROP_READ
;

164 
uöt8
 
	g£ns‹CÆ
[
BAROMETER_CALI_LEN
] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

167 
g©tCh¨Cfg_t
 
	g£ns‹CÆC⁄fig
[
GATT_MAX_NUM_CONN
];

170 
uöt8
 
	g£ns‹CÆU£rDes¸
[] = 
SENSOR_CALIBR_DESCR
;

173 
uöt8
 
	g£ns‹PîiodPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

176 
uöt8
 
	g£ns‹Pîiod
 = 
SENSOR_MIN_UPDATE_PERIOD
 / 
SENSOR_PERIOD_RESOLUTION
;

179 
uöt8
 
	g£ns‹PîiodU£rDes¸
[] = 
SENSOR_PERIOD_DESCR
;

185 
g©tAâribuã_t
 
	g£ns‹AârTabÀ
[] =

188 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

189 
GATT_PERMIT_READ
,

191 (
uöt8
 *)&
£ns‹Sîvi˚


196 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

197 
GATT_PERMIT_READ
,

199 &
£ns‹D©aPr›s


204 { 
TI_UUID_SIZE
, 
£ns‹D©aUUID
 },

205 
GATT_PERMIT_READ
,

207 
£ns‹D©a


212 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

213 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

215 (
uöt8
 *)
£ns‹D©aC⁄fig


220 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

221 
GATT_PERMIT_READ
,

223 
£ns‹D©aU£rDes¸


228 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

229 
GATT_PERMIT_READ
,

231 &
£ns‹CfgPr›s


236 { 
TI_UUID_SIZE
, 
£ns‹CfgUUID
 },

237 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

239 &
£ns‹Cfg


244 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

245 
GATT_PERMIT_READ
,

247 
£ns‹CfgU£rDes¸


251 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

252 
GATT_PERMIT_READ
,

254 &
£ns‹PîiodPr›s


259 { 
TI_UUID_SIZE
, 
£ns‹PîiodUUID
 },

260 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

262 &
£ns‹Pîiod


267 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

268 
GATT_PERMIT_READ
,

270 
£ns‹PîiodU£rDes¸


275 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

276 
GATT_PERMIT_READ
,

278 &
£ns‹CÆPr›s


283 { 
TI_UUID_SIZE
, 
£ns‹CÆUUID
 },

284 
GATT_PERMIT_READ
,

286 
£ns‹CÆ


291 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

292 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

294 (
uöt8
 *)
£ns‹CÆC⁄fig


299 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

300 
GATT_PERMIT_READ
,

302 
£ns‹CÆU£rDes¸


310 
uöt8
 
£ns‹_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

311 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

312 
bSètus_t
 
£ns‹_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

313 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

314 
£ns‹_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

321 
CONST
 
g©tSîvi˚CBs_t
 
	g£ns‹CBs
 =

323 
£ns‹_RódAârCB
,

324 
£ns‹_WrôeAârCB
,

325 
NULL


343 
bSètus_t
 
	$B¨omëî_AddSîvi˚
–
uöt32
 
£rvi˚s
 )

345 
uöt8
 
°©us
 = 
SUCCESS
;

348 
VOID
 
	`lökDB_Regi°î
–
£ns‹_H™dÀC⁄nSètusCB
 );

349 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
£ns‹D©aC⁄fig
 );

351 i‡(
£rvi˚s
 & 
SENSOR_SERVICE
 )

354 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
£ns‹AârTabÀ
,

355 
	`GATT_NUM_ATTRS
–
£ns‹AârTabÀ
 ),

356 &
£ns‹CBs
 );

359  ( 
°©us
 );

360 
	}
}

373 
bSètus_t
 
	$B¨omëî_Regi°îAµCBs
–
£ns‹CBs_t
 *
≠pCÆlbacks
 )

375 i‡–
£ns‹_AµCBs
 =
NULL
 )

377 i‡–
≠pCÆlbacks
 !
NULL
 )

379 
£ns‹_AµCBs
 = 
≠pCÆlbacks
;

382  ( 
SUCCESS
 );

385  ( 
bÀAÃódyInReque°edMode
 );

386 
	}
}

402 
bSètus_t
 
	$B¨omëî_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 )

404 
bSètus_t
 
ªt
 = 
SUCCESS
;

406  
∑øm
 )

408 
SENSOR_DATA
:

409 i‡–
Àn
 =
SENSOR_DATA_LEN
 )

411 
VOID
 
	`oßl_mem˝y
–
£ns‹D©a
, 
vÆue
, 
SENSOR_DATA_LEN
 );

413 
	`GATTSîvAµ_Pro˚ssCh¨Cfg
–
£ns‹D©aC⁄fig
, 
£ns‹D©a
, 
FALSE
,

414 
£ns‹AârTabÀ
, 
	`GATT_NUM_ATTRS
( sensorAttrTable ),

415 
INVALID_TASK_ID
 );

419 
ªt
 = 
bÀInvÆidR™ge
;

423 
SENSOR_CONF
:

424 i‡–
Àn
 = ( 
uöt8
 ) )

426 
£ns‹Cfg
 = *((
uöt8
*)
vÆue
);

430 
ªt
 = 
bÀInvÆidR™ge
;

434 
SENSOR_CALB
:

435 i‡–
Àn
 =
SENSOR_CALI_LEN
 )

437 
VOID
 
	`oßl_mem˝y
–
£ns‹CÆ
, 
vÆue
, 
SENSOR_CALI_LEN
 );

440 
	`GATTSîvAµ_Pro˚ssCh¨Cfg
–
£ns‹CÆC⁄fig
, 
£ns‹CÆ
, 
FALSE
,

441 
£ns‹AârTabÀ
, 
	`GATT_NUM_ATTRS
( sensorAttrTable ),

442 
INVALID_TASK_ID
 );

446 
ªt
 = 
bÀInvÆidR™ge
;

451 
SENSOR_PERI
:

452 i‡–
Àn
 = ( 
uöt8
 ) )

454 
£ns‹Pîiod
 = *((
uöt8
*)
vÆue
);

458 
ªt
 = 
bÀInvÆidR™ge
;

463 
ªt
 = 
INVALIDPARAMETER
;

467  ( 
ªt
 );

468 
	}
}

483 
bSètus_t
 
	$B¨omëî_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

485 
bSètus_t
 
ªt
 = 
SUCCESS
;

487  
∑øm
 )

489 
SENSOR_DATA
:

490 
VOID
 
	`oßl_mem˝y
–
vÆue
, 
£ns‹D©a
, 
SENSOR_DATA_LEN
 );

493 
SENSOR_CONF
:

494 *((
uöt8
*)
vÆue
Ë
£ns‹Cfg
;

497 
SENSOR_CALB
:

498 
VOID
 
	`oßl_mem˝y
–
vÆue
, 
£ns‹CÆ
, 
SENSOR_CALI_LEN
 );

501 
SENSOR_PERI
:

502 *((
uöt8
*)
vÆue
Ë
£ns‹Pîiod
;

506 
ªt
 = 
INVALIDPARAMETER
;

510  ( 
ªt
 );

511 
	}
}

527 
uöt8
 
	$£ns‹_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

528 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

530 
uöt16
 
uuid
;

531 
bSètus_t
 
°©us
 = 
SUCCESS
;

534 i‡–
	`g©tPîmôAuth‹Ród
–
pAâr
->
≥rmissi⁄s
 ) )

537  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

541 i‡–
off£t
 > 0 )

543  ( 
ATT_ERR_ATTR_NOT_LONG
 );

546 i‡(
	`utûExåa˘Uuid16
(
pAâr
,&
uuid
Ë=
FAILURE
) {

548 *
pLí
 = 0;

549  
ATT_ERR_INVALID_HANDLE
;

552  
uuid
 )

556 
SENSOR_DATA_UUID
:

557 *
pLí
 = 
SENSOR_DATA_LEN
;

558 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
pAâr
->pVÆue, 
SENSOR_DATA_LEN
 );

561 
SENSOR_CALIBR_UUID
:

562 *
pLí
 = 
SENSOR_CALI_LEN
;

563 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
pAâr
->pVÆue, 
SENSOR_CALI_LEN
 );

566 
SENSOR_CONFIG_UUID
:

567 
SENSOR_PERIOD_UUID
:

568 *
pLí
 = 1;

569 
pVÆue
[0] = *
pAâr
->pValue;

573 *
pLí
 = 0;

574 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

578  ( 
°©us
 );

579 
	}
}

594 
bSètus_t
 
	$£ns‹_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

595 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

597 
bSètus_t
 
°©us
 = 
SUCCESS
;

598 
uöt8
 
nŸifyAµ
 = 0xFF;

599 
uöt16
 
uuid
;

602 i‡–
	`g©tPîmôAuth‹Wrôe
–
pAâr
->
≥rmissi⁄s
 ) )

605  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

608 i‡(
	`utûExåa˘Uuid16
(
pAâr
,&
uuid
Ë=
FAILURE
) {

610  
ATT_ERR_INVALID_HANDLE
;

613  
uuid
 )

615 
SENSOR_DATA_UUID
:

616 
SENSOR_CALIBR_UUID
:

620 
SENSOR_CONFIG_UUID
:

623 i‡–
off£t
 == 0 )

625 i‡–
Àn
 != 1 )

627 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

632 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

636 i‡–
°©us
 =
SUCCESS
 )

638 
uöt8
 *
pCurVÆue
 = (uöt8 *)
pAâr
->
pVÆue
;

640 *
pCurVÆue
 = 
pVÆue
[0];

642 if–
pAâr
->
pVÆue
 =&
£ns‹Cfg
 )

644 
nŸifyAµ
 = 
SENSOR_CONF
;

649 
SENSOR_PERIOD_UUID
:

652 i‡–
off£t
 == 0 )

654 i‡–
Àn
 != 1 )

656 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

661 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

664 i‡–
°©us
 =
SUCCESS
 )

666 i‡(
pVÆue
[0]>=(
SENSOR_MIN_UPDATE_PERIOD
/
SENSOR_PERIOD_RESOLUTION
))

669 
uöt8
 *
pCurVÆue
 = (uöt8 *)
pAâr
->
pVÆue
;

670 *
pCurVÆue
 = 
pVÆue
[0];

672 if–
pAâr
->
pVÆue
 =&
£ns‹Pîiod
 )

674 
nŸifyAµ
 = 
SENSOR_PERI
;

679 
°©us
 = 
ATT_ERR_INVALID_VALUE
;

684 
GATT_CLIENT_CHAR_CFG_UUID
:

685 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

686 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

691 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

696 i‡–(
nŸifyAµ
 !0xFF ) && 
£ns‹_AµCBs
 && sís‹_AµCBs->
p‚Sís‹Ch™ge
 )

698 
£ns‹_AµCBs
->
	`p‚Sís‹Ch™ge
–
nŸifyAµ
 );

701  ( 
°©us
 );

702 
	}
}

714 
	$£ns‹_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

717 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

720 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

721 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

722 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

724 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
£ns‹D©aC⁄fig
 );

727 
	}
}

	@../../Profiles/SensorProfile/barometerservice.h

40 #i‚de‡
BAROMETERSERVICE_H


41 
	#BAROMETERSERVICE_H


	)

43 #ifde‡
__˝lu•lus


51 
	~"°_utû.h
"

58 
	#BAROMETER_SERV_UUID
 0xAA40

59 
	#BAROMETER_DATA_UUID
 0xAA41

	)

60 
	#BAROMETER_CONF_UUID
 0xAA42

	)

61 
	#BAROMETER_CALI_UUID
 0xAA43

	)

62 
	#BAROMETER_PERI_UUID
 0xAA44

	)

65 
	#BAROMETER_SERVICE
 0x00000010

	)

68 
	#BAROMETER_DATA_LEN
 4

	)

69 
	#BAROMETER_CALI_LEN
 16

	)

91 
bSètus_t
 
B¨omëî_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

99 
bSètus_t
 
B¨omëî_Regi°îAµCBs
–
£ns‹CBs_t
 *
≠pCÆlbacks
 );

111 
bSètus_t
 
B¨omëî_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

122 
bSètus_t
 
B¨omëî_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

127 #ifde‡
__˝lu•lus


	@../../Profiles/SensorProfile/ccservice.c

44 
	~"bcomdef.h
"

45 
	~"OSAL.h
"

46 
	~"lökdb.h
"

47 
	~"©t.h
"

48 
	~"g©t.h
"

49 
	~"g©t_uuid.h
"

50 
	~"g©t£rv≠p.h
"

51 
	~"g≠b⁄dmgr.h
"

53 
	~"cc£rvi˚.h
"

54 
	~"°_utû.h
"

71 
CONST
 
uöt8
 
	gccSîvi˚SîvUUID
[
TI_UUID_SIZE
] =

73 
TI_UUID
(
CCSERVICE_SERV_UUID
),

77 
CONST
 
uöt8
 
	gccSîvi˚ch¨1UUID
[
TI_UUID_SIZE
] =

79 
TI_UUID
(
CCSERVICE_CHAR1_UUID
),

83 
CONST
 
uöt8
 
	gccSîvi˚ch¨2UUID
[
TI_UUID_SIZE
] =

85 
TI_UUID
(
CCSERVICE_CHAR2_UUID
),

89 
CONST
 
uöt8
 
	gccSîvi˚ch¨3UUID
[
TI_UUID_SIZE
] =

91 
TI_UUID
(
CCSERVICE_CHAR3_UUID
),

106 
ccCBs_t
 *
	gccSîvi˚_AµCBs
 = 
NULL
;

113 
CONST
 
g©tAârTy≥_t
 
	gccSîvi˚Sîvi˚
 = { 
TI_UUID_SIZE
, 
ccSîvi˚SîvUUID
 };

116 
uöt8
 
	gccSîvi˚Ch¨1Pr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_NOTIFY
;

119 
uöt8
 
	gccSîvi˚Ch¨1
[
CCSERVICE_CHAR1_LEN
] = {0, 0, 0, 0, 0, 0};

122 
g©tCh¨Cfg_t
 
	gccD©aC⁄fig
[
GATT_MAX_NUM_CONN
];

125 
uöt8
 
	gccSîvi˚Ch¨1U£rDe•
[] = "Conn. Params";

129 
uöt8
 
	gccSîvi˚Ch¨2Pr›s
 = 
GATT_PROP_WRITE
;

132 
uöt8
 
	gccSîvi˚Ch¨2
[
CCSERVICE_CHAR2_LEN
] = { 0, 0, 0, 0, 0, 0, 0, 0 };

135 
uöt8
 
	gccSîvi˚Ch¨2U£rDe•
[] = "Conn. Params Req";

139 
uöt8
 
	gccSîvi˚Ch¨3Pr›s
 = 
GATT_PROP_WRITE
;

142 
uöt8
 
	gccSîvi˚Ch¨3
 = 0;

145 
uöt8
 
	gccSîvi˚Ch¨3U£rDe•
[] = "Disconnect Req";

152 
g©tAâribuã_t
 
	gccSîvi˚AârTbl
[] =

156 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

157 
GATT_PERMIT_READ
,

159 (
uöt8
 *)&
ccSîvi˚Sîvi˚


164 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

165 
GATT_PERMIT_READ
,

167 &
ccSîvi˚Ch¨1Pr›s


172 { 
TI_UUID_SIZE
, 
ccSîvi˚ch¨1UUID
 },

173 
GATT_PERMIT_READ
,

175 
ccSîvi˚Ch¨1


180 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

181 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

183 (
uöt8
 *)
ccD©aC⁄fig


188 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

189 
GATT_PERMIT_READ
,

191 
ccSîvi˚Ch¨1U£rDe•


196 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

197 
GATT_PERMIT_READ
,

199 &
ccSîvi˚Ch¨2Pr›s


204 { 
TI_UUID_SIZE
, 
ccSîvi˚ch¨2UUID
 },

205 
GATT_PERMIT_WRITE
,

207 
ccSîvi˚Ch¨2


212 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

213 
GATT_PERMIT_READ
,

215 
ccSîvi˚Ch¨2U£rDe•


220 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

221 
GATT_PERMIT_READ
,

223 &
ccSîvi˚Ch¨3Pr›s


228 { 
TI_UUID_SIZE
, 
ccSîvi˚ch¨3UUID
 },

229 
GATT_PERMIT_WRITE
,

231 &
ccSîvi˚Ch¨3


236 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

237 
GATT_PERMIT_READ
,

239 
ccSîvi˚Ch¨3U£rDe•


247 
uöt8
 
ccSîvi˚_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

248 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

249 
bSètus_t
 
ccSîvi˚_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

250 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

252 
ccSîvi˚_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

259 
CONST
 
g©tSîvi˚CBs_t
 
	gccSîvi˚CBs
 =

261 
ccSîvi˚_RódAârCB
,

262 
ccSîvi˚_WrôeAârCB
,

263 
NULL


281 
bSètus_t
 
	$CcSîvi˚_AddSîvi˚
–
uöt32
 
£rvi˚s
 )

283 
uöt8
 
°©us
 = 
SUCCESS
;

286 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
ccD©aC⁄fig
 );

289 
VOID
 
	`lökDB_Regi°î
–
ccSîvi˚_H™dÀC⁄nSètusCB
 );

291 i‡–
£rvi˚s
 & 
CCSERVICE
 )

294 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
ccSîvi˚AârTbl
,

295 
	`GATT_NUM_ATTRS
–
ccSîvi˚AârTbl
 ),

296 &
ccSîvi˚CBs
 );

299  ( 
°©us
 );

300 
	}
}

313 
bSètus_t
 
	$CcSîvi˚_Regi°îAµCBs
–
ccCBs_t
 *
≠pCÆlbacks
 )

315 i‡–
≠pCÆlbacks
 )

317 
ccSîvi˚_AµCBs
 = 
≠pCÆlbacks
;

319  ( 
SUCCESS
 );

323  ( 
bÀAÃódyInReque°edMode
 );

325 
	}
}

342 
bSètus_t
 
	$CcSîvi˚_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 )

344 
bSètus_t
 
ªt
 = 
SUCCESS
;

346  
∑øm
 )

348 
CCSERVICE_CHAR1
:

349 i‡–
Àn
 =
CCSERVICE_CHAR1_LEN
 )

351 
VOID
 
	`oßl_mem˝y
(
ccSîvi˚Ch¨1
, 
vÆue
, 
CCSERVICE_CHAR1_LEN
 );

354 
	`GATTSîvAµ_Pro˚ssCh¨Cfg
–
ccD©aC⁄fig
, 
ccSîvi˚Ch¨1
, 
FALSE
,

355 
ccSîvi˚AârTbl
, 
	`GATT_NUM_ATTRS
( ccServiceAttrTbl ),

356 
INVALID_TASK_ID
 );

361 
ªt
 = 
bÀInvÆidR™ge
;

365 
CCSERVICE_CHAR2
:

366 i‡–
Àn
 =
CCSERVICE_CHAR2_LEN
 )

369 
VOID
 
	`oßl_mem˝y
–
ccSîvi˚Ch¨2
, 
vÆue
, 
CCSERVICE_CHAR2_LEN
 );

373 
ªt
 = 
bÀInvÆidR™ge
;

377 
CCSERVICE_CHAR3
:

378 i‡–
Àn
 = ( 
uöt8
 ) )

381 
ccSîvi˚Ch¨3
 = *((
uöt8
*)
vÆue
);

385 
ªt
 = 
bÀInvÆidR™ge
;

390 
ªt
 = 
INVALIDPARAMETER
;

394  ( 
ªt
 );

395 
	}
}

410 
bSètus_t
 
	$CcSîvi˚_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

412 
bSètus_t
 
ªt
 = 
SUCCESS
;

413  
∑øm
 )

415 
CCSERVICE_CHAR1
:

416 
VOID
 
	`oßl_mem˝y
–
vÆue
, 
ccSîvi˚Ch¨1
, 
CCSERVICE_CHAR1_LEN
 );

419 
CCSERVICE_CHAR2
:

420 
VOID
 
	`oßl_mem˝y
–
vÆue
, 
ccSîvi˚Ch¨2
, 
CCSERVICE_CHAR2_LEN
 );

423 
CCSERVICE_CHAR3
:

424 *((
uöt8
*)
vÆue
Ë
ccSîvi˚Ch¨3
;

428 
ªt
 = 
INVALIDPARAMETER
;

432  ( 
ªt
 );

433 
	}
}

449 
uöt8
 
	$ccSîvi˚_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

450 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

452 
bSètus_t
 
°©us
 = 
SUCCESS
;

453 
uöt16
 
uuid
;

456 i‡–
	`g©tPîmôAuth‹Ród
–
pAâr
->
≥rmissi⁄s
 ) )

459  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

463 i‡–
off£t
 > 0 )

465  ( 
ATT_ERR_ATTR_NOT_LONG
 );

468 i‡(
	`utûExåa˘Uuid16
(
pAâr
,&
uuid
Ë=
FAILURE
)

471 *
pLí
 = 0;

472  
ATT_ERR_INVALID_HANDLE
;

475  
uuid
 )

477 
CCSERVICE_CHAR1_UUID
:

478 *
pLí
 = 
CCSERVICE_CHAR1_LEN
;

479 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
pAâr
->pVÆue, 
CCSERVICE_CHAR1_LEN
 );

482 *
pLí
 = 0;

483 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

487  ( 
°©us
 );

488 
	}
}

503 
bSètus_t
 
	$ccSîvi˚_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

504 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

506 
uöt16
 
uuid
;

507 
bSètus_t
 
°©us
 = 
SUCCESS
;

508 
uöt8
 
nŸifyAµ
 = 0xFF;

511 i‡–
	`g©tPîmôAuth‹Wrôe
–
pAâr
->
≥rmissi⁄s
 ) )

514  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

517 i‡(
	`utûExåa˘Uuid16
(
pAâr
,&
uuid
Ë=
FAILURE
)

520  
ATT_ERR_INVALID_HANDLE
;

523  
uuid
 )

525 
CCSERVICE_CHAR2_UUID
:

529 i‡–
off£t
 == 0 )

531 i‡–
Àn
 !
CCSERVICE_CHAR2_LEN
 )

533 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

538 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

542 i‡–
°©us
 =
SUCCESS
 )

544 
VOID
 
	`oßl_mem˝y
–
ccSîvi˚Ch¨2
, 
pVÆue
, 
CCSERVICE_CHAR2_LEN
 );

545 
nŸifyAµ
 = 
CCSERVICE_CHAR2
;

549 
CCSERVICE_CHAR3_UUID
:

551 i‡–
off£t
 == 0 )

553 i‡–
Àn
 != 1 )

555 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

560 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

564 i‡–
°©us
 =
SUCCESS
 )

566 
uöt8
 *
pCurVÆue
 = (uöt8 *)
pAâr
->
pVÆue
;

567 *
pCurVÆue
 = 
pVÆue
[0];

568 
nŸifyAµ
 = 
CCSERVICE_CHAR3
;

573 
GATT_CLIENT_CHAR_CFG_UUID
:

574 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

575 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

579 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

585 i‡–(
nŸifyAµ
 !0xFF ) && 
ccSîvi˚_AµCBs
 && ccSîvi˚_AµCBs->
p‚CcCh™ge
 )

587 
ccSîvi˚_AµCBs
->
	`p‚CcCh™ge
–
nŸifyAµ
 );

590  ( 
°©us
 );

591 
	}
}

603 
	$ccSîvi˚_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

606 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

609 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

610 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

611 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

616 
	}
}

	@../../Profiles/SensorProfile/ccservice.h

40 #i‚de‡
CCSERVICE_H


41 
	#CCSERVICE_H


	)

43 #ifde‡
__˝lu•lus


57 
	#CCSERVICE_CHAR1
 0

58 
	#CCSERVICE_CHAR2
 1

59 
	#CCSERVICE_CHAR3
 2

60 

	)

62 
	#CCSERVICE_SERV_UUID
 0xCCC0

	)

63 
	#CCSERVICE_CHAR1_UUID
 0xCCC1

64 
	#CCSERVICE_CHAR2_UUID
 0xCCC2

	)

65 
	#CCSERVICE_CHAR3_UUID
 0xCCC3

	)

68 
	#CCSERVICE
 0x00000001

	)

71 
	#CCSERVICE_CHAR1_LEN
 6

	)

72 
	#CCSERVICE_CHAR2_LEN
 8

	)

73 
	#CCSERVICE_CHAR3_LEN
 1

	)

89 (*
ccCh™ge_t
)–
	tuöt8
 
	t∑ømID
 );

93 
ccCh™ge_t
 
p‚CcCh™ge
;

94 } 
	tccCBs_t
;

111 
bSètus_t
 
CcSîvi˚_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

119 
bSètus_t
 
CcSîvi˚_Regi°îAµCBs
–
ccCBs_t
 *
≠pCÆlbacks
 );

131 
bSètus_t
 
CcSîvi˚_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

142 
bSètus_t
 
CcSîvi˚_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

148 #ifde‡
__˝lu•lus


	@../../Profiles/SensorProfile/gyroservice.c

43 
	~"bcomdef.h
"

44 
	~"lökdb.h
"

45 
	~"g©t.h
"

46 
	~"g©t_uuid.h
"

47 
	~"g©t£rv≠p.h
"

49 
	~"gyro£rvi˚.h
"

50 
	~"°_utû.h
"

61 
	#SENSOR_SERVICE_UUID
 
GYROSCOPE_SERV_UUID


	)

62 
	#SENSOR_DATA_UUID
 
GYROSCOPE_DATA_UUID


	)

63 
	#SENSOR_CONFIG_UUID
 
GYROSCOPE_CONF_UUID


	)

64 
	#SENSOR_PERIOD_UUID
 
GYROSCOPE_PERI_UUID


	)

66 
	#SENSOR_SERVICE
 
GYROSCOPE_SERVICE


	)

67 
	#SENSOR_DATA_LEN
 
GYROSCOPE_DATA_LEN


	)

69 
	#SENSOR_DATA_DESCR
 "GyrÿD©a"

	)

70 
	#SENSOR_CONFIG_DESCR
 "GyrÿC⁄f."

	)

71 
	#SENSOR_PERIOD_DESCR
 "GyrÿPîiod"

	)

82 
CONST
 
uöt8
 
	g£ns‹Sîvi˚UUID
[
TI_UUID_SIZE
] =

84 
TI_UUID
(
SENSOR_SERVICE_UUID
),

88 
CONST
 
uöt8
 
	g£ns‹D©aUUID
[
TI_UUID_SIZE
] =

90 
TI_UUID
(
SENSOR_DATA_UUID
),

94 
CONST
 
uöt8
 
	g£ns‹CfgUUID
[
TI_UUID_SIZE
] =

96 
TI_UUID
(
SENSOR_CONFIG_UUID
),

100 
CONST
 
uöt8
 
	g£ns‹PîiodUUID
[
TI_UUID_SIZE
] =

102 
TI_UUID
(
SENSOR_PERIOD_UUID
),

118 
£ns‹CBs_t
 *
	g£ns‹_AµCBs
 = 
NULL
;

125 
CONST
 
g©tAârTy≥_t
 
	g£ns‹Sîvi˚
 = { 
TI_UUID_SIZE
, 
£ns‹Sîvi˚UUID
 };

128 
uöt8
 
	g£ns‹D©a
[
SENSOR_DATA_LEN
] = { 0, 0, 0, 0, 0, 0};

131 
uöt8
 
	g£ns‹D©aPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_NOTIFY
;

134 
g©tCh¨Cfg_t
 
	g£ns‹D©aC⁄fig
[
GATT_MAX_NUM_CONN
];

137 
uöt8
 
	g£ns‹D©aU£rDes¸
[] = 
SENSOR_DATA_DESCR
;

140 
uöt8
 
	g£ns‹CfgPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

143 
uöt8
 
	g£ns‹Cfg
 = 0;

146 
uöt8
 
	g£ns‹CfgU£rDes¸
[] = 
SENSOR_CONFIG_DESCR
;

149 
uöt8
 
	g£ns‹PîiodPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

152 
uöt8
 
	g£ns‹Pîiod
 = 
SENSOR_MIN_UPDATE_PERIOD
 / 
SENSOR_PERIOD_RESOLUTION
;

155 
uöt8
 
	g£ns‹PîiodU£rDes¸
[] = 
SENSOR_PERIOD_DESCR
;

161 
g©tAâribuã_t
 
	g£ns‹AârTabÀ
[] =

164 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

165 
GATT_PERMIT_READ
,

167 (
uöt8
 *)&
£ns‹Sîvi˚


172 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

173 
GATT_PERMIT_READ
,

175 &
£ns‹D©aPr›s


180 { 
TI_UUID_SIZE
, 
£ns‹D©aUUID
 },

181 
GATT_PERMIT_READ
,

183 
£ns‹D©a


188 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

189 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

191 (
uöt8
 *)
£ns‹D©aC⁄fig


196 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

197 
GATT_PERMIT_READ
,

199 
£ns‹D©aU£rDes¸


204 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

205 
GATT_PERMIT_READ
,

207 &
£ns‹CfgPr›s


212 { 
TI_UUID_SIZE
, 
£ns‹CfgUUID
 },

213 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

215 &
£ns‹Cfg


220 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

221 
GATT_PERMIT_READ
,

223 
£ns‹CfgU£rDes¸


227 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

228 
GATT_PERMIT_READ
,

230 &
£ns‹PîiodPr›s


235 { 
TI_UUID_SIZE
, 
£ns‹PîiodUUID
 },

236 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

238 &
£ns‹Pîiod


243 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

244 
GATT_PERMIT_READ
,

246 
£ns‹PîiodU£rDes¸


254 
uöt8
 
£ns‹_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

255 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

256 
bSètus_t
 
£ns‹_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

257 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

258 
£ns‹_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

265 
CONST
 
g©tSîvi˚CBs_t
 
	g£ns‹CBs
 =

267 
£ns‹_RódAârCB
,

268 
£ns‹_WrôeAârCB
,

269 
NULL


287 
bSètus_t
 
	$Gyro_AddSîvi˚
–
uöt32
 
£rvi˚s
 )

289 
uöt8
 
°©us
 = 
SUCCESS
;

292 
VOID
 
	`lökDB_Regi°î
–
£ns‹_H™dÀC⁄nSètusCB
 );

293 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
£ns‹D©aC⁄fig
 );

295 i‡(
£rvi˚s
 & 
SENSOR_SERVICE
 )

298 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
£ns‹AârTabÀ
,

299 
	`GATT_NUM_ATTRS
–
£ns‹AârTabÀ
 ),

300 &
£ns‹CBs
 );

303  ( 
°©us
 );

304 
	}
}

317 
bSètus_t
 
	$Gyro_Regi°îAµCBs
–
£ns‹CBs_t
 *
≠pCÆlbacks
 )

319 i‡–
£ns‹_AµCBs
 =
NULL
 )

321 i‡–
≠pCÆlbacks
 !
NULL
 )

323 
£ns‹_AµCBs
 = 
≠pCÆlbacks
;

326  ( 
SUCCESS
 );

329  ( 
bÀAÃódyInReque°edMode
 );

330 
	}
}

346 
bSètus_t
 
	$Gyro_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 )

348 
bSètus_t
 
ªt
 = 
SUCCESS
;

350  
∑øm
 )

352 
SENSOR_DATA
:

353 i‡–
Àn
 =
SENSOR_DATA_LEN
 )

355 
VOID
 
	`oßl_mem˝y
–
£ns‹D©a
, 
vÆue
, 
SENSOR_DATA_LEN
 );

357 
	`GATTSîvAµ_Pro˚ssCh¨Cfg
–
£ns‹D©aC⁄fig
, 
£ns‹D©a
, 
FALSE
,

358 
£ns‹AârTabÀ
, 
	`GATT_NUM_ATTRS
( sensorAttrTable ),

359 
INVALID_TASK_ID
 );

363 
ªt
 = 
bÀInvÆidR™ge
;

367 
SENSOR_CONF
:

368 i‡–
Àn
 = ( 
uöt8
 ) )

370 
£ns‹Cfg
 = *((
uöt8
*)
vÆue
);

374 
ªt
 = 
bÀInvÆidR™ge
;

378 
SENSOR_PERI
:

379 i‡–
Àn
 = ( 
uöt8
 ) )

381 
£ns‹Pîiod
 = *((
uöt8
*)
vÆue
);

385 
ªt
 = 
bÀInvÆidR™ge
;

390 
ªt
 = 
INVALIDPARAMETER
;

394  ( 
ªt
 );

395 
	}
}

410 
bSètus_t
 
	$Gyro_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

412 
bSètus_t
 
ªt
 = 
SUCCESS
;

414  
∑øm
 )

416 
SENSOR_DATA
:

417 
VOID
 
	`oßl_mem˝y
–
vÆue
, 
£ns‹D©a
, 
SENSOR_DATA_LEN
 );

420 
SENSOR_CONF
:

421 *((
uöt8
*)
vÆue
Ë
£ns‹Cfg
;

424 
SENSOR_PERI
:

425 *((
uöt8
*)
vÆue
Ë
£ns‹Pîiod
;

429 
ªt
 = 
INVALIDPARAMETER
;

433  ( 
ªt
 );

434 
	}
}

450 
uöt8
 
	$£ns‹_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

451 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

453 
uöt16
 
uuid
;

454 
bSètus_t
 
°©us
 = 
SUCCESS
;

457 i‡–
	`g©tPîmôAuth‹Ród
–
pAâr
->
≥rmissi⁄s
 ) )

460  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

464 i‡–
off£t
 > 0 )

466  ( 
ATT_ERR_ATTR_NOT_LONG
 );

469 i‡(
	`utûExåa˘Uuid16
(
pAâr
,&
uuid
Ë=
FAILURE
) {

471 *
pLí
 = 0;

472  
ATT_ERR_INVALID_HANDLE
;

475  
uuid
 )

479 
SENSOR_DATA_UUID
:

480 *
pLí
 = 
SENSOR_DATA_LEN
;

481 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
pAâr
->pVÆue, 
SENSOR_DATA_LEN
 );

484 
SENSOR_CONFIG_UUID
:

485 
SENSOR_PERIOD_UUID
:

486 *
pLí
 = 1;

487 
pVÆue
[0] = *
pAâr
->pValue;

491 *
pLí
 = 0;

492 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

496  ( 
°©us
 );

497 
	}
}

512 
bSètus_t
 
	$£ns‹_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

513 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

515 
bSètus_t
 
°©us
 = 
SUCCESS
;

516 
uöt8
 
nŸifyAµ
 = 0xFF;

517 
uöt16
 
uuid
;

520 i‡–
	`g©tPîmôAuth‹Wrôe
–
pAâr
->
≥rmissi⁄s
 ) )

523  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

526 i‡(
	`utûExåa˘Uuid16
(
pAâr
,&
uuid
Ë=
FAILURE
) {

528  
ATT_ERR_INVALID_HANDLE
;

531  
uuid
 )

533 
SENSOR_DATA_UUID
:

537 
SENSOR_CONFIG_UUID
:

540 i‡–
off£t
 == 0 )

542 i‡–
Àn
 != 1 )

544 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

549 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

553 i‡–
°©us
 =
SUCCESS
 )

555 
uöt8
 *
pCurVÆue
 = (uöt8 *)
pAâr
->
pVÆue
;

557 *
pCurVÆue
 = 
pVÆue
[0];

559 if–
pAâr
->
pVÆue
 =&
£ns‹Cfg
 )

561 
nŸifyAµ
 = 
SENSOR_CONF
;

566 
SENSOR_PERIOD_UUID
:

569 i‡–
off£t
 == 0 )

571 i‡–
Àn
 != 1 )

573 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

578 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

581 i‡–
°©us
 =
SUCCESS
 )

583 i‡(
pVÆue
[0]>=(
SENSOR_MIN_UPDATE_PERIOD
/
SENSOR_PERIOD_RESOLUTION
))

586 
uöt8
 *
pCurVÆue
 = (uöt8 *)
pAâr
->
pVÆue
;

587 *
pCurVÆue
 = 
pVÆue
[0];

589 if–
pAâr
->
pVÆue
 =&
£ns‹Pîiod
 )

591 
nŸifyAµ
 = 
SENSOR_PERI
;

596 
°©us
 = 
ATT_ERR_INVALID_VALUE
;

601 
GATT_CLIENT_CHAR_CFG_UUID
:

602 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

603 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

608 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

613 i‡–(
nŸifyAµ
 !0xFF ) && 
£ns‹_AµCBs
 && sís‹_AµCBs->
p‚Sís‹Ch™ge
 )

615 
£ns‹_AµCBs
->
	`p‚Sís‹Ch™ge
–
nŸifyAµ
 );

618  ( 
°©us
 );

619 
	}
}

631 
	$£ns‹_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

634 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

637 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

638 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

639 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

641 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
£ns‹D©aC⁄fig
 );

644 
	}
}

	@../../Profiles/SensorProfile/gyroservice.h

40 #i‚de‡
GYROSERVICE_H


41 
	#GYROSERVICE_H


	)

43 #ifde‡
__˝lu•lus


51 
	~"°_utû.h
"

58 
	#GYROSCOPE_SERV_UUID
 0xAA50

59 
	#GYROSCOPE_DATA_UUID
 0xAA51

	)

60 
	#GYROSCOPE_CONF_UUID
 0xAA52

	)

61 
	#GYROSCOPE_PERI_UUID
 0xAA53

	)

64 
	#GYROSCOPE_SERVICE
 0x00000020

	)

67 
	#GYROSCOPE_DATA_LEN
 6

	)

90 
bSètus_t
 
Gyro_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

98 
bSètus_t
 
Gyro_Regi°îAµCBs
–
£ns‹CBs_t
 *
≠pCÆlbacks
 );

110 
bSètus_t
 
Gyro_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

121 
bSètus_t
 
Gyro_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

127 #ifde‡
__˝lu•lus


	@../../Profiles/SensorProfile/humidityservice.c

43 
	~"bcomdef.h
"

44 
	~"lökdb.h
"

45 
	~"g©t.h
"

46 
	~"g©t_uuid.h
"

47 
	~"g©t£rv≠p.h
"

49 
	~"humidôy£rvi˚.h
"

50 
	~"°_utû.h
"

61 
	#SENSOR_SERVICE_UUID
 
HUMIDITY_SERV_UUID


	)

62 
	#SENSOR_DATA_UUID
 
HUMIDITY_DATA_UUID


	)

63 
	#SENSOR_CONFIG_UUID
 
HUMIDITY_CONF_UUID


	)

64 
	#SENSOR_PERIOD_UUID
 
HUMIDITY_PERI_UUID


	)

66 
	#SENSOR_SERVICE
 
HUMIDITY_SERVICE


	)

67 
	#SENSOR_DATA_LEN
 
HUMIDITY_DATA_LEN


	)

69 
	#SENSOR_DATA_DESCR
 "Humid. D©a"

	)

70 
	#SENSOR_CONFIG_DESCR
 "Humid. C⁄f."

	)

71 
	#SENSOR_PERIOD_DESCR
 "Humid. Pîiod"

	)

82 
CONST
 
uöt8
 
	g£ns‹Sîvi˚UUID
[
TI_UUID_SIZE
] =

84 
TI_UUID
(
SENSOR_SERVICE_UUID
),

88 
CONST
 
uöt8
 
	g£ns‹D©aUUID
[
TI_UUID_SIZE
] =

90 
TI_UUID
(
SENSOR_DATA_UUID
),

94 
CONST
 
uöt8
 
	g£ns‹CfgUUID
[
TI_UUID_SIZE
] =

96 
TI_UUID
(
SENSOR_CONFIG_UUID
),

100 
CONST
 
uöt8
 
	g£ns‹PîiodUUID
[
TI_UUID_SIZE
] =

102 
TI_UUID
(
SENSOR_PERIOD_UUID
),

118 
£ns‹CBs_t
 *
	g£ns‹_AµCBs
 = 
NULL
;

125 
CONST
 
g©tAârTy≥_t
 
	g£ns‹Sîvi˚
 = { 
TI_UUID_SIZE
, 
£ns‹Sîvi˚UUID
 };

128 
uöt8
 
	g£ns‹D©a
[
SENSOR_DATA_LEN
] = { 0, 0, 0};

131 
uöt8
 
	g£ns‹D©aPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_NOTIFY
;

134 
g©tCh¨Cfg_t
 
	g£ns‹D©aC⁄fig
[
GATT_MAX_NUM_CONN
];

137 
uöt8
 
	g£ns‹D©aU£rDes¸
[] = 
SENSOR_DATA_DESCR
;

140 
uöt8
 
	g£ns‹CfgPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

143 
uöt8
 
	g£ns‹Cfg
 = 0;

146 
uöt8
 
	g£ns‹CfgU£rDes¸
[] = 
SENSOR_CONFIG_DESCR
;

149 
uöt8
 
	g£ns‹PîiodPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

152 
uöt8
 
	g£ns‹Pîiod
 = 
SENSOR_MIN_UPDATE_PERIOD
 / 
SENSOR_PERIOD_RESOLUTION
;

155 
uöt8
 
	g£ns‹PîiodU£rDes¸
[] = 
SENSOR_PERIOD_DESCR
;

161 
g©tAâribuã_t
 
	g£ns‹AârTabÀ
[] =

164 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

165 
GATT_PERMIT_READ
,

167 (
uöt8
 *)&
£ns‹Sîvi˚


172 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

173 
GATT_PERMIT_READ
,

175 &
£ns‹D©aPr›s


180 { 
TI_UUID_SIZE
, 
£ns‹D©aUUID
 },

181 
GATT_PERMIT_READ
,

183 
£ns‹D©a


188 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

189 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

191 (
uöt8
 *)
£ns‹D©aC⁄fig


196 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

197 
GATT_PERMIT_READ
,

199 
£ns‹D©aU£rDes¸


204 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

205 
GATT_PERMIT_READ
,

207 &
£ns‹CfgPr›s


212 { 
TI_UUID_SIZE
, 
£ns‹CfgUUID
 },

213 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

215 &
£ns‹Cfg


220 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

221 
GATT_PERMIT_READ
,

223 
£ns‹CfgU£rDes¸


227 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

228 
GATT_PERMIT_READ
,

230 &
£ns‹PîiodPr›s


235 { 
TI_UUID_SIZE
, 
£ns‹PîiodUUID
 },

236 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

238 &
£ns‹Pîiod


243 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

244 
GATT_PERMIT_READ
,

246 
£ns‹PîiodU£rDes¸


254 
uöt8
 
£ns‹_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

255 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

256 
bSètus_t
 
£ns‹_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

257 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

258 
£ns‹_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

265 
CONST
 
g©tSîvi˚CBs_t
 
	g£ns‹CBs
 =

267 
£ns‹_RódAârCB
,

268 
£ns‹_WrôeAârCB
,

269 
NULL


287 
bSètus_t
 
	$Humidôy_AddSîvi˚
–
uöt32
 
£rvi˚s
 )

289 
uöt8
 
°©us
 = 
SUCCESS
;

292 
VOID
 
	`lökDB_Regi°î
–
£ns‹_H™dÀC⁄nSètusCB
 );

293 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
£ns‹D©aC⁄fig
 );

295 i‡(
£rvi˚s
 & 
SENSOR_SERVICE
 )

298 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
£ns‹AârTabÀ
,

299 
	`GATT_NUM_ATTRS
–
£ns‹AârTabÀ
 ),

300 &
£ns‹CBs
 );

303  ( 
°©us
 );

304 
	}
}

317 
bSètus_t
 
	$Humidôy_Regi°îAµCBs
–
£ns‹CBs_t
 *
≠pCÆlbacks
 )

319 i‡–
£ns‹_AµCBs
 =
NULL
 )

321 i‡–
≠pCÆlbacks
 !
NULL
 )

323 
£ns‹_AµCBs
 = 
≠pCÆlbacks
;

326  ( 
SUCCESS
 );

329  ( 
bÀAÃódyInReque°edMode
 );

330 
	}
}

346 
bSètus_t
 
	$Humidôy_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 )

348 
bSètus_t
 
ªt
 = 
SUCCESS
;

350  
∑øm
 )

352 
SENSOR_DATA
:

353 i‡–
Àn
 =
SENSOR_DATA_LEN
 )

355 
VOID
 
	`oßl_mem˝y
–
£ns‹D©a
, 
vÆue
, 
SENSOR_DATA_LEN
 );

357 
	`GATTSîvAµ_Pro˚ssCh¨Cfg
–
£ns‹D©aC⁄fig
, 
£ns‹D©a
, 
FALSE
,

358 
£ns‹AârTabÀ
, 
	`GATT_NUM_ATTRS
( sensorAttrTable ),

359 
INVALID_TASK_ID
 );

363 
ªt
 = 
bÀInvÆidR™ge
;

367 
SENSOR_CONF
:

368 i‡–
Àn
 = ( 
uöt8
 ) )

370 
£ns‹Cfg
 = *((
uöt8
*)
vÆue
);

374 
ªt
 = 
bÀInvÆidR™ge
;

378 
SENSOR_PERI
:

379 i‡–
Àn
 = ( 
uöt8
 ) )

381 
£ns‹Pîiod
 = *((
uöt8
*)
vÆue
);

385 
ªt
 = 
bÀInvÆidR™ge
;

390 
ªt
 = 
INVALIDPARAMETER
;

394  ( 
ªt
 );

395 
	}
}

410 
bSètus_t
 
	$Humidôy_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

412 
bSètus_t
 
ªt
 = 
SUCCESS
;

414  
∑øm
 )

416 
SENSOR_DATA
:

417 
VOID
 
	`oßl_mem˝y
–
vÆue
, 
£ns‹D©a
, 
SENSOR_DATA_LEN
 );

420 
SENSOR_CONF
:

421 *((
uöt8
*)
vÆue
Ë
£ns‹Cfg
;

424 
SENSOR_PERI
:

425 *((
uöt8
*)
vÆue
Ë
£ns‹Pîiod
;

429 
ªt
 = 
INVALIDPARAMETER
;

433  ( 
ªt
 );

434 
	}
}

450 
uöt8
 
	$£ns‹_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

451 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

453 
uöt16
 
uuid
;

454 
bSètus_t
 
°©us
 = 
SUCCESS
;

457 i‡–
	`g©tPîmôAuth‹Ród
–
pAâr
->
≥rmissi⁄s
 ) )

460  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

464 i‡–
off£t
 > 0 )

466  ( 
ATT_ERR_ATTR_NOT_LONG
 );

469 i‡(
	`utûExåa˘Uuid16
(
pAâr
,&
uuid
Ë=
FAILURE
) {

471 *
pLí
 = 0;

472  
ATT_ERR_INVALID_HANDLE
;

475  
uuid
 )

479 
SENSOR_DATA_UUID
:

480 *
pLí
 = 
SENSOR_DATA_LEN
;

481 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
pAâr
->pVÆue, 
SENSOR_DATA_LEN
 );

484 
SENSOR_CONFIG_UUID
:

485 
SENSOR_PERIOD_UUID
:

486 *
pLí
 = 1;

487 
pVÆue
[0] = *
pAâr
->pValue;

491 *
pLí
 = 0;

492 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

496  ( 
°©us
 );

497 
	}
}

512 
bSètus_t
 
	$£ns‹_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

513 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

515 
bSètus_t
 
°©us
 = 
SUCCESS
;

516 
uöt8
 
nŸifyAµ
 = 0xFF;

517 
uöt16
 
uuid
;

520 i‡–
	`g©tPîmôAuth‹Wrôe
–
pAâr
->
≥rmissi⁄s
 ) )

523  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

526 i‡(
	`utûExåa˘Uuid16
(
pAâr
,&
uuid
Ë=
FAILURE
) {

528  
ATT_ERR_INVALID_HANDLE
;

531  
uuid
 )

533 
SENSOR_DATA_UUID
:

537 
SENSOR_CONFIG_UUID
:

540 i‡–
off£t
 == 0 )

542 i‡–
Àn
 != 1 )

544 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

549 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

553 i‡–
°©us
 =
SUCCESS
 )

555 
uöt8
 *
pCurVÆue
 = (uöt8 *)
pAâr
->
pVÆue
;

557 *
pCurVÆue
 = 
pVÆue
[0];

559 if–
pAâr
->
pVÆue
 =&
£ns‹Cfg
 )

561 
nŸifyAµ
 = 
SENSOR_CONF
;

566 
SENSOR_PERIOD_UUID
:

569 i‡–
off£t
 == 0 )

571 i‡–
Àn
 != 1 )

573 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

578 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

581 i‡–
°©us
 =
SUCCESS
 )

583 i‡(
pVÆue
[0]>=(
SENSOR_MIN_UPDATE_PERIOD
/
SENSOR_PERIOD_RESOLUTION
))

586 
uöt8
 *
pCurVÆue
 = (uöt8 *)
pAâr
->
pVÆue
;

587 *
pCurVÆue
 = 
pVÆue
[0];

589 if–
pAâr
->
pVÆue
 =&
£ns‹Pîiod
 )

591 
nŸifyAµ
 = 
SENSOR_PERI
;

596 
°©us
 = 
ATT_ERR_INVALID_VALUE
;

601 
GATT_CLIENT_CHAR_CFG_UUID
:

602 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

603 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

608 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

613 i‡–(
nŸifyAµ
 !0xFF ) && 
£ns‹_AµCBs
 && sís‹_AµCBs->
p‚Sís‹Ch™ge
 )

615 
£ns‹_AµCBs
->
	`p‚Sís‹Ch™ge
–
nŸifyAµ
 );

618  ( 
°©us
 );

619 
	}
}

631 
	$£ns‹_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

634 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

637 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

638 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

639 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

641 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
£ns‹D©aC⁄fig
 );

644 
	}
}

	@../../Profiles/SensorProfile/humidityservice.h

40 #i‚de‡
HUMIDITYSERVICE_H


41 
	#HUMIDITYSERVICE_H


	)

43 #ifde‡
__˝lu•lus


51 
	~"°_utû.h
"

58 
	#HUMIDITY_SERV_UUID
 0xAA20

59 
	#HUMIDITY_DATA_UUID
 0xAA21

	)

60 
	#HUMIDITY_CONF_UUID
 0xAA22

	)

61 
	#HUMIDITY_PERI_UUID
 0xAA23

	)

64 
	#HUMIDITY_SERVICE
 0x00000004

	)

67 
	#HUMIDITY_DATA_LEN
 4

	)

91 
bSètus_t
 
Humidôy_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

99 
bSètus_t
 
Humidôy_Regi°îAµCBs
–
£ns‹CBs_t
 *
≠pCÆlbacks
 );

111 
bSètus_t
 
Humidôy_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

122 
bSètus_t
 
Humidôy_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

128 #ifde‡
__˝lu•lus


	@../../Profiles/SensorProfile/irtempservice.c

43 
	~"bcomdef.h
"

44 
	~"lökdb.h
"

45 
	~"g©t.h
"

46 
	~"g©t_uuid.h
"

47 
	~"g©t£rv≠p.h
"

49 
	~"úãmp£rvi˚.h
"

50 
	~"°_utû.h
"

61 
	#SENSOR_SERVICE_UUID
 
IRTEMPERATURE_SERV_UUID


	)

62 
	#SENSOR_DATA_UUID
 
IRTEMPERATURE_DATA_UUID


	)

63 
	#SENSOR_CONFIG_UUID
 
IRTEMPERATURE_CONF_UUID


	)

64 
	#SENSOR_PERIOD_UUID
 
IRTEMPERATURE_PERI_UUID


	)

66 
	#SENSOR_SERVICE
 
IRTEMPERATURE_SERVICE


	)

67 
	#SENSOR_DATA_LEN
 
IRTEMPERATURE_DATA_LEN


	)

69 
	#SENSOR_DATA_DESCR
 "Temp. D©a"

	)

70 
	#SENSOR_CONFIG_DESCR
 "Temp. C⁄f."

	)

71 
	#SENSOR_PERIOD_DESCR
 "Temp. Pîiod"

	)

74 #unde‡
SENSOR_MIN_UPDATE_PERIOD


75 
	#SENSOR_MIN_UPDATE_PERIOD
 300

76 

	)

105 
CONST
 
uöt8
 
	g£ns‹Sîvi˚UUID
[
TI_UUID_SIZE
] =

107 
TI_UUID
(
SENSOR_SERVICE_UUID
),

111 
CONST
 
uöt8
 
	g£ns‹D©aUUID
[
TI_UUID_SIZE
] =

113 
TI_UUID
(
SENSOR_DATA_UUID
),

117 
CONST
 
uöt8
 
	g£ns‹CfgUUID
[
TI_UUID_SIZE
] =

119 
TI_UUID
(
SENSOR_CONFIG_UUID
),

123 
CONST
 
uöt8
 
	g£ns‹PîiodUUID
[
TI_UUID_SIZE
] =

125 
TI_UUID
(
SENSOR_PERIOD_UUID
),

141 
£ns‹CBs_t
 *
	g£ns‹_AµCBs
 = 
NULL
;

148 
CONST
 
g©tAârTy≥_t
 
	g£ns‹Sîvi˚
 = { 
TI_UUID_SIZE
, 
£ns‹Sîvi˚UUID
 };

151 
uöt8
 
	g£ns‹D©a
[
SENSOR_DATA_LEN
] = { 0, 0, 0, 0};

154 
uöt8
 
	g£ns‹D©aPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_NOTIFY
;

157 
g©tCh¨Cfg_t
 
	g£ns‹D©aC⁄fig
[
GATT_MAX_NUM_CONN
];

160 
uöt8
 
	g£ns‹D©aU£rDes¸
[] = 
SENSOR_DATA_DESCR
;

163 
uöt8
 
	g£ns‹CfgPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

166 
uöt8
 
	g£ns‹Cfg
 = 0;

169 
uöt8
 
	g£ns‹CfgU£rDes¸
[] = 
SENSOR_CONFIG_DESCR
;

172 
uöt8
 
	g£ns‹PîiodPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

175 
uöt8
 
	g£ns‹Pîiod
 = 
SENSOR_MIN_UPDATE_PERIOD
 / 
SENSOR_PERIOD_RESOLUTION
;

178 
uöt8
 
	g£ns‹PîiodU£rDes¸
[] = 
SENSOR_PERIOD_DESCR
;

184 
g©tAâribuã_t
 
	g£ns‹AârTabÀ
[] =

187 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

188 
GATT_PERMIT_READ
,

190 (
uöt8
 *)&
£ns‹Sîvi˚


195 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

196 
GATT_PERMIT_READ
,

198 &
£ns‹D©aPr›s


203 { 
TI_UUID_SIZE
, 
£ns‹D©aUUID
 },

204 
GATT_PERMIT_READ
,

206 
£ns‹D©a


211 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

212 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

214 (
uöt8
 *)
£ns‹D©aC⁄fig


219 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

220 
GATT_PERMIT_READ
,

222 
£ns‹D©aU£rDes¸


227 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

228 
GATT_PERMIT_READ
,

230 &
£ns‹CfgPr›s


235 { 
TI_UUID_SIZE
, 
£ns‹CfgUUID
 },

236 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

238 &
£ns‹Cfg


243 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

244 
GATT_PERMIT_READ
,

246 
£ns‹CfgU£rDes¸


250 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

251 
GATT_PERMIT_READ
,

253 &
£ns‹PîiodPr›s


258 { 
TI_UUID_SIZE
, 
£ns‹PîiodUUID
 },

259 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

261 &
£ns‹Pîiod


266 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

267 
GATT_PERMIT_READ
,

269 
£ns‹PîiodU£rDes¸


277 
uöt8
 
£ns‹_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

278 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

279 
bSètus_t
 
£ns‹_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

280 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

281 
£ns‹_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

288 
CONST
 
g©tSîvi˚CBs_t
 
	g£ns‹CBs
 =

290 
£ns‹_RódAârCB
,

291 
£ns‹_WrôeAârCB
,

292 
NULL


310 
bSètus_t
 
	$IRTemp_AddSîvi˚
–
uöt32
 
£rvi˚s
 )

312 
uöt8
 
°©us
 = 
SUCCESS
;

315 
VOID
 
	`lökDB_Regi°î
–
£ns‹_H™dÀC⁄nSètusCB
 );

316 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
£ns‹D©aC⁄fig
 );

318 i‡(
£rvi˚s
 & 
SENSOR_SERVICE
 )

321 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
£ns‹AârTabÀ
,

322 
	`GATT_NUM_ATTRS
–
£ns‹AârTabÀ
 ),

323 &
£ns‹CBs
 );

326  ( 
°©us
 );

327 
	}
}

340 
bSètus_t
 
	$IRTemp_Regi°îAµCBs
–
£ns‹CBs_t
 *
≠pCÆlbacks
 )

342 i‡–
£ns‹_AµCBs
 =
NULL
 )

344 i‡–
≠pCÆlbacks
 !
NULL
 )

346 
£ns‹_AµCBs
 = 
≠pCÆlbacks
;

349  ( 
SUCCESS
 );

352  ( 
bÀAÃódyInReque°edMode
 );

353 
	}
}

369 
bSètus_t
 
	$IRTemp_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 )

371 
bSètus_t
 
ªt
 = 
SUCCESS
;

373  
∑øm
 )

375 
SENSOR_DATA
:

376 i‡–
Àn
 =
SENSOR_DATA_LEN
 )

378 
VOID
 
	`oßl_mem˝y
–
£ns‹D©a
, 
vÆue
, 
SENSOR_DATA_LEN
 );

380 
	`GATTSîvAµ_Pro˚ssCh¨Cfg
–
£ns‹D©aC⁄fig
, 
£ns‹D©a
, 
FALSE
,

381 
£ns‹AârTabÀ
, 
	`GATT_NUM_ATTRS
( sensorAttrTable ),

382 
INVALID_TASK_ID
 );

386 
ªt
 = 
bÀInvÆidR™ge
;

390 
SENSOR_CONF
:

391 i‡–
Àn
 = ( 
uöt8
 ) )

393 
£ns‹Cfg
 = *((
uöt8
*)
vÆue
);

397 
ªt
 = 
bÀInvÆidR™ge
;

401 
SENSOR_PERI
:

402 i‡–
Àn
 = ( 
uöt8
 ) )

404 
£ns‹Pîiod
 = *((
uöt8
*)
vÆue
);

408 
ªt
 = 
bÀInvÆidR™ge
;

413 
ªt
 = 
INVALIDPARAMETER
;

417  ( 
ªt
 );

418 
	}
}

433 
bSètus_t
 
	$IRTemp_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

435 
bSètus_t
 
ªt
 = 
SUCCESS
;

437  
∑øm
 )

439 
SENSOR_DATA
:

440 
VOID
 
	`oßl_mem˝y
–
vÆue
, 
£ns‹D©a
, 
SENSOR_DATA_LEN
 );

443 
SENSOR_CONF
:

444 *((
uöt8
*)
vÆue
Ë
£ns‹Cfg
;

447 
SENSOR_PERI
:

448 *((
uöt8
*)
vÆue
Ë
£ns‹Pîiod
;

452 
ªt
 = 
INVALIDPARAMETER
;

456  ( 
ªt
 );

457 
	}
}

473 
uöt8
 
	$£ns‹_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

474 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

476 
uöt16
 
uuid
;

477 
bSètus_t
 
°©us
 = 
SUCCESS
;

480 i‡–
	`g©tPîmôAuth‹Ród
–
pAâr
->
≥rmissi⁄s
 ) )

483  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

487 i‡–
off£t
 > 0 )

489  ( 
ATT_ERR_ATTR_NOT_LONG
 );

492 i‡(
	`utûExåa˘Uuid16
(
pAâr
,&
uuid
Ë=
FAILURE
) {

494 *
pLí
 = 0;

495  
ATT_ERR_INVALID_HANDLE
;

498  
uuid
 )

502 
SENSOR_DATA_UUID
:

503 *
pLí
 = 
SENSOR_DATA_LEN
;

504 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
pAâr
->pVÆue, 
SENSOR_DATA_LEN
 );

507 
SENSOR_CONFIG_UUID
:

508 
SENSOR_PERIOD_UUID
:

509 *
pLí
 = 1;

510 
pVÆue
[0] = *
pAâr
->pValue;

514 *
pLí
 = 0;

515 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

519  ( 
°©us
 );

520 
	}
}

535 
bSètus_t
 
	$£ns‹_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

536 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

538 
bSètus_t
 
°©us
 = 
SUCCESS
;

539 
uöt8
 
nŸifyAµ
 = 0xFF;

540 
uöt16
 
uuid
;

543 i‡–
	`g©tPîmôAuth‹Wrôe
–
pAâr
->
≥rmissi⁄s
 ) )

546  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

549 i‡(
	`utûExåa˘Uuid16
(
pAâr
,&
uuid
Ë=
FAILURE
) {

551  
ATT_ERR_INVALID_HANDLE
;

554  
uuid
 )

556 
SENSOR_DATA_UUID
:

560 
SENSOR_CONFIG_UUID
:

563 i‡–
off£t
 == 0 )

565 i‡–
Àn
 != 1 )

567 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

572 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

576 i‡–
°©us
 =
SUCCESS
 )

578 
uöt8
 *
pCurVÆue
 = (uöt8 *)
pAâr
->
pVÆue
;

580 *
pCurVÆue
 = 
pVÆue
[0];

582 if–
pAâr
->
pVÆue
 =&
£ns‹Cfg
 )

584 
nŸifyAµ
 = 
SENSOR_CONF
;

589 
SENSOR_PERIOD_UUID
:

592 i‡–
off£t
 == 0 )

594 i‡–
Àn
 != 1 )

596 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

601 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

604 i‡–
°©us
 =
SUCCESS
 )

606 i‡(
pVÆue
[0]>=(
SENSOR_MIN_UPDATE_PERIOD
/
SENSOR_PERIOD_RESOLUTION
))

609 
uöt8
 *
pCurVÆue
 = (uöt8 *)
pAâr
->
pVÆue
;

610 *
pCurVÆue
 = 
pVÆue
[0];

612 if–
pAâr
->
pVÆue
 =&
£ns‹Pîiod
 )

614 
nŸifyAµ
 = 
SENSOR_PERI
;

619 
°©us
 = 
ATT_ERR_INVALID_VALUE
;

624 
GATT_CLIENT_CHAR_CFG_UUID
:

625 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

626 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

631 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

636 i‡–(
nŸifyAµ
 !0xFF ) && 
£ns‹_AµCBs
 && sís‹_AµCBs->
p‚Sís‹Ch™ge
 )

638 
£ns‹_AµCBs
->
	`p‚Sís‹Ch™ge
–
nŸifyAµ
 );

641  ( 
°©us
 );

642 
	}
}

654 
	$£ns‹_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

657 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

660 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

661 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

662 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

664 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
£ns‹D©aC⁄fig
 );

667 
	}
}

	@../../Profiles/SensorProfile/irtempservice.h

40 #i‚de‡
IRTEMPSERVICE_H


41 
	#IRTEMPSERVICE_H


	)

43 #ifde‡
__˝lu•lus


51 
	~"°_utû.h
"

58 
	#IRTEMPERATURE_SERV_UUID
 0xAA00

59 
	#IRTEMPERATURE_DATA_UUID
 0xAA01

	)

60 
	#IRTEMPERATURE_CONF_UUID
 0xAA02

	)

61 
	#IRTEMPERATURE_PERI_UUID
 0xAA03

	)

64 
	#IRTEMPERATURE_SERVICE
 0x00000001

	)

67 
	#IRTEMPERATURE_DATA_LEN
 4

	)

89 
bSètus_t
 
IRTemp_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

97 
bSètus_t
 
IRTemp_Regi°îAµCBs
–
£ns‹CBs_t
 *
≠pCÆlbacks
 );

109 
bSètus_t
 
IRTemp_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

120 
bSètus_t
 
IRTemp_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

126 #ifde‡
__˝lu•lus


	@../../Profiles/SensorProfile/magnetometerservice.c

43 
	~"bcomdef.h
"

44 
	~"lökdb.h
"

45 
	~"g©t.h
"

46 
	~"g©t_uuid.h
"

47 
	~"g©t£rv≠p.h
"

49 
	~"mag√tomëî£rvi˚.h
"

50 
	~"°_utû.h
"

61 
	#SENSOR_SERVICE_UUID
 
MAGNETOMETER_SERV_UUID


	)

62 
	#SENSOR_DATA_UUID
 
MAGNETOMETER_DATA_UUID


	)

63 
	#SENSOR_CONFIG_UUID
 
MAGNETOMETER_CONF_UUID


	)

64 
	#SENSOR_PERIOD_UUID
 
MAGNETOMETER_PERI_UUID


	)

66 
	#SENSOR_SERVICE
 
MAGNETOMETER_SERVICE


	)

67 
	#SENSOR_DATA_LEN
 
MAGNETOMETER_DATA_LEN


	)

69 
	#SENSOR_DATA_DESCR
 "Magn. D©a"

	)

70 
	#SENSOR_CONFIG_DESCR
 "Magn. C⁄f."

	)

71 
	#SENSOR_PERIOD_DESCR
 "Magn. Pîiod"

	)

82 
CONST
 
uöt8
 
	g£ns‹Sîvi˚UUID
[
TI_UUID_SIZE
] =

84 
TI_UUID
(
SENSOR_SERVICE_UUID
),

88 
CONST
 
uöt8
 
	g£ns‹D©aUUID
[
TI_UUID_SIZE
] =

90 
TI_UUID
(
SENSOR_DATA_UUID
),

94 
CONST
 
uöt8
 
	g£ns‹CfgUUID
[
TI_UUID_SIZE
] =

96 
TI_UUID
(
SENSOR_CONFIG_UUID
),

100 
CONST
 
uöt8
 
	g£ns‹PîiodUUID
[
TI_UUID_SIZE
] =

102 
TI_UUID
(
SENSOR_PERIOD_UUID
),

118 
£ns‹CBs_t
 *
	g£ns‹_AµCBs
 = 
NULL
;

125 
CONST
 
g©tAârTy≥_t
 
	g£ns‹Sîvi˚
 = { 
TI_UUID_SIZE
, 
£ns‹Sîvi˚UUID
 };

128 
uöt8
 
	g£ns‹D©a
[
SENSOR_DATA_LEN
] = { 0, 0, 0, 0, 0, 0};

131 
uöt8
 
	g£ns‹D©aPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_NOTIFY
;

134 
g©tCh¨Cfg_t
 
	g£ns‹D©aC⁄fig
[
GATT_MAX_NUM_CONN
];

137 
uöt8
 
	g£ns‹D©aU£rDes¸
[] = 
SENSOR_DATA_DESCR
;

140 
uöt8
 
	g£ns‹CfgPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

143 
uöt8
 
	g£ns‹Cfg
 = 0;

146 
uöt8
 
	g£ns‹CfgU£rDes¸
[] = 
SENSOR_CONFIG_DESCR
;

149 
uöt8
 
	g£ns‹PîiodPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

152 
uöt8
 
	g£ns‹Pîiod
 = 
SENSOR_MIN_UPDATE_PERIOD
 / 
SENSOR_PERIOD_RESOLUTION
;

155 
uöt8
 
	g£ns‹PîiodU£rDes¸
[] = 
SENSOR_PERIOD_DESCR
;

161 
g©tAâribuã_t
 
	g£ns‹AârTabÀ
[] =

164 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

165 
GATT_PERMIT_READ
,

167 (
uöt8
 *)&
£ns‹Sîvi˚


172 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

173 
GATT_PERMIT_READ
,

175 &
£ns‹D©aPr›s


180 { 
TI_UUID_SIZE
, 
£ns‹D©aUUID
 },

181 
GATT_PERMIT_READ
,

183 
£ns‹D©a


188 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

189 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

191 (
uöt8
 *)
£ns‹D©aC⁄fig


196 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

197 
GATT_PERMIT_READ
,

199 
£ns‹D©aU£rDes¸


204 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

205 
GATT_PERMIT_READ
,

207 &
£ns‹CfgPr›s


212 { 
TI_UUID_SIZE
, 
£ns‹CfgUUID
 },

213 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

215 &
£ns‹Cfg


220 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

221 
GATT_PERMIT_READ
,

223 
£ns‹CfgU£rDes¸


227 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

228 
GATT_PERMIT_READ
,

230 &
£ns‹PîiodPr›s


235 { 
TI_UUID_SIZE
, 
£ns‹PîiodUUID
 },

236 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

238 &
£ns‹Pîiod


243 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

244 
GATT_PERMIT_READ
,

246 
£ns‹PîiodU£rDes¸


254 
uöt8
 
£ns‹_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

255 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

256 
bSètus_t
 
£ns‹_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

257 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

258 
£ns‹_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

265 
CONST
 
g©tSîvi˚CBs_t
 
	g£ns‹CBs
 =

267 
£ns‹_RódAârCB
,

268 
£ns‹_WrôeAârCB
,

269 
NULL


287 
bSètus_t
 
	$Mag√tomëî_AddSîvi˚
–
uöt32
 
£rvi˚s
 )

289 
uöt8
 
°©us
 = 
SUCCESS
;

292 
VOID
 
	`lökDB_Regi°î
–
£ns‹_H™dÀC⁄nSètusCB
 );

293 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
£ns‹D©aC⁄fig
 );

295 i‡(
£rvi˚s
 & 
SENSOR_SERVICE
 )

298 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
£ns‹AârTabÀ
,

299 
	`GATT_NUM_ATTRS
–
£ns‹AârTabÀ
 ),

300 &
£ns‹CBs
 );

303  ( 
°©us
 );

304 
	}
}

317 
bSètus_t
 
	$Mag√tomëî_Regi°îAµCBs
–
£ns‹CBs_t
 *
≠pCÆlbacks
 )

319 i‡–
£ns‹_AµCBs
 =
NULL
 )

321 i‡–
≠pCÆlbacks
 !
NULL
 )

323 
£ns‹_AµCBs
 = 
≠pCÆlbacks
;

326  ( 
SUCCESS
 );

329  ( 
bÀAÃódyInReque°edMode
 );

330 
	}
}

346 
bSètus_t
 
	$Mag√tomëî_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 )

348 
bSètus_t
 
ªt
 = 
SUCCESS
;

350  
∑øm
 )

352 
SENSOR_DATA
:

353 i‡–
Àn
 =
SENSOR_DATA_LEN
 )

355 
VOID
 
	`oßl_mem˝y
–
£ns‹D©a
, 
vÆue
, 
SENSOR_DATA_LEN
 );

357 
	`GATTSîvAµ_Pro˚ssCh¨Cfg
–
£ns‹D©aC⁄fig
, 
£ns‹D©a
, 
FALSE
,

358 
£ns‹AârTabÀ
, 
	`GATT_NUM_ATTRS
( sensorAttrTable ),

359 
INVALID_TASK_ID
 );

363 
ªt
 = 
bÀInvÆidR™ge
;

367 
SENSOR_CONF
:

368 i‡–
Àn
 = ( 
uöt8
 ) )

370 
£ns‹Cfg
 = *((
uöt8
*)
vÆue
);

374 
ªt
 = 
bÀInvÆidR™ge
;

378 
SENSOR_PERI
:

379 i‡–
Àn
 = ( 
uöt8
 ) )

381 
£ns‹Pîiod
 = *((
uöt8
*)
vÆue
);

385 
ªt
 = 
bÀInvÆidR™ge
;

390 
ªt
 = 
INVALIDPARAMETER
;

394  ( 
ªt
 );

395 
	}
}

410 
bSètus_t
 
	$Mag√tomëî_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

412 
bSètus_t
 
ªt
 = 
SUCCESS
;

414  
∑øm
 )

416 
SENSOR_DATA
:

417 
VOID
 
	`oßl_mem˝y
–
vÆue
, 
£ns‹D©a
, 
SENSOR_DATA_LEN
 );

420 
SENSOR_CONF
:

421 *((
uöt8
*)
vÆue
Ë
£ns‹Cfg
;

424 
SENSOR_PERI
:

425 *((
uöt8
*)
vÆue
Ë
£ns‹Pîiod
;

429 
ªt
 = 
INVALIDPARAMETER
;

433  ( 
ªt
 );

434 
	}
}

450 
uöt8
 
	$£ns‹_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

451 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

453 
uöt16
 
uuid
;

454 
bSètus_t
 
°©us
 = 
SUCCESS
;

457 i‡–
	`g©tPîmôAuth‹Ród
–
pAâr
->
≥rmissi⁄s
 ) )

460  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

464 i‡–
off£t
 > 0 )

466  ( 
ATT_ERR_ATTR_NOT_LONG
 );

469 i‡(
	`utûExåa˘Uuid16
(
pAâr
,&
uuid
Ë=
FAILURE
) {

471 *
pLí
 = 0;

472  
ATT_ERR_INVALID_HANDLE
;

475  
uuid
 )

479 
SENSOR_DATA_UUID
:

480 *
pLí
 = 
SENSOR_DATA_LEN
;

481 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
pAâr
->pVÆue, 
SENSOR_DATA_LEN
 );

484 
SENSOR_CONFIG_UUID
:

485 
SENSOR_PERIOD_UUID
:

486 *
pLí
 = 1;

487 
pVÆue
[0] = *
pAâr
->pValue;

491 *
pLí
 = 0;

492 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

496  ( 
°©us
 );

497 
	}
}

512 
bSètus_t
 
	$£ns‹_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

513 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

515 
bSètus_t
 
°©us
 = 
SUCCESS
;

516 
uöt8
 
nŸifyAµ
 = 0xFF;

517 
uöt16
 
uuid
;

520 i‡–
	`g©tPîmôAuth‹Wrôe
–
pAâr
->
≥rmissi⁄s
 ) )

523  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

526 i‡(
	`utûExåa˘Uuid16
(
pAâr
,&
uuid
Ë=
FAILURE
) {

528  
ATT_ERR_INVALID_HANDLE
;

531  
uuid
 )

533 
SENSOR_DATA_UUID
:

537 
SENSOR_CONFIG_UUID
:

540 i‡–
off£t
 == 0 )

542 i‡–
Àn
 != 1 )

544 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

549 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

553 i‡–
°©us
 =
SUCCESS
 )

555 
uöt8
 *
pCurVÆue
 = (uöt8 *)
pAâr
->
pVÆue
;

557 *
pCurVÆue
 = 
pVÆue
[0];

559 if–
pAâr
->
pVÆue
 =&
£ns‹Cfg
 )

561 
nŸifyAµ
 = 
SENSOR_CONF
;

566 
SENSOR_PERIOD_UUID
:

569 i‡–
off£t
 == 0 )

571 i‡–
Àn
 != 1 )

573 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

578 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

581 i‡–
°©us
 =
SUCCESS
 )

583 i‡(
pVÆue
[0]>=(
SENSOR_MIN_UPDATE_PERIOD
/
SENSOR_PERIOD_RESOLUTION
))

586 
uöt8
 *
pCurVÆue
 = (uöt8 *)
pAâr
->
pVÆue
;

587 *
pCurVÆue
 = 
pVÆue
[0];

589 if–
pAâr
->
pVÆue
 =&
£ns‹Pîiod
 )

591 
nŸifyAµ
 = 
SENSOR_PERI
;

596 
°©us
 = 
ATT_ERR_INVALID_VALUE
;

601 
GATT_CLIENT_CHAR_CFG_UUID
:

602 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

603 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

608 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

613 i‡–(
nŸifyAµ
 !0xFF ) && 
£ns‹_AµCBs
 && sís‹_AµCBs->
p‚Sís‹Ch™ge
 )

615 
£ns‹_AµCBs
->
	`p‚Sís‹Ch™ge
–
nŸifyAµ
 );

618  ( 
°©us
 );

619 
	}
}

631 
	$£ns‹_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

634 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

637 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

638 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

639 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

641 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
£ns‹D©aC⁄fig
 );

644 
	}
}

	@../../Profiles/SensorProfile/magnetometerservice.h

40 #i‚de‡
MAGNETOMETERSERVICE_H


41 
	#MAGNETOMETERSERVICE_H


	)

43 #ifde‡
__˝lu•lus


51 
	~"°_utû.h
"

58 
	#MAGNETOMETER_SERV_UUID
 0xAA30

59 
	#MAGNETOMETER_DATA_UUID
 0xAA31

	)

60 
	#MAGNETOMETER_CONF_UUID
 0xAA32

	)

61 
	#MAGNETOMETER_PERI_UUID
 0xAA33

	)

64 
	#MAGNETOMETER_SERVICE
 0x00000008

	)

67 
	#MAGNETOMETER_DATA_LEN
 6

	)

93 
bSètus_t
 
Mag√tomëî_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

101 
bSètus_t
 
Mag√tomëî_Regi°îAµCBs
–
£ns‹CBs_t
 *
≠pCÆlbacks
 );

113 
bSètus_t
 
Mag√tomëî_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

124 
bSètus_t
 
Mag√tomëî_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

130 #ifde‡
__˝lu•lus


	@../../Profiles/SensorProfile/st_util.c

43 
	~"bcomdef.h
"

44 
	~"g©t.h
"

45 
	~"°_utû.h
"

62 
bSètus_t
 
	$utûExåa˘Uuid16
(
g©tAâribuã_t
 *
pAâr
, 
uöt16
 *
pUuid
)

64 
bSètus_t
 
°©us
 = 
SUCCESS
;

66 i‡–
pAâr
->
ty≥
.
Àn
 =
ATT_BT_UUID_SIZE
 )

69 *
pUuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.
uuid
[0],ÖAttr->type.uuid[1]);

70 #ifde‡
GATT_TI_UUID_128_BIT


72 i‡(
pAâr
->
ty≥
.
Àn
 =
ATT_UUID_SIZE
)

75 *
pUuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.
uuid
[12],ÖAttr->type.uuid[13]);

78 *
pUuid
 = 0xFFFF;

79 
°©us
 = 
FAILURE
;

82  
°©us
;

83 
	}
}

	@../../Profiles/SensorProfile/st_util.h

40 #i‚de‡
ST_UTIL_H


41 
	#ST_UTIL_H


	)

46 #ifde‡
GATT_TI_UUID_128_BIT


49 
	#TI_UUID_SIZE
 
ATT_UUID_SIZE


	)

50 
	#TI_UUID
(
uuid
Ë
	`TI_BASE_UUID_128
(uuid)

	)

55 
	#TI_UUID_SIZE
 
ATT_BT_UUID_SIZE


	)

56 
	#TI_UUID
(
uuid
Ë
	`LO_UINT16
(uuid), 
	`HI_UINT16
(uuid)

	)

61 
	#SENSOR_DATA
 0

62 
	#SENSOR_CONF
 1

63 
	#SENSOR_PERI
 2

64 
	#SENSOR_CALB
 3

65 

	)

67 
	#SENSOR_MIN_UPDATE_PERIOD
 100

68 
	#SENSOR_PERIOD_RESOLUTION
 10

69 

	)

71 
	#ST_CFG_SENSOR_DISABLE
 0x00

	)

72 
	#ST_CFG_SENSOR_ENABLE
 0x01

	)

73 
	#ST_CFG_CALIBRATE
 0x02

	)

74 
	#ST_CFG_ERROR
 0xFF

	)

82 (*
	t£ns‹Ch™ge_t
)–
	tuöt8
 
	t∑ømID
 );

86 
£ns‹Ch™ge_t
 
p‚Sís‹Ch™ge
;

87 } 
	t£ns‹CBs_t
;

105 
bSètus_t
 
	`utûExåa˘Uuid16
(
g©tAâribuã_t
 *
pAâr
, 
uöt16
 *
pVÆue
);

	@../../Profiles/SensorProfile/testservice.c

43 
	~"bcomdef.h
"

44 
	~"OSAL.h
"

45 
	~"lökdb.h
"

46 
	~"©t.h
"

47 
	~"g©t.h
"

48 
	~"g©t_uuid.h
"

49 
	~"g©t£rv≠p.h
"

50 
	~"g≠b⁄dmgr.h
"

52 
	~"ã°£rvi˚.h
"

53 
	~"°_utû.h
"

68 
CONST
 
uöt8
 
	gã°SîvUUID
[
TI_UUID_SIZE
] =

70 
TI_UUID
(
TEST_SERV_UUID
)

74 
CONST
 
uöt8
 
	gã°D©aUUID
[
TI_UUID_SIZE
] =

76 
TI_UUID
(
TEST_DATA_UUID
)

80 
CONST
 
uöt8
 
	gã°C⁄fUUID
[
TI_UUID_SIZE
] =

82 
TI_UUID
(
TEST_CONF_UUID
)

98 
ã°CBs_t
 *
	gã°_AµCBs
 = 
NULL
;

105 
CONST
 
g©tAârTy≥_t
 
	gã°Sîvi˚
 = { 
TI_UUID_SIZE
, 
ã°SîvUUID
 };

108 
uöt8
 
	gã°D©aPr›s
 = 
GATT_PROP_READ
;

111 
uöt8
 
	gã°D©a
[
TEST_DATA_LEN
] = {0,0};

114 
g©tCh¨Cfg_t
 
	gã°D©aC⁄fig
[
GATT_MAX_NUM_CONN
];

117 
uöt8
 
	gã°D©aU£rDe•
[] = "Test Data";

120 
uöt8
 
	gã°C⁄fPr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

123 
uöt8
 
	gã°C⁄f
 = 0x00;

126 
uöt8
 
	gã°C⁄fU£rDe•
[] = "Test Config";

132 
g©tAâribuã_t
 
	gã°AârTbl
[] =

136 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

137 
GATT_PERMIT_READ
,

139 (
uöt8
 *)&
ã°Sîvi˚


144 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

145 
GATT_PERMIT_READ
,

147 &
ã°D©aPr›s


152 { 
TI_UUID_SIZE
, 
ã°D©aUUID
 },

153 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

155 
ã°D©a


160 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

161 
GATT_PERMIT_READ
,

163 
ã°D©aU£rDe•


168 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

169 
GATT_PERMIT_READ
,

171 &
ã°C⁄fPr›s


176 { 
TI_UUID_SIZE
, 
ã°C⁄fUUID
 },

177 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

179 &
ã°C⁄f


184 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

185 
GATT_PERMIT_READ
,

187 
ã°C⁄fU£rDe•


195 
uöt8
 
ã°_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

196 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

197 
bSètus_t
 
ã°_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

198 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

199 
ã°_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

206 
CONST
 
g©tSîvi˚CBs_t
 
	gã°CBs
 =

208 
ã°_RódAârCB
,

209 
ã°_WrôeAârCB
,

210 
NULL


228 
bSètus_t
 
	$Te°_AddSîvi˚
–
uöt32
 
£rvi˚s
 )

230 
uöt8
 
°©us
 = 
SUCCESS
;

233 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
ã°D©aC⁄fig
 );

236 
VOID
 
	`lökDB_Regi°î
–
ã°_H™dÀC⁄nSètusCB
 );

238 i‡–
£rvi˚s
 & 
TEST_SERVICE
 )

241 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
ã°AârTbl
,

242 
	`GATT_NUM_ATTRS
–
ã°AârTbl
 ),

243 &
ã°CBs
 );

246  ( 
°©us
 );

247 
	}
}

259 
bSètus_t
 
	$Te°_Regi°îAµCBs
–
ã°CBs_t
 *
≠pCÆlbacks
 )

261 i‡–
ã°_AµCBs
 =
NULL
 )

263 i‡–
≠pCÆlbacks
 !
NULL
 )

265 
ã°_AµCBs
 = 
≠pCÆlbacks
;

268  ( 
SUCCESS
 );

271  ( 
bÀAÃódyInReque°edMode
 );

273 
	}
}

289 
bSètus_t
 
	$Te°_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 )

291 
bSètus_t
 
ªt
 = 
SUCCESS
;

293  
∑øm
 )

295 
TEST_DATA_ATTR
:

296 i‡–
Àn
 =
TEST_DATA_LEN
 )

298 
VOID
 
	`oßl_mem˝y
–
ã°D©a
, 
vÆue
, 
TEST_DATA_LEN
 );

300 
	`GATTSîvAµ_Pro˚ssCh¨Cfg
–
ã°D©aC⁄fig
, 
ã°D©a
, 
FALSE
,

301 
ã°AârTbl
, 
	`GATT_NUM_ATTRS
(ÅestAttrTbl ),

302 
INVALID_TASK_ID
 );

306 
ªt
 = 
bÀInvÆidR™ge
;

310 
TEST_CONF_ATTR
:

311 if(
Àn
 = ( 
uöt8
 ) )

313 
ã°C⁄f
 = *((
uöt8
*)
vÆue
);

317 
ªt
 = 
bÀInvÆidR™ge
;

322 
ªt
 = 
INVALIDPARAMETER
;

326  ( 
ªt
 );

327 
	}
}

342 
bSètus_t
 
	$Te°_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

344 
bSètus_t
 
ªt
 = 
SUCCESS
;

346  
∑øm
 )

348 
TEST_DATA_ATTR
:

349 
VOID
 
	`oßl_mem˝y
 (
vÆue
, 
ã°D©a
, 
TEST_DATA_LEN
 );

352 
TEST_CONF_ATTR
:

353 *((
uöt8
*)
vÆue
Ë
ã°C⁄f
;

357 
ªt
 = 
INVALIDPARAMETER
;

361  ( 
ªt
 );

362 
	}
}

378 
uöt8
 
	$ã°_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

379 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

381 
uöt16
 
uuid
;

382 
bSètus_t
 
°©us
 = 
SUCCESS
;

385 i‡–
	`g©tPîmôAuth‹Ród
–
pAâr
->
≥rmissi⁄s
 ) )

388  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

392 i‡–
off£t
 > 0 )

394  ( 
ATT_ERR_ATTR_NOT_LONG
 );

397 i‡(
	`utûExåa˘Uuid16
(
pAâr
,&
uuid
Ë=
FAILURE
)

400  
ATT_ERR_INVALID_HANDLE
;

403  
uuid
 )

407 
TEST_DATA_UUID
:

408 *
pLí
 = 
TEST_DATA_LEN
;

409 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
pAâr
->pVÆue, 
TEST_DATA_LEN
 );

412 
TEST_CONF_UUID
:

413 *
pLí
 = 1;

414 
pVÆue
[0] = *
pAâr
->pValue;

419 *
pLí
 = 0;

420 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

424  ( 
°©us
 );

425 
	}
}

440 
bSètus_t
 
	$ã°_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

441 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

443 
bSètus_t
 
°©us
 = 
SUCCESS
;

444 
uöt8
 
nŸifyAµ
 = 0xFF;

445 
uöt16
 
uuid
;

448 i‡–
	`g©tPîmôAuth‹Wrôe
–
pAâr
->
≥rmissi⁄s
 ) )

451  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

454 i‡(
	`utûExåa˘Uuid16
(
pAâr
,&
uuid
Ë=
FAILURE
)

457  
ATT_ERR_INVALID_HANDLE
;

460  
uuid
 )

462 
TEST_CONF_UUID
:

465 i‡–
off£t
 == 0 )

467 i‡–
Àn
 != 1 )

469 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

474 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

478 i‡–
°©us
 =
SUCCESS
 )

480 
uöt8
 *
pCurVÆue
 = (uöt8 *)
pAâr
->
pVÆue
;

481 *
pCurVÆue
 = 
pVÆue
[0];

483 if–
pAâr
->
pVÆue
 =&
ã°C⁄f
 )

485 
nŸifyAµ
 = 
TEST_CONF_ATTR
;

490 
GATT_CLIENT_CHAR_CFG_UUID
:

491 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

492 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

497 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

502 i‡–(
nŸifyAµ
 !0xFF ) && 
ã°_AµCBs
 &&Åe°_AµCBs->
p‚Te°Ch™ge
 )

504 
ã°_AµCBs
->
	`p‚Te°Ch™ge
–
nŸifyAµ
 );

507  ( 
°©us
 );

508 
	}
}

520 
	$ã°_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

523 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

526 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

527 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

528 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

530 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
ã°D©aC⁄fig
 );

533 
	}
}

	@../../Profiles/SensorProfile/testservice.h

40 #i‚de‡
TESTSERVICE_H


41 
	#TESTSERVICE_H


	)

43 #ifde‡
__˝lu•lus


57 
	#TEST_DATA_ATTR
 0

58 
	#TEST_CONF_ATTR
 1

59 

	)

61 
	#TEST_SERV_UUID
 0xAA60

62 
	#TEST_DATA_UUID
 0xAA61

	)

63 
	#TEST_CONF_UUID
 0xAA62

	)

66 
	#TEST_SERVICE
 0x00000001

	)

69 
	#TEST_DATA_LEN
 2

	)

87 (*
ã°Ch™ge_t
)–
	tuöt8
 
	t∑ømID
 );

91 
ã°Ch™ge_t
 
p‚Te°Ch™ge
;

92 } 
	tã°CBs_t
;

106 
bSètus_t
 
Te°_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

114 
bSètus_t
 
Te°_Regi°îAµCBs
–
ã°CBs_t
 *
≠pCÆlbacks
 );

126 
bSètus_t
 
Te°_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
pVÆue
 );

137 
bSètus_t
 
Te°_GëP¨amëî
–
uöt8
 
∑øm
, *
pVÆue
 );

143 #ifde‡
__˝lu•lus


	@../../Profiles/SimpleProfile/simpleGATTprofile.c

43 
	~"bcomdef.h
"

44 
	~"OSAL.h
"

45 
	~"lökdb.h
"

46 
	~"©t.h
"

47 
	~"g©t.h
"

48 
	~"g©t_uuid.h
"

49 
	~"g©t£rv≠p.h
"

50 
	~"g≠b⁄dmgr.h
"

52 
	~"sim∂eGATT¥ofûe.h
"

62 
	#SERVAPP_NUM_ATTR_SUPPORTED
 17

	)

72 
CONST
 
uöt8
 
	gsim∂eProfûeSîvUUID
[
ATT_BT_UUID_SIZE
] =

74 
LO_UINT16
(
SIMPLEPROFILE_SERV_UUID
), 
HI_UINT16
(SIMPLEPROFILE_SERV_UUID)

78 
CONST
 
uöt8
 
	gsim∂eProfûech¨1UUID
[
ATT_BT_UUID_SIZE
] =

80 
LO_UINT16
(
SIMPLEPROFILE_CHAR1_UUID
), 
HI_UINT16
(SIMPLEPROFILE_CHAR1_UUID)

84 
CONST
 
uöt8
 
	gsim∂eProfûech¨2UUID
[
ATT_BT_UUID_SIZE
] =

86 
LO_UINT16
(
SIMPLEPROFILE_CHAR2_UUID
), 
HI_UINT16
(SIMPLEPROFILE_CHAR2_UUID)

90 
CONST
 
uöt8
 
	gsim∂eProfûech¨3UUID
[
ATT_BT_UUID_SIZE
] =

92 
LO_UINT16
(
SIMPLEPROFILE_CHAR3_UUID
), 
HI_UINT16
(SIMPLEPROFILE_CHAR3_UUID)

96 
CONST
 
uöt8
 
	gsim∂eProfûech¨4UUID
[
ATT_BT_UUID_SIZE
] =

98 
LO_UINT16
(
SIMPLEPROFILE_CHAR4_UUID
), 
HI_UINT16
(SIMPLEPROFILE_CHAR4_UUID)

102 
CONST
 
uöt8
 
	gsim∂eProfûech¨5UUID
[
ATT_BT_UUID_SIZE
] =

104 
LO_UINT16
(
SIMPLEPROFILE_CHAR5_UUID
), 
HI_UINT16
(SIMPLEPROFILE_CHAR5_UUID)

119 
sim∂eProfûeCBs_t
 *
	gsim∂eProfûe_AµCBs
 = 
NULL
;

126 
CONST
 
g©tAârTy≥_t
 
	gsim∂eProfûeSîvi˚
 = { 
ATT_BT_UUID_SIZE
, 
sim∂eProfûeSîvUUID
 };

130 
uöt8
 
	gsim∂eProfûeCh¨1Pr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

133 
uöt8
 
	gsim∂eProfûeCh¨1
 = 0;

136 
uöt8
 
	gsim∂eProfûeCh¨1U£rDe•
[17] = "Characteristic 1\0";

140 
uöt8
 
	gsim∂eProfûeCh¨2Pr›s
 = 
GATT_PROP_READ
;

143 
uöt8
 
	gsim∂eProfûeCh¨2
 = 0;

146 
uöt8
 
	gsim∂eProfûeCh¨2U£rDe•
[17] = "Characteristic 2\0";

150 
uöt8
 
	gsim∂eProfûeCh¨3Pr›s
 = 
GATT_PROP_WRITE
;

153 
uöt8
 
	gsim∂eProfûeCh¨3
 = 0;

156 
uöt8
 
	gsim∂eProfûeCh¨3U£rDe•
[17] = "Characteristic 3\0";

160 
uöt8
 
	gsim∂eProfûeCh¨4Pr›s
 = 
GATT_PROP_NOTIFY
;

163 
uöt8
 
	gsim∂eProfûeCh¨4
 = 0;

169 
g©tCh¨Cfg_t
 
	gsim∂eProfûeCh¨4C⁄fig
[
GATT_MAX_NUM_CONN
];

172 
uöt8
 
	gsim∂eProfûeCh¨4U£rDe•
[17] = "Characteristic 4\0";

176 
uöt8
 
	gsim∂eProfûeCh¨5Pr›s
 = 
GATT_PROP_READ
;

179 
uöt8
 
	gsim∂eProfûeCh¨5
[
SIMPLEPROFILE_CHAR5_LEN
] = { 0, 0, 0, 0, 0 };

182 
uöt8
 
	gsim∂eProfûeCh¨5U£rDe•
[17] = "Characteristic 5\0";

189 
g©tAâribuã_t
 
	gsim∂eProfûeAârTbl
[
SERVAPP_NUM_ATTR_SUPPORTED
] =

193 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

194 
GATT_PERMIT_READ
,

196 (
uöt8
 *)&
sim∂eProfûeSîvi˚


201 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

202 
GATT_PERMIT_READ
,

204 &
sim∂eProfûeCh¨1Pr›s


209 { 
ATT_BT_UUID_SIZE
, 
sim∂eProfûech¨1UUID
 },

210 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

212 &
sim∂eProfûeCh¨1


217 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

218 
GATT_PERMIT_READ
,

220 
sim∂eProfûeCh¨1U£rDe•


225 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

226 
GATT_PERMIT_READ
,

228 &
sim∂eProfûeCh¨2Pr›s


233 { 
ATT_BT_UUID_SIZE
, 
sim∂eProfûech¨2UUID
 },

234 
GATT_PERMIT_READ
,

236 &
sim∂eProfûeCh¨2


241 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

242 
GATT_PERMIT_READ
,

244 
sim∂eProfûeCh¨2U£rDe•


249 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

250 
GATT_PERMIT_READ
,

252 &
sim∂eProfûeCh¨3Pr›s


257 { 
ATT_BT_UUID_SIZE
, 
sim∂eProfûech¨3UUID
 },

258 
GATT_PERMIT_WRITE
,

260 &
sim∂eProfûeCh¨3


265 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

266 
GATT_PERMIT_READ
,

268 
sim∂eProfûeCh¨3U£rDe•


273 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

274 
GATT_PERMIT_READ
,

276 &
sim∂eProfûeCh¨4Pr›s


281 { 
ATT_BT_UUID_SIZE
, 
sim∂eProfûech¨4UUID
 },

284 &
sim∂eProfûeCh¨4


289 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

290 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

292 (
uöt8
 *)
sim∂eProfûeCh¨4C⁄fig


297 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

298 
GATT_PERMIT_READ
,

300 
sim∂eProfûeCh¨4U£rDe•


305 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

306 
GATT_PERMIT_READ
,

308 &
sim∂eProfûeCh¨5Pr›s


313 { 
ATT_BT_UUID_SIZE
, 
sim∂eProfûech¨5UUID
 },

314 
GATT_PERMIT_AUTHEN_READ
,

316 
sim∂eProfûeCh¨5


321 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

322 
GATT_PERMIT_READ
,

324 
sim∂eProfûeCh¨5U£rDe•


334 
uöt8
 
sim∂eProfûe_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

335 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

336 
bSètus_t
 
sim∂eProfûe_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

337 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

339 
sim∂eProfûe_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

346 
CONST
 
g©tSîvi˚CBs_t
 
	gsim∂eProfûeCBs
 =

348 
sim∂eProfûe_RódAârCB
,

349 
sim∂eProfûe_WrôeAârCB
,

350 
NULL


368 
bSètus_t
 
	$Sim∂eProfûe_AddSîvi˚
–
uöt32
 
£rvi˚s
 )

370 
uöt8
 
°©us
 = 
SUCCESS
;

373 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
sim∂eProfûeCh¨4C⁄fig
 );

376 
VOID
 
	`lökDB_Regi°î
–
sim∂eProfûe_H™dÀC⁄nSètusCB
 );

378 i‡–
£rvi˚s
 & 
SIMPLEPROFILE_SERVICE
 )

381 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
sim∂eProfûeAârTbl
,

382 
	`GATT_NUM_ATTRS
–
sim∂eProfûeAârTbl
 ),

383 &
sim∂eProfûeCBs
 );

386  ( 
°©us
 );

387 
	}
}

400 
bSètus_t
 
	$Sim∂eProfûe_Regi°îAµCBs
–
sim∂eProfûeCBs_t
 *
≠pCÆlbacks
 )

402 i‡–
≠pCÆlbacks
 )

404 
sim∂eProfûe_AµCBs
 = 
≠pCÆlbacks
;

406  ( 
SUCCESS
 );

410  ( 
bÀAÃódyInReque°edMode
 );

412 
	}
}

429 
bSètus_t
 
	$Sim∂eProfûe_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 )

431 
bSètus_t
 
ªt
 = 
SUCCESS
;

432  
∑øm
 )

434 
SIMPLEPROFILE_CHAR1
:

435 i‡–
Àn
 = ( 
uöt8
 ) )

437 
sim∂eProfûeCh¨1
 = *((
uöt8
*)
vÆue
);

441 
ªt
 = 
bÀInvÆidR™ge
;

445 
SIMPLEPROFILE_CHAR2
:

446 i‡–
Àn
 = ( 
uöt8
 ) )

448 
sim∂eProfûeCh¨2
 = *((
uöt8
*)
vÆue
);

452 
ªt
 = 
bÀInvÆidR™ge
;

456 
SIMPLEPROFILE_CHAR3
:

457 i‡–
Àn
 = ( 
uöt8
 ) )

459 
sim∂eProfûeCh¨3
 = *((
uöt8
*)
vÆue
);

463 
ªt
 = 
bÀInvÆidR™ge
;

467 
SIMPLEPROFILE_CHAR4
:

468 i‡–
Àn
 = ( 
uöt8
 ) )

470 
sim∂eProfûeCh¨4
 = *((
uöt8
*)
vÆue
);

473 
	`GATTSîvAµ_Pro˚ssCh¨Cfg
–
sim∂eProfûeCh¨4C⁄fig
, &
sim∂eProfûeCh¨4
, 
FALSE
,

474 
sim∂eProfûeAârTbl
, 
	`GATT_NUM_ATTRS
( simpleProfileAttrTbl ),

475 
INVALID_TASK_ID
 );

479 
ªt
 = 
bÀInvÆidR™ge
;

483 
SIMPLEPROFILE_CHAR5
:

484 i‡–
Àn
 =
SIMPLEPROFILE_CHAR5_LEN
 )

486 
VOID
 
	`oßl_mem˝y
–
sim∂eProfûeCh¨5
, 
vÆue
, 
SIMPLEPROFILE_CHAR5_LEN
 );

490 
ªt
 = 
bÀInvÆidR™ge
;

495 
ªt
 = 
INVALIDPARAMETER
;

499  ( 
ªt
 );

500 
	}
}

515 
bSètus_t
 
	$Sim∂eProfûe_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

517 
bSètus_t
 
ªt
 = 
SUCCESS
;

518  
∑øm
 )

520 
SIMPLEPROFILE_CHAR1
:

521 *((
uöt8
*)
vÆue
Ë
sim∂eProfûeCh¨1
;

524 
SIMPLEPROFILE_CHAR2
:

525 *((
uöt8
*)
vÆue
Ë
sim∂eProfûeCh¨2
;

528 
SIMPLEPROFILE_CHAR3
:

529 *((
uöt8
*)
vÆue
Ë
sim∂eProfûeCh¨3
;

532 
SIMPLEPROFILE_CHAR4
:

533 *((
uöt8
*)
vÆue
Ë
sim∂eProfûeCh¨4
;

536 
SIMPLEPROFILE_CHAR5
:

537 
VOID
 
	`oßl_mem˝y
–
vÆue
, 
sim∂eProfûeCh¨5
, 
SIMPLEPROFILE_CHAR5_LEN
 );

541 
ªt
 = 
INVALIDPARAMETER
;

545  ( 
ªt
 );

546 
	}
}

562 
uöt8
 
	$sim∂eProfûe_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

563 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

565 
bSètus_t
 
°©us
 = 
SUCCESS
;

568 i‡–
	`g©tPîmôAuth‹Ród
–
pAâr
->
≥rmissi⁄s
 ) )

571  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

575 i‡–
off£t
 > 0 )

577  ( 
ATT_ERR_ATTR_NOT_LONG
 );

580 i‡–
pAâr
->
ty≥
.
Àn
 =
ATT_BT_UUID_SIZE
 )

583 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

584  
uuid
 )

594 
SIMPLEPROFILE_CHAR1_UUID
:

595 
SIMPLEPROFILE_CHAR2_UUID
:

596 
SIMPLEPROFILE_CHAR4_UUID
:

597 *
pLí
 = 1;

598 
pVÆue
[0] = *
pAâr
->pValue;

601 
SIMPLEPROFILE_CHAR5_UUID
:

602 *
pLí
 = 
SIMPLEPROFILE_CHAR5_LEN
;

603 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
pAâr
->pVÆue, 
SIMPLEPROFILE_CHAR5_LEN
 );

608 *
pLí
 = 0;

609 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

616 *
pLí
 = 0;

617 
°©us
 = 
ATT_ERR_INVALID_HANDLE
;

620  ( 
°©us
 );

621 
	}
}

636 
bSètus_t
 
	$sim∂eProfûe_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

637 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

639 
bSètus_t
 
°©us
 = 
SUCCESS
;

640 
uöt8
 
nŸifyAµ
 = 0xFF;

643 i‡–
	`g©tPîmôAuth‹Wrôe
–
pAâr
->
≥rmissi⁄s
 ) )

646  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

649 i‡–
pAâr
->
ty≥
.
Àn
 =
ATT_BT_UUID_SIZE
 )

652 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

653  
uuid
 )

655 
SIMPLEPROFILE_CHAR1_UUID
:

656 
SIMPLEPROFILE_CHAR3_UUID
:

660 i‡–
off£t
 == 0 )

662 i‡–
Àn
 != 1 )

664 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

669 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

673 i‡–
°©us
 =
SUCCESS
 )

675 
uöt8
 *
pCurVÆue
 = (uöt8 *)
pAâr
->
pVÆue
;

676 *
pCurVÆue
 = 
pVÆue
[0];

678 if–
pAâr
->
pVÆue
 =&
sim∂eProfûeCh¨1
 )

680 
nŸifyAµ
 = 
SIMPLEPROFILE_CHAR1
;

684 
nŸifyAµ
 = 
SIMPLEPROFILE_CHAR3
;

690 
GATT_CLIENT_CHAR_CFG_UUID
:

691 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

692 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

697 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

704 
°©us
 = 
ATT_ERR_INVALID_HANDLE
;

708 i‡–(
nŸifyAµ
 !0xFF ) && 
sim∂eProfûe_AµCBs
 && sim∂eProfûe_AµCBs->
p‚Sim∂eProfûeCh™ge
 )

710 
sim∂eProfûe_AµCBs
->
	`p‚Sim∂eProfûeCh™ge
–
nŸifyAµ
 );

713  ( 
°©us
 );

714 
	}
}

726 
	$sim∂eProfûe_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

729 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

732 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

733 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

734 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

736 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
sim∂eProfûeCh¨4C⁄fig
 );

739 
	}
}

	@../../Profiles/SimpleProfile/simpleGATTprofile.h

40 #i‚de‡
SIMPLEGATTPROFILE_H


41 
	#SIMPLEGATTPROFILE_H


	)

43 #ifde‡
__˝lu•lus


57 
	#SIMPLEPROFILE_CHAR1
 0

58 
	#SIMPLEPROFILE_CHAR2
 1

59 
	#SIMPLEPROFILE_CHAR3
 2

60 
	#SIMPLEPROFILE_CHAR4
 3

61 
	#SIMPLEPROFILE_CHAR5
 4

62 

	)

64 
	#SIMPLEPROFILE_SERV_UUID
 0xFFF0

	)

67 
	#SIMPLEPROFILE_CHAR1_UUID
 0xFFF1

	)

68 
	#SIMPLEPROFILE_CHAR2_UUID
 0xFFF2

	)

69 
	#SIMPLEPROFILE_CHAR3_UUID
 0xFFF3

	)

70 
	#SIMPLEPROFILE_CHAR4_UUID
 0xFFF4

	)

71 
	#SIMPLEPROFILE_CHAR5_UUID
 0xFFF5

	)

74 
	#SIMPLEPROFILE_SERVICE
 0x00000001

	)

77 
	#SIMPLEPROFILE_CHAR5_LEN
 5

	)

93 (*
sim∂eProfûeCh™ge_t
)–
	tuöt8
 
	t∑ømID
 );

97 
sim∂eProfûeCh™ge_t
 
p‚Sim∂eProfûeCh™ge
;

98 } 
	tsim∂eProfûeCBs_t
;

115 
bSètus_t
 
Sim∂eProfûe_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

123 
bSètus_t
 
Sim∂eProfûe_Regi°îAµCBs
–
sim∂eProfûeCBs_t
 *
≠pCÆlbacks
 );

135 
bSètus_t
 
Sim∂eProfûe_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

146 
bSètus_t
 
Sim∂eProfûe_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

152 #ifde‡
__˝lu•lus


	@../../Profiles/SimpleProfile/simpleGATTprofile_Bridge.c

43 
	~"bcomdef.h
"

44 
	~"OSAL.h
"

45 
	~"lökdb.h
"

46 
	~"©t.h
"

47 
	~"g©t.h
"

48 
	~"g©t_uuid.h
"

49 
	~"g©t£rv≠p.h
"

50 
	~"g≠b⁄dmgr.h
"

52 
	~"sim∂eGATT¥ofûe.h
"

62 
	#SERVAPP_NUM_ATTR_SUPPORTED
 17

	)

72 
CONST
 
uöt8
 
	gsim∂eProfûeSîvUUID
[
ATT_BT_UUID_SIZE
] =

74 
LO_UINT16
(
SIMPLEPROFILE_SERV_UUID
), 
HI_UINT16
(SIMPLEPROFILE_SERV_UUID)

78 
CONST
 
uöt8
 
	gsim∂eProfûech¨1UUID
[
ATT_BT_UUID_SIZE
] =

80 
LO_UINT16
(
SIMPLEPROFILE_CHAR1_UUID
), 
HI_UINT16
(SIMPLEPROFILE_CHAR1_UUID)

84 
CONST
 
uöt8
 
	gsim∂eProfûech¨2UUID
[
ATT_BT_UUID_SIZE
] =

86 
LO_UINT16
(
SIMPLEPROFILE_CHAR2_UUID
), 
HI_UINT16
(SIMPLEPROFILE_CHAR2_UUID)

90 
CONST
 
uöt8
 
	gsim∂eProfûech¨3UUID
[
ATT_BT_UUID_SIZE
] =

92 
LO_UINT16
(
SIMPLEPROFILE_CHAR3_UUID
), 
HI_UINT16
(SIMPLEPROFILE_CHAR3_UUID)

96 
CONST
 
uöt8
 
	gsim∂eProfûech¨4UUID
[
ATT_BT_UUID_SIZE
] =

98 
LO_UINT16
(
SIMPLEPROFILE_CHAR4_UUID
), 
HI_UINT16
(SIMPLEPROFILE_CHAR4_UUID)

102 
CONST
 
uöt8
 
	gsim∂eProfûech¨5UUID
[
ATT_BT_UUID_SIZE
] =

104 
LO_UINT16
(
SIMPLEPROFILE_CHAR5_UUID
), 
HI_UINT16
(SIMPLEPROFILE_CHAR5_UUID)

119 
sim∂eProfûeCBs_t
 *
	gsim∂eProfûe_AµCBs
 = 
NULL
;

126 
CONST
 
g©tAârTy≥_t
 
	gsim∂eProfûeSîvi˚
 = { 
ATT_BT_UUID_SIZE
, 
sim∂eProfûeSîvUUID
 };

130 
uöt8
 
	gsim∂eProfûeCh¨1Pr›s
 = 
GATT_PROP_READ
 | 
GATT_PROP_WRITE
;

133 
uöt8
 
	gsim∂eProfûeCh¨1
 = 0;

136 
uöt8
 
	gsim∂eProfûeCh¨1U£rDe•
[17] = "Characteristic 1\0";

140 
uöt8
 
	gsim∂eProfûeCh¨2Pr›s
 = 
GATT_PROP_READ
;

143 
uöt8
 
	gsim∂eProfûeCh¨2
 = 0;

146 
uöt8
 
	gsim∂eProfûeCh¨2U£rDe•
[17] = "Characteristic 2\0";

150 
uöt8
 
	gsim∂eProfûeCh¨3Pr›s
 = 
GATT_PROP_WRITE
;

153 
uöt8
 
	gsim∂eProfûeCh¨3
[
SIMPLEPROFILE_CHAR3_LEN
] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

156 
uöt8
 
	gsim∂eProfûeCh¨3U£rDe•
[17] = "Characteristic 3\0";

160 
uöt8
 
	gsim∂eProfûeCh¨4Pr›s
 = 
GATT_PROP_NOTIFY
;

163 
uöt8
 
	gsim∂eProfûeCh¨4
 = 0;

169 
g©tCh¨Cfg_t
 
	gsim∂eProfûeCh¨4C⁄fig
[
GATT_MAX_NUM_CONN
];

172 
uöt8
 
	gsim∂eProfûeCh¨4U£rDe•
[17] = "Characteristic 4\0";

176 
uöt8
 
	gsim∂eProfûeCh¨5Pr›s
 = 
GATT_PROP_READ
;

179 
uöt8
 
	gsim∂eProfûeCh¨5
[
SIMPLEPROFILE_CHAR5_LEN
] = { 0, 0, 0, 0, 0 };

182 
uöt8
 
	gsim∂eProfûeCh¨5U£rDe•
[17] = "Characteristic 5\0";

189 
g©tAâribuã_t
 
	gsim∂eProfûeAârTbl
[
SERVAPP_NUM_ATTR_SUPPORTED
] =

193 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

194 
GATT_PERMIT_READ
,

196 (
uöt8
 *)&
sim∂eProfûeSîvi˚


201 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

202 
GATT_PERMIT_READ
,

204 &
sim∂eProfûeCh¨1Pr›s


209 { 
ATT_BT_UUID_SIZE
, 
sim∂eProfûech¨1UUID
 },

210 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

212 &
sim∂eProfûeCh¨1


217 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

218 
GATT_PERMIT_READ
,

220 
sim∂eProfûeCh¨1U£rDe•


225 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

226 
GATT_PERMIT_READ
,

228 &
sim∂eProfûeCh¨2Pr›s


233 { 
ATT_BT_UUID_SIZE
, 
sim∂eProfûech¨2UUID
 },

234 
GATT_PERMIT_READ
,

236 &
sim∂eProfûeCh¨2


241 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

242 
GATT_PERMIT_READ
,

244 
sim∂eProfûeCh¨2U£rDe•


249 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

250 
GATT_PERMIT_READ
,

252 &
sim∂eProfûeCh¨3Pr›s


257 { 
ATT_BT_UUID_SIZE
, 
sim∂eProfûech¨3UUID
 },

258 
GATT_PERMIT_WRITE
,

260 
sim∂eProfûeCh¨3


265 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

266 
GATT_PERMIT_READ
,

268 
sim∂eProfûeCh¨3U£rDe•


273 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

274 
GATT_PERMIT_READ
,

276 &
sim∂eProfûeCh¨4Pr›s


281 { 
ATT_BT_UUID_SIZE
, 
sim∂eProfûech¨4UUID
 },

284 &
sim∂eProfûeCh¨4


289 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

290 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

292 (
uöt8
 *)
sim∂eProfûeCh¨4C⁄fig


297 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

298 
GATT_PERMIT_READ
,

300 
sim∂eProfûeCh¨4U£rDe•


305 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

306 
GATT_PERMIT_READ
,

308 &
sim∂eProfûeCh¨5Pr›s


313 { 
ATT_BT_UUID_SIZE
, 
sim∂eProfûech¨5UUID
 },

314 
GATT_PERMIT_AUTHEN_READ
,

316 
sim∂eProfûeCh¨5


321 { 
ATT_BT_UUID_SIZE
, 
ch¨U£rDescUUID
 },

322 
GATT_PERMIT_READ
,

324 
sim∂eProfûeCh¨5U£rDe•


334 
uöt8
 
sim∂eProfûe_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

335 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

336 
bSètus_t
 
sim∂eProfûe_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

337 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

339 
sim∂eProfûe_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

346 
CONST
 
g©tSîvi˚CBs_t
 
	gsim∂eProfûeCBs
 =

348 
sim∂eProfûe_RódAârCB
,

349 
sim∂eProfûe_WrôeAârCB
,

350 
NULL


368 
bSètus_t
 
	$Sim∂eProfûe_AddSîvi˚
–
uöt32
 
£rvi˚s
 )

370 
uöt8
 
°©us
 = 
SUCCESS
;

373 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
sim∂eProfûeCh¨4C⁄fig
 );

376 
VOID
 
	`lökDB_Regi°î
–
sim∂eProfûe_H™dÀC⁄nSètusCB
 );

378 i‡–
£rvi˚s
 & 
SIMPLEPROFILE_SERVICE
 )

381 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
sim∂eProfûeAârTbl
,

382 
	`GATT_NUM_ATTRS
–
sim∂eProfûeAârTbl
 ),

383 &
sim∂eProfûeCBs
 );

386  ( 
°©us
 );

387 
	}
}

400 
bSètus_t
 
	$Sim∂eProfûe_Regi°îAµCBs
–
sim∂eProfûeCBs_t
 *
≠pCÆlbacks
 )

402 i‡–
≠pCÆlbacks
 )

404 
sim∂eProfûe_AµCBs
 = 
≠pCÆlbacks
;

406  ( 
SUCCESS
 );

410  ( 
bÀAÃódyInReque°edMode
 );

412 
	}
}

429 
bSètus_t
 
	$Sim∂eProfûe_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 )

431 
bSètus_t
 
ªt
 = 
SUCCESS
;

432  
∑øm
 )

434 
SIMPLEPROFILE_CHAR1
:

435 i‡–
Àn
 = ( 
uöt8
 ) )

437 
sim∂eProfûeCh¨1
 = *((
uöt8
*)
vÆue
);

441 
ªt
 = 
bÀInvÆidR™ge
;

445 
SIMPLEPROFILE_CHAR2
:

446 i‡–
Àn
 = ( 
uöt8
 ) )

448 
sim∂eProfûeCh¨2
 = *((
uöt8
*)
vÆue
);

452 
ªt
 = 
bÀInvÆidR™ge
;

456 
SIMPLEPROFILE_CHAR3
:

457 i‡–
Àn
 =
SIMPLEPROFILE_CHAR3_LEN
 )

459 
VOID
 
	`oßl_mem˝y
–
sim∂eProfûeCh¨3
, 
vÆue
, 
SIMPLEPROFILE_CHAR3_LEN
 );

463 
ªt
 = 
bÀInvÆidR™ge
;

467 
SIMPLEPROFILE_CHAR4
:

468 i‡–
Àn
 = ( 
uöt8
 ) )

470 
sim∂eProfûeCh¨4
 = *((
uöt8
*)
vÆue
);

473 
	`GATTSîvAµ_Pro˚ssCh¨Cfg
–
sim∂eProfûeCh¨4C⁄fig
, &
sim∂eProfûeCh¨4
, 
FALSE
,

474 
sim∂eProfûeAârTbl
, 
	`GATT_NUM_ATTRS
( simpleProfileAttrTbl ),

475 
INVALID_TASK_ID
 );

479 
ªt
 = 
bÀInvÆidR™ge
;

483 
SIMPLEPROFILE_CHAR5
:

484 i‡–
Àn
 =
SIMPLEPROFILE_CHAR5_LEN
 )

486 
VOID
 
	`oßl_mem˝y
–
sim∂eProfûeCh¨5
, 
vÆue
, 
SIMPLEPROFILE_CHAR5_LEN
 );

490 
ªt
 = 
bÀInvÆidR™ge
;

495 
ªt
 = 
INVALIDPARAMETER
;

499  ( 
ªt
 );

500 
	}
}

515 
bSètus_t
 
	$Sim∂eProfûe_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

517 
bSètus_t
 
ªt
 = 
SUCCESS
;

518  
∑øm
 )

520 
SIMPLEPROFILE_CHAR1
:

521 *((
uöt8
*)
vÆue
Ë
sim∂eProfûeCh¨1
;

524 
SIMPLEPROFILE_CHAR2
:

525 *((
uöt8
*)
vÆue
Ë
sim∂eProfûeCh¨2
;

528 
SIMPLEPROFILE_CHAR3
:

529 
VOID
 
	`oßl_mem˝y
–
vÆue
, 
sim∂eProfûeCh¨3
, 
SIMPLEPROFILE_CHAR3_LEN
 );

532 
SIMPLEPROFILE_CHAR4
:

533 *((
uöt8
*)
vÆue
Ë
sim∂eProfûeCh¨4
;

536 
SIMPLEPROFILE_CHAR5
:

537 
VOID
 
	`oßl_mem˝y
–
vÆue
, 
sim∂eProfûeCh¨5
, 
SIMPLEPROFILE_CHAR5_LEN
 );

541 
ªt
 = 
INVALIDPARAMETER
;

545  ( 
ªt
 );

546 
	}
}

562 
uöt8
 
	$sim∂eProfûe_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

563 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

565 
bSètus_t
 
°©us
 = 
SUCCESS
;

568 i‡–
	`g©tPîmôAuth‹Ród
–
pAâr
->
≥rmissi⁄s
 ) )

571  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

575 i‡–
off£t
 > 0 )

577  ( 
ATT_ERR_ATTR_NOT_LONG
 );

580 i‡–
pAâr
->
ty≥
.
Àn
 =
ATT_BT_UUID_SIZE
 )

583 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

584  
uuid
 )

594 
SIMPLEPROFILE_CHAR1_UUID
:

595 
SIMPLEPROFILE_CHAR2_UUID
:

596 
SIMPLEPROFILE_CHAR4_UUID
:

597 *
pLí
 = 1;

598 
pVÆue
[0] = *
pAâr
->pValue;

601 
SIMPLEPROFILE_CHAR5_UUID
:

602 *
pLí
 = 
SIMPLEPROFILE_CHAR5_LEN
;

603 
VOID
 
	`oßl_mem˝y
–
pVÆue
, 
pAâr
->pVÆue, 
SIMPLEPROFILE_CHAR5_LEN
 );

608 *
pLí
 = 0;

609 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

616 *
pLí
 = 0;

617 
°©us
 = 
ATT_ERR_INVALID_HANDLE
;

620  ( 
°©us
 );

621 
	}
}

636 
bSètus_t
 
	$sim∂eProfûe_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

637 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

639 
bSètus_t
 
°©us
 = 
SUCCESS
;

640 
uöt8
 
nŸifyAµ
 = 0xFF;

643 i‡–
	`g©tPîmôAuth‹Wrôe
–
pAâr
->
≥rmissi⁄s
 ) )

646  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

649 i‡–
pAâr
->
ty≥
.
Àn
 =
ATT_BT_UUID_SIZE
 )

652 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

653  
uuid
 )

655 
SIMPLEPROFILE_CHAR1_UUID
:

658 i‡–
off£t
 == 0 )

660 i‡–
Àn
 != 1 )

662 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

667 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

671 i‡–
°©us
 =
SUCCESS
 )

673 
uöt8
 *
pCurVÆue
 = (uöt8 *)
pAâr
->
pVÆue
;

674 *
pCurVÆue
 = 
pVÆue
[0];

676 
nŸifyAµ
 = 
SIMPLEPROFILE_CHAR1
;

680 
SIMPLEPROFILE_CHAR3_UUID
:

683 i‡–
off£t
 == 0 )

685 i‡–(
Àn
 < 2) || (len > 20) )

687 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

692 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

696 i‡–
°©us
 =
SUCCESS
 )

698 
uöt8
 *
pCurVÆue
 = (uöt8 *)
pAâr
->
pVÆue
;

699 *
pCurVÆue
 = 
pVÆue
[0];

700 
	`oßl_mem˝y
(
pCurVÆue
, 
pVÆue
, 
Àn
);

702 
nŸifyAµ
 = 
SIMPLEPROFILE_CHAR3
;

706 
GATT_CLIENT_CHAR_CFG_UUID
:

707 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

708 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

713 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

720 
°©us
 = 
ATT_ERR_INVALID_HANDLE
;

724 i‡–(
nŸifyAµ
 !0xFF ) && 
sim∂eProfûe_AµCBs
 && sim∂eProfûe_AµCBs->
p‚Sim∂eProfûeCh™ge
 )

726 
sim∂eProfûe_AµCBs
->
	`p‚Sim∂eProfûeCh™ge
–
nŸifyAµ
 );

729  ( 
°©us
 );

730 
	}
}

742 
	$sim∂eProfûe_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

745 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

748 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

749 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

750 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

752 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
sim∂eProfûeCh¨4C⁄fig
 );

755 
	}
}

	@../../Profiles/SimpleProfile/simpleGATTprofile_Bridge.h

40 #i‚de‡
SIMPLEGATTPROFILE_H


41 
	#SIMPLEGATTPROFILE_H


	)

43 #ifde‡
__˝lu•lus


57 
	#SIMPLEPROFILE_CHAR1
 0

58 
	#SIMPLEPROFILE_CHAR2
 1

59 
	#SIMPLEPROFILE_CHAR3
 2

60 
	#SIMPLEPROFILE_CHAR4
 3

61 
	#SIMPLEPROFILE_CHAR5
 4

62 

	)

64 
	#SIMPLEPROFILE_SERV_UUID
 0xFFF0

	)

67 
	#SIMPLEPROFILE_CHAR1_UUID
 0xFFF1

	)

68 
	#SIMPLEPROFILE_CHAR2_UUID
 0xFFF2

	)

69 
	#SIMPLEPROFILE_CHAR3_UUID
 0xFFF3

	)

70 
	#SIMPLEPROFILE_CHAR4_UUID
 0xFFF4

	)

71 
	#SIMPLEPROFILE_CHAR5_UUID
 0xFFF5

	)

74 
	#SIMPLEPROFILE_SERVICE
 0x00000001

	)

77 
	#SIMPLEPROFILE_CHAR5_LEN
 5

	)

78 
	#SIMPLEPROFILE_CHAR3_LEN
 20

	)

94 (*
sim∂eProfûeCh™ge_t
)–
	tuöt8
 
	t∑ømID
 );

98 
sim∂eProfûeCh™ge_t
 
p‚Sim∂eProfûeCh™ge
;

99 } 
	tsim∂eProfûeCBs_t
;

116 
bSètus_t
 
Sim∂eProfûe_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

124 
bSètus_t
 
Sim∂eProfûe_Regi°îAµCBs
–
sim∂eProfûeCBs_t
 *
≠pCÆlbacks
 );

136 
bSètus_t
 
Sim∂eProfûe_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

147 
bSètus_t
 
Sim∂eProfûe_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

153 #ifde‡
__˝lu•lus


	@../../Profiles/Thermometer/thermometerservice.c

43 
	~"bcomdef.h
"

44 
	~"OSAL.h
"

45 
	~"lökdb.h
"

46 
	~"©t.h
"

47 
	~"g©t.h
"

48 
	~"g©t_uuid.h
"

49 
	~"g©t_¥ofûe_uuid.h
"

50 
	~"g©t£rv≠p.h
"

51 
	~"g≠b⁄dmgr.h
"

52 
	~"thîmomëî£rvi˚.h
"

74 
CONST
 
uöt8
 
	gthîmomëîSîvUUID
[
ATT_BT_UUID_SIZE
] =

76 
LO_UINT16
(
THERMOMETER_SERV_UUID
), 
HI_UINT16
(THERMOMETER_SERV_UUID)

80 
CONST
 
uöt8
 
	gthîmomëîTempUUID
[
ATT_BT_UUID_SIZE
] =

82 
LO_UINT16
(
TEMP_MEAS_UUID
), 
HI_UINT16
(TEMP_MEAS_UUID)

86 
CONST
 
uöt8
 
	gthîmomëîTy≥UUID
[
ATT_BT_UUID_SIZE
] =

88 
LO_UINT16
(
TEMP_TYPE_UUID
), 
HI_UINT16
(TEMP_TYPE_UUID)

92 
CONST
 
uöt8
 
	gthîmomëîImósUUID
[
ATT_BT_UUID_SIZE
] =

94 
LO_UINT16
(
IMEDIATE_TEMP_UUID
), 
HI_UINT16
(IMEDIATE_TEMP_UUID)

98 
CONST
 
uöt8
 
	gthîmomëîI¡îvÆUUID
[
ATT_BT_UUID_SIZE
] =

100 
LO_UINT16
(
MEAS_INTERVAL_UUID
), 
HI_UINT16
(MEAS_INTERVAL_UUID)

104 
CONST
 
uöt8
 
	gthîmomëîIR™geUUID
[
ATT_BT_UUID_SIZE
] =

106 
LO_UINT16
(
GATT_VALID_RANGE_UUID
), 
HI_UINT16
(GATT_VALID_RANGE_UUID)

122 
thîmomëîSîvi˚CB_t
 
	gthîmomëîSîvi˚CB
;

129 
CONST
 
g©tAârTy≥_t
 
	gthîmomëîSîvi˚
 = { 
ATT_BT_UUID_SIZE
, 
thîmomëîSîvUUID
 };

137 
uöt8
 
	gthîmomëîTempPr›s
 = 
GATT_PROP_INDICATE
;

138 
uöt8
 
	gthîmomëîTemp
 = 0;

139 
g©tCh¨Cfg_t
 
	gthîmomëîTempC⁄fig
[
GATT_MAX_NUM_CONN
];

142 
uöt8
 
	gthîmomëîTy≥Pr›s
 = 
GATT_PROP_READ
;

143 
uöt8
 
	gthîmomëîTy≥
 = 0;

146 
uöt8
 
	gthîmomëîImósPr›s
 = 
GATT_PROP_NOTIFY
;

147 
uöt8
 
	gthîmomëîImós
=0;

148 
g©tCh¨Cfg_t
 
	gthîmomëîIMósC⁄fig
[
GATT_MAX_NUM_CONN
];

151 
uöt8
 
	gthîmomëîI¡îvÆPr›s
 = 
GATT_PROP_INDICATE
|
GATT_PROP_READ
|
GATT_PROP_WRITE
;

152 
uöt8
 
	gthîmomëîI¡îvÆ
=30;

153 
g©tCh¨Cfg_t
 
	gthîmomëîI¡îvÆC⁄fig
[
GATT_MAX_NUM_CONN
];

156 
thîmomëîIR™ge_t
 
	gthîmomëîIR™ge
 = {1,60};

162 
g©tAâribuã_t
 
	gthîmomëîAârTbl
[] =

166 { 
ATT_BT_UUID_SIZE
, 
¥im¨ySîvi˚UUID
 },

167 
GATT_PERMIT_READ
,

169 (
uöt8
 *)&
thîmomëîSîvi˚


176 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

177 
GATT_PERMIT_READ
,

179 &
thîmomëîTempPr›s


184 { 
ATT_BT_UUID_SIZE
, 
thîmomëîTempUUID
 },

187 &
thîmomëîTemp


192 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

193 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

195 (
uöt8
 *)&
thîmomëîTempC⁄fig


202 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

203 
GATT_PERMIT_READ
,

205 &
thîmomëîTy≥Pr›s


210 { 
ATT_BT_UUID_SIZE
, 
thîmomëîTy≥UUID
 },

211 
GATT_PERMIT_READ
,

213 &
thîmomëîTy≥


220 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

221 
GATT_PERMIT_READ
,

223 &
thîmomëîImósPr›s


228 { 
ATT_BT_UUID_SIZE
, 
thîmomëîImósUUID
 },

231 &
thîmomëîImós


236 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

237 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

239 (
uöt8
 *)&
thîmomëîIMósC⁄fig


246 { 
ATT_BT_UUID_SIZE
, 
ch¨a˘îUUID
 },

247 
GATT_PERMIT_READ
,

249 &
thîmomëîI¡îvÆPr›s


254 { 
ATT_BT_UUID_SIZE
, 
thîmomëîI¡îvÆUUID
 },

255 
GATT_PERMIT_READ
 | 
GATT_PERMIT_AUTHEN_WRITE
,

257 &
thîmomëîI¡îvÆ


262 { 
ATT_BT_UUID_SIZE
, 
˛õ¡Ch¨CfgUUID
 },

263 
GATT_PERMIT_READ
 | 
GATT_PERMIT_WRITE
,

265 (
uöt8
 *)&
thîmomëîI¡îvÆC⁄fig


270 { 
ATT_BT_UUID_SIZE
, 
thîmomëîIR™geUUID
 },

271 
GATT_PERMIT_READ
,

273 (
uöt8
 *)&
thîmomëîIR™ge


280 
uöt8
 
thîmomëî_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

281 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 );

282 
bSètus_t
 
thîmomëî_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

283 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 );

285 
thîmomëî_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 );

291 
CONST
 
g©tSîvi˚CBs_t
 
	gthîmomëîCBs
 =

293 
thîmomëî_RódAârCB
,

294 
thîmomëî_WrôeAârCB
,

295 
NULL


313 
bSètus_t
 
	$Thîmomëî_AddSîvi˚
–
uöt32
 
£rvi˚s
 )

315 
uöt8
 
°©us
 = 
SUCCESS
;

318 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
thîmomëîTempC⁄fig
 );

319 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
thîmomëîIMósC⁄fig
 );

320 
	`GATTSîvAµ_InôCh¨Cfg
–
INVALID_CONNHANDLE
, 
thîmomëîI¡îvÆC⁄fig
 );

323 
VOID
 
	`lökDB_Regi°î
–
thîmomëî_H™dÀC⁄nSètusCB
 );

325 i‡–
£rvi˚s
 & 
THERMOMETER_SERVICE
 )

328 
°©us
 = 
	`GATTSîvAµ_Regi°îSîvi˚
–
thîmomëîAârTbl
,

329 
	`GATT_NUM_ATTRS
–
thîmomëîAârTbl
 ),

330 &
thîmomëîCBs
 );

333  ( 
°©us
 );

334 
	}
}

345 
	$Thîmomëî_Regi°î
–
thîmomëîSîvi˚CB_t
 
p‚Sîvi˚CB
 )

347 
thîmomëîSîvi˚CB
 = 
p‚Sîvi˚CB
;

348 
	}
}

364 
bSètus_t
 
	$Thîmomëî_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 )

366 
bSètus_t
 
ªt
 = 
SUCCESS
;

367  
∑øm
 )

370 
THERMOMETER_TYPE
:

371 
thîmomëîTy≥
 = *((
uöt8
*)
vÆue
);

374 
THERMOMETER_INTERVAL
:

375 
thîmomëîI¡îvÆ
 = *((
uöt8
*)
vÆue
);

378 
THERMOMETER_TEMP_CHAR_CFG
:

383 
THERMOMETER_IMEAS_CHAR_CFG
:

388 
THERMOMETER_INTERVAL_CHAR_CFG
:

393 
THERMOMETER_IRANGE
:

394 
thîmomëîIR™ge
 = *((
thîmomëîIR™ge_t
*)
vÆue
);

398 
ªt
 = 
INVALIDPARAMETER
;

402  ( 
ªt
 );

403 
	}
}

418 
bSètus_t
 
	$Thîmomëî_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 )

420 
bSètus_t
 
ªt
 = 
SUCCESS
;

422  
∑øm
 )

424 
THERMOMETER_TYPE
:

425 *((
uöt8
*)
vÆue
Ë
thîmomëîTy≥
;

428 
THERMOMETER_INTERVAL
:

429 *((
uöt8
*)
vÆue
Ë
thîmomëîI¡îvÆ
;

432 
THERMOMETER_IRANGE
:

433 *((
thîmomëîIR™ge_t
*)
vÆue
Ë
thîmomëîIR™ge
;

436 
THERMOMETER_TEMP_CHAR_CFG
:

441 
THERMOMETER_IMEAS_CHAR_CFG
:

446 
THERMOMETER_INTERVAL_CHAR_CFG
:

452 
ªt
 = 
INVALIDPARAMETER
;

456  ( 
ªt
 );

457 
	}
}

470 
bSètus_t
 
	$Thîmomëî_TempIndiˇã
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueInd_t
 *
pNŸi
,
uöt8
 
èskId
 )

472 
uöt16
 
vÆue
 = 
	`GATTSîvAµ_RódCh¨Cfg
–
c⁄nH™dÀ
, 
thîmomëîTempC⁄fig
 );

475 i‡–
vÆue
 & 
GATT_CLIENT_CFG_INDICATE
 )

478 
pNŸi
->
h™dÀ
 = 
thîmomëîAârTbl
[pNoti->handle].handle;

481  
	`GATT_Indiˇti⁄
–
c⁄nH™dÀ
, 
pNŸi
, 
FALSE
, 
èskId
 );

484  
bÀInc‹ª˘Mode
;

485 
	}
}

497 
bSètus_t
 
	$Thîmomëî_I¡îvÆIndiˇã
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueInd_t
 *
pNŸi
,
uöt8
 
èskId
 )

499 
uöt16
 
vÆue
 = 
	`GATTSîvAµ_RódCh¨Cfg
–
c⁄nH™dÀ
, 
thîmomëîI¡îvÆC⁄fig
 );

502 i‡–
vÆue
 & 
GATT_CLIENT_CFG_INDICATE
 )

505 
pNŸi
->
h™dÀ
 = 
thîmomëîAârTbl
[pNoti->handle].handle;

508  
	`GATT_Indiˇti⁄
–
c⁄nH™dÀ
, 
pNŸi
, 
FALSE
, 
èskId
 );

511  
bÀInc‹ª˘Mode
;

512 
	}
}

525 
bSètus_t
 
	$Thîmomëî_IMósNŸify
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueNŸi_t
 *
pNŸi
)

527 
uöt16
 
vÆue
 = 
	`GATTSîvAµ_RódCh¨Cfg
–
c⁄nH™dÀ
, 
thîmomëîIMósC⁄fig
 );

530 i‡–
vÆue
 & 
GATT_CLIENT_CFG_NOTIFY
 )

533 
pNŸi
->
h™dÀ
 = 
thîmomëîAârTbl
[
THERMOMETER_IMEAS_VALUE_POS
].handle;

536  
	`GATT_NŸifiˇti⁄
–
c⁄nH™dÀ
, 
pNŸi
, 
FALSE
 );

539  
bÀInc‹ª˘Mode
;

540 
	}
}

556 
uöt8
 
	$thîmomëî_RódAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

557 
uöt8
 *
pVÆue
, uöt8 *
pLí
, 
uöt16
 
off£t
, uöt8 
maxLí
 )

559 
bSètus_t
 
°©us
 = 
SUCCESS
;

562 i‡–
	`g©tPîmôAuth‹Ród
–
pAâr
->
≥rmissi⁄s
 ) )

565  ( 
ATT_ERR_INSUFFICIENT_AUTHOR
 );

569 i‡–
off£t
 > 0 )

571  ( 
ATT_ERR_ATTR_NOT_LONG
 );

574 i‡–
pAâr
->
ty≥
.
Àn
 =
ATT_BT_UUID_SIZE
 )

577 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

578  
uuid
 )

580 
TEMP_TYPE_UUID
:

581 *
pLí
 = 
THERMOMETER_TYPE_LEN
;

582 
VOID
 
	`oßl_mem˝y
–
pVÆue
, &
thîmomëîTy≥
, 
THERMOMETER_TYPE_LEN
 ) ;

585 
MEAS_INTERVAL_UUID
:

586 *
pLí
 = 
THERMOMETER_INTERVAL_LEN
;

587 
VOID
 
	`oßl_mem˝y
–
pVÆue
, &
thîmomëîI¡îvÆ
, 
THERMOMETER_INTERVAL_LEN
 ) ;

590 
GATT_VALID_RANGE_UUID
:

591 *
pLí
 = 
THERMOMETER_IRANGE_LEN
;

592 
VOID
 
	`oßl_mem˝y
–
pVÆue
, &
thîmomëîIR™ge
, 
THERMOMETER_IRANGE_LEN
 ) ;

596 *
pLí
 = 0;

597 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

602  ( 
°©us
 );

603 
	}
}

618 
bSètus_t
 
	$thîmomëî_WrôeAârCB
–
uöt16
 
c⁄nH™dÀ
, 
g©tAâribuã_t
 *
pAâr
,

619 
uöt8
 *
pVÆue
, uöt8 
Àn
, 
uöt16
 
off£t
 )

621 
bSètus_t
 
°©us
 = 
SUCCESS
;

623 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pAâr
->
ty≥
.uuid[0],ÖAttr->type.uuid[1]);

624  
uuid
 )

626 
GATT_CLIENT_CHAR_CFG_UUID
:

628 i‡–
pAâr
->
h™dÀ
 =
thîmomëîAârTbl
[
THERMOMETER_TEMP_CHAR_CONFIG_POS
].handle )

630 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

631 
off£t
, 
GATT_CLIENT_CFG_INDICATE
 );

632 i‡–
°©us
 =
SUCCESS
 )

634 
uöt16
 
vÆue
 = 
	`BUILD_UINT16
–
pVÆue
[0],ÖValue[1] );

636 (*
thîmomëîSîvi˚CB
)–(
vÆue
 =
GATT_CFG_NO_OPERATION
) ?

637 
THERMOMETER_TEMP_IND_DISABLED
 :

638 
THERMOMETER_TEMP_IND_ENABLED
 );

642 i‡–
pAâr
->
h™dÀ
 =
thîmomëîAârTbl
[
THERMOMETER_IMEAS_CHAR_CONFIG_POS
].handle )

644 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

645 
off£t
, 
GATT_CLIENT_CFG_NOTIFY
 );

646 i‡–
°©us
 =
SUCCESS
 )

648 
uöt16
 
vÆue
 = 
	`BUILD_UINT16
–
pVÆue
[0],ÖValue[1] );

651 (*
thîmomëîSîvi˚CB
)–(
vÆue
 =
GATT_CFG_NO_OPERATION
) ?

652 
THERMOMETER_IMEAS_NOTI_DISABLED
 :

653 
THERMOMETER_IMEAS_NOTI_ENABLED
);

657 i‡–
pAâr
->
h™dÀ
 =
thîmomëîAârTbl
[
THERMOMETER_INTERVAL_CHAR_CONFIG_POS
].handle )

659 
°©us
 = 
	`GATTSîvAµ_Pro˚ssCCCWrôeReq
–
c⁄nH™dÀ
, 
pAâr
, 
pVÆue
, 
Àn
,

660 
off£t
, 
GATT_CLIENT_CFG_INDICATE
 );

661 i‡–
°©us
 =
SUCCESS
 )

663 
uöt16
 
vÆue
 = 
	`BUILD_UINT16
–
pVÆue
[0],ÖValue[1] );

666 (*
thîmomëîSîvi˚CB
)–(
vÆue
 =
GATT_CFG_NO_OPERATION
) ?

667 
THERMOMETER_INTERVAL_IND_DISABLED
 :

668 
THERMOMETER_INTERVAL_IND_ENABLED
);

672 
°©us
 = 
ATT_ERR_INVALID_HANDLE
;

677 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

681 
MEAS_INTERVAL_UUID
:

684 i‡–
off£t
 == 0 )

686 i‡–
Àn
 !
THERMOMETER_INTERVAL_LEN
 )

687 
°©us
 = 
ATT_ERR_INVALID_VALUE_SIZE
;

691 
°©us
 = 
ATT_ERR_ATTR_NOT_LONG
;

695 i‡((*
pVÆue
 >
thîmomëîIR™ge
.
high
Ë| ((*pVÆuê<thîmomëîIR™ge.
low
) & (*pValue != 0)))

697 
°©us
 = 
ATT_ERR_INVALID_VALUE
;

701 i‡–
°©us
 =
SUCCESS
 )

703 
uöt8
 *
pCurVÆue
 = (uöt8 *)
pAâr
->
pVÆue
;

705 
VOID
 
	`oßl_mem˝y
–
pCurVÆue
, 
pVÆue
, 
THERMOMETER_INTERVAL_LEN
 ) ;

708 (*
thîmomëîSîvi˚CB
)(
THERMOMETER_INTERVAL_SET
);

714 
°©us
 = 
ATT_ERR_ATTR_NOT_FOUND
;

718  ( 
°©us
 );

719 
	}
}

732 
	$thîmomëî_H™dÀC⁄nSètusCB
–
uöt16
 
c⁄nH™dÀ
, 
uöt8
 
ch™geTy≥
 )

735 i‡–
c⁄nH™dÀ
 !
LOOPBACK_CONNHANDLE
 )

738 i‡––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_REMOVED
 ) ||

739 ––
ch™geTy≥
 =
LINKDB_STATUS_UPDATE_STATEFLAGS
 ) &&

740 –!
	`lökDB_Up
–
c⁄nH™dÀ
 ) ) ) )

742 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
thîmomëîTempC⁄fig
 );

743 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
thîmomëîIMósC⁄fig
 );

744 
	`GATTSîvAµ_InôCh¨Cfg
–
c⁄nH™dÀ
, 
thîmomëîI¡îvÆC⁄fig
 );

747 
	}
}

	@../../Profiles/Thermometer/thermometerservice.h

40 #i‚de‡
THERMOMETERSERVICE_H


41 
	#THERMOMETERSERVICE_H


	)

43 #ifde‡
__˝lu•lus


57 
	#THERMOMETER_TEMP
 0

	)

58 
	#THERMOMETER_TEMP_CHAR_CFG
 1

	)

59 
	#THERMOMETER_TYPE
 2

	)

60 
	#THERMOMETER_INTERVAL
 3

	)

61 
	#THERMOMETER_INTERVAL_CHAR_CFG
 4

	)

62 
	#THERMOMETER_IMEAS_CHAR_CFG
 5

	)

63 
	#THERMOMETER_IRANGE
 6

	)

66 
	#THERMOMETER_TEMP_VALUE_POS
 2

	)

67 
	#THERMOMETER_TEMP_CHAR_CONFIG_POS
 3

	)

68 
	#THERMOMETER_IMEAS_VALUE_POS
 7

	)

69 
	#THERMOMETER_IMEAS_CHAR_CONFIG_POS
 8

	)

70 
	#THERMOMETER_INTERVAL_VALUE_POS
 10

	)

71 
	#THERMOMETER_INTERVAL_CHAR_CONFIG_POS
 11

	)

74 
	#THERMOMETER_INTERVAL_LEN
 1

	)

75 
	#THERMOMETER_TYPE_LEN
 1

	)

76 
	#THERMOMETER_IRANGE_LEN
 2

	)

80 
	#THERMOMETER_MEAS_MAX
 (
ATT_MTU_SIZE
 -5)

	)

83 
	#THERMOMETER_FLAGS_CELCIUS
 0x00

	)

84 
	#THERMOMETER_FLAGS_FARENHEIT
 0x01

	)

85 
	#THERMOMETER_FLAGS_TIMESTAMP
 0x02

	)

86 
	#THERMOMETER_FLAGS_TYPE
 0x04

	)

89 
	#THERMOMETER_TYPE_ARMPIT
 0x01

	)

90 
	#THERMOMETER_TYPE_BODY
 0x02

	)

91 
	#THERMOMETER_TYPE_EAR
 0x03

	)

92 
	#THERMOMETER_TYPE_FINGER
 0x04

	)

93 
	#THERMOMETER_TYPE_GASTRO
 0x05

	)

94 
	#THERMOMETER_TYPE_MOUTH
 0x06

	)

95 
	#THERMOMETER_TYPE_RECTUM
 0x07

	)

96 
	#THERMOMETER_TYPE_TOE
 0x08

	)

97 
	#THERMOMETER_TYPE_TYMPNUM
 0x09

	)

100 
	#THERMOMETER_SERVICE
 0x00000001

	)

103 
	#THERMOMETER_TEMP_IND_ENABLED
 1

	)

104 
	#THERMOMETER_TEMP_IND_DISABLED
 2

	)

105 
	#THERMOMETER_IMEAS_NOTI_ENABLED
 3

	)

106 
	#THERMOMETER_IMEAS_NOTI_DISABLED
 4

	)

107 
	#THERMOMETER_INTERVAL_IND_ENABLED
 5

	)

108 
	#THERMOMETER_INTERVAL_IND_DISABLED
 6

	)

109 
	#THERMOMETER_INTERVAL_SET
 7

	)

110 
	#THERMOMETER_TESTCMD_C
 8

	)

111 
	#THERMOMETER_TESTCMD_F
 9

	)

118 (*
thîmomëîSîvi˚CB_t
)(
	tuöt8
 
	tevít
);

125 
uöt8
 
low
;

126 
uöt8
 
high
;

127 } 
	tthîmomëîIR™ge_t
;

150 
bSètus_t
 
Thîmomëî_AddSîvi˚
–
uöt32
 
£rvi˚s
 );

159 
Thîmomëî_Regi°î
–
thîmomëîSîvi˚CB_t
 
p‚Sîvi˚CB
 );

171 
bSètus_t
 
Thîmomëî_SëP¨amëî
–
uöt8
 
∑øm
, uöt8 
Àn
, *
vÆue
 );

182 
bSètus_t
 
Thîmomëî_GëP¨amëî
–
uöt8
 
∑øm
, *
vÆue
 );

195 
bSètus_t
 
Thîmomëî_TempIndiˇã
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueInd_t
 *
pNŸi
, 
uöt8
 
èskId
 );

207 
bSètus_t
 
Thîmomëî_I¡îvÆIndiˇã
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueInd_t
 *
pNŸi
,
uöt8
 
èskId
 );

219 
bSètus_t
 
Thîmomëî_IMósNŸify
–
uöt16
 
c⁄nH™dÀ
, 
©tH™dÀVÆueNŸi_t
 *
pNŸi
 );

225 #ifde‡
__˝lu•lus


	@../../common/cc2540/OnBoard.c

45 
	~"bcomdef.h
"

46 
	~"OnBﬂrd.h
"

47 
	~"OSAL.h
"

48 
	~"OnBﬂrd.h
"

50 
	~"hÆ_Àd.h
"

51 
	~"hÆ_key.h
"

63 
	#NO_TASK_ID
 0xFF

	)

73 
uöt8
 
	gOnbﬂrdKeyI¡E«bÀ
;

83 
uöt8
 
LL_P£udoR™d
–uöt8 *
øndD©a
, uöt8 
d©aLí
 );

85 #i‡ 
deföed
 
FEATURE_ABL


86 
	~"..\..\utû\ABL\≠p\sbl_≠p.c
"

87 #ñi‡
deföed
 
FEATURE_SBL


88 
	~"..\..\utû\SBL\≠p\sbl_≠p.c
"

89 #ñi‡
deföed
 
FEATURE_EBL


90 
	~"..\..\utû\EBL\≠p\sbl_≠p.c
"

91 #ñi‡
deföed
 
FEATURE_UBL_MSD


92 
	~"..\..\utû\UBL\soc_8051\usb_msd\≠p\ubl_≠p.c
"

94 
≠pF‹˚BoŸ
();

102 
uöt8
 
	gªgi°îedKeysTaskID
 = 
NO_TASK_ID
;

110 
	$InôBﬂrd
–
uöt8
 
Àvñ
 )

112 i‡–
Àvñ
 =
OB_COLD
 )

115 
	`oßl_öt_dißbÀ
–
INTS_ALL
 );

117 
	`HÆLedSë
–
HAL_LED_ALL
, 
HAL_LED_MODE_OFF
 );

124 
OnbﬂrdKeyI¡E«bÀ
 = 
HAL_KEY_INTERRUPT_ENABLE
;

125 
	`HÆKeyC⁄fig
–
OnbﬂrdKeyI¡E«bÀ
, 
OnBﬂrd_KeyCÆlback
);

127 
	}
}

139 
uöt16
 
	$Onbﬂrd_ønd
( )

141 
uöt16
 
øndNum
;

143 
	`LL_P£udoR™d
–(
uöt8
 *)&
øndNum
, 2 );

145  ( 
øndNum
 );

146 
	}
}

160 
	$_ôﬂ
(
uöt16
 
num
, 
uöt8
 *
buf
, uöt8 
ødix
)

162 
c
,
i
;

163 
uöt8
 *
p
, 
r°
[5];

165 
p
 = 
r°
;

166  
i
=0; i<5; i++,
p
++ )

168 
c
 = 
num
 % 
ødix
;

169 *
p
 = 
c
 + (( c < 10 ) ? '0' : '7');

170 
num
 /
ødix
;

171 i‡–!
num
 )

175  
c
=0 ; c<=
i
; c++ )

176 *
buf
++ = *
p
--;

178 *
buf
 = '\0';

179 
	}
}

194 
uöt8
 
	$Regi°îF‹Keys
–
uöt8
 
èsk_id
 )

197 i‡–
ªgi°îedKeysTaskID
 =
NO_TASK_ID
 )

199 
ªgi°îedKeysTaskID
 = 
èsk_id
;

200  ( 
åue
 );

203  ( 
Ál£
 );

204 
	}
}

216 
uöt8
 
	$OnBﬂrd_SídKeys
–
uöt8
 
keys
, uöt8 
°©e
 )

218 
keyCh™ge_t
 *
msgPå
;

220 i‡–
ªgi°îedKeysTaskID
 !
NO_TASK_ID
 )

223 
msgPå
 = (
keyCh™ge_t
 *)
	`oßl_msg_Æloˇã
( (keyChange_t) );

224 i‡–
msgPå
 )

226 
msgPå
->
hdr
.
evít
 = 
KEY_CHANGE
;

227 
msgPå
->
°©e
 = state;

228 
msgPå
->
keys
 = keys;

230 
	`oßl_msg_£nd
–
ªgi°îedKeysTaskID
, (
uöt8
 *)
msgPå
 );

232  ( 
SUCCESS
 );

235  ( 
FAILURE
 );

236 
	}
}

248 
	$OnBﬂrd_KeyCÆlback
 ( 
uöt8
 
keys
, uöt8 
°©e
 )

250 
uöt8
 
shi·
;

251 ()
°©e
;

255 
shi·
 = (
OnbﬂrdKeyI¡E«bÀ
 =
HAL_KEY_INTERRUPT_ENABLE
Ë? 
Ál£
 : ((
keys
 & 
HAL_KEY_SW_6
Ë? 
åue
 : false);

257 i‡–
	`OnBﬂrd_SídKeys
–
keys
, 
shi·
 ) !
SUCCESS
 )

260 i‡–
keys
 & 
HAL_KEY_SW_1
 )

264 i‡–
keys
 & 
HAL_KEY_SW_2
 )

268 i‡–
keys
 & 
HAL_KEY_SW_3
 )

272 i‡–
keys
 & 
HAL_KEY_SW_4
 )

276 i‡–
keys
 & 
HAL_KEY_SW_5
 )

280 i‡–
keys
 & 
HAL_KEY_SW_6
 )

287 if–
keys
 != 0 )

289 if–
OnbﬂrdKeyI¡E«bÀ
 =
HAL_KEY_INTERRUPT_ENABLE
 )

291 
OnbﬂrdKeyI¡E«bÀ
 = 
HAL_KEY_INTERRUPT_DISABLE
;

292 
	`HÆKeyC⁄fig
–
OnbﬂrdKeyI¡E«bÀ
, 
OnBﬂrd_KeyCÆlback
);

299 if–
OnbﬂrdKeyI¡E«bÀ
 =
HAL_KEY_INTERRUPT_DISABLE
 )

301 
OnbﬂrdKeyI¡E«bÀ
 = 
HAL_KEY_INTERRUPT_ENABLE
;

302 
	`HÆKeyC⁄fig
–
OnbﬂrdKeyI¡E«bÀ
, 
OnBﬂrd_KeyCÆlback
);

305 
	}
}

317 
__√¨_func
 
	$Onbﬂrd_so·_ª£t
( )

319 
	`HAL_DISABLE_INTERRUPTS
();

320 
	`asm
("LJMP 0x0");

321 
	}
}

323 #i‡ 
deföed
 
FEATURE_ABL


324 #ñi‡
deföed
 
FEATURE_SBL


325 #ñi‡
deföed
 
FEATURE_EBL


326 #ñi‡
deföed
 
FEATURE_UBL_MSD


337 
	$≠pF‹˚BoŸ
()

340 
	}
}

	@../../common/cc2540/OnBoard.h

41 #i‚de‡
ONBOARD_H


42 
	#ONBOARD_H


	)

44 
	~"hÆ_mcu.h
"

45 
	~"hÆ_¶ìp.h
"

46 
	~"oßl.h
"

51 
	#MCU_RAM_BEG
 0x0100

	)

52 
	#MCU_RAM_END
 
RAMEND


	)

53 
	#MCU_RAM_LEN
 (
MCU_RAM_END
 - 
MCU_RAM_BEG
 + 1)

	)

56 #i‡!
deföed
–
INT_HEAP_LEN
 )

57 
	#INT_HEAP_LEN
 1024

59 

	)

61 #i‡
deföed
–
EXTERNAL_RAM
 )

62 
	#MAXMEMHEAP
 
EXT_RAM_LEN


63 #ñ£

	)

64 
	#MAXMEMHEAP
 
INT_HEAP_LEN


66 

	)

68 
	#OB_COLD
 0

	)

69 
	#OB_WARM
 1

	)

70 
	#OB_READY
 2

	)

72 
	#Sy°emRe£tSo·
(Ë
	`Onbﬂrd_so·_ª£t
()

	)

76 
oßl_evít_hdr_t
 
	mhdr
;

77 
uöt8
 
	m°©e
;

78 
uöt8
 
	mkeys
;

79 } 
	tkeyCh™ge_t
;

82 
	#TIMER_DECR_TIME
 1

83 
	#RETUNE_THRESHOLD
 1

84 

	)

86 
	#TICK_TIME
 1000

	)

87 
	#TICK_COUNT
 1

	)

88 
	#OSAL_TIMER
 
HAL_TIMER_3


	)

90 #i‚de‡
_WIN32


91 
_ôﬂ
(
uöt16
 
num
, 
uöt8
 *
buf
, uöt8 
ødix
);

94 #i‚de‡
RAMEND


95 
	#RAMEND
 0x1000

	)

99 
	#MT_UART_THRESHOLD
 5

	)

100 
	#MT_UART_TX_BUFF_MAX
 170

	)

101 
	#MT_UART_RX_BUFF_MAX
 128

	)

102 
	#MT_UART_IDLE_TIMEOUT
 5

	)

107 #i‡
_löt


108 
	#Sy°emRe£t
()

	)

110 
	#Sy°emRe£t
(Ë
	`HAL_SYSTEM_RESET
();

	)

113 
	#BoŸLﬂdî
()

	)

116 
	#Re£tRós⁄
(Ë((
SLEEPSTA
 >> 3Ë& 0x03)

	)

119 #i‡
deföed
 (
ZAPP_P1
)

120 
	#ZAPP_PORT
 
HAL_UART_PORT_0


121 #ñi‡
	`deföed
 (
ZAPP_P2
)

	)

122 
	#ZAPP_PORT
 
HAL_UART_PORT_1


123 #ñ£

	)

124 #unde‡
ZAPP_PORT


126 #i‡
deföed
 (
ZTOOL_P1
)

127 
	#ZTOOL_PORT
 
HAL_UART_PORT_0


128 #ñi‡
	`deföed
 (
ZTOOL_P2
)

	)

129 
	#ZTOOL_PORT
 
HAL_UART_PORT_1


130 #ñ£

	)

131 #unde‡
ZTOOL_PORT


135 
	#SLEEP_DEEP
 0

	)

136 
	#SLEEP_LITE
 0

	)

137 
	#MIN_SLEEP_TIME
 14

	)

138 
	#OSAL_SET_CPU_INTO_SLEEP
(
m
Ë
	`hÆSÀï
(mË

	)

141 
uöt8
 
OnBﬂrd_SídKeys
–uöt8 
keys
, uöt8 
°©e
 );

146 
uöt16
 
Onbﬂrd_ønd
( );

152 
uöt32
 
TimîEœp£d
( );

158 
InôBﬂrd
–
uöt8
 
Àvñ
 );

163 
uöt8
 
Regi°îF‹Keys
–uöt8 
èsk_id
 );

170 
uöt8
 
OnBﬂrd_SídKeys
–uöt8 
keys
, uöt8 
shi·
);

175 
OnBﬂrd_KeyCÆlback
 ( 
uöt8
 
keys
, uöt8 
°©e
 );

180 
__√¨_func
 
Onbﬂrd_so·_ª£t
( );

	@../../common/npi/npi_np/npi.c

47 
	~"hÆ_ty≥s.h
"

48 
	~"hÆ_bﬂrd.h
"

49 
	~"≈i.h
"

96 
	$NPI_InôTøn•‹t
–
≈iCBack_t
 
≈iCBack
 )

98 
hÆUARTCfg_t
 
u¨tC⁄fig
;

101 
u¨tC⁄fig
.
c⁄figuªd
 = 
TRUE
;

102 
u¨tC⁄fig
.
baudR©e
 = 
NPI_UART_BR
;

103 
u¨tC⁄fig
.
ÊowC⁄åﬁ
 = 
NPI_UART_FC
;

104 
u¨tC⁄fig
.
ÊowC⁄åﬁThªshﬁd
 = 
NPI_UART_FC_THRESHOLD
;

105 
u¨tC⁄fig
.
rx
.
maxBufSize
 = 
NPI_UART_RX_BUF_SIZE
;

106 
u¨tC⁄fig
.
tx
.
maxBufSize
 = 
NPI_UART_TX_BUF_SIZE
;

107 
u¨tC⁄fig
.
idÀTimeout
 = 
NPI_UART_IDLE_TIMEOUT
;

108 
u¨tC⁄fig
.
ötE«bÀ
 = 
NPI_UART_INT_ENABLE
;

109 
u¨tC⁄fig
.
ˇŒBackFunc
 = (
hÆUARTCBack_t
)
≈iCBack
;

113 ()
	`HÆUARTO≥n
–
NPI_UART_PORT
, &
u¨tC⁄fig
 );

116 
	}
}

136 
uöt16
 
	$NPI_RódTøn•‹t
–
uöt8
 *
buf
, 
uöt16
 
Àn
 )

138 –
	`HÆUARTRód
–
NPI_UART_PORT
, 
buf
, 
Àn
 ) );

139 
	}
}

158 
uöt16
 
	$NPI_WrôeTøn•‹t
–
uöt8
 *
buf
, 
uöt16
 
Àn
 )

160 –
	`HÆUARTWrôe
–
NPI_UART_PORT
, 
buf
, 
Àn
 ) );

161 
	}
}

179 
uöt16
 
	$NPI_RxBufLí
( )

181 –
	`HÆ_UART_RxBufLí
–
NPI_UART_PORT
 ) );

182 
	}
}

200 
uöt16
 
	$NPI_GëMaxRxBufSize
( )

202 –
NPI_UART_RX_BUF_SIZE
 );

203 
	}
}

221 
uöt16
 
	$NPI_GëMaxTxBufSize
( )

223 –
NPI_UART_TX_BUF_SIZE
 );

224 
	}
}

	@../../common/npi/npi_np/npi.h

43 #i‚de‡
NPI_H


44 
	#NPI_H


	)

46 #ifde‡
__˝lu•lus


55 
	~"hÆ_ty≥s.h
"

56 
	~"hÆ_bﬂrd.h
"

57 
	~"hÆ_u¨t.h
"

68 #i‡!
deföed
 
NPI_UART_PORT


70 #i‡((
deföed
 
HAL_UART_SPI
) && (HAL_UART_SPI != 0))

71 #i‡(
HAL_UART_SPI
 == 2)

72 
	#NPI_UART_PORT
 
HAL_UART_PORT_1


	)

74 
	#NPI_UART_PORT
 
HAL_UART_PORT_0


	)

77 #i‡((
deföed
 
HAL_UART_DMA
) && (HAL_UART_DMA == 1))

78 
	#NPI_UART_PORT
 
HAL_UART_PORT_0


	)

79 #ñi‡((
deföed
 
HAL_UART_DMA
) && (HAL_UART_DMA == 2))

80 
	#NPI_UART_PORT
 
HAL_UART_PORT_1


	)

82 
	#NPI_UART_PORT
 
HAL_UART_PORT_0


	)

87 #i‡!
deföed
–
NPI_UART_FC
 )

88 
	#NPI_UART_FC
 
TRUE


	)

91 
	#NPI_UART_FC_THRESHOLD
 48

	)

92 
	#NPI_UART_RX_BUF_SIZE
 128

	)

93 
	#NPI_UART_TX_BUF_SIZE
 128

	)

94 
	#NPI_UART_IDLE_TIMEOUT
 6

	)

95 
	#NPI_UART_INT_ENABLE
 
TRUE


	)

97 #i‡!
deföed
–
NPI_UART_BR
 )

98 
	#NPI_UART_BR
 
HAL_UART_BR_115200


	)

105 (*
≈iCBack_t
Ë–
	tuöt8
 
	tp‹t
, uöt8 
	tevít
 );

123 
NPI_InôTøn•‹t
–
≈iCBack_t
 
≈iCBack
 );

124 
uöt16
 
NPI_RódTøn•‹t
–
uöt8
 *
buf
, uöt16 
Àn
 );

125 
uöt16
 
NPI_WrôeTøn•‹t
–
uöt8
 *, uint16 );

126 
uöt16
 
NPI_RxBufLí
( );

127 
uöt16
 
NPI_GëMaxRxBufSize
( );

128 
uöt16
 
NPI_GëMaxTxBufSize
( );

133 #ifde‡
__˝lu•lus


	@HostTest_Main.c

42 
	#chù
 2541

	)

48 
	~"hÆ_ty≥s.h
"

49 
	~"hÆ_key.h
"

50 
	~"hÆ_timî.h
"

51 
	~"hÆ_drivîs.h
"

52 
	~"hÆ_Àd.h
"

56 
	~"OSAL.h
"

57 
	~"OSAL_Tasks.h
"

58 #i‡
deföed
 
POWER_SAVING


59 
	~"OSAL_PwrMgr.h
"

61 
	~"oßl_¢v.h
"

67 
	~"hÆ_waô.h
"

68 
	~"dma.h
"

70 
	~"ioCC254x_bôdef.h
"

73 
	~"ioCC2541.h
"

91 
	#SIZE_OF_UART_RX_BUFFER
 50

	)

92 
	#SIZE_OF_UART_TX_BUFFER
 
SIZE_OF_UART_RX_BUFFER


	)

95 
	#UART_TEST_DATA
 "Texa†In°rumít†LPRF!"

	)

98 
	#UART_TST_MODE_RX


	)

102 
	#UART_BAUD_M
 216

	)

103 
	#UART_BAUD_E
 11

	)

113 
MSA_Maö_KeyCÆlback
(
uöt8
 
keys
, uöt8 
°©e
);

125 
	$maö
()

129 
	`HAL_BOARD_INIT
();

148 
	`HÆDrivîInô
();

197 
P0SEL
 &~(
BIT7
 | 
BIT1
) ;

198 
P0DIR
 &~
BIT1
;

199 
P0DIR
 |
BIT7
;

200 
P0_7
 = 0;

214 
U0BAUD
 = 
UART_BAUD_M
;

215 
U0GCR
 = (U0GCR&~
U0GCR_BAUD_E
Ë| 
UART_BAUD_E
;

219 
U0CSR
 |
U0CSR_MODE
;

222 
U0UCR
 &~
U0UCR_START
;

225 
U0UCR
 |
U0UCR_STOP
;

228 
U0UCR
 &~
U0UCR_SPB
;

231 
U0UCR
 &~
U0UCR_PARITY
;

234 
U0UCR
 &~
U0UCR_BIT9
;

240 
U0UCR
 &~
U0UCR_D9
;

243 
U0UCR
 &~
U0UCR_FLOW
;

252 
	`oßl_¢v_öô
();

255 
	`oßl_öô_sy°em
();

258 
	`HAL_ENABLE_INTERRUPTS
();

261 
	`HÆKeyC⁄fig
(
Ál£
, 
MSA_Maö_KeyCÆlback
);

264 
	`HÆLedSë
 (
HAL_LED_4
, 
HAL_LED_MODE_ON
);

266 #i‡
deföed
 
POWER_SAVING


267 
	`oßl_pwrmgr_devi˚
–
PWRMGR_BATTERY
 );

271 
	`oßl_°¨t_sy°em
();

274 
	}
}

291 
	$MSA_Maö_KeyCÆlback
(
uöt8
 
keys
, uöt8 
°©e
)

294 
	}
}

	@OSAL_HostTest.c

43 
	~"hÆ_ty≥s.h
"

44 
	~"OSAL.h
"

45 
	~"OSAL_Tasks.h
"

48 
	~"hÆ_drivîs.h
"

51 
	~"Œ.h
"

53 #i‡
deföed
 ( 
OSAL_CBTIMER_NUM_TASKS
 )

54 
	~"oßl_cbTimî.h
"

58 
	~"l2ˇp.h
"

61 
	~"g≠.h
"

63 #i‡
deföed
 ( 
GAP_BOND_MGR
 )

64 
	~"g≠b⁄dmgr.h
"

68 
	~"g©t.h
"

71 
	~"hci_é.h
"

73 #i‡!
deföed
 ( 
GATT_DB_OFF_CHIP
 )

74 
	~"g©t£rv≠p.h
"

76 #i‡
deföed
 ( 
GATT_TEST
 )

77 
	~"g©âe°.h
"

81 
	~"hci_ext_≠p.h
"

88 c⁄° 
pTaskEvítH™dÀrFn
 
	gèsksAº
[] =

90 
LL_Pro˚ssEvít
,

91 
HÆ_Pro˚ssEvít
,

92 
HCI_Pro˚ssEvít
,

93 #i‡
deföed
 ( 
OSAL_CBTIMER_NUM_TASKS
 )

94 
OSAL_CBTIMER_PROCESS_EVENT
–
oßl_CbTimîPro˚ssEvít
 ),

96 
L2CAP_Pro˚ssEvít
,

97 
GAP_Pro˚ssEvít
,

98 
GATT_Pro˚ssEvít
,

99 
SM_Pro˚ssEvít
,

100 #i‡
deföed
 ( 
GAP_BOND_MGR
 )

101 
GAPB⁄dMgr_Pro˚ssEvít
,

103 #i‡!
deföed
 ( 
GATT_DB_OFF_CHIP
 )

104 
GATTSîvAµ_Pro˚ssEvít
,

105 #i‡
deföed
 ( 
GATT_TEST
 )

106 
GATTTe°_Pro˚ssEvít
,

109 
HCI_EXT_Aµ_Pro˚ssEvít


112 c⁄° 
uöt8
 
	gèsksC¡
 = –
èsksAº
 ) / (ÅasksArr[0] );

113 
uöt16
 *
	gèsksEvíts
;

128 
	$oßlInôTasks
( )

130 
uöt8
 
èskID
 = 0;

132 
èsksEvíts
 = (
uöt16
 *)
	`oßl_mem_Æloc
––uöt16 ) * 
èsksC¡
);

133 
VOID
 
	`oßl_mem£t
–
èsksEvíts
, 0, (–
uöt16
 ) * 
èsksC¡
));

136 
	`LL_Inô
–
èskID
++ );

139 
	`HÆ_Inô
–
èskID
++ );

142 
	`HCI_Inô
–
èskID
++ );

144 #i‡
	`deföed
 ( 
OSAL_CBTIMER_NUM_TASKS
 )

146 
	`oßl_CbTimîInô
–
èskID
 );

147 
èskID
 +
OSAL_CBTIMER_NUM_TASKS
;

151 
	`L2CAP_Inô
–
èskID
++ );

154 
	`GAP_Inô
–
èskID
++ );

157 
	`GATT_Inô
–
èskID
++ );

160 
	`SM_Inô
–
èskID
++ );

162 #i‡
	`deföed
 ( 
GAP_BOND_MGR
 )

163 
	`GAPB⁄dMgr_Inô
–
èskID
++ );

166 #i‡!
	`deföed
 ( 
GATT_DB_OFF_CHIP
 )

168 
	`GATTSîvAµ_Inô
–
èskID
++ );

170 #i‡
	`deföed
 ( 
GATT_TEST
 )

172 
	`GATTTe°_Inô
–
èskID
++ );

177 
	`HCI_EXT_Aµ_Inô
–
èskID
 );

178 
	}
}

	@hci_ext_app.c

43 
	~"bcomdef.h
"

44 
	~"OSAL.h
"

45 
	~"hÆ_lcd.h
"

46 
	~"hci.h
"

47 
	~"hci_é.h
"

48 
	~"l2ˇp.h
"

49 
	~"g≠.h
"

50 
	~"g©t.h
"

51 
	~"g©t_uuid.h
"

52 
	~"oßl_¢v.h
"

54 #i‡!
deföed
 ( 
GATT_DB_OFF_CHIP
 )

55 
	~"g©t£rv≠p.h
"

56 
	~"g≠g©t£rvî.h
"

58 #i‡
deföed
 ( 
GATT_TEST
 ) || deföed ( 
GATT_QUAL
 )

59 
	~"g©âe°.h
"

63 #i‡
deföed
 ( 
GAP_BOND_MGR
 )

64 
	~"g≠b⁄dmgr.h
"

67 
	~"OnBﬂrd.h
"

68 
	~"hci_ext_≠p.h
"

78 
	#RSP_PAYLOAD_IDX
 6

	)

79 
	#MAX_RSP_DATA_LEN
 50

	)

80 
	#MAX_RSP_BUF
 ( 
RSP_PAYLOAD_IDX
 + 
MAX_RSP_DATA_LEN
 )

	)

82 #i‡!
deföed
 ( 
HCI_EXT_APP_OUT_BUF
 )

83 
	#HCI_EXT_APP_OUT_BUF
 44

	)

86 
	#KEYDIST_SENC
 0x01

	)

87 
	#KEYDIST_SID
 0x02

	)

88 
	#KEYDIST_SSIGN
 0x04

	)

89 
	#KEYDIST_MENC
 0x08

	)

90 
	#KEYDIST_MID
 0x10

	)

91 
	#KEYDIST_MSIGN
 0x20

	)

93 
	#HCI_EXT_HDR_LEN
 5

	)

96 
	#GATT_MAX_NUM_RELIABLE_WRITES
 5

	)

103 
uöt8
 
	mpktTy≥
;

104 
uöt16
 
	m›Code
;

105 
uöt8
 
	mÀn
;

106 
uöt8
 *
	mpD©a
;

107 } 
	thciExtCmd_t
;

124 
uöt8
 
	ghciExtAµ_TaskID
;

126 
uöt32
 
	ghciExtSignCou¡î
 = 0;

128 
uöt8
 
	gout_msg
[
HCI_EXT_APP_OUT_BUF
];

129 
uöt8
 
	gr•Buf
[
MAX_RSP_BUF
];

132 
uöt8
 
	gIRK
[
KEYLEN
] = {0};

133 
uöt8
 
	gSRK
[
KEYLEN
] = {0};

135 #i‡!
deföed
 ( 
GATT_DB_OFF_CHIP
 )

136 #i‡––
HOST_CONFIG
 & 
CENTRAL_CFG
 ) && ( HOST_CONFIG & 
PERIPHERAL_CFG
 ) )

137 
uöt8
 
	gdevi˚Name
[
GAP_DEVICE_NAME_LEN
] = "TI BLE All";

138 #ñi‡–
HOST_CONFIG
 & 
CENTRAL_CFG
 )

139 
uöt8
 
	gdevi˚Name
[
GAP_DEVICE_NAME_LEN
] = "TI BLE Central";

141 
uöt8
 
	gdevi˚Name
[
GAP_DEVICE_NAME_LEN
] = "TI BLE Peripheral";

143 
uöt16
 
	g≠≥¨™˚
 = 17;

146 #i‡
deföed
 ( 
GAP_BOND_MGR
 )

147 
uöt8
 
	ghciExtProfûeRﬁe
;

165 
uöt8
 
¥o˚ssExtMsg
–
hciPackë_t
 *
pMsg
 );

166 
uöt8
 
¥o˚ssExMsgUTIL
–uöt8 
cmdID
, 
hciExtCmd_t
 *
pCmd
, uöt8 *
pR•D©aLí
 );

167 
uöt8
 
checkNVLí
–
oßlSnvId_t
 
id
, 
oßlSnvLí_t
 
Àn
 );

168 
uöt8
 
¥o˚ssExMsgL2CAP
–uöt8 
cmdID
, 
hciExtCmd_t
 *
pCmd
 );

169 
uöt8
 
¥o˚ssExMsgATT
–uöt8 
cmdID
, 
hciExtCmd_t
 *
pCmd
 );

170 
uöt8
 
¥o˚ssExMsgGATT
–uöt8 
cmdID
, 
hciExtCmd_t
 *
pCmd
, uöt8 *
pR•D©aLí
 );

171 
uöt8
 
¥o˚ssExMsgGAP
–uöt8 
cmdID
, 
hciExtCmd_t
 *
pCmd
, uöt8 *
pR•D©aLí
 );

173 
uöt8
 
¥o˚ssEvíts
–
oßl_evít_hdr_t
 *
pMsg
 );

174 
uöt8
 *
¥o˚ssEvítsGAP
–
g≠EvítHdr_t
 *
pMsg
, uöt8 *
pOutMsg
, uöt8 *
pMsgLí
,

175 
uöt8
 *
pAŒoˇãd
, uöt8 *
pDóŒoˇã
 );

176 
uöt8
 *
¥o˚ssEvítsL2CAP
–
l2ˇpSig«lEvít_t
 *
pPkt
, uöt8 *
pOutMsg
, uöt8 *
pMsgLí
 );

177 
uöt8
 *
¥o˚ssEvítsGATT
–
g©tMsgEvít_t
 *
pPkt
, uöt8 *
pMsg
, uöt8 *
pMsgLí
, uöt8 *
pAŒoˇãd
 );

179 #i‚de‡
GATT_DB_OFF_CHIP


180 
uöt8
 *
¥o˚ssEvítsGATTSîv
–
g©tEvítHdr_t
 *
pPkt
, uöt8 *
pMsg
, uöt8 *
pMsgLí
 );

182 
uöt8
 
addAârRec
–
g©tSîvi˚_t
 *
pSîv
, uöt8 *
pUUID
, uöt8 
Àn
,

183 
uöt8
 
≥rmissi⁄s
, 
uöt16
 *
pTŸÆAârs
, uöt8 *
pR•D©aLí
 );

184 
‰ìAârRecs
–
g©tSîvi˚_t
 *
pSîv
 );

185 c⁄° 
uöt8
 *
födUUIDRec
–uöt8 *
pUUID
, uöt8 
Àn
 );

188 
uöt8
 
buûdHCIExtHódî
–uöt8 *
pBuf
, 
uöt16
 
evít
, uöt8 
°©us
, uöt16 
c⁄nH™dÀ
 );

189 
uöt8
 
m≠ATT2BLESètus
–uöt8 
°©us
 );

205 
	$HCI_EXT_Aµ_Inô
–
uöt8
 
èsk_id
 )

207 
hciExtAµ_TaskID
 = 
èsk_id
;

209 
	`HCI_ExtTaskRegi°î
–
hciExtAµ_TaskID
 );

212 
	`GAP_Regi°îF‹HCIMsgs
–
hciExtAµ_TaskID
 );

215 
VOID
 
	`GATT_InôClõ¡
();

218 
	`GATT_Regi°îF‹Ind
–
hciExtAµ_TaskID
 );

220 #i‡!
	`deföed
 ( 
GATT_DB_OFF_CHIP
 )

222 
	`GATTSîvAµ_Regi°îF‹Msg
–
hciExtAµ_TaskID
 );

224 #i‡
	`deföed
 ( 
GATT_QUAL
 )

225 
VOID
 
	`GATTQuÆ_AddSîvi˚
–
GATT_ALL_SERVICES
 );

228 
VOID
 
	`GGS_AddSîvi˚
–
GATT_ALL_SERVICES
 );

229 
VOID
 
	`GATTSîvAµ_AddSîvi˚
–
GATT_ALL_SERVICES
 );

230 #i‡
	`deföed
 ( 
GATT_TEST
 )

231 
VOID
 
	`GATTTe°_AddSîvi˚
–
GATT_ALL_SERVICES
 );

235 
VOID
 
	`GGS_SëP¨amëî
–
GGS_DEVICE_NAME_ATT
, 
	`oßl_°æí
((*)
devi˚Name
) , deviceName );

236 
VOID
 
	`GGS_SëP¨amëî
–
GGS_APPEARANCE_ATT
, –
uöt16
 ), (*)&
≠≥¨™˚
 );

239 
	`GATT_Regi°îF‹Req
–
hciExtAµ_TaskID
 );

245 #i‡(
deföed
 
HAL_LCD
Ë&& (HAL_LCD =
TRUE
)

247 
	`HÆLcdWrôeSåög
–" TI BLEv1.4", 
HAL_LCD_LINE_1
 );

248 
	`HÆLcdWrôeSåög
–" Ho°Te°Aµ", 
HAL_LCD_LINE_2
 );

249 #i‡––
HOST_CONFIG
 & 
CENTRAL_CFG
 ) && ( HOST_CONFIG & 
PERIPHERAL_CFG
 ) )

250 
	`HÆLcdWrôeSåög
–" AŒ", 
HAL_LCD_LINE_3
 );

251 #ñi‡––
HOST_CONFIG
 & 
CENTRAL_CFG
 ) && ( HOST_CONFIG & 
BROADCASTER_CFG
 ) )

252 
	`HÆLcdWrôeSåög
–" Cít+Bˇ°", 
HAL_LCD_LINE_3
 );

253 #ñi‡––
HOST_CONFIG
 & 
PERIPHERAL_CFG
 ) && ( HOST_CONFIG & 
OBSERVER_CFG
 ) )

254 
	`HÆLcdWrôeSåög
–" Pîi+Ob£rv", 
HAL_LCD_LINE_3
 );

255 #ñi‡–
HOST_CONFIG
 & 
CENTRAL_CFG
 )

256 
	`HÆLcdWrôeSåög
–" CíåÆ", 
HAL_LCD_LINE_3
 );

258 
	`HÆLcdWrôeSåög
–" PîùhîÆ", 
HAL_LCD_LINE_3
 );

263 
VOID
 
	`oßl_¢v_ªad
–
BLE_NVID_IRK
, 
KEYLEN
, 
IRK
 );

264 
VOID
 
	`oßl_¢v_ªad
–
BLE_NVID_CSRK
, 
KEYLEN
, 
SRK
 );

265 
VOID
 
	`oßl_¢v_ªad
–
BLE_NVID_SIGNCOUNTER
, –
uöt32
 ), &
hciExtSignCou¡î
 );

266 
	}
}

281 
uöt16
 
	$HCI_EXT_Aµ_Pro˚ssEvít
–
uöt8
 
èsk_id
, 
uöt16
 
evíts
 )

283 i‡–
evíts
 & 
SYS_EVENT_MSG
 )

285 
hciPackë_t
 *
pMsg
;

287 i‡–(
pMsg
 = ( 
hciPackë_t
 *)
	`oßl_msg_ª˚ive
–
hciExtAµ_TaskID
 )Ë!
NULL
 )

289 
uöt8
 
dóŒoc
 = 
TRUE
;

292  
pMsg
->
hdr
.
evít
 )

295 
HCI_EXT_CMD_EVENT
:

296 
dóŒoc
 = 
	`¥o˚ssExtMsg
–
pMsg
 );

299 
HCI_GAP_EVENT_EVENT
:

301 i‡–
pMsg
->
hdr
.
°©us
 =
HCI_COMMAND_COMPLETE_EVENT_CODE
 )

303 
hciEvt_CmdCom∂ëe_t
 *
pkt
 = (hciEvt_CmdCom∂ëe_à*)
pMsg
;

304 
oßl_msg_hdr_t
 *
msgHdr
;

305 
uöt8
 
Àn
;

307 
msgHdr
 = (
oßl_msg_hdr_t
 *)
pMsg
;

308 
msgHdr
--;

310 
Àn
 = (
uöt8
)(
msgHdr
->À¿-  ( 
hciEvt_CmdCom∂ëe_t
 ));

312 
	`HCI_SídComm™dCom∂ëeEvít
–
HCI_COMMAND_COMPLETE_EVENT_CODE
, 
pkt
->
cmdOpcode
, 
Àn
,Ökt->
pRëu∫P¨am
 );

318 
dóŒoc
 = 
	`¥o˚ssEvíts
–(
oßl_evít_hdr_t
 *)
pMsg
 );

323 i‡–
dóŒoc
 )

325 
VOID
 
	`oßl_msg_dóŒoˇã
–(
uöt8
 *)
pMsg
 );

330  (
evíts
 ^ 
SYS_EVENT_MSG
);

333 i‡–
evíts
 & 
GAP_EVENT_SIGN_COUNTER_CHANGED
 )

336 
VOID
 
	`oßl_¢v_wrôe
–
BLE_NVID_SIGNCOUNTER
, –
uöt32
 ), &
hciExtSignCou¡î
 );

338  ( 
evíts
 ^ 
GAP_EVENT_SIGN_COUNTER_CHANGED
 );

343 
	}
}

354 
uöt8
 
	$¥o˚ssExtMsg
–
hciPackë_t
 *
pMsg
 )

356 
uöt8
 
dóŒoˇãIncomög
;

357 
bSètus_t
 
°©
 = 
SUCCESS
;

358 
uöt8
 
r•D©aLí
 = 0;

359 
hciExtCmd_t
 
msg
;

360 
uöt8
 *
pBuf
 = 
pMsg
->
pD©a
;

363 
msg
.
pktTy≥
 = *
pBuf
++;

364 
msg
.
›Code
 = 
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] );

365 
pBuf
 += 2;

367 
msg
.
Àn
 = *
pBuf
++;

368 
msg
.
pD©a
 = 
pBuf
;

370  
msg
.
›Code
 >> 7 )

372 
HCI_EXT_L2CAP_SUBGRP
:

373 
°©
 = 
	`¥o˚ssExMsgL2CAP
–(
msg
.
›Code
 & 0x007F), &msg );

376 
HCI_EXT_ATT_SUBGRP
:

377 
°©
 = 
	`¥o˚ssExMsgATT
–(
msg
.
›Code
 & 0x007F), &msg );

380 
HCI_EXT_GATT_SUBGRP
:

381 
°©
 = 
	`¥o˚ssExMsgGATT
–(
msg
.
›Code
 & 0x007F), &msg, &
r•D©aLí
 );

384 
HCI_EXT_GAP_SUBGRP
:

385 
°©
 = 
	`¥o˚ssExMsgGAP
–(
msg
.
›Code
 & 0x007F), &msg, &
r•D©aLí
 );

388 
HCI_EXT_UTIL_SUBGRP
:

389 
°©
 = 
	`¥o˚ssExMsgUTIL
–(
msg
.
›Code
 & 0x007F), &msg, &
r•D©aLí
 );

393 
°©
 = 
FAILURE
;

398 
VOID
 
	`oßl_msg_dóŒoˇã
–(
uöt8
 *)
pMsg
 );

399 
dóŒoˇãIncomög
 = 
FALSE
;

402 
r•Buf
[0] = 
	`LO_UINT16
–
HCI_EXT_GAP_CMD_STATUS_EVENT
 );

403 
r•Buf
[1] = 
	`HI_UINT16
–
HCI_EXT_GAP_CMD_STATUS_EVENT
 );

404 
r•Buf
[2] = 
°©
;

405 
r•Buf
[3] = 
	`LO_UINT16
–0xFC00 | 
msg
.
›Code
 );

406 
r•Buf
[4] = 
	`HI_UINT16
–0xFC00 | 
msg
.
›Code
 );

407 
r•Buf
[5] = 
r•D©aLí
;

411 
	`HCI_SídC⁄åﬁÀrToHo°Evít
–
HCI_VE_EVENT_CODE
, (6 + 
r•D©aLí
), 
r•Buf
 );

413  ( 
dóŒoˇãIncomög
 );

414 
	}
}

427 
uöt8
 
	$¥o˚ssExMsgUTIL
–
uöt8
 
cmdID
, 
hciExtCmd_t
 *
pCmd
, uöt8 *
pR•D©aLí
 )

429 
uöt8
 *
pBuf
 = 
pCmd
->
pD©a
;

430 
bSètus_t
 
°©
 = 
SUCCESS
;

432 *
pR•D©aLí
 = 0;

434  
cmdID
 )

436 
HCI_EXT_UTIL_NV_READ
:

438 
oßlSnvId_t
 
id
 = 
pBuf
[0];

439 
oßlSnvLí_t
 
Àn
 = 
pBuf
[1];

442 i‡–(
Àn
 < 
MAX_RSP_DATA_LEN
Ë&& (
	`checkNVLí
–
id
,Üí ) =
SUCCESS
) )

444 
°©
 = 
	`oßl_¢v_ªad
–
id
, 
Àn
, &
r•Buf
[
RSP_PAYLOAD_IDX
] );

445 i‡–
°©
 =
SUCCESS
 )

447 *
pR•D©aLí
 = 
pBuf
[1];

452 
°©
 = 
INVALIDPARAMETER
;

457 
HCI_EXT_UTIL_NV_WRITE
:

459 
oßlSnvId_t
 
id
 = 
pBuf
[0];

460 
oßlSnvLí_t
 
Àn
 = 
pBuf
[1];

461 i‡–
	`checkNVLí
–
id
, 
Àn
 ) =
SUCCESS
 )

463 
°©
 = 
	`oßl_¢v_wrôe
–
id
, 
Àn
, &
pBuf
[2] );

465 i‡–
id
 =
BLE_NVID_SIGNCOUNTER
 )

467 
hciExtSignCou¡î
 = 
	`BUILD_UINT32
(
pBuf
[2],ÖBuf[3],ÖBuf[4],ÖBuf[5]);

472 
°©
 = 
INVALIDPARAMETER
;

477 
HCI_EXT_UTIL_FORCE_BOOT
:

479 
	`≠pF‹˚BoŸ
();

480 
	`≠pF‹˚BoŸ
();

483 
°©
 = 
INVALIDPARAMETER
;

488 
°©
 = 
FAILURE
;

492  ( 
°©
 );

493 
	}
}

505 
uöt8
 
	$checkNVLí
–
oßlSnvId_t
 
id
, 
oßlSnvLí_t
 
Àn
 )

507 
uöt8
 
°©
 = 
SUCCESS
;

509  
id
 )

511 
BLE_NVID_CSRK
:

512 
BLE_NVID_IRK
:

513 i‡–
Àn
 !
KEYLEN
 )

515 
°©
 = 
INVALIDPARAMETER
;

519 
BLE_NVID_SIGNCOUNTER
:

520 i‡–
Àn
 ! ( 
uöt32
 ) )

522 
°©
 = 
INVALIDPARAMETER
;

527 
°©
 = 
INVALIDPARAMETER
;

529 #i‡
	`deföed
 ( 
GAP_BOND_MGR
 )

530 i‡–(
id
 >
BLE_NVID_GAP_BOND_START
Ë&& (id <
BLE_NVID_GAP_BOND_END
) )

532 
°©
 = 
	`GAPB⁄dMgr_CheckNVLí
–
id
, 
Àn
 );

538  ( 
°©
 );

539 
	}
}

550 
uöt8
 
	$¥o˚ssExMsgL2CAP
–
uöt8
 
cmdID
, 
hciExtCmd_t
 *
pCmd
 )

552 
uöt8
 *
pBuf
 = 
pCmd
->
pD©a
;

553 
uöt16
 
c⁄nH™dÀ
 = 
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] );

554 
l2ˇpSig«lCmd_t
 
cmd
;

555 
bSètus_t
 
°©
;

557  
cmdID
 )

559 
L2CAP_PARAM_UPDATE_REQ
:

560 
°©
 = 
	`L2CAP_P¨£P¨amUpd©eReq
–&
cmd
, &
pBuf
[2], 
pCmd
->
Àn
-2 );

561 i‡–
°©
 =
SUCCESS
 )

563 
°©
 = 
	`L2CAP_C⁄nP¨amUpd©eReq
–
c⁄nH™dÀ
, &
cmd
.
upd©eReq
, 
hciExtAµ_TaskID
 );

567 
L2CAP_INFO_REQ
:

568 
°©
 = 
	`L2CAP_P¨£InfoReq
–&
cmd
, &
pBuf
[2], 
pCmd
->
Àn
-2 );

569 i‡–
°©
 =
SUCCESS
 )

571 
°©
 = 
	`L2CAP_InfoReq
–
c⁄nH™dÀ
, &
cmd
.
öfoReq
, 
hciExtAµ_TaskID
 );

576 
°©
 = 
FAILURE
;

580  ( 
°©
 );

581 
	}
}

594 
uöt8
 
	$¥o˚ssExMsgATT
–
uöt8
 
cmdID
, 
hciExtCmd_t
 *
pCmd
 )

596 
uöt8
 
numPª∑ªWrôes
 = 0;

597 
©tPª∑ªWrôeReq_t
 *
pPª∑ªWrôes
 = 
NULL
;

598 
uöt8
 *
pBuf
 = 
pCmd
->
pD©a
;

599 
uöt16
 
c⁄nH™dÀ
 = 
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] );

600 
©tMsg_t
 
msg
;

601 
bSètus_t
 
°©
;

603  
cmdID
 )

605 
ATT_ERROR_RSP
:

606 
°©
 = 
	`ATT_P¨£Eº‹R•
–&
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

607 i‡–
°©
 =
SUCCESS
 )

609 
°©
 = 
	`ATT_Eº‹R•
–
c⁄nH™dÀ
, &
msg
.
îr‹R•
 );

613 
ATT_EXCHANGE_MTU_REQ
:

614 
°©
 = 
	`ATT_P¨£Exch™geMTUReq
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

615 i‡–
°©
 =
SUCCESS
 )

617 
°©
 = 
	`GATT_Exch™geMTU
–
c⁄nH™dÀ
, &
msg
.
exch™geMTUReq
, 
hciExtAµ_TaskID
 );

621 
ATT_EXCHANGE_MTU_RSP
:

622 
°©
 = 
	`ATT_P¨£Exch™geMTUR•
–&
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

623 i‡–
°©
 =
SUCCESS
 )

625 
°©
 = 
	`ATT_Exch™geMTUR•
–
c⁄nH™dÀ
, &
msg
.
exch™geMTUR•
 );

629 
ATT_FIND_INFO_REQ
:

630 
°©
 = 
	`ATT_P¨£FödInfoReq
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

631 i‡–
°©
 =
SUCCESS
 )

633 
°©
 = 
	`GATT_DiscAŒCh¨Descs
–
c⁄nH™dÀ
, 
msg
.
födInfoReq
.
°¨tH™dÀ
,

634 
msg
.
födInfoReq
.
ídH™dÀ
, 
hciExtAµ_TaskID
 );

638 
ATT_FIND_INFO_RSP
:

639 
°©
 = 
	`ATT_P¨£FödInfoR•
–&
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

640 i‡–
°©
 =
SUCCESS
 )

642 
°©
 = 
	`ATT_FödInfoR•
–
c⁄nH™dÀ
, &
msg
.
födInfoR•
 );

646 
ATT_FIND_BY_TYPE_VALUE_REQ
:

647 
°©
 = 
	`ATT_P¨£FödByTy≥VÆueReq
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

648 i‡–
°©
 =
SUCCESS
 )

650 
©tFödByTy≥VÆueReq_t
 *
pReq
 = &
msg
.
födByTy≥VÆueReq
;

653 i‡–
	`g©tPrim¨ySîvi˚Ty≥
–
pReq
->
ty≥
 ) &&

654 –
pReq
->
°¨tH™dÀ
 =
GATT_MIN_HANDLE
 ) &&

655 –
pReq
->
ídH™dÀ
 =
GATT_MAX_HANDLE
 ) )

658 
°©
 = 
	`GATT_DiscPrim¨ySîvi˚ByUUID
–
c⁄nH™dÀ
, 
pReq
->
vÆue
,

659 
pReq
->
Àn
, 
hciExtAµ_TaskID
 );

663 
°©
 = 
INVALIDPARAMETER
;

668 
ATT_FIND_BY_TYPE_VALUE_RSP
:

669 
°©
 = 
	`ATT_P¨£FödByTy≥VÆueR•
–&
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

670 i‡–
°©
 =
SUCCESS
 )

672 
°©
 = 
	`ATT_FödByTy≥VÆueR•
–
c⁄nH™dÀ
, &
msg
.
födByTy≥VÆueR•
 );

676 
ATT_READ_BY_TYPE_REQ
:

677 
°©
 = 
	`ATT_P¨£RódByTy≥Req
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

678 i‡–
°©
 =
SUCCESS
 )

680 
©tRódByTy≥Req_t
 *
pReq
 = &
msg
.
ªadByTy≥Req
;

683 i‡–
	`g©tIn˛udeTy≥
–
pReq
->
ty≥
 ) )

686 
°©
 = 
	`GATT_FödIn˛udedSîvi˚s
–
c⁄nH™dÀ
, 
pReq
->
°¨tH™dÀ
,

687 
pReq
->
ídH™dÀ
, 
hciExtAµ_TaskID
 );

689 i‡–
	`g©tCh¨a˘îTy≥
–
pReq
->
ty≥
 ) )

692 
°©
 = 
	`GATT_DiscAŒCh¨s
–
c⁄nH™dÀ
, 
pReq
->
°¨tH™dÀ
,

693 
pReq
->
ídH™dÀ
, 
hciExtAµ_TaskID
 );

698 
°©
 = 
	`GATT_RódUsögCh¨UUID
–
c⁄nH™dÀ
, 
pReq
, 
hciExtAµ_TaskID
 );

703 
ATT_READ_BY_TYPE_RSP
:

704 
°©
 = 
	`ATT_P¨£RódByTy≥R•
–&
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

705 i‡–
°©
 =
SUCCESS
 )

707 
°©
 = 
	`ATT_RódByTy≥R•
–
c⁄nH™dÀ
, &
msg
.
ªadByTy≥R•
 );

711 
ATT_READ_REQ
:

712 
°©
 = 
	`ATT_P¨£RódReq
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

713 i‡–
°©
 =
SUCCESS
 )

716 
°©
 = 
	`GATT_RódCh¨VÆue
–
c⁄nH™dÀ
, &
msg
.
ªadReq
, 
hciExtAµ_TaskID
 );

720 
ATT_READ_RSP
:

721 
°©
 = 
	`ATT_P¨£RódR•
–&
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

722 i‡–
°©
 =
SUCCESS
 )

724 
°©
 = 
	`ATT_RódR•
–
c⁄nH™dÀ
, &
msg
.
ªadR•
 );

728 
ATT_READ_BLOB_REQ
:

729 
°©
 = 
	`ATT_P¨£RódBlobReq
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

730 i‡–
°©
 =
SUCCESS
 )

733 
°©
 = 
	`GATT_RódL⁄gCh¨VÆue
–
c⁄nH™dÀ
, &
msg
.
ªadBlobReq
, 
hciExtAµ_TaskID
 );

737 
ATT_READ_BLOB_RSP
:

738 
°©
 = 
	`ATT_P¨£RódBlobR•
–&
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

739 i‡–
°©
 =
SUCCESS
 )

741 
°©
 = 
	`ATT_RódBlobR•
–
c⁄nH™dÀ
, &
msg
.
ªadBlobR•
 );

745 
ATT_READ_MULTI_REQ
:

746 
°©
 = 
	`ATT_P¨£RódMu…iReq
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

747 i‡–
°©
 =
SUCCESS
 )

749 
°©
 = 
	`GATT_RódMu…iCh¨VÆues
–
c⁄nH™dÀ
, &
msg
.
ªadMu…iReq
, 
hciExtAµ_TaskID
 );

753 
ATT_READ_MULTI_RSP
:

754 
°©
 = 
	`ATT_P¨£RódMu…iR•
–&
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

755 i‡–
°©
 =
SUCCESS
 )

757 
°©
 = 
	`ATT_RódMu…iR•
–
c⁄nH™dÀ
, &
msg
.
ªadMu…iR•
 );

761 
ATT_READ_BY_GRP_TYPE_REQ
:

762 
°©
 = 
	`ATT_P¨£RódByTy≥Req
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

763 i‡–
°©
 =
SUCCESS
 )

765 
©tRódByGΩTy≥Req_t
 *
pReq
 = &
msg
.
ªadByGΩTy≥Req
;

768 i‡–
	`g©tPrim¨ySîvi˚Ty≥
–
pReq
->
ty≥
 ) &&

769 –
pReq
->
°¨tH™dÀ
 =
GATT_MIN_HANDLE
 ) &&

770 –
pReq
->
ídH™dÀ
 =
GATT_MAX_HANDLE
 ) )

773 
°©
 = 
	`GATT_DiscAŒPrim¨ySîvi˚s
–
c⁄nH™dÀ
, 
hciExtAµ_TaskID
 );

777 
°©
 = 
INVALIDPARAMETER
;

782 
ATT_READ_BY_GRP_TYPE_RSP
:

783 
°©
 = 
	`ATT_P¨£RódByGΩTy≥R•
–&
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

784 i‡–
°©
 =
SUCCESS
 )

786 
°©
 = 
	`ATT_RódByGΩTy≥R•
–
c⁄nH™dÀ
, &
msg
.
ªadByGΩTy≥R•
 );

790 
ATT_WRITE_REQ
:

791 
°©
 = 
	`ATT_P¨£WrôeReq
–
pBuf
[2],ÖBuf[3], &pBuf[4], 
pCmd
->
Àn
-4, &
msg
 );

792 i‡–
°©
 =
SUCCESS
 )

794 
©tWrôeReq_t
 *
pReq
 = &
msg
.
wrôeReq
;

796 i‡–
pReq
->
cmd
 =
FALSE
 )

799 
°©
 = 
	`GATT_WrôeCh¨VÆue
–
c⁄nH™dÀ
, &
msg
.
wrôeReq
, 
hciExtAµ_TaskID
 );

803 i‡–
pReq
->
sig
 =
FALSE
 )

806 
°©
 = 
	`GATT_WrôeNoR•
–
c⁄nH™dÀ
, 
pReq
 );

811 
°©
 = 
	`GATT_Sig√dWrôeNoR•
–
c⁄nH™dÀ
, 
pReq
 );

817 
ATT_WRITE_RSP
:

818 
°©
 = 
	`ATT_P¨£WrôeR•
–&
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

819 i‡–
°©
 =
SUCCESS
 )

821 
°©
 = 
	`ATT_WrôeR•
–
c⁄nH™dÀ
 );

825 
ATT_PREPARE_WRITE_REQ
:

826 
°©
 = 
	`ATT_P¨£Pª∑ªWrôeReq
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

827 i‡–
°©
 =
SUCCESS
 )

829 #i‡!
	`deföed
 ( 
GATT_DB_OFF_CHIP
 ) && deföed ( 
TESTMODES
 )

830 i‡–
	`GATTSîvAµ_GëP¨amVÆue
(Ë=
GATT_TESTMODE_PREPARE_WRITE
 )

833 
°©
 = 
	`GATT_Pª∑ªWrôeReq
–
c⁄nH™dÀ
, &
msg
.
¥ï¨eWrôeReq
, 
hciExtAµ_TaskID
 );

839 i‡–
pPª∑ªWrôes
 =
NULL
 )

842 
pPª∑ªWrôes
 = 
	`oßl_mem_Æloc
–
GATT_MAX_NUM_RELIABLE_WRITES
 * –
©tPª∑ªWrôeReq_t
 ) );

845 i‡–
pPª∑ªWrôes
 !
NULL
 )

847 i‡–
numPª∑ªWrôes
 < 
GATT_MAX_NUM_RELIABLE_WRITES
 )

850 
VOID
 
	`oßl_mem˝y
–&(
pPª∑ªWrôes
[
numPª∑ªWrôes
++]),

851 &(
msg
.
¥ï¨eWrôeReq
),

852 –
©tPª∑ªWrôeReq_t
 ) );

856 
°©
 = 
INVALIDPARAMETER
;

861 
°©
 = 
bÀMemAŒocEº‹
;

867 
ATT_PREPARE_WRITE_RSP
:

868 
°©
 = 
	`ATT_P¨£Pª∑ªWrôeR•
–&
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

869 i‡–
°©
 =
SUCCESS
 )

871 
°©
 = 
	`ATT_Pª∑ªWrôeR•
–
c⁄nH™dÀ
, &
msg
.
¥ï¨eWrôeR•
 );

875 
ATT_EXECUTE_WRITE_REQ
:

876 
°©
 = 
	`ATT_P¨£ExecuãWrôeReq
–
ATT_SIG_NOT_INCLUDED
, 
TRUE
, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

877 i‡–
°©
 =
SUCCESS
 )

879 #i‡!
	`deföed
 ( 
GATT_DB_OFF_CHIP
 ) && deföed ( 
TESTMODES
 )

880 i‡–
	`GATTSîvAµ_GëP¨amVÆue
(Ë=
GATT_TESTMODE_PREPARE_WRITE
 )

883 
°©
 = 
	`GATT_ExecuãWrôeReq
–
c⁄nH™dÀ
, &
msg
.
execuãWrôeReq
, 
hciExtAµ_TaskID
 );

887 i‡–
pPª∑ªWrôes
 !
NULL
 )

890 
°©
 = 
	`GATT_RñübÀWrôes
–
c⁄nH™dÀ
, 
pPª∑ªWrôes
, 
numPª∑ªWrôes
,

891 
msg
.
execuãWrôeReq
.
Êags
, 
hciExtAµ_TaskID
 );

892 i‡–
°©
 !
SUCCESS
 )

894 
	`oßl_mem_‰ì
–
pPª∑ªWrôes
 );

899 
pPª∑ªWrôes
 = 
NULL
;

900 
numPª∑ªWrôes
 = 0;

904 
°©
 = 
INVALIDPARAMETER
;

909 
ATT_EXECUTE_WRITE_RSP
:

910 
°©
 = 
	`ATT_P¨£ExecuãWrôeR•
–&
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

911 i‡–
°©
 =
SUCCESS
 )

913 
°©
 = 
	`ATT_ExecuãWrôeR•
–
c⁄nH™dÀ
 );

917 
ATT_HANDLE_VALUE_NOTI
:

918 
°©
 = 
	`ATT_P¨£H™dÀVÆueInd
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[3], 
pCmd
->
Àn
-3, &
msg
 );

919 i‡–
°©
 =
SUCCESS
 )

921 
°©
 = 
	`GATT_NŸifiˇti⁄
–
c⁄nH™dÀ
, &
msg
.
h™dÀVÆueNŸi
, 
pBuf
[2] );

925 
ATT_HANDLE_VALUE_IND
:

926 
°©
 = 
	`ATT_P¨£H™dÀVÆueInd
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[3], 
pCmd
->
Àn
-3, &
msg
 );

927 i‡–
°©
 =
SUCCESS
 )

929 
°©
 = 
	`GATT_Indiˇti⁄
–
c⁄nH™dÀ
, &
msg
.
h™dÀVÆueInd
, 
pBuf
[2], 
hciExtAµ_TaskID
 );

933 
ATT_HANDLE_VALUE_CFM
:

934 
°©
 = 
	`ATT_P¨£H™dÀVÆueCfm
–&
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

935 i‡–
°©
 =
SUCCESS
 )

937 
°©
 = 
	`ATT_H™dÀVÆueCfm
–
c⁄nH™dÀ
 );

942 
°©
 = 
FAILURE
;

946  ( 
	`m≠ATT2BLESètus
–
°©
 ) );

947 
	}
}

961 
uöt8
 
	$¥o˚ssExMsgGATT
–
uöt8
 
cmdID
, 
hciExtCmd_t
 *
pCmd
, uöt8 *
pR•D©aLí
 )

963 #ifde‡
GATT_DB_OFF_CHIP


964 
uöt16
 
tŸÆAârs
 = 0;

965 
g©tSîvi˚_t
 
£rvi˚
 = { 0, 
NULL
 };

967 
uöt8
 *
pBuf
 = 
pCmd
->
pD©a
;

968 
uöt16
 
c⁄nH™dÀ
 = 
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] );

969 
©tMsg_t
 
msg
;

970 
bSètus_t
 
°©
 = 
SUCCESS
;

972  
cmdID
 )

974 
ATT_EXCHANGE_MTU_REQ
:

975 
°©
 = 
	`ATT_P¨£Exch™geMTUReq
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

976 i‡–
°©
 =
SUCCESS
 )

978 
°©
 = 
	`GATT_Exch™geMTU
–
c⁄nH™dÀ
, &
msg
.
exch™geMTUReq
, 
hciExtAµ_TaskID
 );

982 
ATT_READ_BY_GRP_TYPE_REQ
:

983 
°©
 = 
	`GATT_DiscAŒPrim¨ySîvi˚s
–
c⁄nH™dÀ
, 
hciExtAµ_TaskID
 );

986 
ATT_FIND_BY_TYPE_VALUE_REQ
:

987 
°©
 = 
	`GATT_DiscPrim¨ySîvi˚ByUUID
–
c⁄nH™dÀ
, &
pBuf
[2],

988 
pCmd
->
Àn
-2, 
hciExtAµ_TaskID
 );

991 
GATT_FIND_INCLUDED_SERVICES
:

992 
GATT_DISC_ALL_CHARS
:

993 i‡––
pCmd
->
Àn
-2 ) =
READ_BY_TYPE_REQ_FIXED_SIZE
 )

996 
uöt16
 
°¨tH™dÀ
 = 
	`BUILD_UINT16
–
pBuf
[2],ÖBuf[3] );

999 
uöt16
 
ídH™dÀ
 = 
	`BUILD_UINT16
–
pBuf
[4],ÖBuf[5] );

1001 i‡–
cmdID
 =
GATT_FIND_INCLUDED_SERVICES
 )

1003 
°©
 = 
	`GATT_FödIn˛udedSîvi˚s
–
c⁄nH™dÀ
, 
°¨tH™dÀ
,

1004 
ídH™dÀ
, 
hciExtAµ_TaskID
 );

1008 
°©
 = 
	`GATT_DiscAŒCh¨s
–
c⁄nH™dÀ
, 
°¨tH™dÀ
,

1009 
ídH™dÀ
, 
hciExtAµ_TaskID
 );

1014 
°©
 = 
ATT_ERR_INVALID_PDU
;

1018 
ATT_READ_BY_TYPE_REQ
:

1019 
°©
 = 
	`ATT_P¨£RódByTy≥Req
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

1020 i‡–
°©
 =
SUCCESS
 )

1022 
°©
 = 
	`GATT_DiscCh¨sByUUID
–
c⁄nH™dÀ
, &
msg
.
ªadByTy≥Req
, 
hciExtAµ_TaskID
 );

1026 
ATT_FIND_INFO_REQ
:

1027 
°©
 = 
	`ATT_P¨£FödInfoReq
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

1028 i‡–
°©
 =
SUCCESS
 )

1030 
°©
 = 
	`GATT_DiscAŒCh¨Descs
–
c⁄nH™dÀ
, 
msg
.
födInfoReq
.
°¨tH™dÀ
,

1031 
msg
.
födInfoReq
.
ídH™dÀ
, 
hciExtAµ_TaskID
 );

1035 
ATT_READ_REQ
:

1036 
°©
 = 
	`ATT_P¨£RódReq
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

1037 i‡–
°©
 =
SUCCESS
 )

1039 
°©
 = 
	`GATT_RódCh¨VÆue
–
c⁄nH™dÀ
, &
msg
.
ªadReq
, 
hciExtAµ_TaskID
 );

1043 
GATT_READ_USING_CHAR_UUID
:

1044 
°©
 = 
	`ATT_P¨£RódByTy≥Req
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

1045 i‡–
°©
 =
SUCCESS
 )

1047 
°©
 = 
	`GATT_RódUsögCh¨UUID
–
c⁄nH™dÀ
, &
msg
.
ªadByTy≥Req
, 
hciExtAµ_TaskID
 );

1051 
ATT_READ_BLOB_REQ
:

1052 
°©
 = 
	`ATT_P¨£RódBlobReq
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

1053 i‡–
°©
 =
SUCCESS
 )

1055 
°©
 = 
	`GATT_RódL⁄gCh¨VÆue
–
c⁄nH™dÀ
, &
msg
.
ªadBlobReq
, 
hciExtAµ_TaskID
 );

1059 
ATT_READ_MULTI_REQ
:

1060 
°©
 = 
	`ATT_P¨£RódMu…iReq
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

1061 i‡–
°©
 =
SUCCESS
 )

1063 
°©
 = 
	`GATT_RódMu…iCh¨VÆues
–
c⁄nH™dÀ
, &
msg
.
ªadMu…iReq
, 
hciExtAµ_TaskID
 );

1067 
GATT_WRITE_NO_RSP
:

1068 
°©
 = 
	`ATT_P¨£WrôeReq
–
FALSE
, 
TRUE
, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

1069 i‡–
°©
 =
SUCCESS
 )

1071 
°©
 = 
	`GATT_WrôeNoR•
–
c⁄nH™dÀ
, &
msg
.
wrôeReq
 );

1075 
GATT_SIGNED_WRITE_NO_RSP
:

1076 
°©
 = 
	`ATT_P¨£WrôeReq
–
TRUE
, TRUE, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

1077 i‡–
°©
 =
SUCCESS
 )

1079 
°©
 = 
	`GATT_Sig√dWrôeNoR•
–
c⁄nH™dÀ
, &
msg
.
wrôeReq
 );

1083 
ATT_WRITE_REQ
:

1084 
°©
 = 
	`ATT_P¨£WrôeReq
–
FALSE
, FALSE, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

1085 i‡–
°©
 =
SUCCESS
 )

1087 
°©
 = 
	`GATT_WrôeCh¨VÆue
–
c⁄nH™dÀ
, &
msg
.
wrôeReq
, 
hciExtAµ_TaskID
 );

1091 
ATT_PREPARE_WRITE_REQ
:

1092 
GATT_WRITE_LONG_CHAR_DESC
:

1094 i‡–
pCmd
->
Àn
-2 > 
PREPARE_WRITE_REQ_FIXED_SIZE
 )

1096 
g©tPª∑ªWrôeReq_t
 
ªq
;

1099 
ªq
.
Àn
 = 
pCmd
->À¿- (2 + 
PREPARE_WRITE_REQ_FIXED_SIZE
);

1102 i‡–
ªq
.
pVÆue
 = 
	`oßl_mem_Æloc
–ªq.
Àn
 ) )

1105 
ªq
.
h™dÀ
 = 
	`BUILD_UINT16
–
pBuf
[2],ÖBuf[3] );

1108 
ªq
.
off£t
 = 
	`BUILD_UINT16
–
pBuf
[4],ÖBuf[5] );

1111 
VOID
 
	`oßl_mem˝y
–
ªq
.
pVÆue
, &(
pBuf
[6]),Ñeq.
Àn
 );

1113 i‡–
cmdID
 =
ATT_PREPARE_WRITE_REQ
 )

1115 
°©
 = 
	`GATT_WrôeL⁄gCh¨VÆue
–
c⁄nH™dÀ
, &
ªq
, 
hciExtAµ_TaskID
 );

1119 
°©
 = 
	`GATT_WrôeL⁄gCh¨Desc
–
c⁄nH™dÀ
, &
ªq
, 
hciExtAµ_TaskID
 );

1122 i‡–
°©
 !
SUCCESS
 )

1124 
	`oßl_mem_‰ì
–
ªq
.
pVÆue
 );

1130 
°©
 = 
bÀMemAŒocEº‹
;

1135 
°©
 = 
ATT_ERR_INVALID_PDU
;

1139 
GATT_RELIABLE_WRITES
:

1140 i‡–
pCmd
->
Àn
-2 > 0 )

1142 
uöt8
 
numReqs
 = 
pBuf
[2];

1144 i‡––
numReqs
 > 0 ) && (ÇumReq†<
GATT_MAX_NUM_RELIABLE_WRITES
 ) )

1147 
©tPª∑ªWrôeReq_t
 *
pReqs
 = 
	`oßl_mem_Æloc
–
numReqs
 * (áttPrepareWriteReq_t ) );

1148 i‡–
pReqs
 !
NULL
 )

1150 
pBuf
 += 3;

1152  
uöt8
 
i
 = 0; i < 
numReqs
; i++ )

1155 
uöt8
 
ªqLí
 = 
PREPARE_WRITE_REQ_FIXED_SIZE
 + *
pBuf
++;

1157 
°©
 = 
	`ATT_P¨£Pª∑ªWrôeReq
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, 
pBuf
,

1158 
ªqLí
, (
©tMsg_t
 *)&(
pReqs
[
i
]) );

1159 i‡–
°©
 !
SUCCESS
 )

1165 
pBuf
 +
ªqLí
;

1168 i‡–
°©
 =
SUCCESS
 )

1171 
°©
 = 
	`GATT_RñübÀWrôes
–
c⁄nH™dÀ
, 
pReqs
, 
numReqs
,

1172 
ATT_WRITE_PREPARED_VALUES
, 
hciExtAµ_TaskID
 );

1173 i‡–
°©
 !
SUCCESS
 )

1175 
	`oßl_mem_‰ì
–
pReqs
 );

1182 
°©
 = 
bÀMemAŒocEº‹
;

1187 
°©
 = 
INVALIDPARAMETER
;

1192 
°©
 = 
ATT_ERR_INVALID_PDU
;

1196 
GATT_READ_CHAR_DESC
:

1197 
°©
 = 
	`ATT_P¨£RódReq
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

1198 i‡–
°©
 =
SUCCESS
 )

1200 
°©
 = 
	`GATT_RódCh¨Desc
–
c⁄nH™dÀ
, &
msg
.
ªadReq
, 
hciExtAµ_TaskID
 );

1204 
GATT_READ_LONG_CHAR_DESC
:

1205 
°©
 = 
	`ATT_P¨£RódBlobReq
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

1206 i‡–
°©
 =
SUCCESS
 )

1208 
°©
 = 
	`GATT_RódL⁄gCh¨Desc
–
c⁄nH™dÀ
, &
msg
.
ªadBlobReq
, 
hciExtAµ_TaskID
 );

1212 
GATT_WRITE_CHAR_DESC
:

1213 
°©
 = 
	`ATT_P¨£WrôeReq
–
FALSE
, FALSE, &
pBuf
[2], 
pCmd
->
Àn
-2, &
msg
 );

1214 i‡–
°©
 =
SUCCESS
 )

1216 
°©
 = 
	`GATT_WrôeCh¨Desc
–
c⁄nH™dÀ
, &
msg
.
wrôeReq
, 
hciExtAµ_TaskID
 );

1220 
ATT_HANDLE_VALUE_NOTI
:

1221 
°©
 = 
	`ATT_P¨£H™dÀVÆueInd
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[3], 
pCmd
->
Àn
-3, &
msg
 );

1222 i‡–
°©
 =
SUCCESS
 )

1224 
°©
 = 
	`GATT_NŸifiˇti⁄
–
c⁄nH™dÀ
, &
msg
.
h™dÀVÆueNŸi
, 
pBuf
[2] );

1228 
ATT_HANDLE_VALUE_IND
:

1229 
°©
 = 
	`ATT_P¨£H™dÀVÆueInd
–
ATT_SIG_NOT_INCLUDED
, 
FALSE
, &
pBuf
[3], 
pCmd
->
Àn
-3, &
msg
 );

1230 i‡–
°©
 =
SUCCESS
 )

1232 
°©
 = 
	`GATT_Indiˇti⁄
–
c⁄nH™dÀ
, &
msg
.
h™dÀVÆueInd
, 
pBuf
[2], 
hciExtAµ_TaskID
 );

1236 #ifde‡
GATT_DB_OFF_CHIP


1237 
HCI_EXT_GATT_ADD_SERVICE
:

1238 i‡–
£rvi˚
.
©ås
 =
NULL
 )

1241 i‡–
pCmd
->
Àn
-2 =
ATT_BT_UUID_SIZE
 )

1243 
uöt16
 
uuid
 = 
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] );

1244 
uöt16
 
numAârs
 = 
	`BUILD_UINT16
–
pBuf
[2],ÖBuf[3] );

1246 i‡–––
uuid
 =
GATT_PRIMARY_SERVICE_UUID
 ) ||

1247 –
uuid
 =
GATT_SECONDARY_SERVICE_UUID
 ) ) &&

1248 –
numAârs
 > 0 ) )

1251 
£rvi˚
.
©ås
 = 
	`oßl_mem_Æloc
–
numAârs
 * –
g©tAâribuã_t
 ) );

1252 i‡–
£rvi˚
.
©ås
 !
NULL
 )

1255 
VOID
 
	`oßl_mem£t
–
£rvi˚
.
©ås
, 0, 
numAârs
 * –
g©tAâribuã_t
 ) );

1257 
tŸÆAârs
 = 
numAârs
;

1260 
°©
 = 
	`addAârRec
–&
£rvi˚
, 
pBuf
, 
ATT_BT_UUID_SIZE
,

1261 
GATT_PERMIT_READ
, &
tŸÆAârs
, 
pR•D©aLí
 );

1265 
°©
 = 
bÀMemAŒocEº‹
;

1270 
°©
 = 
INVALIDPARAMETER
;

1275 
°©
 = 
ATT_ERR_INVALID_PDU
;

1280 
°©
 = 
bÀPídög
;

1284 
HCI_EXT_GATT_DEL_SERVICE
:

1286 
uöt16
 
h™dÀ
 = 
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] );

1288 i‡–
h™dÀ
 == 0x0000 )

1291 
	`‰ìAârRecs
–&
£rvi˚
 );

1293 
tŸÆAârs
 = 0;

1297 
g©tSîvi˚_t
 
£rv
;

1300 
°©
 = 
	`GATT_Dîegi°îSîvi˚
–
h™dÀ
, &
£rv
 );

1301 i‡–
°©
 =
SUCCESS
 )

1303 
	`‰ìAârRecs
–&
£rv
 );

1309 
HCI_EXT_GATT_ADD_ATTRIBUTE
:

1310 i‡–
£rvi˚
.
©ås
 !
NULL
 )

1312 i‡––
pCmd
->
Àn
-1 =
ATT_UUID_SIZE
 ) ||

1313 –
pCmd
->
Àn
-1 =
ATT_BT_UUID_SIZE
 ) )

1316 
°©
 = 
	`addAârRec
–&
£rvi˚
, 
pBuf
, 
pCmd
->
Àn
-1,

1317 
pBuf
[
pCmd
->
Àn
-1], &
tŸÆAârs
, 
pR•D©aLí
 );

1321 
°©
 = 
ATT_ERR_INVALID_PDU
;

1326 
°©
 = 
INVALIDPARAMETER
;

1332 
°©
 = 
FAILURE
;

1336  ( 
	`m≠ATT2BLESètus
–
°©
 ) );

1337 
	}
}

1351 
uöt8
 
	$¥o˚ssExMsgGAP
–
uöt8
 
cmdID
, 
hciExtCmd_t
 *
pCmd
, uöt8 *
pR•D©aLí
 )

1353 
uöt8
 *
pBuf
 = 
pCmd
->
pD©a
;

1354 
bSètus_t
 
°©
 = 
SUCCESS
;

1356  
cmdID
 )

1358 
HCI_EXT_GAP_DEVICE_INIT
:

1360 
uöt32
 
signCou¡î
;

1361 
uöt8
 
¥ofûeRﬁe
 = 
pBuf
[0];

1363 #i‡
	`deföed
 ( 
GAP_BOND_MGR
 )

1364 
hciExtProfûeRﬁe
 = 
¥ofûeRﬁe
;

1369 i‡–
	`oßl_isbuf£t
–&
pBuf
[2], 0, 
KEYLEN
 ) =
FALSE
 )

1371 
VOID
 
	`oßl_mem˝y
–
IRK
, &
pBuf
[2], 
KEYLEN
 );

1374 i‡–
	`oßl_isbuf£t
–&
pBuf
[2+
KEYLEN
], 0, KEYLEN ) =
FALSE
 )

1376 
VOID
 
	`oßl_mem˝y
–
SRK
, &
pBuf
[2+
KEYLEN
], KEYLEN );

1379 
signCou¡î
 = 
	`BUILD_UINT32
–
pBuf
[2+
KEYLEN
+KEYLEN+0],ÖBuf[2+KEYLEN+KEYLEN+1],

1380 
pBuf
[2+
KEYLEN
+KEYLEN+2],ÖBuf[2+KEYLEN+KEYLEN+3] );

1381 i‡–
signCou¡î
 > 0 )

1383 
hciExtSignCou¡î
 = 
signCou¡î
;

1386 
°©
 = 
	`GAP_Devi˚Inô
–
hciExtAµ_TaskID
, 
¥ofûeRﬁe
, 
pBuf
[1], 
IRK
, 
SRK
, &
hciExtSignCou¡î
 );

1389 
VOID
 
	`GAP_SëP¨amVÆue
–
TGAP_AUTH_TASK_ID
, 
hciExtAµ_TaskID
 );

1393 
HCI_EXT_GAP_CONFIG_DEVICE_ADDR
:

1395 
uöt8
 *
pSèticAddr
 = 
NULL
;

1396 
uöt8
 
nuŒAddr
[
B_ADDR_LEN
] = {0};

1398 i‡–
	`oßl_memcmp
–&
pBuf
[1], 
nuŒAddr
, 
B_ADDR_LEN
 ) !
TRUE
 )

1400 
pSèticAddr
 = &
pBuf
[1];

1403 
°©
 = 
	`GAP_C⁄figDevi˚Addr
–
pBuf
[0], 
pSèticAddr
 );

1407 #i‡–
HOST_CONFIG
 & ( 
CENTRAL_CFG
 | 
OBSERVER_CFG
 ) )

1408 
HCI_EXT_GAP_DEVICE_DISC_REQ
:

1410 
g≠DevDiscReq_t
 
discReq
;

1412 
discReq
.
èskID
 = 
hciExtAµ_TaskID
;

1413 
discReq
.
mode
 = *
pBuf
++;

1414 
discReq
.
a˘iveSˇn
 = *
pBuf
++;

1415 
discReq
.
whôeLi°
 = *
pBuf
;

1417 
°©
 = 
	`GAP_Devi˚DiscovîyReque°
–&
discReq
 );

1421 
HCI_EXT_GAP_DEVICE_DISC_CANCEL
:

1422 
°©
 = 
	`GAP_Devi˚DiscovîyC™˚l
–
hciExtAµ_TaskID
 );

1426 #i‡–
HOST_CONFIG
 & 
CENTRAL_CFG
 )

1427 
HCI_EXT_GAP_EST_LINK_REQ
:

1429 
g≠E°LökReq_t
 
lökReq
;

1431 
lökReq
.
èskID
 = 
hciExtAµ_TaskID
;

1432 
lökReq
.
highDutyCy˛e
 = *
pBuf
++;

1433 
lökReq
.
whôeLi°
 = *
pBuf
++;

1434 
lökReq
.
addrTy≥Pìr
 = *
pBuf
++;

1435 
VOID
 
	`oßl_mem˝y
–
lökReq
.
≥îAddr
, 
pBuf
, 
B_ADDR_LEN
 );

1437 
°©
 = 
	`GAP_E°ablishLökReq
–&
lökReq
 );

1441 
HCI_EXT_GAP_UPDATE_LINK_PARAM_REQ
:

1443 
g≠Upd©eLökP¨amReq_t
 
upd©eLökReq
;

1445 
upd©eLökReq
.
c⁄√˘i⁄H™dÀ
 = 
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] );

1446 
pBuf
 += 2;

1447 
upd©eLökReq
.
öãrvÆMö
 = 
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] );

1448 
pBuf
 += 2;

1449 
upd©eLökReq
.
öãrvÆMax
 = 
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] );

1450 
pBuf
 += 2;

1451 
upd©eLökReq
.
c⁄nL©ícy
 = 
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] );

1452 
pBuf
 += 2;

1453 
upd©eLökReq
.
c⁄nTimeout
 = 
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] );

1455 
°©
 = 
	`GAP_Upd©eLökP¨amReq
–&
upd©eLökReq
 );

1460 
HCI_EXT_GAP_TERMINATE_LINK
:

1461 
°©
 = 
	`GAP_Tîmö©eLökReq
–
hciExtAµ_TaskID
, 
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] ),ÖBuf[2] );

1464 #i‡–
HOST_CONFIG
 & ( 
PERIPHERAL_CFG
 | 
BROADCASTER_CFG
 ) )

1465 
HCI_EXT_GAP_MAKE_DISCOVERABLE
:

1467 
g≠AdvîtisögP¨ams_t
 
adP¨ams
;

1469 
adP¨ams
.
evítTy≥
 = *
pBuf
++;

1470 
adP¨ams
.
öôüt‹AddrTy≥
 = *
pBuf
++;

1471 
VOID
 
	`oßl_mem˝y
–
adP¨ams
.
öôüt‹Addr
, 
pBuf
, 
B_ADDR_LEN
 );

1472 
pBuf
 +
B_ADDR_LEN
;

1473 
adP¨ams
.
ch™√lM≠
 = *
pBuf
++;

1474 
adP¨ams
.
fûãrPﬁicy
 = *
pBuf
;

1475 
°©
 = 
	`GAP_MakeDiscovîabÀ
–
hciExtAµ_TaskID
, &
adP¨ams
 );

1479 
HCI_EXT_GAP_UPDATE_ADV_DATA
:

1480 
°©
 = 
	`GAP_Upd©eAdvîtisögD©a
–
hciExtAµ_TaskID
, 
pBuf
[0],ÖBuf[1], &pBuf[2] );

1483 
HCI_EXT_GAP_END_DISC
:

1484 
°©
 = 
	`GAP_EndDiscovîabÀ
–
hciExtAµ_TaskID
 );

1488 
HCI_EXT_GAP_AUTHENTICATE
:

1490 
uöt8
 
tmp
;

1491 
g≠AuthP¨ams_t
 
∑øms
;

1492 
g≠PaúögReq_t
 
∑úReq
;

1493 
g≠PaúögReq_t
 *
pPaúReq
 = 
NULL
;

1495 #i‡–
OSALMEM_METRICS
 )

1496 
uöt16
 
memU£d
 = 
	`oßl_hóp_mem_u£d
();

1499 
VOID
 
	`oßl_mem£t
–&
∑øms
, 0,  ( 
g≠AuthP¨ams_t
 ) );

1501 
∑øms
.
c⁄√˘i⁄H™dÀ
 = 
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] );

1502 
pBuf
 += 2;

1504 
∑øms
.
£cReqs
.
ioC≠s
 = *
pBuf
++;

1505 
∑øms
.
£cReqs
.
oobAvaûabÀ
 = *
pBuf
++;

1506 
VOID
 
	`oßl_mem˝y
–
∑øms
.
£cReqs
.
oob
, 
pBuf
, 
KEYLEN
 );

1507 
pBuf
 +
KEYLEN
;

1508 
∑øms
.
£cReqs
.
authReq
 = *
pBuf
++;

1509 
∑øms
.
£cReqs
.
maxEncKeySize
 = *
pBuf
++;

1511 
tmp
 = *
pBuf
++;

1512 
∑øms
.
£cReqs
.
keyDi°
.
sEncKey
 = ( 
tmp
 & 
KEYDIST_SENC
 ) ? 
TRUE
 : 
FALSE
;

1513 
∑øms
.
£cReqs
.
keyDi°
.
sIdKey
 = ( 
tmp
 & 
KEYDIST_SID
 ) ? 
TRUE
 : 
FALSE
;

1514 
∑øms
.
£cReqs
.
keyDi°
.
sSign
 = ( 
tmp
 & 
KEYDIST_SSIGN
 ) ? 
TRUE
 : 
FALSE
;

1515 
∑øms
.
£cReqs
.
keyDi°
.
mEncKey
 = ( 
tmp
 & 
KEYDIST_MENC
 ) ? 
TRUE
 : 
FALSE
;

1516 
∑øms
.
£cReqs
.
keyDi°
.
mIdKey
 = ( 
tmp
 & 
KEYDIST_MID
 ) ? 
TRUE
 : 
FALSE
;

1517 
∑øms
.
£cReqs
.
keyDi°
.
mSign
 = ( 
tmp
 & 
KEYDIST_MSIGN
 ) ? 
TRUE
 : 
FALSE
;

1518 
∑øms
.
£cReqs
.
keyDi°
.
ª£rved
 = 0;

1520 
tmp
 = *
pBuf
++;

1521 i‡–
tmp
 )

1523 
∑úReq
.
ioC≠
 = *
pBuf
++;

1524 
∑úReq
.
oobD©aFœg
 = *
pBuf
++;

1525 
∑úReq
.
authReq
 = *
pBuf
++;

1526 
∑úReq
.
maxEncKeySize
 = *
pBuf
++;

1527 
tmp
 = *
pBuf
++;

1528 
∑úReq
.
keyDi°
.
sEncKey
 = ( 
tmp
 & 
KEYDIST_SENC
 ) ? 
TRUE
 : 
FALSE
;

1529 
∑úReq
.
keyDi°
.
sIdKey
 = ( 
tmp
 & 
KEYDIST_SID
 ) ? 
TRUE
 : 
FALSE
;

1530 
∑úReq
.
keyDi°
.
sSign
 = ( 
tmp
 & 
KEYDIST_SSIGN
 ) ? 
TRUE
 : 
FALSE
;

1531 
∑úReq
.
keyDi°
.
mEncKey
 = ( 
tmp
 & 
KEYDIST_MENC
 ) ? 
TRUE
 : 
FALSE
;

1532 
∑úReq
.
keyDi°
.
mIdKey
 = ( 
tmp
 & 
KEYDIST_MID
 ) ? 
TRUE
 : 
FALSE
;

1533 
∑úReq
.
keyDi°
.
mSign
 = ( 
tmp
 & 
KEYDIST_MSIGN
 ) ? 
TRUE
 : 
FALSE
;

1534 
∑úReq
.
keyDi°
.
ª£rved
 = 0;

1535 
pPaúReq
 = &
∑úReq
;

1538 
°©
 = 
	`GAP_Authítiˇã
–&
∑øms
, 
pPaúReq
 );

1540 #i‡–
OSALMEM_METRICS
 )

1541 *
pR•D©aLí
 = 2;

1542 
r•Buf
[
RSP_PAYLOAD_IDX
] = 
	`LO_UINT16
–
memU£d
 );

1543 
r•Buf
[
RSP_PAYLOAD_IDX
+1] = 
	`HI_UINT16
–
memU£d
 );

1548 
HCI_EXT_GAP_TERMINATE_AUTH
:

1549 
°©
 = 
	`GAP_Tîmö©eAuth
–
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] ),ÖBuf[2] );

1552 
HCI_EXT_GAP_BOND
:

1554 
uöt16
 
c⁄√˘i⁄H™dÀ
;

1555 
smSecurôyInfo_t
 
£curôyInfo
;

1556 
uöt8
 
authítiˇãd
;

1559 
c⁄√˘i⁄H™dÀ
 = 
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] );

1560 
pBuf
 += 2;

1561 
authítiˇãd
 = *
pBuf
++;

1562 
VOID
 
	`oßl_mem˝y
–
£curôyInfo
.
…k
, 
pBuf
, 
KEYLEN
 );

1563 
pBuf
 +
KEYLEN
;

1564 
£curôyInfo
.
div
 = 
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] );

1565 
pBuf
 += 2;

1566 
VOID
 
	`oßl_mem˝y
–
£curôyInfo
.
ønd
, 
pBuf
, 
B_RANDOM_NUM_SIZE
 );

1567 
pBuf
 +
B_RANDOM_NUM_SIZE
;

1568 
£curôyInfo
.
keySize
 = *
pBuf
++;

1570 
°©
 = 
	`GAP_B⁄d
–
c⁄√˘i⁄H™dÀ
, 
authítiˇãd
, &
£curôyInfo
, 
TRUE
 );

1574 
HCI_EXT_GAP_SIGNABLE
:

1576 
uöt16
 
c⁄√˘i⁄H™dÀ
;

1577 
uöt8
 
authítiˇãd
;

1578 
smSignögInfo_t
 
signög
;

1580 
c⁄√˘i⁄H™dÀ
 = 
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] );

1581 
pBuf
 += 2;

1583 
authítiˇãd
 = *
pBuf
++;

1585 
VOID
 
	`oßl_mem˝y
–
signög
.
§k
, 
pBuf
, 
KEYLEN
 );

1586 
pBuf
 +
KEYLEN
;

1588 
signög
.
signCou¡î
 = 
	`BUILD_UINT32
–
pBuf
[0],ÖBuf[1],ÖBuf[2],ÖBuf[3] );

1590 
°©
 = 
	`GAP_Sig«bÀ
–
c⁄√˘i⁄H™dÀ
, 
authítiˇãd
, &
signög
 );

1594 
HCI_EXT_GAP_PASSKEY_UPDATE
:

1595 
°©
 = 
	`GAP_PasskeyUpd©e
–&
pBuf
[2], 
	`BUILD_UINT16
(ÖBuf[0],ÖBuf[1] ) );

1598 
HCI_EXT_GAP_SET_PARAM
:

1600 
uöt16
 
id
 = (uöt16)
pBuf
[0];

1601 
uöt16
 
vÆue
 = 
	`BUILD_UINT16
–
pBuf
[1],ÖBuf[2] );

1603 i‡––
id
 !
TGAP_AUTH_TASK_ID
 ) && ( id < 
TGAP_PARAMID_MAX
 ) )

1605 
°©
 = 
	`GAP_SëP¨amVÆue
–
id
, 
vÆue
 );

1607 #i‡!
	`deföed
 ( 
GATT_DB_OFF_CHIP
 ) && deföed ( 
TESTMODES
 )

1608 i‡–
id
 =
TGAP_GATT_TESTCODE
 )

1610 
	`GATTSîvAµ_SëP¨amVÆue
–
vÆue
 );

1612 i‡–
id
 =
TGAP_ATT_TESTCODE
 )

1614 
	`ATT_SëP¨amVÆue
–
vÆue
 );

1616 i‡–
id
 =
TGAP_GGS_TESTCODE
 )

1618 
	`GGS_SëP¨amVÆue
–
vÆue
 );

1623 
°©
 = 
INVALIDPARAMETER
;

1628 
HCI_EXT_GAP_GET_PARAM
:

1630 
uöt16
 
∑ømVÆue
 = 0xFFFF;

1631 
uöt16
 
∑øm
 = (uöt16)
pBuf
[0];

1633 i‡–
∑øm
 < 0x00FF )

1635 i‡––
∑øm
 !
TGAP_AUTH_TASK_ID
 ) && (Ö¨am < 
TGAP_PARAMID_MAX
 ) )

1637 
∑ømVÆue
 = 
	`GAP_GëP¨amVÆue
–
∑øm
 );

1639 #i‡!
	`deföed
 ( 
GATT_DB_OFF_CHIP
 ) && deföed ( 
TESTMODES
 )

1640 i‡–
∑øm
 =
TGAP_GATT_TESTCODE
 )

1642 
∑ømVÆue
 = 
	`GATTSîvAµ_GëP¨amVÆue
();

1644 i‡–
∑øm
 =
TGAP_ATT_TESTCODE
 )

1646 
∑ømVÆue
 = 
	`ATT_GëP¨amVÆue
();

1648 i‡–
∑øm
 =
TGAP_GGS_TESTCODE
 )

1650 
∑ømVÆue
 = 
	`GGS_GëP¨amVÆue
();

1654 #i‡–
OSALMEM_METRICS
 )

1657 
∑ømVÆue
 = 
	`oßl_hóp_mem_u£d
();

1660 i‡–
∑ømVÆue
 != 0xFFFF )

1662 
°©
 = 
SUCCESS
;

1666 
°©
 = 
INVALIDPARAMETER
;

1668 *
pR•D©aLí
 = 2;

1669 
r•Buf
[
RSP_PAYLOAD_IDX
] = 
	`LO_UINT16
–
∑ømVÆue
 );

1670 
r•Buf
[
RSP_PAYLOAD_IDX
+1] = 
	`HI_UINT16
–
∑ømVÆue
 );

1674 
HCI_EXT_GAP_RESOLVE_PRIVATE_ADDR
:

1676 
°©
 = 
	`GAP_ResﬁvePriv©eAddr
–&
pBuf
[0], &pBuf[
KEYLEN
] );

1680 #i‡–
HOST_CONFIG
 & 
PERIPHERAL_CFG
 )

1681 
HCI_EXT_GAP_SLAVE_SECURITY_REQ_UPDATE
:

1682 
°©
 = 
	`GAP_SídSœveSecurôyReque°
–
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] ),ÖBuf[2] );

1686 #i‡–
HOST_CONFIG
 & ( 
PERIPHERAL_CFG
 | 
BROADCASTER_CFG
 ) )

1687 
HCI_EXT_GAP_SET_ADV_TOKEN
:

1689 
g≠AdvD©aTokí_t
 *
pTokí
;

1690 
uöt8
 
©åLí
 = 
pBuf
[1];

1692 
pTokí
 = (
g≠AdvD©aTokí_t
 *)
	`oßl_mem_Æloc
– ( g≠AdvD©aTokí_àË+ 
©åLí
 );

1693 i‡–
pTokí
 )

1695 
pTokí
->
adTy≥
 = 
pBuf
[0];

1696 
pTokí
->
©åLí
 =attrLen;

1697 
pTokí
->
pAârD©a
 = (
uöt8
 *)(pToken+1);

1699 
VOID
 
	`oßl_mem˝y
–
pTokí
->
pAârD©a
, &
pBuf
[2], 
©åLí
 );

1700 
°©
 = 
	`GAP_SëAdvTokí
–
pTokí
 );

1701 i‡–
°©
 !
SUCCESS
 )

1703 
	`oßl_mem_‰ì
–
pTokí
 );

1708 
°©
 = 
bÀMemAŒocEº‹
;

1713 
HCI_EXT_GAP_REMOVE_ADV_TOKEN
:

1715 
g≠AdvD©aTokí_t
 *
pTokí
 = 
	`GAP_RemoveAdvTokí
–
pBuf
[0] );

1716 i‡–
pTokí
 )

1718 
	`oßl_mem_‰ì
–
pTokí
 );

1719 
°©
 = 
SUCCESS
;

1723 
°©
 = 
INVALIDPARAMETER
;

1728 
HCI_EXT_GAP_UPDATE_ADV_TOKENS
:

1730 
°©
 = 
	`GAP_Upd©eAdvTokís
();

1735 
HCI_EXT_GAP_BOND_SET_PARAM
:

1737 #i‡
	`deföed
 ( 
GAP_BOND_MGR
 )

1738 
uöt16
 
id
 = 
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] );

1739 
uöt8
 *
pVÆue
;

1740 
uöt32
 
∑sscode
;

1742  
id
 )

1744 
GAPBOND_DEFAULT_PASSCODE
:

1746 
∑sscode
 = 
	`oßl_buûd_uöt32
–&
pBuf
[3],ÖBuf[2] );

1747 
pVÆue
 = (
uöt8
 *)&
∑sscode
;

1751 
pVÆue
 = &
pBuf
[3];

1755 i‡–
°©
 =
SUCCESS
 )

1757 
°©
 = 
	`GAPB⁄dMgr_SëP¨amëî
–
id
, 
pBuf
[2], 
pVÆue
 );

1760 
°©
 = 
INVALIDPARAMETER
;

1765 
HCI_EXT_GAP_BOND_GET_PARAM
:

1767 
uöt8
 
Àn
 = 0;

1768 #i‡
	`deföed
 ( 
GAP_BOND_MGR
 )

1769 
uöt16
 
id
 = 
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] );

1771 
°©
 = 
	`GAPB⁄dMgr_GëP¨amëî
–
id
, &
r•Buf
[
RSP_PAYLOAD_IDX
] );

1773  
id
 )

1775 
GAPBOND_INITIATE_WAIT
:

1776 
Àn
 = 2;

1779 
GAPBOND_OOB_DATA
:

1780 
Àn
 = 
KEYLEN
;

1783 
GAPBOND_DEFAULT_PASSCODE
:

1784 
Àn
 = 4;

1788 
Àn
 = 1;

1792 
°©
 = 
INVALIDPARAMETER
;

1794 *
pR•D©aLí
 = 
Àn
;

1798 
HCI_EXT_GAP_BOND_SERVICE_CHANGE
:

1800 #i‡
	`deföed
 ( 
GAP_BOND_MGR
 )

1801 
°©
 = 
	`GAPB⁄dMgr_Sîvi˚Ch™geInd
–
	`BUILD_UINT16
–
pBuf
[0],ÖBuf[1] ),ÖBuf[2] );

1803 
°©
 = 
INVALIDPARAMETER
;

1809 
°©
 = 
FAILURE
;

1813  ( 
°©
 );

1814 
	}
}

1825 
uöt8
 
	$¥o˚ssEvíts
–
oßl_evít_hdr_t
 *
pMsg
 )

1827 
uöt8
 
msgLí
 = 0;

1828 
uöt8
 *
pBuf
 = 
NULL
;

1829 
uöt8
 
Æloˇãd
 = 
FALSE
;

1830 
uöt8
 
dóŒoˇãIncomög
 = 
TRUE
;

1832 
VOID
 
	`oßl_mem£t
–
out_msg
, 0,  ( out_msg ) );

1834  
pMsg
->
evít
 )

1836 
GAP_MSG_EVENT
:

1837 
pBuf
 = 
	`¥o˚ssEvítsGAP
–(
g≠EvítHdr_t
 *)
pMsg
, 
out_msg
, &
msgLí
, &
Æloˇãd
, &
dóŒoˇãIncomög
 );

1840 
L2CAP_SIGNAL_EVENT
:

1841 
pBuf
 = 
	`¥o˚ssEvítsL2CAP
–(
l2ˇpSig«lEvít_t
 *)
pMsg
, 
out_msg
, &
msgLí
 );

1844 
GATT_MSG_EVENT
:

1845 
pBuf
 = 
	`¥o˚ssEvítsGATT
–(
g©tMsgEvít_t
 *)
pMsg
, 
out_msg
, &
msgLí
, &
Æloˇãd
 );

1847 #i‚de‡
GATT_DB_OFF_CHIP


1848 
GATT_SERV_MSG_EVENT
:

1849 
pBuf
 = 
	`¥o˚ssEvítsGATTSîv
–(
g©tEvítHdr_t
 *)
pMsg
, 
out_msg
, &
msgLí
 );

1857 i‡–
dóŒoˇãIncomög
 )

1859 
VOID
 
	`oßl_msg_dóŒoˇã
–(
uöt8
 *)
pMsg
 );

1862 i‡–
msgLí
 )

1864 
	`HCI_SídC⁄åﬁÀrToHo°Evít
–
HCI_VE_EVENT_CODE
, 
msgLí
, 
pBuf
 );

1867 i‡–(
pBuf
 !
NULL
Ë&& (
Æloˇãd
 =
TRUE
) )

1869 
	`oßl_mem_‰ì
–
pBuf
 );

1872  ( 
FALSE
 );

1873 
	}
}

1888 
uöt8
 *
	$¥o˚ssEvítsGAP
–
g≠EvítHdr_t
 *
pMsg
, 
uöt8
 *
pOutMsg
, uöt8 *
pMsgLí
,

1889 
uöt8
 *
pAŒoˇãd
, uöt8 *
pDóŒoˇã
 )

1891 
uöt8
 
msgLí
 = 0;

1892 
uöt8
 *
pBuf
 = 
NULL
;

1894 *
pDóŒoˇã
 = 
TRUE
;

1896  
pMsg
->
›code
 )

1898 
GAP_DEVICE_INIT_DONE_EVENT
:

1900 
g≠Devi˚InôD⁄eEvít_t
 *
pPkt
 = (g≠Devi˚InôD⁄eEvít_à*)
pMsg
;

1902 
pOutMsg
[0] = 
	`LO_UINT16
–
HCI_EXT_GAP_DEVICE_INIT_DONE_EVENT
 );

1903 
pOutMsg
[1] = 
	`HI_UINT16
–
HCI_EXT_GAP_DEVICE_INIT_DONE_EVENT
 );

1904 
pOutMsg
[2] = 
pPkt
->
hdr
.
°©us
;

1905 
VOID
 
	`oßl_mem˝y
–&
pOutMsg
[3], 
pPkt
->
devAddr
, 
B_ADDR_LEN
 );

1906 
pOutMsg
[9] = 
	`LO_UINT16
–
pPkt
->
d©aPktLí
 );

1907 
pOutMsg
[10] = 
	`HI_UINT16
–
pPkt
->
d©aPktLí
 );

1908 
pOutMsg
[11] = 
pPkt
->
numD©aPkts
;

1911 
VOID
 
	`oßl_mem˝y
–&
pOutMsg
[12], 
IRK
, 
KEYLEN
 );

1912 
VOID
 
	`oßl_mem˝y
–&
pOutMsg
[12+
KEYLEN
], 
SRK
, KEYLEN );

1914 i‡–
pPkt
->
hdr
.
°©us
 =
SUCCESS
 )

1916 
VOID
 
	`oßl_¢v_wrôe
–
BLE_NVID_IRK
, 
KEYLEN
, 
IRK
 );

1917 
VOID
 
	`oßl_¢v_wrôe
–
BLE_NVID_CSRK
, 
KEYLEN
, 
SRK
 );

1918 
VOID
 
	`oßl_¢v_wrôe
–
BLE_NVID_SIGNCOUNTER
, –
uöt32
 ), &
hciExtSignCou¡î
 );

1921 
pBuf
 = 
pOutMsg
;

1922 
msgLí
 = 44;

1926 
GAP_DEVICE_DISCOVERY_EVENT
:

1928 
g≠DevDiscEvít_t
 *
pPkt
 = (g≠DevDiscEvít_à*)
pMsg
;

1930 i‡–(
pPkt
->
hdr
.
°©us
 =
SUCCESS
Ë&& (pPkt->
numDevs
 > 0) )

1932 
uöt8
 
x
;

1933 
g≠DevRec_t
 *
devLi°
 = 
pPkt
->
pDevLi°
;

1936 
msgLí
 = 4;

1937 
msgLí
 +(
pPkt
->
numDevs
 * 8);

1939 
pBuf
 = 
	`oßl_mem_Æloc
–
msgLí
 );

1940 i‡–
pBuf
 )

1942 
uöt8
 *
buf
 = 
pBuf
;

1945 *
buf
++ = 
	`LO_UINT16
–
HCI_EXT_GAP_DEVICE_DISCOVERY_EVENT
 );

1946 *
buf
++ = 
	`HI_UINT16
–
HCI_EXT_GAP_DEVICE_DISCOVERY_EVENT
 );

1947 *
buf
++ = 
pPkt
->
hdr
.
°©us
;

1948 *
buf
++ = 
pPkt
->
numDevs
;

1950 
devLi°
 = 
pPkt
->
pDevLi°
;

1951  
x
 = 0; x < 
pPkt
->
numDevs
; x++, 
devLi°
++ )

1953 *
buf
++ = 
devLi°
->
evítTy≥
;

1954 *
buf
++ = 
devLi°
->
addrTy≥
;

1955 
VOID
 
	`oßl_mem˝y
–
buf
, 
devLi°
->
addr
, 
B_ADDR_LEN
 );

1956 
buf
 +
B_ADDR_LEN
;

1959 *
pAŒoˇãd
 = 
TRUE
;

1963 
pPkt
->
hdr
.
°©us
 = 
bÀMemAŒocEº‹
;

1967 i‡–(
pPkt
->
hdr
.
°©us
 !
SUCCESS
Ë|| (pPkt->
numDevs
 == 0) )

1969 
pOutMsg
[0] = 
	`LO_UINT16
–
HCI_EXT_GAP_DEVICE_DISCOVERY_EVENT
 );

1970 
pOutMsg
[1] = 
	`HI_UINT16
–
HCI_EXT_GAP_DEVICE_DISCOVERY_EVENT
 );

1971 
pOutMsg
[2] = 
pPkt
->
hdr
.
°©us
;

1972 
pOutMsg
[3] = 0;

1973 
pBuf
 = 
pOutMsg
;

1974 
msgLí
 = 4;

1979 
GAP_ADV_DATA_UPDATE_DONE_EVENT
:

1981 
g≠AdvD©aUpd©eEvít_t
 *
pPkt
 = (g≠AdvD©aUpd©eEvít_à*)
pMsg
;

1983 
pOutMsg
[0] = 
	`LO_UINT16
–
HCI_EXT_GAP_ADV_DATA_UPDATE_DONE_EVENT
 );

1984 
pOutMsg
[1] = 
	`HI_UINT16
–
HCI_EXT_GAP_ADV_DATA_UPDATE_DONE_EVENT
 );

1985 
pOutMsg
[2] = 
pPkt
->
hdr
.
°©us
;

1986 
pOutMsg
[3] = 
pPkt
->
adTy≥
;

1987 
pBuf
 = 
pOutMsg
;

1988 
msgLí
 = 4;

1992 
GAP_MAKE_DISCOVERABLE_DONE_EVENT
:

1994 
g≠MakeDiscovîabÀR•Evít_t
 *
pPkt
 = (g≠MakeDiscovîabÀR•Evít_à*)
pMsg
;

1996 
pOutMsg
[0] = 
	`LO_UINT16
–
HCI_EXT_GAP_MAKE_DISCOVERABLE_DONE_EVENT
 );

1997 
pOutMsg
[1] = 
	`HI_UINT16
–
HCI_EXT_GAP_MAKE_DISCOVERABLE_DONE_EVENT
 );

1998 
pOutMsg
[2] = 
pPkt
->
hdr
.
°©us
;

1999 
pOutMsg
[3] = 
	`LO_UINT16
–
pPkt
->
öãrvÆ
 );

2000 
pOutMsg
[4] = 
	`HI_UINT16
–
pPkt
->
öãrvÆ
 );

2001 
pBuf
 = 
pOutMsg
;

2002 
msgLí
 = 5;

2006 
GAP_END_DISCOVERABLE_DONE_EVENT
:

2007 
pOutMsg
[0] = 
	`LO_UINT16
–
HCI_EXT_GAP_END_DISCOVERABLE_DONE_EVENT
 );

2008 
pOutMsg
[1] = 
	`HI_UINT16
–
HCI_EXT_GAP_END_DISCOVERABLE_DONE_EVENT
 );

2009 
pOutMsg
[2] = 
pMsg
->
hdr
.
°©us
;

2010 
pBuf
 = 
pOutMsg
;

2011 
msgLí
 = 3;

2014 
GAP_LINK_ESTABLISHED_EVENT
:

2016 
g≠E°LökReqEvít_t
 *
pPkt
 = (g≠E°LökReqEvít_à*)
pMsg
;

2018 #i‡
	`deföed
 ( 
GAP_BOND_MGR
 )

2019 i‡–
pPkt
->
hdr
.
°©us
 =
SUCCESS
 )

2022 
	`GAPB⁄dMgr_LökE°
–
pPkt
->
devAddrTy≥
,ÖPkt->
devAddr
,ÖPkt->
c⁄√˘i⁄H™dÀ
, 
hciExtProfûeRﬁe
 );

2026 
pOutMsg
[0] = 
	`LO_UINT16
–
HCI_EXT_GAP_LINK_ESTABLISHED_EVENT
 );

2027 
pOutMsg
[1] = 
	`HI_UINT16
–
HCI_EXT_GAP_LINK_ESTABLISHED_EVENT
 );

2028 
pOutMsg
[2] = 
pPkt
->
hdr
.
°©us
;

2029 
pOutMsg
[3] = 
pPkt
->
devAddrTy≥
;

2030 
VOID
 
	`oßl_mem˝y
–&(
pOutMsg
[4]), 
pPkt
->
devAddr
, 
B_ADDR_LEN
 );

2031 
pOutMsg
[10] = 
	`LO_UINT16
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

2032 
pOutMsg
[11] = 
	`HI_UINT16
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

2033 
pOutMsg
[12] = 
	`LO_UINT16
–
pPkt
->
c⁄nI¡îvÆ
 );

2034 
pOutMsg
[13] = 
	`HI_UINT16
–
pPkt
->
c⁄nI¡îvÆ
 );

2035 
pOutMsg
[14] = 
	`LO_UINT16
–
pPkt
->
c⁄nL©ícy
 );

2036 
pOutMsg
[15] = 
	`HI_UINT16
–
pPkt
->
c⁄nL©ícy
 );

2037 
pOutMsg
[16] = 
	`LO_UINT16
–
pPkt
->
c⁄nTimeout
 );

2038 
pOutMsg
[17] = 
	`HI_UINT16
–
pPkt
->
c⁄nTimeout
 );

2039 
pOutMsg
[18] = 
pPkt
->
˛ockAccuøcy
;

2040 
pBuf
 = 
pOutMsg
;

2041 
msgLí
 = 19;

2045 
GAP_LINK_TERMINATED_EVENT
:

2047 
g≠Tîmö©eLökEvít_t
 *
pPkt
 = (g≠Tîmö©eLökEvít_à*)
pMsg
;

2049 #i‡
	`deföed
 ( 
GAP_BOND_MGR
 )

2050 
VOID
 
	`GAPB⁄dMgr_Pro˚ssGAPMsg
–(
g≠EvítHdr_t
 *)
pMsg
 );

2053 
pOutMsg
[0] = 
	`LO_UINT16
–
HCI_EXT_GAP_LINK_TERMINATED_EVENT
 );

2054 
pOutMsg
[1] = 
	`HI_UINT16
–
HCI_EXT_GAP_LINK_TERMINATED_EVENT
 );

2055 
pOutMsg
[2] = 
pPkt
->
hdr
.
°©us
;

2056 
pOutMsg
[3] = 
	`LO_UINT16
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

2057 
pOutMsg
[4] = 
	`HI_UINT16
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

2058 
pOutMsg
[5] = 
pPkt
->
ªas⁄
;

2059 
pBuf
 = 
pOutMsg
;

2060 
msgLí
 = 6;

2064 
GAP_LINK_PARAM_UPDATE_EVENT
:

2066 
g≠LökUpd©eEvít_t
 *
pPkt
 = (g≠LökUpd©eEvít_à*)
pMsg
;

2068 
pOutMsg
[0] = 
	`LO_UINT16
–
HCI_EXT_GAP_LINK_PARAM_UPDATE_EVENT
 );

2069 
pOutMsg
[1] = 
	`HI_UINT16
–
HCI_EXT_GAP_LINK_PARAM_UPDATE_EVENT
 );

2070 
pOutMsg
[2] = 
pPkt
->
hdr
.
°©us
;

2071 
pOutMsg
[3] = 
	`LO_UINT16
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

2072 
pOutMsg
[4] = 
	`HI_UINT16
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

2073 
pOutMsg
[5] = 
	`LO_UINT16
–
pPkt
->
c⁄nI¡îvÆ
 );

2074 
pOutMsg
[6] = 
	`HI_UINT16
–
pPkt
->
c⁄nI¡îvÆ
 );

2075 
pOutMsg
[7] = 
	`LO_UINT16
–
pPkt
->
c⁄nL©ícy
 );

2076 
pOutMsg
[8] = 
	`HI_UINT16
–
pPkt
->
c⁄nL©ícy
 );

2077 
pOutMsg
[9] = 
	`LO_UINT16
–
pPkt
->
c⁄nTimeout
 );

2078 
pOutMsg
[10] = 
	`HI_UINT16
–
pPkt
->
c⁄nTimeout
 );

2079 
pBuf
 = 
pOutMsg
;

2080 
msgLí
 = 11;

2084 
GAP_RANDOM_ADDR_CHANGED_EVENT
:

2086 
g≠R™domAddrEvít_t
 *
pPkt
 = (g≠R™domAddrEvít_à*)
pMsg
;

2088 
pOutMsg
[0] = 
	`LO_UINT16
–
HCI_EXT_GAP_RANDOM_ADDR_CHANGED_EVENT
 );

2089 
pOutMsg
[1] = 
	`HI_UINT16
–
HCI_EXT_GAP_RANDOM_ADDR_CHANGED_EVENT
 );

2090 
pOutMsg
[2] = 
pPkt
->
hdr
.
°©us
;

2091 
pOutMsg
[3] = 
pPkt
->
addrTy≥
;

2092 
VOID
 
	`oßl_mem˝y
–&(
pOutMsg
[4]), 
pPkt
->
√wR™domAddr
, 
B_ADDR_LEN
 );

2093 
pBuf
 = 
pOutMsg
;

2094 
msgLí
 = 10;

2098 
GAP_SIGNATURE_UPDATED_EVENT
:

2100 
g≠SignUpd©eEvít_t
 *
pPkt
 = (g≠SignUpd©eEvít_à*)
pMsg
;

2102 #i‡
	`deföed
 ( 
GAP_BOND_MGR
 )

2103 
VOID
 
	`GAPB⁄dMgr_Pro˚ssGAPMsg
–(
g≠EvítHdr_t
 *)
pMsg
 );

2106 
pOutMsg
[0] = 
	`LO_UINT16
–
HCI_EXT_GAP_SIGNATURE_UPDATED_EVENT
 );

2107 
pOutMsg
[1] = 
	`HI_UINT16
–
HCI_EXT_GAP_SIGNATURE_UPDATED_EVENT
 );

2108 
pOutMsg
[2] = 
pPkt
->
hdr
.
°©us
;

2109 
pOutMsg
[3] = 
pPkt
->
addrTy≥
;

2110 
VOID
 
	`oßl_mem˝y
–&(
pOutMsg
[4]), 
pPkt
->
devAddr
, 
B_ADDR_LEN
 );

2111 
pOutMsg
[10] = 
	`BREAK_UINT32
–
pPkt
->
signCou¡î
, 0 );

2112 
pOutMsg
[11] = 
	`BREAK_UINT32
–
pPkt
->
signCou¡î
, 1 );

2113 
pOutMsg
[12] = 
	`BREAK_UINT32
–
pPkt
->
signCou¡î
, 2 );

2114 
pOutMsg
[13] = 
	`BREAK_UINT32
–
pPkt
->
signCou¡î
, 3 );

2115 
pBuf
 = 
pOutMsg
;

2116 
msgLí
 = 14;

2120 
GAP_PASSKEY_NEEDED_EVENT
:

2122 
g≠PasskeyNìdedEvít_t
 *
pPkt
 = (g≠PasskeyNìdedEvít_à*)
pMsg
;

2124 #i‡
	`deföed
 ( 
GAP_BOND_MGR
 )

2125 
VOID
 
	`GAPB⁄dMgr_Pro˚ssGAPMsg
–(
g≠EvítHdr_t
 *)
pMsg
 );

2127 
pOutMsg
[0] = 
	`LO_UINT16
–
HCI_EXT_GAP_PASSKEY_NEEDED_EVENT
 );

2128 
pOutMsg
[1] = 
	`HI_UINT16
–
HCI_EXT_GAP_PASSKEY_NEEDED_EVENT
 );

2129 
pOutMsg
[2] = 
pPkt
->
hdr
.
°©us
;

2130 
VOID
 
	`oßl_mem˝y
–&(
pOutMsg
[3]), 
pPkt
->
devi˚Addr
, 
B_ADDR_LEN
 );

2131 
pOutMsg
[9] = 
	`LO_UINT16
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

2132 
pOutMsg
[10] = 
	`HI_UINT16
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

2133 
pOutMsg
[11] = 
pPkt
->
uiI≈uts
;

2134 
pOutMsg
[12] = 
pPkt
->
uiOuçuts
;

2135 
pBuf
 = 
pOutMsg
;

2136 
msgLí
 = 13;

2140 
GAP_AUTHENTICATION_COMPLETE_EVENT
:

2142 
g≠AuthCom∂ëeEvít_t
 *
pPkt
 = (g≠AuthCom∂ëeEvít_à*)
pMsg
;

2144 #i‡
	`deföed
 ( 
GAP_BOND_MGR
 )

2145 *
pDóŒoˇã
 = 
	`GAPB⁄dMgr_Pro˚ssGAPMsg
–(
g≠EvítHdr_t
 *)
pMsg
 );

2148 
msgLí
 = 106;

2150 
pBuf
 = 
	`oßl_mem_Æloc
–
msgLí
 );

2151 i‡–
pBuf
 )

2153 
uöt8
 *
buf
 = 
pBuf
;

2155 *
pAŒoˇãd
 = 
TRUE
;

2157 
VOID
 
	`oßl_mem£t
–
buf
, 0, 
msgLí
 );

2159 *
buf
++ = 
	`LO_UINT16
–
HCI_EXT_GAP_AUTH_COMPLETE_EVENT
 );

2160 *
buf
++ = 
	`HI_UINT16
–
HCI_EXT_GAP_AUTH_COMPLETE_EVENT
 );

2161 *
buf
++ = 
pPkt
->
hdr
.
°©us
;

2162 *
buf
++ = 
	`LO_UINT16
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

2163 *
buf
++ = 
	`HI_UINT16
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

2164 *
buf
++ = 
pPkt
->
authSèã
;

2166 i‡–
pPkt
->
pSecurôyInfo
 )

2168 *
buf
++ = 
TRUE
;

2169 *
buf
++ = 
pPkt
->
pSecurôyInfo
->
keySize
;

2170 
VOID
 
	`oßl_mem˝y
–
buf
, 
pPkt
->
pSecurôyInfo
->
…k
, 
KEYLEN
 );

2171 
buf
 +
KEYLEN
;

2172 *
buf
++ = 
	`LO_UINT16
–
pPkt
->
pSecurôyInfo
->
div
 );

2173 *
buf
++ = 
	`HI_UINT16
–
pPkt
->
pSecurôyInfo
->
div
 );

2174 
VOID
 
	`oßl_mem˝y
–
buf
, 
pPkt
->
pSecurôyInfo
->
ønd
, 
B_RANDOM_NUM_SIZE
 );

2175 
buf
 +
B_RANDOM_NUM_SIZE
;

2180 
buf
 +1 + 
KEYLEN
 + 
B_RANDOM_NUM_SIZE
 + 2 + 1;

2183 i‡–
pPkt
->
pDevSecInfo
 )

2185 *
buf
++ = 
TRUE
;

2186 *
buf
++ = 
pPkt
->
pDevSecInfo
->
keySize
;

2187 
VOID
 
	`oßl_mem˝y
–
buf
, 
pPkt
->
pDevSecInfo
->
…k
, 
KEYLEN
 );

2188 
buf
 +
KEYLEN
;

2189 *
buf
++ = 
	`LO_UINT16
–
pPkt
->
pDevSecInfo
->
div
 );

2190 *
buf
++ = 
	`HI_UINT16
–
pPkt
->
pDevSecInfo
->
div
 );

2191 
VOID
 
	`oßl_mem˝y
–
buf
, 
pPkt
->
pDevSecInfo
->
ønd
, 
B_RANDOM_NUM_SIZE
 );

2192 
buf
 +
B_RANDOM_NUM_SIZE
;

2197 
buf
 +1 + 
KEYLEN
 + 
B_RANDOM_NUM_SIZE
 + 2 + 1;

2200 i‡–
pPkt
->
pIdítôyInfo
 )

2202 *
buf
++ = 
TRUE
;

2203 
VOID
 
	`oßl_mem˝y
–
buf
, 
pPkt
->
pIdítôyInfo
->
úk
, 
KEYLEN
 );

2204 
buf
 +
KEYLEN
;

2205 
VOID
 
	`oßl_mem˝y
–
buf
, 
pPkt
->
pIdítôyInfo
->
bd_addr
, 
B_ADDR_LEN
 );

2206 
buf
 +
B_ADDR_LEN
;

2211 
buf
 +
KEYLEN
 + 
B_ADDR_LEN
 + 1;

2214 i‡–
pPkt
->
pSignögInfo
 )

2216 *
buf
++ = 
TRUE
;

2217 
VOID
 
	`oßl_mem˝y
–
buf
, 
pPkt
->
pSignögInfo
->
§k
, 
KEYLEN
 );

2218 
buf
 +
KEYLEN
;

2219 *
buf
++ = 
	`BREAK_UINT32
–
pPkt
->
pSignögInfo
->
signCou¡î
, 0 );

2220 *
buf
++ = 
	`BREAK_UINT32
–
pPkt
->
pSignögInfo
->
signCou¡î
, 1 );

2221 *
buf
++ = 
	`BREAK_UINT32
–
pPkt
->
pSignögInfo
->
signCou¡î
, 2 );

2222 *
buf
 = 
	`BREAK_UINT32
–
pPkt
->
pSignögInfo
->
signCou¡î
, 3 );

2227 
pOutMsg
[0] = 
	`LO_UINT16
–
HCI_EXT_GAP_AUTH_COMPLETE_EVENT
 );

2228 
pOutMsg
[1] = 
	`HI_UINT16
–
HCI_EXT_GAP_AUTH_COMPLETE_EVENT
 );

2229 
pOutMsg
[2] = 
bÀMemAŒocEº‹
;

2230 
pOutMsg
[3] = 
	`LO_UINT16
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

2231 
pOutMsg
[4] = 
	`HI_UINT16
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

2232 
pBuf
 = 
pOutMsg
;

2233 
msgLí
 = 5;

2238 
GAP_BOND_COMPLETE_EVENT
:

2240 
g≠B⁄dCom∂ëeEvít_t
 *
pPkt
 = (g≠B⁄dCom∂ëeEvít_à*)
pMsg
;

2242 #i‡
	`deföed
 ( 
GAP_BOND_MGR
 )

2243 
VOID
 
	`GAPB⁄dMgr_Pro˚ssGAPMsg
–(
g≠EvítHdr_t
 *)
pMsg
 );

2246 
pOutMsg
[0] = 
	`LO_UINT16
–
HCI_EXT_GAP_BOND_COMPLETE_EVENT
 );

2247 
pOutMsg
[1] = 
	`HI_UINT16
–
HCI_EXT_GAP_BOND_COMPLETE_EVENT
 );

2248 
pOutMsg
[2] = 
pPkt
->
hdr
.
°©us
;

2249 
pOutMsg
[3] = 
	`LO_UINT16
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

2250 
pOutMsg
[4] = 
	`HI_UINT16
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

2251 
pBuf
 = 
pOutMsg
;

2252 
msgLí
 = 5;

2256 
GAP_PAIRING_REQ_EVENT
:

2258 
g≠PaúögReqEvít_t
 *
pPkt
 = (g≠PaúögReqEvít_à*)
pMsg
;

2259 
uöt8
 
tmp
 = 0;

2261 #i‡
	`deföed
 ( 
GAP_BOND_MGR
 )

2262 
VOID
 
	`GAPB⁄dMgr_Pro˚ssGAPMsg
–(
g≠EvítHdr_t
 *)
pMsg
 );

2265 
pOutMsg
[0] = 
	`LO_UINT16
–
HCI_EXT_GAP_PAIRING_REQ_EVENT
 );

2266 
pOutMsg
[1] = 
	`HI_UINT16
–
HCI_EXT_GAP_PAIRING_REQ_EVENT
 );

2267 
pOutMsg
[2] = 
pPkt
->
hdr
.
°©us
;

2268 
pOutMsg
[3] = 
	`LO_UINT16
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

2269 
pOutMsg
[4] = 
	`HI_UINT16
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

2270 
pOutMsg
[5] = 
pPkt
->
∑úReq
.
ioC≠
;

2271 
pOutMsg
[6] = 
pPkt
->
∑úReq
.
oobD©aFœg
;

2272 
pOutMsg
[7] = 
pPkt
->
∑úReq
.
authReq
;

2273 
pOutMsg
[8] = 
pPkt
->
∑úReq
.
maxEncKeySize
;

2275 
tmp
 |–
pPkt
->
∑úReq
.
keyDi°
.
sEncKey
 ) ? 
KEYDIST_SENC
 : 0;

2276 
tmp
 |–
pPkt
->
∑úReq
.
keyDi°
.
sIdKey
 ) ? 
KEYDIST_SID
 : 0;

2277 
tmp
 |–
pPkt
->
∑úReq
.
keyDi°
.
sSign
 ) ? 
KEYDIST_SSIGN
 : 0;

2278 
tmp
 |–
pPkt
->
∑úReq
.
keyDi°
.
mEncKey
 ) ? 
KEYDIST_MENC
 : 0;

2279 
tmp
 |–
pPkt
->
∑úReq
.
keyDi°
.
mIdKey
 ) ? 
KEYDIST_MID
 : 0;

2280 
tmp
 |–
pPkt
->
∑úReq
.
keyDi°
.
mSign
 ) ? 
KEYDIST_MSIGN
 : 0;

2281 
pOutMsg
[9] = 
tmp
;

2283 
pBuf
 = 
pOutMsg
;

2284 
msgLí
 = 10;

2288 
GAP_SLAVE_REQUESTED_SECURITY_EVENT
:

2290 
g≠SœveSecurôyReqEvít_t
 *
pPkt
 = (g≠SœveSecurôyReqEvít_à*)
pMsg
;

2292 #i‡
	`deföed
 ( 
GAP_BOND_MGR
 )

2293 
VOID
 
	`GAPB⁄dMgr_Pro˚ssGAPMsg
–(
g≠EvítHdr_t
 *)
pMsg
 );

2296 
pOutMsg
[0] = 
	`LO_UINT16
–
HCI_EXT_GAP_SLAVE_REQUESTED_SECURITY_EVENT
 );

2297 
pOutMsg
[1] = 
	`HI_UINT16
–
HCI_EXT_GAP_SLAVE_REQUESTED_SECURITY_EVENT
 );

2298 
pOutMsg
[2] = 
pPkt
->
hdr
.
°©us
;

2299 
pOutMsg
[3] = 
	`LO_UINT16
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

2300 
pOutMsg
[4] = 
	`HI_UINT16
–
pPkt
->
c⁄√˘i⁄H™dÀ
 );

2301 
VOID
 
	`oßl_mem˝y
–&(
pOutMsg
[5]), 
pPkt
->
devi˚Addr
, 
B_ADDR_LEN
 );

2302 
pOutMsg
[11] = 
pPkt
->
authReq
;

2303 
pBuf
 = 
pOutMsg
;

2304 
msgLí
 = 12;

2308 
GAP_DEVICE_INFO_EVENT
:

2310 
g≠Devi˚InfoEvít_t
 *
pPkt
 = (g≠Devi˚InfoEvít_à*)
pMsg
;

2312 
msgLí
 = 13 + 
pPkt
->
d©aLí
;

2314 
pBuf
 = 
	`oßl_mem_Æloc
–
msgLí
 );

2315 i‡–
pBuf
 )

2317 
uöt8
 *
buf
 = 
pBuf
;

2320 *
buf
++ = 
	`LO_UINT16
–
HCI_EXT_GAP_DEVICE_INFO_EVENT
 );

2321 *
buf
++ = 
	`HI_UINT16
–
HCI_EXT_GAP_DEVICE_INFO_EVENT
 );

2322 *
buf
++ = 
pPkt
->
hdr
.
°©us
;

2323 *
buf
++ = 
pPkt
->
evítTy≥
;

2324 *
buf
++ = 
pPkt
->
addrTy≥
;

2326 
VOID
 
	`oßl_mem˝y
–
buf
, 
pPkt
->
addr
, 
B_ADDR_LEN
 );

2327 
buf
 +
B_ADDR_LEN
;

2329 *
buf
++ = (
uöt8
)
pPkt
->
rssi
;

2330 *
buf
++ = 
pPkt
->
d©aLí
;

2331 
VOID
 
	`oßl_mem˝y
–
buf
, 
pPkt
->
pEvtD©a
,ÖPkt->
d©aLí
 );

2333 *
pAŒoˇãd
 = 
TRUE
;

2337 
pPkt
->
hdr
.
°©us
 = 
bÀMemAŒocEº‹
;

2347 *
pMsgLí
 = 
msgLí
;

2349  ( 
pBuf
 );

2350 
	}
}

2363 
uöt8
 *
	$¥o˚ssEvítsL2CAP
–
l2ˇpSig«lEvít_t
 *
pPkt
, 
uöt8
 *
pOutMsg
, uöt8 *
pMsgLí
 )

2365 
uöt8
 
msgLí
;

2368 
msgLí
 = 
	`buûdHCIExtHódî
–
pOutMsg
, (
HCI_EXT_L2CAP_EVENT
 | 
pPkt
->
›code
),

2369 
pPkt
->
hdr
.
°©us
,ÖPkt->
c⁄nH™dÀ
 );

2371 i‡–
pPkt
->
hdr
.
°©us
 =
SUCCESS
 )

2374  
pPkt
->
›code
 )

2376 
L2CAP_CMD_REJECT
:

2377 
msgLí
 +
	`L2CAP_BuûdCmdReje˘
–&
pOutMsg
[msgLí], (
uöt8
 *)&(
pPkt
->
cmd
.
cmdReje˘
) );

2380 
L2CAP_INFO_RSP
:

2381 
msgLí
 +
	`L2CAP_BuûdInfoR•
–&
pOutMsg
[msgLí], (
uöt8
 *)&(
pPkt
->
cmd
.
öfoR•
) );

2384 
L2CAP_PARAM_UPDATE_RSP
:

2385 
msgLí
 +
	`L2CAP_BuûdP¨amUpd©eR•
–&
pOutMsg
[msgLí], (
uöt8
 *)&(
pPkt
->
cmd
.
upd©eR•
) );

2394 *
pMsgLí
 = 
msgLí
;

2396  ( 
pOutMsg
 );

2397 
	}
}

2411 
uöt8
 *
	$¥o˚ssEvítsGATT
–
g©tMsgEvít_t
 *
pPkt
, 
uöt8
 *
pMsg
, uöt8 *
pMsgLí
, uöt8 *
pAŒoˇãd
 )

2413 
uöt8
 
hdrLí
 = 
HCI_EXT_HDR_LEN
 + 1;

2414 
uöt8
 
msgLí
 = 0;

2415 
uöt8
 *
pBuf
 = 
pMsg
;

2417 *
pAŒoˇãd
 = 
FALSE
;

2419 i‡–
pPkt
->
hdr
.
°©us
 =
SUCCESS
 )

2422  
pPkt
->
mëhod
 )

2424 
ATT_ERROR_RSP
:

2425 
msgLí
 = 
	`ATT_BuûdEº‹R•
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
îr‹R•
) );

2428 
ATT_EXCHANGE_MTU_REQ
:

2429 
msgLí
 = 
	`ATT_BuûdExch™geMTUReq
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
exch™geMTUReq
) );

2432 
ATT_EXCHANGE_MTU_RSP
:

2433 
msgLí
 = 
	`ATT_BuûdExch™geMTUR•
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
exch™geMTUR•
) );

2436 
ATT_FIND_INFO_REQ
:

2437 
msgLí
 = 
	`ATT_BuûdFödInfoReq
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
födInfoReq
) );

2440 
ATT_FIND_INFO_RSP
:

2441 
msgLí
 = 
	`ATT_BuûdFödInfoR•
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
födInfoR•
) );

2444 
ATT_FIND_BY_TYPE_VALUE_REQ
:

2445 
msgLí
 = 
	`ATT_BuûdFödByTy≥VÆueReq
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
födByTy≥VÆueReq
) );

2448 
ATT_FIND_BY_TYPE_VALUE_RSP
:

2449 
msgLí
 = 
	`ATT_BuûdFödByTy≥VÆueR•
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
födByTy≥VÆueR•
) );

2452 
ATT_READ_BY_TYPE_REQ
:

2453 
msgLí
 = 
	`ATT_BuûdRódByTy≥Req
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
ªadByTy≥Req
) );

2456 
ATT_READ_BY_TYPE_RSP
:

2457 
msgLí
 = 
	`ATT_BuûdRódByTy≥R•
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
ªadByTy≥R•
) );

2460 
ATT_READ_REQ
:

2461 
msgLí
 = 
	`ATT_BuûdRódReq
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
ªadReq
) );

2464 
ATT_READ_RSP
:

2465 
msgLí
 = 
	`ATT_BuûdRódR•
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
ªadR•
) );

2468 
ATT_READ_BLOB_REQ
:

2469 
msgLí
 = 
	`ATT_BuûdRódBlobReq
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
ªadBlobReq
) );

2472 
ATT_READ_BLOB_RSP
:

2473 
msgLí
 = 
	`ATT_BuûdRódBlobR•
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
ªadBlobR•
) );

2476 
ATT_READ_MULTI_REQ
:

2477 
msgLí
 = 
	`ATT_BuûdRódMu…iReq
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
ªadMu…iReq
) );

2480 
ATT_READ_MULTI_RSP
:

2481 
msgLí
 = 
	`ATT_BuûdRódMu…iR•
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
ªadMu…iR•
) );

2484 
ATT_READ_BY_GRP_TYPE_REQ
:

2485 
msgLí
 = 
	`ATT_BuûdRódByTy≥Req
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
ªadByGΩTy≥Req
) );

2488 
ATT_READ_BY_GRP_TYPE_RSP
:

2489 
msgLí
 = 
	`ATT_BuûdRódByGΩTy≥R•
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
ªadByGΩTy≥R•
) );

2492 
ATT_WRITE_REQ
:

2493 
pMsg
[
hdrLí
] = 
pPkt
->
msg
.
wrôeReq
.
sig
;

2494 
pMsg
[
hdrLí
+1] = 
pPkt
->
msg
.
wrôeReq
.
cmd
;

2495 
msgLí
 = 2;

2496 
msgLí
 +
	`ATT_BuûdWrôeReq
–&
pMsg
[
hdrLí
+2], (
uöt8
 *)&(
pPkt
->
msg
.
wrôeReq
) );

2499 
ATT_WRITE_RSP
:

2500 
msgLí
 = 0;

2503 
ATT_PREPARE_WRITE_REQ
:

2504 
msgLí
 = 
	`ATT_BuûdPª∑ªWrôeReq
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
¥ï¨eWrôeReq
) );

2507 
ATT_PREPARE_WRITE_RSP
:

2508 
msgLí
 = 
	`ATT_BuûdPª∑ªWrôeR•
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
¥ï¨eWrôeR•
) );

2511 
ATT_EXECUTE_WRITE_REQ
:

2512 
msgLí
 = 
	`ATT_BuûdExecuãWrôeReq
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
execuãWrôeReq
) );

2515 
ATT_EXECUTE_WRITE_RSP
:

2516 
msgLí
 = 0;

2519 
ATT_HANDLE_VALUE_IND
:

2520 
ATT_HANDLE_VALUE_NOTI
:

2521 
msgLí
 = 
	`ATT_BuûdH™dÀVÆueInd
–&
pMsg
[
hdrLí
], (
uöt8
 *)&(
pPkt
->
msg
.
h™dÀVÆueInd
) );

2524 
ATT_HANDLE_VALUE_CFM
:

2525 
msgLí
 = 0;

2530 
msgLí
 = 0;

2536 
VOID
 
	`buûdHCIExtHódî
–
pBuf
, (
HCI_EXT_ATT_EVENT
 | 
pPkt
->
mëhod
),ÖPkt->
hdr
.
°©us
,ÖPkt->
c⁄nH™dÀ
 );

2539 
pBuf
[
HCI_EXT_HDR_LEN
] = 
msgLí
;

2541 *
pMsgLí
 = 
hdrLí
 + 
msgLí
;

2545 
	`GATT_AµCom∂ëedMsg
–
pPkt
 );

2547  ( 
pBuf
 );

2548 
	}
}

2550 #i‚de‡
GATT_DB_OFF_CHIP


2562 
uöt8
 *
	$¥o˚ssEvítsGATTSîv
–
g©tEvítHdr_t
 *
pPkt
, 
uöt8
 *
pMsg
, uöt8 *
pMsgLí
 )

2564 
uöt8
 
hdrLí
 = 
HCI_EXT_HDR_LEN
 + 1;

2565 
uöt8
 
msgLí
 = 0;

2566 
uöt8
 *
pBuf
 = 
pMsg
;

2568 i‡–
pPkt
->
hdr
.
°©us
 =
SUCCESS
 )

2571  
pPkt
->
mëhod
 )

2573 
GATT_CLIENT_CHAR_CFG_UPDATED_EVENT
:

2575 
g©tClõ¡Ch¨CfgUpd©edEvít_t
 *
pEvít
 = (g©tClõ¡Ch¨CfgUpd©edEvít_à*)
pPkt
;

2577 #i‡
	`deföed
 ( 
GAP_BOND_MGR
 )

2578 
VOID
 
	`GAPB⁄dMgr_Upd©eCh¨Cfg
–
pEvít
->
c⁄nH™dÀ
,ÖEvít->
©åH™dÀ
,ÖEvít->
vÆue
 );

2581 
pMsg
[
hdrLí
] = 
	`LO_UINT16
–
pEvít
->
©åH™dÀ
 );

2582 
pMsg
[
hdrLí
+1] = 
	`HI_UINT16
–
pEvít
->
©åH™dÀ
 );

2585 
pMsg
[
hdrLí
+2] = 
	`LO_UINT16
–
pEvít
->
vÆue
 );

2586 
pMsg
[
hdrLí
+3] = 
	`HI_UINT16
–
pEvít
->
vÆue
 );

2588 
msgLí
 = 4;

2599 
VOID
 
	`buûdHCIExtHódî
–
pBuf
, (
HCI_EXT_GATT_EVENT
 | 
pPkt
->
mëhod
),ÖPkt->
hdr
.
°©us
,ÖPkt->
c⁄nH™dÀ
 );

2602 
pBuf
[
HCI_EXT_HDR_LEN
] = 
msgLí
;

2604 *
pMsgLí
 = 
hdrLí
 + 
msgLí
;

2606  ( 
pBuf
 );

2607 
	}
}

2622 
uöt8
 
	$buûdHCIExtHódî
–
uöt8
 *
pBuf
, 
uöt16
 
evít
, uöt8 
°©us
, uöt16 
c⁄nH™dÀ
 )

2624 
pBuf
[0] = 
	`LO_UINT16
–
evít
 );

2625 
pBuf
[1] = 
	`HI_UINT16
–
evít
 );

2626 
pBuf
[2] = 
°©us
;

2627 
pBuf
[3] = 
	`LO_UINT16
–
c⁄nH™dÀ
 );

2628 
pBuf
[4] = 
	`HI_UINT16
–
c⁄nH™dÀ
 );

2630  ( 
HCI_EXT_HDR_LEN
 );

2631 
	}
}

2642 
uöt8
 
	$m≠ATT2BLESètus
–
uöt8
 
°©us
 )

2644 
uöt8
 
°©
;

2646  
°©us
 )

2648 
ATT_ERR_INVALID_PDU
:

2650 
°©
 = 
bÀInvÆidPDU
;

2653 
ATT_ERR_INSUFFICIENT_AUTHEN
:

2655 
°©
 = 
bÀInsufficõ¡Authí
;

2658 
ATT_ERR_INSUFFICIENT_ENCRYPT
:

2660 
°©
 = 
bÀInsufficõ¡En¸y±
;

2663 
ATT_ERR_INSUFFICIENT_KEY_SIZE
:

2665 
°©
 = 
bÀInsufficõ¡KeySize
;

2669 
°©
 = 
°©us
;

2672  ( 
°©
 );

2673 
	}
}

2675 #ifde‡
GATT_DB_OFF_CHIP


2690 
uöt8
 
	$addAârRec
–
g©tSîvi˚_t
 *
pSîv
, 
uöt8
 *
pUUID
, uöt8 
Àn
,

2691 
uöt8
 
≥rmissi⁄s
, 
uöt16
 *
pTŸÆAârs
, uöt8 *
pR•D©aLí
 )

2693 
g©tAâribuã_t
 *
pAâr
 = &(
pSîv
->
©ås
[pSîv->
numAârs
]);

2694 
uöt8
 
°©
 = 
SUCCESS
;

2697 
pAâr
->
ty≥
.
uuid
 = 
	`födUUIDRec
–
pUUID
, 
Àn
 );

2698 i‡–
pAâr
->
ty≥
.
uuid
 !
NULL
 )

2700 
pAâr
->
ty≥
.
Àn
 =Üen;

2701 
pAâr
->
≥rmissi⁄s
 =Öermissions;

2704 i‡–++
pSîv
->
numAârs
 =*
pTŸÆAârs
 )

2707 
°©
 = 
	`GATT_Regi°îSîvi˚
–
pSîv
 );

2708 i‡–
°©
 =
SUCCESS
 )

2710 *
pR•D©aLí
 = 4;

2713 
uöt16
 
h™dÀ
 = 
pSîv
->
©ås
[0].handle;

2714 
r•Buf
[
RSP_PAYLOAD_IDX
] = 
	`LO_UINT16
–
h™dÀ
 );

2715 
r•Buf
[
RSP_PAYLOAD_IDX
+1] = 
	`HI_UINT16
–
h™dÀ
 );

2718 
h™dÀ
 = 
pSîv
->
©ås
[pSîv->
numAârs
-1].handle;

2719 
r•Buf
[
RSP_PAYLOAD_IDX
+2] = 
	`LO_UINT16
–
h™dÀ
 );

2720 
r•Buf
[
RSP_PAYLOAD_IDX
+3] = 
	`HI_UINT16
–
h™dÀ
 );

2723 
pSîv
->
©ås
 = 
NULL
;

2724 
pSîv
->
numAârs
 = 0;

2728 
	`‰ìAârRecs
–
pSîv
 );

2732 *
pTŸÆAârs
 = 0;

2737 
°©
 = 
INVALIDPARAMETER
;

2740  ( 
°©
 );

2741 
	}
}

2753 
	$‰ìAârRecs
–
g©tSîvi˚_t
 *
pSîv
 )

2755 i‡–
pSîv
->
©ås
 !
NULL
 )

2757  
uöt8
 
i
 = 0; i < 
pSîv
->
numAârs
; i++ )

2759 
g©tAârTy≥_t
 *
pTy≥
 = &
pSîv
->
©ås
[
i
].
ty≥
;

2760 i‡–
pTy≥
->
uuid
 !
NULL
 )

2762 i‡–
	`GATT_FödUUIDRec
–(
uöt8
 *)
pTy≥
->
uuid
,ÖTy≥->
Àn
 ) =
NULL
 )

2765 
	`oßl_mem_‰ì
–(
uöt8
 *)
pTy≥
->
uuid
 );

2770 
	`oßl_mem_‰ì
–
pSîv
->
©ås
 );

2772 
pSîv
->
©ås
 = 
NULL
;

2773 
pSîv
->
numAârs
 = 0;

2775 
	}
}

2788 c⁄° 
uöt8
 *
	$födUUIDRec
–
uöt8
 *
pUUID
, uöt8 
Àn
 )

2790 c⁄° 
uöt8
 *
pUuid
 = 
	`GATT_FödUUIDRec
–
pUUID
, 
Àn
 );

2791 i‡–
pUuid
 =
NULL
 )

2794 
pUuid
 = 
	`oßl_mem_Æloc
–
Àn
 );

2795 i‡–
pUuid
 !
NULL
 )

2797 
VOID
 
	`oßl_mem˝y
–(
uöt8
 *)
pUuid
, 
pUUID
, 
Àn
 );

2801  ( 
pUuid
 );

2802 
	}
}

	@hci_ext_app.h

39 #i‚de‡
HCI_EXT_APP_H


40 
	#HCI_EXT_APP_H


	)

42 #ifde‡
__˝lu•lus


71 
	#HCI_EXT_LL_SUBGRP
 0x00

	)

72 
	#HCI_EXT_L2CAP_SUBGRP
 0x01

	)

73 
	#HCI_EXT_ATT_SUBGRP
 0x02

	)

74 
	#HCI_EXT_GATT_SUBGRP
 0x03

	)

75 
	#HCI_EXT_GAP_SUBGRP
 0x04

	)

76 
	#HCI_EXT_UTIL_SUBGRP
 0x05

	)

77 
	#HCI_EXT_PROFILE_SUBGRP
 0x07

	)

79 
	#HCI_EXT_UTIL_RESERVED
 0x00

	)

80 
	#HCI_EXT_UTIL_NV_READ
 0x01

	)

81 
	#HCI_EXT_UTIL_NV_WRITE
 0x02

	)

82 
	#HCI_EXT_UTIL_FORCE_BOOT
 0x03

	)

85 
	#HCI_EXT_GAP_DEVICE_INIT
 0x00

	)

86 
	#HCI_EXT_GAP_CONFIG_DEVICE_ADDR
 0x03

	)

89 
	#HCI_EXT_GAP_DEVICE_DISC_REQ
 0x04

	)

90 
	#HCI_EXT_GAP_DEVICE_DISC_CANCEL
 0x05

	)

91 
	#HCI_EXT_GAP_MAKE_DISCOVERABLE
 0x06

	)

92 
	#HCI_EXT_GAP_UPDATE_ADV_DATA
 0x07

	)

93 
	#HCI_EXT_GAP_END_DISC
 0x08

	)

96 
	#HCI_EXT_GAP_EST_LINK_REQ
 0x09

	)

97 
	#HCI_EXT_GAP_TERMINATE_LINK
 0x0A

	)

98 
	#HCI_EXT_GAP_AUTHENTICATE
 0x0B

	)

99 
	#HCI_EXT_GAP_PASSKEY_UPDATE
 0x0C

	)

100 
	#HCI_EXT_GAP_SLAVE_SECURITY_REQ_UPDATE
 0x0D

	)

101 
	#HCI_EXT_GAP_SIGNABLE
 0x0E

	)

102 
	#HCI_EXT_GAP_BOND
 0x0F

	)

103 
	#HCI_EXT_GAP_TERMINATE_AUTH
 0x10

	)

104 
	#HCI_EXT_GAP_UPDATE_LINK_PARAM_REQ
 0x11

	)

107 
	#HCI_EXT_GAP_SET_PARAM
 0x30

	)

108 
	#HCI_EXT_GAP_GET_PARAM
 0x31

	)

109 
	#HCI_EXT_GAP_RESOLVE_PRIVATE_ADDR
 0x32

	)

110 
	#HCI_EXT_GAP_SET_ADV_TOKEN
 0x33

	)

111 
	#HCI_EXT_GAP_REMOVE_ADV_TOKEN
 0x34

	)

112 
	#HCI_EXT_GAP_UPDATE_ADV_TOKENS
 0x35

	)

113 
	#HCI_EXT_GAP_BOND_SET_PARAM
 0x36

	)

114 
	#HCI_EXT_GAP_BOND_GET_PARAM
 0x37

	)

115 
	#HCI_EXT_GAP_BOND_SERVICE_CHANGE
 0x38

	)

118 
	#GATT_FIND_INCLUDED_SERVICES
 0x30

	)

119 
	#GATT_DISC_ALL_CHARS
 0x32

	)

120 
	#GATT_READ_USING_CHAR_UUID
 0x34

	)

121 
	#GATT_WRITE_NO_RSP
 0x36

	)

122 
	#GATT_SIGNED_WRITE_NO_RSP
 0x38

	)

123 
	#GATT_RELIABLE_WRITES
 0x3a

	)

124 
	#GATT_READ_CHAR_DESC
 0x3c

	)

125 
	#GATT_READ_LONG_CHAR_DESC
 0x3e

	)

126 
	#GATT_WRITE_CHAR_DESC
 0x40

	)

127 
	#GATT_WRITE_LONG_CHAR_DESC
 0x42

	)

130 
	#HCI_EXT_GATT_ADD_SERVICE
 ( 
GATT_BASE_METHOD
 | 0x3C )

131 
	#HCI_EXT_GATT_DEL_SERVICE
 ( 
GATT_BASE_METHOD
 | 0x3D )

132 
	#HCI_EXT_GATT_ADD_ATTRIBUTE
 ( 
GATT_BASE_METHOD
 | 0x3E )

133 

	)

141 
	#HCI_EXT_BASE_EVENT
 ( 0x0001 << 10 )

142 

	)

143 
	#HCI_EXT_LL_EVENT
 ( 
HCI_EXT_BASE_EVENT
 | (
HCI_EXT_LL_SUBGRP
 << 7) )

144 
	#HCI_EXT_L2CAP_EVENT
 ( 
HCI_EXT_BASE_EVENT
 | (
HCI_EXT_L2CAP_SUBGRP
 << 7) )

145 
	#HCI_EXT_ATT_EVENT
 ( 
HCI_EXT_BASE_EVENT
 | (
HCI_EXT_ATT_SUBGRP
 << 7) )

146 
	#HCI_EXT_GATT_EVENT
 ( 
HCI_EXT_BASE_EVENT
 | (
HCI_EXT_GATT_SUBGRP
 << 7) )

147 
	#HCI_EXT_GAP_EVENT
 ( 
HCI_EXT_BASE_EVENT
 | (
HCI_EXT_GAP_SUBGRP
 << 7) )

148 

	)

150 
	#HCI_EXT_GAP_DEVICE_INIT_DONE_EVENT
 ( 
HCI_EXT_GAP_EVENT
 | 0x00 )

	)

151 
	#HCI_EXT_GAP_DEVICE_DISCOVERY_EVENT
 ( 
HCI_EXT_GAP_EVENT
 | 0x01 )

	)

152 
	#HCI_EXT_GAP_ADV_DATA_UPDATE_DONE_EVENT
 ( 
HCI_EXT_GAP_EVENT
 | 0x02 )

	)

153 
	#HCI_EXT_GAP_MAKE_DISCOVERABLE_DONE_EVENT
 ( 
HCI_EXT_GAP_EVENT
 | 0x03 )

	)

154 
	#HCI_EXT_GAP_END_DISCOVERABLE_DONE_EVENT
 ( 
HCI_EXT_GAP_EVENT
 | 0x04 )

	)

155 
	#HCI_EXT_GAP_LINK_ESTABLISHED_EVENT
 ( 
HCI_EXT_GAP_EVENT
 | 0x05 )

	)

156 
	#HCI_EXT_GAP_LINK_TERMINATED_EVENT
 ( 
HCI_EXT_GAP_EVENT
 | 0x06 )

	)

157 
	#HCI_EXT_GAP_LINK_PARAM_UPDATE_EVENT
 ( 
HCI_EXT_GAP_EVENT
 | 0x07 )

	)

158 
	#HCI_EXT_GAP_RANDOM_ADDR_CHANGED_EVENT
 ( 
HCI_EXT_GAP_EVENT
 | 0x08 )

	)

159 
	#HCI_EXT_GAP_SIGNATURE_UPDATED_EVENT
 ( 
HCI_EXT_GAP_EVENT
 | 0x09 )

	)

160 
	#HCI_EXT_GAP_AUTH_COMPLETE_EVENT
 ( 
HCI_EXT_GAP_EVENT
 | 0x0A )

	)

161 
	#HCI_EXT_GAP_PASSKEY_NEEDED_EVENT
 ( 
HCI_EXT_GAP_EVENT
 | 0x0B )

	)

162 
	#HCI_EXT_GAP_SLAVE_REQUESTED_SECURITY_EVENT
 ( 
HCI_EXT_GAP_EVENT
 | 0x0C )

	)

163 
	#HCI_EXT_GAP_DEVICE_INFO_EVENT
 ( 
HCI_EXT_GAP_EVENT
 | 0x0D )

	)

164 
	#HCI_EXT_GAP_BOND_COMPLETE_EVENT
 ( 
HCI_EXT_GAP_EVENT
 | 0x0E )

	)

165 
	#HCI_EXT_GAP_PAIRING_REQ_EVENT
 ( 
HCI_EXT_GAP_EVENT
 | 0x0F )

	)

167 
	#HCI_EXT_GAP_CMD_STATUS_EVENT
 ( 
HCI_EXT_GAP_EVENT
 | 0x7F )

	)

180 
HCI_EXT_Aµ_Inô
–
uöt8
 
èsk_id
 );

185 
uöt16
 
HCI_EXT_Aµ_Pro˚ssEvít
–
uöt8
 
èsk_id
, uöt16 
evíts
 );

190 #ifde‡
__˝lu•lus


	@..\..\util\EBL\app\sbl_app.c

51 
	~"hÆ_Êash.h
"

52 
	~"hÆ_ty≥s.h
"

53 
	~"sbl_≠p.h
"

60 #¥agm®
loˇti⁄
="IMAGE_HEADER"

61 c⁄° 
__code
 
img_hdr_t
 
	g_imgHdr
 = {

64 
SBL_FULL_LEN
,

68 #¥agm®
ªquúed
=
_imgHdr


70 #¥agm®
loˇti⁄
="AES_HEADER"

71 c⁄° 
__code
 
´s_hdr_t
 
	g_´sHdr
 = {

76 #¥agm®
ªquúed
=
_´sHdr


93 
	$≠pF‹˚BoŸ
()

95 
uöt16
 
¸c
[2];

96 
	`SBL_NVM_GET
(
SBL_ADDR_CRC
, 
¸c
, (crc));

99 i‡((
¸c
[0] == 0xFFFF) || (crc[0] == 0x0000) ||

100 (
¸c
[1] == 0xFFFF) || (crc[1] == 0x0000) ||

101 (
¸c
[1] != crc[0]))

106 
	`HAL_DISABLE_INTERRUPTS
();

108 
¸c
[0] ^= 0xFFFF;

109 
¸c
[1] = 0xFFFF;

110 
	`SBL_NVM_SET
(
SBL_ADDR_CRC
, 
¸c
, (crc));

112 
	`HAL_SYSTEM_RESET
();

113 
	}
}

	@..\..\util\SBL\app\sbl_app.c

51 
	~"hÆ_Êash.h
"

52 
	~"hÆ_ty≥s.h
"

53 
	~"sbl_≠p.h
"

61 
	#SBL_CRC_PAGE
 (
HAL_SBL_IMG_CRC
 * 
HAL_FLASH_WORD_SIZE
 / 
HAL_FLASH_PAGE_SIZE
)

	)

62 
	#SBL_CRC_OFFSET
 (
HAL_SBL_IMG_CRC
 * 
HAL_FLASH_WORD_SIZE
 % 
HAL_FLASH_PAGE_SIZE
)

	)

79 
	$≠pF‹˚BoŸ
()

81 
uöt16
 
¸c
[2];

84 
	`HÆFœshRód
(
SBL_CRC_PAGE
, 
SBL_CRC_OFFSET
, (
uöt8
 *)
¸c
, 4);

86 i‡((
¸c
[0] == 0xFFFF) || (crc[0] == 0x0000) ||

87 (
¸c
[1] == 0xFFFF) || (crc[1] == 0x0000) ||

88 (
¸c
[1] != crc[0]))

93 
	`HAL_DISABLE_INTERRUPTS
();

95 
¸c
[0] ^= 0xFFFF;

96 
¸c
[1] = 0xFFFF;

97 
	`HÆFœshWrôe
(
HAL_SBL_IMG_CRC
, (
uöt8
 *)
¸c
, 1);

99 
	`HAL_SYSTEM_RESET
();

100 
	}
}

	@..\..\util\UBL\soc_8051\usb_msd\app\ubl_app.c

50 
	~"hÆ_Êash.h
"

51 
	~"hÆ_ty≥s.h
"

52 #i‡
deföed
 
MT_UBL_FUNC


53 
	~"mt.h
"

54 
	~"mt_Ωc.h
"

56 
	~"ubl_≠p.h
"

63 #i‡
deföed
 
HAL_DONGLE_NANO
 && !deföed 
MT_UBL_FUNC


64 #w¨nög 
Ensuª
 
th©
 
Aµliˇti⁄
 
code
 
has
 
a
 
way
 
of
 
beög
 
åiggîed
 
to
 
övoke
 
ublAµF‹˚BoŸ
().

68 
	#UBL_MD_PG_OFFSET
 0x069C

	)

70 #¥agm®
loˇti⁄
="AES_CTRL_BLK"

71 c⁄° 
__code
 
´s_˘æ_blk_t
 
	g_´sCålBlk
 = {

78 #¥agm®
ªquúed
=
_´sCålBlk


85 #¥agm®
loˇti⁄
="UBL_FILENAME_SPACE"

86 c⁄° 
uöt8
 
	g_ublFûeName
[256] = {

104 #¥agm®
ªquúed
=
_ublFûeName


106 #¥agm®
loˇti⁄
="UBL_METADATA_SPACE"

107 c⁄° 
ublMëaD©a_t
 
	g_ublMëaD©a
 = {

108 #i‡
deföed
 
HAL_DONGLE_NANO


114 #w¨nög 
Put
 
a
 
mónögful
 
£curôy
 
key
 
hîe
 
to
 
¥Ÿe˘
 
your
 
√tw‹k
 securôy 
keys
.

132 #w¨nög 
Put
 
a
 
n⁄
-
zîo
 
cou¡down
 
hîe
 
u¡û
 
the
 
code
 
has
 
bìn
 
¥oví
 
to
 
nŸ
 
lock
-
out
Åhê
UBL
.

175 #¥agm®
ªquúed
=
_ublMëaD©a


192 
	$≠pF‹˚BoŸ
()

194 
uöt16
 
¸c
[2];

197 
	`HÆFœshRód
(
UBL_PAGE_FIRST
, 
UBL_MD_PG_OFFSET
, (
uöt8
 *)
¸c
, 4);

199 i‡((
¸c
[0] == 0xFFFF) || (crc[0] == 0x0000) ||

200 (
¸c
[1] == 0xFFFF) || (crc[1] == 0x0000) ||

201 (
¸c
[1] != crc[0]))

206 
	`HAL_DISABLE_INTERRUPTS
();

208 
¸c
[1] ^= 0xFFFF;

209 
¸c
[0] = 0xFFFF;

210 
	`HÆFœshWrôe
(((
uöt16
)&
_ublMëaD©a
Ë/ 
HAL_FLASH_WORD_SIZE
, (
uöt8
 *)
¸c
, 1);

212 
	`HAL_SYSTEM_RESET
();

213 
	}
}

215 #i‡
deföed
 
MT_UBL_FUNC


231 
uöt8
 
	$MT_UblComm™dPro˚ssög
(
uöt8
 *
pBuf
)

233 i‡(
pBuf
[
MT_RPC_POS_CMD1
] =
MT_UBL_FORCE
)

235 
	`ublAµF‹˚BoŸ
();

238  
MT_RPC_ERR_COMMAND_ID
;

239 
	}
}

	@/usr/include/limits.h

12 #i‚de‡
_LIMITS_H___


14 
	~<„©uªs.h
>

15 
	~<bôs/w‹dsize.h
>

17 #i‚de‡
_MACH_MACHLIMITS_H_


20 
	#_LIMITS_H___


	)

21 
	#_MACH_MACHLIMITS_H_


	)

27 #unde‡
CHAR_BIT


28 
	#CHAR_BIT
 
__CHAR_BIT__


	)

31 #unde‡
LONG_BIT


32 
	#LONG_BIT
 (
__SIZEOF_LONG__
 * 
__CHAR_BIT__
)

	)

35 #unde‡
WORD_BIT


36 
	#WORD_BIT
 (
__SIZEOF_INT__
 * 
__CHAR_BIT__
)

	)

39 #i‚de‡
MB_LEN_MAX


41 
	#MB_LEN_MAX
 8

	)

45 #unde‡
SCHAR_MIN


46 
	#SCHAR_MIN
 (-128)

	)

47 #unde‡
SCHAR_MAX


48 
	#SCHAR_MAX
 127

	)

51 #unde‡
UCHAR_MAX


52 
	#UCHAR_MAX
 255

	)

55 #ifde‡
__CHAR_UNSIGNED__


56 #unde‡
CHAR_MIN


57 
	#CHAR_MIN
 0

	)

58 #unde‡
CHAR_MAX


59 
	#CHAR_MAX
 255

	)

61 #unde‡
CHAR_MIN


62 
	#CHAR_MIN
 (-128)

	)

63 #unde‡
CHAR_MAX


64 
	#CHAR_MAX
 127

	)

68 #unde‡
SHRT_MIN


69 
	#SHRT_MIN
 (-32768)

	)

70 #unde‡
SHRT_MAX


71 
	#SHRT_MAX
 32767

	)

74 #unde‡
USHRT_MAX


75 
	#USHRT_MAX
 65535

	)

78 #i‚de‡
__INT_MAX__


79 
	#__INT_MAX__
 2147483647

	)

81 #unde‡
INT_MIN


82 
	#INT_MIN
 (-
INT_MAX
-1)

	)

83 #unde‡
INT_MAX


84 
	#INT_MAX
 
__INT_MAX__


	)

87 #unde‡
UINT_MAX


88 
	#UINT_MAX
 (
INT_MAX
 * 2U + 1)

	)

92 #i‚de‡
__LONG_MAX__


93 #i‡
__WORDSIZE
 == 64

94 
	#__LONG_MAX__
 9223372036854775807L

	)

96 
	#__LONG_MAX__
 2147483647L

	)

99 #unde‡
LONG_MIN


100 
	#LONG_MIN
 (-
LONG_MAX
-1L)

	)

101 #unde‡
LONG_MAX


102 
	#LONG_MAX
 
__LONG_MAX__


	)

105 #unde‡
ULONG_MAX


106 
	#ULONG_MAX
 (
LONG_MAX
 * 2UL + 1)

	)

109 #i‚de‡
__LONG_LONG_MAX__


110 
	#__LONG_LONG_MAX__
 9223372036854775807LL

	)

113 #i‡
deföed
 (
__GNU_LIBRARY__
Ë? deföed (
__USE_GNU
Ë: !deföed (
__STRICT_ANSI__
)

114 #unde‡
LONG_LONG_MIN


115 
	#LONG_LONG_MIN
 (-
LONG_LONG_MAX
-1)

	)

116 #unde‡
LONG_LONG_MAX


117 
	#LONG_LONG_MAX
 
__LONG_LONG_MAX__


	)

120 #unde‡
ULONG_LONG_MAX


121 
	#ULONG_LONG_MAX
 (
LONG_LONG_MAX
 * 2ULL + 1)

	)

125 #unde‡
LLONG_MIN


126 
	#LLONG_MIN
 (-
LLONG_MAX
-1)

	)

127 #unde‡
LLONG_MAX


128 
	#LLONG_MAX
 
__LONG_LONG_MAX__


	)

131 #unde‡
ULLONG_MAX


132 
	#ULLONG_MAX
 (
LLONG_MAX
 * 2ULL + 1)

	)

135 #unde‡
SSIZE_MAX


136 
	#SSIZE_MAX
 (
__LONG_MAX__
)

	)

150 #unde‡
AIO_LISTIO_MAX


155 #unde‡
AIO_MAX


160 #unde‡
AIO_PRIO_DELTA_MAX


166 #unde‡
ARG_MAX


167 
	#ARG_MAX
 32000

	)

170 #unde‡
ATEXIT_MAX


171 
	#ATEXIT_MAX
 32

	)

174 #unde‡
CHILD_MAX


175 
	#CHILD_MAX
 256

	)

178 #unde‡
DELAYTIMER_MAX


182 #unde‡
HOST_NAME_MAX


183 
	#HOST_NAME_MAX
 255

	)

186 #unde‡
IOV_MAX


187 
	#IOV_MAX
 1024

	)

190 #unde‡
LOGIN_NAME_MAX


191 
	#LOGIN_NAME_MAX
 256

	)

194 #unde‡
MQ_OPEN_MAX


195 
	#MQ_OPEN_MAX
 
OPEN_MAX


	)

198 #unde‡
MQ_PRIO_MAX


199 
	#MQ_PRIO_MAX
 
INT_MAX


	)

205 #unde‡
OPEN_MAX


206 
	#OPEN_MAX
 256

	)

209 #unde‡
PAGESIZE


210 #unde‡
PAGE_SIZE


211 
	#PAGESIZE
 65536

	)

212 
	#PAGE_SIZE
 
PAGESIZE


	)

221 #unde‡
PTHREAD_DESTRUCTOR_ITERATIONS


222 
	#PTHREAD_DESTRUCTOR_ITERATIONS
 1

	)

226 #unde‡
PTHREAD_KEYS_MAX


227 
	#PTHREAD_KEYS_MAX
 1024

	)

237 #unde‡
PTHREAD_STACK_MIN


238 
	#PTHREAD_STACK_MIN
 65536

	)

242 #unde‡
PTHREAD_THREADS_MAX


248 #unde‡
RTSIG_MAX


249 #i‡
__WORDSIZE
 == 64

250 
	#RTSIG_MAX
 33

	)

252 
	#RTSIG_MAX
 1

	)

257 #unde‡
SEM_NSEMS_MAX


261 #unde‡
SEM_VALUE_MAX


262 
	#SEM_VALUE_MAX
 1147483648

	)

266 #unde‡
SIGQUEUE_MAX


267 
	#SIGQUEUE_MAX
 32

	)

271 #unde‡
SS_REPL_MAX


275 #unde‡
STREAM_MAX


276 
	#STREAM_MAX
 20

	)

279 #unde‡
SYMLOOP_MAX


280 
	#SYMLOOP_MAX
 10

	)

283 #unde‡
TIMER_MAX


284 
	#TIMER_MAX
 32

	)

287 #unde‡
TRACE_EVENT_NAME_MAX


292 #unde‡
TRACE_NAME_MAX


297 #unde‡
TRACE_SYS_MAX


303 #unde‡
TRACE_USER_EVENT_MAX


307 #unde‡
TTY_NAME_MAX


308 
	#TTY_NAME_MAX
 32

	)

311 #unde‡
TZNAME_MAX


318 #unde‡
FILESIZEBITS


319 
	#FILESIZEBITS
 64

	)

322 #unde‡
LINK_MAX


323 
	#LINK_MAX
 1024

	)

326 #unde‡
MAX_CANON


327 
	#MAX_CANON
 255

	)

330 #unde‡
MAX_INPUT


331 
	#MAX_INPUT
 255

	)

334 #unde‡
NAME_MAX


335 
	#NAME_MAX
 255

	)

341 #unde‡
PATH_MAX


342 
	#PATH_MAX
 4096

	)

346 #unde‡
PIPE_BUF


347 
	#PIPE_BUF
 4096

	)

351 #unde‡
POSIX_ALLOC_SIZE_MIN


357 #unde‡
POSIX_REC_INCR_XFER_SIZE


361 #unde‡
POSIX_REC_MAX_XFER_SIZE


365 #unde‡
POSIX_REC_MIN_XFER_SIZE


369 #unde‡
POSIX_REC_XFER_ALIGN


373 #unde‡
SYMLINK_MAX


374 
	#SYMLINK_MAX
 (
PATH_MAX
 - 1)

	)

380 #unde‡
BC_BASE_MAX


381 
	#BC_BASE_MAX
 99

	)

384 #unde‡
BC_DIM_MAX


385 
	#BC_DIM_MAX
 2048

	)

388 #unde‡
BC_SCALE_MAX


389 
	#BC_SCALE_MAX
 99

	)

392 #unde‡
BC_STRING_MAX


393 
	#BC_STRING_MAX
 1000

	)

396 #unde‡
CHARCLASS_NAME_MAX


405 #unde‡
COLL_WEIGHTS_MAX


410 #unde‡
EXPR_NEST_MAX


411 
	#EXPR_NEST_MAX
 32

	)

414 #unde‡
LINE_MAX


415 
	#LINE_MAX
 2048

	)

419 #unde‡
NGROUPS_MAX


420 
	#NGROUPS_MAX
 1024

	)

424 #unde‡
RE_DUP_MAX


425 
	#RE_DUP_MAX
 255

	)

435 
	#_POSIX_CLOCKRES_MIN
 20000000

	)

439 
	#_POSIX_AIO_LISTIO_MAX
 2

	)

440 
	#_POSIX_AIO_MAX
 1

	)

441 
	#_POSIX_ARG_MAX
 4096

	)

442 
	#_POSIX_CHILD_MAX
 25

	)

443 
	#_POSIX_DELAYTIMER_MAX
 32

	)

444 
	#_POSIX_HOST_NAME_MAX
 255

	)

445 
	#_POSIX_LINK_MAX
 8

	)

446 
	#_POSIX_LOGIN_NAME_MAX
 9

	)

447 
	#_POSIX_MAX_CANON
 255

	)

448 
	#_POSIX_MAX_INPUT
 255

	)

449 
	#_POSIX_MQ_OPEN_MAX
 8

	)

450 
	#_POSIX_MQ_PRIO_MAX
 32

	)

451 
	#_POSIX_NAME_MAX
 14

	)

452 
	#_POSIX_NGROUPS_MAX
 8

	)

453 
	#_POSIX_OPEN_MAX
 20

	)

454 
	#_POSIX_PATH_MAX
 256

	)

455 
	#_POSIX_PIPE_BUF
 512

	)

456 
	#_POSIX_RE_DUP_MAX
 255

	)

457 
	#_POSIX_RTSIG_MAX
 8

	)

458 
	#_POSIX_SEM_NSEMS_MAX
 256

	)

459 
	#_POSIX_SEM_VALUE_MAX
 32767

	)

460 
	#_POSIX_SIGQUEUE_MAX
 32

	)

461 
	#_POSIX_SSIZE_MAX
 32767

	)

462 
	#_POSIX_STREAM_MAX
 8

	)

463 
	#_POSIX_SS_REPL_MAX
 4

	)

464 
	#_POSIX_SYMLINK_MAX
 255

	)

465 
	#_POSIX_SYMLOOP_MAX
 8

	)

466 
	#_POSIX_THREAD_DESTRUCTOR_ITERATIONS
 4

	)

467 
	#_POSIX_THREAD_KEYS_MAX
 128

	)

468 
	#_POSIX_THREAD_THREADS_MAX
 64

	)

469 
	#_POSIX_TIMER_MAX
 32

	)

470 
	#_POSIX_TRACE_EVENT_NAME_MAX
 30

	)

471 
	#_POSIX_TRACE_NAME_MAX
 8

	)

472 
	#_POSIX_TRACE_SYS_MAX
 8

	)

473 
	#_POSIX_TRACE_USER_EVENT_MAX
 32

	)

474 
	#_POSIX_TTY_NAME_MAX
 9

	)

475 
	#_POSIX_TZNAME_MAX
 6

	)

477 
	#_POSIX2_BC_BASE_MAX
 99

	)

478 
	#_POSIX2_BC_DIM_MAX
 2048

	)

479 
	#_POSIX2_BC_SCALE_MAX
 99

	)

480 
	#_POSIX2_BC_STRING_MAX
 1000

	)

481 
	#_POSIX2_COLL_WEIGHTS_MAX
 2

	)

482 
	#_POSIX2_EXPR_NEST_MAX
 32

	)

483 
	#_POSIX2_LINE_MAX
 2048

	)

484 
	#_POSIX2_RE_DUP_MAX
 255

	)

486 
	#_XOPEN_IOV_MAX
 16

	)

487 
	#_XOPEN_NAME_MAX
 255

	)

488 
	#_XOPEN_PATH_MAX
 1024

	)

492 
	#NL_ARGMAX
 9

	)

493 
	#NL_LANGMAX
 14

	)

494 
	#NL_MSGMAX
 32767

	)

495 
	#NL_NMAX
 
INT_MAX


	)

496 
	#NL_SETMAX
 255

	)

497 
	#NL_TEXTMAX
 
_POSIX2_LINE_MAX


	)

500 #unde‡
NZERO


501 
	#NZERO
 20

	)

	@/usr/include/stdint.h

11 #i‚de‡
_STDINT_H


12 
	#_STDINT_H


	)

14 
	~<bôs/w‹dsize.h
>

18 #i‚de‡
__öt8_t_deföed


19 
	#__öt8_t_deföed


	)

20 sig√d 
	töt8_t
;

21 
	töt16_t
;

22 
	töt32_t
;

23 #i‡
__WORDSIZE
 == 64

24 
	töt64_t
;

26 
	töt64_t
;

30 
	tuöt8_t
;

31 
	tuöt16_t
;

32 #i‚de‡
__uöt32_t_deföed


33 
	#__uöt32_t_deföed


	)

34 
	tuöt32_t
;

36 #i‡
__WORDSIZE
 == 64

37 
	tuöt64_t
;

39 
	tuöt64_t
;

44 sig√d 
	töt_Àa°8_t
;

45 
	töt_Àa°16_t
;

46 
	töt_Àa°32_t
;

47 #i‡
__WORDSIZE
 == 64

48 
	töt_Àa°64_t
;

50 
	töt_Àa°64_t
;

53 
	tuöt_Àa°8_t
;

54 
	tuöt_Àa°16_t
;

55 
	tuöt_Àa°32_t
;

56 #i‡
__WORDSIZE
 == 64

57 
	tuöt_Àa°64_t
;

59 
	tuöt_Àa°64_t
;

64 sig√d 
	töt_Á°8_t
;

65 #i‡
__WORDSIZE
 == 64

66 
	töt_Á°16_t
;

67 
	töt_Á°32_t
;

68 
	töt_Á°64_t
;

70 
	töt_Á°16_t
;

71 
	töt_Á°32_t
;

72 
	töt_Á°64_t
;

75 
	tuöt_Á°8_t
;

76 #i‡
__WORDSIZE
 == 64

77 
	tuöt_Á°16_t
;

78 
	tuöt_Á°32_t
;

79 
	tuöt_Á°64_t
;

81 
	tuöt_Á°16_t
;

82 
	tuöt_Á°32_t
;

83 
	tuöt_Á°64_t
;

88 #i‚de‡
__öçå_t_deföed


89 
	#__öçå_t_deföed


	)

90 #i‡
__WORDSIZE
 == 64

91 
	töçå_t
;

93 
	töçå_t
;

96 #i‡
__WORDSIZE
 == 64

97 
	tuöçå_t
;

99 
	tuöçå_t
;

104 #i‡
__WORDSIZE
 == 64

105 
	tötmax_t
;

106 
	tuötmax_t
;

108 
	tötmax_t
;

109 
	tuötmax_t
;

114 #i‡!
deföed
 (
__˝lu•lus
Ë|| deföed (
__STDC_LIMIT_MACROS
) \

115 || 
	$deföed
 (
__INSIDE_CYGWIN__
)

117 #i‡
__x86_64__


118 
	#__I64
(
n
Ë¿## 
L


	)

119 
	#__U64
(
n
Ë¿## 
UL


	)

121 
	#__I64
(
n
Ë¿## 
LL


	)

122 
	#__U64
(
n
Ë¿## 
ULL


	)

127 
	#INT8_MIN
 (-128)

	)

128 
	#INT16_MIN
 (-32768)

	)

129 
	#INT32_MIN
 (-2147483647 - 1)

	)

130 
	#INT64_MIN
 (-
	`__I64
(9223372036854775807Ë- 1)

	)

132 
	#INT8_MAX
 (127)

	)

133 
	#INT16_MAX
 (32767)

	)

134 
	#INT32_MAX
 (2147483647)

	)

135 
	#INT64_MAX
 (
	`__I64
(9223372036854775807))

	)

137 
	#UINT8_MAX
 (255)

	)

138 
	#UINT16_MAX
 (65535)

	)

139 
	#UINT32_MAX
 (4294967295U)

	)

140 
	#UINT64_MAX
 (
	`__U64
(18446744073709551615))

	)

144 
	#INT_LEAST8_MIN
 (-128)

	)

145 
	#INT_LEAST16_MIN
 (-32768)

	)

146 
	#INT_LEAST32_MIN
 (-2147483647 - 1)

	)

147 
	#INT_LEAST64_MIN
 (-
	`__I64
(9223372036854775807Ë- 1)

	)

149 
	#INT_LEAST8_MAX
 (127)

	)

150 
	#INT_LEAST16_MAX
 (32767)

	)

151 
	#INT_LEAST32_MAX
 (2147483647)

	)

152 
	#INT_LEAST64_MAX
 (
	`__I64
(9223372036854775807))

	)

154 
	#UINT_LEAST8_MAX
 (255)

	)

155 
	#UINT_LEAST16_MAX
 (65535)

	)

156 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

157 
	#UINT_LEAST64_MAX
 (
	`__U64
(18446744073709551615))

	)

161 
	#INT_FAST8_MIN
 (-128)

	)

162 #i‡
__WORDSIZE
 == 64

163 
	#INT_FAST16_MIN
 (-
	`__I64
(9223372036854775807Ë- 1)

	)

164 
	#INT_FAST32_MIN
 (-
	`__I64
(9223372036854775807Ë- 1)

	)

166 
	#INT_FAST16_MIN
 (-2147483647 - 1)

	)

167 
	#INT_FAST32_MIN
 (-2147483647 - 1)

	)

169 
	#INT_FAST64_MIN
 (-
	`__I64
(9223372036854775807Ë- 1)

	)

171 
	#INT_FAST8_MAX
 (127)

	)

172 #i‡
__WORDSIZE
 == 64

173 
	#INT_FAST16_MAX
 (
	`__I64
(9223372036854775807))

	)

174 
	#INT_FAST32_MAX
 (
	`__I64
(9223372036854775807))

	)

176 
	#INT_FAST16_MAX
 (2147483647)

	)

177 
	#INT_FAST32_MAX
 (2147483647)

	)

179 
	#INT_FAST64_MAX
 (
	`__I64
(9223372036854775807))

	)

181 
	#UINT_FAST8_MAX
 (255)

	)

182 #i‡
__WORDSIZE
 == 64

183 
	#UINT_FAST16_MAX
 (
	`__U64
(18446744073709551615))

	)

184 
	#UINT_FAST32_MAX
 (
	`__U64
(18446744073709551615))

	)

186 
	#UINT_FAST16_MAX
 (4294967295U)

	)

187 
	#UINT_FAST32_MAX
 (4294967295U)

	)

189 
	#UINT_FAST64_MAX
 (
	`__U64
(18446744073709551615))

	)

193 #i‡
__WORDSIZE
 == 64

194 
	#INTPTR_MIN
 (-
	`__I64
(9223372036854775807Ë- 1)

	)

195 
	#INTPTR_MAX
 (
	`__I64
(9223372036854775807))

	)

196 
	#UINTPTR_MAX
 (
	`__U64
(18446744073709551615))

	)

198 
	#INTPTR_MIN
 (-2147483647 - 1)

	)

199 
	#INTPTR_MAX
 (2147483647)

	)

200 
	#UINTPTR_MAX
 (4294967295U)

	)

205 
	#INTMAX_MIN
 (-
	`__I64
(9223372036854775807Ë- 1)

	)

206 
	#INTMAX_MAX
 (
	`__I64
(9223372036854775807))

	)

207 
	#UINTMAX_MAX
 (
	`__U64
(18446744073709551615))

	)

211 #i‚de‡
PTRDIFF_MIN


212 #i‡
__WORDSIZE
 == 64

213 
	#PTRDIFF_MIN
 (-9223372036854775807L - 1)

	)

214 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

216 
	#PTRDIFF_MIN
 (-2147483647 - 1)

	)

217 
	#PTRDIFF_MAX
 (2147483647)

	)

221 #i‚de‡
SIG_ATOMIC_MIN


222 
	#SIG_ATOMIC_MIN
 (-2147483647 - 1)

	)

224 #i‚de‡
SIG_ATOMIC_MAX


225 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

228 #i‚de‡
SIZE_MAX


229 #i‡
__WORDSIZE
 == 64

230 
	#SIZE_MAX
 (18446744073709551615UL)

	)

232 
	#SIZE_MAX
 (4294967295U)

	)

236 #i‚de‡
WCHAR_MIN


237 #ifde‡
__WCHAR_MIN__


238 
	#WCHAR_MIN
 
__WCHAR_MIN__


	)

239 
	#WCHAR_MAX
 
__WCHAR_MAX__


	)

241 
	#WCHAR_MIN
 (0)

	)

242 
	#WCHAR_MAX
 (65535)

	)

246 #i‚de‡
WINT_MIN


247 
	#WINT_MIN
 0U

	)

248 
	#WINT_MAX
 (4294967295U)

	)

255 #i‡!
	`deföed
 (
__˝lu•lus
Ë|| deföed (
__STDC_CONSTANT_MACROS
) \

256 || 
	$deföed
 (
__INSIDE_CYGWIN__
)

260 
	#INT8_C
(
x
Ë
	)
x

261 
	#INT16_C
(
x
Ë
	)
x

262 
	#INT32_C
(
x
Ë
	)
x

263 #i‡
__WORDSIZE
 == 64

264 
	#INT64_C
(
x
Ëx ## 
L


	)

266 
	#INT64_C
(
x
Ëx ## 
LL


	)

269 
	#UINT8_C
(
x
Ë
	)
x

270 
	#UINT16_C
(
x
Ë
	)
x

271 
	#UINT32_C
(
x
Ëx ## 
U


	)

272 #i‡
__WORDSIZE
 == 64

273 
	#UINT64_C
(
x
Ëx ## 
UL


	)

275 
	#UINT64_C
(
x
Ëx ## 
ULL


	)

280 #i‡
__WORDSIZE
 == 64

281 
	#INTMAX_C
(
x
Ëx ## 
L


	)

282 
	#UINTMAX_C
(
x
Ëx ## 
UL


	)

284 
	#INTMAX_C
(
x
Ëx ## 
LL


	)

285 
	#UINTMAX_C
(
x
Ëx ## 
ULL


	)

	@/usr/include/string.h

7 #i‚de‡
_STRING_H_


8 
	#_STRING_H_


	)

10 
	~"_™si.h
"

11 
	~<sys/ªít.h
>

12 
	~<sys/cdefs.h
>

13 
	~<sys/„©uªs.h
>

15 
	#__√ed_size_t


	)

16 
	#__√ed_NULL


	)

17 
	~<°ddef.h
>

19 
_BEGIN_STD_C


21 
_PTR
 
_EXFUN
(
memchr
,(c⁄° _PTR, , 
size_t
));

22 
_EXFUN
(
memcmp
,(c⁄° 
_PTR
, c⁄° _PTR, 
size_t
));

23 
_PTR
 
_EXFUN
(
mem˝y
,(_PTR 
__ª°ri˘
, c⁄° _PTR __ª°ri˘, 
size_t
));

24 
_PTR
 
_EXFUN
(
memmove
,(_PTR, c⁄° _PTR, 
size_t
));

25 
_PTR
 
_EXFUN
(
mem£t
,(_PTR, , 
size_t
));

26 *
_EXFUN
(
°rˇt
,(*
__ª°ri˘
, const *__restrict));

27 *
_EXFUN
(
°rchr
,(const *, ));

28 
_EXFUN
(
°rcmp
,(const *, const *));

29 
_EXFUN
(
°rcﬁl
,(const *, const *));

30 *
_EXFUN
(
°r˝y
,(*
__ª°ri˘
, const *__restrict));

31 
size_t
 
_EXFUN
(
°rc•n
,(const *, const *));

32 *
_EXFUN
(
°ªº‹
,());

33 
size_t
 
_EXFUN
(
°æí
,(const *));

34 *
_EXFUN
(
°∫ˇt
,(*
__ª°ri˘
, c⁄° *__ª°ri˘, 
size_t
));

35 
_EXFUN
(
°∫cmp
,(c⁄° *, c⁄° *, 
size_t
));

36 *
_EXFUN
(
°∫˝y
,(*
__ª°ri˘
, c⁄° *__ª°ri˘, 
size_t
));

37 *
_EXFUN
(
°Ωbrk
,(const *, const *));

38 *
_EXFUN
(
°ºchr
,(const *, ));

39 
size_t
 
_EXFUN
(
°r•n
,(const *, const *));

40 *
_EXFUN
(
°r°r
,(const *, const *));

42 #i‚de‡
_REENT_ONLY


43 *
_EXFUN
(
°πok
,(*
__ª°ri˘
, const *__restrict));

46 
size_t
 
_EXFUN
(
°rx‰m
,(*
__ª°ri˘
, const *__restrict, size_t));

48 #i‚de‡
__STRICT_ANSI__


49 *
_EXFUN
(
°πok_r
,(*
__ª°ri˘
, const *__restrict, **__restrict));

51 
_EXFUN
(
bcmp
,(c⁄° *, c⁄° *, 
size_t
));

52 
_EXFUN
(
bc›y
,(c⁄° *, *, 
size_t
));

53 
_EXFUN
(
bzîo
,(*, 
size_t
));

54 
_EXFUN
(
ffs
,());

55 *
_EXFUN
(
ödex
,(const *, ));

56 
_PTR
 
_EXFUN
(
memc˝y
,(_PTR 
__ª°ri˘
, c⁄° _PTR __ª°ri˘, , 
size_t
));

57 
_PTR
 
_EXFUN
(
memp˝y
,(_PTR, c⁄° _PTR, 
size_t
));

58 
_PTR
 
_EXFUN
(
memmem
, (c⁄° _PTR, 
size_t
, const _PTR, size_t));

59 
_PTR
 
_EXFUN
(
memrchr
,(c⁄° _PTR, , 
size_t
));

60 
_PTR
 
_EXFUN
(
øwmemchr
,(const _PTR, ));

61 *
_EXFUN
(
rödex
,(const *, ));

62 *
_EXFUN
(
°p˝y
,(*
__ª°ri˘
, const *__restrict));

63 *
_EXFUN
(
°≤˝y
,(*
__ª°ri˘
, c⁄° *__ª°ri˘, 
size_t
));

64 
_EXFUN
(
°rˇ£cmp
,(const *, const *));

65 *
_EXFUN
(
°rˇ£°r
,(const *, const *));

66 *
_EXFUN
(
°rch∫ul
,(const *, ));

68 #i‡!
deföed
(
__STRICT_ANSI__
Ë|| (
_XOPEN_SOURCE
 - 0) >= 500

69 *
_EXFUN
(
°rdup
,(const *));

71 #i‚de‡
__STRICT_ANSI__


72 *
_EXFUN
(
_°rdup_r
,(
_ªít
 *, const *));

74 #i‡!
deföed
(
__STRICT_ANSI__
Ë|| (
_XOPEN_SOURCE
 - 0) >= 700

75 *
_EXFUN
(
°∫dup
,(c⁄° *, 
size_t
));

77 #i‚de‡
__STRICT_ANSI__


78 *
_EXFUN
(
_°∫dup_r
,(
_ªít
 *, c⁄° *, 
size_t
));

83 #ifde‡
_GNU_SOURCE


84 *
_EXFUN
(
°ªº‹_r
,(, *, 
size_t
));

86 #ifde‡
__GNUC__


87 
_EXFUN
(
°ªº‹_r
,(, *, 
size_t
)Ë
__asm__
 (
__ASMNAME
 ("__xpg_strerror_r"));

89 
_EXFUN
(
__xpg_°ªº‹_r
,(, *, 
size_t
));

90 
	#°ªº‹_r
 
__xpg_°ªº‹_r


	)

93 
size_t
 
_EXFUN
(
°æˇt
,(*, const *, size_t));

94 
size_t
 
_EXFUN
(
°æ˝y
,(*, const *, size_t));

95 
_EXFUN
(
°∫ˇ£cmp
,(c⁄° *, c⁄° *, 
size_t
));

96 
size_t
 
_EXFUN
(
°∫Àn
,(const *, size_t));

97 *
_EXFUN
(
°r£p
,(**, const *));

98 *
_EXFUN
(
°æwr
,(*));

99 *
_EXFUN
(
°ru¥
,(*));

100 #i‚de‡
DEFS_H


101 *
_EXFUN
(
°rsig«l
, (
__signo
));

103 #ifde‡
__CYGWIN__


104 
_EXFUN
(
°πosigno
, (c⁄° *
__«me
));

108 * 
_EXFUN
(
_°ªº‹_r
, (
_ªít
 *, , , *));

110 #i‡
deföed
 
_GNU_SOURCE
 && deföed 
__GNUC__


111 
	#°rdu∑
(
__s
) \

112 (
	`__exãnsi⁄__
 ({c⁄° *
__ö
 = (
__s
); \

113 
size_t
 
__Àn
 = 
	`°æí
 (
__ö
) + 1; \

114 * 
__out
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
); \

115 (*Ë
	`mem˝y
 (
__out
, 
__ö
, 
__Àn
);}))

	)

116 
	#°∫du∑
(
__s
, 
__n
) \

117 (
	`__exãnsi⁄__
 ({c⁄° *
__ö
 = (
__s
); \

118 
size_t
 
__Àn
 = 
	`°∫Àn
 (
__ö
, (
__n
)) + 1; \

119 *
__out
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
); \

120 
__out
[
__Àn
-1] = '\0'; \

121 (*Ë
	`mem˝y
 (
__out
, 
__ö
, 
__Àn
-1);}))

	)

125 #i‚de‡
°rcmpi


126 
	#°rcmpi
 
°rˇ£cmp


	)

128 #i‚de‡
°ricmp


129 
	#°ricmp
 
°rˇ£cmp


	)

131 #i‚de‡
°∫cmpi


132 
	#°∫cmpi
 
°∫ˇ£cmp


	)

134 #i‚de‡
°∫icmp


135 
	#°∫icmp
 
°∫ˇ£cmp


	)

140 
	~<sys/°rög.h
>

142 
	g_END_STD_C


	@dma.h

9 #i‚de‡
_DMA_H_


10 
	#_DMA_H_


	)

12 
	~<hÆ_ty≥s.h
>

14 
	#DMA_CHANNEL_0
 0x01

	)

15 
	#DMA_CHANNEL_1
 0x02

	)

18 
	#DMA_VLEN_USE_LEN
 0x00

19 
	#DMA_VLEN_FIXED
 0x00

20 
	#DMA_VLEN_1_P_VALOFFIRST
 0x01

21 
	#DMA_VLEN_VALOFFIRST
 0x02

22 
	#DMA_VLEN_1_P_VALOFFIRST_P_1
 0x03

23 
	#DMA_VLEN_1_P_VALOFFIRST_P_2
 0x04

24 

	)

25 
	#DMA_WORDSIZE_BYTE
 0x00

26 
	#DMA_WORDSIZE_WORD
 0x01

27 

	)

28 
	#DMA_TMODE_SINGLE
 0x00

29 
	#DMA_TMODE_BLOCK
 0x01

30 
	#DMA_TMODE_SINGLE_REPEATED
 0x02

31 
	#DMA_TMODE_BLOCK_REPEATED
 0x03

32 

	)

34 #i‡(
chù
 == 2544)

35 
	#DMA_TRIG_NONE
 0

36 
	#DMA_TRIG_PREV
 1

37 
	#DMA_TRIG_T1_CH0
 2

38 
	#DMA_TRIG_T1_CH1
 3

39 
	#DMA_TRIG_T1_CH2
 4

40 
	#DMA_TRIG_T2_EVENT1
 5

41 
	#DMA_TRIG_T2_EVENT2
 6

42 
	#DMA_TRIG_T3_CH0
 7

43 
	#DMA_TRIG_T3_CH1
 8

44 
	#DMA_TRIG_T4_CH0
 9

45 
	#DMA_TRIG_T4_CH1
 10

46 
	#DMA_TRIG_RADIO1
 11

47 
	#DMA_TRIG_URX0
 14

48 
	#DMA_TRIG_UTX0
 15

49 
	#DMA_TRIG_FLASH
 18

50 
	#DMA_TRIG_RADIO
 19

51 
	#DMA_TRIG_IOC_0_0
 20

52 
	#DMA_TRIG_IOC_0_1
 21

53 
	#DMA_TRIG_IOC_0_2
 22

54 
	#DMA_TRIG_IOC_0_3
 23

55 
	#DMA_TRIG_IOC_1_0
 24

56 
	#DMA_TRIG_IOC_1_1
 25

57 
	#DMA_TRIG_IOC_1_2
 26

58 
	#DMA_TRIG_IOC_1_3
 27

59 
	#DMA_TRIG_ST
 28

60 
	#DMA_TRIG_ENC_DW
 29

61 
	#DMA_TRIG_ENC_UP
 30

62 
	#DMA_TRIG_DBG_BW
 31

63 

	)

64 #ñi‡(
chù
 == 2543 || chip == 2545)

65 
	#DMA_TRIG_NONE
 0

66 
	#DMA_TRIG_PREV
 1

67 
	#DMA_TRIG_T1_CH0
 2

68 
	#DMA_TRIG_T1_CH1
 3

69 
	#DMA_TRIG_T1_CH2
 4

70 
	#DMA_TRIG_T2_EVENT1
 5

71 
	#DMA_TRIG_T2_EVENT2
 6

72 
	#DMA_TRIG_T3_CH0
 7

73 
	#DMA_TRIG_T3_CH1
 8

74 
	#DMA_TRIG_T4_CH0
 9

75 
	#DMA_TRIG_T4_CH1
 10

76 
	#DMA_TRIG_RADIO1
 11

77 
	#DMA_TRIG_IOC_0
 12

78 
	#DMA_TRIG_IOC_1
 13

79 
	#DMA_TRIG_URX0
 14

80 
	#DMA_TRIG_UTX0
 15

81 
	#DMA_TRIG_ST
 16

82 
	#DMA_TRIG_FLASH
 18

83 
	#DMA_TRIG_RADIO
 19

84 
	#DMA_TRIG_ADC_CHALL
 20

85 
	#DMA_TRIG_ADC_CH0
 21

86 
	#DMA_TRIG_ADC_CH1
 22

87 
	#DMA_TRIG_ADC_CH2
 23

88 
	#DMA_TRIG_ADC_CH3
 24

89 
	#DMA_TRIG_ADC_CH4
 25

90 
	#DMA_TRIG_ADC_CH5
 26

91 
	#DMA_TRIG_ADC_CH6
 27

92 
	#DMA_TRIG_ADC_CH7
 28

93 
	#DMA_TRIG_ENC_DW
 29

94 
	#DMA_TRIG_ENC_UP
 30

95 
	#DMA_TRIG_DBG_BW
 31

96 

	)

97 #ñi‡(
chù
 == 2541)

98 
	#DMA_TRIG_NONE
 0

99 
	#DMA_TRIG_PREV
 1

100 
	#DMA_TRIG_T1_CH0
 2

101 
	#DMA_TRIG_T1_CH1
 3

102 
	#DMA_TRIG_T1_CH2
 4

103 
	#DMA_TRIG_T2_EVENT1
 5

104 
	#DMA_TRIG_T2_EVENT2
 6

105 
	#DMA_TRIG_T3_CH0
 7

106 
	#DMA_TRIG_T3_CH1
 8

107 
	#DMA_TRIG_T4_CH0
 9

108 
	#DMA_TRIG_T4_CH1
 10

109 
	#DMA_TRIG_RADIO1
 11

110 
	#DMA_TRIG_IOC_0
 12

111 
	#DMA_TRIG_IOC_1
 13

112 
	#DMA_TRIG_URX0
 14

113 
	#DMA_TRIG_UTX0
 15

114 
	#DMA_TRIG_URX1
 16

115 
	#DMA_TRIG_UTX1
 17

116 
	#DMA_TRIG_FLASH
 18

117 
	#DMA_TRIG_RADIO
 19

118 
	#DMA_TRIG_ADC_CHALL
 20

119 
	#DMA_TRIG_ADC_CH0
 21

120 
	#DMA_TRIG_ADC_CH1
 22

121 
	#DMA_TRIG_ADC_CH2
 23

122 
	#DMA_TRIG_ADC_CH3
 24

123 
	#DMA_TRIG_ADC_CH4
 25

124 
	#DMA_TRIG_ADC_CH5
 26

125 
	#DMA_TRIG_ADC_CH6
 27

126 
	#DMA_TRIG_ADC_CH7
 28

127 
	#DMA_TRIG_ENC_DW
 29

128 
	#DMA_TRIG_ENC_UP
 30

129 
	#DMA_TRIG_DBG_BW
 31

131 

	)

133 
	#DMA_SRCINC_0
 0x00

134 
	#DMA_SRCINC_1
 0x01

135 
	#DMA_SRCINC_2
 0x02

136 
	#DMA_SRCINC_M1
 0x03

137 

	)

138 
	#DMA_DESTINC_0
 0x00

139 
	#DMA_DESTINC_1
 0x01

140 
	#DMA_DESTINC_2
 0x02

141 
	#DMA_DESTINC_M1
 0x03

142 

	)

143 
	#DMA_IRQMASK_DISABLE
 0x00

144 
	#DMA_IRQMASK_ENABLE
 0x01

145 

	)

146 
	#DMA_M8_USE_8_BITS
 0x00

147 
	#DMA_M8_USE_7_BITS
 0x01

148 

	)

149 
	#DMA_PRI_LOW
 0x00

150 
	#DMA_PRI_GUARANTEED
 0x01

151 
	#DMA_PRI_HIGH
 0x02

152 
	#DMA_PRI_ABSOLUTE
 0x03

153 

	)

156 #¥agm®
bôfõlds
=
ªvî£d


158 
uöt8
 
	mSRCADDRH
;

159 
uöt8
 
	mSRCADDRL
;

160 
uöt8
 
	mDESTADDRH
;

161 
uöt8
 
	mDESTADDRL
;

162 
uöt8
 
	mVLEN
 : 3;

163 
uöt8
 
	mLENH
 : 5;

164 
uöt8
 
	mLENL
 : 8;

165 
uöt8
 
	mWORDSIZE
 : 1;

166 
uöt8
 
	mTMODE
 : 2;

167 
uöt8
 
	mTRIG
 : 5;

168 
uöt8
 
	mSRCINC
 : 2;

169 
uöt8
 
	mDESTINC
 : 2;

170 
uöt8
 
	mIRQMASK
 : 1;

171 
uöt8
 
	mM8
 : 1;

172 
uöt8
 
	mPRIORITY
 : 2;

173 } 
	tDMA_DESC
;

174 #¥agm®
bôfõlds
=

181 
	#DMA_SET_ADDR_DESC0
(
addr
Ë
	`°
–
DMA0CFGH
 = 
	`HI_UINT16
◊ddr); 
DMA0CFGL
 = 
	`LO_UINT16
◊ddr); )

	)

182 
	#DMA_SET_ADDR_DESC1234
(
addr
Ë
	`°
–
DMA1CFGH
 = 
	`HI_UINT16
◊ddr); 
DMA1CFGL
 = 
	`LO_UINT16
◊ddr); )

	)

184 
	#DMA_CHANNEL_ARM
(
ch™√l_bômask
Ë
	`°
–
DMAARM
 = (ch™√l_bômaskË& 0x1F; )

	)

185 
	#DMA_CHANNEL_TRIG
(
ch™√l_bômask
Ë
	`°
–
DMAREQ
 = (ch™√l_bômask); )

	)

186 
	#DMA_CHANNEL_ABORT
(
ch™√l_bômask
Ë(
DMAARM
 = (0x80 | (ch™√l_bômask)))

	)

187 
	#DMA_CHANNEL_ACTIVE
(
ch™√l_bômask
Ë(
DMAARM
 & (ch™√l_bômask))

	)

189 
	#DMA_INT_CLEAR
(Ë(
DMAIF
 = 0)

	)

190 
	#DMA_INT_ENABLE
(Ë(
DMAIE
 = 1)

	)

191 
	#DMA_INT_DISABLE
(Ë(
DMAIE
 = 0)

	)

	@hal_types.h

8 #i‚de‡
HAL_TYPES_H


9 
	#HAL_TYPES_H


	)

11 #ifde‡
__˝lu•lus


21 sig√d 
	töt8
;

22 
	tuöt8
;

24 sig√d 
	töt16
;

25 
	tuöt16
;

27 sig√d 
	töt32
;

28 
	tuöt32
;

30 (*
ISR_FUNC_PTR
)();

31 (*
VFPTR
)();

41 #ifde‡
__IAR_SYSTEMS_ICC__


43 
	#_PRAGMA
(
x
Ë
	`_Pøgma
(#x)

	)

45 #i‡
deföed
 
__ICC430__


47 #i‚de‡
CODE


48 
	#CODE


	)

50 #i‚de‡
XDATA


51 
	#XDATA


	)

53 
	#FAR


	)

54 
	#NOP
(Ë
	`asm
("NOP")

	)

56 
	#HAL_ISR_FUNC_DECLARATION
(
f
,
v
) \

57 
	`_PRAGMA
(
ve˘‹
=
v
##
_VECTOR
Ë
__öãºu±
 
	`f
()

	)

58 
	#HAL_ISR_FUNC_PROTOTYPE
(
f
,
v
) \

59 
	`_PRAGMA
(
ve˘‹
=
v
##
_VECTOR
Ë
__öãºu±
 
	`f
()

	)

60 
	#HAL_ISR_FUNCTION
(
f
,
v
) \

61 
	`HAL_ISR_FUNC_PROTOTYPE
(
f
,
v
); 
	`HAL_ISR_FUNC_DECLARATION
(f,v)

	)

67 #ñi‡
deföed
 
__ICC8051__


69 #i‚de‡
BSP_H


70 
	#CODE
 
__code


	)

71 
	#XDATA
 
__xd©a


	)

74 
	#FAR


	)

75 
	#NOP
(Ë
	`asm
("NOP")

	)

77 
	#HAL_MCU_LITTLE_ENDIAN
(Ë
__LITTLE_ENDIAN__


	)

78 
	#HAL_ISR_FUNC_DECLARATION
(
f
,
v
) \

79 
	`_PRAGMA
(
ve˘‹
=
v
Ë
__√¨_func
 
__öãºu±
 
	`f
()

	)

80 
	#HAL_ISR_FUNC_PROTOTYPE
(
f
,
v
) \

81 
	`_PRAGMA
(
ve˘‹
=
v
Ë
__√¨_func
 
__öãºu±
 
	`f
()

	)

82 
	#HAL_ISR_FUNCTION
(
f
,
v
) \

83 
	`HAL_ISR_FUNC_PROTOTYPE
(
f
,
v
); 
	`HAL_ISR_FUNC_DECLARATION
(f,v)

	)

88 #ñi‡
deföed
 
__ICCARM__


90 #i‚de‡
CODE


91 
	#CODE


	)

93 #i‚de‡
XDATA


94 
	#XDATA


	)

96 
	#FAR


	)

97 
	#NOP
(Ë
	`asm
("NOP")

	)

99 
	#HAL_ISR_FUNC_DECLARATION
(
f
,
v
)

	)

100 
	#HAL_ISR_FUNC_PROTOTYPE
(
f
,
v
)

	)

101 
	#HAL_ISR_FUNCTION
(
f
,
v
)

	)

111 #ñi‡
deföed
 
__KEIL__


112 
	~<öåös.h
>

113 
	#BIG_ENDIAN


	)

115 
	#CODE
 
code


	)

116 
	#XDATA
 
xd©a


	)

117 
	#FAR


	)

118 
	#NOP
(Ë
	`_n›_
()

	)

120 
	#HAL_ISR_FUNC_DECLARATION
(
f
,
v
) \

121 
	`f
(Ë
öãºu±
 
v


	)

122 
	#HAL_ISR_FUNC_PROTOTYPE
(
f
,
v
) \

123 
	`f
()

	)

124 
	#HAL_ISR_FUNCTION
(
f
,
v
) \

125 
	`HAL_ISR_FUNC_PROTOTYPE
(
f
,
v
); 
	`HAL_ISR_FUNC_DECLARATION
(f,v)

	)

127 
	ti°©e_t
;

130 
	#__code
 
code


	)

131 
	#__xd©a
 
xd©a


	)

137 #ñi‡
deföed
 
WIN32


139 
	#DESKTOP


	)

141 
	#CODE


	)

142 
	#XDATA


	)

143 
	~"wödows.h
"

144 #i‚de‡
FAR


145 
	#FAR
 
Ár


	)

147 #ifde‡
_MSC_VER


148 #¥agm®
w¨nög
 (
dißbÀ
 :4761)

149 #¥agm®
w¨nög
 (
dißbÀ
 :4100)

156 #ñi‡
deföed
 
__löux


158 
	#DESKTOP


	)

159 
	#LINUX


	)

161 
	#CODE


	)

162 
	#XDATA


	)

163 #i‚de‡
FAR


164 
	#FAR
 
Ár


	)

172 #ñi‡
__TI_COMPILER_VERSION__


173 
	#CODE


	)

174 
	#XDATA


	)

175 
	#FAR


	)

177 
	ti°©e_t
;

189 #ifde‡
__˝lu•lus


	@hal_wait.h

8 #i‚de‡
HAL_WAIT_H


9 
	#HAL_WAIT_H


	)

15 
	~<hÆ_ty≥s.h
>

27 
hÆMcuWaôUs
(
uöt16
 
u£c
);

28 
hÆMcuWaôMs
(
uöt16
 
m£c
);

	@ioCC254x_bitdef.h

10 #i‚de‡
_IOCC254X_BITDEF_H


11 
	#_IOCC254X_BITDEF_H


	)

14 
	#BIT7
 0x80

	)

15 
	#BIT6
 0x40

	)

16 
	#BIT5
 0x20

	)

17 
	#BIT4
 0x10

	)

18 
	#BIT3
 0x08

	)

19 
	#BIT2
 0x04

	)

20 
	#BIT1
 0x02

	)

21 
	#BIT0
 0x01

	)

31 
	#MEMCTR_XMAP
 0x08

32 

	)

42 
	#DPS_DPS
 0x01

43 

	)

61 
	#IEN1_P0IE
 0x20

62 
	#IEN1_T4IE
 0x10

63 
	#IEN1_T3IE
 0x08

64 
	#IEN1_T2IE
 0x04

65 
	#IEN1_T1IE
 0x02

66 
	#IEN1_DMAIE
 0x01

67 

	)

69 
	#IEN2_WDTIE
 0x20

	)

70 
	#IEN2_P1IE
 0x10

	)

71 #i‡(
chù
 == 2541)

72 
	#IEN2_UTX1IE
 0x08

73 #ñi‡(
chù
 == 2543 || chip == 2545)

74 
	#IEN2_I2CIE
 0x08

76 
	#IEN2_UTX0IE
 0x04

	)

77 
	#IEN2_P2IE
 0x02

	)

78 
	#IEN2_USBIE
 0x02

	)

79 
	#IEN2_RFIE
 0x01

	)

86 
	#S1CON_RFIF_1
 0x02

	)

87 
	#S1CON_RFIF_0
 0x01

	)

94 
	#IP1_IPG5
 0x20

	)

95 
	#IP1_IPG4
 0x10

	)

96 
	#IP1_IPG3
 0x08

	)

97 
	#IP1_IPG2
 0x04

	)

98 
	#IP1_IPG1
 0x02

	)

99 
	#IP1_IPG0
 0x01

	)

102 
	#IP0_IPG5
 0x20

	)

103 
	#IP0_IPG4
 0x10

	)

104 
	#IP0_IPG3
 0x08

	)

105 
	#IP0_IPG2
 0x04

	)

106 
	#IP0_IPG1
 0x02

	)

107 
	#IP0_IPG0
 0x01

	)

115 
	#SRCRC_FORCE_RESET
 0x20

116 
	#SRCRC_CRC_RESULT
 (0x03 << 2)

117 
	#SRCRC_CRC_RESULT_PASS
 (0x00 << 2)

118 
	#SRCRC_CRC_RESULT_LOW
 (0x01 << 2)

119 
	#SRCRC_CRC_RESULT_HIGH
 (0x02 << 2)

120 
	#SRCRC_CRC_RESULT_BOTH
 (0x03 << 2)

121 
	#SRCRC_CRC_RESET_EN
 0x01

122 

	)

124 
	#PCON_IDLE
 0x01

	)

127 
	#OSC32K_CALDIS
 0x80

	)

128 
	#SLEEPCMD_MODE
 (0x03)

129 
	#SLEEPCMD_MODE_IDLE
 (0x00)

	)

130 
	#SLEEPCMD_MODE_PM1
 (0x01)

	)

131 #i‡(
chù
 == 2541 || chip == 2543 || chip == 2545)

132 
	#SLEEPCMD_MODE_PM2
 (0x02)

	)

133 
	#SLEEPCMD_MODE_PM3
 (0x03)

	)

137 
	#SLEEPSTA_CLK32K_CALDIS
 0x80

138 
	#SLEEPSTA_RST
 (0x03 << 3)

139 
	#SLEEPSTA_RST_POR_BOD
 (0x00 << 3)

140 
	#SLEEPSTA_RST_EXT
 (0x01 << 3)

141 
	#SLEEPSTA_RST_WDT
 (0x02 << 3)

142 
	#SLEEPSTA_RST_CLK_LOSS
 (0x03 << 3)

143 
	#SLEEPSTA_CLK32K
 0x01

144 

	)

146 
	#STLOAD_LDRDY
 0x01

	)

150 
	#CLKCON_OSC32K
 0x80

151 
	#CLKCON_OSC
 0x40

152 
	#CLKCON_TICKSPD
 (0x07 << 3)

153 
	#CLKCON_TICKSPD_32M
 (0x00 << 3)

	)

154 
	#CLKCON_TICKSPD_16M
 (0x01 << 3)

	)

155 
	#CLKCON_TICKSPD_8M
 (0x02 << 3)

	)

156 
	#CLKCON_TICKSPD_4M
 (0x03 << 3)

	)

157 
	#CLKCON_TICKSPD_2M
 (0x04 << 3)

	)

158 
	#CLKCON_TICKSPD_1M
 (0x05 << 3)

	)

159 
	#CLKCON_TICKSPD_500K
 (0x06 << 3)

	)

160 
	#CLKCON_TICKSPD_250K
 (0x07 << 3)

	)

161 
	#CLKCON_CLKSPD
 (0x07)

162 
	#CLKCON_CLKSPD_32M
 (0x00)

	)

163 
	#CLKCON_CLKSPD_16M
 (0x01)

	)

164 
	#CLKCON_CLKSPD_8M
 (0x02)

	)

165 
	#CLKCON_CLKSPD_4M
 (0x03)

	)

166 
	#CLKCON_CLKSPD_2M
 (0x04)

	)

167 
	#CLKCON_CLKSPD_1M
 (0x05)

	)

168 
	#CLKCON_CLKSPD_500K
 (0x06)

	)

169 
	#CLKCON_CLKSPD_250K
 (0x07)

	)

172 
	#CLD_EN
 0x01

173 

	)

180 
	#FCTL_BUSY
 0x80

	)

181 
	#FCTL_FULL
 0x40

	)

182 
	#FCTL_ABORT
 0x20

	)

183 
	#FCTL_CM
 (0x03 << 2)

184 
	#FCTL_CM_DIS
 (0x00 << 2)

185 
	#FCTL_CM_EN
 (0x01 << 2)

186 
	#FCTL_CM_PREFETCH
 (0x02 << 2)

187 
	#FCTL_CM_REALTIME
 (0x03 << 2)

188 
	#FCTL_WRITE
 0x02

	)

189 
	#FCTL_ERASE
 0x01

	)

203 #i‡(
chù
 == 2541)

212 
	#PERCFG_T1CFG
 0x40

213 
	#PERCFG_T3CFG
 0x20

214 
	#PERCFG_T4CFG
 0x10

215 
	#PERCFG_U1CFG
 0x02

216 
	#PERCFG_U0CFG
 0x01

217 
	#PERCFG_U0CFG_ALT1
 0x00

218 
	#PERCFG_U0CFG_ALT2
 0x01

219 

	)

221 
	#APCFG_APCFG7
 0x80

222 
	#APCFG_APCFG6
 0x40

	)

223 
	#APCFG_APCFG5
 0x20

	)

224 
	#APCFG_APCFG4
 0x10

	)

225 
	#APCFG_APCFG3
 0x08

	)

226 
	#APCFG_APCFG2
 0x04

	)

227 
	#APCFG_APCFG1
 0x02

	)

228 
	#APCFG_APCFG0
 0x01

	)

231 
	#P0SEL_SELP0_7
 0x80

232 
	#P0SEL_SELP0_6
 0x40

	)

233 
	#P0SEL_SELP0_5
 0x20

	)

234 
	#P0SEL_SELP0_4
 0x10

	)

235 
	#P0SEL_SELP0_3
 0x08

	)

236 
	#P0SEL_SELP0_2
 0x04

	)

237 
	#P0SEL_SELP0_1
 0x02

	)

238 
	#P0SEL_SELP0_0
 0x01

	)

241 
	#P1SEL_SELP1_7
 0x80

242 
	#P1SEL_SELP1_6
 0x40

	)

243 
	#P1SEL_SELP1_5
 0x20

	)

244 
	#P1SEL_SELP1_4
 0x10

	)

245 
	#P1SEL_SELP1_3
 0x08

	)

246 
	#P1SEL_SELP1_2
 0x04

	)

247 
	#P1SEL_SELP1_1
 0x02

	)

248 
	#P1SEL_SELP1_0
 0x01

	)

251 
	#P2SEL_PRI3P1
 0x40

252 
	#P2SEL_PRI2P1
 0x20

253 
	#P2SEL_PRI1P1
 0x10

254 
	#P2SEL_PRI0P1
 0x08

255 
	#P2SEL_SELP2_4
 0x04

256 
	#P2SEL_SELP2_3
 0x02

257 
	#P2SEL_SELP2_0
 0x01

258 

	)

260 
	#P1INP_MDP1
 0xFC

261 
	#P1INP_MDP1_P1_7
 0x80

262 
	#P1INP_MDP1_P1_6
 0x40

263 
	#P1INP_MDP1_P1_5
 0x20

264 
	#P1INP_MDP1_P1_4
 0x10

265 
	#P1INP_MDP1_P1_3
 0x08

266 
	#P1INP_MDP1_P1_2
 0x04

267 

	)

269 
	#P2INP_PDUP2
 0x80

270 
	#P2INP_PDUP1
 0x40

271 
	#P2INP_PDUP0
 0x20

272 
	#P2INP_MDP2
 0x1F

273 
	#P2INP_MDP2_P2_4
 0x10

274 
	#P2INP_MDP2_P2_3
 0x10

275 
	#P2INP_MDP2_P2_2
 0x10

276 
	#P2INP_MDP2_P2_1
 0x10

277 
	#P2INP_MDP2_P2_0
 0x10

278 

	)

289 
	#P2DIR_PRIP0
 0xC0

290 
	#P2DIR_PRIP0_USART0
 (0x00 << 6)

291 
	#P2DIR_PRIP0_USART1
 (0x01 << 6)

292 
	#P2DIR_PRIP0_T1_0_1
 (0x02 << 6)

293 
	#P2DIR_PRIP0_T1_2_3
 (0x03 << 6)

294 
	#P2DIR_DIRP2
 0x1F

295 

	)

299 
	#P2INP_PDUP2
 0x80

300 
	#P2INP_PDUP1
 0x40

301 
	#P2INP_PDUP0
 0x20

302 
	#P2INP_MDP2
 0x1F

303 

	)

311 
	#PICTL_PADSC
 0x80

312 
	#PICTL_P2ICON
 0x08

313 
	#PICTL_P1ICONH
 0x04

314 
	#PICTL_P1ICONL
 0x02

315 
	#PICTL_P0ICON
 0x01

316 

	)

324 
	#PMUX_CKOEN
 0x80

325 
	#PMUX_CKOPIN
 (0x07 << 4)

326 
	#PMUX_DREGSTA
 0x04

327 
	#PMUX_DREGSTAPIN
 (0x07)

328 

	)

343 #ñi‡(
chù
 == 2543)

352 
	#PERCFG_PRI0P2
 (0x03 << 6)

353 
	#PERCFG_PRI0P2_USART0
 (0x00 << 6)

354 
	#PERCFG_PRI0P2_T1
 (0x01 << 6)

355 
	#PERCFG_PRI0P2_T4
 (0x02 << 6)

356 
	#PERCFG_T1CFG
 0x20

	)

357 
	#PERCFG_T3CFG
 0x10

	)

358 
	#PERCFG_T4CFG
 0x08

	)

359 
	#PERCFG_I2CCFG
 0x04

	)

360 
	#PERCFG_U0CFG
 (0x03)

361 
	#PERCFG_U0CFG_ALT1
 (0x00)

362 
	#PERCFG_U0CFG_ALT2
 (0x01)

363 
	#PERCFG_U0CFG_ALT3
 (0x02)

364 

	)

366 
	#APCFG_APCFG7
 0x80

367 
	#APCFG_APCFG6
 0x40

	)

368 
	#APCFG_APCFG5
 0x20

	)

369 
	#APCFG_APCFG4
 0x10

	)

370 
	#APCFG_APCFG3
 0x08

	)

371 
	#APCFG_APCFG2
 0x04

	)

372 
	#APCFG_APCFG1
 0x02

	)

373 
	#APCFG_APCFG0
 0x01

	)

376 
	#P0SEL_SELP0_7
 0x80

377 
	#P0SEL_SELP0_6
 0x40

	)

378 
	#P0SEL_SELP0_5
 0x20

	)

379 
	#P0SEL_SELP0_4
 0x10

	)

380 
	#P0SEL_SELP0_3
 0x08

	)

381 
	#P0SEL_SELP0_2
 0x04

	)

382 
	#P0SEL_SELP0_1
 0x02

	)

383 
	#P0SEL_SELP0_0
 0x01

	)

386 
	#P1SEL_SELP1_4
 0x10

387 
	#P1SEL_SELP1_3
 0x08

	)

388 
	#P1SEL_SELP1_2
 0x04

	)

389 
	#P1SEL_SELP1_1
 0x02

	)

390 
	#P1SEL_SELP1_0
 0x01

	)

393 
	#P2SEL_SELP2_2
 0x04

394 
	#P2SEL_SELP2_1
 0x02

	)

395 
	#P2SEL_SELP2_0
 0x01

	)

398 
	#PPRI_PRI_P1_2
 0x80

399 
	#PPRI_PRI_P1_1
 (0x03 << 5)

400 
	#PPRI_PRI_P1_1_T1
 (0x00 << 5)

401 
	#PPRI_PRI_P1_1_T3
 (0x01 << 5)

402 
	#PPRI_PRI_P1_1_T4
 (0x02 << 5)

403 
	#PPRI_PRI_P1_0
 (0x03 << 3)

404 
	#PPRI_PRI_P1_0_T1
 (0x00 << 3)

405 
	#PPRI_PRI_P1_0_T3
 (0x01 << 3)

406 
	#PPRI_PRI_P1_0_T4
 (0x02 << 3)

407 
	#PPRI_PRI0P1
 0x04

408 
	#PPRI_PRI1P0
 0x02

409 
	#PPRI_PRI0P0
 0x01

410 

	)

424 
	#PPULL_PDUP2L
 0x10

425 
	#PPULL_PDUP1H
 0x08

426 
	#PPULL_PDUP1L
 0x04

427 
	#PPULL_PDUP0H
 0x02

428 
	#PPULL_PDUP0L
 0x01

429 

	)

437 
	#PICTL_PADSC
 0x40

438 
	#PICTL_P2ICONL
 0x10

439 
	#PICTL_P1ICONH
 0x08

440 
	#PICTL_P1ICONL
 0x04

441 
	#PICTL_P0ICONH
 0x02

442 
	#PICTL_P0ICONL
 0x01

443 

	)

451 
	#PMUX_CKOEN
 0x80

452 
	#PMUX_CKOPIN
 (0x07 << 4)

453 
	#PMUX_DREGSTA
 0x04

454 
	#PMUX_DREGSTAPIN
 (0x07)

455 

	)

470 #ñi‡(
chù
 == 2544)

477 
	#P0SEL0_SELP0_1
 0xF0

	)

478 
	#P0SEL0_SELP0_0
 0x0F

	)

481 
	#P0SEL1_SELP0_3
 0xF0

	)

482 
	#P0SEL1_SELP0_2
 0x0F

	)

485 
	#P1SEL0_SELP1_1
 0xF0

	)

486 
	#P1SEL0_SELP1_0
 0x0F

	)

489 
	#P1SEL1_SELP1_3
 0xF0

	)

490 
	#P1SEL1_SELP1_2
 0x0F

	)

493 
	#PDIR_DIRP1_3
 0x80

	)

494 
	#PDIR_DIRP1_2
 0x40

	)

495 
	#PDIR_DIRP1_1
 0x20

	)

496 
	#PDIR_DIRP1_0
 0x10

	)

497 
	#PDIR_DIRP0_3
 0x08

	)

498 
	#PDIR_DIRP0_2
 0x04

	)

499 
	#PDIR_DIRP0_1
 0x02

	)

500 
	#PDIR_DIRP0_0
 0x01

	)

503 
	#PINP_MDP1_3
 0x80

	)

504 
	#PINP_MDP1_2
 0x40

	)

505 
	#PINP_MDP0_3
 0x08

	)

506 
	#PINP_MDP0_2
 0x04

	)

507 
	#PINP_MDP0_1
 0x02

	)

508 
	#PINP_MDP0_0
 0x01

	)

511 
	#PPULL_PDUP1_3
 0x80

	)

512 
	#PPULL_PDUP1_2
 0x40

	)

513 
	#PPULL_PADSC
 0x20

	)

514 
	#PPULL_PDUP0_3
 0x08

	)

515 
	#PPULL_PDUP0_2
 0x04

	)

516 
	#PPULL_PDUP0_1
 0x02

	)

517 
	#PPULL_PDUP0_0
 0x01

	)

526 
	#PICTL_P1ICON_3
 0x80

	)

527 
	#PICTL_P1ICON_2
 0x40

	)

528 
	#PICTL_P1ICON_1
 0x20

	)

529 
	#PICTL_P1ICON_0
 0x10

	)

530 
	#PICTL_P0ICON_3
 0x08

	)

531 
	#PICTL_P0ICON_2
 0x04

	)

532 
	#PICTL_P0ICON_1
 0x02

	)

533 
	#PICTL_P0ICON_0
 0x01

	)

555 #ñi‡(
chù
 == 2545)

566 
	#PERCFG_T1CFG
 0x20

	)

567 
	#PERCFG_T3CFG
 0x10

	)

568 
	#PERCFG_T4CFG
 0x08

	)

569 
	#PERCFG_I2CCFG
 0x04

	)

570 
	#PERCFG_U0CFG
 (0x03)

571 
	#PERCFG_U0CFG_ALT1
 (0x00)

572 
	#PERCFG_U0CFG_ALT2
 (0x01)

573 
	#PERCFG_U0CFG_ALT3
 (0x02)

574 

	)

576 
	#APCFG_APCFG7
 0x80

577 
	#APCFG_APCFG6
 0x40

	)

578 
	#APCFG_APCFG5
 0x20

	)

579 
	#APCFG_APCFG4
 0x10

	)

580 
	#APCFG_APCFG3
 0x08

	)

581 
	#APCFG_APCFG2
 0x04

	)

582 
	#APCFG_APCFG1
 0x02

	)

583 
	#APCFG_APCFG0
 0x01

	)

586 
	#P0SEL_SELP0_7
 0x80

587 
	#P0SEL_SELP0_6
 0x40

	)

588 
	#P0SEL_SELP0_5
 0x20

	)

589 
	#P0SEL_SELP0_4
 0x10

	)

590 
	#P0SEL_SELP0_3
 0x08

	)

591 
	#P0SEL_SELP0_2
 0x04

	)

592 
	#P0SEL_SELP0_1
 0x02

	)

593 
	#P0SEL_SELP0_0
 0x01

	)

596 
	#P1SEL_SELP1_6
 0x40

597 
	#P1SEL_SELP1_5
 0x20

	)

598 
	#P1SEL_SELP1_4
 0x10

	)

599 
	#P1SEL_SELP1_3
 0x08

	)

600 
	#P1SEL_SELP1_2
 0x04

	)

601 
	#P1SEL_SELP1_1
 0x02

	)

602 
	#P1SEL_SELP1_0
 0x01

	)

605 
	#P2SEL_SELP2_7
 0x80

606 
	#P2SEL_SELP2_6
 0x40

	)

607 
	#P2SEL_SELP2_5
 0x20

	)

608 
	#P2SEL_SELP2_4
 0x10

	)

609 
	#P2SEL_SELP2_3
 0x08

	)

610 
	#P2SEL_SELP2_2
 0x04

	)

611 
	#P2SEL_SELP2_1
 0x02

	)

612 
	#P2SEL_SELP2_0
 0x01

	)

615 
	#PPRI_OBSLOC
 0x40

616 
	#PPRI_PRI0P2
 0x20

617 
	#PPRI_PRI1P1
 0x18

618 
	#PPRI_PRI1P1_USART
 (0x00 << 3)

619 
	#PPRI_PRI1P1_T3
 (0x01 << 3)

620 
	#PPRI_PRI1P1_I2C
 (0x10 << 3)

621 
	#PPRI_PRI0P1
 0x04

622 
	#PPRI_PRI0P0
 0x01

623 

	)

641 
	#PPULL_PDUP3H
 0x80

	)

642 
	#PPULL_PDUP3L
 0x40

	)

643 
	#PPULL_PDUP2H
 0x20

	)

644 
	#PPULL_PDUP2L
 0x10

	)

645 
	#PPULL_PDUP1H
 0x08

	)

646 
	#PPULL_PDUP1L
 0x04

	)

647 
	#PPULL_PDUP0H
 0x02

648 
	#PPULL_PDUP0L
 0x01

649 

	)

657 
	#PICTL_PADSC
 0x40

658 
	#PICTL_P2ICONH
 0x20

	)

659 
	#PICTL_P2ICONL
 0x10

660 
	#PICTL_P1ICONH
 0x08

	)

661 
	#PICTL_P1ICONL
 0x04

	)

662 
	#PICTL_P0ICONH
 0x02

663 
	#PICTL_P0ICONL
 0x01

664 

	)

672 
	#PMUX_CKOEN
 0x80

673 
	#PMUX_CKOPIN
 (0x07 << 4)

674 
	#PMUX_DREGSTA
 0x04

675 
	#PMUX_DREGSTAPIN
 (0x07)

676 

	)

697 
	#DMAARM_ABORT
 0x80

	)

698 
	#DMAARM_DMAARM1
 0x02

	)

699 
	#DMAARM_DMAARM0
 0x01

	)

702 
	#DMAREQ_DMAREQ1
 0x02

	)

703 
	#DMAREQ_DMAREQ0
 0x01

	)

714 
	#DMAIRQ_DMAIF1
 0x02

	)

715 
	#DMAIRQ_DMAIF0
 0x01

	)

729 
	#T1CTL_DIV
 (0x0C)

730 
	#T1CTL_DIV_1
 (0x00 << 2)

731 
	#T1CTL_DIV_8
 (0x01 << 2)

732 
	#T1CTL_DIV_32
 (0x02 << 2)

733 
	#T1CTL_DIV_128
 (0x03 << 2)

734 
	#T1CTL_MODE
 (0x03)

735 
	#T1CTL_MODE_SUSPEND
 (0x00)

736 
	#T1CTL_MODE_FREERUN
 (0x01)

737 
	#T1CTL_MODE_MODULO
 (0x02)

738 
	#T1CTL_MODE_UPDOWN
 (0x03)

739 

	)

741 
	#T1STAT_OVFIF
 0x20

742 
	#T1STAT_CH4IF
 0x10

743 
	#T1STAT_CH3IF
 0x08

744 
	#T1STAT_CH2IF
 0x04

745 
	#T1STAT_CH1IF
 0x02

746 
	#T1STAT_CH0IF
 0x01

747 

	)

749 
	#T1CCTLn_RFIRQ
 0x80

750 
	#T1CCTLn_IM
 0x40

751 
	#T1CCTLn_CMP
 (0x07 << 3)

752 
	#T1CCTLn_CMP_SET_ON_CMP
 (0x00 << 3)

753 
	#T1CCTLn_CMP_CLR_ON_CMP
 (0x01 << 3)

754 
	#T1CCTLn_CMP_TOG_ON_CMP
 (0x02 << 3)

755 
	#T1CCTLn_CMP_SET_CMP_UP_CLR_0
 (0x03 << 3)

756 
	#T1CCTLn_CMP_CLR_CMP_UP_SET_0
 (0x04 << 3)

757 
	#T1CCTLn_CMP_CLR_T1CC0_SET_T1CC1
 (0x05 << 3)

758 
	#T1CCTLn_CMP_SET_T1CC0_CLR_T1CC1
 (0x06 << 3)

759 
	#T1CCTLn_CMP_INIT_PIN
 (0x07 << 3)

760 
	#T1CCTLn_MODE
 0x04

761 
	#T1CCTLn_CAP
 (0x03)

762 
	#T1CCTLn_CAP_NO_CAP
 (0x00)

763 
	#T1CCTLn_CAP_RISE_EDGE
 (0x01)

764 
	#T1CCTLn_CAP_FALL_EDGE
 (0x02)

765 
	#T1CCTLn_CAP_BOTH_EDGE
 (0x03)

766 

	)

800 
	#IRCTL_IRGEN
 0x01

801 

	)

818 
	#T2IRQF_LONG_COMPARE2F
 0x80

	)

819 
	#T2IRQF_LONG_COMPARE1F
 0x40

	)

820 
	#T2IRQF_OVF_COMPARE2F
 0x20

	)

821 
	#T2IRQF_OVF_COMPARE1F
 0x10

	)

822 
	#T2IRQF_OVF_PERF
 0x08

	)

823 
	#T2IRQF_COMPARE2F
 0x04

	)

824 
	#T2IRQF_COMPARE1F
 0x02

	)

825 
	#T2IRQF_PERF
 0x01

	)

828 
	#T2IRQM_LONG_COMARE2M
 0x80

	)

829 
	#T2IRQM_LONG_COMARE1M
 0x40

	)

830 
	#T2IRQM_OVF_COMPARE2M
 0x20

	)

831 
	#T2IRQM_OVF_COMPARE1M
 0x10

	)

832 
	#T2IRQM_OVF_PERM
 0x08

	)

833 
	#T2IRQM_COMPARE2M
 0x04

	)

834 
	#T2IRQM_COMPARE1M
 0x02

	)

835 
	#T2IRQM_PERM
 0x01

	)

838 
	#T2CTRL_LATCH_MODE
 0x08

	)

839 
	#T2CTRL_STATE
 0x04

840 #i‡(
chù
 =2545)

	)

841 
	#T2CTRL_SYNC
 0x02

843 
	#T2CTRL_RUN
 0x01

844 

	)

853 
	#T3CTL_DIV
 (0xE0)

	)

854 
	#T3CTL_DIV_1
 (0x00 << 5)

	)

855 
	#T3CTL_DIV_2
 (0x01 << 5)

	)

856 
	#T3CTL_DIV_4
 (0x02 << 5)

	)

857 
	#T3CTL_DIV_8
 (0x03 << 5)

	)

858 
	#T3CTL_DIV_16
 (0x04 << 5)

	)

859 
	#T3CTL_DIV_32
 (0x05 << 5)

	)

860 
	#T3CTL_DIV_64
 (0x06 << 5)

	)

861 
	#T3CTL_DIV_128
 (0x07 << 5)

	)

862 
	#T3CTL_START
 0x10

	)

863 
	#T3CTL_OVFIM
 0x08

	)

864 
	#T3CTL_CLR
 0x04

	)

865 
	#T3CTL_MODE
 (0x03)

	)

866 
	#T3CTL_MODE_FREERUN
 (0x00)

	)

867 
	#T3CTL_MODE_DOWN
 (0x01)

	)

868 
	#T3CTL_MODE_MODULO
 (0x02)

	)

869 
	#T3CTL_MODE_UPDOWN
 (0x03)

	)

872 
	#T3CCTLn_IM
 0x40

	)

873 
	#T3CCTLn_CMP
 (0x07 << 3)

874 
	#T3CCTLn_CMP_SET_ON_CMP
 (0x00 << 3)

875 
	#T3CCTLn_CMP_CLR_ON_CMP
 (0x01 << 3)

876 
	#T3CCTLn_CMP_TOG_ON_CMP
 (0x02 << 3)

877 
	#T3CCTLn_CMP_SET_CMP_UP_CLR_0
 (0x03 << 3)

878 
	#T3CCTLn_CMP_CLR_CMP_UP_SET_0
 (0x04 << 3)

879 
	#T3CCTLn_CMP_SET_CMP_CLR_0xFF
 (0x05 << 3)

880 
	#T3CCTLn_CMP_CLR_CMP_SET_0x00
 (0x06 << 3)

881 
	#T3CCTLn_CMP_INIT_PIN
 (0x07 << 3)

882 
	#T3CCTLn_MODE
 0x04

	)

883 
	#T3CCTLn_CAP
 (0x03)

884 
	#T3CCTLn_CAP_NO_CAP
 (0x00)

885 
	#T3CCTLn_CAP_RISE_EDGE
 (0x01)

886 
	#T3CCTLn_CAP_FALL_EDGE
 (0x02)

887 
	#T3CCTLn_CAP_BOTH_EDGE
 (0x03)

888 

	)

902 
	#T4CTL_DIV
 (0xE0)

	)

903 
	#T4CTL_DIV_1
 (0x00 << 5)

	)

904 
	#T4CTL_DIV_2
 (0x01 << 5)

	)

905 
	#T4CTL_DIV_4
 (0x02 << 5)

	)

906 
	#T4CTL_DIV_8
 (0x03 << 5)

	)

907 
	#T4CTL_DIV_16
 (0x04 << 5)

	)

908 
	#T4CTL_DIV_32
 (0x05 << 5)

	)

909 
	#T4CTL_DIV_64
 (0x06 << 5)

	)

910 
	#T4CTL_DIV_128
 (0x07 << 5)

	)

911 
	#T4CTL_START
 0x10

	)

912 
	#T4CTL_OVFIM
 0x08

	)

913 
	#T4CTL_CLR
 0x04

	)

914 
	#T4CTL_MODE
 (0x03)

	)

915 
	#T4CTL_MODE_FREERUN
 (0x00)

	)

916 
	#T4CTL_MODE_DOWN
 (0x01)

	)

917 
	#T4CTL_MODE_MODULO
 (0x02)

	)

918 
	#T4CTL_MODE_UPDOWN
 (0x03)

	)

921 
	#T4CCTLn_IM
 0x40

	)

922 
	#T4CCTLn_CMP
 (0x07 << 3)

923 
	#T4CCTLn_CMP_SET_ON_CMP
 (0x00 << 3)

924 
	#T4CCTLn_CMP_CLR_ON_CMP
 (0x01 << 3)

925 
	#T4CCTLn_CMP_TOG_ON_CMP
 (0x02 << 3)

926 
	#T4CCTLn_CMP_SET_CMP_UP_CLR_0
 (0x03 << 3)

927 
	#T4CCTLn_CMP_CLR_CMP_UP_SET_0
 (0x04 << 3)

928 
	#T4CCTLn_CMP_SET_CMP_CLR_0xFF
 (0x05 << 3)

929 
	#T4CCTLn_CMP_CLR_CMP_SET_0x00
 (0x06 << 3)

930 
	#T4CCTLn_CMP_INIT_PIN
 (0x07 << 3)

931 
	#T4CCTLn_MODE
 0x04

	)

932 
	#T4CCTLn_CAP
 (0x03)

933 
	#T4CCTLn_CAP_NO_CAP
 (0x00)

934 
	#T4CCTLn_CAP_RISE_EDGE
 (0x01)

935 
	#T4CCTLn_CAP_FALL_EDGE
 (0x02)

936 
	#T4CCTLn_CAP_BOTH_EDGE
 (0x03)

937 

	)

952 #i‡(
chù
 == 2541 || chip == 2543 || chip == 2545)

959 
	#ADCCON1_EOC
 0x80

	)

960 
	#ADCCON1_ST
 0x40

	)

961 
	#ADCCON1_STSEL
 (0x03 << 4)

962 
	#ADCCON1_STSEL_P2_0
 (0x00 << 4)

963 
	#ADCCON1_STSEL_FULL_SPEED
 (0x01 << 4)

964 
	#ADCCON1_STSEL_T1C0_CMP_EVT
 (0x02 << 4)

965 
	#ADCCON1_STSEL_ST
 (0x03 << 4)

966 

	)

968 
	#ADCCON2_SREF
 (0x03 << 6)

969 
	#ADCCON2_SREF_1_15V
 (0x00 << 6)

970 
	#ADCCON2_SREF_P0_7
 (0x01 << 6)

971 
	#ADCCON2_SREF_AVDD
 (0x02 << 6)

972 
	#ADCCON2_SREF_P0_6_P0_7
 (0x03 << 6)

973 
	#ADCCON2_SDIV
 (0x03 << 4)

974 
	#ADCCON2_SDIV_64
 (0x00 << 4)

975 
	#ADCCON2_SDIV_128
 (0x01 << 4)

976 
	#ADCCON2_SDIV_256
 (0x02 << 4)

977 
	#ADCCON2_SDIV_512
 (0x03 << 4)

978 
	#ADCCON2_SCH
 (0x0F)

979 
	#ADCCON2_SCH_AIN0
 (0x00)

980 
	#ADCCON2_SCH_AIN1
 (0x01)

	)

981 
	#ADCCON2_SCH_AIN2
 (0x02)

	)

982 
	#ADCCON2_SCH_AIN3
 (0x03)

	)

983 
	#ADCCON2_SCH_AIN4
 (0x04)

	)

984 
	#ADCCON2_SCH_AIN5
 (0x05)

	)

985 
	#ADCCON2_SCH_AIN6
 (0x06)

	)

986 
	#ADCCON2_SCH_AIN7
 (0x07)

	)

987 
	#ADCCON2_SCH_AIN0_1
 (0x08)

988 
	#ADCCON2_SCH_AIN2_3
 (0x09)

	)

989 
	#ADCCON2_SCH_AIN4_5
 (0x0A)

	)

990 
	#ADCCON2_SCH_AIN6_7
 (0x0B)

	)

991 
	#ADCCON2_SCH_GND
 (0x0C)

992 
	#ADCCON2_SCH_TEMPR
 (0x0E)

993 
	#ADCCON2_SCH_VDD_3
 (0x0F)

994 

	)

996 
	#ADCCON3_EREF
 0xC0

	)

997 
	#ADCCON3_EREF_1_25V
 (0x00 << 6)

	)

998 
	#ADCCON3_EREF_P0_7
 (0x01 << 6)

	)

999 
	#ADCCON3_EREF_AVDD
 (0x02 << 6)

	)

1000 
	#ADCCON3_EREF_P0_6_P0_7
 (0x03 << 6)

	)

1001 
	#ADCCON3_EDIV
 0x30

	)

1002 
	#ADCCON3_EDIV_64
 (0x00 << 4)

	)

1003 
	#ADCCON3_EDIV_128
 (0x01 << 4)

	)

1004 
	#ADCCON3_EDIV_256
 (0x02 << 4)

	)

1005 
	#ADCCON3_EDIV_512
 (0x03 << 4)

	)

1006 
	#ADCCON3_ECH
 0x0F

	)

1007 
	#ADCCON3_ECH_AIN0
 (0x00)

	)

1008 
	#ADCCON3_ECH_AIN1
 (0x01)

	)

1009 
	#ADCCON3_ECH_AIN2
 (0x02)

	)

1010 
	#ADCCON3_ECH_AIN3
 (0x03)

	)

1011 
	#ADCCON3_ECH_AIN4
 (0x04)

	)

1012 
	#ADCCON3_ECH_AIN5
 (0x05)

	)

1013 
	#ADCCON3_ECH_AIN6
 (0x06)

	)

1014 
	#ADCCON3_ECH_AIN7
 (0x07)

	)

1015 
	#ADCCON3_ECH_AIN0_1
 (0x08)

	)

1016 
	#ADCCON3_ECH_AIN2_3
 (0x09)

	)

1017 
	#ADCCON3_ECH_AIN4_5
 (0x0A)

	)

1018 
	#ADCCON3_ECH_AIN6_7
 (0x0B)

	)

1019 
	#ADCCON3_ECH_GND
 (0x0C)

	)

1020 
	#ADCCON3_ECH_TEMPR
 (0x0E)

	)

1021 
	#ADCCON3_ECH_VDD_3
 (0x0F)

	)

1024 
	#TR0_ADCTM
 0x01

1025 

	)

1030 
	#CMPCTL_EN
 0x02

1031 
	#CMPCTL_OUTPUT
 0x01

1032 

	)

1037 
	#ADCCON1_RCTRL
 (0x03 << 2)

1038 
	#ADCCON1_RCTRL_COMPLETE
 (0x00 << 2)

1039 
	#ADCCON1_RCTRL_LFSR13
 (0x01 << 2)

1040 
	#ADCCON1_RCTRL_STOP
 (0x03 << 2)

1041 

	)

1052 
	#WDCTL_CLR
 0xF0

	)

1053 
	#WDCTL_CLR0
 0x10

	)

1054 
	#WDCTL_CLR1
 0x20

	)

1055 
	#WDCTL_CLR2
 0x40

	)

1056 
	#WDCTL_CLR3
 0x80

	)

1057 
	#WDCTL_MODE
 (0x03 << 2)

1058 
	#WDCTL_MODE_IDLE
 (0x00 << 2)

1059 
	#WDCTL_MODE_WD
 (0x02 << 2)

1060 
	#WDCTL_MODE_TIMER
 (0x03 << 2)

1061 
	#WDCTL_INT
 (0x03)

1062 
	#WDCTL_INT_1_SEC
 (0x00)

	)

1063 
	#WDCTL_INT_250_MSEC
 (0x01)

	)

1064 
	#WDCTL_INT_15_MSEC
 (0x02)

	)

1065 
	#WDCTL_INT_2_MSEC
 (0x03)

	)

1073 
	#U0CSR_MODE
 0x80

	)

1074 
	#U0CSR_RE
 0x40

	)

1075 
	#U0CSR_SLAVE
 0x20

	)

1076 
	#U0CSR_FE
 0x10

	)

1077 
	#U0CSR_ERR
 0x08

	)

1078 
	#U0CSR_RX_BYTE
 0x04

	)

1079 
	#U0CSR_TX_BYTE
 0x02

	)

1080 
	#U0CSR_ACTIVE
 0x01

	)

1083 
	#U0UCR_FLUSH
 0x80

	)

1084 
	#U0UCR_FLOW
 0x40

	)

1085 
	#U0UCR_D9
 0x20

	)

1086 
	#U0UCR_BIT9
 0x10

	)

1087 
	#U0UCR_PARITY
 0x08

	)

1088 
	#U0UCR_SPB
 0x04

	)

1089 
	#U0UCR_STOP
 0x02

	)

1090 
	#U0UCR_START
 0x01

	)

1093 
	#U0GCR_CPOL
 0x80

	)

1094 
	#U0GCR_CPHA
 0x40

	)

1095 
	#U0GCR_ORDER
 0x20

	)

1096 
	#U0GCR_BAUD_E
 0x1F

	)

1097 
	#U0GCR_BAUD_E0
 0x01

	)

1098 
	#U0GCR_BAUD_E1
 0x02

	)

1099 
	#U0GCR_BAUD_E2
 0x04

	)

1100 
	#U0GCR_BAUD_E3
 0x08

	)

1101 
	#U0GCR_BAUD_E4
 0x10

	)

1112 #i‡(
chù
 == 2541 || chip == 2543 || chip == 2545)

1115 
	#I2CCFG_CR2
 0x80

1116 
	#I2CCFG_ENS1
 0x40

1117 
	#I2CCFG_STA
 0x20

1118 
	#I2CCFG_STO
 0x10

1119 
	#I2CCFG_SI
 0x08

1120 
	#I2CCFG_AA
 0x04

1121 
	#I2CCFG_CR1
 0x02

1122 
	#I2CCFG_CR0
 0x01

1123 
	#I2CCFG_CR
 (0x83)

1124 
	#I2CCFG_CR_DIV_256
 (0x00)

1125 
	#I2CCFG_CR_DIV_244
 (0x01)

1126 
	#I2CCFG_CR_DIV_192
 (0x02)

1127 
	#I2CCFG_CR_DIV_160
 (0x03)

1128 
	#I2CCFG_CR_DIV_960
 (0x80)

1129 
	#I2CCFG_CR_DIV_120
 (0x81)

1130 
	#I2CCFG_CR_DIV_60
 (0x82)

1131 

	)

1137 
	#I2CADDR_GC
 0x01

1138 

	)

	@/usr/include/_ansi.h

12 #i‚def 
_ANSIDECL_H_


13 
	#_ANSIDECL_H_


	)

15 
	~<√wlib.h
>

16 
	~<sys/c⁄fig.h
>

22 #ifde‡
__STDC__


23 
	#_HAVE_STDC


	)

28 #ifde‡
__˝lu•lus


29 #i‡!(
deföed
(
_BEGIN_STD_C
Ë&& deföed(
_END_STD_C
))

30 #ifde‡
_HAVE_STD_CXX


31 
	#_BEGIN_STD_C
 
«me•a˚
 
°d
 { "C" {

	)

32 
	#_END_STD_C
 } }

	)

34 
	#_BEGIN_STD_C
 "C" {

	)

35 
	#_END_STD_C
 }

	)

37 #i‡
__GNUC_PREREQ
 (3, 3)

38 
	#_NOTHROW
 
	`__©åibuã__
 ((
nŸhrow
))

	)

40 
	#_NOTHROW
 
	`throw
()

	)

44 
	#_BEGIN_STD_C


	)

45 
	#_END_STD_C


	)

46 
	#_NOTHROW


	)

49 #ifde‡
_HAVE_STDC


50 
	#_PTR
 *

	)

51 
	#_AND
 ,

	)

52 
	#_NOARGS
 

	)

53 
	#_CONST
 c⁄°

	)

54 
	#_VOLATILE
 vﬁ©ûe

	)

55 
	#_SIGNED
 sig√d

	)

56 
	#_DOTS
 , ...

	)

57 
	#_VOID
 

	)

58 #ifde‡
__CYGWIN__


59 
	#_EXFUN_NOTHROW
(
«me
, 
¥Ÿo
Ë
__cde˛
Çamê¥Ÿÿ
_NOTHROW


	)

60 
	#_EXFUN
(
«me
, 
¥Ÿo
Ë
__cde˛
Çamê
	)
proto

61 
	#_EXPARM
(
«me
, 
¥Ÿo
Ë(* 
__cde˛
ÇameË
	)
proto

62 
	#_EXFNPTR
(
«me
, 
¥Ÿo
Ë(
__cde˛
 *ÇameË
	)
proto

64 
	#_EXFUN_NOTHROW
(
«me
, 
¥Ÿo
Ë«mê¥Ÿÿ
_NOTHROW


	)

65 
	#_EXFUN
(
«me
, 
¥Ÿo
Ë«mê
	)
proto

66 
	#_EXPARM
(
«me
, 
¥Ÿo
Ë(*ÇameË
	)
proto

67 
	#_EXFNPTR
(
«me
, 
¥Ÿo
Ë(*ÇameË
	)
proto

69 
	#_DEFUN
(
«me
, 
¨gli°
, 
¨gs
Ë
	`«me
◊rgs)

	)

70 
	#_DEFUN_VOID
(
«me
Ë
	`«me
(
_NOARGS
)

	)

71 
	#_CAST_VOID
 ()

	)

72 #i‚de‡
_LONG_DOUBLE


73 
	#_LONG_DOUBLE
 

	)

75 #i‚de‡
_LONG_LONG_TYPE


76 
	#_LONG_LONG_TYPE
 

	)

78 #i‚de‡
_PARAMS


79 
	#_PARAMS
(
∑ømli°
Ë
	)
paramlist

82 
	#_PTR
 *

	)

83 
	#_AND
 ;

	)

84 
	#_NOARGS


	)

85 
	#_CONST


	)

86 
	#_VOLATILE


	)

87 
	#_SIGNED


	)

88 
	#_DOTS


	)

89 
	#_VOID
 

	)

90 
	#_EXFUN
(
«me
, 
¥Ÿo
Ë
	`«me
()

	)

91 
	#_EXFUN_NOTHROW
(
«me
, 
¥Ÿo
Ë
	`«me
()

	)

92 
	#_DEFUN
(
«me
, 
¨gli°
, 
¨gs
Ë«mê¨gli°árgs;

	)

93 
	#_DEFUN_VOID
(
«me
Ë
	`«me
()

	)

94 
	#_CAST_VOID


	)

95 
	#_LONG_DOUBLE
 

	)

96 
	#_LONG_LONG_TYPE
 

	)

97 #i‚de‡
_PARAMS


98 
	#_PARAMS
(
∑ømli°
Ë()

	)

104 #ifde‡
__GNUC__


105 
	#_ATTRIBUTE
(
©ås
Ë
	`__©åibuã__
 (©ås)

	)

107 
	#_ATTRIBUTE
(
©ås
)

	)

125 #i‡
deföed
(
__GNUC__
Ë&& !deföed(
__GNUC_STDC_INLINE__
)

127 
	#_ELIDABLE_INLINE
 
__ölöe__
 
	`_ATTRIBUTE
 ((
__Æways_ölöe__
))

	)

131 
	#_ELIDABLE_INLINE
 
__ölöe__


	)

134 #i‡
__GNUC_PREREQ
 (3, 1)

135 
	#_NOINLINE
 
	`__©åibuã__
 ((
__noölöe__
))

	)

136 
	#_NOINLINE_STATIC
 
_NOINLINE
 

	)

140 
	#_NOINLINE


	)

141 
	#_NOINLINE_STATIC


	)

	@/usr/include/bits/wordsize.h

3 #i‚de‡
_WORDSIZE_H


4 
	#_WORDSIZE_H
 1

	)

5 #ifde‡
__x86_64__


6 
	#__WORDSIZE
 64

	)

7 
	#__WORDSIZE_COMPAT32
 1

	)

9 
	#__WORDSIZE
 32

	)

	@/usr/include/features.h

11 #i‚de‡
_FEATURES_H


12 
	#_FEATURES_H


	)

14 
	~<sys/cdefs.h
>

15 
	~<sys/„©uªs.h
>

	@/usr/include/sys/cdefs.h

40 #i‚def 
_SYS_CDEFS_H_


41 
	#_SYS_CDEFS_H_


	)

43 
	~<machöe/_deÁu…_ty≥s.h
>

44 
	~<sys/„©uªs.h
>

45 
	~<°ddef.h
>

47 
	#__PMT
(
¨gs
Ë
	)
args

48 
	#__DOTS
 , ...

	)

49 
	#__THROW


	)

51 #ifde‡
__GNUC__


52 
	#__ASMNAME
(
˙ame
Ë
	`__XSTRING
 (
__USER_LABEL_PREFIX__
Ë
	)
cname

55 
	#__±r_t
 *

	)

56 
	#__l⁄g_doubÀ_t
 

	)

58 
	#__©åibuã_mÆloc__


	)

59 
	#__©åibuã_puª__


	)

60 
	#__©åibuã_f‹m©_°rfm⁄__
(
a
,
b
)

	)

61 
	#__Êex¨r
 [0]

	)

63 #i‚de‡
__BOUNDED_POINTERS__


64 
	#__bounded


	)

65 
	#__unbounded


	)

66 
	#__±rvÆue


	)

73 #i‚def 
__has_exãnsi⁄


74 
	#__has_exãnsi⁄
 
__has_„©uª


	)

76 #i‚def 
__has_„©uª


77 
	#__has_„©uª
(
x
Ë0

	)

79 #i‚def 
__has_ö˛ude


80 
	#__has_ö˛ude
(
x
Ë0

	)

82 #i‚def 
__has_buûtö


83 
	#__has_buûtö
(
x
Ë0

	)

86 #i‡
deföed
(
__˝lu•lus
)

87 
	#__BEGIN_DECLS
 "C" {

	)

88 
	#__END_DECLS
 }

	)

90 
	#__BEGIN_DECLS


	)

91 
	#__END_DECLS


	)

100 #i‡
deföed
(
__GNUC__
Ë|| deföed(
__INTEL_COMPILER
)

102 #i‡
__GNUC__
 >3 || 
deföed
(
__INTEL_COMPILER
)

103 
	#__GNUCLIKE_ASM
 3

	)

104 
	#__GNUCLIKE_MATH_BUILTIN_CONSTANTS


	)

106 
	#__GNUCLIKE_ASM
 2

	)

108 
	#__GNUCLIKE___TYPEOF
 1

	)

109 
	#__GNUCLIKE___OFFSETOF
 1

	)

110 
	#__GNUCLIKE___SECTION
 1

	)

112 #i‚de‡
__INTEL_COMPILER


113 
	#__GNUCLIKE_CTOR_SECTION_HANDLING
 1

	)

116 
	#__GNUCLIKE_BUILTIN_CONSTANT_P
 1

	)

117 #i‡
deföed
(
__INTEL_COMPILER
Ë&& deföed(
__˝lu•lus
) \

118 && 
__INTEL_COMPILER
 < 800

119 #unde‡
__GNUCLIKE_BUILTIN_CONSTANT_P


122 #i‡(
__GNUC_MINOR__
 > 95 || 
__GNUC__
 >3Ë&& !
deföed
(
__INTEL_COMPILER
)

123 
	#__GNUCLIKE_BUILTIN_VARARGS
 1

	)

124 
	#__GNUCLIKE_BUILTIN_STDARG
 1

	)

125 
	#__GNUCLIKE_BUILTIN_VAALIST
 1

	)

128 #i‡
deföed
(
__GNUC__
)

129 
	#__GNUC_VA_LIST_COMPATIBILITY
 1

	)

135 #i‡
deföed
(
__GNUC__
)

136 
	#__compûî_memb¨
(Ë
__asm
 
	`__vﬁ©ûe
(" " : : : "mem‹y")

	)

139 #i‚de‡
__INTEL_COMPILER


140 
	#__GNUCLIKE_BUILTIN_NEXT_ARG
 1

	)

141 
	#__GNUCLIKE_MATH_BUILTIN_RELOPS


	)

144 
	#__GNUCLIKE_BUILTIN_MEMCPY
 1

	)

147 
	#__CC_SUPPORTS_INLINE
 1

	)

148 
	#__CC_SUPPORTS___INLINE
 1

	)

149 
	#__CC_SUPPORTS___INLINE__
 1

	)

151 
	#__CC_SUPPORTS___FUNC__
 1

	)

152 
	#__CC_SUPPORTS_WARNING
 1

	)

154 
	#__CC_SUPPORTS_VARADIC_XXX
 1

	)

156 
	#__CC_SUPPORTS_DYNAMIC_ARRAY_INIT
 1

	)

172 #i‡
deföed
(
__STDC__
Ë|| deföed(
__˝lu•lus
)

173 
	#__P
(
¥Ÿos
Ë¥Ÿo†

	)

174 
	#__CONCAT1
(
x
,
y
Ëx ## 
	)
y

175 
	#__CONCAT
(
x
,
y
Ë
	`__CONCAT1
(x,y)

	)

176 
	#__STRING
(
x
Ë#x

	)

177 
	#__XSTRING
(
x
Ë
	`__STRING
(xË

	)

179 
	#__c⁄°
 c⁄°

	)

180 
	#__sig√d
 sig√d

	)

181 
	#__vﬁ©ûe
 vﬁ©ûe

	)

182 #i‡
deföed
(
__˝lu•lus
)

183 
	#__ölöe
 
ölöe


	)

185 #i‡!(
deföed
(
__CC_SUPPORTS___INLINE
))

186 
	#__ölöe


	)

191 
	#__P
(
¥Ÿos
Ë(Ë

	)

192 
	#__CONCAT
(
x
,
y
Ëx 
	)
y

193 
	#__STRING
(
x
Ë"x"

	)

195 #i‡!
deföed
(
__CC_SUPPORTS___INLINE
)

196 
	#__c⁄°


	)

197 
	#__ölöe


	)

198 
	#__sig√d


	)

199 
	#__vﬁ©ûe


	)

208 #i‚def 
NO_ANSI_KEYWORDS


209 c⁄°

	)

210 
	#ölöe


	)

211 sig√d

	)

212 vﬁ©ûe

	)

226 #ifde‡
löt


227 
	#__dód2


	)

228 
	#__puª2


	)

229 
	#__unu£d


	)

230 
	#__∑cked


	)

231 
	#__Æig√d
(
x
)

	)

232 
	#__£˘i⁄
(
x
)

	)

234 #i‡!
__GNUC_PREREQ__
(2, 5Ë&& !
deföed
(
__INTEL_COMPILER
)

235 
	#__dód2


	)

236 
	#__puª2


	)

237 
	#__unu£d


	)

239 #i‡
__GNUC__
 =2 && 
__GNUC_MINOR__
 >5 && __GNUC_MINOR__ < 7 && !
deföed
(
__INTEL_COMPILER
)

240 
	#__dód2
 
	`__©åibuã__
((
__n‹ëu∫__
))

	)

241 
	#__puª2
 
	`__©åibuã__
((
__c⁄°__
))

	)

242 
	#__unu£d


	)

245 #i‡
__GNUC_PREREQ__
(2, 7)

246 
	#__dód2
 
	`__©åibuã__
((
__n‹ëu∫__
))

	)

247 
	#__puª2
 
	`__©åibuã__
((
__c⁄°__
))

	)

248 
	#__unu£d
 
	`__©åibuã__
((
__unu£d__
))

	)

249 
	#__u£d
 
	`__©åibuã__
((
__u£d__
))

	)

250 
	#__∑cked
 
	`__©åibuã__
((
__∑cked__
))

	)

251 
	#__Æig√d
(
x
Ë
	`__©åibuã__
((
	`__Æig√d__
(x)))

	)

252 
	#__£˘i⁄
(
x
Ë
	`__©åibuã__
((
	`__£˘i⁄__
(x)))

	)

254 #i‡
deföed
(
__INTEL_COMPILER
)

255 
	#__dód2
 
	`__©åibuã__
((
__n‹ëu∫__
))

	)

256 
	#__puª2
 
	`__©åibuã__
((
__c⁄°__
))

	)

257 
	#__unu£d
 
	`__©åibuã__
((
__unu£d__
))

	)

258 
	#__u£d
 
	`__©åibuã__
((
__u£d__
))

	)

259 
	#__∑cked
 
	`__©åibuã__
((
__∑cked__
))

	)

260 
	#__Æig√d
(
x
Ë
	`__©åibuã__
((
	`__Æig√d__
(x)))

	)

261 
	#__£˘i⁄
(
x
Ë
	`__©åibuã__
((
	`__£˘i⁄__
(x)))

	)

265 #i‡!
__GNUC_PREREQ__
(2, 95)

266 
	#__Æignof
(
x
Ë
	`__off£tof
(°ru˘ { 
__a
; x 
__b
; }, __b)

	)

273 #i‡!
deföed
(
__STDC_VERSION__
) || __STDC_VERSION__ < 201112L

275 #i‡!
__has_exãnsi⁄
(
c_Æig«s
)

276 #i‡(
deföed
(
__˝lu•lus
) && __cplusplus >= 201103L) || \

277 
	$__has_exãnsi⁄
(
cxx_Æig«s
)

278 
	#_Alig«s
(
x
Ë
	`Æig«s
(x)

	)

281 
	#_Alig«s
(
x
Ë
	`__Æig√d
(x)

	)

285 #i‡
	`deföed
(
__˝lu•lus
) && __cplusplus >= 201103L

286 
	#_Alignof
(
x
Ë
	`Æignof
(x)

	)

288 
	#_Alignof
(
x
Ë
	`__Æignof
(x)

	)

291 #i‡!
	`__has_exãnsi⁄
(
c_©omic
Ë&& !__has_exãnsi⁄(
cxx_©omic
)

296 
	#_Atomic
(
T
Ë°ru˘ { T vﬁ©ûê
__vÆ
; }

	)

299 #i‡
	`deföed
(
__˝lu•lus
) && __cplusplus >= 201103L

300 
	#_N‹ëu∫
 [[
n‹ëu∫
]]

	)

302 
	#_N‹ëu∫
 
__dód2


	)

305 #i‡
	`__GNUC_PREREQ__
(4, 6Ë&& !
	`deföed
(
__˝lu•lus
)

307 #ñi‡!
	`__has_exãnsi⁄
(
c_°©ic_as£π
)

308 #i‡(
	`deföed
(
__˝lu•lus
) && __cplusplus >= 201103L) || \

309 
	$__has_exãnsi⁄
(
cxx_°©ic_as£π
)

310 
	#_Sètic_as£π
(
x
, 
y
Ë
	`°©ic_as£π
(x, y)

	)

311 #ñi‡
	`deföed
(
__COUNTER__
)

312 
	#_Sètic_as£π
(
x
, 
y
Ë
	`__Sètic_as£π
(x, 
__COUNTER__
)

	)

313 
	#__Sètic_as£π
(
x
, 
y
Ë
	`___Sètic_as£π
(x, y)

	)

314 
	#___Sètic_as£π
(
x
, 
y
Ë
	t__as£π_
 ## 
	ty
[(xË? 1 : -1]

	)

316 
	t_Sètic_as£π
(
	tx
, 
	ty
Ë
	t__hack


	)

320 #i‡!
	t__has_exãnsi⁄
(
	tc_thªad_loˇl
)

323 
	t__has_exãnsi⁄
(
	tcxx_thªad_loˇl
)

324 
	t_Thªad_loˇl
 
	tthªad_loˇl


	)

326 
	t_Thªad_loˇl
 
	t__thªad


	)

341 #i‡
	tdeföed
(
	t__STDC_VERSION__
) && __STDC_VERSION__ >= 201112L

342 
	t__gíîic
(
	tex¥
, 
	tt
, 
	tyes
, 
	tno
) \

343 
	t_Gíîic
(
	tex¥
, 
	tt
: 
	tyes
, : 
	tno
)

	)

344 #ñi‡
	t__GNUC_PREREQ__
(3, 1Ë&& !
	tdeföed
(
	t__˝lu•lus
)

345 
	t__gíîic
(
	tex¥
, 
	tt
, 
	tyes
, 
	tno
) \

346 
	t__buûtö_choo£_ex¥
( \

347 
	t__buûtö_ty≥s_com∑tibÀ_p
(
	t__ty≥of
(
	tex¥
), 
	tt
), 
	tyes
, 
	tno
)

	)

350 #i‡
	t__GNUC_PREREQ__
(2, 96)

351 
	t__mÆloc_like
 
	t__©åibuã__
((
	t__mÆloc__
))

	)

352 
	t__puª
 
	t__©åibuã__
((
	t__puª__
))

	)

354 
	t__mÆloc_like


	)

355 
	t__puª


	)

358 #i‡
	t__GNUC_PREREQ__
(3, 1Ë|| (
	tdeföed
(
	t__INTEL_COMPILER
) && __INTEL_COMPILER >= 800)

359 
	t__Æways_ölöe
 
	t__©åibuã__
((
	t__Æways_ölöe__
))

	)

361 
	t__Æways_ölöe


	)

364 #i‡
	t__GNUC_PREREQ__
(3, 1)

365 
	t__noölöe
 
	t__©åibuã__
 ((
	t__noölöe__
))

	)

367 
	t__noölöe


	)

370 #i‡
	t__GNUC_PREREQ__
(3, 3)

371 
	t__n⁄nuŒ
(
	tx
Ë
	t__©åibuã__
((
	t__n⁄nuŒ__
(x)))

	)

373 
	t__n⁄nuŒ
(
	tx
)

	)

376 #i‡
	t__GNUC_PREREQ__
(3, 4)

377 
	t__Á°ˇŒ
 
	t__©åibuã__
((
	t__Á°ˇŒ__
))

	)

379 
	t__Á°ˇŒ


	)

382 #i‡
	t__GNUC_PREREQ__
(4, 1)

383 
	t__ªtu∫s_twi˚
 
	t__©åibuã__
((
	t__ªtu∫s_twi˚__
))

	)

385 
	t__ªtu∫s_twi˚


	)

389 #i‡!
	t__GNUC_PREREQ__
(2, 7Ë&& !
	tdeföed
(
	t__INTEL_COMPILER
)

390 
	t__func__
 
	tNULL


	)

399 #i‡!(
	t__GNUC__
 =2 && 
	t__GNUC_MINOR__
 == 95)

400 #i‡!
	tdeföed
(
	t__STDC_VERSION__
Ë|| __STDC_VERSION__ < 199901 || deföed(
	tlöt
)

401 
	t__ª°ri˘


	)

403 
	t__ª°ri˘
 
	tª°ri˘


	)

435 #i‡
	t__GNUC_PREREQ__
(2, 96)

436 
	t__¥edi˘_åue
(
	texp
Ë
	t__buûtö_ex≥˘
(”xp), 1)

	)

437 
	t__¥edi˘_Ál£
(
	texp
Ë
	t__buûtö_ex≥˘
(”xp), 0)

	)

439 
	t__¥edi˘_åue
(
	texp
Ë”xp)

	)

440 
	t__¥edi˘_Ál£
(
	texp
Ë”xp)

	)

443 #i‡
	t__GNUC_PREREQ__
(4, 2)

444 
	t__hiddí
 
	t__©åibuã__
((
	t__visibûôy__
("hiddí")))

	)

445 
	t__exp‹ãd
 
	t__©åibuã__
((
	t__visibûôy__
("deÁu…")))

	)

447 
	t__hiddí


	)

448 
	t__exp‹ãd


	)

451 
	t__off£tof
(
	tty≥
, 
	tfõld
Ë
	toff£tof
—y≥, fõld)

	)

452 
	t__øngeof
(
	tty≥
, 
	t°¨t
, 
	tíd
) \

453 (
	t__off£tof
(
	tty≥
, 
	tíd
Ë- __off£tof—y≥, 
	t°¨t
))

	)

461 #i‡
	t__GNUC_PREREQ__
(3, 1)

462 
	t__c⁄èöîof
(
	tx
, 
	ts
, 
	tm
) ({ \

463 c⁄° vﬁ©ûê
	`__ty≥of__
(((
s
 *)0)->
m
Ë*
__x
 = (
x
); \

464 
	`__DEQUALIFY
(
s
 *, (c⁄° vﬁ©ûê*)
__x
 - 
	`__off£tof
(s, 
m
));\

465 
	}
})

	)

467 
	t__c⁄èöîof
(
	tx
, 
	ts
, 
	tm
) \

468 
	t__DEQUALIFY
(
	ts
 *, (c⁄° vﬁ©ûê*)(
	tx
Ë- 
	t__off£tof
(s, 
	tm
))

	)

477 #i‡!
	t__GNUC_PREREQ__
(2, 7Ë&& !
	tdeföed
(
	t__INTEL_COMPILER
)

478 
	t__¥ötÊike
(
	tfmèrg
, 
	tfú°v¨¨g
)

	)

479 
	t__sˇnÊike
(
	tfmèrg
, 
	tfú°v¨¨g
)

	)

480 
	t__f‹m©_¨g
(
	tfmèrg
)

	)

481 
	t__°rfm⁄like
(
	tfmèrg
, 
	tfú°v¨¨g
)

	)

482 
	t__°r·imñike
(
	tfmèrg
, 
	tfú°v¨¨g
)

	)

484 
	t__¥ötÊike
(
	tfmèrg
, 
	tfú°v¨¨g
) \

485 
	t__©åibuã__
((
	t__f‹m©__
 (
	t__¥ötf__
, 
	tfmèrg
, 
	tfú°v¨¨g
)))

	)

486 
	t__sˇnÊike
(
	tfmèrg
, 
	tfú°v¨¨g
) \

487 
	t__©åibuã__
((
	t__f‹m©__
 (
	t__sˇnf__
, 
	tfmèrg
, 
	tfú°v¨¨g
)))

	)

488 
	t__f‹m©_¨g
(
	tfmèrg
Ë
	t__©åibuã__
((
	t__f‹m©_¨g__
 (fmèrg)))

	)

489 
	t__°rfm⁄like
(
	tfmèrg
, 
	tfú°v¨¨g
) \

490 
	t__©åibuã__
((
	t__f‹m©__
 (
	t__°rfm⁄__
, 
	tfmèrg
, 
	tfú°v¨¨g
)))

	)

491 
	t__°r·imñike
(
	tfmèrg
, 
	tfú°v¨¨g
) \

492 
	t__©åibuã__
((
	t__f‹m©__
 (
	t__°r·ime__
, 
	tfmèrg
, 
	tfú°v¨¨g
)))

	)

496 #i‡
	tdeföed
(
	t__FªeBSD_cc_vîsi⁄
) && __FreeBSD_cc_version >= 300001 && \

497 
	tdeföed
(
	t__GNUC__
Ë&& !deföed(
	t__INTEL_COMPILER
)

498 
	t__¥ötf0like
(
	tfmèrg
, 
	tfú°v¨¨g
) \

499 
	t__©åibuã__
((
	t__f‹m©__
 (
	t__¥ötf0__
, 
	tfmèrg
, 
	tfú°v¨¨g
)))

	)

501 
	t__¥ötf0like
(
	tfmèrg
, 
	tfú°v¨¨g
)

	)

504 #i‡
	tdeföed
(
	t__GNUC__
Ë|| deföed(
	t__INTEL_COMPILER
)

505 #i‚de‡
	t__INTEL_COMPILER


506 
	t__°r⁄g_ª„ªn˚
(
	tsym
,
	tÆüssym
) \

507 
	t__ty≥of
 (
	tsym
Ë
	tÆüssym
 
	t__©åibuã__
 ((
	t__Æüs__
 (#sym)))

	)

509 #ifde‡
	t__ELF__


510 #ifde‡
	t__STDC__


511 
	t__wók_ª„ªn˚
(
	tsym
,
	tÆüs
) \

512 
	t__asm__
(".weak " #alias); \

513 
	`__asm__
(".equ " #Æü†", " #sym)

	)

514 
	#__w¨n_ª„ªn˚s
(
sym
,
msg
) \

515 
	`__asm__
(".section .gnu.warning." #sym); \

516 
	`__asm__
(".asciz \"" 
msg
 "\""); \

517 
	`__asm__
(".¥evious")

	)

518 
	#__sym_com∑t
(
sym
,
im∂
,
vîid
) \

519 
	`__asm__
(".symvî " #im∂ ", " #sym "@" #vîid)

	)

520 
	#__sym_deÁu…
(
sym
,
im∂
,
vîid
) \

521 
	`__asm__
(".symvî " #im∂ ", " #sym "@@" #vîid)

	)

523 
	#__wók_ª„ªn˚
(
sym
,
Æüs
) \

524 
	`__asm__
(".weakálias"); \

525 
	`__asm__
(".equálüs, sym")

	)

526 
	#__w¨n_ª„ªn˚s
(
sym
,
msg
) \

527 
	`__asm__
(".section .gnu.warning.sym"); \

528 
	`__asm__
(".asciz \"msg\""); \

529 
	`__asm__
(".¥evious")

	)

530 
	#__sym_com∑t
(
sym
,
im∂
,
vîid
) \

531 
	`__asm__
(".symvî im∂, sym@vîid")

	)

532 
	#__sym_deÁu…
(
im∂
,
sym
,
vîid
) \

533 
	`__asm__
(".symvî im∂, sym@@vîid")

	)

536 #ifde‡
__STDC__


537 
	#__wók_ª„ªn˚
(
sym
,
Æüs
) \

538 
	`__asm__
(".stabs \"_" #alias "\",11,0,0,0"); \

539 
	`__asm__
(".°ab†\"_" #sym "\",1,0,0,0")

	)

540 
	#__w¨n_ª„ªn˚s
(
sym
,
msg
) \

541 
	`__asm__
(".°ab†\"" 
msg
 "\",30,0,0,0"); \

542 
	`__asm__
(".°ab†\"_" #sym "\",1,0,0,0")

	)

544 
	#__wók_ª„ªn˚
(
sym
,
Æüs
) \

545 
	`__asm__
(".stabs \"_/**/alias\",11,0,0,0"); \

546 
	`__asm__
(".°ab†\"_/**/sym\",1,0,0,0")

	)

547 
	#__w¨n_ª„ªn˚s
(
sym
,
msg
) \

548 
	`__asm__
(".stabs msg,30,0,0,0"); \

549 
	`__asm__
(".°ab†\"_/**/sym\",1,0,0,0")

	)

554 #i‚def 
__FBSDID


555 
	#__FBSDID
(
s
Ë
__hack


	)

558 #i‚def 
__RCSID


559 
	#__RCSID
(
s
Ë
__hack


	)

562 #i‚def 
__RCSID_SOURCE


563 
	#__RCSID_SOURCE
(
s
Ë
__hack


	)

566 #i‚def 
__SCCSID


567 
	#__SCCSID
(
s
Ë
__hack


	)

570 #i‚def 
__COPYRIGHT


571 
	#__COPYRIGHT
(
s
Ë
__hack


	)

574 #i‚def 
__DECONST


575 
	#__DECONST
(
ty≥
, 
v¨
Ë(—y≥)(
__uöçå_t
)(c⁄° *)(v¨))

	)

578 #i‚def 
__DEVOLATILE


579 
	#__DEVOLATILE
(
ty≥
, 
v¨
Ë(—y≥)(
__uöçå_t
)(vﬁ©ûê*)(v¨))

	)

582 #i‚def 
__DEQUALIFY


583 
	#__DEQUALIFY
(
ty≥
, 
v¨
Ë(—y≥)(
__uöçå_t
)(c⁄° vﬁ©ûê*)(v¨))

	)

610 #i‡
	`deföed
(
_POSIX_C_SOURCE
) && _POSIX_C_SOURCE == 1

611 #unde‡
_POSIX_C_SOURCE


612 
	#_POSIX_C_SOURCE
 199009

	)

616 #i‡
	`deföed
(
_POSIX_C_SOURCE
) && _POSIX_C_SOURCE == 2

617 #unde‡
_POSIX_C_SOURCE


618 
	#_POSIX_C_SOURCE
 199209

	)

622 #ifde‡
_XOPEN_SOURCE


623 #i‡
_XOPEN_SOURCE
 - 0 >= 700

624 
	#__XSI_VISIBLE
 700

	)

625 #unde‡
_POSIX_C_SOURCE


626 
	#_POSIX_C_SOURCE
 200809

	)

627 #ñi‡
_XOPEN_SOURCE
 - 0 >= 600

628 
	#__XSI_VISIBLE
 600

	)

629 #unde‡
_POSIX_C_SOURCE


630 
	#_POSIX_C_SOURCE
 200112

	)

631 #ñi‡
_XOPEN_SOURCE
 - 0 >= 500

632 
	#__XSI_VISIBLE
 500

	)

633 #unde‡
_POSIX_C_SOURCE


634 
	#_POSIX_C_SOURCE
 199506

	)

642 #i‡
	`deföed
(
_POSIX_SOURCE
Ë&& !deföed(
_POSIX_C_SOURCE
)

643 
	#_POSIX_C_SOURCE
 198808

	)

645 #ifde‡
_POSIX_C_SOURCE


646 #i‡
_POSIX_C_SOURCE
 >= 200809

647 
	#__POSIX_VISIBLE
 200809

	)

648 
	#__ISO_C_VISIBLE
 1999

	)

649 #ñi‡
_POSIX_C_SOURCE
 >= 200112

650 
	#__POSIX_VISIBLE
 200112

	)

651 
	#__ISO_C_VISIBLE
 1999

	)

652 #ñi‡
_POSIX_C_SOURCE
 >= 199506

653 
	#__POSIX_VISIBLE
 199506

	)

654 
	#__ISO_C_VISIBLE
 1990

	)

655 #ñi‡
_POSIX_C_SOURCE
 >= 199309

656 
	#__POSIX_VISIBLE
 199309

	)

657 
	#__ISO_C_VISIBLE
 1990

	)

658 #ñi‡
_POSIX_C_SOURCE
 >= 199209

659 
	#__POSIX_VISIBLE
 199209

	)

660 
	#__ISO_C_VISIBLE
 1990

	)

661 #ñi‡
_POSIX_C_SOURCE
 >= 199009

662 
	#__POSIX_VISIBLE
 199009

	)

663 
	#__ISO_C_VISIBLE
 1990

	)

665 
	#__POSIX_VISIBLE
 198808

	)

666 
	#__ISO_C_VISIBLE
 0

	)

681 #i‡
	`deföed
(
_ANSI_SOURCE
)

682 
	#__POSIX_VISIBLE
 0

	)

683 
	#__XSI_VISIBLE
 0

	)

684 
	#__BSD_VISIBLE
 0

	)

685 
	#__ISO_C_VISIBLE
 1990

	)

686 #ñi‡
	`deföed
(
_C99_SOURCE
)

687 
	#__POSIX_VISIBLE
 0

	)

688 
	#__XSI_VISIBLE
 0

	)

689 
	#__BSD_VISIBLE
 0

	)

690 
	#__ISO_C_VISIBLE
 1999

	)

691 #ñi‡
	`deföed
(
_C11_SOURCE
)

692 
	#__POSIX_VISIBLE
 0

	)

693 
	#__XSI_VISIBLE
 0

	)

694 
	#__BSD_VISIBLE
 0

	)

695 
	#__ISO_C_VISIBLE
 2011

	)

696 #ñi‡
	`deföed
(
_GNU_SOURCE
)

697 
	#__POSIX_VISIBLE
 200809

	)

698 
	#__XSI_VISIBLE
 700

	)

699 
	#__BSD_VISIBLE
 1

	)

700 
	#__ISO_C_VISIBLE
 2011

	)

701 
	#__GNU_VISIBLE
 1

	)

703 
	#__POSIX_VISIBLE
 200809

	)

704 
	#__XSI_VISIBLE
 700

	)

705 
	#__BSD_VISIBLE
 1

	)

706 
	#__ISO_C_VISIBLE
 2011

	)

	@/usr/include/sys/features.h

21 #i‚de‡
_SYS_FEATURES_H


22 
	#_SYS_FEATURES_H


	)

24 #ifde‡
__˝lu•lus


29 #i‚de‡
__GNUC_PREREQ


30 #i‡
deföed
 
__GNUC__
 && deföed 
__GNUC_MINOR__


31 
	#__GNUC_PREREQ
(
maj
, 
mö
) \

32 ((
__GNUC__
 << 16Ë+ 
__GNUC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

34 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë0

	)

38 
	#__GNUC_PREREQ__
(
ma
, 
mi
Ë
	`__GNUC_PREREQ
(ma, mi)

	)

42 #ifde‡
__πems__


43 
	#_POSIX_JOB_CONTROL
 1

	)

44 
	#_POSIX_SAVED_IDS
 1

	)

45 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_ASYNCHRONOUS_IO
 1

	)

47 
	#_POSIX_FSYNC
 1

	)

48 
	#_POSIX_MAPPED_FILES
 1

	)

49 
	#_POSIX_MEMLOCK
 1

	)

50 
	#_POSIX_MEMLOCK_RANGE
 1

	)

51 
	#_POSIX_MEMORY_PROTECTION
 1

	)

52 
	#_POSIX_MESSAGE_PASSING
 1

	)

53 
	#_POSIX_MONOTONIC_CLOCK
 200112L

	)

54 
	#_POSIX_PRIORITIZED_IO
 1

	)

55 
	#_POSIX_PRIORITY_SCHEDULING
 1

	)

56 
	#_POSIX_REALTIME_SIGNALS
 1

	)

57 
	#_POSIX_SEMAPHORES
 1

	)

59 
	#_POSIX_SYNCHRONIZED_IO
 1

	)

60 
	#_POSIX_TIMERS
 1

	)

61 
	#_POSIX_BARRIERS
 200112L

	)

62 
	#_POSIX_READER_WRITER_LOCKS
 200112L

	)

63 
	#_POSIX_SPIN_LOCKS
 200112L

	)

67 
	#_POSIX_THREADS
 1

	)

68 
	#_POSIX_THREAD_ATTR_STACKADDR
 1

	)

69 
	#_POSIX_THREAD_ATTR_STACKSIZE
 1

	)

70 
	#_POSIX_THREAD_PRIORITY_SCHEDULING
 1

	)

71 
	#_POSIX_THREAD_PRIO_INHERIT
 1

	)

72 
	#_POSIX_THREAD_PRIO_PROTECT
 1

	)

73 
	#_POSIX_THREAD_PROCESS_SHARED
 1

	)

74 
	#_POSIX_THREAD_SAFE_FUNCTIONS
 1

	)

77 
	#_POSIX_SPAWN
 1

	)

78 
	#_POSIX_TIMEOUTS
 1

	)

79 
	#_POSIX_CPUTIME
 1

	)

80 
	#_POSIX_THREAD_CPUTIME
 1

	)

81 
	#_POSIX_SPORADIC_SERVER
 1

	)

82 
	#_POSIX_THREAD_SPORADIC_SERVER
 1

	)

83 
	#_POSIX_DEVICE_CONTROL
 1

	)

84 
	#_POSIX_DEVCTL_DIRECTION
 1

	)

85 
	#_POSIX_INTERRUPT_CONTROL
 1

	)

86 
	#_POSIX_ADVISORY_INFO
 1

	)

89 
	#_UNIX98_THREAD_MUTEX_ATTRIBUTES
 1

	)

94 #ifde‡
__XMK__


95 
	#_POSIX_THREADS
 1

	)

96 
	#_POSIX_THREAD_PRIORITY_SCHEDULING
 1

	)

100 #ifde‡
__svr4__


101 
	#_POSIX_JOB_CONTROL
 1

	)

102 
	#_POSIX_SAVED_IDS
 1

	)

103 
	#_POSIX_VERSION
 199009L

	)

106 #ifde‡
__CYGWIN__


108 #i‡!
deföed
(
__STRICT_ANSI__
Ë|| deföed(
__˝lu•lus
Ë|| 
__STDC_VERSION__
 >= 199901L

109 
	#_POSIX_VERSION
 200112L

	)

110 
	#_POSIX2_VERSION
 200112L

	)

111 
	#_XOPEN_VERSION
 600

	)

113 
	#_POSIX_ADVISORY_INFO
 200112L

	)

116 
	#_POSIX_CHOWN_RESTRICTED
 1

	)

117 
	#_POSIX_CLOCK_SELECTION
 200112L

	)

118 
	#_POSIX_CPUTIME
 200112L

	)

119 
	#_POSIX_FSYNC
 200112L

	)

120 
	#_POSIX_IPV6
 200112L

	)

121 
	#_POSIX_JOB_CONTROL
 1

	)

122 
	#_POSIX_MAPPED_FILES
 200112L

	)

124 
	#_POSIX_MEMLOCK_RANGE
 200112L

	)

125 
	#_POSIX_MEMORY_PROTECTION
 200112L

	)

126 
	#_POSIX_MESSAGE_PASSING
 200112L

	)

127 
	#_POSIX_MONOTONIC_CLOCK
 200112L

	)

128 
	#_POSIX_NO_TRUNC
 1

	)

130 
	#_POSIX_PRIORITY_SCHEDULING
 200112L

	)

131 
	#_POSIX_RAW_SOCKETS
 200112L

	)

132 
	#_POSIX_READER_WRITER_LOCKS
 200112L

	)

133 
	#_POSIX_REALTIME_SIGNALS
 200112L

	)

134 
	#_POSIX_REGEXP
 1

	)

135 
	#_POSIX_SAVED_IDS
 1

	)

136 
	#_POSIX_SEMAPHORES
 200112L

	)

137 
	#_POSIX_SHARED_MEMORY_OBJECTS
 200112L

	)

138 
	#_POSIX_SHELL
 1

	)

140 
	#_POSIX_SPIN_LOCKS
 200112L

	)

142 
	#_POSIX_SYNCHRONIZED_IO
 200112L

	)

143 
	#_POSIX_THREAD_ATTR_STACKADDR
 200112L

	)

144 
	#_POSIX_THREAD_ATTR_STACKSIZE
 200112L

	)

145 
	#_POSIX_THREAD_CPUTIME
 200112L

	)

148 
	#_POSIX_THREAD_PRIORITY_SCHEDULING
 200112L

	)

149 
	#_POSIX_THREAD_PROCESS_SHARED
 200112L

	)

150 
	#_POSIX_THREAD_SAFE_FUNCTIONS
 200112L

	)

152 
	#_POSIX_THREADS
 200112L

	)

154 
	#_POSIX_TIMERS
 1

	)

160 
	#_POSIX_VDISABLE
 '\0'

	)

161 
	#_POSIX2_C_BIND
 200112L

	)

162 
	#_POSIX2_C_DEV
 200112L

	)

163 
	#_POSIX2_CHAR_TERM
 200112L

	)

173 
	#_POSIX2_SW_DEV
 200112L

	)

174 
	#_POSIX2_UPE
 200112L

	)

175 
	#_POSIX_V6_ILP32_OFF32
 -1

	)

176 #ifde‡
__LP64__


177 
	#_POSIX_V6_ILP32_OFFBIG
 -1

	)

178 
	#_POSIX_V6_LP64_OFF64
 1

	)

179 
	#_POSIX_V6_LPBIG_OFFBIG
 1

	)

181 
	#_POSIX_V6_ILP32_OFFBIG
 1

	)

182 
	#_POSIX_V6_LP64_OFF64
 -1

	)

183 
	#_POSIX_V6_LPBIG_OFFBIG
 -1

	)

185 
	#_XBS5_ILP32_OFF32
 
_POSIX_V6_ILP32_OFF32


	)

186 
	#_XBS5_ILP32_OFFBIG
 
_POSIX_V6_ILP32_OFFBIG


	)

187 
	#_XBS5_LP64_OFF64
 
_POSIX_V6_LP64_OFF64


	)

188 
	#_XBS5_LPBIG_OFFBIG
 
_POSIX_V6_LPBIG_OFFBIG


	)

189 
	#_XOPEN_CRYPT
 1

	)

190 
	#_XOPEN_ENH_I18N
 1

	)

194 
	#_XOPEN_SHM
 1

	)

203 
	#__STDC_ISO_10646__
 200305L

	)

214 #i‡!
deföed
(
_POSIX_C_SOURCE
Ë&& deföed(
_XOPEN_SOURCE
)

215 #i‡(
_XOPEN_SOURCE
 - 0) == 700

216 
	#_POSIX_C_SOURCE
 200809L

	)

217 #ñi‡(
_XOPEN_SOURCE
 - 0) == 600

218 
	#_POSIX_C_SOURCE
 200112L

	)

219 #ñi‡(
_XOPEN_SOURCE
 - 0) == 500

220 
	#_POSIX_C_SOURCE
 199506L

	)

221 #ñi‡(
_XOPEN_SOURCE
 - 0) < 500

222 
	#_POSIX_C_SOURCE
 2

	)

226 #ifde‡
__˝lu•lus


	@/usr/include/sys/reent.h

7 #i‚de‡
_SYS_REENT_H_


8 #ifde‡
__˝lu•lus


11 
	#_SYS_REENT_H_


	)

13 
	~<_™si.h
>

14 
	~<°ddef.h
>

15 
	~<sys/_ty≥s.h
>

17 
	#_NULL
 0

	)

19 #i‚de‡
__L⁄g


20 #i‡
__LONG_MAX__
 == 2147483647L

21 
	#__L⁄g
 

	)

22 
	t__L⁄g
 
	t__UL⁄g
;

23 #ñi‡
__INT_MAX__
 == 2147483647

24 
	#__L⁄g
 

	)

25 
	t__L⁄g
 
	t__UL⁄g
;

29 #i‡!
deföed
–
__L⁄g
)

30 
	~<sys/ty≥s.h
>

33 #i‚de‡
__L⁄g


34 
	#__L⁄g
 
__öt32_t


	)

35 
__uöt32_t
 
	t__UL⁄g
;

38 
_ªít
;

45 
	s_Bigöt


47 
_Bigöt
 *
_√xt
;

48 
_k
, 
_maxwds
, 
_sign
, 
_wds
;

49 
__UL⁄g
 
_x
[1];

53 
	s__tm


55 
__tm_£c
;

56 
__tm_mö
;

57 
__tm_hour
;

58 
__tm_mday
;

59 
__tm_m⁄
;

60 
__tm_yór
;

61 
__tm_wday
;

62 
__tm_yday
;

63 
__tm_isd°
;

70 
	#_ATEXIT_SIZE
 32

	)

72 
	s_⁄_exô_¨gs
 {

73 * 
_‚¨gs
[
_ATEXIT_SIZE
];

74 * 
_dso_h™dÀ
[
_ATEXIT_SIZE
];

76 
__UL⁄g
 
_‚ty≥s
;

79 
__UL⁄g
 
_is_cxa
;

82 #ifde‡
_REENT_SMALL


83 
	s_©exô
 {

84 
_©exô
 *
_√xt
;

85 
_öd
;

86 (*
_‚s
[
_ATEXIT_SIZE
])();

87 
_⁄_exô_¨gs
 * 
_⁄_exô_¨gs_±r
;

89 
	#_ATEXIT_INIT
 {
_NULL
, 0, {_NULL}, _NULL}

	)

91 
	s_©exô
 {

92 
_©exô
 *
_√xt
;

93 
_öd
;

95 (*
_‚s
[
_ATEXIT_SIZE
])();

96 
_⁄_exô_¨gs
 _on_exit_args;

98 
	#_ATEXIT_INIT
 {
_NULL
, 0, {_NULL}, {{_NULL}, {_NULL}, 0, 0}}

	)

101 #ifde‡
_REENT_GLOBAL_ATEXIT


102 
	#_REENT_INIT_ATEXIT


	)

104 
	#_REENT_INIT_ATEXIT
 \

105 
_NULL
, 
_ATEXIT_INIT
,

	)

115 
	s__sbuf
 {

116 *
_ba£
;

117 
_size
;

145 #ifde‡
_REENT_SMALL


151 
	s__sFILE_Áke
 {

152 *
_p
;

153 
_r
;

154 
_w
;

155 
_Êags
;

156 
_fûe
;

157 
__sbuf
 
_bf
;

158 
_lbfsize
;

160 
_ªít
 *
_d©a
;

166 
_VOID
 
_EXFUN
(
__söô
,(
_ªít
 *));

168 
	#_REENT_SMALL_CHECK_INIT
(
±r
) \

171 i‡((
±r
Ë&& !’å)->
__sdidöô
) \

172 
	`__söô
 (
±r
); \

174 0)

	)

176 
	#_REENT_SMALL_CHECK_INIT
(
±r
Ë

	)

179 
	s__sFILE
 {

180 *
	g_p
;

181 
	g_r
;

182 
	g_w
;

183 
	g_Êags
;

184 
	g_fûe
;

185 
__sbuf
 
	g_bf
;

186 
	g_lbfsize
;

188 #ifde‡
_REENT_SMALL


189 
_ªít
 *
	g_d©a
;

193 
_PTR
 
	g_cookõ
;

195 
_READ_WRITE_RETURN_TYPE
 
_EXFNPTR
(
_ªad
, (
_ªít
 *, 
_PTR
,

196 *, 
_READ_WRITE_BUFSIZE_TYPE
));

197 
_READ_WRITE_RETURN_TYPE
 
_EXFNPTR
(
_wrôe
, (
_ªít
 *, 
_PTR
,

199 
_READ_WRITE_BUFSIZE_TYPE
));

200 
_Âos_t
 
_EXFNPTR
(
_£ek
, (
_ªít
 *, 
_PTR
, _fpos_t, ));

201 
_EXFNPTR
(
_˛o£
, (
_ªít
 *, 
_PTR
));

204 
__sbuf
 
	g_ub
;

205 *
	g_up
;

206 
	g_ur
;

209 
	g_ubuf
[3];

210 
	g_nbuf
[1];

213 
__sbuf
 
	g_lb
;

216 
	g_blksize
;

217 
_off_t
 
	g_off£t
;

219 #i‚de‡
_REENT_SMALL


220 
_ªít
 *
	g_d©a
;

223 #i‚de‡
__SINGLE_THREAD__


224 
_Êock_t
 
	g_lock
;

226 
_mb°©e_t
 
	g_mb°©e
;

227 
	g_Êags2
;

230 #ifde‡
__CUSTOM_FILE_IO__


233 
	~<sys/cu°om_fûe.h
>

236 #ifde‡
__LARGE64_FILES


237 
	s__sFILE64
 {

238 *
	g_p
;

239 
	g_r
;

240 
	g_w
;

241 
	g_Êags
;

242 
	g_fûe
;

243 
__sbuf
 
	g_bf
;

244 
	g_lbfsize
;

246 
_ªít
 *
	g_d©a
;

249 
_PTR
 
	g_cookõ
;

251 
_READ_WRITE_RETURN_TYPE
 
_EXFNPTR
(
_ªad
, (
_ªít
 *, 
_PTR
,

252 *, 
_READ_WRITE_BUFSIZE_TYPE
));

253 
_READ_WRITE_RETURN_TYPE
 
_EXFNPTR
(
_wrôe
, (
_ªít
 *, 
_PTR
,

255 
_READ_WRITE_BUFSIZE_TYPE
));

256 
_Âos_t
 
_EXFNPTR
(
_£ek
, (
_ªít
 *, 
_PTR
, _fpos_t, ));

257 
_EXFNPTR
(
_˛o£
, (
_ªít
 *, 
_PTR
));

260 
__sbuf
 
	g_ub
;

261 *
	g_up
;

262 
	g_ur
;

265 
	g_ubuf
[3];

266 
	g_nbuf
[1];

269 
__sbuf
 
	g_lb
;

272 
	g_blksize
;

273 
	g_Êags2
;

275 
_off64_t
 
	g_off£t
;

276 
_Âos64_t
 
_EXFNPTR
(
_£ek64
, (
_ªít
 *, 
_PTR
, _fpos64_t, ));

278 #i‚de‡
__SINGLE_THREAD__


279 
_Êock_t
 
	g_lock
;

281 
_mb°©e_t
 
	g_mb°©e
;

283 
__sFILE64
 
	t__FILE
;

285 
__sFILE
 
	t__FILE
;

289 
	s_glue


291 
_glue
 *
	g_√xt
;

292 
	g_niobs
;

293 
__FILE
 *
	g_iobs
;

310 
	#_RAND48_SEED_0
 (0x330e)

	)

311 
	#_RAND48_SEED_1
 (0xabcd)

	)

312 
	#_RAND48_SEED_2
 (0x1234)

	)

313 
	#_RAND48_MULT_0
 (0xe66d)

	)

314 
	#_RAND48_MULT_1
 (0xdìc)

	)

315 
	#_RAND48_MULT_2
 (0x0005)

	)

316 
	#_RAND48_ADD
 (0x000b)

	)

317 
	s_ønd48
 {

318 
	g_£ed
[3];

319 
	g_mu…
[3];

320 
	g_add
;

321 #ifde‡
_REENT_SMALL


323 
__exãnsi⁄__
 
	g_ønd_√xt
;

328 
	#_REENT_EMERGENCY_SIZE
 25

	)

329 
	#_REENT_ASCTIME_SIZE
 26

	)

330 
	#_REENT_SIGNAL_SIZE
 24

	)

340 #ifde‡
_REENT_SMALL


342 
	s_m¥ec


345 
_Bigöt
 *
	g_ªsu…
;

346 
	g_ªsu…_k
;

347 
_Bigöt
 *
	g_p5s
;

348 
_Bigöt
 **
	g_‰ìli°
;

352 
	s_misc_ªít


355 *
	g_°πok_œ°
;

356 
_mb°©e_t
 
	g_mbÀn_°©e
;

357 
_mb°©e_t
 
	g_w˘omb_°©e
;

358 
_mb°©e_t
 
	g_mbtowc_°©e
;

359 
	g_l64a_buf
[8];

360 
	g_gëd©e_îr
;

361 
_mb°©e_t
 
	g_mbæí_°©e
;

362 
_mb°©e_t
 
	g_mbπowc_°©e
;

363 
_mb°©e_t
 
	g_mb§towcs_°©e
;

364 
_mb°©e_t
 
	g_w¸tomb_°©e
;

365 
_mb°©e_t
 
	g_wc§tombs_°©e
;

370 
	s_ªít


374 
	g_î∫o
;

379 
__FILE
 *
	g_°dö
, *
	g_°dout
, *
	g_°dîr
;

381 
	g_öc
;

383 *
	g_emîgícy
;

385 
	g__sdidöô
;

387 
	g_cuºít_ˇãg‹y
;

388 
_CONST
 *
	g_cuºít_loˇÀ
;

390 
_m¥ec
 *
	g_mp
;

392 
_EXFNPTR
(
__˛ónup
, (
_ªít
 *));

394 
	g_gamma_signgam
;

397 
	g_cvéí
;

398 *
	g_cvtbuf
;

400 
_ønd48
 *
	g_r48
;

401 
__tm
 *
	g_loˇ…ime_buf
;

402 *
	g_as˘ime_buf
;

405 (**(
	g_sig_func
))();

407 #i‚de‡
_REENT_GLOBAL_ATEXIT


409 
_©exô
 *
	g_©exô
;

410 
_©exô
 
	g_©exô0
;

413 
_glue
 
	g__sglue
;

414 
__FILE
 *
	g__sf
;

415 
_misc_ªít
 *
	g_misc
;

416 *
	g_sig«l_buf
;

419 c⁄° 
__sFILE_Áke
 
__sf_Áke_°dö
;

420 c⁄° 
__sFILE_Áke
 
__sf_Áke_°dout
;

421 c⁄° 
__sFILE_Áke
 
__sf_Áke_°dîr
;

423 
	#_REENT_INIT
(
v¨
) \

425 (
__FILE
 *)&
__sf_Áke_°dö
, \

426 (
__FILE
 *)&
__sf_Áke_°dout
, \

427 (
__FILE
 *)&
__sf_Áke_°dîr
, \

429 
_NULL
, \

433 
_NULL
, \

434 
_NULL
, \

437 
_NULL
, \

438 
_NULL
, \

439 
_NULL
, \

440 
_NULL
, \

441 
_NULL
, \

442 
_REENT_INIT_ATEXIT
 \

443 {
_NULL
, 0, _NULL}, \

444 
_NULL
, \

445 
_NULL
, \

446 
_NULL
 \

447 }

	)

449 
	#_REENT_INIT_PTR
(
v¨
) \

450 { 
	`mem£t
((
v¨
), 0, (*(var))); \

451 (
v¨
)->
_°dö
 = (
__FILE
 *)&
__sf_Áke_°dö
; \

452 (
v¨
)->
_°dout
 = (
__FILE
 *)&
__sf_Áke_°dout
; \

453 (
v¨
)->
_°dîr
 = (
__FILE
 *)&
__sf_Áke_°dîr
; \

454 (
v¨
)->
_cuºít_loˇÀ
 = "C"; \

455 }

	)

458 #i‡
DEBUG


459 
	~<as£π.h
>

460 
	#__ªít_as£π
(
x
Ë
	`as£π
(x)

	)

462 
	#__ªít_as£π
(
x
Ë(()0)

	)

465 #ifde‡
__CUSTOM_FILE_IO__


466 #îr‹ 
Cu°om
 
FILE
 
I
/
O
 
™d
 
_REENT_SMALL
 
nŸ
 
cuºíéy
 
suµ‹ãd
.

470 
	#_REENT_CHECK
(
v¨
, 
wh©
, 
ty≥
, 
size
, 
öô
) do { \

471 
_ªít
 *
_r
 = (
v¨
); \

472 i‡(
_r
->
wh©
 =
NULL
) { \

473 
_r
->
wh©
 = (
ty≥
)
	`mÆloc
(
size
); \

474 
	`__ªít_as£π
(
_r
->
wh©
); \

475 
öô
; \

477 } 0)

	)

479 
	#_REENT_CHECK_TM
(
v¨
) \

480 
	`_REENT_CHECK
(
v¨
, 
_loˇ…ime_buf
, 
__tm
 *,  *((var)->_localtime_buf), \

481  )

	)

483 
	#_REENT_CHECK_ASCTIME_BUF
(
v¨
) \

484 
	`_REENT_CHECK
(
v¨
, 
_as˘ime_buf
, *, 
_REENT_ASCTIME_SIZE
, \

485 
	`mem£t
((
v¨
)->
_as˘ime_buf
, 0, 
_REENT_ASCTIME_SIZE
))

	)

488 
	#_REENT_INIT_RAND48
(
v¨
) do { \

489 
_ªít
 *
_r
 = (
v¨
); \

490 
_r
->
_r48
->
_£ed
[0] = 
_RAND48_SEED_0
; \

491 
_r
->
_r48
->
_£ed
[1] = 
_RAND48_SEED_1
; \

492 
_r
->
_r48
->
_£ed
[2] = 
_RAND48_SEED_2
; \

493 
_r
->
_r48
->
_mu…
[0] = 
_RAND48_MULT_0
; \

494 
_r
->
_r48
->
_mu…
[1] = 
_RAND48_MULT_1
; \

495 
_r
->
_r48
->
_mu…
[2] = 
_RAND48_MULT_2
; \

496 
_r
->
_r48
->
_add
 = 
_RAND48_ADD
; \

497 
_r
->
_r48
->
_ønd_√xt
 = 1; \

498 } 0)

	)

499 
	#_REENT_CHECK_RAND48
(
v¨
) \

500 
	`_REENT_CHECK
(
v¨
, 
_r48
, 
_ønd48
 *,  *((v¨)->_r48), 
	`_REENT_INIT_RAND48
((v¨)))

	)

502 
	#_REENT_INIT_MP
(
v¨
) do { \

503 
_ªít
 *
_r
 = (
v¨
); \

504 
_r
->
_mp
->
_ªsu…_k
 = 0; \

505 
_r
->
_mp
->
_ªsu…
 = _r->_mp->
_p5s
 = 
_NULL
; \

506 
_r
->
_mp
->
_‰ìli°
 = 
_NULL
; \

507 } 0)

	)

508 
	#_REENT_CHECK_MP
(
v¨
) \

509 
	`_REENT_CHECK
(
v¨
, 
_mp
, 
_m¥ec
 *,  *((v¨)->_mp), 
	`_REENT_INIT_MP
(v¨))

	)

511 
	#_REENT_CHECK_EMERGENCY
(
v¨
) \

512 
	`_REENT_CHECK
(
v¨
, 
_emîgícy
, *, 
_REENT_EMERGENCY_SIZE
, )

	)

514 
	#_REENT_INIT_MISC
(
v¨
) do { \

515 
_ªít
 *
_r
 = (
v¨
); \

516 
_r
->
_misc
->
_°πok_œ°
 = 
_NULL
; \

517 
_r
->
_misc
->
_mbÀn_°©e
.
__cou¡
 = 0; \

518 
_r
->
_misc
->
_mbÀn_°©e
.
__vÆue
.
__wch
 = 0; \

519 
_r
->
_misc
->
_w˘omb_°©e
.
__cou¡
 = 0; \

520 
_r
->
_misc
->
_w˘omb_°©e
.
__vÆue
.
__wch
 = 0; \

521 
_r
->
_misc
->
_mbtowc_°©e
.
__cou¡
 = 0; \

522 
_r
->
_misc
->
_mbtowc_°©e
.
__vÆue
.
__wch
 = 0; \

523 
_r
->
_misc
->
_mbæí_°©e
.
__cou¡
 = 0; \

524 
_r
->
_misc
->
_mbæí_°©e
.
__vÆue
.
__wch
 = 0; \

525 
_r
->
_misc
->
_mbπowc_°©e
.
__cou¡
 = 0; \

526 
_r
->
_misc
->
_mbπowc_°©e
.
__vÆue
.
__wch
 = 0; \

527 
_r
->
_misc
->
_mb§towcs_°©e
.
__cou¡
 = 0; \

528 
_r
->
_misc
->
_mb§towcs_°©e
.
__vÆue
.
__wch
 = 0; \

529 
_r
->
_misc
->
_w¸tomb_°©e
.
__cou¡
 = 0; \

530 
_r
->
_misc
->
_w¸tomb_°©e
.
__vÆue
.
__wch
 = 0; \

531 
_r
->
_misc
->
_wc§tombs_°©e
.
__cou¡
 = 0; \

532 
_r
->
_misc
->
_wc§tombs_°©e
.
__vÆue
.
__wch
 = 0; \

533 
_r
->
_misc
->
_l64a_buf
[0] = '\0'; \

534 
_r
->
_misc
->
_gëd©e_îr
 = 0; \

535 } 0)

	)

536 
	#_REENT_CHECK_MISC
(
v¨
) \

537 
	`_REENT_CHECK
(
v¨
, 
_misc
, 
_misc_ªít
 *,  *((v¨)->_misc), 
	`_REENT_INIT_MISC
(v¨))

	)

539 
	#_REENT_CHECK_SIGNAL_BUF
(
v¨
) \

540 
	`_REENT_CHECK
(
v¨
, 
_sig«l_buf
, *, 
_REENT_SIGNAL_SIZE
, )

	)

542 
	#_REENT_SIGNGAM
(
±r
Ë(’å)->
_gamma_signgam
)

	)

543 
	#_REENT_RAND_NEXT
(
±r
Ë(’å)->
_r48
->
_ønd_√xt
)

	)

544 
	#_REENT_RAND48_SEED
(
±r
Ë(’å)->
_r48
->
_£ed
)

	)

545 
	#_REENT_RAND48_MULT
(
±r
Ë(’å)->
_r48
->
_mu…
)

	)

546 
	#_REENT_RAND48_ADD
(
±r
Ë(’å)->
_r48
->
_add
)

	)

547 
	#_REENT_MP_RESULT
(
±r
Ë(’å)->
_mp
->
_ªsu…
)

	)

548 
	#_REENT_MP_RESULT_K
(
±r
Ë(’å)->
_mp
->
_ªsu…_k
)

	)

549 
	#_REENT_MP_P5S
(
±r
Ë(’å)->
_mp
->
_p5s
)

	)

550 
	#_REENT_MP_FREELIST
(
±r
Ë(’å)->
_mp
->
_‰ìli°
)

	)

551 
	#_REENT_ASCTIME_BUF
(
±r
Ë(’å)->
_as˘ime_buf
)

	)

552 
	#_REENT_TM
(
±r
Ë(’å)->
_loˇ…ime_buf
)

	)

553 
	#_REENT_EMERGENCY
(
±r
Ë(’å)->
_emîgícy
)

	)

554 
	#_REENT_STRTOK_LAST
(
±r
Ë(’å)->
_misc
->
_°πok_œ°
)

	)

555 
	#_REENT_MBLEN_STATE
(
±r
Ë(’å)->
_misc
->
_mbÀn_°©e
)

	)

556 
	#_REENT_MBTOWC_STATE
(
±r
)(’å)->
_misc
->
_mbtowc_°©e
)

	)

557 
	#_REENT_WCTOMB_STATE
(
±r
)(’å)->
_misc
->
_w˘omb_°©e
)

	)

558 
	#_REENT_MBRLEN_STATE
(
±r
Ë(’å)->
_misc
->
_mbæí_°©e
)

	)

559 
	#_REENT_MBRTOWC_STATE
(
±r
Ë(’å)->
_misc
->
_mbπowc_°©e
)

	)

560 
	#_REENT_MBSRTOWCS_STATE
(
±r
Ë(’å)->
_misc
->
_mb§towcs_°©e
)

	)

561 
	#_REENT_WCRTOMB_STATE
(
±r
Ë(’å)->
_misc
->
_w¸tomb_°©e
)

	)

562 
	#_REENT_WCSRTOMBS_STATE
(
±r
Ë(’å)->
_misc
->
_wc§tombs_°©e
)

	)

563 
	#_REENT_L64A_BUF
(
±r
Ë(’å)->
_misc
->
_l64a_buf
)

	)

564 
	#_REENT_GETDATE_ERR_P
(
±r
Ë(&(’å)->
_misc
->
_gëd©e_îr
))

	)

565 
	#_REENT_SIGNAL_BUF
(
±r
Ë(’å)->
_sig«l_buf
)

	)

569 
	s_ªít


571 
	g_î∫o
;

576 
__FILE
 *
	g_°dö
, *
	g_°dout
, *
	g_°dîr
;

578 
	g_öc
;

579 
	g_emîgícy
[
_REENT_EMERGENCY_SIZE
];

581 
	g_cuºít_ˇãg‹y
;

582 
_CONST
 *
	g_cuºít_loˇÀ
;

584 
	g__sdidöô
;

586 
_EXFNPTR
(
__˛ónup
, (
_ªít
 *));

589 
_Bigöt
 *
	g_ªsu…
;

590 
	g_ªsu…_k
;

591 
_Bigöt
 *
	g_p5s
;

592 
_Bigöt
 **
	g_‰ìli°
;

595 
	g_cvéí
;

596 *
	g_cvtbuf
;

602 
	g_unu£d_ønd
;

603 * 
	g_°πok_œ°
;

604 
	g_as˘ime_buf
[
_REENT_ASCTIME_SIZE
];

605 
__tm
 
	g_loˇ…ime_buf
;

606 
	g_gamma_signgam
;

607 
__exãnsi⁄__
 
	g_ønd_√xt
;

608 
_ønd48
 
	g_r48
;

609 
_mb°©e_t
 
	g_mbÀn_°©e
;

610 
_mb°©e_t
 
	g_mbtowc_°©e
;

611 
_mb°©e_t
 
	g_w˘omb_°©e
;

612 
	g_l64a_buf
[8];

613 
	g_sig«l_buf
[
_REENT_SIGNAL_SIZE
];

614 
	g_gëd©e_îr
;

615 
_mb°©e_t
 
	g_mbæí_°©e
;

616 
_mb°©e_t
 
	g_mbπowc_°©e
;

617 
_mb°©e_t
 
	g_mb§towcs_°©e
;

618 
_mb°©e_t
 
	g_w¸tomb_°©e
;

619 
_mb°©e_t
 
	g_wc§tombs_°©e
;

620 
	g_h_î∫o
;

621 } 
	g_ªít
;

627 
	#_N_LISTS
 30

	)

628 * 
	g_√xtf
[
_N_LISTS
];

629 
	g_nmÆloc
[
_N_LISTS
];

630 } 
	g_unu£d
;

631 } 
	g_√w
;

633 #i‚de‡
_REENT_GLOBAL_ATEXIT


635 
_©exô
 *
	g_©exô
;

636 
_©exô
 
	g_©exô0
;

640 (**(
	g_sig_func
))();

645 
_glue
 
	g__sglue
;

646 
__FILE
 
	g__sf
[3];

649 
	#_REENT_INIT
(
v¨
) \

651 &(
v¨
).
__sf
[0], \

652 &(
v¨
).
__sf
[1], \

653 &(
v¨
).
__sf
[2], \

659 
_NULL
, \

660 
_NULL
, \

662 
_NULL
, \

663 
_NULL
, \

665 
_NULL
, \

669 
_NULL
, \

675 {
_RAND48_SEED_0
, 
_RAND48_SEED_1
, 
_RAND48_SEED_2
}, \

676 {
_RAND48_MULT_0
, 
_RAND48_MULT_1
, 
_RAND48_MULT_2
}, \

677 
_RAND48_ADD
 \

692 
_REENT_INIT_ATEXIT
 \

693 
_NULL
, \

694 {
_NULL
, 0, _NULL} \

695 }

	)

697 
	#_REENT_INIT_PTR
(
v¨
) \

698 { 
	`mem£t
((
v¨
), 0, (*(var))); \

699 (
v¨
)->
_°dö
 = &(v¨)->
__sf
[0]; \

700 (
v¨
)->
_°dout
 = &(v¨)->
__sf
[1]; \

701 (
v¨
)->
_°dîr
 = &(v¨)->
__sf
[2]; \

702 (
v¨
)->
_cuºít_loˇÀ
 = "C"; \

703 (
v¨
)->
_√w
.
_ªít
.
_ønd_√xt
 = 1; \

704 (
v¨
)->
_√w
.
_ªít
.
_r48
.
_£ed
[0] = 
_RAND48_SEED_0
; \

705 (
v¨
)->
_√w
.
_ªít
.
_r48
.
_£ed
[1] = 
_RAND48_SEED_1
; \

706 (
v¨
)->
_√w
.
_ªít
.
_r48
.
_£ed
[2] = 
_RAND48_SEED_2
; \

707 (
v¨
)->
_√w
.
_ªít
.
_r48
.
_mu…
[0] = 
_RAND48_MULT_0
; \

708 (
v¨
)->
_√w
.
_ªít
.
_r48
.
_mu…
[1] = 
_RAND48_MULT_1
; \

709 (
v¨
)->
_√w
.
_ªít
.
_r48
.
_mu…
[2] = 
_RAND48_MULT_2
; \

710 (
v¨
)->
_√w
.
_ªít
.
_r48
.
_add
 = 
_RAND48_ADD
; \

711 }

	)

713 
	#_REENT_CHECK_RAND48
(
±r
Ë

	)

714 
	#_REENT_CHECK_MP
(
±r
Ë

	)

715 
	#_REENT_CHECK_TM
(
±r
Ë

	)

716 
	#_REENT_CHECK_ASCTIME_BUF
(
±r
Ë

	)

717 
	#_REENT_CHECK_EMERGENCY
(
±r
Ë

	)

718 
	#_REENT_CHECK_MISC
(
±r
Ë

	)

719 
	#_REENT_CHECK_SIGNAL_BUF
(
±r
Ë

	)

721 
	#_REENT_SIGNGAM
(
±r
Ë(’å)->
_√w
.
_ªít
.
_gamma_signgam
)

	)

722 
	#_REENT_RAND_NEXT
(
±r
Ë(’å)->
_√w
.
_ªít
.
_ønd_√xt
)

	)

723 
	#_REENT_RAND48_SEED
(
±r
Ë(’å)->
_√w
.
_ªít
.
_r48
.
_£ed
)

	)

724 
	#_REENT_RAND48_MULT
(
±r
Ë(’å)->
_√w
.
_ªít
.
_r48
.
_mu…
)

	)

725 
	#_REENT_RAND48_ADD
(
±r
Ë(’å)->
_√w
.
_ªít
.
_r48
.
_add
)

	)

726 
	#_REENT_MP_RESULT
(
±r
Ë(’å)->
_ªsu…
)

	)

727 
	#_REENT_MP_RESULT_K
(
±r
Ë(’å)->
_ªsu…_k
)

	)

728 
	#_REENT_MP_P5S
(
±r
Ë(’å)->
_p5s
)

	)

729 
	#_REENT_MP_FREELIST
(
±r
Ë(’å)->
_‰ìli°
)

	)

730 
	#_REENT_ASCTIME_BUF
(
±r
Ë(’å)->
_√w
.
_ªít
.
_as˘ime_buf
)

	)

731 
	#_REENT_TM
(
±r
Ë(&’å)->
_√w
.
_ªít
.
_loˇ…ime_buf
)

	)

732 
	#_REENT_EMERGENCY
(
±r
Ë(’å)->
_emîgícy
)

	)

733 
	#_REENT_STRTOK_LAST
(
±r
Ë(’å)->
_√w
.
_ªít
.
_°πok_œ°
)

	)

734 
	#_REENT_MBLEN_STATE
(
±r
Ë(’å)->
_√w
.
_ªít
.
_mbÀn_°©e
)

	)

735 
	#_REENT_MBTOWC_STATE
(
±r
)(’å)->
_√w
.
_ªít
.
_mbtowc_°©e
)

	)

736 
	#_REENT_WCTOMB_STATE
(
±r
)(’å)->
_√w
.
_ªít
.
_w˘omb_°©e
)

	)

737 
	#_REENT_MBRLEN_STATE
(
±r
)(’å)->
_√w
.
_ªít
.
_mbæí_°©e
)

	)

738 
	#_REENT_MBRTOWC_STATE
(
±r
)(’å)->
_√w
.
_ªít
.
_mbπowc_°©e
)

	)

739 
	#_REENT_MBSRTOWCS_STATE
(
±r
)(’å)->
_√w
.
_ªít
.
_mb§towcs_°©e
)

	)

740 
	#_REENT_WCRTOMB_STATE
(
±r
)(’å)->
_√w
.
_ªít
.
_w¸tomb_°©e
)

	)

741 
	#_REENT_WCSRTOMBS_STATE
(
±r
)(’å)->
_√w
.
_ªít
.
_wc§tombs_°©e
)

	)

742 
	#_REENT_L64A_BUF
(
±r
Ë(’å)->
_√w
.
_ªít
.
_l64a_buf
)

	)

743 
	#_REENT_SIGNAL_BUF
(
±r
Ë(’å)->
_√w
.
_ªít
.
_sig«l_buf
)

	)

744 
	#_REENT_GETDATE_ERR_P
(
±r
Ë(&(’å)->
_√w
.
_ªít
.
_gëd©e_îr
))

	)

751 
	#_Kmax
 ( (
size_t
Ë<< 3)

	)

758 #i‚de‡
__ATTRIBUTE_IMPURE_PTR__


759 
	#__ATTRIBUTE_IMPURE_PTR__


	)

762 
_ªít
 *
_impuª_±r
 
__ATTRIBUTE_IMPURE_PTR__
;

763 
_ªít
 *
_CONST
 
_globÆ_impuª_±r
 
__ATTRIBUTE_IMPURE_PTR__
;

765 
_ª˛aim_ªít
 
_PARAMS
 ((
_ªít
 *));

769 #i‡
deföed
(
__DYNAMIC_REENT__
Ë&& !deföed(
__SINGLE_THREAD__
)

770 #i‚de‡
__gëªít


771 
_ªít
 * 
_EXFUN
(
__gëªít
, ());

773 
	#_REENT
 (
	`__gëªít
())

	)

775 
	#_REENT
 
_impuª_±r


	)

778 
	#_GLOBAL_REENT
 
_globÆ_impuª_±r


	)

780 #ifde‡
_REENT_GLOBAL_ATEXIT


781 
_©exô
 *
_globÆ_©exô
;

782 
	#_GLOBAL_ATEXIT
 
_globÆ_©exô


	)

784 
	#_GLOBAL_ATEXIT
 (
_GLOBAL_REENT
->
_©exô
)

	)

787 #ifde‡
__˝lu•lus


	@/usr/include/sys/string.h

	@/usr/include/assert.h

5 #ifde‡
__˝lu•lus


9 
	~"_™si.h
"

11 #unde‡
as£π


13 #ifde‡
NDEBUG


14 
	#as£π
(
__e
Ë(()0)

	)

16 
	#as£π
(
__e
Ë((__eË? ()0 : 
	`__as£π_func
 (
__FILE__
, 
__LINE__
, \

17 
__ASSERT_FUNC
, #__e))

	)

19 #i‚de‡
__ASSERT_FUNC


21 #i‡
deföed
 
__˝lu•lus
 && deföed 
__GNUC__


22 
	#__ASSERT_FUNC
 
__PRETTY_FUNCTION__


	)

25 #ñi‡
__STDC_VERSION__
 >= 199901L

26 
	#__ASSERT_FUNC
 
__func__


	)

29 #ñi‡
__GNUC__
 >= 2

30 
	#__ASSERT_FUNC
 
__FUNCTION__


	)

34 
	#__ASSERT_FUNC
 ((*Ë0)

	)

39 
_EXFUN
(
__as£π
, (const *, , const *)

40 
_ATTRIBUTE
 ((
__n‹ëu∫__
)));

41 
_EXFUN
(
__as£π_func
, (const *, , const *, const *)

42 
_ATTRIBUTE
 ((
__n‹ëu∫__
)));

44 #i‡
__STDC_VERSION__
 >201112L && !
deföed
 
__˝lu•lus


45 
	#°©ic_as£π
 
_Sètic_as£π


	)

48 #ifde‡
__˝lu•lus


	@/usr/include/machine/_default_types.h

5 #i‚de‡
_MACHINE__DEFAULT_TYPES_H


6 
	#_MACHINE__DEFAULT_TYPES_H


	)

8 
	~<sys/„©uªs.h
>

13 #i‡
__GNUC_PREREQ
 (3, 3)

15 
	#__EXP
(
x
Ë
__
##x##
	)
__

18 
	#__EXP
(
x
Ë
	)
x

19 
	~<limôs.h
>

22 #ifde‡
__˝lu•lus


26 #ifde‡
__INT8_TYPE__


27 
__INT8_TYPE__
 
	t__öt8_t
;

28 #ifde‡
__UINT8_TYPE__


29 
__UINT8_TYPE__
 
	t__uöt8_t
;

31 
	t__INT8_TYPE__
 
	t__uöt8_t
;

33 
	#___öt8_t_deföed
 1

	)

34 #ñi‡
__EXP
(
SCHAR_MAX
) == 0x7f

35 sig√d 
	t__öt8_t
 ;

36 
	t__uöt8_t
 ;

37 
	#___öt8_t_deföed
 1

	)

40 #ifde‡
__INT16_TYPE__


41 
__INT16_TYPE__
 
	t__öt16_t
;

42 #ifde‡
__UINT16_TYPE__


43 
__UINT16_TYPE__
 
	t__uöt16_t
;

45 
	t__INT16_TYPE__
 
	t__uöt16_t
;

47 
	#___öt16_t_deföed
 1

	)

48 #ñi‡
__EXP
(
INT_MAX
) == 0x7fff

49 sig√d 
	t__öt16_t
;

50 
	t__uöt16_t
;

51 
	#___öt16_t_deföed
 1

	)

52 #ñi‡
__EXP
(
SHRT_MAX
) == 0x7fff

53 sig√d 
	t__öt16_t
;

54 
	t__uöt16_t
;

55 
	#___öt16_t_deföed
 1

	)

56 #ñi‡
__EXP
(
SCHAR_MAX
) == 0x7fff

57 sig√d 
	t__öt16_t
;

58 
	t__uöt16_t
;

59 
	#___öt16_t_deföed
 1

	)

62 #ifde‡
__INT32_TYPE__


63 
__INT32_TYPE__
 
	t__öt32_t
;

64 #ifde‡
__UINT32_TYPE__


65 
__UINT32_TYPE__
 
	t__uöt32_t
;

67 
	t__INT32_TYPE__
 
	t__uöt32_t
;

69 
	#___öt32_t_deföed
 1

	)

70 #ñi‡
__EXP
(
INT_MAX
) == 0x7fffffffL

71 sig√d 
	t__öt32_t
;

72 
	t__uöt32_t
;

73 
	#___öt32_t_deföed
 1

	)

74 #ñi‡
__EXP
(
LONG_MAX
) == 0x7fffffffL

75 sig√d 
	t__öt32_t
;

76 
	t__uöt32_t
;

77 
	#___öt32_t_deföed
 1

	)

78 #ñi‡
__EXP
(
SHRT_MAX
) == 0x7fffffffL

79 sig√d 
	t__öt32_t
;

80 
	t__uöt32_t
;

81 
	#___öt32_t_deföed
 1

	)

82 #ñi‡
__EXP
(
SCHAR_MAX
) == 0x7fffffffL

83 sig√d 
	t__öt32_t
;

84 
	t__uöt32_t
;

85 
	#___öt32_t_deföed
 1

	)

88 #ifde‡
__INT64_TYPE__


89 
__INT64_TYPE__
 
	t__öt64_t
;

90 #ifde‡
__UINT64_TYPE__


91 
__UINT64_TYPE__
 
	t__uöt64_t
;

93 
	t__INT64_TYPE__
 
	t__uöt64_t
;

95 
	#___öt64_t_deföed
 1

	)

96 #ñi‡
__EXP
(
LONG_MAX
) > 0x7fffffff

97 sig√d 
	t__öt64_t
;

98 
	t__uöt64_t
;

99 
	#___öt64_t_deföed
 1

	)

102 #ñi‡ 
deföed
(
__LONG_LONG_MAX__
) && (__LONG_LONG_MAX__ > 0x7fffffff)

103 sig√d 
	t__öt64_t
;

104 
	t__uöt64_t
;

105 
	#___öt64_t_deföed
 1

	)

108 #ñi‡ 
deföed
(
LLONG_MAX
) && (LLONG_MAX > 0x7fffffff)

109 sig√d 
	t__öt64_t
;

110 
	t__uöt64_t
;

111 
	#___öt64_t_deföed
 1

	)

113 #ñi‡ 
__EXP
(
INT_MAX
) > 0x7fffffff

114 sig√d 
	t__öt64_t
;

115 
	t__uöt64_t
;

116 
	#___öt64_t_deföed
 1

	)

119 #ifde‡
__INT_LEAST8_TYPE__


120 
__INT_LEAST8_TYPE__
 
	t__öt_Àa°8_t
;

121 #ifde‡
__UINT_LEAST8_TYPE__


122 
__UINT_LEAST8_TYPE__
 
	t__uöt_Àa°8_t
;

124 
	t__INT_LEAST8_TYPE__
 
	t__uöt_Àa°8_t
;

126 
	#___öt_Àa°8_t_deföed
 1

	)

127 #ñi‡
deföed
(
___öt8_t_deföed
)

128 
__öt8_t
 
	t__öt_Àa°8_t
;

129 
__uöt8_t
 
	t__uöt_Àa°8_t
;

130 
	#___öt_Àa°8_t_deföed
 1

	)

131 #ñi‡
deföed
(
___öt16_t_deföed
)

132 
__öt16_t
 
	t__öt_Àa°8_t
;

133 
__uöt16_t
 
	t__uöt_Àa°8_t
;

134 
	#___öt_Àa°8_t_deföed
 1

	)

135 #ñi‡
deföed
(
___öt32_t_deföed
)

136 
__öt32_t
 
	t__öt_Àa°8_t
;

137 
__uöt32_t
 
	t__uöt_Àa°8_t
;

138 
	#___öt_Àa°8_t_deföed
 1

	)

139 #ñi‡
deföed
(
___öt64_t_deföed
)

140 
__öt64_t
 
	t__öt_Àa°8_t
;

141 
__uöt64_t
 
	t__uöt_Àa°8_t
;

142 
	#___öt_Àa°8_t_deföed
 1

	)

145 #ifde‡
__INT_LEAST16_TYPE__


146 
__INT_LEAST16_TYPE__
 
	t__öt_Àa°16_t
;

147 #ifde‡
__UINT_LEAST16_TYPE__


148 
__UINT_LEAST16_TYPE__
 
	t__uöt_Àa°16_t
;

150 
	t__INT_LEAST16_TYPE__
 
	t__uöt_Àa°16_t
;

152 
	#___öt_Àa°16_t_deföed
 1

	)

153 #ñi‡
deföed
(
___öt16_t_deföed
)

154 
__öt16_t
 
	t__öt_Àa°16_t
;

155 
__uöt16_t
 
	t__uöt_Àa°16_t
;

156 
	#___öt_Àa°16_t_deföed
 1

	)

157 #ñi‡
deföed
(
___öt32_t_deföed
)

158 
__öt32_t
 
	t__öt_Àa°16_t
;

159 
__uöt32_t
 
	t__uöt_Àa°16_t
;

160 
	#___öt_Àa°16_t_deföed
 1

	)

161 #ñi‡
deföed
(
___öt64_t_deföed
)

162 
__öt64_t
 
	t__öt_Àa°16_t
;

163 
__uöt64_t
 
	t__uöt_Àa°16_t
;

164 
	#___öt_Àa°16_t_deföed
 1

	)

167 #ifde‡
__INT_LEAST32_TYPE__


168 
__INT_LEAST32_TYPE__
 
	t__öt_Àa°32_t
;

169 #ifde‡
__UINT_LEAST32_TYPE__


170 
__UINT_LEAST32_TYPE__
 
	t__uöt_Àa°32_t
;

172 
	t__INT_LEAST32_TYPE__
 
	t__uöt_Àa°32_t
;

174 
	#___öt_Àa°32_t_deföed
 1

	)

175 #ñi‡
deföed
(
___öt32_t_deföed
)

176 
__öt32_t
 
	t__öt_Àa°32_t
;

177 
__uöt32_t
 
	t__uöt_Àa°32_t
;

178 
	#___öt_Àa°32_t_deföed
 1

	)

179 #ñi‡
deföed
(
___öt64_t_deföed
)

180 
__öt64_t
 
	t__öt_Àa°32_t
;

181 
__uöt64_t
 
	t__uöt_Àa°32_t
;

182 
	#___öt_Àa°32_t_deföed
 1

	)

185 #ifde‡
__INT_LEAST64_TYPE__


186 
__INT_LEAST64_TYPE__
 
	t__öt_Àa°64_t
;

187 #ifde‡
__UINT_LEAST64_TYPE__


188 
__UINT_LEAST64_TYPE__
 
	t__uöt_Àa°64_t
;

190 
	t__INT_LEAST64_TYPE__
 
	t__uöt_Àa°64_t
;

192 
	#___öt_Àa°64_t_deföed
 1

	)

193 #ñi‡
deföed
(
___öt64_t_deföed
)

194 
__öt64_t
 
	t__öt_Àa°64_t
;

195 
__uöt64_t
 
	t__uöt_Àa°64_t
;

196 
	#___öt_Àa°64_t_deföed
 1

	)

199 #ifde‡
__INTPTR_TYPE__


200 
__INTPTR_TYPE__
 
	t__öçå_t
;

201 #ifde‡
__UINTPTR_TYPE__


202 
__UINTPTR_TYPE__
 
	t__uöçå_t
;

204 
	t__INTPTR_TYPE__
 
	t__uöçå_t
;

206 #ñi‡
deföed
(
__PTRDIFF_TYPE__
)

207 
__PTRDIFF_TYPE__
 
	t__öçå_t
;

208 
	t__PTRDIFF_TYPE__
 
	t__uöçå_t
;

210 
	t__öçå_t
;

211 
	t__uöçå_t
;

214 #unde‡
__EXP


216 #ifde‡
__˝lu•lus


	@/usr/include/newlib.h

6 #i‚de‡
__NEWLIB_H__


8 
	#__NEWLIB_H__
 1

	)

14 
	#_NEWLIB_VERSION
 "2.1.0"

	)

18 
	#_WANT_IO_C99_FORMATS
 1

	)

21 
	#_WANT_IO_LONG_LONG
 1

	)

27 
	#_WANT_IO_LONG_DOUBLE
 1

	)

30 
	#_WANT_IO_POS_ARGS
 1

	)

37 
	#_MB_CAPABLE
 1

	)

40 
	#_MB_LEN_MAX
 8

	)

54 
	#_ATEXIT_DYNAMIC_ALLOC
 1

	)

57 
	#_HAVE_LONG_DOUBLE
 1

	)

60 
	#_HAVE_CC_INHIBIT_LOOP_TO_LIBCALL
 1

	)

66 
	#_FVWRITE_IN_STREAMIO
 1

	)

69 
	#_FSEEK_OPTIMIZATION
 1

	)

72 
	#_WIDE_ORIENT
 1

	)

75 
	#_UNBUF_STREAM_OPT
 1

	)

	@/usr/include/sys/_types.h

9 #i‚def 
_SYS__TYPES_H


10 
	#_SYS__TYPES_H


	)

12 
	~<machöe/_ty≥s.h
>

13 
	~<sys/lock.h
>

15 #i‚de‡
__off_t_deföed


16 
	t_off_t
;

19 #i‚de‡
__dev_t_deföed


20 
	t__dev_t
;

23 #i‚de‡
__uid_t_deföed


24 
	t__uid_t
;

26 #i‚de‡
__gid_t_deföed


27 
	t__gid_t
;

30 #i‚de‡
__off64_t_deföed


31 
__exãnsi⁄__
 
	t_off64_t
;

38 #i‚de‡
__Âos_t_deföed


39 
	t_Âos_t
;

43 #ifde‡
__LARGE64_FILES


44 #i‚de‡
__Âos64_t_deföed


45 
_off64_t
 
	t_Âos64_t
;

49 #i‚de‡
__ssize_t_deföed


50 #ifde‡
__SIZE_TYPE__


54 sig√d

	)

55 
__SIZE_TYPE__
 
	t_ssize_t
;

58 #i‡
deföed
(
__INT_MAX__
) && __INT_MAX__ == 2147483647

59 
	t_ssize_t
;

61 
	t_ssize_t
;

66 
	#__√ed_wöt_t


	)

67 
	~<°ddef.h
>

69 #i‚de‡
__mb°©e_t_deföed


73 
	m__cou¡
;

76 
wöt_t
 
	m__wch
;

77 
	m__wchb
[4];

78 } 
	m__vÆue
;

79 } 
	t_mb°©e_t
;

82 #i‚de‡
__Êock_t_deföed


83 
_LOCK_RECURSIVE_T
 
	t_Êock_t
;

86 #i‚de‡
__ic⁄v_t_deföed


88 *
	t_ic⁄v_t
;

	@/usr/include/sys/config.h

1 #i‚de‡
__SYS_CONFIG_H__


2 
	#__SYS_CONFIG_H__


	)

4 
	~<machöe/õìÂ.h
>

5 
	~<sys/„©uªs.h
>

7 #ifde‡
__Ørch64__


8 
	#MALLOC_ALIGNMENT
 16

	)

12 #i‡
deföed
(
__H8500__
Ë|| deföed(
__W65__
)

13 
	#__SMALL_BITFIELDS


	)

16 
	#H8300
 1

	)

20 #i‡
deföed
(
__Z8001__
Ë|| deföed(
__Z8002__
Ë|| deföed(
__H8500__
Ë|| deföed(
__W65__
Ë|| deföed (
__mn10200__
Ë|| deföed (
__AVR__
)

22 #unde‡
INT_MAX


23 #unde‡
UINT_MAX


24 
	#INT_MAX
 32767

	)

25 
	#UINT_MAX
 65535

	)

28 #i‡
deföed
 (
__H8300__
Ë|| deföed (
__H8300H__
Ë|| deföed(
__H8300S__
Ë|| deföed (
__H8300SX__
)

29 
	#__SMALL_BITFIELDS


	)

30 
	#H8300
 1

	)

31 #unde‡
INT_MAX


32 #unde‡
UINT_MAX


33 
	#INT_MAX
 
__INT_MAX__


	)

34 
	#UINT_MAX
 (
__INT_MAX__
 * 2U + 1)

	)

37 #i‡(
deföed
(
__CR16__
Ë|| deföed(
__CR16C__
Ë||deföed(
__CR16CP__
))

38 #i‚de‡
__INT32__


39 
	#__SMALL_BITFIELDS


	)

40 #unde‡
INT_MAX


41 #unde‡
UINT_MAX


42 
	#INT_MAX
 32767

	)

43 
	#UINT_MAX
 (
__INT_MAX__
 * 2U + 1)

	)

45 #unde‡
INT_MAX


46 #unde‡
UINT_MAX


47 
	#INT_MAX
 2147483647

	)

48 
	#UINT_MAX
 (
__INT_MAX__
 * 2U + 1)

	)

53 #i‡
deföed
 (
__xc16x__
Ë|| deföed (
__xc16xL__
Ë|| deföed (
__xc16xS__
)

54 
	#__SMALL_BITFIELDS


	)

57 #ifde‡
__W65__


58 
	#__SMALL_BITFIELDS


	)

61 #i‡
deföed
(
__D10V__
)

62 
	#__SMALL_BITFIELDS


	)

63 #unde‡
INT_MAX


64 #unde‡
UINT_MAX


65 
	#INT_MAX
 
__INT_MAX__


	)

66 
	#UINT_MAX
 (
__INT_MAX__
 * 2U + 1)

	)

67 
	#_POINTER_INT
 

	)

70 #i‡
deföed
(
__mc68hc11__
Ë|| deföed(
__mc68hc12__
Ë|| deföed(
__mc68hc1x__
)

71 #unde‡
INT_MAX


72 #unde‡
UINT_MAX


73 
	#INT_MAX
 
__INT_MAX__


	)

74 
	#UINT_MAX
 (
__INT_MAX__
 * 2U + 1)

	)

75 
	#_POINTER_INT
 

	)

78 #ifde‡
___AM29K__


79 
	#_FLOAT_RET
 

	)

82 #ifde‡
__i386__


83 #i‚de‡
__unix__


85 
	#_FLOAT_RET
 

	)

87 #i‡
deföed
(
__löux__
Ë|| deföed(
__RDOS__
)

89 
	#__DYNAMIC_REENT__


	)

90 
	#HAVE_GETDATE


	)

91 
	#_HAVE_SYSTYPES


	)

92 
	#_READ_WRITE_RETURN_TYPE
 
_ssize_t


	)

93 
	#__LARGE64_FILES
 1

	)

95 
	#_LARGEFILE64_SOURCE
 1

	)

99 #ifde‡
__mn10200__


100 
	#__SMALL_BITFIELDS


	)

103 #ifde‡
__AVR__


104 
	#__SMALL_BITFIELDS


	)

105 
	#_POINTER_INT
 

	)

108 #ifde‡
__v850


109 
	#__ATTRIBUTE_IMPURE_PTR__
 
	`__©åibuã__
((
__sda__
))

	)

113 #i‡
deföed
(
__PPC__
)

114 #i‡
deföed
(
_CALL_SYSV
)

115 
	#__ATTRIBUTE_IMPURE_PTR__
 
	`__©åibuã__
((
	`__£˘i⁄__
(".sd©a")))

	)

117 #ifde‡
__SPE__


118 
	#_LONG_DOUBLE
 

	)

123 #i‡
deföed
 (
__MICROBLAZE__
)

124 #i‚de‡
_REENT_SMALL


125 
	#_REENT_SMALL


	)

128 #ifde‡
__XMK__


129 
	#_UNIX98_THREAD_MUTEX_ATTRIBUTES


	)

133 #i‡
deföed
(
__mùs__
Ë&& !deföed(
__πems__
)

134 
	#__ATTRIBUTE_IMPURE_PTR__
 
	`__©åibuã__
((
	`__£˘i⁄__
(".sd©a")))

	)

137 #ifde‡
__x°‹my16__


138 
	#__SMALL_BITFIELDS


	)

139 #unde‡
INT_MAX


140 #unde‡
UINT_MAX


141 
	#INT_MAX
 
__INT_MAX__


	)

142 
	#UINT_MAX
 (
__INT_MAX__
 * 2U + 1)

	)

143 
	#MALLOC_ALIGNMENT
 8

	)

144 
	#_POINTER_INT
 

	)

145 
	#__BUFSIZ__
 16

	)

146 
	#_REENT_SMALL


	)

149 #i‡
deföed
 
__MSP430__


150 #i‚de‡
_REENT_SMALL


151 
	#_REENT_SMALL


	)

154 
	#__SMALL_BITFIELDS


	)

156 #ifde‡
__MSP430X_LARGE__


157 
	#_POINTER_INT
 

	)

159 
	#_POINTER_INT
 

	)

163 #ifde‡
__m32c__


164 
	#__SMALL_BITFIELDS


	)

165 #unde‡
INT_MAX


166 #unde‡
UINT_MAX


167 
	#INT_MAX
 
__INT_MAX__


	)

168 
	#UINT_MAX
 (
__INT_MAX__
 * 2U + 1)

	)

169 
	#MALLOC_ALIGNMENT
 8

	)

170 #i‡
deföed
(
__r8c_˝u__
Ë|| deföed(
__m16c_˝u__
)

171 
	#_POINTER_INT
 

	)

173 
	#_POINTER_INT
 

	)

175 
	#__BUFSIZ__
 16

	)

176 
	#_REENT_SMALL


	)

179 #ifde‡
__SPU__


180 
	#MALLOC_ALIGNMENT
 16

	)

181 
	#__CUSTOM_FILE_IO__


	)

189 #i‚de‡
__INT_MAX__


190 #ifde‡
INT_MAX


191 
	#__INT_MAX__
 
INT_MAX


	)

193 
	#__INT_MAX__
 2147483647

	)

197 #i‚de‡
__LONG_MAX__


198 #ifde‡
LONG_MAX


199 
	#__LONG_MAX__
 
LONG_MAX


	)

201 #i‡
deföed
 (
__Æpha__
Ë|| (deföed (
__•¨c__
Ë&& deföed(
__¨ch64__
)) \

202 || 
	$deföed
 (
__•¨cv9
)

203 
	#__LONG_MAX__
 9223372036854775807L

	)

205 
	#__LONG_MAX__
 2147483647L

	)

211 #i‚de‡
_POINTER_INT


212 
	#_POINTER_INT
 

	)

215 #ifde‡
__‰v__


216 
	#__ATTRIBUTE_IMPURE_PTR__
 
	`__©åibuã__
((
	`__£˘i⁄__
(".sd©a")))

	)

218 #unde‡
__RAND_MAX


219 #i‡
__INT_MAX__
 == 32767

220 
	#__RAND_MAX
 32767

	)

222 
	#__RAND_MAX
 0x7fffffff

	)

225 #i‡
	`deföed
(
__CYGWIN__
)

226 
	~<cygwö/c⁄fig.h
>

227 #i‡!
	`deföed
 (
__STRICT_ANSI__
Ë|| (
__STDC_VERSION__
 >= 199901L)

228 
	#__USE_XOPEN2K
 1

	)

232 #i‡
	`deföed
(
__πems__
)

233 
	#__FILENAME_MAX__
 255

	)

234 
	#_READ_WRITE_RETURN_TYPE
 
_ssize_t


	)

235 
	#__DYNAMIC_REENT__


	)

236 
	#_REENT_GLOBAL_ATEXIT


	)

239 #i‚de‡
__EXPORT


240 
	#__EXPORT


	)

243 #i‚de‡
__IMPORT


244 
	#__IMPORT


	)

250 #i‚de‡
_READ_WRITE_RETURN_TYPE


251 
	#_READ_WRITE_RETURN_TYPE
 

	)

256 #i‚de‡
_READ_WRITE_BUFSIZE_TYPE


257 
	#_READ_WRITE_BUFSIZE_TYPE
 

	)

260 #i‚de‡
__WCHAR_MAX__


261 #i‡
__INT_MAX__
 =32767 || 
	`deföed
 (
_WIN32
)

262 
	#__WCHAR_MAX__
 0xffffu

	)

268 #ifde‡
_WANT_REENT_SMALL


269 #i‚de‡
_REENT_SMALL


270 
	#_REENT_SMALL


	)

277 #ifde‡
_MB_EXTENDED_CHARSETS_ALL


278 
	#_MB_EXTENDED_CHARSETS_ISO
 1

	)

279 
	#_MB_EXTENDED_CHARSETS_WINDOWS
 1

	)

	@/usr/include/sys/custom_file.h

1 #îr‹ 
Sy°em
-
•ecific
 
cu°om_fûe
.
h
 
is
 
missög
.

	@/usr/include/sys/types.h

18 #i‚de‡
_SYS_TYPES_H


20 
	~<_™si.h
>

22 #i‚de‡
__INTTYPES_DEFINED__


23 
	#__INTTYPES_DEFINED__


	)

25 
	~<machöe/_ty≥s.h
>

27 #i‡
deföed
(
__πems__
Ë|| deföed(
__XMK__
)

35 #i‡
___öt8_t_deföed


36 
__uöt8_t
 
	tu_öt8_t
;

38 #i‡
___öt16_t_deföed


39 
__uöt16_t
 
	tu_öt16_t
;

41 #i‡
___öt32_t_deföed


42 
__uöt32_t
 
	tu_öt32_t
;

45 #i‡
___öt64_t_deföed


46 
__uöt64_t
 
	tu_öt64_t
;

49 
__uöt64_t
 
	tu_quad_t
;

50 
__öt64_t
 
	tquad_t
;

51 
quad_t
 * 
	tqaddr_t
;

58 #i‚de‡
__√ed_öây≥s


60 
	#_SYS_TYPES_H


	)

61 
	~<sys/_ty≥s.h
>

63 #ifde‡
__i386__


64 #i‡
deföed
 (
GO32
Ë|| deföed (
__MSDOS__
)

65 
	#__MS_ty≥s__


	)

69 
	~<°ddef.h
>

70 
	~<machöe/ty≥s.h
>

79 #ifde‡
__GNUC__


80 
	#_ST_INT32
 
	`__©åibuã__
 ((
	`__mode__
 (
__SI__
)))

	)

82 
	#_ST_INT32


	)

85 #i‚def 
_POSIX_SOURCE


87 
	#phyßdr
 
phyßdr_t


	)

88 
	#quad
 
quad_t


	)

90 #i‚de‡
_BSDTYPES_DEFINED


92 #i‚de‡
__u_ch¨_deföed


93 
	tu_ch¨
;

94 
	#__u_ch¨_deföed


	)

96 #i‚de‡
__u_sh‹t_deföed


97 
	tu_sh‹t
;

98 
	#__u_sh‹t_deföed


	)

100 #i‚de‡
__u_öt_deföed


101 
	tu_öt
;

102 
	#__u_öt_deföed


	)

104 #i‚de‡
__u_l⁄g_deföed


105 
	tu_l⁄g
;

106 
	#__u_l⁄g_deföed


	)

108 
	#_BSDTYPES_DEFINED


	)

111 
	tush‹t
;

112 
	tuöt
;

113 
	tul⁄g
;

116 #i‚de‡
__˛ock_t_deföed


117 
_CLOCK_T_
 
	t˛ock_t
;

118 
	#__˛ock_t_deföed


	)

121 #i‚de‡
__time_t_deföed


122 
_TIME_T_
 
	ttime_t
;

123 
	#__time_t_deföed


	)

126 #i‚de‡
__time•ec_deföed


127 
	#__time•ec_deföed


	)

130 
	stime•ec
 {

131 
time_t
 
	mtv_£c
;

132 
	mtv_n£c
;

136 
	sôimî•ec
 {

137 
time•ec
 
	mô_öãrvÆ
;

138 
time•ec
 
	mô_vÆue
;

141 #i‚de‡
__daddr_t_deföed


142 
	tdaddr_t
;

143 
	#__daddr_t_deföed


	)

145 #i‚de‡
__ˇddr_t_deföed


146 * 
	tˇddr_t
;

147 
	#__ˇddr_t_deföed


	)

150 #i‚de‡
__CYGWIN__


151 #i‡
deföed
(
__MS_ty≥s__
Ë|| deföed(
__πems__
) || \

152 
deföed
(
__•¨c__
Ë|| 
	$deföed
(
__SPU__
)

153 
	töo_t
;

155 
	töo_t
;

159 #ifde‡
__MS_ty≥s__


160 
	tvm_off£t_t
;

161 
	tvm_size_t
;

163 
	#__BIT_TYPES_DEFINED__


	)

165 sig√d 
	töt8_t
;

166 
	tu_öt8_t
;

167 
	töt16_t
;

168 
	tu_öt16_t
;

169 
	töt32_t
;

170 
	tu_öt32_t
;

171 
	töt64_t
;

172 
	tu_öt64_t
;

173 
öt32_t
 
	tªgi°î_t
;

183 #i‚de‡
__CYGWIN__


184 
_off_t
 
	toff_t
;

185 
__dev_t
 
	tdev_t
;

186 
__uid_t
 
	tuid_t
;

187 
__gid_t
 
	tgid_t
;

190 #i‡
	`deföed
(
__XMK__
)

191 sig√d 
	tpid_t
;

193 
	tpid_t
;

196 #i‡
	`deföed
(
__πems__
)

197 
_mode_t
 
	tmode_t
;

200 #i‚de‡
__CYGWIN__


201 
	tkey_t
;

203 
_ssize_t
 
	tssize_t
;

205 #i‡!
	`deföed
(
__CYGWIN__
Ë&& !deföed(
__πems__
)

206 #ifde‡
__MS_ty≥s__


207 * 
	taddr_t
;

208 
	tmode_t
;

210 #i‡
	`deföed
 (
__•¨c__
Ë&& !deföed (
__•¨c_v9__
)

211 #ifde‡
__svr4__


212 
	tmode_t
;

214 
	tmode_t
;

217 
	tmode_t
 
	t_ST_INT32
;

222 
	t∆ök_t
;

231 #i‡!(
	`deföed
 (
_POSIX_SOURCE
Ë|| deföed (
_WINSOCK_H
Ë|| deföed (
_WINSOCKAPI_
Ë|| deföed (
__USE_W32_SOCKETS
))

232 
	#_SYS_TYPES_FD_SET


	)

233 
	#NBBY
 8

	)

240 #i‚def 
FD_SETSIZE


241 
	#FD_SETSIZE
 64

	)

244 
	tfd_mask
;

245 
	#NFDBITS
 ( (
fd_mask
Ë* 
NBBY
Ë

	)

246 #i‚def 
howm™y


247 
	#howm™y
(
x
,
y
Ë(((x)+((y)-1))/(y))

	)

252 
	s_ty≥s_fd_£t
 {

253 
fd_mask
 
fds_bôs
[
	`howm™y
(
FD_SETSIZE
, 
NFDBITS
)];

254 } 
	t_ty≥s_fd_£t
;

256 
	#fd_£t
 
_ty≥s_fd_£t


	)

258 
	#FD_SET
(
n
, 
p
Ë(’)->
fds_bôs
[“)/
NFDBITS
] |(1L << (“Ë% NFDBITS)))

	)

259 
	#FD_CLR
(
n
, 
p
Ë(’)->
fds_bôs
[“)/
NFDBITS
] &~(1L << (“Ë% NFDBITS)))

	)

260 
	#FD_ISSET
(
n
, 
p
Ë(’)->
fds_bôs
[“)/
NFDBITS
] & (1L << (“Ë% NFDBITS)))

	)

261 
	#FD_ZERO
(
p
Ë(
	`__exãnsi⁄__
 ()({ \

262 
size_t
 
__i
; \

263 *
__tmp
 = (*)
p
; \

264 
__i
 = 0; __ò<  (*(
p
)); ++__i) \

265 *
__tmp
++ = 0; \

266 
	}
}))

	)

270 #unde‡
__MS_ty≥s__


271 #unde‡
_ST_INT32


274 #i‚de‡
__˛ockid_t_deföed


275 
_CLOCKID_T_
 
	t˛ockid_t
;

276 
	#__˛ockid_t_deföed


	)

279 #i‚de‡
__timî_t_deföed


280 
_TIMER_T_
 
	ttimî_t
;

281 
	#__timî_t_deföed


	)

284 
	tu£c⁄ds_t
;

285 
	tsu£c⁄ds_t
;

287 
	~<sys/„©uªs.h
>

297 #i‡
deföed
(
_POSIX_THREADS
Ë&& !deföed(
__CYGWIN__
)

299 
	~<sys/sched.h
>

305 #i‡
deföed
(
__XMK__
)

306 
	t±hªad_t
;

308 
__uöt32_t
 
	t±hªad_t
;

312 
	#PTHREAD_SCOPE_PROCESS
 0

	)

313 
	#PTHREAD_SCOPE_SYSTEM
 1

	)

316 
	#PTHREAD_INHERIT_SCHED
 1

	)

319 
	#PTHREAD_EXPLICIT_SCHED
 2

	)

322 
	#PTHREAD_CREATE_DETACHED
 0

	)

323 
	#PTHREAD_CREATE_JOINABLE
 1

	)

325 #i‡
deföed
(
__πems__
)

326 
	~<sys/˝u£t.h
>

329 #i‡
deföed
(
__XMK__
)

330 
	s±hªad_©å_s
 {

331 
	mc⁄ã¡i⁄sc›e
;

332 
sched_∑øm
 
	msched∑øm
;

333 
	mdëach°©e
;

334 *
	m°ackaddr
;

335 
size_t
 
	m°acksize
;

336 } 
	t±hªad_©å_t
;

338 
	#PTHREAD_STACK_MIN
 200

	)

342 
	mis_öôülized
;

343 *
	m°ackaddr
;

344 
	m°acksize
;

345 
	mc⁄ã¡i⁄sc›e
;

346 
	möhîôsched
;

347 
	mschedpﬁicy
;

348 
sched_∑øm
 
	msched∑øm
;

349 #i‡
deföed
(
__πems__
)

350 
size_t
 
	mgu¨dsize
;

354 #i‡
deföed
(
_POSIX_THREAD_CPUTIME
)

355 
	m˝utime_˛ock_Ælowed
;

357 
	mdëach°©e
;

358 #i‡
deföed
(
__πems__
)

359 
size_t
 
	mafföôy£tsize
;

360 
˝u_£t_t
 *
	mafföôy£t
;

361 
˝u_£t_t
 
	mafföôy£çªÆloˇãd
;

363 } 
	t±hªad_©å_t
;

367 #i‡
deföed
(
_POSIX_THREAD_PROCESS_SHARED
)

370 
	#PTHREAD_PROCESS_PRIVATE
 0

	)

371 
	#PTHREAD_PROCESS_SHARED
 1

	)

376 #i‡
deföed
(
_POSIX_THREAD_PRIO_PROTECT
)

381 
	#PTHREAD_PRIO_NONE
 0

	)

382 
	#PTHREAD_PRIO_INHERIT
 1

	)

383 
	#PTHREAD_PRIO_PROTECT
 2

	)

386 #i‡
deföed
(
_UNIX98_THREAD_MUTEX_ATTRIBUTES
)

399 
	#PTHREAD_MUTEX_NORMAL
 0

	)

411 
	#PTHREAD_MUTEX_RECURSIVE
 1

	)

420 
	#PTHREAD_MUTEX_ERRORCHECK
 2

	)

430 
	#PTHREAD_MUTEX_DEFAULT
 3

	)

434 #i‡
deföed
(
__XMK__
)

435 
	t±hªad_muãx_t
;

438 
	mty≥
;

439 } 
	t±hªad_muãx©å_t
;

442 
__uöt32_t
 
	t±hªad_muãx_t
;

445 
	mis_öôülized
;

446 #i‡
deföed
(
_POSIX_THREAD_PROCESS_SHARED
)

447 
	m¥o˚ss_sh¨ed
;

449 #i‡
deföed
(
_POSIX_THREAD_PRIO_PROTECT
)

450 
	m¥io_˚ûög
;

451 
	m¥Ÿocﬁ
;

453 #i‡
deföed
(
_UNIX98_THREAD_MUTEX_ATTRIBUTES
)

454 
	mty≥
;

456 
	mªcursive
;

457 } 
	t±hªad_muãx©å_t
;

462 
__uöt32_t
 
	t±hªad_c⁄d_t
;

465 
	mis_öôülized
;

466 #i‡
deföed
(
_POSIX_THREAD_PROCESS_SHARED
)

467 
	m¥o˚ss_sh¨ed
;

469 } 
	t±hªad_c⁄d©å_t
;

473 
__uöt32_t
 
	t±hªad_key_t
;

476 
	mis_öôülized
;

477 
	möô_execuãd
;

478 } 
	t±hªad_⁄˚_t
;

480 #i‡
deföed
 (
__CYGWIN__
)

481 
	~<cygwö/ty≥s.h
>

487 #i‡
deföed
(
_POSIX_BARRIERS
)

488 
__uöt32_t
 
	t±hªad_b¨rõr_t
;

490 
	mis_öôülized
;

491 #i‡
deföed
(
_POSIX_THREAD_PROCESS_SHARED
)

492 
	m¥o˚ss_sh¨ed
;

494 } 
	t±hªad_b¨rõøâr_t
;

499 #i‡!
deföed
 (
__CYGWIN__
)

500 #i‡
deföed
(
_POSIX_SPIN_LOCKS
)

501 
__uöt32_t
 
	t±hªad_•ölock_t
;

506 #i‡
deföed
(
_POSIX_READER_WRITER_LOCKS
)

507 
__uöt32_t
 
	t±hªad_rwlock_t
;

509 
	mis_öôülized
;

510 #i‡
deföed
(
_POSIX_THREAD_PROCESS_SHARED
)

511 
	m¥o˚ss_sh¨ed
;

513 } 
	t±hªad_rwlock©å_t
;

519 #unde‡
__√ed_öây≥s


	@/usr/include/cygwin/config.h

16 #i‚de‡
_CYGWIN_CONFIG_H


17 #ifde‡
__˝lu•lus


20 
	#_CYGWIN_CONFIG_H


	)

22 
	#__DYNAMIC_REENT__


	)

40 #ifde‡
_COMPILING_NEWLIB


41 #ifde‡
__x86_64__


42 
	~"../ésoff£ts64.h
"

45 
ölöe
 *
___gëªít
 ()

47 *
ªt
;

48 
__asm
 
__vﬁ©ûe__
 ("movq %%gs:8,%0" : "Ù" (
ªt
));

49  
ªt
 + 
és_loˇl_˛ib
;

51 
	#__gëªít
(Ë((
_ªít
 *Ë
	`___gëªít
())

	)

53 
	~"../ésoff£ts.h
"

54 *
_ésba£
 
__asm__
 ("%fs:4");

55 
	#__gëªít
(Ë(
_ªít
 *)(
_ésba£
 + 
és_loˇl_˛ib
)

	)

59 #ifde‡
__x86_64__


60 
	#__SYMBOL_PREFIX


	)

62 
	#__SYMBOL_PREFIX
 "_"

	)

64 
	#_SYMSTR
(
x
Ë
__SYMBOL_PREFIX
 #x

	)

66 
	#__FILENAME_MAX__
 4096

	)

71 
	#_READ_WRITE_RETURN_TYPE
 
_ssize_t


	)

72 
	#_READ_WRITE_BUFSIZE_TYPE
 
size_t


	)

73 
	#__LARGE64_FILES
 1

	)

74 
	#__USE_INTERNAL_STAT64
 1

	)

75 
	#__LINUX_ERRNO_EXTENSIONS__
 1

	)

76 
	#_MB_EXTENDED_CHARSETS_ALL
 1

	)

77 
	#__HAVE_LOCALE_INFO__
 1

	)

78 
	#__HAVE_LOCALE_INFO_EXTENDED__
 1

	)

79 
	#_WANT_C99_TIME_FORMATS
 1

	)

80 
	#_GLIBC_EXTENSION
 1

	)

81 
	#_STDIO_BSD_SEMANTICS
 1

	)

82 
	#__TM_GMTOFF
 
tm_gmtoff


	)

83 
	#__TM_ZONE
 
tm_z⁄e


	)

85 #i‡
deföed
(
__INSIDE_CYGWIN__
Ë|| deföed(
_COMPILING_NEWLIB
)

86 
	#__EXPORT
 
	`__de˛•ec
(
dŒexp‹t
)

	)

87 
	#__IMPORT


	)

89 
	#__EXPORT


	)

90 
	#__IMPORT
 
	`__de˛•ec
(
dŒimp‹t
)

	)

93 #i‚de‡
__WCHAR_MAX__


94 
	#__WCHAR_MAX__
 0xffffu

	)

97 
	#DEFAULT_LOCALE
 "C.UTF-8"

	)

99 #ifde‡
__˝lu•lus


	@/usr/include/cygwin/types.h

12 #i‚de‡
_CYGWIN_TYPES_H


13 
	#_CYGWIN_TYPES_H


	)

15 #ifde‡
__˝lu•lus


20 
	~<°döt.h
>

21 
	~<ídün.h
>

22 
	~<bôs/w‹dsize.h
>

24 #i‚de‡
__time•ec_t_deföed


25 
	#__time•ec_t_deföed


	)

26 
time•ec
 
	ttime•ec_t
;

29 #i‚de‡
__time°ruc_t_deföed


30 
	#__time°ruc_t_deföed


	)

31 
time•ec
 
	ttime°ruc_t
;

34 #i‚de‡
__off_t_deföed


35 
	#__off_t_deföed


	)

37 #i‡
__WORDSIZE
 == 64

38 
_off_t
 
	toff_t
;

40 
_off64_t
 
	toff_t
;

44 
__loff_t
 
	tloff_t
;

46 #i‚de‡
__dev_t_deföed


47 
	#__dev_t_deföed


	)

48 
__öt16_t
 
	t__dev16_t
;

49 
__uöt32_t
 
	tdev_t
;

52 #i‚de‡
__blksize_t_deföed


53 
	#__blksize_t_deföed


	)

54 
__öt32_t
 
	tblksize_t
;

57 #i‚de‡
__blk˙t_t_deföed


58 
	#__blk˙t_t_deföed


	)

59 
__öt32_t
 
	t__blk˙t32_t
;

60 
__öt64_t
 
	tblk˙t_t
;

63 #i‚de‡
__fsblk˙t_t_deföed


64 
	#__fsblk˙t_t_deföed


	)

66 
	tfsblk˙t_t
;

69 #i‚de‡
__fsfû˙t_t_deföed


70 
	#__fsfû˙t_t_deföed


	)

72 
	tfsfû˙t_t
;

75 #i‚de‡
__uid_t_deföed


76 
	#__uid_t_deföed


	)

77 
	t__uid16_t
;

78 
__uöt32_t
 
	tuid_t
;

81 #i‚de‡
__gid_t_deföed


82 
	#__gid_t_deföed


	)

83 
	t__gid16_t
;

84 
__uöt32_t
 
	tgid_t
;

87 #i‚de‡
__öo_t_deföed


88 
	#__öo_t_deföed


	)

89 #i‚de‡
__x86_64__


90 
__uöt32_t
 
	t__öo32_t
;

92 
__uöt64_t
 
	töo_t
;

96 #i‚de‡
__id_t_deföed


97 
	#__id_t_deföed


	)

98 
__uöt32_t
 
	tid_t
;

101 #i‡
deföed
 (
__INSIDE_CYGWIN__
Ë&& !deföed (
__x86_64__
)

102 
	s__Êock32
 {

103 
l_ty≥
;

104 
l_whí˚
;

105 
_off_t
 
l_°¨t
;

106 
_off_t
 
l_Àn
;

107 
l_pid
;

108 
l_xxx
;

112 
	sÊock
 {

113 
l_ty≥
;

114 
l_whí˚
;

115 
off_t
 
l_°¨t
;

116 
off_t
 
l_Àn
;

117 
pid_t
 
l_pid
;

120 #i‚de‡
__key_t_deföed


121 
	#__key_t_deföed


	)

122 
	tkey_t
;

125 #i‚de‡
__BIT_TYPES_DEFINED


126 
	#__BIT_TYPES_DEFINED__
 1

	)

128 #i‚de‡
__vm_off£t_t_deföed


129 
	#__vm_off£t_t_deföed


	)

130 
	tvm_off£t_t
;

133 #i‚de‡
__vm_size_t_deföed


134 
	#__vm_size_t_deföed


	)

135 
	tvm_size_t
;

138 #i‚de‡
__vm_obje˘_t_deföed


139 
	#__vm_obje˘_t_deföed


	)

140 *
	tvm_obje˘_t
;

143 #i‚de‡
__u_öt8_t_deföed


144 
	#__u_öt8_t_deföed


	)

145 
	tu_öt8_t
;

147 #i‚de‡
__u_öt16_t_deföed


148 
	#__u_öt16_t_deföed


	)

149 
__uöt16_t
 
	tu_öt16_t
;

151 #i‚de‡
__u_öt32_t_deföed


152 
	#__u_öt32_t_deföed


	)

153 
__uöt32_t
 
	tu_öt32_t
;

155 #i‚de‡
__u_öt64_t_deföed


156 
	#__u_öt64_t_deföed


	)

157 
__uöt64_t
 
	tu_öt64_t
;

160 #i‚de‡
__ªgi°î_t_deföed


161 
	#__ªgi°î_t_deföed


	)

162 
__öt32_t
 
	tªgi°î_t
;

165 #i‚de‡
__addr_t_deföed


166 
	#__addr_t_deföed


	)

167 *
	taddr_t
;

170 #i‚de‡
__mode_t_deföed


171 
	#__mode_t_deföed


	)

172 
	tmode_t
;

176 #i‡!
deföed
(
__INSIDE_CYGWIN__
Ë|| !deföed(
__˝lu•lus
)

178 
	s__±hªad_t
 {
__dummy
;} *
	t±hªad_t
;

179 
	s__±hªad_muãx_t
 {
__dummy
;} *
	t±hªad_muãx_t
;

181 
	s__±hªad_key_t
 {
__dummy
;} *
	t±hªad_key_t
;

182 
	s__±hªad_©å_t
 {
__dummy
;} *
	t±hªad_©å_t
;

183 
	s__±hªad_muãx©å_t
 {
__dummy
;} *
	t±hªad_muãx©å_t
;

184 
	s__±hªad_c⁄d©å_t
 {
__dummy
;} *
	t±hªad_c⁄d©å_t
;

185 
	s__±hªad_c⁄d_t
 {
__dummy
;} *
	t±hªad_c⁄d_t
;

190 
±hªad_muãx_t
 
muãx
;

191 
°©e
;

193 
	t±hªad_⁄˚_t
;

194 
	s__±hªad_•ölock_t
 {
__dummy
;} *
	t±hªad_•ölock_t
;

195 
	s__±hªad_rwlock_t
 {
__dummy
;} *
	t±hªad_rwlock_t
;

196 
	s__±hªad_rwlock©å_t
 {
__dummy
;} *
	t±hªad_rwlock©å_t
;

202 
˛ass
 
	t±hªad
 *
	t±hªad_t
;

203 
˛ass
 
	t±hªad_muãx
 *
	t±hªad_muãx_t
;

204 
˛ass
 
	t±hªad_key
 *
	t±hªad_key_t
;

205 
˛ass
 
	t±hªad_©å
 *
	t±hªad_©å_t
;

206 
˛ass
 
	t±hªad_muãx©å
 *
	t±hªad_muãx©å_t
;

207 
˛ass
 
	t±hªad_c⁄d©å
 *
	t±hªad_c⁄d©å_t
;

208 
˛ass
 
	t±hªad_c⁄d
 *
	t±hªad_c⁄d_t
;

209 
˛ass
 
	t±hªad_⁄˚
 
	t±hªad_⁄˚_t
;

210 
˛ass
 
	t±hªad_•ölock
 *
	t±hªad_•ölock_t
;

211 
˛ass
 
	t±hªad_rwlock
 *
	t±hªad_rwlock_t
;

212 
˛ass
 
	t±hªad_rwlock©å
 *
	t±hªad_rwlock©å_t
;

215 
˛ass
 
	t£m≠h‹e
 *
	t£m_t
;

219 
	~<sys/sysma¸os.h
>

221 #ifde‡
__˝lu•lus


	@/usr/include/machine/_types.h

5 #i‚de‡
_MACHINE__TYPES_H


6 
	#_MACHINE__TYPES_H


	)

7 
	~<machöe/_deÁu…_ty≥s.h
>

	@/usr/include/machine/ieeefp.h

1 #i‚de‡
__IEEE_BIG_ENDIAN


2 #i‚de‡
__IEEE_LITTLE_ENDIAN


53 #i‡(
deföed
(
__¨m__
Ë|| deföed(
__thumb__
)Ë&& !deföed(
__MAVERICK__
)

58 #ifde‡
__VFP_FP__


59 #ifde‡
__ARMEL__


60 
	#__IEEE_LITTLE_ENDIAN


	)

62 
	#__IEEE_BIG_ENDIAN


	)

65 
	#__IEEE_BIG_ENDIAN


	)

66 #ifde‡
__ARMEL__


67 
	#__IEEE_BYTES_LITTLE_ENDIAN


	)

72 #i‡
deföed
 (
__Ørch64__
)

73 #i‡
deföed
 (
__AARCH64EL__
)

74 
	#__IEEE_LITTLE_ENDIAN


	)

76 
	#__IEEE_BIG_ENDIAN


	)

80 #ifde‡
__ïùh™y__


81 
	#__IEEE_LITTLE_ENDIAN


	)

82 
	#Suddí_UndîÊow
 1

	)

85 #ifde‡
__hµa__


86 
	#__IEEE_BIG_ENDIAN


	)

89 #ifde‡
__nds32__


90 #ifde‡
__big_ídün__


91 
	#__IEEE_BIG_ENDIAN


	)

93 
	#__IEEE_LITTLE_ENDIAN


	)

97 #ifde‡
__SPU__


98 
	#__IEEE_BIG_ENDIAN


	)

100 
	#isföôe
(
__y
) \

101 (
	`__exãnsi⁄__
 ({
__cy
; \

102 ( (
__y
) ==  ()) ? (1) : \

103 (
__cy
 = 
	`Â˛assify
(
__y
)Ë!
FP_INFINITE
 && __cy !
FP_NAN
;}))

	)

105 
	#isöf
(
__x
Ë(( (__xË= ()Ë? (0Ë: 
	`__isöfd
(__x))

	)

106 
	#i¢™
(
__x
Ë(( (__xË= ()Ë? (0Ë: 
	`__i¢™d
(__x))

	)

113 
	#__õìÂ_i¢™f
(
x
Ë0

	)

114 
	#__õìÂ_isöff
(
x
Ë0

	)

115 
	#__õìÂ_föôef
(
x
Ë1

	)

118 #ifde‡
__•¨c__


119 #ifde‡
__LITTLE_ENDIAN_DATA__


120 
	#__IEEE_LITTLE_ENDIAN


	)

122 
	#__IEEE_BIG_ENDIAN


	)

126 #i‡
deföed
(
__m68k__
Ë|| deföed(
__mc68000__
)

127 
	#__IEEE_BIG_ENDIAN


	)

130 #i‡
deföed
(
__mc68hc11__
Ë|| deföed(
__mc68hc12__
Ë|| deföed(
__mc68hc1x__
)

131 
	#__IEEE_BIG_ENDIAN


	)

132 #ifde‡
__HAVE_SHORT_DOUBLE__


133 
	#_DOUBLE_IS_32BITS


	)

137 #i‡
deföed
 (
__H8300__
Ë|| deföed (
__H8300H__
Ë|| deföed (
__H8300S__
Ë|| deföed (
__H8500__
Ë|| deföed (
__H8300SX__
)

138 
	#__IEEE_BIG_ENDIAN


	)

139 
	#_FLOAT_ARG
 

	)

140 
	#_DOUBLE_IS_32BITS


	)

143 #i‡
deföed
 (
__xc16x__
Ë|| deföed (
__xc16xL__
Ë|| deföed (
__xc16xS__
)

144 
	#__IEEE_LITTLE_ENDIAN


	)

145 
	#_FLOAT_ARG
 

	)

146 
	#_DOUBLE_IS_32BITS


	)

150 #ifde‡
__sh__


151 #ifde‡
__LITTLE_ENDIAN__


152 
	#__IEEE_LITTLE_ENDIAN


	)

154 
	#__IEEE_BIG_ENDIAN


	)

156 #i‡
deföed
(
__SH2E__
Ë|| deföed(
__SH3E__
Ë|| deföed(
__SH4_SINGLE_ONLY__
Ë|| deföed(
__SH2A_SINGLE_ONLY__
)

157 
	#_DOUBLE_IS_32BITS


	)

161 #ifde‡
_AM29K


162 
	#__IEEE_BIG_ENDIAN


	)

165 #ifde‡
_WIN32


166 
	#__IEEE_LITTLE_ENDIAN


	)

169 #ifde‡
__i386__


170 
	#__IEEE_LITTLE_ENDIAN


	)

173 #ifde‡
__i960__


174 
	#__IEEE_LITTLE_ENDIAN


	)

177 #ifde‡
__lm32__


178 
	#__IEEE_BIG_ENDIAN


	)

181 #ifde‡
__M32R__


182 
	#__IEEE_BIG_ENDIAN


	)

185 #i‡
deföed
(
_C4x
Ë|| deföed(
_C3x
)

186 
	#__IEEE_BIG_ENDIAN


	)

187 
	#_DOUBLE_IS_32BITS


	)

190 #ifde‡
__TMS320C6X__


191 #ifde‡
_BIG_ENDIAN


192 
	#__IEEE_BIG_ENDIAN


	)

194 
	#__IEEE_LITTLE_ENDIAN


	)

198 #ifde‡
__TIC80__


199 
	#__IEEE_LITTLE_ENDIAN


	)

202 #ifde‡
__MIPSEL__


203 
	#__IEEE_LITTLE_ENDIAN


	)

205 #ifde‡
__MIPSEB__


206 
	#__IEEE_BIG_ENDIAN


	)

209 #ifde‡
__MMIX__


210 
	#__IEEE_BIG_ENDIAN


	)

213 #ifde‡
__D30V__


214 
	#__IEEE_BIG_ENDIAN


	)

219 #ifde‡
__W65__


220 
	#__IEEE_LITTLE_ENDIAN


	)

221 
	#_DOUBLE_IS_32BITS


	)

224 #i‡
deföed
(
__Z8001__
Ë|| deföed(
__Z8002__
)

225 
	#__IEEE_BIG_ENDIAN


	)

228 #ifde‡
__m88k__


229 
	#__IEEE_BIG_ENDIAN


	)

232 #ifde‡
__mn10300__


233 
	#__IEEE_LITTLE_ENDIAN


	)

236 #ifde‡
__mn10200__


237 
	#__IEEE_LITTLE_ENDIAN


	)

238 
	#_DOUBLE_IS_32BITS


	)

241 #ifde‡
__v800


242 
	#__IEEE_LITTLE_ENDIAN


	)

245 #ifde‡
__v850


246 
	#__IEEE_LITTLE_ENDIAN


	)

249 #ifde‡
__D10V__


250 
	#__IEEE_BIG_ENDIAN


	)

251 #i‡
__DOUBLE__
 == 32

252 
	#_DOUBLE_IS_32BITS


	)

256 #ifde‡
__PPC__


257 #i‡(
deföed
(
_BIG_ENDIAN
Ë&& _BIG_ENDIANË|| (deföed(
_AIX
) && _AIX)

258 
	#__IEEE_BIG_ENDIAN


	)

260 #i‡(
deföed
(
_LITTLE_ENDIAN
Ë&& _LITTLE_ENDIANË|| (deföed(
__sun__
Ë&& __sun__Ë|| (deföed(
_WIN32
) && _WIN32)

261 
	#__IEEE_LITTLE_ENDIAN


	)

266 #ifde‡
__x°‹my16__


267 
	#__IEEE_LITTLE_ENDIAN


	)

270 #ifde‡
__¨c__


271 #ifde‡
__big_ídün__


272 
	#__IEEE_BIG_ENDIAN


	)

274 
	#__IEEE_LITTLE_ENDIAN


	)

278 #ifde‡
__CRX__


279 
	#__IEEE_LITTLE_ENDIAN


	)

282 #ifde‡
__‰30__


283 
	#__IEEE_BIG_ENDIAN


	)

286 #ifde‡
__mc‹e__


287 
	#__IEEE_BIG_ENDIAN


	)

290 #ifde‡
__mt__


291 
	#__IEEE_BIG_ENDIAN


	)

294 #ifde‡
__‰v__


295 
	#__IEEE_BIG_ENDIAN


	)

298 #ifde‡
__moxõ__


299 #ifde‡
__MOXIE_BIG_ENDIAN__


300 
	#__IEEE_BIG_ENDIAN


	)

302 
	#__IEEE_LITTLE_ENDIAN


	)

306 #ifde‡
__ü64__


307 #ifde‡
__BIG_ENDIAN__


308 
	#__IEEE_BIG_ENDIAN


	)

310 
	#__IEEE_LITTLE_ENDIAN


	)

314 #ifde‡
__AVR__


315 
	#__IEEE_LITTLE_ENDIAN


	)

316 
	#_DOUBLE_IS_32BITS


	)

319 #i‡
deföed
(
__‹1k__
Ë|| deföed(
__OR1K__
Ë|| deföed(
__OR1KND__
)

320 
	#__IEEE_BIG_ENDIAN


	)

323 #ifde‡
__IP2K__


324 
	#__IEEE_BIG_ENDIAN


	)

325 
	#__SMALL_BITFIELDS


	)

326 
	#_DOUBLE_IS_32BITS


	)

329 #ifde‡
__iq2000__


330 
	#__IEEE_BIG_ENDIAN


	)

333 #ifde‡
__MAVERICK__


334 #ifde‡
__ARMEL__


335 
	#__IEEE_LITTLE_ENDIAN


	)

337 
	#__IEEE_BIG_ENDIAN


	)

341 #ifde‡
__m32c__


342 
	#__IEEE_LITTLE_ENDIAN


	)

343 
	#__SMALL_BITFIELDS


	)

346 #ifde‡
__CRIS__


347 
	#__IEEE_LITTLE_ENDIAN


	)

350 #ifde‡
__BFIN__


351 
	#__IEEE_LITTLE_ENDIAN


	)

354 #ifde‡
__x86_64__


355 
	#__IEEE_LITTLE_ENDIAN


	)

358 #ifde‡
__mï__


359 #ifde‡
__LITTLE_ENDIAN__


360 
	#__IEEE_LITTLE_ENDIAN


	)

362 
	#__IEEE_BIG_ENDIAN


	)

366 #ifde‡
__MICROBLAZE__


367 #i‚de‡
__MICROBLAZEEL__


368 
	#__IEEE_BIG_ENDIAN


	)

370 
	#__IEEE_LITTLE_ENDIAN


	)

374 #ifde‡
__MSP430__


375 
	#__IEEE_LITTLE_ENDIAN


	)

376 
	#__SMALL_BITFIELDS


	)

379 #ifde‡
__RL78__


380 
	#__IEEE_LITTLE_ENDIAN


	)

381 
	#__SMALL_BITFIELDS


	)

382 #i‚de‡
__RL78_64BIT_DOUBLES__


383 
	#_DOUBLE_IS_32BITS


	)

387 #ifde‡
__RX__


389 #ifde‡
__RX_BIG_ENDIAN__


390 
	#__IEEE_BIG_ENDIAN


	)

392 
	#__IEEE_LITTLE_ENDIAN


	)

395 #i‚de‡
__RX_64BIT_DOUBLES__


396 
	#_DOUBLE_IS_32BITS


	)

399 #ifde‡
__RX_16BIT_INTS__


400 
	#__SMALL_BITFIELDS


	)

405 #i‡(
deföed
(
__CR16__
Ë|| deföed(
__CR16C__
Ë||deföed(
__CR16CP__
))

406 
	#__IEEE_LITTLE_ENDIAN


	)

407 
	#__SMALL_BITFIELDS


	)

410 #ifde‡
__NIOS2__


411 #ifde‡
__nios2_big_ídün__


412 
	#__IEEE_BIG_ENDIAN


	)

414 
	#__IEEE_LITTLE_ENDIAN


	)

418 #i‚de‡
__IEEE_BIG_ENDIAN


419 #i‚de‡
__IEEE_LITTLE_ENDIAN


420 #îr‹ 
Endü√ss
 
nŸ
 
de˛¨ed
!!

	@/usr/include/machine/types.h

1 #i‚def 
_MACHTYPES_H_


2 
	#_MACHTYPES_H_


	)

9 #i‡
deföed
(
__πems__
)

10 
	~<machöe/_ty≥s.h
>

13 
	#_CLOCK_T_
 

	)

14 
	#_TIME_T_
 

	)

15 
	#_CLOCKID_T_
 

	)

16 
	#_TIMER_T_
 

	)

18 #i‚de‡
_HAVE_SYSTYPES


19 
	t__off_t
;

20 
	t__pid_t
;

21 #ifde‡
__GNUC__


22 
__exãnsi⁄__
 
	t__loff_t
;

24 
	t__loff_t
;

	@/usr/include/sys/lock.h

11 #i‚de‡
_SYS_LOCK_H_


12 
	#_SYS_LOCK_H_


	)

14 *
	t_LOCK_T
;

15 
	#_LOCK_RECURSIVE_T
 
_LOCK_T


	)

21 
	#_LOCK_T_RECURSIVE_INITIALIZER
 ((
_LOCK_T
)18)

	)

22 
	#_LOCK_T_INITIALIZER
 ((
_LOCK_T
)19)

	)

24 
	#__LOCK_INIT
(
CLASS
,
NAME
) \

25 
CLASS
 
_LOCK_T
 
NAME
 = 
_LOCK_T_INITIALIZER
;

	)

26 
	#__LOCK_INIT_RECURSIVE
(
CLASS
,
NAME
) \

27 
CLASS
 
_LOCK_T
 
NAME
 = 
_LOCK_T_RECURSIVE_INITIALIZER
;

	)

29 
	#__lock_öô
(
__lock
Ë
	`__cygwö_lock_öô
(&__lock)

	)

30 
	#__lock_öô_ªcursive
(
__lock
Ë
	`__cygwö_lock_öô_ªcursive
(&__lock)

	)

31 
	#__lock_˛o£
(
__lock
Ë
	`__cygwö_lock_föi
(&__lock)

	)

32 
	#__lock_˛o£_ªcursive
(
__lock
Ë
	`__cygwö_lock_föi
(&__lock)

	)

33 
	#__lock_acquúe
(
__lock
Ë
	`__cygwö_lock_lock
(&__lock)

	)

34 
	#__lock_acquúe_ªcursive
(
__lock
Ë
	`__cygwö_lock_lock
(&__lock)

	)

35 
	#__lock_åy_acquúe
(
lock
Ë
	`__cygwö_lock_åylock
(&
__lock
)

	)

36 
	#__lock_åy_acquúe_ªcursive
(
lock
Ë
	`__cygwö_lock_åylock
(&
__lock
)

	)

37 
	#__lock_ªÀa£
(
__lock
Ë
	`__cygwö_lock_u∆ock
(&__lock)

	)

38 
	#__lock_ªÀa£_ªcursive
(
__lock
Ë
	`__cygwö_lock_u∆ock
(&__lock)

	)

40 #ifde‡
__˝lu•lus


44 
__cygwö_lock_öô
(
_LOCK_T
 *);

45 
__cygwö_lock_öô_ªcursive
(
_LOCK_T
 *);

46 
__cygwö_lock_föi
(
_LOCK_T
 *);

47 
__cygwö_lock_lock
(
_LOCK_T
 *);

48 
__cygwö_lock_åylock
(
_LOCK_T
 *);

49 
__cygwö_lock_u∆ock
(
_LOCK_T
 *);

50 #ifde‡
__˝lu•lus


	@/usr/include/sys/sched.h

21 #i‚de‡
_SYS_SCHED_H_


22 
	#_SYS_SCHED_H_


	)

24 #ifde‡
__˝lu•lus


30 #i‡
deföed
(
__CYGWIN__
)

31 
	#SCHED_OTHER
 3

	)

33 
	#SCHED_OTHER
 0

	)

36 
	#SCHED_FIFO
 1

	)

37 
	#SCHED_RR
 2

	)

39 #i‡
deföed
(
_POSIX_SPORADIC_SERVER
)

40 
	#SCHED_SPORADIC
 4

	)

46 
	ssched_∑øm
 {

47 
sched_¥i‹ôy
;

49 #i‡
deföed
(
_POSIX_SPORADIC_SERVER
Ë|| deföed(
_POSIX_THREAD_SPORADIC_SERVER
)

50 
sched_ss_low_¥i‹ôy
;

52 
time•ec
 
sched_ss_ª∂_≥riod
;

54 
time•ec
 
sched_ss_öô_budgë
;

56 
sched_ss_max_ª∂
;

61 #ifde‡
__˝lu•lus


	@/usr/include/endian.h

11 #i‚de‡
_ENDIAN_H_


12 
	#_ENDIAN_H_


	)

14 
	~<sys/c⁄fig.h
>

15 
	~<bôs/ídün.h
>

18 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

19 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

20 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

21 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

24 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


25 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËLO, 
	)
HI

26 #ñi‡
__BYTE_ORDER
 =
__BIG_ENDIAN


27 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËHI, 
	)
LO

30 #i‡ ! 
deföed
 
_POSIX_SOURCE


32 
	~<byãsw≠.h
>

34 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


36 
	#htobe16
(
x
Ë
	`bsw≠_16
(x)

	)

37 
	#htobe32
(
x
Ë
	`bsw≠_32
(x)

	)

38 
	#htobe64
(
x
Ë
	`bsw≠_64
(x)

	)

40 
	#be16toh
(
x
Ë
	`bsw≠_16
(x)

	)

41 
	#be32toh
(
x
Ë
	`bsw≠_32
(x)

	)

42 
	#be64toh
(
x
Ë
	`bsw≠_64
(x)

	)

44 
	#htﬁe16
(
x
Ë(x)

	)

45 
	#htﬁe32
(
x
Ë(x)

	)

46 
	#htﬁe64
(
x
Ë(x)

	)

48 
	#À16toh
(
x
Ë(x)

	)

49 
	#À32toh
(
x
Ë(x)

	)

50 
	#À64toh
(
x
Ë(x)

	)

54 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


56 
	#htobe16
(
x
Ë(x)

	)

57 
	#htobe32
(
x
Ë(x)

	)

58 
	#htobe64
(
x
Ë(x)

	)

60 
	#be16toh
(
x
Ë(x)

	)

61 
	#be32toh
(
x
Ë(x)

	)

62 
	#be64toh
(
x
Ë(x)

	)

64 
	#htﬁe16
(
x
Ë
	`bsw≠_16
(x)

	)

65 
	#htﬁe32
(
x
Ë
	`bsw≠_32
(x)

	)

66 
	#htﬁe64
(
x
Ë
	`bsw≠_64
(x)

	)

68 
	#À16toh
(
x
Ë
	`bsw≠_16
(x)

	)

69 
	#À32toh
(
x
Ë
	`bsw≠_32
(x)

	)

70 
	#À64toh
(
x
Ë
	`bsw≠_64
(x)

	)

	@/usr/include/sys/sysmacros.h

11 #i‚de‡
_SYS_SYSMACROS_H


12 
	#_SYS_SYSMACROS_H


	)

14 
	~<sys/ty≥s.h
>

16 
_ELIDABLE_INLINE
 
gnu_dev_maj‹
(
dev_t
);

17 
_ELIDABLE_INLINE
 
gnu_dev_mö‹
(
dev_t
);

18 
_ELIDABLE_INLINE
 
dev_t
 
gnu_dev_makedev
(, );

20 
_ELIDABLE_INLINE
 

21 
	$gnu_dev_maj‹
(
dev_t
 
dev
)

23  ()(((
dev
) >> 16) & 0xffff);

24 
	}
}

26 
_ELIDABLE_INLINE
 

27 
	$gnu_dev_mö‹
(
dev_t
 
dev
)

29  ()((
dev
) & 0xffff);

30 
	}
}

32 
_ELIDABLE_INLINE
 
dev_t


33 
	$gnu_dev_makedev
(
maj
, 
mö
)

35  (((
maj
Ë<< 16Ë| ((
mö
) & 0xffff));

36 
	}
}

38 
	#maj‹
(
dev
Ë
	`gnu_dev_maj‹
(dev)

	)

39 
	#mö‹
(
dev
Ë
	`gnu_dev_mö‹
(dev)

	)

40 
	#makedev
(
maj
, 
mö
Ë
	`gnu_dev_makedev
(maj, mö)

	)

	@/usr/include/bits/endian.h

11 #i‚de‡
_BITS_ENDIAN_H_


12 
	#_BITS_ENDIAN_H_


	)

14 #i‚de‡
__BIG_ENDIAN


15 
	#__BIG_ENDIAN
 4321

	)

17 #i‚de‡
__LITTLE_ENDIAN


18 
	#__LITTLE_ENDIAN
 1234

	)

21 #i‚de‡
__BYTE_ORDER


22 
	#__BYTE_ORDER
 
__LITTLE_ENDIAN


	)

	@/usr/include/byteswap.h

11 #i‚de‡
_BYTESWAP_H


12 
	#_BYTESWAP_H


	)

14 #ifde‡
__˝lu•lus


18 
__ölöe
 

19 
bsw≠_16
 (
__x
)

21  (
__x
 >> 8) | (__x << 8);

24 
__ölöe
 

25 
bsw≠_32
 (
__x
)

27  (
bsw≠_16
 (
__x
 & 0xffff) << 16) | (bswap_16 (__x >> 16));

30 
__ölöe
 

31 
bsw≠_64
 (
__x
)

33  (((Ë
bsw≠_32
 (
__x
 & 0xffffffffull)) << 32) | (bswap_32 (__x >> 32));

36 #ifde‡
__˝lu•lus


	@
1
.
1
/usr/include
308
15040
../../../../Components/ble/controller/include/ll.h
../../../../Components/ble/controller/include/ll_math.h
../../../../Components/ble/controller/include/ll_sleep.h
../../../../Components/ble/controller/include/ll_timer2.h
../../../../Components/ble/controller/include/phy.h
../../../../Components/ble/controller/include/phy_image.h
../../../../Components/ble/hci/hci_data.h
../../../../Components/ble/hci/hci_event.h
../../../../Components/ble/hci/hci_tl.h
../../../../Components/ble/host/gatt_uuid.c
../../../../Components/ble/host/linkdb.h
../../../../Components/ble/include/att.h
../../../../Components/ble/include/bcomdef.h
../../../../Components/ble/include/gap.h
../../../../Components/ble/include/gatt.h
../../../../Components/ble/include/gatt_uuid.h
../../../../Components/ble/include/hci.h
../../../../Components/ble/include/l2cap.h
../../../../Components/ble/include/sm.h
../../../../Components/hal/common/hal_assert.c
../../../../Components/hal/common/hal_drivers.c
../../../../Components/hal/include/hal_adc.h
../../../../Components/hal/include/hal_assert.h
../../../../Components/hal/include/hal_board.h
../../../../Components/hal/include/hal_defs.h
../../../../Components/hal/include/hal_drivers.h
../../../../Components/hal/include/hal_flash.h
../../../../Components/hal/include/hal_key.h
../../../../Components/hal/include/hal_lcd.h
../../../../Components/hal/include/hal_led.h
../../../../Components/hal/include/hal_rpc.h
../../../../Components/hal/include/hal_sleep.h
../../../../Components/hal/include/hal_timer.h
../../../../Components/hal/include/hal_uart.h
../../../../Components/hal/target/CC2540EB/_hal_uart_dma.c
../../../../Components/hal/target/CC2540EB/_hal_uart_isr.c
../../../../Components/hal/target/CC2540EB/_hal_uart_spi.c
../../../../Components/hal/target/CC2540EB/hal_adc.c
../../../../Components/hal/target/CC2540EB/hal_aes.c
../../../../Components/hal/target/CC2540EB/hal_aes.h
../../../../Components/hal/target/CC2540EB/hal_board_cfg.h
../../../../Components/hal/target/CC2540EB/hal_ccm.h
../../../../Components/hal/target/CC2540EB/hal_crc.c
../../../../Components/hal/target/CC2540EB/hal_crc.h
../../../../Components/hal/target/CC2540EB/hal_dma.c
../../../../Components/hal/target/CC2540EB/hal_dma.h
../../../../Components/hal/target/CC2540EB/hal_flash.c
../../../../Components/hal/target/CC2540EB/hal_key.c
../../../../Components/hal/target/CC2540EB/hal_lcd.c
../../../../Components/hal/target/CC2540EB/hal_led.c
../../../../Components/hal/target/CC2540EB/hal_mcu.h
../../../../Components/hal/target/CC2540EB/hal_sleep.c
../../../../Components/hal/target/CC2540EB/hal_startup.c
../../../../Components/hal/target/CC2540EB/hal_timer.c
../../../../Components/hal/target/CC2540EB/hal_types.h
../../../../Components/hal/target/CC2540EB/hal_uart.c
../../../../Components/hal/target/CC2540USB/_hal_uart_dma.c
../../../../Components/hal/target/CC2540USB/_hal_uart_isr.c
../../../../Components/hal/target/CC2540USB/_hal_uart_spi.c
../../../../Components/hal/target/CC2540USB/_hal_uart_usb.c
../../../../Components/hal/target/CC2540USB/hal_adc.c
../../../../Components/hal/target/CC2540USB/hal_aes.c
../../../../Components/hal/target/CC2540USB/hal_aes.h
../../../../Components/hal/target/CC2540USB/hal_board_cfg.h
../../../../Components/hal/target/CC2540USB/hal_crc.c
../../../../Components/hal/target/CC2540USB/hal_crc.h
../../../../Components/hal/target/CC2540USB/hal_dma.c
../../../../Components/hal/target/CC2540USB/hal_dma.h
../../../../Components/hal/target/CC2540USB/hal_flash.c
../../../../Components/hal/target/CC2540USB/hal_key.c
../../../../Components/hal/target/CC2540USB/hal_lcd.c
../../../../Components/hal/target/CC2540USB/hal_led.c
../../../../Components/hal/target/CC2540USB/hal_mcu.h
../../../../Components/hal/target/CC2540USB/hal_sleep.c
../../../../Components/hal/target/CC2540USB/hal_startup.c
../../../../Components/hal/target/CC2540USB/hal_timer.c
../../../../Components/hal/target/CC2540USB/hal_types.h
../../../../Components/hal/target/CC2540USB/hal_uart.c
../../../../Components/hal/target/CC2540USB/usb/class_cdc/usb_cdc.h
../../../../Components/hal/target/CC2540USB/usb/class_cdc/usb_cdc_hooks.c
../../../../Components/hal/target/CC2540USB/usb/class_cdc/usb_cdc_hooks.h
../../../../Components/hal/target/CC2540USB/usb/class_cdc/usb_firmware_library_config.c
../../../../Components/hal/target/CC2540USB/usb/class_cdc/usb_firmware_library_config.h
../../../../Components/hal/target/CC2540USB/usb/class_cdc/usb_firmware_library_headers.h
../../../../Components/hal/target/CC2540USB/usb/class_hid/usb_class_requests.c
../../../../Components/hal/target/CC2540USB/usb/class_hid/usb_class_requests.h
../../../../Components/hal/target/CC2540USB/usb/class_hid/usb_firmware_library_config.c
../../../../Components/hal/target/CC2540USB/usb/class_hid/usb_firmware_library_config.h
../../../../Components/hal/target/CC2540USB/usb/class_hid/usb_firmware_library_headers.h
../../../../Components/hal/target/CC2540USB/usb/class_hid/usb_hid.c
../../../../Components/hal/target/CC2540USB/usb/class_hid/usb_hid.h
../../../../Components/hal/target/CC2540USB/usb/class_hid/usb_hid_hooks.c
../../../../Components/hal/target/CC2540USB/usb/class_hid/usb_hid_reports.c
../../../../Components/hal/target/CC2540USB/usb/class_hid/usb_hid_reports.h
../../../../Components/hal/target/CC2540USB/usb/library/cc2540/usb_board_cfg.h
../../../../Components/hal/target/CC2540USB/usb/library/cc2540/usb_interrupt.c
../../../../Components/hal/target/CC2540USB/usb/library/cc2540/usb_suspend.c
../../../../Components/hal/target/CC2540USB/usb/library/cc2540_hid/usb_board_cfg.h
../../../../Components/hal/target/CC2540USB/usb/library/cc2540_hid/usb_interrupt.c
../../../../Components/hal/target/CC2540USB/usb/library/cc2540_hid/usb_suspend.c
../../../../Components/hal/target/CC2540USB/usb/library/usb/usb_descriptor_parser.c
../../../../Components/hal/target/CC2540USB/usb/library/usb/usb_descriptor_parser.h
../../../../Components/hal/target/CC2540USB/usb/library/usb/usb_framework.c
../../../../Components/hal/target/CC2540USB/usb/library/usb/usb_framework_structs.h
../../../../Components/hal/target/CC2540USB/usb/library/usb/usb_interrupt.h
../../../../Components/hal/target/CC2540USB/usb/library/usb_descriptor.h
../../../../Components/hal/target/CC2540USB/usb/library/usb_framework.h
../../../../Components/hal/target/CC2540USB/usb/library/usb_hid/usb_descriptor_parser.c
../../../../Components/hal/target/CC2540USB/usb/library/usb_hid/usb_descriptor_parser.h
../../../../Components/hal/target/CC2540USB/usb/library/usb_hid/usb_framework.c
../../../../Components/hal/target/CC2540USB/usb/library/usb_hid/usb_framework_structs.h
../../../../Components/hal/target/CC2540USB/usb/library/usb_hid/usb_interrupt.h
../../../../Components/hal/target/CC2540USB/usb/library/usb_reg.h
../../../../Components/hal/target/CC2540USB/usb/library/usb_standard_requests.c
../../../../Components/hal/target/CC2540USB/usb/library/usb_standard_requests.h
../../../../Components/hal/target/CC2540USB/usb/library/usb_suspend.h
../../../../Components/hal/target/CC2541ARC/AIR_MOTION_Lib.h
../../../../Components/hal/target/CC2541ARC/hal_accel.c
../../../../Components/hal/target/CC2541ARC/hal_accel.h
../../../../Components/hal/target/CC2541ARC/hal_aes.c
../../../../Components/hal/target/CC2541ARC/hal_aes.h
../../../../Components/hal/target/CC2541ARC/hal_buzzer.c
../../../../Components/hal/target/CC2541ARC/hal_buzzer.h
../../../../Components/hal/target/CC2541ARC/hal_drivers.c
../../../../Components/hal/target/CC2541ARC/hal_drivers.h
../../../../Components/hal/target/CC2541ARC/hal_gyro.c
../../../../Components/hal/target/CC2541ARC/hal_gyro.h
../../../../Components/hal/target/CC2541ARC/hal_i2c.c
../../../../Components/hal/target/CC2541ARC/hal_i2c.h
../../../../Components/hal/target/CC2541ARC/hal_key.c
../../../../Components/hal/target/CC2541ARC/hal_mcu.h
../../../../Components/hal/target/CC2541ARC/hal_motion.c
../../../../Components/hal/target/CC2541ARC/hal_motion.h
../../../../Components/hal/target/CC2541ARC/hal_sleep.c
../../../../Components/hal/target/CC2541ARC/hal_types.h
../../../../Components/hal/target/CC2541ARC/stdbool.h
../../../../Components/hal/target/CC2541ARC/stdint.h
../../../../Components/hal/target/CC2541ST/hal_acc.c
../../../../Components/hal/target/CC2541ST/hal_acc.h
../../../../Components/hal/target/CC2541ST/hal_aes.c
../../../../Components/hal/target/CC2541ST/hal_aes.h
../../../../Components/hal/target/CC2541ST/hal_assert.c
../../../../Components/hal/target/CC2541ST/hal_bar.c
../../../../Components/hal/target/CC2541ST/hal_bar.h
../../../../Components/hal/target/CC2541ST/hal_board_cfg.h
../../../../Components/hal/target/CC2541ST/hal_crc.c
../../../../Components/hal/target/CC2541ST/hal_crc.h
../../../../Components/hal/target/CC2541ST/hal_dma.c
../../../../Components/hal/target/CC2541ST/hal_dma.h
../../../../Components/hal/target/CC2541ST/hal_flash.c
../../../../Components/hal/target/CC2541ST/hal_gyro.c
../../../../Components/hal/target/CC2541ST/hal_gyro.h
../../../../Components/hal/target/CC2541ST/hal_humi.c
../../../../Components/hal/target/CC2541ST/hal_humi.h
../../../../Components/hal/target/CC2541ST/hal_i2c.c
../../../../Components/hal/target/CC2541ST/hal_i2c.h
../../../../Components/hal/target/CC2541ST/hal_interrupt.c
../../../../Components/hal/target/CC2541ST/hal_irtemp.c
../../../../Components/hal/target/CC2541ST/hal_irtemp.h
../../../../Components/hal/target/CC2541ST/hal_keys.c
../../../../Components/hal/target/CC2541ST/hal_keys.h
../../../../Components/hal/target/CC2541ST/hal_led.c
../../../../Components/hal/target/CC2541ST/hal_mag.c
../../../../Components/hal/target/CC2541ST/hal_mag.h
../../../../Components/hal/target/CC2541ST/hal_mcu.h
../../../../Components/hal/target/CC2541ST/hal_sensor.c
../../../../Components/hal/target/CC2541ST/hal_sensor.h
../../../../Components/hal/target/CC2541ST/hal_sleep.c
../../../../Components/hal/target/CC2541ST/hal_startup.c
../../../../Components/hal/target/CC2541ST/hal_timer.c
../../../../Components/hal/target/CC2541ST/hal_types.h
../../../../Components/osal/common/OSAL.c
../../../../Components/osal/common/OSAL_ClockBLE.c
../../../../Components/osal/common/OSAL_Memory.c
../../../../Components/osal/common/OSAL_PwrMgr.c
../../../../Components/osal/common/OSAL_Timers.c
../../../../Components/osal/common/osal_bufmgr.c
../../../../Components/osal/common/osal_cbtimer.c
../../../../Components/osal/include/OSAL.h
../../../../Components/osal/include/OSAL_Clock.h
../../../../Components/osal/include/OSAL_Memory.h
../../../../Components/osal/include/OSAL_Nv.h
../../../../Components/osal/include/OSAL_PwrMgr.h
../../../../Components/osal/include/OSAL_Tasks.h
../../../../Components/osal/include/OSAL_Timers.h
../../../../Components/osal/include/ZComDef.h
../../../../Components/osal/include/comdef.h
../../../../Components/osal/include/osal_bufmgr.h
../../../../Components/osal/include/osal_cbtimer.h
../../../../Components/osal/include/osal_snv.h
../../../../Components/osal/mcu/cc2540/osal_snv.c
../../../../Components/services/saddr/saddr.h
../../Include/gapgattserver.h
../../Include/gatt_profile_uuid.h
../../Include/gattservapp.h
../../Profiles/Accelerometer/accelerometer.c
../../Profiles/Accelerometer/accelerometer.h
../../Profiles/Batt/battservice.c
../../Profiles/Batt/battservice.h
../../Profiles/BloodPressure/bpservice.c
../../Profiles/BloodPressure/bpservice.h
../../Profiles/CSC/cyclingservice.c
../../Profiles/CSC/cyclingservice.h
../../Profiles/DevInfo/devinfoservice.c
../../Profiles/DevInfo/devinfoservice.h
../../Profiles/Glucose/glucservice.c
../../Profiles/Glucose/glucservice.h
../../Profiles/HIDDev/hiddev.c
../../Profiles/HIDDev/hiddev.h
../../Profiles/HIDDevKbM/hidkbmservice.c
../../Profiles/HIDDevKbM/hidkbmservice.h
../../Profiles/HIDDevKbd/hidkbdservice.c
../../Profiles/HIDDevKbd/hidkbdservice.h
../../Profiles/HeartRate/heartrateservice.c
../../Profiles/HeartRate/heartrateservice.h
../../Profiles/Keys/simplekeys.c
../../Profiles/Keys/simplekeys.h
../../Profiles/OAD/oad.h
../../Profiles/OAD/oad_target.c
../../Profiles/OAD/oad_target.h
../../Profiles/Proximity/proxreporter.c
../../Profiles/Proximity/proxreporter.h
../../Profiles/RSC/runningservice.c
../../Profiles/RSC/runningservice.h
../../Profiles/Roles/broadcaster.c
../../Profiles/Roles/broadcaster.h
../../Profiles/Roles/central.c
../../Profiles/Roles/central.h
../../Profiles/Roles/gap.c
../../Profiles/Roles/gapbondmgr.c
../../Profiles/Roles/gapbondmgr.h
../../Profiles/Roles/gapperiphbondmgr.c
../../Profiles/Roles/gapperiphbondmgr.h
../../Profiles/Roles/observer.c
../../Profiles/Roles/observer.h
../../Profiles/Roles/peripheral.c
../../Profiles/Roles/peripheral.h
../../Profiles/Roles/peripheralBroadcaster.c
../../Profiles/Roles/peripheralBroadcaster.h
../../Profiles/ScanParam/scanparamservice.c
../../Profiles/ScanParam/scanparamservice.h
../../Profiles/SensorProfile/accelerometerservice.c
../../Profiles/SensorProfile/accelerometerservice.h
../../Profiles/SensorProfile/barometerservice.c
../../Profiles/SensorProfile/barometerservice.h
../../Profiles/SensorProfile/ccservice.c
../../Profiles/SensorProfile/ccservice.h
../../Profiles/SensorProfile/gyroservice.c
../../Profiles/SensorProfile/gyroservice.h
../../Profiles/SensorProfile/humidityservice.c
../../Profiles/SensorProfile/humidityservice.h
../../Profiles/SensorProfile/irtempservice.c
../../Profiles/SensorProfile/irtempservice.h
../../Profiles/SensorProfile/magnetometerservice.c
../../Profiles/SensorProfile/magnetometerservice.h
../../Profiles/SensorProfile/st_util.c
../../Profiles/SensorProfile/st_util.h
../../Profiles/SensorProfile/testservice.c
../../Profiles/SensorProfile/testservice.h
../../Profiles/SimpleProfile/simpleGATTprofile.c
../../Profiles/SimpleProfile/simpleGATTprofile.h
../../Profiles/SimpleProfile/simpleGATTprofile_Bridge.c
../../Profiles/SimpleProfile/simpleGATTprofile_Bridge.h
../../Profiles/Thermometer/thermometerservice.c
../../Profiles/Thermometer/thermometerservice.h
../../common/cc2540/OnBoard.c
../../common/cc2540/OnBoard.h
../../common/npi/npi_np/npi.c
../../common/npi/npi_np/npi.h
HostTest_Main.c
OSAL_HostTest.c
hci_ext_app.c
hci_ext_app.h
..\..\util\EBL\app\sbl_app.c
..\..\util\SBL\app\sbl_app.c
..\..\util\UBL\soc_8051\usb_msd\app\ubl_app.c
/usr/include/limits.h
/usr/include/stdint.h
/usr/include/string.h
dma.h
hal_types.h
hal_wait.h
ioCC254x_bitdef.h
/usr/include/_ansi.h
/usr/include/bits/wordsize.h
/usr/include/features.h
/usr/include/sys/cdefs.h
/usr/include/sys/features.h
/usr/include/sys/reent.h
/usr/include/sys/string.h
/usr/include/assert.h
/usr/include/machine/_default_types.h
/usr/include/newlib.h
/usr/include/sys/_types.h
/usr/include/sys/config.h
/usr/include/sys/custom_file.h
/usr/include/sys/types.h
/usr/include/cygwin/config.h
/usr/include/cygwin/types.h
/usr/include/machine/_types.h
/usr/include/machine/ieeefp.h
/usr/include/machine/types.h
/usr/include/sys/lock.h
/usr/include/sys/sched.h
/usr/include/endian.h
/usr/include/sys/sysmacros.h
/usr/include/bits/endian.h
/usr/include/byteswap.h
